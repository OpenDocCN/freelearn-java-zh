<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Interactive Application Design and Theory"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Interactive Application Design and Theory</h1></div></div></div><div class="blockquote"><table border="0" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote"><tr><td valign="top"> </td><td valign="top"><p><span class="emphasis"><em>"If you never did, you should. These things are fun and fun is good."</em></span></p></td><td valign="top"> </td></tr><tr><td valign="top"> </td><td colspan="2" align="right" valign="top" style="text-align: center">--<span class="attribution"><span class="emphasis"><em>Dr. Suess</em></span></span></td></tr></table></div><p>Creating engaging and immersive experiences in Greenfoot is far more involving than compiling a collection of programming effects into one application. In this chapter, you will learn how to engage your user by understanding the relationship between user choice and outcome, conditioning the user, and including the right level of complexity into your work. You will be shown a proven iterative development process that will help you put theory into practice. The topics that will be covered in the chapter are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Meaningful play<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Choice, action, and outcomes</li><li class="listitem">Complexity</li><li class="listitem">Goals</li></ul></div></li><li class="listitem">User conditioning</li><li class="listitem">Storytelling<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Fictional worlds</li><li class="listitem">Narrative descriptors</li></ul></div></li><li class="listitem">Interactive entertainment iterative development process</li></ul></div><p>As we discuss the topics of this chapter, we will refer to the Avoider game we created in <a class="link" title="Chapter 1. Let's Dive Right in…" href="part0014.xhtml">Chapter 1</a>, <span class="emphasis"><em>Let's Dive Right in…</em></span> and <a class="link" title="Chapter 2. Animation" href="part0017.xhtml">Chapter 2</a>, <span class="emphasis"><em>Animation</em></span>. We will discuss items already implemented in the game to illustrate interactive design concepts and demonstrate other concepts by adding new features. In this chapter, we are discussing methods to engineer fun. That might sound strange, but creating fun is the main goal of the designers of games and other forms of interactive entertainment. And, as Dr. Suess so elegantly puts it, "These things are fun and fun is good."</p><div class="section" title="Meaningful play"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec28"/>Meaningful play</h1></div></div></div><p>Learning to create <a id="id311" class="indexterm"/>experiences that are meaningful to users is the most important skill needed by developers of interactive applications. It is the meaning of the interaction that drives players to invest time and energy in playing your application. We want to invoke feelings of happiness, anger, pride, relief, caring, astonishment, surprise, elation, or satisfaction in our users. To do this, <span class="emphasis"><em>we need to provide immediate and long-term feedback to difficult choices and actions taken by the user</em></span>.</p><p>Let's look at a few clarifying examples that might take place in a role-playing game (RPG). Imagine that you are a wizard wondering through a forest-covered mountain when you come upon a cave. Peeking into the cave, you see in the dim light a sleeping dragon surrounded by treasure. The following are some possible interactions that could take place. We will discuss each, and determine if it created meaningful play.</p><p><span class="strong"><strong>Scenario 1</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>User choice</strong></span>: You<a id="id312" class="indexterm"/> look through your spell book and decide to cast the spell <span class="emphasis"><em>Fireball</em></span>.</li><li class="listitem"><span class="strong"><strong>User action</strong></span>: You cast the spell on the dragon.</li><li class="listitem"><span class="strong"><strong>System feedback/outcome</strong></span>: The fireball hits the dragon. Nothing happens afterwards.</li></ul></div><p>What!?!?? Did your spell fail? Is the game broken? Does the dragon have an aura of anti-magic? Did you actually miss? We get absolutely no meaning from this interaction. The player is left confused and disengaged. Let's look at another scenario.</p><p><span class="strong"><strong>Scenario 2</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>User choice</strong></span>: You look through your spell book and decide to cast the spell <span class="emphasis"><em>Fireball</em></span>.</li><li class="listitem"><span class="strong"><strong>User action</strong></span>: You cast the spell on the dragon.</li><li class="listitem"><span class="strong"><strong>System feedback/outcome</strong></span>: The fireball hits the dragon. The dragon laughs and says, "Puny mortal. Go immediately, and I will let you live."</li></ul></div><p>The meaning is perfectly clear here. You have little power and you have no chance against a creature as strong as a dragon. You could choose to talk to the dragon, but he has indicated extreme annoyance at your presence. Are you going to press your luck or flee? Maybe one day, you'll grow strong enough to come back and take that treasure from this dragon. For now, you might be feeling lucky, inspired to be better, frightened, or frustrated at your lack of progress. However, you are feeling something and the interaction definitely had meaning.</p><p><span class="strong"><strong>Scenario 3</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>User choice</strong></span>: You <a id="id313" class="indexterm"/>look through your spell book and decide to cast the spell <span class="emphasis"><em>Fireball</em></span>.</li><li class="listitem"><span class="strong"><strong>User action</strong></span>: You cast the spell on the dragon.</li><li class="listitem"><span class="strong"><strong>System feedback/outcome</strong></span>: The fireball hits the dragon. The dragon screams in agony before disintegrating.</li></ul></div><p>Ah, it is time to collect your loot. You marvel at your supreme power. Perhaps you should have allowed the dragon one chance to flee? Nah, it probably would not have done that for you. This interaction re-affirms your greatness.</p><p>The key to creating engaging applications is producing meaningful interactions on a moment-to-moment basis with the user. If a choice and action do not have a meaningful outcome, then why bother your users with it? <span class="emphasis"><em>Every interaction in your interactive applications needs to be meaningful.</em></span> This is what Salen and Zimmerman refer to as <span class="emphasis"><em>descriptive meaningful play</em></span> in their book, <span class="emphasis"><em>Rules of Play</em></span>.</p><p>Another very important aspect to your application is the long-term outcome of a user's action. For example, in Scenario 3, the player could be referred to as Dragon Slayer, later in the game. The fine items purchased with the loot should be useful later in the game. <span class="emphasis"><em>The outcomes of actions need to persist in the game</em></span>. Salen and Zimmerman refer to this as <span class="emphasis"><em>evaluative meaningful play</em></span>.</p><p>Meaningful play is not only for games. The same thought process should be used to design any application. For example, if a user clicks on an item on an e-commerce site that they are interested in purchasing, there should be immediate visual feedback, such as the shopping cart icon displaying a 1 instead of a 0 or, going even further, the sound of a cheering crowd playing for a couple of seconds. If a user types in a word processing document, the word processing application should highlight the Save icon or put an asterisk by the filename to indicate that there are unsaved changes. If a person is taking a survey, there should a progress meter to let them know how many questions they have left to answer. Perhaps you could offer words of encouragement every time the user completes five survey questions.</p><div class="section" title="Complexity"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec44"/>Complexity</h2></div></div></div><p>There is a really funny game that <a id="id314" class="indexterm"/>demonstrates what a game plays like when the player's choices are overly simplistic. It is called <span class="emphasis"><em>Super PSTW Action RPG</em></span>. In this RPG, you only have one control—the spacebar. For every given situation, you simply hit the spacebar. If you haven't guessed, the PSTW in the title stands for<a id="id315" class="indexterm"/> <span class="strong"><strong>Press Space To Win</strong></span>.</p><p>Obviously, this game<a id="id316" class="indexterm"/> is a joke, but it is also an interesting experiment in game design. There is no meaningful play in the game, because the choice and action a player has to take is trivial. The actions and outcomes are well designed, but that is insufficient. Without complexity of choice, there is no meaningful play. We don't have to go to such an extreme example to demonstrate this point. Have you ever played the card game <a id="id317" class="indexterm"/>War? If not, you can quickly review the rules here: <a class="ulink" href="http://en.wikipedia.org/wiki/War_(card_game)">http://en.wikipedia.org/wiki/War_(card_game)</a>. This game also has no meaningful play. Throughout the game, the player either flips a card over or places three cards face down and then flips a card over. The current game state completely informs the player of which action they should take. There are no tradeoffs to consider and no risk analysis to be done. It is all mechanical play. For most players older than 10 years, Tic-Tac-Toe suffers from the same lack of meaningful play.</p><p>For meaningful play to exist, the decisions a player makes should require sufficient mental effort. A player must have several options available to them and each option should involve different tradeoffs, risks, and rewards. For example, in our RPG scenarios above, the player might have the following choices available to them: cast Fireball, cast Lightning Strike, cast Charm Monster, talk, or flee. Perhaps the player has learned previously in the game, that charm spells rarely work on dragons and that certain dragons are immune to either fire or lightning. The player could choose to flee. This is a low-reward, low-risk option.</p><p>When a player is making non-trivial decisions, taking action, and is provided with clear feedback, then the game becomes meaningful. When making decisions in an interactive application or game, the player needs to know what the goals of the interaction are. Is it to create custom pieces of music, become the most powerful wizard, or get the best deals on an e-commerce site? Setting up user goals is the next most important aspect of creating engaging applications.</p></div><div class="section" title="Goals"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec45"/>Goals</h2></div></div></div><p>Goals provide the players <a id="id318" class="indexterm"/>the means to assess their decisions in their moment-to-moment and long-term interactions with your application. After each interaction, the user can ask, "Did my last choice and action bring me closer to completing my goal?" With this type of ongoing assessment, users can augment and optimize their decision processes, in order to more quickly achieve their goals. In essence, the players use goals as guides to learning optimal ways to interact with your application.</p><p>In writing an interactive application, you must set up clear goals and subgoals for your users. This is why high-score lists are so popular in many games. The simple fact of having one provides the goal of the game—score as many points as possible. As people play your game, they will constantly judge if their last course of action or long-term actions have led to the maximum amount of points. This enhances the meaningful play of the game.</p><p>In industry, companies will often try and <a id="id319" class="indexterm"/>gamify their applications or services. For example, the airline industry sets up programs to earn free flying miles. So, the customer is now engaged in making decisions that optimize their ability to gain free miles to earn a free airline flight. It often makes sense to establish subgoals to keep the customer invested along the way. If it takes a year or two to earn enough free flying miles, then the consumer could get discouraged. An airline might decide to offer intermediate goals, such as earning a free travel mug after achieving a certain, smaller amount of miles. Subgoals are very important to drive short-term behavior, as are rewards. We will talk further about methods of conditioning users next.</p></div></div></div>
<div class="section" title="User conditioning"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec29"/>User conditioning</h1></div></div></div><p>In creating an interactive <a id="id320" class="indexterm"/>application or game, we want the user experience to be the best it can be. In creating meaningful play, we have given the user a rich set of options to choose from, and their path through the game has many possible states and outcomes. As the possible states and transitions in the game increase, it becomes harder as a game designer, to ensure that each path through the game states results in a positive interaction. We need to use user conditioning to help guide a user's behavior to interact with our application in predictable ways.</p><p>The effect of conditioning was clearly demonstrated by Ivan Pavlov in an experiment involving a dog and food. In this experiment, Pavlov would ring a bell every time he fed his dog. Eventually, he could get the dog to drool by just ringing a bell. The dog learned to associate a neutral stimulus, like the bell, with food. While it seems weird to say we want to manipulate our users like this, it will help us to guide the user into the most favorable interactions with our application.</p><p>There are three methods we will use to condition our users:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Positive reinforcement</strong></span>: Give the <a id="id321" class="indexterm"/>user a reward for doing the behavior we want.</li><li class="listitem"><span class="strong"><strong>Negative reinforcement</strong></span>: Take<a id="id322" class="indexterm"/> away something negative when the user does the desired behavior.</li><li class="listitem"><span class="strong"><strong>Punishment</strong></span>: Take away <a id="id323" class="indexterm"/>something positive or add something negative when the users exhibit the wrong behavior.</li></ul></div><p>We want to treat our users with respect, and we want them to have a good time; therefore, positive reinforcement should be the way we condition our users the most. We want to give them rewards <a id="id324" class="indexterm"/>for doing the correct behavior. In a game, we might give them points, an extra life, an extra ability, or access to a new part of the game. Whether you are creating a game or an interactive application, you should have a set reward schedule for your users. Some rewards could be given frequently, such as earning points for disposing of an enemy, while other rewards could be more rare, such as giving the character the ability to fly.</p><p>Giving rewards<a id="id325" class="indexterm"/> allows us to tell the player which behaviors are favored in the game. If we wanted the user to get through an area as fast as possible, we could give a reward for doing it under 30 seconds. If we wanted the user to explore the controls and find fighting move combinations, we could give extra points whenever three fighting combinations are done in a row. If we wanted our users to pick flowers, we could provide a 0.001 percent chance to receive the most powerful item in the game every time a flower is picked. If we wanted a customer to buy coffee at a store more often, we could give them every twelfth drink free. Rewards are a powerful mechanism to condition users.</p><p>Negative reinforcement<a id="id326" class="indexterm"/> is less used but still a powerful tool to condition users. In the last paragraph, I mentioned that you could encourage your player to move fast through an area by giving them a reward for making it through in under 30 seconds. Using negative reinforcement, we could drive the same behavior. Imagine that you are in very large room and the ceiling starts slowly moving down. You become aware that if you do not get out quickly, you will get squashed. By moving quickly to the other side of the room and leaving, you no longer have this pressure to move quick. This is negative reinforcement. Other examples of negative reinforcement include making the lighting dark in an area and playing creepy music, in order to encourage the player to get out of this area quickly (the game Bioshock is great at this), sounding a siren when the player is in a place they shouldn't be in, or blinking the screen until your health gets back to an acceptable level.</p><p>Ultimately, punishment<a id="id327" class="indexterm"/> is a necessary component of game play, although not usually included in the gamification of a non-game application. There eventually have to be hard consequences for not meeting game objects. This could include subtracting points, subtracting money, losing a life, and eventually losing the game. Punishment is necessary because there has to be some risk associated with the choices a player makes, in order to achieve meaningful play. Just try not to be too hard on your users. The whole point of making a game is to provide an engaging, recreational activity.</p></div>
<div class="section" title="Storytelling"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec30"/>Storytelling</h1></div></div></div><p>Telling and appreciating stories has been<a id="id328" class="indexterm"/> engrained into our culture since the earliest times. We present stories in many different formats and mediums. They appear in oral traditions, the written word, theatre, cinema, and games. Games are one of the newest forms of storytelling but perhaps the most compelling for one simple reason—YOU are the main character of the story. In traditional methods of storytelling, the author must spend sufficient time building up a relatable character that the audience cares about. In games, you get this for free. You are the character.</p><div class="section" title="Fictional worlds"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec46"/>Fictional worlds</h2></div></div></div><p>In games, stories have an additional <a id="id329" class="indexterm"/>role other than just pure entertainment. The story <a id="id330" class="indexterm"/>creates a fictional world for the player of the game that helps guide their experience. It provides context for the actions and the motivation to achieve goals. Why are we killing these aliens in this game? Well, given that they just wiped out all of South America and are heading north, we know we need to stop their advance soon if the world is to stand a chance of surviving this invasion. If a game takes place in outer space, you expect to have spaceships, lasers, and aliens. There is a whole wealth of information given to your player by just telling them that the story takes place in the Old West, under water, or on a soccer field.</p><p>For any game, you should have a rich and complete story that covers what happens in your game's fictional world before the game is played, what happens to it during the game, and what happens afterwards—even if the user will never experience the before and after. Your fictional world and story not only provide context and motivation for the player, but they also serve as a guide to the game designer. As you add and subtract features from the game, as you go through the interactive entertainment development process (described in the section by the same name), you need to make sure you stay true to both.</p></div><div class="section" title="Narrative descriptors"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec47"/>Narrative descriptors</h2></div></div></div><p>Everything in your game <a id="id331" class="indexterm"/>contributes to<a id="id332" class="indexterm"/> the story and your fictional world—the graphics on the box your game is shipped in, the manual, and the sounds and images in your game. You want your player to imagine a rich and vibrant world by providing appropriate and consistent narrative descriptors. Luckily, it does not take many prompts to get your user to imagine a complex world due to the principle of minimal departure. This principle states that people will use their knowledge of the world to fill in any missing gaps they see in an incomplete image. Take a few moments to look at <span class="emphasis"><em>Figure 1</em></span>. What do you imagine lives in those mountains? Does this world have gravity? What else can you say about the world depicted in this figure? Whatever you come up with, you did so using the principle of minimal departure.</p><div class="mediaobject"><img src="../Images/image00292.jpeg" alt="Narrative descriptors"/><div class="caption"><p>Figure 1: This is an example of the principle of minimal departure.</p></div></div><p style="clear:both; height: 1em;"> </p><p>Now, take a<a id="id333" class="indexterm"/> look at <span class="emphasis"><em>Figure 2</em></span>. What has been added to the picture? How does this change your <a id="id334" class="indexterm"/>perception of the world? What if I would have added a caveman instead of a robot?</p><div class="mediaobject"><img src="../Images/image00293.jpeg" alt="Narrative descriptors"/><div class="caption"><p>Figure 2: This shows the power of one narrative descriptor to completely change the fictional world</p></div></div><p style="clear:both; height: 1em;"> </p><p>Just as in a movie, everything that appears in your game or interactive application should perpetuate the story. For example, if you create an interactive history simulation of medieval times, then you should use a font that matches the time period and not use Courier New. If you have a game that takes place during World War I, then perhaps instead of showing a vanilla health bar for your player, you could show the picture of a soldier that <a id="id335" class="indexterm"/>looks<a id="id336" class="indexterm"/> more injured as you take more damage.</p><div class="note" title="Note"><h3 class="title"><a id="note20"/>Note</h3><p><span class="strong"><strong>Disney</strong></span></p><p>Disney provides great stories and is a master of using narrative descriptors. Have you ever been to Disneyland? I once had the privilege to be given a tour of Disneyland by Disney Imagineers and artists. The first thing that struck me, is how every employee of Disney recites the same mantra, "Story, story, story". I was surprised to find that on the tour my guides continually pointed out their use of narrative descriptors. In the different lands, they would show me how the concrete, plants, trash cans, and lighting all contributed to the story of the area. They knew that one item out of place could confuse or destroy the fictional worlds that their customers were imagining.</p></div></div></div>
<div class="section" title="The interactive entertainment iterative development process"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec31"/>The interactive entertainment iterative development process</h1></div></div></div><p>All of the design principles we<a id="id337" class="indexterm"/> have discussed thus far in this chapter will help you to create meaningful, engaging interactive applications. However, they are not enough. As you proceed with designing and building your game, you get to know the game deeply and lose your ability to be an unbiased judge of it. In addition, what you find fun and meaningful, could be confusing to others. You have to realize that if you have created a game with sufficient complexity, you will not be able to predict game play.</p><p>The only way to give your application the best chance of success, is to develop it using the interactive entertainment iterative development method shown in <span class="emphasis"><em>Figure 3</em></span>.</p><div class="mediaobject"><img src="../Images/image00294.jpeg" alt="The interactive entertainment iterative development process"/><div class="caption"><p>Figure 3: This is the interactive entertainment iterative development process</p></div></div><p style="clear:both; height: 1em;"> </p><p>Next, we will talk <a id="id338" class="indexterm"/>about having an initial idea for a game and some upfront work you need to do to make an effective game pitch. In the gaming industry, game developers have to pitch their game and convince peers and management that this game is worth investing in. If you are working with a small team, you will still need to pitch the game to developers and artists that you want to recruit to work on your project. After talking about the upfront work, we will discuss each stage of the iterative design process in turn.</p><div class="section" title="Game pitch and initial design"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec48"/>Game pitch and initial design</h2></div></div></div><p>So, you have an<a id="id339" class="indexterm"/> idea and a desire to<a id="id340" class="indexterm"/> build a game. What should you do next? You need to create a clear and concise way to describe your game to others. You need to be able to describe the world you are creating, the story behind this world, the major goal of the game, and a rough draft of the game rules. Here is a detailed process for creating this information:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In one paragraph, write a description of your game. Try to keep it to five sentences or less. Be clear, specific, and concise. As your game evolves over time, be sure to update this paragraph.</li><li class="listitem">Write the story of your game, including what happened before your game, what happens during your game, and what happens after your game. This will end up being a guide that all developers, designers, and artists will consult as they consider new features and assets for the game. Again, keep this document up-to-date.</li><li class="listitem">In one sentence, state the game's goal. What is the player trying to achieve?</li><li class="listitem">In one sentence, state how one player will know if he/she is better than another. Is the best player the one with the most points? Furthest progress? Best time?</li><li class="listitem">Write a draft of the rules of the game. Try to come up with at least five major rules. Rules provide a formal description of your game. Every game has a concise set of rules.</li><li class="listitem">Create a storyboard of your game. A storyboard reads like a comic book and depicts the main storyline and concept art for the game. Storyboards are a major design tool, used in both the gaming and movie industries.</li></ol><div style="height:10px; width: 1px"/></div><p>After creating<a id="id341" class="indexterm"/> this information, make <a id="id342" class="indexterm"/>sure to keep it located in a central location that is shared among all team members and updated as the game evolves. When you are unsure what feature would be best to add to the game, or whether you should add a twist to the story, consult these documents and make sure everything stays consistent.</p></div><div class="section" title="Prototype"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec49"/>Prototype</h2></div></div></div><p>In this step, you implement a <a id="id343" class="indexterm"/>few features to your game that you have already decided upon in the last iteration's Refinement step. If this is your first iteration, pick a few simple things to implement, such as a main character, movement controls, and maybe one enemy. This step only contains coding and no design work. That was done through the last iteration.</p></div><div class="section" title="Playtest"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec50"/>Playtest</h2></div></div></div><p>This iterative development <a id="id344" class="indexterm"/>process encourages play-based design. In play-based design, you have volunteers playtest your game. They evaluate it, not based on a description you give them, but on how the game actually plays. Early stages will be simplistic and evaluators might only be able to comment on whether the controls feel natural or how the navigation feels. As the game evolves, so will their ability to provide feedback.</p><p>Your playtesting session should be well defined and repeatable. You want to make sure every playtester has the same experience, so that you can reliably compile and compare their feedback. To conduct a playtest, you should:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Have a computer available that has the prototype of your game ready to play.</li><li class="listitem">Provide your tester with a short explanation of the playtesting procedure and then give them a short description of your game and what features are available for testing.</li><li class="listitem">Allow your player 5–20 minutes of play time, depending on how many features you want tested during this iteration. Try not to interrupt your playtester (even if you notice them doing something very wrong) and only speak to them if they ask you a question. Provide short answers, but do not elaborate.</li><li class="listitem">Observe the <a id="id345" class="indexterm"/>body language of your tester. Do they seem bored? Frustrated? Engaged? Are they looking at their watch or surprised when you tell them that their 10 minutes of playing are up?</li><li class="listitem">When your playtester is done with the game, give them a short survey. Ask them questions about the game's controls, rules, goals, and story. Ask them whether they felt the challenge of the game was balanced. Did they think they had sufficient options to consider on a moment-to-moment basis? Was the look and feel of the game consistent? Did your choice of narrative descriptors work well? Were they ever confused on what to do next? Collect some demographics on your testers. How old are they? Are they casual or hardcore gamers?</li><li class="listitem">Have an open question-and-answer period. Do they have any suggestions on how to improve the game? Were there aspects they did not enjoy?</li></ol><div style="height:10px; width: 1px"/></div><p>Make sure to thank your playtester and go over the information you collected. This is your last chance to get clarification from the tester. After doing all of this, you are ready to move to the next stage.</p></div><div class="section" title="Evaluation"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec51"/>Evaluation</h2></div></div></div><p>The evaluation stage<a id="id346" class="indexterm"/> is very mechanical. In this stage, you only compile the results you received from all of your playtesters. Compile all of the results from the survey. Is there a consensus on certain answers? For example, 80 percent of the playtesters felt the controls were awkward, or 100 percent of the players did not know what to do after killing the first enemy. For the open question-and-answer session, are there any suggestions that multiple testers made? From the body language observations, did a majority of the players ask if they were done playtesting before the time expired?</p></div><div class="section" title="Refinement"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec52"/>Refinement</h2></div></div></div><p>The real design work happens in<a id="id347" class="indexterm"/> this stage. Pick the top two or four issues with the game identified during playtesting and write them down. Now, brainstorm the changes, additions, or subtractions you could make to the game to address these issues. Your ideas could include suggestions playtesters gave you or not. You are not obligated at all to directly use the suggestions given to you by your playtesters; however, you should give them special consideration. While brainstorming, do not filter your, or your teammates' ideas. On a piece of paper, record at least twenty changes you could make to your game.</p><p>After<a id="id348" class="indexterm"/> brainstorming twenty ideas, prioritize them based on how effectively they address the top issues raised by your playtesters and also based on the scope of work needed to implement the idea. Choose your top two to five ideas and implement them in the upcoming prototype stage. The process begins again.</p></div><div class="section" title="Benefits"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec53"/>Benefits</h2></div></div></div><p>The interactive entertainment iterative <a id="id349" class="indexterm"/>development process allows you to incrementally grow your game in a way that is pleasing to users. By doing quick iterations, you quickly find development paths that should be abandoned and others that should be started. While it might seem initially to be time consuming, the process will actually save you a lot of development time in the long run and greatly increase the chances that you converge on a game that is truly fun to play.</p></div></div>
<div class="section" title="Avoider Game"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec32"/>Avoider Game</h1></div></div></div><p>In the first couple of chapters in this<a id="id350" class="indexterm"/> book, we worked on Avoider Game, then switched to a zombie invasion simulation, and then a platform game. We will go back to Avoider Game and use it to demonstrate the concepts discussed earlier in this chapter. You<a id="id351" class="indexterm"/> can either start with your version of Avoider Game or download this version: <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a></p><div class="section" title="Avoider Game recap"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec54"/>Avoider Game recap</h2></div></div></div><p>Our version of Avoider Game which <a id="id352" class="indexterm"/>we created in <a class="link" title="Chapter 1. Let's Dive Right in…" href="part0014.xhtml">Chapter 1</a>, <span class="emphasis"><em>Let's Dive Right in…</em></span> and <a class="link" title="Chapter 2. Animation" href="part0017.xhtml">Chapter 2</a>, <span class="emphasis"><em>Animation</em></span> is fairly functional. It has an introduction screen, a game-over screen, a moving star field, interesting actor animations, a score, power-ups, and power-downs. <span class="emphasis"><em>Figure 4</em></span> shows a screenshot from the game.</p><div class="mediaobject"><img src="../Images/image00295.jpeg" alt="Avoider Game recap"/><div class="caption"><p>Figure 4: This is a snapshot of our version of Avoider Game</p></div></div><p style="clear:both; height: 1em;"> </p><p>In the next<a id="id353" class="indexterm"/> several sections, we will augment this version of Avoider Game. Our changes will be based on the game design principles we just finished studying.</p></div><div class="section" title="High-score list"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec55"/>High-score list</h2></div></div></div><p>The first change we are<a id="id354" class="indexterm"/> going to make<a id="id355" class="indexterm"/> is to add a simple mechanism to record the highest score. We will then display this score on the game-over screen, so that players can see where they stand compared with each other. By adding a high score, we are clearly identifying the main goal of the game—score the most points. To add a high score, make the following changes to the <code class="literal">AvoiderGameOverWorld</code> class:</p><div class="informalexample"><pre class="programlisting">import greenfoot.*;
import java.nio.*;
import java.nio.file.*;
import java.io.IOException;
import java.util.List;

public class AvoiderGameOverWorld extends World {
  public AvoiderGameOverWorld() {
    super(600, 400, 1);
  }
  
  public void act() {
    if( Greenfoot.mouseClicked(this) ) {
      AvoiderWorld world = new AvoiderWorld();
      Greenfoot.setWorld(world);
    }
  }
  
  public void setPlayerHighScore(String s) {
    Label scoreBoardMsg = new Label("Your Score: " + s, 35);
    Label highScoreMsg = new Label("Your Best: " + recordAndReturnHighScore(s), 35);
    addObject(scoreBoardMsg, getWidth()/2, getHeight()*2/3);
    addObject(highScoreMsg, getWidth()/2, (getHeight()*2/3)+45);
  }
  
  private String recordAndReturnHighScore(String s) {
    String hs = null;
    try {
      Path scoreFile = Paths.get("./scoreFile.txt");
      
      if( Files.exists(scoreFile) ) {
        byte[] bytes = Files.readAllBytes(scoreFile);
        hs = new String(bytes);
        
        if( Integer.parseInt(s) &gt; Integer.parseInt(hs) ) {
          Files.write(scoreFile, s.getBytes());
          hs = s;
        }
      } else {
        Files.write(scoreFile, s.getBytes());
        hs = s;
      }
      
    } catch( IOException e ) {
      System.out.println("IOException");
    }
    
    return hs;
  }
}</pre></div><p>The constructor and the <code class="literal">act()</code> method did not change. We added two new methods: <code class="literal">setPlayerHighScore()</code> and <code class="literal">recordAndReturnHighScore()</code>. The <code class="literal">setPlayerHighScore()</code> method is public and will be called by <code class="literal">AvoiderWorld</code> to pass the current player's score, in the form of <code class="literal">String</code>, to the game-over screen. Due to functional <a id="id356" class="indexterm"/>decomposition, this method is fairly simple. It creates <a id="id357" class="indexterm"/>two <code class="literal">Label</code> objects to display the player's score and the high score and then adds these objects to the current world, which is <code class="literal">AvoiderGameOverWorld</code>. The <code class="literal">Label</code> class is new and provides a way to easily create text-based images. We will look at the code for it shortly. First, we will look more closely at the <code class="literal">recordAndReturnHighScore()</code> method, which contains the functionality to retrieve and set the high score.</p><div class="note" title="Note"><h3 class="title"><a id="tip19"/>Tip</h3><p>The <code class="literal">java.nio.file</code> package requires that you have Java 1.7 or later installed.</p></div><p>The <code class="literal">recordAndReturnHighScore()</code> method introduces file I/O. To make the high score persist whether you have Avoider Game open or not, we need to store the high score in a file. Files provide persistent storage. We can use some very simple file I/O operations because we are only storing or retrieving a single <code class="literal">String</code>. First, we make a call to the <code class="literal">Paths.get()</code> static function. This provides the location of the file. Next, we check to see whether the file already exists using the <code class="literal">Files.exists()</code> static function. If the file does not exist, we create and write to it the current player's score using <code class="literal">Files.write()</code>.</p><p>This function will create the file and write to it and then close the file before returning. If the file does exist, then we read its contents using <code class="literal">Files.readAllBytes()</code> which will open the file, read the contents of the file, close the file, and then return the data it read. The last thing we need to do in this method, is to see if the current player's score is larger than the current high score. If it is, we update the file. <code class="literal">recordAndReturnHighScore()</code> then returns the highest score, which will either be the value read from the file or the current player's score. Please note the additional <code class="literal">import</code> statements we added to access these new file I/O classes.</p><div class="note" title="Note"><h3 class="title"><a id="tip20"/>Tip</h3><p>Greenfoot<a id="id358" class="indexterm"/> provides another mechanism to store and maintain high-score lists that only work after you have shared your game/application on the Greenfoot site. To learn more about this, read the Greenfoot online documentation on the <code class="literal">UserInfo</code> class provided by Greenfoot. You can access that documentation<a id="id359" class="indexterm"/> at <a class="ulink" href="http://www.greenfoot.org/files/javadoc/">http://www.greenfoot.org/files/javadoc/</a>. To learn more about the Java file I/O, look at the tutorial <a id="id360" class="indexterm"/>at <a class="ulink" href="http://docs.oracle.com/javase/tutorial/essential/io/index.html">http://docs.oracle.com/javase/tutorial/essential/io/index.html</a>.</p></div><p>Now, we can <a id="id361" class="indexterm"/>look at the code for the <code class="literal">Label</code> class. The <code class="literal">Label</code> class is<a id="id362" class="indexterm"/> a new class we are going to create to help us add text to our game. Create a new subclass of <code class="literal">Actor</code> and call it <code class="literal">Label</code>. Do not associate an image with this class. We will also use this class later in this chapter. Here is the code:</p><div class="informalexample"><pre class="programlisting">import greenfoot.*;
import java.awt.Color;

public class Label extends Actor
{
  GreenfootImage msg;
  
  public Label(String s, int size) {
    this(s, size, Color.white);
  }
  
  public Label(String s, int size, Color c) {
    msg = new GreenfootImage(s, size, c, null);
    setImage(msg);
  }
}</pre></div><p>This class is simple and only contains two constructors; the first one calls the second one with the default color, white. In the second constructor, <code class="literal">String</code>, which is supplied, is converted into an image using <code class="literal">GreenfootImage</code>, and then this image is set to be the default image for this instance of <code class="literal">Label</code>.</p><p>The last change that we need to make to get all this working, is add the code to <code class="literal">AvoiderWorld</code> to pass the player's current score to <code class="literal">AvoiderGameOverWorld</code>. We only need to add one line to the <code class="literal">endGame()</code> method in <code class="literal">AvoiderWorld</code>. Here is the complete implementation of <code class="literal">endGame()</code>:</p><div class="informalexample"><pre class="programlisting">public void endGame() {
  bkgMusic.stop();
  AvoiderGameOverWorld go = new AvoiderGameOverWorld();
  go.setPlayerHighScore(Integer.toString(scoreBoard.getScore()));
  Greenfoot.setWorld(go);
}</pre></div><p>After making this change, compile the game to find and fix any typos that happened along the way. Play it. What's your top score? <span class="emphasis"><em>Figure 5</em></span> demonstrates what your game-over screen should now look like.</p><div class="mediaobject"><img src="../Images/image00296.jpeg" alt="High-score list"/><div class="caption"><p>Figure 5: The game-over screen with the current and high score added.</p></div></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="Achievement badges"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec56"/>Achievement badges</h2></div></div></div><p>Many games and gamification<a id="id363" class="indexterm"/> strategies use the <a id="id364" class="indexterm"/>notion of an achievement badge. This is a badge you earn for accomplishing something difficult or something out of the ordinary. In games and interactive applications, they are a convenient and popular technique of giving players subgoals to complete, conditioning their behavior, and adding complexity of choice. We will add achievement badges to accomplish all of those things in our version of Avoider Game.</p><p>First, we need to come up with a list of achievements. In practice, coming up with the right mix of achievements will take some careful thought, time, and playtesting. Here is the list of achievements I came up with:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Magically Delicious</strong></span>: The player <a id="id365" class="indexterm"/>has to<a id="id366" class="indexterm"/> hit 20 clovers.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">This achievement adds complexity to the choices available to the player on a moment-to-moment basis. Do they dare risk collecting another clover and suffer the slow-down penalty?</li></ul></div></li><li class="listitem"><span class="strong"><strong>Turkey</strong></span>: The player <a id="id367" class="indexterm"/>must collect three rocks in a<a id="id368" class="indexterm"/> row. The user cannot touch any other object during this time.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">This achievement conditions the player to go after rocks even when they are at full health.</li></ul></div></li><li class="listitem"><span class="strong"><strong>Unbreakable</strong></span>: The <a id="id369" class="indexterm"/>player has to touch<a id="id370" class="indexterm"/> an enemy 10 times.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">This achievement adds to the complexity of choices available to the user and serves as a means to increase the challenge during certain slow parts of the game. In the game, you come across small periods of time where you are at full health and there is no immediate danger of being hit by an enemy. During these periods, the player could now choose to take a few hits to increase the number of <a id="id371" class="indexterm"/><span class="strong"><strong>Unbreakable</strong></span> badges they get.</li></ul></div></li><li class="listitem"><span class="strong"><strong>Master Avoider</strong></span>: The player <a id="id372" class="indexterm"/>finishes a <a id="id373" class="indexterm"/>game before hitting three cupcakes in total.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">This achievement reinforces the behavior that we want. We want the player to avoid cupcakes at all costs.</li></ul></div></li></ul></div><p>These achievements also serve as potential subgoals for the user. We will display the badges the player has earned on the game-over screen right next to the main goal—their score.</p><p>The first issue to consider when implementing achievement badges is that, the data needed to determine whether a badge was earned. In our case, this data is distributed between the <code class="literal">PowerItems</code> subclasses and <code class="literal">Avatar</code>. Also, the <code class="literal">AvoiderGameOverWorld</code> class will have to know which badges were earned, so that they can be displayed on the game-over screen. We would like to have a central location to collect this information. Because we need distributed access to a single class, we are going to use the <a id="id374" class="indexterm"/><span class="strong"><strong>Singleton</strong></span> design pattern.</p><div class="note" title="Note"><h3 class="title"><a id="note21"/>Note</h3><p><span class="strong"><strong>Design patterns</strong></span></p><p>As you become <a id="id375" class="indexterm"/>more experienced in programming, you are going to recognize common patterns of coding that emerge in your work. Perhaps in the next game you create, you will also want achievements and think to yourself, "I can just reuse my design of achievements from my version of Avoider Game." In essence, you have a very small, personal design pattern that you can use to create achievements that you can improve upon over time.</p><p>Developers have created very useful design patterns since the inception of programming, that apply to many different types of applications. Design patterns provide a proven, tested method for coding certain functionality that you can easily adapt for your own uses.</p><p>Design <a id="id376" class="indexterm"/>patterns are also very useful to study. By examining them, you can see how some of the best programmers use abstraction to solve complex, recurring issues. They also serve as a concise language that developers can use to effectively communicate with each other. It is far more convenient to say that the <code class="literal">BadgeCenter</code> class in Avoider Game implements the Singleton design pattern rather than trying to describe it from scratch.</p><p>There are a lot of books published on design patterns, but the most famous and popular one is Design Patterns: Elements of Reusable Object-Oriented Software by <span class="emphasis"><em>Gamma et al</em></span>. At some point in your development career, you should read it.</p></div><p>To keep track of player<a id="id377" class="indexterm"/> achievements, we are going to create a class called <code class="literal">BadgeCenter</code> that follows the Singleton design pattern. This new class will not be a subclass of <code class="literal">World</code> or <code class="literal">Actor</code>. To create it, click on <span class="strong"><strong>Edit</strong></span> in the menu bar and then choose <span class="strong"><strong>New Class</strong></span>. You should see the pop-up window shown in <span class="emphasis"><em>Figure 6</em></span>. Type in <code class="literal">BadgeCenter</code> and press <span class="emphasis"><em>Enter</em></span>. We are now ready to add the code.</p><div class="mediaobject"><img src="../Images/image00297.jpeg" alt="Achievement badges"/><div class="caption"><p>Figure 6: This is the popup window used to create a class that is not a subclass of Actor or World</p></div></div><p style="clear:both; height: 1em;"> </p><p>Here is the code for this class:</p><div class="informalexample"><pre class="programlisting">import java.util.ArrayList;
import java.util.List;

public class BadgeCenter //Implemented as a Singleton
{
  private int clovers, rocks, enemies, cupcakes;
  int rockBadges;
  private String previous;
  private ArrayList&lt;Badge&gt; badges = new ArrayList&lt;Badge&gt;();
  private static final BadgeCenter INSTANCE = new BadgeCenter();
  
  private BadgeCenter() {
    clovers = rocks = enemies = cupcakes = 0;
    rockBadges = 0;
  }
  
  public static BadgeCenter getInstance() {
    return INSTANCE;
  }
  
  public void hitClover() {
    ++clovers;
    previous = "clover";
    if( clovers % 20 == 0 ) {
      if( clovers &gt; 80 ) {
        awardBadge("Magically Delicious ");
      } else {
        awardBadge(clovers + " Clovers ");
      }
    }
  }
  
  public void hitRock() {
    if( previous != "rock" ) {
      rocks = 0;
    }
    ++rocks;
    previous = "rock";
    if( rocks &gt; 2 ) {
      rockBadges++;
      rocks = 0;
    }
  }
  
  public void hitEnemy() {
    ++enemies;
    previous = "enemy";
    if( enemies % 10 == 0 ) {
      if( enemies &gt; 60 ) {
        awardBadge( "Unbreakable " );
      } else {
        awardBadge("Hit " + enemies + " times ");
      }
    }
  }
  
  public void hitCupcake() {
    ++cupcakes; // Check if under 3 when return badges
    previous = "cupcake";
  }
  
  public List&lt;Badge&gt; getBadges() {
    if( cupcakes &lt; 3 ) {
      awardBadge("Master Avoider ");
    }
    if( rockBadges &gt; 0 ) {
      awardBadge("Turkey x " + rockBadges + " ");
    }
    cupcakes = 0;
    return badges;
  }
  
  private void awardBadge(String title) {
    badges.add(new Badge(title));
  }
  
}</pre></div><p>Following the<a id="id378" class="indexterm"/> Singleton design pattern, we create a constructor that is <code class="literal">private</code> and provide a <code class="literal">static</code> method called <code class="literal">getInstance()</code> to manage access to the single instance of this class. Since <code class="literal">getInstance()</code> is <code class="literal">static</code>, all of our classes in our version of Avoider Game will have access to it.</p><div class="note" title="Note"><h3 class="title"><a id="tip21"/>Tip</h3><p>In practice, you should try and minimize your use of the keyword <code class="literal">static</code>. While it is very useful in several cases, abusing it can lead to poor design and hard-to-maintain code.</p></div><p>To collect all the data we need, we have four methods: <code class="literal">hitClover()</code>, <code class="literal">hitRock()</code>, <code class="literal">hitEnemy()</code>, and <code class="literal">hitCupcake()</code>. These methods will be called by the <code class="literal">Clover</code>, <code class="literal">Rock</code>, <code class="literal">Avatar</code>, and <code class="literal">Cupcake</code> classes, respectively, to report collisions. Each method tracks the number of hits, sets the <code class="literal">previous</code> variable, and then determines if a badge should be awarded. For example, <code class="literal">hitClover()</code> first increments the variable <code class="literal">clovers</code> and then sets <code class="literal">previous</code> to <code class="literal">Clover</code>. The method then checks to see if we have just hit another 20 clovers. If so, we award a badge using the <code class="literal">awardBadge()</code> method. If we hit over 80 clovers, we issue the grand prize—a <span class="emphasis"><em>Magically Delicious</em></span> badge.</p><p>The <code class="literal">awardBadge()</code> method is used to record badges. It takes <code class="literal">String</code> that will be used as the title of the achievement, creates <code class="literal">Badge</code> anew, and then stores that badge in an array. The array will later be accessed using <code class="literal">getBadges()</code> by <code class="literal">AvoiderGameOverWorld</code>. The <code class="literal">getBadges()</code> method has a few duties other than returning the array of badges achieved until now. It looks at values maintained by <code class="literal">hitCupcakes()</code> and <code class="literal">hitRock()</code> and determines whether additional badges should be awarded. If you did not know, the term, <span class="emphasis"><em>turkey</em></span>, comes from bowling and means you just got three strikes in a row.</p><p>Here is the<a id="id379" class="indexterm"/> code we need to add to the constructor of <code class="literal">AvoiderGameOverWorld</code>, in order to display the badges on the game-over screen:</p><div class="informalexample"><pre class="programlisting">public AvoiderGameOverWorld() {
  super(600, 400, 1);
  
  List&lt;Badge&gt; badgeList = BadgeCenter.getInstance().getBadges();
  int yPos = 130;
  while(!badgeList.isEmpty()) {
    Badge nextBadge = badgeList.remove(0);
    addObject(nextBadge, 60, yPos);
    yPos += 70;
  }
  
}</pre></div><p>In the constructor, we use <code class="literal">BadgeCenter.getInstance()</code> to get access to the single instance of <code class="literal">BadgeCenter</code> and then immediately invoke <code class="literal">getBadges()</code>. We then iterate over <code class="literal">badgeList</code> (we discussed the <code class="literal">List</code> interface in <a class="link" title="Chapter 3. Collision Detection" href="part0024.xhtml">Chapter 3</a>, <span class="emphasis"><em>Collision Detection</em></span>) and add each <code class="literal">Badge</code> to the world. We use the variable <code class="literal">yPos</code> to appropriately space out the badges.</p><p>Because we use the <code class="literal">List</code> interface, we need to add the following <code class="literal">import</code> statement to <code class="literal">AvoiderGameOverWorld</code>:</p><div class="informalexample"><pre class="programlisting">import java.util.List;</pre></div><p>Last, we need to define the <code class="literal">Badge</code> class. It is a simple class that adds a text string onto an image for a badge. <span class="emphasis"><em>Figure 7</em></span> shows the image I created for badges. I tried to make it look like a tombstone.</p><div class="mediaobject"><img src="../Images/image00298.jpeg" alt="Achievement badges"/><div class="caption"><p>Figure 7: This is the image associated with the Badge class.</p></div></div><p style="clear:both; height: 1em;"> </p><p>Create a new subclass of <code class="literal">Actor</code> and call it <code class="literal">Badge</code>. Assign the new image you created for badges or use mine. Add this code to it:</p><div class="informalexample"><pre class="programlisting">import greenfoot.*;
import java.awt.Color;

public class Badge extends Actor {
  GreenfootImage bkg;
  GreenfootImage msg;
  
  public Badge(String s) {
    bkg = getImage();
    msg = new GreenfootImage(s, 14, Color.white, null);
    bkg.drawImage(msg, 10, 20);
    setImage(bkg);
  }

}</pre></div><p>We have<a id="id380" class="indexterm"/> already discussed the <code class="literal">Color</code> and <code class="literal">GreenfootImage</code> classes in the earlier chapters. The constructor uses the <code class="literal">drawImage()</code> method of <code class="literal">GreenfootImage</code> to draw one image on top of another. By doing this, we effectively add the text.</p><p>Compile the code, debug any mistakes, and try it out. What badges did you earn?</p></div><div class="section" title="Player conditioning"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec57"/>Player conditioning</h2></div></div></div><p>I would like to provide you <a id="id381" class="indexterm"/>with an <a id="id382" class="indexterm"/>example where some user conditioning I added to the game had to be removed as I determined, after playtesting, that it drove the wrong behavior. Initially, I thought of changing the game to provide 10 points for each clover you hit. This would help to increase the complexity of the game, as players would have to balance getting more points against the slowdown penalty of clovers.</p><p>However, this change really had an effect on the player. Because clovers are so plentiful and worth 10 points, it really became worthwhile to collect clovers as a means of getting high scores. This changed the whole feel of the game from one that encourages avoiding to one that encourages collecting. Therefore, the change was removed.</p><p>In addition, adding points to clovers broke some of the story elements of the game. In the game, things that look good are bad. But, by having a good item provide a direct benefit to the player, we broke our game's theme. Next, we will discuss theming and storytelling in Avoider Game.</p></div><div class="section" title="Storytelling"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec58"/>Storytelling</h2></div></div></div><p>It is hard to build a deep, meaningful story for <a id="id383" class="indexterm"/>a game like ours. However, the player <a id="id384" class="indexterm"/>will still try to make sense of the world we threw them in, and we need to do as much as we can to help the player construct a meaningful world. Our story should motivate why we flee from smiley faces and cupcakes and welcome rocks.</p><div class="section" title="Adding a story screen"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec33"/>Adding a story screen</h3></div></div></div><p>To help tell the story of our game, we<a id="id385" class="indexterm"/> are going to create a story screen the player can choose to view before playing the game. This screen will provide the background and context for our game, as well as set up its theme. While we are at it, we are going to add a credits screen. Adding comments to your code to credit artists and developers is a good start, but eventually you will need to formally recognize these people. Plus, you can give the person who worked hardest on this game credit—you!</p><p>First, we are going to add some buttons to our introduction screen that, when clicked, will either take you to the story screen, take you to the credits screen, or start the game. Here are the changes we need to make to <code class="literal">AvoiderGameIntroScreen</code>:</p><div class="informalexample"><pre class="programlisting">import greenfoot.*; 

public class AvoiderGameIntroScreen extends World {
  Actor startButton, creditButton, storyButton;

  public AvoiderGameIntroScreen() {  
    super(600, 400, 1); 
    startButton = addButton("Start Game", getWidth()/2, getHeight()*2/3);
    creditButton = addButton("Credits Screen", getWidth()/2, (getHeight()*2/3)+40);
    storyButton = addButton("Story Screen", getWidth()/2, (getHeight()*2/3)+80);
  }

  public void act() {
    if( Greenfoot.mouseClicked(startButton) ) {
      AvoiderWorld world = new AvoiderWorld();
      Greenfoot.setWorld(world);
    } else if( Greenfoot.mouseClicked(creditButton) ) {
      AvoiderGameCreditScreen world = new AvoiderGameCreditScreen();
      Greenfoot.setWorld(world);
    } else if( Greenfoot.mouseClicked(storyButton) ) {
      AvoiderGameStoryScreen world = new AvoiderGameStoryScreen();
      Greenfoot.setWorld(world);
    }
  }
  
  private Actor addButton(String s, int x, int y) {
    Actor button = new Label(s, 24);
    addObject(button, x, y);
    return button;
  }
}</pre></div><p>The constructor<a id="id386" class="indexterm"/> function creates three buttons using the <code class="literal">addButton()</code> method. In the <code class="literal">act()</code> method, we simply listen for mouse clicks on those buttons and switch worlds appropriately if we get one. We covered all of this in <a class="link" title="Chapter 1. Let's Dive Right in…" href="part0014.xhtml">Chapter 1</a>, <span class="emphasis"><em>Let's Dive Right in…</em></span>, except for the implementation of <code class="literal">addButton()</code>.</p><p>The method <code class="literal">addButton()</code> creates a new <code class="literal">Label</code> and adds it to the screen. We discussed the <code class="literal">Label</code> class earlier in the chapter.</p><p>After running this code, your introduction screen will look like the one shown in <span class="emphasis"><em>Figure 8</em></span>.</p><div class="mediaobject"><img src="../Images/image00299.jpeg" alt="Adding a story screen"/><div class="caption"><p>Figure 8: This is the revised introduction screen to our version of Avoider Game</p></div></div><p style="clear:both; height: 1em;"> </p><p>Now, we just <a id="id387" class="indexterm"/>need to make the story screen (<code class="literal">AvoiderGameStoryScreen</code>) and the credits screen (<code class="literal">AvoiderGameCreditScreen</code>). You already learned how to do this (refer to <a class="link" title="Chapter 1. Let's Dive Right in…" href="part0014.xhtml">Chapter 1</a>, <span class="emphasis"><em>Let's Dive Right in…</em></span>), and I will just show you what my screens look like in <span class="emphasis"><em>Figure 9</em></span> and <span class="emphasis"><em>Figure 10</em></span>. Feel free to use mine or make your own.</p><div class="mediaobject"><img src="../Images/image00300.jpeg" alt="Adding a story screen"/><div class="caption"><p>Figure 9: This is how our story screen will look</p></div></div><p style="clear:both; height: 1em;"> </p><p>This is how the credits screen looks.</p><div class="mediaobject"><img src="../Images/image00301.jpeg" alt="Adding a story screen"/><div class="caption"><p>Figure 10: This is how the credits screen looks</p></div></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="Changing the score"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec34"/>Changing the score</h3></div></div></div><p>Getting points in the game is a good <a id="id388" class="indexterm"/>thing; therefore, our score indicator should look like a bad thing. Right now, it is neutral and does not contribute to the story or theme of the game. Let's change this narrative descriptor.</p><p>Presently, we are using the imported <code class="literal">Counter</code> class. To get a customized look for our score, we are going to need to create our own class and not rely on the <code class="literal">Counter</code> class. Create a new subclass of <code class="literal">Actor</code> and name it <code class="literal">Score</code>. Because points and badges are types of awards, I thought making them both tombstones made sense. <span class="emphasis"><em>Figure 11</em></span> shows the image I used for the new <code class="literal">Score</code> actor. It is a smaller version of the tombstone used for achievement badges with the <span class="strong"><strong>Achievement Badge</strong></span> text replaced with <span class="strong"><strong>R.I.P.</strong></span>.</p><div class="mediaobject"><img src="../Images/image00302.jpeg" alt="Changing the score"/><div class="caption"><p>Figure 11: This is the image for our new Score class.</p></div></div><p style="clear:both; height: 1em;"> </p><p>Here is the code for the <code class="literal">Score</code> class:</p><div class="informalexample"><pre class="programlisting">import greenfoot.*;
import java.awt.Color;

public class Score extends Actor{
  Label msg;
  int counter = 0;
  
  public Score() {
    msg = new Label("0", 24, Color.black);
  }
  
  protected void addedToWorld(World w) {
    w.addObject(msg, getX(), getY() + 5);
  }
  
  public void addScore(int i) {
    counter = counter + i;
    updateImage();
  }
  
  public int getScore() {
    return counter;
  }
  
  private void updateImage() {
    getWorld().removeObject(msg);
    msg = new Label(Integer.toString(counter), 24, Color.black);
    getWorld().addObject(msg, getX(), getY() + 5);
  }
   
}</pre></div><p>This class stores<a id="id389" class="indexterm"/> the current score in the <code class="literal">counter</code> integer variable. You can increase the score by calling <code class="literal">addScore()</code> and retrieve the current score by calling <code class="literal">getScore()</code>. The <code class="literal">Score</code> class works by adding an image that contains the current score over the default image, which is a tombstone. Whenever the score changes, the <code class="literal">counter</code> variable is incremented and then <code class="literal">updateImage()</code> is called. The <code class="literal">updateImage()</code> method removes the old object containing the image of the score and then creates a new image based on the current value of <code class="literal">counter</code> using the <code class="literal">Label</code> class (as discussed previously). The <code class="literal">addedToWorld()</code> method is needed to display the initial score of 0.</p><p>We have made several changes. Make sure to compile and run your game to ensure that everything works properly.</p></div><div class="section" title="Adding sound effects"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec35"/>Adding sound effects</h3></div></div></div><p>Sound effects can provide important<a id="id390" class="indexterm"/> and valuable feedback to players. Also, they can be important narrative descriptors. In this section, we are going to add some sound effects to both enhance meaningful play and the story of the game.</p><p>Because cupcakes, clovers, and rocks have a random, limited lifespan, it can be confusing to know whether you hit one or it just expired right before touching you. If you were at full health already, you have no idea whether you hit a rock or not. If you do not move, you cannot tell whether you really hit a cupcake or clover. We are going to solve this ambiguity by playing a sound whenever you collide with any <code class="literal">PowerItems</code>. This will also help players who are actively trying to gain achievement badges.</p><p>We will choose sounds appropriate for our game's story. If the player collides with a cupcake or clover, then we will play the sound of you saying, <span class="emphasis"><em>Woot!</em></span>. If you, the player, collide with a rock, then we will play the sound of you saying, <span class="emphasis"><em>Ahhh!</em></span>. This fits with the theme of the game.</p><p>You could play any sound effect you find on the Internet (assuming it is free for such use) or create your own using various audio editing programs. Fortunately, Greenfoot comes with a built-in audio recording and editing tool. To access it, click on <span class="strong"><strong>Controls</strong></span> in the main menu and then choose <span class="strong"><strong>Show Sound Recorder</strong></span>. You should see the window shown in <span class="emphasis"><em>Figure 12</em></span>.</p><div class="mediaobject"><img src="../Images/image00303.jpeg" alt="Adding sound effects"/><div class="caption"><p>Figure 12: This is the sound recorder tool in Greenfoot</p></div></div><p style="clear:both; height: 1em;"> </p><p>Using Greenfoot's sound recorder, record yourself saying <span class="emphasis"><em>ahhh</em></span> and save it as <code class="literal">ahhh.wav</code>. Then, record yourself saying <span class="emphasis"><em>woot</em></span> and save it as <code class="literal">woot.wav</code>. To make your recordings as concise as possible, you can use the <span class="strong"><strong>Trim to selection</strong></span> button to eliminate any beginning or ending silence or unnecessary noises.</p><p>We are going<a id="id391" class="indexterm"/> to add two methods to the <code class="literal">Avatar</code> class to play these sounds. Here is the first method:</p><div class="informalexample"><pre class="programlisting">public void sayAhhh() {
  ahhh.play();
}</pre></div><p>Here is the second method:</p><div class="informalexample"><pre class="programlisting">public void sayWoot() {
  woot.play();
}</pre></div><p>We create two instance variables, <code class="literal">woot</code> and <code class="literal">ahhh</code>, at the top of the <code class="literal">Avatar</code> class:</p><div class="informalexample"><pre class="programlisting">private GreenfootSound woot;
private GreenfootSound ahhh;</pre></div><p>Initialize them in the <code class="literal">AddedToWorld()</code> method. Here is this initialization code:</p><div class="informalexample"><pre class="programlisting">woot = new GreenfootSound("sounds/woot.wav");
ahhh = new GreenfootSound("sounds/ahhh.wav");</pre></div><p>We have now set up <code class="literal">Avatar</code> to say <span class="emphasis"><em>ahhh</em></span> or <span class="emphasis"><em>woot!</em></span>. We just need to change <code class="literal">PowerItems</code> to call either of the two methods we just added to the <code class="literal">Avatar</code> class. In the <code class="literal">Cupcake</code> class, change <code class="literal">checkHitAvatar()</code> to this:</p><div class="informalexample"><pre class="programlisting">protected void checkHitAvatar() {
  Avatar a = (Avatar) getOneIntersectingObject(Avatar.class);
  if( a != null ) {
    bc.hitCupcake();
    a.sayWoot();
    a.stun();
    getWorld().removeObject(this);
  }
}</pre></div><p>In the <code class="literal">Clover</code> class, we need to change <code class="literal">checkHitAvatar()</code> to this:</p><div class="informalexample"><pre class="programlisting">protected void checkHitAvatar() {
  Avatar a = (Avatar) getOneIntersectingObject(Avatar.class);
  if( a != null ) {
    bc.hitClover();
    a.sayWoot();
    a.lagControls();
    getWorld().removeObject(this);
  }
}</pre></div><p>In the <code class="literal">Health</code> class, we need to change <code class="literal">checkHitAvatar()</code> to this:</p><div class="informalexample"><pre class="programlisting">protected void checkHitAvatar() {
  Avatar a = (Avatar) getOneIntersectingObject(Avatar.class);
  if( a != null ) {
    bc.hitRock();
    a.sayAhhh();
    a.addHealth();
    getWorld().removeObject(this);
  }
}</pre></div><p>Compile your <a id="id392" class="indexterm"/>game and play. Enjoy all of the <span class="emphasis"><em>wooting</em></span> and <span class="emphasis"><em>ahhhing</em></span>!</p></div></div><div class="section" title="Playtesting"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec59"/>Playtesting</h2></div></div></div><p>Playtest your game and <a id="id393" class="indexterm"/>see if you think the <a id="id394" class="indexterm"/>game needs any changes. After playing for a while, I decided to change the <code class="literal">increaseLevel()</code> method in <code class="literal">AvoiderWorld</code> to this:</p><div class="informalexample"><pre class="programlisting">private void increaseLevel() {
  int score = scoreBoard.getScore();

  if( score &gt; nextLevel ) {
    enemySpawnRate += 4;
    enemySpeed++;
    cupcakeFrequency += 3;
    cloverFrequency += 3;
    healthFrequency += 1;
    nextLevel += 50;
  }
}</pre></div><p>I felt that there were not enough enemies on screen and that the <code class="literal">Health</code> power-ups were too frequent after the player had increased several levels. To help with this, I increased the rate of change to the <code class="literal">enemySpawnRate</code> variable to <code class="literal">4</code> and reduced the rate of increase to the <code class="literal">healthFrequency</code> variable to <code class="literal">1</code>. With these changes, the game play felt better. Do you agree with my changes? What changes do you feel improve the game? Of course, the way to best determine the appropriate values for these variables is to recruit more playtesters.</p><div class="note" title="Note"><h3 class="title"><a id="tip22"/>Tip</h3><p>Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/Balance_(game_design)">http://en.wikipedia.org/wiki/Balance_(game_design)</a> for more information on <a id="id395" class="indexterm"/>game balance.</p></div></div></div>
<div class="section" title="Challenge"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec33"/>Challenge</h1></div></div></div><p>We added some nice features to our version of Avoider Game. Of course, it seems there are endless cool things we could try to implement in order to improve our game. As a programming challenge, let's try one more. Change the game, so that players are awarded bonus points for each achievement badge they get. This change will further encourage the users to attempt the achievements. This also potentially enhances long-term meaningful play. How many points are you going to assign for each badge? Will each badge be worth the same amount of points? How does this affect game play? Is this a change you would keep?</p><p>Let's spruce up our introduction screen. Add background music and play a <span class="emphasis"><em>click</em></span> sound when the player clicks on a menu choice. Providing auditory feedback to player actions enhances those interactions.</p></div>
<div class="section" title="Additional readings"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec34"/>Additional readings</h1></div></div></div><p>A good portion of my philosophy of game design came from many years of teaching game development and two key textbooks. The first textbook is <span class="emphasis"><em>Rules of Play</em></span> by Eric Zimmerman and Katie Salen, published in 2003. This book provides an in-depth and thorough coverage of games, game history, and game design. The other book that heavily influenced me was <span class="emphasis"><em>Half-real</em></span> by Jesper Juul, published in 2005. This book offers a more concise study of game design. If you have a passion for game design, I highly recommend that you read these two books.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec35"/>Summary</h1></div></div></div><p>Creating meaningful play is the main goal for game designers. In this chapter, we defined meaningful play and learned many game design techniques for enhancing meaningful play. We also learned a process for creating interactive applications that will guide you in creating engaging applications. As you read the rest of this book, and eventually create your own applications, you should reflect on this chapter and apply the techniques provided.</p><p>In the next chapter, you will learn to create worlds for our games that expand far beyond the edges of the screen.</p></div></body></html>