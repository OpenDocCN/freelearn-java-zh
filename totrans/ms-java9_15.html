<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Best Practices In Java 9</h1>
                </header>
            
            <article>
                
<p>In the last chapter, we explored several changes regarding command-line flags in Java 9. Specifically, we covered <span>unified JVM logging,</span> compiler control, <span>new diagnostic commands, removal of the HPROF h</span><span>eap profiling agent, the removal of the <strong>Java Heap Analysis Tool</strong> (</span><span><strong>JHAT</strong>),</span> <span>command-line flag argument validation, and</span> <span>the ability to compile for older platform versions.</span></p>
<p>In this chapter, we will focus on best practices with additional utilities provided with the Java 9 platform. Specifically, we will cover:</p>
<ul>
<li>Support for UTF-8</li>
<li>Unicode 7.0.0</li>
<li>Linux/AArch64 port</li>
<li>Multi-resolution images</li>
<li>Common Locale Data Repository</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Support for UTF-8</h1>
                </header>
            
            <article>
                
<p><strong>Unicode Transformation Format-8</strong> (<strong>UTF-8</strong>) is a character set that encapsulates all Unicode characters using one to four 8-bit bytes. It is the byte-oriented encoded form of Unicode. UTF-8 is and has been the predominant character set for encoding web pages since 2009. Here are some characteristics of UTF-8:</p>
<ul>
<li>Can encode all 1,112,064 Unicode code points</li>
<li>Uses one to four 8-bit bytes</li>
<li>Accounts for nearly 90% of all web pages</li>
<li>Is backward compatible with ASCII</li>
<li>Is reversible</li>
</ul>
<p>The pervasive use of UTF-8 underscores the importance of ensuring the Java platform fully supports UTF-8. This mindset led to the Java Enhancement Proposal 226, <strong>UTF-8 property resource bundles</strong>. With Java 9 applications, we have the ability to specify property files that have UTF-8 encoding. The Java 9 platform includes changes to the <kbd>ResourceBundle</kbd> API to support UTF-8.</p>
<p>Let's take a look at the pre-Java 9 <kbd>ResourceBundle</kbd> class, followed by what changes were made to this class in the Java 9 platform.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The ResourceBundle class</h1>
                </header>
            
            <article>
                
<p>The following class provides developers with the ability to isolate locale-specific resources from a resource bundle. This class significantly simplifies localization and translation:</p>
<pre>    public abstract class ResourceBundle extends Object</pre>
<p>Creating resource bundles needs a purposeful approach. For example, let's imagine that we are creating a resource bundle that will support multiple languages for a business application. Our button labels, among other things, will be displayed differently depending on the current locale. So, for our example, we can create a resource bundle for our buttons. We can call it <kbd>buttonResources</kbd>. Then, for each locale, we can create a <kbd>buttonResource_&lt;identifier&gt;</kbd>. Here are some examples:</p>
<ul>
<li><kbd>buttonResource_ja</kbd>: for Japanese</li>
<li><kbd>buttonResource_uk</kbd>: for UK English</li>
<li><kbd>buttonResource_it</kbd>: for Italian</li>
<li><kbd>buttonResource_lh</kbd>: for Lithuanian</li>
</ul>
<p>We can use a resource bundle with the same name as the base name for our default bundle. So, <kbd>buttonResource</kbd> would contain our default bundle.</p>
<p>To obtain a locale-specific object, we make a call to the <kbd>getBundle</kbd> method. An example follows:</p>
<pre>    . . . <br/><br/>    ResourceBundle = buttonResource =<br/>     ResourceBundle.getBundle("buttonResource", currentLocale);<br/><br/>    . . . </pre>
<p>In the next sections we will examine the <kbd>ResourceBundle</kbd> class by looking at its nested class, field and constructor, and included methods.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The nested class</h1>
                </header>
            
            <article>
                
<p>There is one nested class associated with the <kbd>ResourceBundle</kbd> class, that is the <kbd>ResourceBundle.Control</kbd> class. It provides callback methods that are used when the <kbd>ResourceBundle.getBundle</kbd> method is used:</p>
<pre>    public static class ResourceBundle.Control extends Object</pre>
<p><span>The</span> <kbd>ResourceBundle.Control</kbd> <span>class has the following fields:</span></p>
<ul>
<li><kbd>public static final List&lt;String&gt; FORMAT_CLASS</kbd></li>
<li><kbd>public static final List&lt;String&gt; FORMAT_DEFAULT</kbd></li>
<li><kbd>public static final List&lt;String&gt; FORMAT_PROPERTIES</kbd></li>
<li><kbd>public static final long TTL_DONT_CACHE</kbd></li>
<li><kbd>public static final long TTL_NO_EXPIRATION_CONTROL</kbd></li>
</ul>
<p>The class has a single, empty constructor and the following methods:</p>
<ul>
<li><kbd>getCandidateLocales()</kbd>:</li>
</ul>
<pre>      public List&lt;Locale&gt; getCandidateLocales(String baseName,<br/>       Locale locale)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd> or <kbd>locale</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>baseName</kbd>: a fully qualified class name</p>
<p><kbd>locale</kbd>: the desired locale</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>List of candidate locales</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getControl()</kbd>:</li>
</ul>
<pre>      public static final ResourceBundle.Control getControl(<br/>       List&lt;String&gt; formats)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p class="mce-root"><kbd>IllegalArgumentException</kbd> (if <kbd>formats</kbd> is unknown)</p>
<p><kbd>NullPointerException</kbd> (if <kbd>formats</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>formats</kbd>: These are the formats that will be returned by the <kbd>ResourceBundle.Control.getFormats</kbd> method</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>A <kbd>ResourceBundle.Control</kbd> that supports the formats specified</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getFallbackLocale()</kbd>:</li>
</ul>
<pre>      public Locale getFallbackLocale(String baseName, Locale locale)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td><span><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd> or <kbd>locale</kbd> is null)</span></td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>baseName</kbd>: a fully qualified class name</p>
<kbd>locale</kbd>: the desired locale that could not be found with the <kbd>ResourceBundle.getBundle</kbd> method</td>
</tr>
<tr>
<td>Returns</td>
<td>The fallback locale</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getFormats()</kbd>:</li>
</ul>
<pre>      public List&lt;String&gt; getFormats(String baseName)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p class="mce-root"><kbd>NullPointerException</kbd> <span>(if <kbd>baseName</kbd> is null)</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><span><kbd>baseName</kbd>: a fully qualified class name</span></p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>A list of Strings with their formats so the resource bundles can be loaded</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getNoFallbackControl()</kbd>:</li>
</ul>
<pre>      public static final ResourceBundle.Control   <br/>      getNoFallbackControl(List&lt;String&gt; formats)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p class="mce-root"><kbd>IllegalArgumentException</kbd> (if <kbd>formats</kbd> is unknown)</p>
<p><kbd>NullPointerException</kbd> (if <kbd>formats</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>formats</kbd>: these are the formats that will be returned by the <kbd>ResourceBundle.Control.getFormats</kbd> method</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>
<p>A <kbd>ResourceBundle.Control</kbd> that supports the formats specified without a fallback locale.</p>
</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getTimeToLive()</kbd>:</li>
</ul>
<pre>      public long getTimeToLive(String baseName, Locale locale)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p class="mce-root"><kbd>NullPointerException</kbd> <span>(if <kbd>baseName</kbd> is null)</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>baseName</kbd>: a fully qualified class name</p>
<p><kbd>locale</kbd>: the desired locale</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>
<p>Zero or a positive millisecond that is offset from the cached time</p>
</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>needsReload()</kbd>:</li>
</ul>
<pre>      public boolean needsReload(String baseName, Locale locale,<br/>       String format, ClassLoader loader, ResourceBundle bundle,<br/>       long loadTime)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>NullPointerException</kbd> (if any of the following listed parameters are null):</p>
<ul>
<li><kbd>baseName</kbd></li>
<li><kbd>locale</kbd></li>
<li><kbd>format</kbd></li>
<li><kbd>loader</kbd></li>
<li><kbd>bundle</kbd></li>
</ul>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>baseName</kbd>: a fully qualified class name</p>
<p><kbd>locale</kbd>: the desired locale</p>
<p><kbd>format</kbd>: the resource bundle format</p>
<p><kbd>loader</kbd>: the <kbd>ClassLoader</kbd> that should be used to load the bundle</p>
<p><kbd>bundle</kbd>: the expired bundle</p>
<p><kbd>loadTime</kbd>: a time bundle was added to the cache</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td><kbd>true</kbd>/<kbd>false</kbd> to indicate if the expired bundle needs to be reloaded</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>newBundle()</kbd>:</li>
</ul>
<pre>      public ResourceBundle newBundle(String baseName, Locale locale,<br/>       String format, ClassLoader loader, boolean reload)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>ClassCastException</kbd> (if the loaded class cannot be cast to <kbd>ResourceBundle</kbd>)</p>
<p><kbd>ExceptionInInitializerError</kbd> (if initialization fails)</p>
<p><kbd>IllegalAccessException</kbd> (if the class or constructor is not accessible)</p>
<p><kbd>IllegalArgumentException</kbd> (if the format is unknown)</p>
<p><kbd>InstantiationException</kbd> (if the class instantiation fails)</p>
<p><kbd>IOException</kbd> (resource reading error)</p>
<p><kbd>NullPointerException</kbd> (if any of the following listed parameters are null):</p>
<ul>
<li><kbd>baseName</kbd></li>
<li><kbd>locale</kbd></li>
<li><kbd>format</kbd></li>
<li><kbd>loader</kbd></li>
</ul>
<p><kbd>SecurityException</kbd> (if access to new instances is denied)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>baseName</kbd>: a fully qualified class name</p>
<p><kbd>locale</kbd><span>:</span> the desired locale</p>
<p><kbd>format</kbd><span>:</span> the resource bundle format</p>
<p><kbd>loader</kbd><span>:</span> the <kbd>ClassLoader</kbd> that should be used to load the bundle</p>
<p><kbd>reload</kbd>: <kbd>true</kbd>/<kbd>false</kbd> flag indicating if the resource bundle has expired</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>
<p>Instance of the resource bundle</p>
</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>toBundleName()</kbd>:</li>
</ul>
<pre>      public String toBundleName(String baseName, Locale locale)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd> or <kbd>locale</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>baseName</kbd>: a fully qualified class name</p>
<p><kbd>locale</kbd>: the desired locale</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>
<p>The bundle name</p>
</td>
</tr>
</tbody>
</table>
<p class="mce-root"/>
<ul>
<li><kbd>toResourceName()</kbd>:</li>
</ul>
<pre>      public final String toResourceName(String bundleName,<br/>       String suffix)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>NullPointerException</kbd> (if <kbd>bundleName</kbd> or <kbd>suffix</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><kbd>bundleName</kbd>: the name of the bundle</p>
<p><kbd>suffix</kbd>: the suffix for the file name</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>
<p>The converted resource name</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Fields and constructors</h1>
                </header>
            
            <article>
                
<p><span>The</span> <kbd>ResourceBundle</kbd> <span>class has one field as described here:</span></p>
<pre>    protected Resourcebundle parent</pre>
<p>The parent bundle is searched by the <kbd>getObject</kbd> method when a specified resource is not found.</p>
<p>The constructor for the ResourceBundle class is as shown here:</p>
<pre>    public ResourceBundle()<br/>    {<br/>    }</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Methods</h1>
                </header>
            
            <article>
                
<p><span>The</span> <kbd>ResourceBundle</kbd> <span>class has 18 methods, each described here:</span></p>
<ul>
<li><kbd>clearCache()</kbd>:</li>
</ul>
<pre>      public static final void clearCache()</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><span>None</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p>None</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>None</td>
</tr>
</tbody>
</table>
<pre>      public static final void clearCache(ClassLoader loader)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>NullPointerException</kbd> (if loader is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td><kbd>loader</kbd>: the class loader</td>
</tr>
<tr>
<td>Returns</td>
<td>None</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>containsKey()</kbd>:</li>
</ul>
<pre>      public boolean containsKey(String key)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>NullPointerException</kbd> (if <kbd>key</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td><kbd>key</kbd>: resource key</td>
</tr>
<tr>
<td>Returns</td>
<td><kbd>true</kbd>/<kbd>false</kbd> depending on if the key is in the <kbd>ResourceBundle</kbd> or parent bundles</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getBundle()</kbd>:</li>
</ul>
<pre>      public static final ResourceBundle getBundle(String baseName)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>MissingResourceException</kbd> <span>(if the resource bundle for the provided <kbd>baseName</kbd> is not found)</span></p>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td><kbd>baseName</kbd>: fully qualified class name</td>
</tr>
<tr>
<td>Returns</td>
<td>Resource bundle based on the given <kbd>baseName</kbd> and the default locale</td>
</tr>
</tbody>
</table>
<pre>      public static final ResourceBundle getBundle(String baseName,<br/>       Resourcebundle.Control control)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>IllegalArgumentException</kbd> (if the passed control performs improperly)</p>
<p><kbd>MissingResourceException</kbd> <span>(if the resource bundle for the provided <kbd>baseName</kbd> is not found)</span></p>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><span><kbd>baseName</kbd>: fully qualified class name</span></p>
<p><kbd>control</kbd>: the control provides information so the resource bundle can be loaded</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td><span>Resource bundle based on the given <kbd>baseName</kbd> and the default locale</span></td>
</tr>
</tbody>
</table>
<pre>      public static final ResourceBundle getBundle(String baseName,<br/>       Locale locale)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>MissingResourceException</kbd> <span>(if the resource bundle for the provided <kbd>baseName</kbd> is not found)</span></p>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd> or <kbd>locale</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><span><kbd>baseName</kbd>: fully qualified class name</span></p>
<p><kbd>locale</kbd>: desired locale</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td>
<p><span>Resource bundle based on the given <kbd>baseName</kbd> and <kbd>locale</kbd></span></p>
</td>
</tr>
</tbody>
</table>
<pre>      public static final ResourceBundle getBundle(String baseName,<br/>       Locale targetLocale, Resourcebundle.Control control)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>IllegalArgumentException</kbd> (if the passed control performs improperly)</p>
<p><kbd>MissingResourceException</kbd> <span>(if the resource bundle for the provided <kbd>baseName</kbd> is not found in any of the locales)</span></p>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd>, <kbd>control</kbd>, or <kbd>locale</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><span><kbd>baseName</kbd>: fully qualified class name</span></p>
<p><kbd>control</kbd>: <span>the control provides information so the resource bundle can be loaded</span></p>
<p><kbd>targetLocale</kbd>: desired locale</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td><span>Resource bundle based on the given <kbd>baseName</kbd> and <kbd>locale</kbd></span></td>
</tr>
</tbody>
</table>
<pre>      public static final ResourceBundle getBundle(String baseName,<br/>       Locale locale, ClassLoader loader)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>MissingResourceException</kbd> <span>(if the resource bundle for the provided <kbd>baseName</kbd> is not found in any of the locales)</span></p>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd>, <kbd>loader</kbd>, or <kbd>locale</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><span><kbd>baseName</kbd>: fully qualified class name</span></p>
<p><kbd>locale</kbd>: <span>desired locale</span></p>
<p><kbd>loader</kbd>: class loader</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td><span>Resource bundle based on the given <kbd>baseName</kbd> and <kbd>locale</kbd></span></td>
</tr>
</tbody>
</table>
<pre>      public static final ResourceBundle getBundle(String baseName,<br/>       Locale targetLocale, ClassLoader loader,<br/>       ResourceBundle.Control control)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>IllegalArgumentException</kbd> (if the passed control performs improperly)</p>
<p><kbd>MissingResourceException</kbd> <span>(if the resource bundle for the provided <kbd>baseName</kbd> is not found in any of the locales)</span></p>
<p><kbd>NullPointerException</kbd> (if <kbd>baseName</kbd>, <kbd>control</kbd>, <kbd>loader</kbd>, or <kbd>targetLocale</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p class="mce-root"><span><kbd>baseName</kbd>: fully qualified class name</span></p>
<p><kbd>control</kbd>: <span>the control providing information so the resource bundle can be loaded</span></p>
<p><span><kbd>loader</kbd>: class loader</span></p>
<p><kbd>targetLocale</kbd>: desired locale</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td><span>Resource bundle based on the given <kbd>baseName</kbd> and <kbd>locale</kbd></span></td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getKeys()</kbd>:</li>
</ul>
<pre>      public abstract Enumeration&lt;String&gt; getKeys()</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><span>None</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>None</td>
</tr>
<tr>
<td>Returns</td>
<td>Enumeration of keys in the <kbd>ResourceBundle</kbd> and parent bundles</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getLocale()</kbd>:</li>
</ul>
<pre>      public Locale getLocale()</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><span>None</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>None</td>
</tr>
<tr>
<td>Returns</td>
<td>the <kbd>locale</kbd> of the current resource bundle</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getObject()</kbd>:</li>
</ul>
<pre>      public final Object getObject(String key)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>MissingResourceException</kbd> (if the resource for the provided key is not found)</p>
<p><kbd>NullPointerException</kbd> (if <kbd>key</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td><span><kbd>key</kbd>: this is the key for the desired object</span></td>
</tr>
<tr>
<td>Returns</td>
<td>The object for the key provided</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getString()</kbd>:</li>
</ul>
<pre>      public final String getString(String key)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>ClassCastException</kbd> (if the found object is not a key)</p>
<p><kbd>MissingResourceException</kbd> (if the resource for the provided key is not found)</p>
<p><kbd>NullPointerException</kbd> (if <kbd>key</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td><kbd>key</kbd>: this is the key for the desired <kbd>String</kbd></td>
</tr>
<tr>
<td>Returns</td>
<td>The <kbd>String</kbd> for the key provided</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>getStringArray()</kbd>:</li>
</ul>
<pre>      public final String[] getStringArray(String key)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>ClassCastException</kbd> (if the found object is not a <kbd>String</kbd> array)</p>
<p><kbd>MissingResourceException</kbd> (if the resource for the provided key is not found)</p>
<p><kbd>NullPointerException</kbd> (if <kbd>key</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td><span><kbd>key</kbd>: this is the key for the desired <kbd>String</kbd> array</span></td>
</tr>
<tr>
<td>Returns</td>
<td><span>The <kbd>String</kbd> array for the key provided</span></td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>handleGetObject()</kbd>:</li>
</ul>
<pre>      protected abstract Object handleGetObject(String key)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><kbd>NullPointerException</kbd> (if <kbd>key</kbd> is null)</p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td><kbd>key</kbd>: key for the desired <kbd>Object</kbd></td>
</tr>
<tr>
<td>Returns</td>
<td>The object for the given key</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>handleKeySet()</kbd>:</li>
</ul>
<pre>      protected Set&lt;String&gt; handleKeySet()    </pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><span>None</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>None</td>
</tr>
<tr>
<td>Returns</td>
<td><span>Set of keys in <kbd>ResourceBundle</kbd></span></td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>keySet()</kbd>:</li>
</ul>
<pre>      public Set&lt;String&gt; keySet()</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><span>None</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>None</td>
</tr>
<tr>
<td>Returns</td>
<td>Set of keys in <kbd>ResourceBundle</kbd> and its parent bundles</td>
</tr>
</tbody>
</table>
<ul>
<li><kbd>setParent()</kbd>:</li>
</ul>
<pre>      protected void setParent(ResourceBundle parent)</pre>
<table>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td>Throws</td>
<td>
<p><span>None</span></p>
</td>
</tr>
<tr>
<td>Parameters</td>
<td>
<p><kbd>parent</kbd>: the parent bundle for the current bundle</p>
</td>
</tr>
<tr>
<td>Returns</td>
<td><span>None</span></td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Changes in Java 9</h1>
                </header>
            
            <article>
                
<p>The properties file format, based on ISO-8859-1, was previously supported by the Java platform. That format does not easily support escape characters, although it does provide an appropriate escape mechanism. The use of ISO-8859-1 requires conversion between the text characters and their escaped form.</p>
<p>The Java 9 platform includes a modified <kbd>ResourceBundle</kbd> class with the default file encoding set to UTF-8 vice ISO-8859-1. This saves applications the time it takes to make the aforementioned escape mechanism conversions.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Unicode 7.0.0</h1>
                </header>
            
            <article>
                
<p>Java Enhancement Proposal 227, titled Unicode 7.0, was created to indicate the need to update the appropriate APIs to support Unicode version 7.0. That version of Unicode was released on June 16, 2014. Previous to Java 9, Unicode version 6.2 was the latest version supported.</p>
<div class="packt_tip">You can learn more about <strong>Unicode version 7.0.0</strong> at the official specification page at: <a href="http://unicode.org/versions/Unicode7.0.0/">http://unicode.org/versions/Unicode7.0.0/</a>.<a href="http://unicode.org/versions/Unicode7.0.0/"/></div>
<p>At the time this book was published, the most recent Unicode standard was version 10.0.0, released on June 20, 2017. Interestingly, the Java 9 platform will support Unicode version 7.0.0, but not the more recent version 10.0.0 of the Unicode standard. In addition to the two Unicode specifications listed here, from version 7.0.0, will not be implemented by the Java 9 platform:</p>
<ul>
<li><strong>Unicode Technical Standard #10</strong> (<strong>UTS #10</strong>)
<ul>
<li>Unicode collation algorithm: details how to compare Unicode strings</li>
</ul>
</li>
<li><strong>Unicode Technical Standard #46</strong> (<strong>UTS #46</strong>)
<ul>
<li><strong>Unicode Internationalizing Domain Names for Applications</strong> (<strong>IDNA</strong>) <strong>Compatibility processing</strong>: comprehensive mapping for text case and domain name variants</li>
</ul>
</li>
</ul>
<p>The core of the Java 9 platform changes, specific to Unicode 7.0.0 support, includes the following Java classes:</p>
<ul>
<li><kbd>java.lang package</kbd>
<ul>
<li>Character</li>
<li>String</li>
</ul>
</li>
<li><kbd>java.text.package</kbd>
<ul>
<li>Bidi</li>
<li>BreakIterator</li>
<li>Normalizer</li>
</ul>
</li>
</ul>
<p>Let's take a quick look at each of those classes to help solidify our comprehension of the broad impact that support for Unicode 7.0.0 has on the Java 9 platform.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The java.lang package</h1>
                </header>
            
            <article>
                
<p>The <kbd>java.lang.package</kbd> provides fundamental classes used in nearly every Java application. In this section, we will look at the <kbd>Character</kbd> and <kbd>String</kbd> classes.</p>
<p>The <kbd>Character</kbd> class:</p>
<pre>    public final class Character extends Object implements<br/>     Serializable, Comparable&lt;Character&gt;</pre>
<p>This is one of the many core classes that has been around since the first version of Java. An object of the <kbd>Character</kbd> class consists of a single field of type <kbd>char</kbd>.</p>
<p>The <kbd>String</kbd> class:</p>
<pre>    public final class String extends Object implements<br/>     Serializable, Comparable&lt;String&gt;, CharSequence</pre>
<p>Strings, another core originating class, are immutable character strings.</p>
<p>Modifying the <kbd>Character</kbd> and <kbd>String</kbd> classes to support a newer version of Unicode, version 7.0 for Java 9, is an important step to help keep Java relevant as the premier programming language.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The java.text package</h1>
                </header>
            
            <article>
                
<p>The <kbd>Bidi</kbd>, <kbd>BreakIterator</kbd>, and <kbd>Normalizer</kbd> classes are not as widely used as the <kbd>Character</kbd> and <kbd>String</kbd> classes. Here is a brief overview of those classes.</p>
<p>The <kbd>Bidi</kbd> class:</p>
<pre>    public final class Bidi extends Object</pre>
<p>This class is used to implement Unicode's bidirectional algorithm. This is used to support Arabic or Hebrew.</p>
<div class="packt_infobox">For specific information on the <em>Unicode Bidirectional Algorithm</em>, visit <a href="http://unicode.org/reports/tr9/">http://unicode.org/reports/tr9/</a>.<a href="http://unicode.org/reports/tr9/"/></div>
<p>The <kbd>BreakIterator</kbd> class:</p>
<pre>    public abstract class BreakIterator extends Object<br/>     implements Cloneable</pre>
<p>This class is used for finding text boundaries.</p>
<p>The <kbd>Normalizer</kbd> class:</p>
<pre>    public final class Normalizer extends Object</pre>
<p>This method contains two methods:</p>
<ul>
<li><kbd>isNormalized</kbd>: used to determine if <kbd>char</kbd> values of a given sequence are normalized</li>
<li><kbd>normalize</kbd>: normalizes a sequence of char values</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Additional significance</h1>
                </header>
            
            <article>
                
<p>As previously stated, JDK 8 supports Unicode 6.2. Version 6.3 was released on September 30, 2013 with the following listed highlights:</p>
<ul>
<li>Bidirectional behavior improvements</li>
<li>Improved Unihan data</li>
<li>Better support for Hebrew</li>
</ul>
<p>Version 7.0.0, released on June 16, 2014, introduced the following changes:</p>
<ul>
<li>Added 2,834 characters
<ul>
<li>Increased support for Azerbaijan, Russian, and high German dialects</li>
<li>Pictographic symbols</li>
<li>Historic scripts for several countries and regions</li>
</ul>
</li>
<li>Updates to the Unicode bidirectional algorithm</li>
<li>Nearly 3,000 new Cantonese pronunciation entries</li>
<li>Major enhancements to the Indic script properties</li>
</ul>
<p>The vast changes to Unicode with version 6.3 and 7.0.0 underscores the importance of the Java 9 platform supporting 7.0.0 as opposed to 6.2, as with Java 8.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The Linux/AArch64 port</h1>
                </header>
            
            <article>
                
<p><strong>Java Enhancement Proposal 237</strong> (<strong>JEP 237</strong>) had a single goal of porting JDK 9 to Linux/AArch64. In order to understand what this means to us as Java 9 developers, let's talk a bit about hardware.</p>
<p>ARM is a British company that has been creating computing cores and architectures for over three decades. Their original name was <strong>Acorn RISC Machine</strong> (<strong>ARM</strong>), with <strong>RISC</strong> standing for <strong>Reduced Instruction Set Computing</strong>. Somewhere along the way, they changed their name to <strong>Advanced RISC Machine</strong> (<strong>ARM</strong>), and finally, to ARM Holdings or just ARM. They license their architectures to other companies. ARM reports that there have been over 100 billion ARM processors manufactured.</p>
<p>In late 2011, ARM came out with a new ARM architecture called ARMv8. This architecture included a 64-bit optional architecture called AArch64, which, as you would expect, came with a new instruction set. Here is an abbreviated list of AArch64 features:</p>
<ul>
<li>A64 instruction set:
<ul>
<li>31 general purpose 64-bit registers</li>
<li>Dedicated zero or stack pointer registers</li>
<li>The ability to take 32-bit or 64-bit arguments</li>
</ul>
</li>
<li>Advanced SIMD (NEON) - enhanced:
<ul>
<li>32x 128-bit registers</li>
<li>Supports double-precision floating points</li>
<li>AES encrypt/decrypt and SHA-1/SHA-2 hashing</li>
</ul>
</li>
<li>New exception system</li>
</ul>
<p>Oracle did a great job of identifying this architecture as something that needs to be supported in the new Java 9 platform. The new AArch64 architecture is said to essentially be an entirely new design. JDK 9 has been successfully ported to Linux/AArch64 with the following implementations:</p>
<ul>
<li>Template interpreter</li>
<li>C1 JIT compiler</li>
<li>C2 JIT compiler</li>
</ul>
<div class="packt_infobox">For information about the C1 and C2 JIT compilers, refer to <a href="e1747284-a850-4e00-b044-fd06c6eb266d.xhtml" target="_blank">Chapter 14</a>, <em>Command Line Flags</em>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Multi-resolution Images</h1>
                </header>
            
            <article>
                
<p>The purpose of Java Enhancement Proposal 251 was to create a new API that supports multi-resolution images. Specifically, to allow a multi-resolution image to encapsulate several resolution variants of the same image. This new API will be located in the <kbd>java.awt.image</kbd> package. The following diagram shows how multi-resolution can encapsulate a set of images, with different resolutions, into a single image:</p>
<div class="CDPAlignCenter CDPAlign"><img height="379" width="435" src="assets/d9140aa9-25e1-43de-a17f-e20205c18383.png"/></div>
<p>This new API will give developers the ability to retrieve all image variants or retrieve a resolution-specific image. This is a powerful set of capabilities. The <kbd>java.awt.Graphics</kbd> class will be used to retrieve the desired variant from the multi-resolution image.</p>
<p>Here is a quick look at the API:</p>
<pre>    package java.awt.image;<br/><br/>    public interface MultiResolutionImage  <br/>    {<br/>      Image getResolutionVariant(float destinationImageWidth,<br/>       float destinationImageHeight);<br/><br/>      public List &lt;Image&gt; getResolutionVariants();<br/>    }</pre>
<p>As you can see in the preceding code example, the API contains the <kbd>getResolutionVariant</kbd> and <kbd>getResolutionVariants</kbd> that return an <kbd>Image</kbd> and a list of images respectively. Since <kbd>MultiResolutionImage</kbd> is an interface, we will need an abstract class to implement it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Common Locale Data Repository (CLDR)</h1>
                </header>
            
            <article>
                
<p>Java Enhancement Proposal 252, uses CLDR Locale Data by default, implements the decision to use locale data from the Unicode Common Locale Data Repository by default. CLDR is a key component of many software applications that supports multiple languages. It is touted as the largest locale data repository and is used by a plethora of large software providers to include Apple, Google, IBM, and Microsoft. The widespread use of CLDR has made it the unofficial industry standard repository for locale data. Making this the default repository in the Java 9 platform further solidifies it as the software industry standard.</p>
<p>Interestingly, CLDR was already part of JDK 8, but was not the default library. In Java 8, we had to enable CLDR by setting a system property as shown here:</p>
<pre>    java.locale.providers=JRE,CLDR</pre>
<p>So, in Java 9, we no longer have to enable CLDR as it will be the default repository.</p>
<p>There are additional locale data repositories in the Java 9 platform. They are listed here in their default lookup order:</p>
<ol>
<li><strong>Common Locale Data Repository</strong> (<strong>CLDR</strong>).</li>
<li>COMPAT - previously JRE.</li>
<li><strong>Service Provider Interface</strong> (<strong>SPI</strong>).</li>
</ol>
<p>To change the lookup order, we can change the <kbd>java.locale.providers</kbd> setting as illustrated:</p>
<pre>    java.locale.providers=SPI,COMPAT,CLDR</pre>
<p>In the preceding example, <kbd>SPI</kbd> would be first, followed by <kbd>COMPAT</kbd>, and then <kbd>CLDR</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we focused on best practices with additional utilities provided by the Java 9 platform. Specifically, we covered <span>UTF-8 property files,</span> <span>Unicode 7.0.0,</span> <span>Linux/AArch64 port, m</span><span>ulti-resolution images, and</span> <span>Common Locale Data Repository.</span></p>
<p>In the next chapter, our final chapter, we will look at the future direction for the Java platform by looking ahead to what we can expect in Java 10.</p>


            </article>

            
        </section>
    </body></html>