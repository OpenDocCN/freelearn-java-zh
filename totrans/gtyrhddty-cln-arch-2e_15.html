<html><head></head><body>
<div id="_idContainer101">
<h1 class="hapter-number" id="_idParaDest-124"><a id="_idTextAnchor124"/><span class="koboSpan" id="kobo.1.1">15</span></h1>
<h1 id="_idParaDest-125"><a id="_idTextAnchor125"/><span class="koboSpan" id="kobo.2.1">Deciding on an Architecture Style</span></h1>
<p><span class="koboSpan" id="kobo.3.1">So far, this book has provided an opinionated approach to building a web application in a Hexagonal Architecture style. </span><span class="koboSpan" id="kobo.3.2">From organizing code to taking shortcuts, we have answered many questions that this architecture style confronts </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">us with.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">Some of the answers in this book can be applied to the conventional layered architecture style. </span><span class="koboSpan" id="kobo.5.2">Some answers can only be implemented in a domain-centric approach, such as the one proposed in this book. </span><span class="koboSpan" id="kobo.5.3">And some answers you might not even agree with because they haven’t worked in </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">your experience.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">The final questions we want answers for, however, are these: when should we actually use the Hexagonal Architecture style? </span><span class="koboSpan" id="kobo.7.2">And when should we rather stick with the conventional layered style (or any other style for </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">that matter)?</span></span></p>
<h1 id="_idParaDest-126"><a id="_idTextAnchor126"/><span class="koboSpan" id="kobo.9.1">Start simple</span></h1>
<p><span class="koboSpan" id="kobo.10.1">An important point that took me far too long to realize is that software architecture isn’t just something we define at the beginning of a software project that will take care of itself after. </span><span class="koboSpan" id="kobo.10.2">We can’t</span><a id="_idIndexMarker298"/><span class="koboSpan" id="kobo.11.1"> know everything we need to know to design a great architecture at the beginning of a project! </span><span class="koboSpan" id="kobo.11.2">The architecture of a software project can and should evolve over time to adapt to </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">changing requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">This means that we won’t know which architecture style will be the best for the software project in the long run, and we might need to change the architecture style in the future! </span><span class="koboSpan" id="kobo.13.2">To make this possible, we need to make certain that our software is supple to change. </span><span class="koboSpan" id="kobo.13.3">We need to plant a seed </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">of maintainability.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.15.1">Maintainability</span></strong><span class="koboSpan" id="kobo.16.1"> means</span><a id="_idIndexMarker299"/><span class="koboSpan" id="kobo.17.1"> that we need to make our code modular so that we can work on each module in isolation and move it around in the code base, should the need arise. </span><span class="koboSpan" id="kobo.17.2">Our architecture needs to make the boundaries between those modules as clear as possible so that unwanted dependencies between those modules don’t accidentally creep in, </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">reducing maintainability.</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">The start of a project might only involve a collection of </span><em class="itali"><span class="koboSpan" id="kobo.20.1">CRUD</span></em><span class="koboSpan" id="kobo.21.1"> use cases, and a domain-centric architecture such as Hexagonal Architecture might be overkill, so we opt for something simpler such as </span><a id="_idIndexMarker300"/><span class="koboSpan" id="kobo.22.1">the component-based approach. </span><span class="koboSpan" id="kobo.22.2">Or we might know enough about the project already that we start building out a rich domain model, in which case the Hexagonal Architecture style might be the right one to </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">start with.</span></span></p>
<h1 id="_idParaDest-127"><a id="_idTextAnchor127"/><span class="koboSpan" id="kobo.24.1">Evolve the domain</span></h1>
<p><span class="koboSpan" id="kobo.25.1">Over time, we learn more and more about the requirements of our software, and we can make better and better decisions about the best architecture style. </span><span class="koboSpan" id="kobo.25.2">The application might evolve from a collection of simple CRUD use cases to a rich domain-centric application with a lot of business rules. </span><span class="koboSpan" id="kobo.25.3">At this point, the Hexagonal Architecture style becomes a </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">good option.</span></span></p>
<p><span class="koboSpan" id="kobo.27.1">It should have become</span><a id="_idIndexMarker301"/><span class="koboSpan" id="kobo.28.1"> clear in the previous chapters that the main feature of a Hexagonal Architecture style is that we can develop domain code free from diversions, such as persistence concerns and dependencies on external systems. </span><span class="koboSpan" id="kobo.28.2">In my opinion, evolving domain code free from external influence is the single most important argument for the Hexagonal </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">Architecture style.</span></span></p>
<p><span class="koboSpan" id="kobo.30.1">This is why this architecture style is such a good match for DDD practices. </span><span class="koboSpan" id="kobo.30.2">To state the obvious, in DDD, the domain drives the development, and we can best reason about the domain if we don’t have to think about persistence concerns and other technical </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">aspects simultaneously.</span></span></p>
<p><span class="koboSpan" id="kobo.32.1">I would even go so far as to say that </span><em class="itali"><span class="koboSpan" id="kobo.33.1">domain-centric architecture styles such as the hexagonal style are enablers of DDD</span></em><span class="koboSpan" id="kobo.34.1">. </span><span class="koboSpan" id="kobo.34.2">Without an </span><a id="_idIndexMarker302"/><span class="koboSpan" id="kobo.35.1">architecture that puts the domain at the center of things, and without inverting dependencies toward domain code, we have no chance of really doing DDD. </span><span class="koboSpan" id="kobo.35.2">The design will always be driven by </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">other factors.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">So, as a first indicator of whether to use the architecture style presented in this book or not: </span><em class="itali"><span class="koboSpan" id="kobo.38.1">if the domain code is not the most important thing in your application, you probably don’t need this </span></em><span class="No-Break"><em class="itali"><span class="koboSpan" id="kobo.39.1">architecture style</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">.</span></span></p>
<h1 id="_idParaDest-128"><a id="_idTextAnchor128"/><span class="koboSpan" id="kobo.41.1">Trust your experience</span></h1>
<p><span class="koboSpan" id="kobo.42.1">We’re creatures of habit. </span><span class="koboSpan" id="kobo.42.2">Habits automate decisions for us, so we don’t have to spend time on them. </span><span class="koboSpan" id="kobo.42.3">If there’s a lion running toward us, we run. </span><span class="koboSpan" id="kobo.42.4">If we build a new web application, we use the layered architecture style. </span><span class="koboSpan" id="kobo.42.5">We have done it so often in the past that it has become </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">a habit.</span></span></p>
<p><span class="koboSpan" id="kobo.44.1">I’m not saying that habitual decisions are necessarily bad decisions. </span><span class="koboSpan" id="kobo.44.2">Habits are just as good at helping to make a good decision as they are at helping to make a bad one. </span><span class="koboSpan" id="kobo.44.3">I’m saying that we’re doing what we’re experienced in. </span><span class="koboSpan" id="kobo.44.4">We’re comfortable with what we’ve done in the past, so why should we </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">change anything?</span></span></p>
<p><span class="koboSpan" id="kobo.46.1">Therefore, the only way to make an educated </span><a id="_idIndexMarker303"/><span class="koboSpan" id="kobo.47.1">decision about an architecture style is by having experience in different architecture styles. </span><span class="koboSpan" id="kobo.47.2">If you’re unsure about the Hexagonal Architecture style, try it out on a small module of the application that you’re currently building. </span><span class="koboSpan" id="kobo.47.3">Get used to the concepts. </span><span class="koboSpan" id="kobo.47.4">Get comfortable. </span><span class="koboSpan" id="kobo.47.5">Apply the ideas in this book, modify them, and add your own ideas to develop a style that you’re </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">comfortable with.</span></span></p>
<p><span class="koboSpan" id="kobo.49.1">This experience can then guide your next </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">architecture decision.</span></span></p>
<h1 id="_idParaDest-129"><a id="_idTextAnchor129"/><span class="koboSpan" id="kobo.51.1">It depends</span></h1>
<p><span class="koboSpan" id="kobo.52.1">I would love to provide a list of multiple-choice questions to decide on an architecture style, just like all those “</span><em class="itali"><span class="koboSpan" id="kobo.53.1">Which personality type are you?</span></em><span class="koboSpan" id="kobo.54.1">” and “</span><em class="itali"><span class="koboSpan" id="kobo.55.1">If you were a dog, what kind of dog would you be?</span></em><span class="koboSpan" id="kobo.56.1">” tests that regularly swirl around on </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">social media.</span></span><span class="No-Break"><span id="footnote-048-backlink"><a class="_idFootnoteLink _idGenColorInherit" href="#footnote-048"><span class="koboSpan" id="kobo.58.1">1</span></a></span></span></p>
<div class="_idFootnote" epub:type="footnote" id="footnote-048">
<p><a class="_idFootnoteAnchor _idGenColorInherit" href="#footnote-048-backlink"><span class="koboSpan" id="kobo.59.1">1</span></a><span class="koboSpan" id="kobo.60.1">	In case you wanted to know, I’m the “Defender” personality type, and if I were a dog, I would apparently be </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">a pitbull</span></span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">.</span></span></p>
</div>
<p><span class="koboSpan" id="kobo.63.1">However, it isn’t as easy as that. </span><span class="koboSpan" id="kobo.63.2">My answer to the question of which architecture style to choose remains the professional consultant’s – “</span><em class="itali"><span class="koboSpan" id="kobo.64.1">It depends.</span></em><span class="koboSpan" id="kobo.65.1">” It depends on the type of software to be built. </span><span class="koboSpan" id="kobo.65.2">It depends on the role of the domain code. </span><span class="koboSpan" id="kobo.65.3">It depends on the experience of the team. </span><span class="koboSpan" id="kobo.65.4">And finally, it depends on being comfortable with </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">a decision.</span></span></p>
<p><span class="koboSpan" id="kobo.67.1">I hope, however, that this book has provided some sparks of inspiration to help with the question of architecture. </span><span class="koboSpan" id="kobo.67.2">If you have a story to tell about architecture decisions, with or without Hexagonal Architecture, I’d love to hear </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">about it.</span></span><span class="No-Break"><span id="footnote-047-backlink"><a class="_idFootnoteLink _idGenColorInherit" href="#footnote-047"><span class="koboSpan" id="kobo.69.1">2</span></a></span></span></p>
<div class="_idFootnote" epub:type="footnote" id="footnote-047">
<p><a class="_idFootnoteAnchor _idGenColorInherit" href="#footnote-047-backlink"><span class="koboSpan" id="kobo.70.1">2</span></a><span class="koboSpan" id="kobo.71.1">	Contact: you can drop me an email </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">at </span></span><a href="B19916_15.xhtml"><span class="No-Break"><span class="koboSpan" id="kobo.73.1">tom@reflectoring.io</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.74.1">.</span></span></p>
</div>
</div>
</body></html>