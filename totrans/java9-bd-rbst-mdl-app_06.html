<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Migrating Applications to Java 9</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In the previous chapter, <span class="calibre7">we took a close look at the structure of Java modules as specified by Project Jigsaw and examined how Project Jigsaw was implemented to improve the Java platform. We also reviewed key internal changes to the Java platform with specific focus on the new modular system. We started with a modular primer where we learned about Java 9's modular system in terms of benefits and requirements. Next, w</span><span class="calibre7">e explored how Java 9 introduced modularity to the JDK. This included a look at how the source code was reorganized for Java 9. We also explored the JDK's seven primary tool categories and learned that Java 9 modularity extends to runtime images resulting in more maintainability, better performance, and increased security. The concept of <strong class="calibre8">link time</strong> was introduced as an optional phase between compile-time and runtime. We concluded the chapter with a look at the <strong class="calibre8">Java linker</strong> and how Java 9 encapsulates internal APIs.</span></p>
<p class="mce-root">In this chapter, we will explore how to migrate our existing applications to the Java 9 platform. We will look at both manual and semi-automated migration processes. Java 9 is a major release with numerous changes to the JDK so developers should not be surprised if their Java 8 code no longer works with Java 9. This chapter aims to provide you with insights and processes to get your Java 8 code working with Java 9.</p>
<p class="mce-root">The topics we will cover in this chapter are:</p>
<ul class="calibre13">
<li class="calibre14">Quick review of Project Jigsaw</li>
<li class="calibre14">How modules fit into the Java landscape</li>
<li class="calibre14">Migration planning</li>
<li class="calibre14">Advice from Oracle</li>
<li class="calibre14">Useful tools</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Quick review of Project Jigsaw</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Project Jigsaw is the Java project that encompasses several change recommendations to the Java platform. As you have read in earlier chapters, Java 9's greatest changes involve modules and modularity. The initiative to move to modules in Java was driven by Project Jigsaw. The need for modularity stemmed from two major challenges with Java:</p>
<ul class="calibre13">
<li class="calibre14">Classpath</li>
<li class="calibre14">JDK</li>
</ul>
<p class="mce-root">Next, we will review both of those challenges and see how they were addressed and overcome with the new release to the Java platform, Java 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Classpath</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Prior to Java 9, the classpath was problematic and the source of developer anguish. This was evident in the numerous developer forums and, fortunately, Oracle was paying attention. Here are the several instances in which the classpath can be problematic; here are two primary cases:</p>
<ul class="calibre13">
<li class="calibre14">The first case involves having two or more versions of a library on your development computer. The way this was previously handled by the Java system was inconsistent. Which library was used during the class loading process was anyone's guess. This resulted in an undesired lack of specificity--not enough details regarding which library was loaded.</li>
<li class="calibre14">The second case is in exercising the most advanced features of the class loader. Often times, this type of class loader usage resulted in the most errors and bugs. These were not always easy to detect and resulted in a lot of extra work for developers.</li>
</ul>
<p class="mce-root">Classpaths, before Java 9, were almost always very lengthy. Oracle, in a recent presentation, shared a classpath that contained 110 JAR files. This type of unwieldy classpath makes it difficult to detect conflicts or even determine if anything was missing and if so, what might be missing. The re-envisioning of the Java platform as a modular system made these classpath issues a thing of the past.</p>
<div class="packt_infobox">Modules solve the pre-Java 9 classpath problem by providing reliable configuration.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The monolithic nature of the JDK</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Java has continually evolved in an impressive fashion since 1995 and with each evolutionary step, the JDK grew larger. As with Java 8, the JDK had become prohibitively large. Prior to Java 9, there were several problematic issues stemming from the monolithic nature of the JDK, including:</p>
<ul class="calibre13">
<li class="calibre14">Because the JDK is so large, it does not fit on very small devices. In some development sectors this is enough reason to find a non-Java solution for software engineering problems.</li>
<li class="calibre14">The oversized JDK resulted in waste. It was wasteful in terms of processing and memory when running on devices, networks, and the cloud. This stems from the fact that the entire JDK is loaded, even when only a small subset of the JDK is required.</li>
<li class="calibre14">While the Java platform has great performance when running, the startup performance, in terms of load and launch times, leaves much to be desired.</li>
<li class="calibre14">The vast number of internal APIs has also been a pain point. Because so many internal APIs existed and were used by developers, the system has been difficult to evolve.</li>
<li class="calibre14">The existence of internal APIs has made it difficult to make the JDK secure and scalable. With so many internal dependencies, isolating security and scalability issues has been overly problematic.</li>
</ul>
<p class="mce-root">The answer to the monolithic woes of the JDK is the module. Java 9 introduced the module and its own modular system. One of the great updates to the platform is that only the modules needed are compiled, as opposed to the entire JDK. This modular system is covered throughout this book.</p>
<div class="packt_infobox">Modules solve the pre-Java 9 JDK monolithic issue by providing strong encapsulation.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How modules fit into the Java landscape</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">As you can see from the following illustration, packages are comprised of classes and interfaces, and modules are comprised of packages. Modules are a container of packages. This is the basic premise, at a very high level, of Java 9's new modular system. It is important to view modules as part of the modular system and not simply as a new level of abstraction above packages, as the illustration might suggest.</p>
<div class="mce-root1"><img src="Images/882b9ebe-d7f3-4148-9877-d30761fcc485.png" width="1004" height="671" class="calibre60"/></div>
<p class="mce-root">So, modules are new to Java 9 and they, as you would expect, require declaration before they can be used. A module's declaration includes names of other modules in which it has a dependency. It also exports packages for other modules that have dependencies to it. Modular declarations are arguably the most important modular issue to address as you start developing with Java 9. Here is an example:</p>
<pre class="calibre21">    module com.three19.irisScan <br class="calibre2"/>    {<br class="calibre2"/>      // modules that com.three19.irisScan depends upon<br class="calibre2"/>      requires com.three19.irisCore;<br class="calibre2"/>      requires com.three19.irisData;<br class="calibre2"/><br class="calibre2"/>      // export packages for other modules that are dependent<br class="calibre2"/>         upon com.three19.irisScan<br class="calibre2"/>      exports com.three19.irisScan.biometric;<br class="calibre2"/>    }</pre>
<p class="mce-root">When programming a Java 9 application, your module declarations will be placed in a <kbd class="calibre16">module-info.java</kbd> file. Once this file is completed, you simply run <kbd class="calibre16">javac</kbd>, the Java Compiler, to generate the <kbd class="calibre16">module-info.class</kbd> Java class file. You accomplish this task in the same manner that you currently compile your <kbd class="calibre16">.java</kbd> files into <kbd class="calibre16">.class</kbd> files.</p>
<p class="mce-root">You can also create modular JAR files that have your <kbd class="calibre16">module-info.class</kbd> file at its root. This represents a great level of flexibility.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Base module</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">When programming Java 9 applications, or porting existing applications programmed with older versions of Java, the base module (<kbd class="calibre16">java.base</kbd>) must be used. Every module requires the <kbd class="calibre16">java.base</kbd> module because it defines the critical, or foundational, Java platform APIs. Here are the contents of the <kbd class="calibre16">java.base</kbd> <span class="calibre7">module:</span></p>
<pre class="calibre21">    module java.base <br class="calibre2"/>    {<br class="calibre2"/>      exports java.io;<br class="calibre2"/>      exports java.lang;<br class="calibre2"/>      exports java.lang.annotation;<br class="calibre2"/>      exports java.lang.invoke;<br class="calibre2"/>      exports java.lang.module;<br class="calibre2"/>      exports java.lang.ref;<br class="calibre2"/>      exports java.lang.reflect;<br class="calibre2"/>      exports java.math;<br class="calibre2"/>      exports java.net;<br class="calibre2"/>      exports java.net.spi;<br class="calibre2"/>      exports java.nio;<br class="calibre2"/>      exports java.nio.channels;<br class="calibre2"/>      exports java.nio.channels.spi;<br class="calibre2"/>      exports java.nio.charset;<br class="calibre2"/>      exports java.nio.charset.spi;<br class="calibre2"/>      exports java.nio.file;<br class="calibre2"/>      exports java.nio.file.attribute;<br class="calibre2"/>      exports java.nio.file.spi;<br class="calibre2"/>      exports java.security;<br class="calibre2"/>      exports java.security.aci;<br class="calibre2"/>      exports java.security.cert;<br class="calibre2"/>      exports java.security.interfaces;<br class="calibre2"/>      exports java.security.spec;<br class="calibre2"/>      exports java.text;<br class="calibre2"/>      exports java.text.spi;<br class="calibre2"/>      exports java.time;<br class="calibre2"/>      exports java.time.chrono;<br class="calibre2"/>      exports java.time.format;<br class="calibre2"/>      exports java.time.temporal;<br class="calibre2"/>      exports java.time.zone;<br class="calibre2"/>      exports java.util;<br class="calibre2"/>      exports java.util.concurrent;<br class="calibre2"/>      exports java.util.concurrent.atomic;<br class="calibre2"/>      exports java.util.concurrent.locks;<br class="calibre2"/>      exports java.util.function;<br class="calibre2"/>      exports java.util.jar;<br class="calibre2"/>      exports java.util.regex;<br class="calibre2"/>      exports java.util.spi;<br class="calibre2"/>      exports java.util.stream;<br class="calibre2"/>      exports java.util.zip;<br class="calibre2"/>      exports java.crypto;<br class="calibre2"/>      exports java.crypto.interfaces;<br class="calibre2"/>      exports java.crytpo.spec;<br class="calibre2"/>      exports java.net;<br class="calibre2"/>      exports java.net,ssi;<br class="calibre2"/>      exports java.security.auth;<br class="calibre2"/>      exports java.security.auth.callbak;<br class="calibre2"/>      exports java.security.auth.login;<br class="calibre2"/>      exports java.security.auth.spi;<br class="calibre2"/>      exports java.security.auth.x500;<br class="calibre2"/>      exports java.security.cert;<br class="calibre2"/>    }</pre>
<p class="mce-root">As you can see, the <kbd class="calibre16">java.base</kbd> module does not require any modules and it exports numerous packages. It can be useful to have a list of these exports handy so you know what is available to you as you start creating applications using the new Java platform, Java 9.</p>
<p class="mce-root">You will notice that in the previous section, we did not include the <kbd class="calibre16">requires java.base;</kbd> line of code in our declaration of our <kbd class="calibre16">com.three19.irisScan</kbd> module. The updated code is provided as follows and now includes the <kbd class="calibre16">requires java.base;</kbd> line of code:</p>
<pre class="calibre21">    module com.three19.irisScan <br class="calibre2"/>    {<br class="calibre2"/>      // modules that com.three19.irisScan depends upon<br class="calibre2"/>      requires java.base; // optional inclusion <br class="calibre2"/>      requires com.three19.irisCore;<br class="calibre2"/>      requires com.three19.irisData;<br class="calibre2"/><br class="calibre2"/>      // export packages for other modules that are dependent<br class="calibre2"/>         upon com.three19.irisScan<br class="calibre2"/>      exports com.three19.irisScan.biometric;<br class="calibre2"/>    }</pre>
<p class="mce-root">If you do not include the <kbd class="calibre16">requires java.base;</kbd> line of code in your module declarations, the Java Compiler will automatically include it.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Reliable configuration</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">As suggested earlier in this chapter, modules provide a reliable configuration of our Java 9 applications that solves the classpath problem in earlier versions of the Java platform.</p>
<p class="mce-root">Java reads and interprets modular declarations making the modules readable. These readable modules permit the Java platform to determine if any modules are missing, if there are duplicate libraries declared, or there are any other conflicts. In Java 9, very specific error messages will be generated and output by the compiler or at runtime. Here is an example of a compile-time error:</p>
<pre class="calibre21"><strong class="calibre3">src/com.three19.irisScan/module-info.java: error: module not found: com.three19.irisScan </strong><br class="calibre2"/><strong class="calibre3">requires com.three19.irisCore;</strong><br class="calibre2"/><strong class="calibre3">         ^</strong><br class="calibre2"/><strong class="calibre3">1 error</strong></pre>
<p class="mce-root">Here is an example of a runtime error that would occur if the module <kbd class="calibre16">com.three19.isrisCore</kbd> was not found, but required by the <kbd class="calibre16">com.three19.irisScan</kbd> app:</p>
<pre class="calibre21"><strong class="calibre3">Error occurred during initialization of VM</strong><br class="calibre2"/><strong class="calibre3">java.lang.module.ResolutionException: Module com.three19.irisCore not found, required by com.three19.irisScan app</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Strong encapsulation</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Earlier in this chapter, you read that Java 9's strong encapsulation remedied the monolithic JDK issue. Encapsulation, in Java 9, is driven by the information in the <kbd class="calibre16">module-info.java</kbd> file. The information in this file lets Java know what modules are dependent upon others and what each of them exports. This underscores the importance of ensuring our <kbd class="calibre16">module-info-java</kbd> files are properly configured. Let's look at an example written with standard Java code, nothing new in Java 9 in the way this was coded:</p>
<div class="mce-root1"><img src="Images/d158dbd8-12a3-4967-8461-1f43137bd878.png" width="1826" height="608" class="calibre61"/></div>
<p class="mce-root">In the preceding example, the <kbd class="calibre16">com.three19.irisScan</kbd> module has an <kbd class="calibre16">irisScanner</kbd> package intended for internal use and an <kbd class="calibre16">irisScanResult</kbd> class. If the <kbd class="calibre16">com.three19.access</kbd> application tries to import and use the <kbd class="calibre16">irisScanResult</kbd> class, the following error message will be produced by the Java Compiler:</p>
<pre class="calibre21"><strong class="calibre3">src/com.three19.access/com/three19/access/Main.java: error: irisScanResult is not accessible because package com.three19.irisScanner.internal is not exported</strong><br class="calibre2"/><strong class="calibre3">  private irisSanResult scan1 = new irisScanResult();</strong><br class="calibre2"/><strong class="calibre3">                                     ^</strong><br class="calibre2"/><strong class="calibre3">1 error</strong></pre>
<p class="mce-root">If for some reason the compiler does not catch this error, although it would be very unlikely, the following runtime error would occur:</p>
<pre class="calibre21"><strong class="calibre3">Exception in thread "main" java.lang.IllegalAccessError: class com.three19.access.Main (in module: com.three19.access) cannot access class com.three19.irisScanner.internal.irisScanResult (in module: com.three19.irisScan), com.three19.irisScanner.internal is not exported to com.three19.access.</strong></pre>
<p class="mce-root">The detailed error messages will make debugging and troubleshooting much easier.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Migration planning</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The changes to the Java platform are significant and Java 9 is considered a major release. It would be naive to think our current Java applications will work seamlessly on Java 9. While that might be the case, at least for simple programs, it is prudent to plan ahead and consider the issues you are most likely to encounter. Before we look at these issues, let's test a simple Java application in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Testing a simple Java application</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The following code consists of a single Java class, <kbd class="calibre16">GeneratePassword.</kbd> This class prompts the user for a desired password length and then generates a password based on the user's requested length. If the user asks for a length shorter than 8, the default length of 8 will be used. This code was written with the Java SE 1.7 JRE System Library:</p>
<pre class="calibre21">    /*<br class="calibre2"/>    * This is a simple password generation app <br class="calibre2"/>    */<br class="calibre2"/><br class="calibre2"/>    import java.util.Scanner;<br class="calibre2"/><br class="calibre2"/>    public class GeneratePassword <br class="calibre2"/>    {<br class="calibre2"/>      public static void main(String[] args) <br class="calibre2"/>      { <br class="calibre2"/>        // passwordLength int set up to easily change the schema <br class="calibre2"/>        int passwordLength = 8; //default value<br class="calibre2"/> <br class="calibre2"/>        Scanner in = new Scanner(System.in); <br class="calibre2"/>        System.out.println("How long would you like your<br class="calibre2"/>         password (min 8)?"); <br class="calibre2"/>        int desiredLength; <br class="calibre2"/>        desiredLength = in.nextInt(); <br class="calibre2"/><br class="calibre2"/>        // Test user input <br class="calibre2"/>        if (desiredLength &gt;8) <br class="calibre2"/>        { <br class="calibre2"/>          passwordLength = desiredLength; <br class="calibre2"/>        } <br class="calibre2"/><br class="calibre2"/>        // Generate new password <br class="calibre2"/>        String newPassword = createNewPassword(passwordLength); <br class="calibre2"/><br class="calibre2"/>        // Prepare and provide output <br class="calibre2"/>        String output = "nYour new " + passwordLength <br class="calibre2"/>         + "-character password is: "; <br class="calibre2"/>        System.out.println(output + newPassword); <br class="calibre2"/>      }<br class="calibre2"/><br class="calibre2"/>      public static String createNewPassword(int lengthOfPassword) <br class="calibre2"/>      { <br class="calibre2"/>        // Start with an empty String <br class="calibre2"/>        String newPassword = "";<br class="calibre2"/> <br class="calibre2"/>        // Populate password  <br class="calibre2"/>        for (int i = 0; i &lt; lengthOfPassword; i++) <br class="calibre2"/>        { <br class="calibre2"/>          newPassword = newPassword + randomizeFromSet(<br class="calibre2"/>            "aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ<br class="calibre2"/>             0123456789+-*/?!@#$%&amp;"); <br class="calibre2"/>        } <br class="calibre2"/><br class="calibre2"/>        return newPassword; <br class="calibre2"/>      }<br class="calibre2"/> <br class="calibre2"/>      public static String randomizeFromSet(String characterSet) <br class="calibre2"/>      { <br class="calibre2"/>        int len = characterSet.length();<br class="calibre2"/>        int ran = (int)(len * Math.random());<br class="calibre2"/>        return characterSet.substring(ran, ran + 1);<br class="calibre2"/>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">In the following screenshot, we test the <kbd class="calibre16">GeneratePassword</kbd> app on a Mac running Java 8. As you can see, we start by querying Java to verify the current version. In this test, Java <kbd class="calibre16">1.8.0_121</kbd> was used. Next, we compile the <kbd class="calibre16">GeneratePassword</kbd> Java file using the <kbd class="calibre16">javac</kbd> utility. Lastly, we run the app:</p>
<div class="mce-root1"><img src="Images/25190f7c-a461-46e7-b135-5fd939b71b8f.png" width="1179" height="518" class="calibre62"/></div>
<p class="mce-root">As you can see from the preceding test, <kbd class="calibre16">GeneratePassword.java</kbd> was successfully compiled with the <kbd class="calibre16">GeneratePassword.class</kbd> file resulting. The application was run using the <kbd class="calibre16">java GeneratePassword</kbd> command. The user was prompted for a desired password length and <kbd class="calibre16">32</kbd> was entered. The application then successfully generated a 32-character random password and provided the appropriate output.</p>
<p class="mce-root">This test demonstrated the example application works successfully using JDK 1.8. Next, let's test the same application using JDK 9.</p>
<p class="mce-root">We start with the <kbd class="calibre16">java -version</kbd> command to show that we are using JDK 9 on this computer. The following screenshot shows that we successfully compiled the <kbd class="calibre16">.java</kbd> file to a <kbd class="calibre16">.class</kbd> file. When the application was run, it functioned as expected and provided the proper results:</p>
<div class="mce-root1"><img src="Images/45ce0b95-2ac2-48f6-bd2c-879dbf413f7a.png" width="623" height="313" class="calibre63"/></div>
<p class="mce-root">As you can see, we clearly demonstrated that a pre-Java 9 application has the potential to successfully run on Java 9 without having to make any modifications. This is a simple case study and featured a very basic Java program. This is, of course, the best case scenario, and cannot be assumed. You will want to test your applications to ensure they run as expected on the Java 9 platform.</p>
<p class="mce-root">In the next section, we will review some potential issues you might encounter when testing your pre-Java 9 applications using the new Java platform with JDK 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Potential migration issues</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The potential migration issues featured in this section include direct access to the JRE, access to internal APIs, accessing internal JARs, JAR URL depreciation, the extension mechanism, and the JDK's modularization. Let's look at each of these potential migration issues.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The JRE</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Creating the Java 9's modular system resulted in some simplification in respect to the number and location of development and utility tools. One such example is the JDK's consumption of the JRE. In all pre-Java 9 versions, the Java platform included the JDK and JRE as two separate components. In Java 9, these components have been combined. This is a significant change and one that developers should be keenly aware of. If you have an application that specifically points to the JRE directory, you will need to make changes to avoid problems. The JRE contents are shown as follows:</p>
<div class="mce-root1"><img src="Images/b3777984-93a8-40e6-8b2b-f30cdef4c8aa.png" width="1405" height="324" class="calibre64"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Access to internal APIs</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java 9 platform has encapsulated internal APIs to increase security of the platform and applications written in Java. Applications that you program in Java 9 will not have default access to the JDK's internal APIs, unlike with previous versions of the Java platform. Oracle has identified some internal APIs as critical; those APIs remain accessible via the <kbd class="calibre16">jdk.unsupported</kbd> JDK module.</p>
<p class="mce-root">The aforementioned critical APIs (internal to the JDK) are:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">sun.misc</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.misc.Unsafe</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.reflect.Reflection</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.reflect.ReflectionFactory.newConstrutorForSerialization</kbd></li>
</ul>
<p class="mce-root">If you have pre-Java 9 applications that implement any <kbd class="calibre16">sun.*</kbd> or <kbd class="calibre16">com.sun.*</kbd> package, you will likely run into problems migrating your applications to Java 9. In order to address this issue, you should review your class files for use of <kbd class="calibre16">sun.*</kbd> and <kbd class="calibre16">com.sun.*</kbd> packages. Alternatively, you can use the Java dependency analysis tool, <kbd class="calibre16">jdeps</kbd>, to help determine if your Java program has any dependencies on JDK internal APIs.</p>
<div class="packt_infobox">The <kbd class="calibre39">jdeps</kbd> tool is the Java dependency analysis tool, that can be used to help determine if your Java program has any dependencies on JDK internal APIs.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Accessing internal JARs</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Java 9 does not permit access to internal JARs such as <kbd class="calibre16">lib/ant-javax.jar</kbd>, <kbd class="calibre16">lib/dt.jar</kbd>, and others listed in the <kbd class="calibre16">lib</kbd> directory shown here:</p>
<div class="mce-root1"><img src="Images/d6eaf16e-597f-46c8-a855-be49e3df00e1.png" width="165" height="273" class="calibre65"/></div>
<p class="mce-root">The key thing to note here is that if you have Java applications that are dependent on one of these tools residing in the <kbd class="calibre16">lib</kbd> folder, you will need to modify your code accordingly.</p>
<div class="packt_tip">It is recommended that you test your IDE once you start using Java 9 to ensure the IDE is updated and officially supports Java 9. If you use more than one IDE for Java development, test each one to avoid surprises.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JAR URL depreciation</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JAR file URLs were, prior to Java 9, used by some APIs to identify specific files in the runtime image. These URLs contain a <kbd class="calibre16">jar:file:</kbd> prefix with two paths; one to the <kbd class="calibre16">jar</kbd> and one to the specific resource file within the <kbd class="calibre16">jar</kbd>. Here is the syntax for the pre-Java 9 JAR URL:</p>
<pre class="calibre21">    jar:file:&lt;path-to-jar&gt;!&lt;path-to-file-in-jar&gt;</pre>
<p class="mce-root"><span class="calibre7">With the advent of Java 9's modular system, containers will house resource files instead of individual JARs. The new syntax for accessing resource files is as follows:</span></p>
<pre class="calibre21">    jrt:/&lt;module-name&gt;/&lt;path-to-file-in-module&gt;</pre>
<p class="mce-root">A new URL schema, <kbd class="calibre16">jrt</kbd>, is now in place for naming resources within a runtime image. These resources include classes and modules. The new schema allows for the identification of a resource without introducing a security risk to the runtime image. This increased security ensures that the runtime image's form and structure remain concealed. Here is the new schema:</p>
<pre class="calibre21">    jrt:/[$MODULE[/$PATH]]</pre>
<p class="mce-root">Interestingly, a <kbd class="calibre16">jrt</kbd> URL's structure determines its meaning, suggesting that the structure can take one of several forms. Here are three examples of different <kbd class="calibre16">jrt</kbd> URL structures:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">jrt:/$MODULE/$PATH</kbd>: This structure provides access to the resource file, identified with the <kbd class="calibre16">$PATH</kbd> parameter, within the module specified with the <kbd class="calibre16">$MODULE</kbd> parameter</li>
<li class="calibre14"><kbd class="calibre16">jrt:/$MODULE</kbd>: This structure provides reference to all resource files within the module specified with the <kbd class="calibre16">$MODULE</kbd> parameter</li>
<li class="calibre14"><kbd class="calibre16">jrt:/</kbd>: This structure provides reference to all resource files in the runtime image</li>
</ul>
<p class="mce-root">If you have preexisting code that uses URL instances, returned by APIs, you should not have any problems. On the other hand, if your code is dependent on the <kbd class="calibre16">jar</kbd> URL structure, you will have problems.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Extension mechanism</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java platform previously had an extension mechanism that gave developers the ability to make custom APIs available to all applications. As you can see in the following illustration, extensions are plugins of sorts, or add-ons to the Java platform. The APIs and classes in each extension are, by default, automatically available:</p>
<div class="mce-root1"><img src="Images/ab617175-aee5-44af-9913-b458652c65a7.png" width="1024" height="768" class="calibre66"/></div>
<p class="mce-root">As the illustration suggests, Java applications have access both to the Java platform and extensions without requiring classpaths. This feature was depreciated in Java 8 and no longer exists in Java 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The JDK's modularization</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">By now, you have a firm appreciation of Java 9's modularization. The old adage in Java, and other object-oriented programming language, is <em class="calibre20">everything is a class</em>. Now, with Java 9, <em class="calibre20">everything is a module</em> is the new adage. There are three type of modules as explained as follows:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Module type</strong></td>
<td class="calibre33"><strong class="calibre3">Description</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33">Automatic</td>
<td class="calibre33">When a JAR is placed on a new module path, modules are automatically created</td>
</tr>
<tr class="calibre32">
<td class="calibre33">Explicit/Named</td>
<td class="calibre33">These modules are manually defined by editing the <kbd class="calibre16">module-info.java</kbd> file</td>
</tr>
<tr class="calibre35">
<td class="calibre33">Unnamed</td>
<td class="calibre33">When a JAR is placed on a classpath, unnamed modules are created</td>
</tr>
</tbody>
</table>
<p class="mce-root"> </p>
<p class="mce-root">When you migrate your applications to Java 9, your application and its libraries become unnamed modules. So, you will need to ensure all the modules are in the module path.</p>
<p class="mce-root">Another thing to be aware of is that your runtime image will not contain the entire JDK. Instead, it will only contain the modules your application requires. It is worth reviewing how the JDK is modularized in Java 9. The following table contains the API specification for the JDK in Java 9:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">jdk.accessibility</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.attach</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.charsets</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.compiler</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">jdk.crypto.cryptoki</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.crypto.ec</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.dynalink</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.editpad</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">jdk.hotspot.agent</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.httpserver</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.incubator.httpclient</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jartool</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">jdk.javadoc</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jcmd</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jconsole</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jdeps</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">jdk.jdi</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jdwp.agent</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jlink</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jshell</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">jdk.jsobject</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.jstatd</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.localedata</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.management</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">jdk.management.agent</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.naming.dns</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.naming.rmi</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.net</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">jdk.pack</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.packager.services</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.policytool</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.rmic</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">jdk.scripting.nashorn</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.sctp</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.security.auth</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.security.jgss</kbd></td>
</tr>
<tr class="calibre35">
<td class="calibre33"><kbd class="calibre16">jdk.snmp</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.xml.dom</kbd></td>
<td class="calibre33"><kbd class="calibre16">jdk.zipfs</kbd></td>
<td class="calibre33"/>
</tr>
</tbody>
</table>
<p class="mce-root">The following table contains the API specification for Java SE in Java 9:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.activation</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.base</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.compiler</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.cobra</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.datatransfer</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.desktop</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.instrument</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.logging</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.management</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.management.rmi</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.naming</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.prefs</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.rmi</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.scripting</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.se</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.se.ee</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.security.jgss</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.security.sasi</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.sql</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.sql.rowset</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.transaction</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.xml</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.xml.bind</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.xml.crypto</kbd></td>
</tr>
<tr class="calibre41">
<td class="calibre33"><kbd class="calibre16">java.xml.ws</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.xml.ws</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.xml.ws.annotation</kbd></td>
<td class="calibre33"/>
</tr>
</tbody>
</table>
<div class="packt_tip">Remember, all applications will have access to <kbd class="calibre39">java.base</kbd> as it is in the module path by default.</div>
<p class="mce-root">The following table contains the API specification for JavaFX in Java 9:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javafx.base</kbd></td>
<td class="calibre33"><kbd class="calibre16">javafx.controls</kbd></td>
<td class="calibre33"><kbd class="calibre16">javafx.fxml</kbd></td>
<td class="calibre33"><kbd class="calibre16">javafx.graphics</kbd></td>
</tr>
<tr class="calibre35">
<td class="calibre33"><kbd class="calibre16">javafx.media</kbd></td>
<td class="calibre33"><kbd class="calibre16">javafx.swing</kbd></td>
<td class="calibre33"><kbd class="calibre16">javafx.web</kbd></td>
<td class="calibre33"/>
</tr>
</tbody>
</table>
<p class="mce-root"> </p>
<p class="mce-root">There are two additional modules:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">java.jnlp</kbd> defines the API for <strong class="calibre3">JNLP</strong> (<strong class="calibre3">Java Network Launch Protocol</strong>)</li>
<li class="calibre14"><kbd class="calibre16">java.smartcardio</kbd> defines the API for the Java Smart Card Input/Output</li>
</ul>
<div class="packt_tip">For details on any of these modules, visit Oracle's <em class="calibre22">Java® Platform, Standard Edition &amp; Java Development Kit Version 9 API Specification</em> website: <a href="http://download.java.net/java/jdk9/docs/api/overview-summary.html" class="calibre25 pcalibre pcalibre3 pcalibre2 pcalibre1">http://download.java.net/java/jdk9/docs/api/overview-summary.html</a>.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Advice from Oracle</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Oracle has done a great job in bringing us this major update, version 9, to the Java platform. Their insights into getting ready for Java 9 and how to migrate to the new JDK is worth reviewing. In this section, we will look at preparatory steps, breaking encapsulation, changes to the runtime image, components such as tools and APIs that have been removed, changes to garbage collection, and deployment.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Preparatory steps</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Oracle provides a five-step process to help developers migrate their Java applications to version 9. These steps are listed as follows and then covered in subsequent sections:</p>
<ol class="calibre18">
<li class="chapter">Get the JDK 9 early access build.</li>
<li class="chapter">Run your program before recompiling.</li>
<li class="chapter">Update third-party libraries and tools.</li>
<li class="chapter">Compile your application.</li>
<li class="chapter">Run <kbd class="calibre16">jdeps</kbd> on your code.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting the JDK 9 early access build</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">If you are reading this book before Java 9 is officially released, then you can obtain a JDK 9 early access build from here--<a href="http://jdk.java.net/9/" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">http://jdk.java.net/9/</a>. Early release builds are available for Windows (32 and 64), macOS (64), Linux (32 and 64) and various Linux ARM, Solaris, and Alpine Linux versions.</p>
<p class="mce-root">Taking the time to test your applications for Java 9 and get them migrated before Java 9 is officially released, helps ensure you will not experience any downtime for services that rely on your Java applications.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Running your program before recompiling</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">As indicated earlier in this chapter, there is a chance that your existing Java applications will run without modification on the Java 9 platform. So, before you make any changes, try running your current application on the Java 9 platform. If your application works fine on Java 9, that is great, but your work is not complete. Review the next three sections on updating third-party libraries and tools, compiling your application, and running <kbd class="calibre16">jdeps</kbd> on your code.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Updating third-party libraries and tools</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Third-party libraries and tools can help extend our applications and shorten development time. For Java 9 compatibility, it is important to ensure that each third-party library and tool you use is compatible with and supports version 9 of the JDK. Running your application on Java 9 will not provide you with the level of insight you need to ensure you do not have compatibility issues down the road. It is recommended that you review the official website for each library and tool to verify compatibility with and support of JDK 9.</p>
<p class="mce-root">If a library or tool that you use does have a version that supports JDK 9, download and install it. If you find one that does not yet support JDK 9, consider finding a replacement for it.</p>
<p class="mce-root">In our context, tools includes <strong class="calibre8">Integrated Development Environments</strong> (<strong class="calibre8">IDE</strong>). NetBeans, Eclipse, and IntelliJ all have IDE versions that support JDK 9. Links to those sites are provided as follows:</p>
<ul class="calibre13">
<li class="calibre14"><strong class="calibre3">NetBeans</strong>: <a href="http://bits.netbeans.org/download/trunk/nightly/latest/" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">http://bits.netbeans.org/download/trunk/nightly/latest/</a></li>
<li class="calibre14"><strong class="calibre3">Eclipse</strong>: <a href="https://www.eclipse.org/community/eclipse_newsletter/2015/june/article4.php" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://www.eclipse.org/community/eclipse_newsletter/2015/june/article4.php</a></li>
<li class="calibre14"><strong class="calibre3">IntelliJ</strong>: <a href="https://www.jetbrains.com/idea/nextversion/" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://www.jetbrains.com/idea/nextversion/</a></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Compiling your application</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Your next step is to compile your application using JDK 9's <kbd class="calibre16">javac</kbd>. This is important, even if your app works fine on JDK 9. You might not receive compiler errors, but watch for warnings too. Here are the most common reasons your applications might not compile with JDK 9, assuming they compiled fine prior to Java 9.</p>
<p class="mce-root">First, as indicated earlier in this chapter, most of the JDK 9 internal APIs are not accessible by default. Your indication will be an <kbd class="calibre16">IllegalAccessErrors</kbd> error at runtime or compile time. You will need to update your code so that you are using accessible APIs.</p>
<p class="mce-root">A second reason your pre-Java 9 applications might not compile with JDK 9 is if you use the underscore character as a single character identifier. According to Oracle, this practice generates a warning in Java 8 and an error in Java 9. Let's look at an example. The following Java class instantiates an Object named <kbd class="calibre16">_</kbd> and prints a singular message to the console:</p>
<pre class="calibre21"><span class="calibre5">    public</span> <span class="calibre5">class</span> Underscore <br class="calibre2"/>    {<span class="calibre5"> <br class="calibre2"/></span><span class="calibre5">      public</span> <span class="calibre5">static</span> <span class="calibre5">void</span> main(String[] <span class="calibre5">args</span>) <br class="calibre2"/>      {<br class="calibre2"/>        Object <span class="calibre5">_</span> = <span class="calibre5">new</span> Object();<br class="calibre2"/><span class="calibre5">        System.</span><span class="calibre5">out</span><span class="calibre5">.println(</span>"This ran successfully."<span class="calibre5">);<br class="calibre2"/></span>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">When we compile this program with Java 8, we receive a warning that <span class="calibre7">use of '<kbd class="calibre16">_</kbd>' as an identifier might not be supported in releases after Java SE 8:</span></p>
<div class="mce-root1"><img src="Images/186dc2c5-1bf0-48fc-a3a8-f717c0a30117.png" width="1147" height="312" class="calibre67"/></div>
<p class="mce-root"><span class="calibre7">As you can see in the following screenshot, that is just a warning and the application runs fine:</span></p>
<div class="mce-root1"><img src="Images/54bfa604-00e6-4f34-ae21-9b0d281ed85c.png" width="673" height="200" class="calibre68"/></div>
<p class="mce-root">Now, let's try compiling the same class using JDK 9:</p>
<div class="mce-root1"><img src="Images/48d8afd2-2a44-4906-adcf-36a7b8c45c16.png" width="694" height="234" class="calibre69"/></div>
<p class="mce-root">As you can see, use of the underscore as a single character identifier still only resulted in a warning and not an error. The application ran successfully. This test was run when JDK 9 was still in early release. It is assumed that running this test once JDK 9 has been officially released will result in an error instead of just a warning. The error that would likely be thrown is as follows:</p>
<pre class="calibre21"><strong class="calibre3">Underscore.java:2: error: as of release 9, '_' is a keyword, and may not be used as a legal identifier.</strong></pre>
<p class="mce-root">Even if this issue is not resolved with the formal release of JDK 9, use of an underscore as a single character identifier is not good programming practice, so you should steer away from using it.</p>
<p class="mce-root">A third potential reason for your pre-Java 9 programmed application not to compile with JDK 9 is if you are using the <kbd class="calibre16">-source</kbd> and <kbd class="calibre16">-target</kbd> compiler options. Let's take a look at the <kbd class="calibre16">-source</kbd> and <kbd class="calibre16">-target</kbd> compiler options pre-Java 9 and with Java 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Pre-Java 9 -source and -target options</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">-source</kbd> option specifies the Java SE version and has the following acceptable values:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Value</strong></td>
<td class="calibre33"><strong class="calibre3">Description</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33">1.3</td>
<td class="calibre33"><kbd class="calibre16">javac</kbd> does not support features introduced after Java SE 1.3.</td>
</tr>
<tr class="calibre32">
<td class="calibre33">1.4</td>
<td class="calibre33"><kbd class="calibre16">javac</kbd> accepts code with language features introduced in Java SE 1.4.</td>
</tr>
<tr class="calibre34">
<td class="calibre33">1.5 or 5</td>
<td class="calibre33"><kbd class="calibre16">javac</kbd> accepts code with languages features introduced in Java SE 1.5.</td>
</tr>
<tr class="calibre32">
<td class="calibre33">1.6 or 6</td>
<td class="calibre33"><kbd class="calibre16">javac</kbd> reports encoding errors as errors instead of warnings. Of note, no new language features were intruded with Java SE 1.6.</td>
</tr>
<tr class="calibre35">
<td class="calibre33">1.7 or 7</td>
<td class="calibre33"><kbd class="calibre16">javac</kbd> accepts code with language features introduced in Java SE 1.7. This is the default value if the <kbd class="calibre16">-source</kbd> option is not used.</td>
</tr>
</tbody>
</table>
<p class="mce-root">The <kbd class="calibre16">-target</kbd> option tells <kbd class="calibre16">javac</kbd> what version of the JVM to target. The acceptable values for the <kbd class="calibre16">-target</kbd> option are--<kbd class="calibre16">1.1</kbd>, <kbd class="calibre16">1.2</kbd>, <kbd class="calibre16">1.3</kbd>, <kbd class="calibre16">1.4</kbd>, <kbd class="calibre16">1.5</kbd> or <kbd class="calibre16">5</kbd>, <kbd class="calibre16">1.6</kbd> or <kbd class="calibre16">6</kbd> and <kbd class="calibre16">1.7</kbd> or <kbd class="calibre16">7</kbd>. If the <kbd class="calibre16">-target</kbd> option is not used, the default JVM target is dependent on the value used with the <kbd class="calibre16">-source</kbd> option. Here is a table of <kbd class="calibre16">-source</kbd> values with their associated <kbd class="calibre16">-target</kbd>:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">-source value</strong></td>
<td class="calibre33"><strong class="calibre3">default -target</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33">unspecified</td>
<td class="calibre33">1.7</td>
</tr>
<tr class="calibre32">
<td class="calibre33">1.2</td>
<td class="calibre33">1.4</td>
</tr>
<tr class="calibre34">
<td class="calibre33">1.3</td>
<td class="calibre33">1.4</td>
</tr>
<tr class="calibre32">
<td class="calibre33">1.4</td>
<td class="calibre33">1.4</td>
</tr>
<tr class="calibre34">
<td class="calibre33">1.5 or 5</td>
<td class="calibre33">1.7</td>
</tr>
<tr class="calibre32">
<td class="calibre33">1.6 or 6</td>
<td class="calibre33">1.7</td>
</tr>
<tr class="calibre35">
<td class="calibre33">1.7</td>
<td class="calibre33">1.7</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java 9 -source and -target options</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In Java 9, the supported values are shown as follows:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Supported values</strong></td>
<td class="calibre33"><strong class="calibre3">Remarks</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33">9</td>
<td class="calibre33">This is the default, should no value be specified</td>
</tr>
<tr class="calibre32">
<td class="calibre33">8</td>
<td class="calibre33">Sets support to 1.8</td>
</tr>
<tr class="calibre34">
<td class="calibre33">7</td>
<td class="calibre33">Sets support to 1.7</td>
</tr>
<tr class="calibre41">
<td class="calibre33">6</td>
<td class="calibre33">Sets support to 1.6 and generates a warning (not an error) to indicate JDK 6 is depreciated</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Running jdeps on your code</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">jdeps</kbd> class dependency analysis tool is not new to Java 9, but perhaps has never been as important to developers with the advent of Java 9. An important step to migrating your applications to Java 9 is to run the <kbd class="calibre16">jdeps</kbd> tool to determine the dependencies your applications and its libraries have. The <kbd class="calibre16">jdeps</kbd> tool does a great job of suggesting replacements if your code has dependencies on any internal APIs.</p>
<p class="mce-root">The following screenshot shows the options available to you when using the <kbd class="calibre16">jdeps</kbd> analyzer:</p>
<div class="mce-root1"><img src="Images/9b466a2c-1863-4887-b1e0-f5084237790f.png" width="820" height="812" class="calibre70"/></div>
<p class="mce-root">Let's take a look at an example. Here is a simple Java class called <kbd class="calibre16">DependencyTest</kbd>:</p>
<pre class="calibre21"><span class="calibre5">    import</span> <span class="calibre5">sun.misc.BASE64Encoder</span>;<br class="calibre2"/><br class="calibre2"/><span class="calibre5">    public</span> <span class="calibre5">class</span> DependencyTest <br class="calibre2"/>    {<br class="calibre2"/>     <span class="calibre5"> </span><span class="calibre5">public</span> <span class="calibre5">static</span> <span class="calibre5">void</span> main(String[] <span class="calibre5">args</span>) <span class="calibre5">throws<br class="calibre2"/></span>       InstantiationException, IllegalAccessException <br class="calibre2"/><span class="calibre5"> </span>     {<br class="calibre2"/>  <span class="calibre5">     </span> <span class="calibre5">BASE64Encoder</span>.<span class="calibre5">class</span>.newInstance();<br class="calibre2"/><span class="calibre5">        System.</span><span class="calibre5">out</span><span class="calibre5">.println(</span>"This Java app ran successfully."<span class="calibre5">);<br class="calibre2"/></span>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">Now, let's use <kbd class="calibre16">javac</kbd> to compile this class using Java 8:</p>
<div class="mce-root1"><img src="Images/e19fbeb0-d819-4916-941f-7ec2c2e68c2c.png" width="1227" height="452" class="calibre71"/></div>
<p class="mce-root">As you can see, Java 8 successfully compiled the class and the application ran. The compiler did give us a <kbd class="calibre16">DependencyTest.java:6: warning: BASE64Encoder is internal proprietary API and may be removed in a future release</kbd> warning. Now, let's see what happens when we try to compile this class using Java 9:</p>
<div class="mce-root1"><img src="Images/82447d64-8290-4dfb-bec6-2ca32da76141.png" width="785" height="222" class="calibre72"/></div>
<p class="mce-root">In this case, with Java 9, the compiler gave us two warnings instead of one. The first warning is for the <kbd class="calibre16">import sun.misc.BASE64Encoder;</kbd> statement and the second for the <kbd class="calibre16">BASE64Encoder.class.newInstance();</kbd> method call. As you can see, these are just warnings and not errors, so the <kbd class="calibre16">DependencyTest.java</kbd> class file is successfully compiled. Next, let's run the application:</p>
<div class="mce-root1"><img src="Images/c8eeaa15-c61c-48f2-9b06-651c9babb345.png" class="calibre73"/></div>
<p class="mce-root">Now, we can clearly see that Java 9 will not allow us to run the application. Next, let's run a dependency test using the <kbd class="calibre16">jdeps</kbd> analyzer tool. We will use the following command line syntax--<kbd class="calibre16">jdeps DependencyTest.class</kbd>:</p>
<div class="mce-root1"><img src="Images/11dc7d02-3df6-48cf-a67f-a5b060e09c36.png" class="calibre74"/></div>
<p class="mce-root">As you can see, we have three dependencies: <kbd class="calibre16">java.io</kbd>, <kbd class="calibre16">java.lang</kbd>, and <kbd class="calibre16">sun.misc</kbd>. Here we are given the suggestion to replace our <kbd class="calibre16">sun.misc</kbd> dependency with <kbd class="calibre16">rt.jar</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Breaking encapsulation</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java 9 platform is more secure than its predecessor versions due to, in part, the increased encapsulation that resulted from the modular reorganization. That being said, you might have a requirement to break through the modular system's encapsulation. Breaking through these access control boundaries is permitted by Java 9.</p>
<p class="mce-root">As you read earlier in this chapter, most internal APIs are strongly encapsulated. As previously suggested, you might look for replacement APIs when updating your source code. Of course, that is not always feasible. There are three additional approaches you can take--using the <kbd class="calibre16">--add-opens</kbd> option at runtime; employing the <kbd class="calibre16">--add-exports</kbd> option; and <kbd class="calibre16">--permit-illegal-access</kbd> command-line option. Let's look at each of those options.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The --add-opens option</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">You can use the <kbd class="calibre16">--add-opens</kbd> runtime option to allow your code to access non-public members. This can be referred to as deep reflection. Libraries that do this deep reflection are able to access all members, private and public. To grant this type of access to your code, you use the <kbd class="calibre16">--add-opens</kbd> option. Here is the syntax:</p>
<pre class="calibre21">    --add-opens module/package=target-module(,target-module)*</pre>
<p class="mce-root">This allows the given module to open the specified package. The compiler will not produce any errors or warnings when this is used.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The --add-exports option</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">You can use <kbd class="calibre16">--add-exports</kbd> to break encapsulation so that you can use an internal API whose default is to be inaccessible. Here is the syntax:</p>
<pre class="calibre21">    --add-exports &lt;source-module&gt;/&lt;package&gt;=&lt;target-module&gt;(<br class="calibre2"/>     ,&lt;target-module&gt;)*</pre>
<p class="mce-root">This command-line option gives code in the <kbd class="calibre16">&lt;target-module&gt;</kbd> access to types in the <kbd class="calibre16">&lt;source-module&gt;</kbd> package.</p>
<p class="mce-root">Another method of breaking encapsulation is with a JAR file's manifest. Here is an example:</p>
<pre class="calibre21">    --add-exports:java.management/sun.management</pre>
<div class="packt_tip">The <kbd class="calibre39">--add-exports</kbd> command-line option should only be used if deemed absolutely necessary. It is not advisable to use this option except for short-term solutions. The danger of using it routinely is that any updates to referenced Internal APIs could result in your code not working properly.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The --permit-illegal-access option</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">A third option for breaking encapsulation is to use the <kbd class="calibre16">--permit-illegal-access</kbd> option. Of course, it is prudent to check with third-party library creators to see if they have an updated version. If that is not an option, you use <kbd class="calibre16">--permit-illegal-access</kbd> to gain illegal access to operations to be implemented on the classpath. Due to the significantly illegal operation here, you will receive warnings each time one of these operations occurs.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Runtime image changes</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Java 9 represents a major change to the JDK and the JRE. Much of these changes are related to modularity and have been covered in other chapters. There are still a few more things you should consider.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java version schema</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">With Java 9, the way the Java platform's version is displayed has changed. Here is an example of a pre-Java 9 version format:</p>
<div class="mce-root1"><img src="Images/54f8b3ec-7246-42ea-90fc-624045f063da.png" width="960" height="284" class="calibre75"/></div>
<p class="mce-root">Now, let's look at how Java 9 reports its version:</p>
<div class="mce-root1"><img src="Images/d132fdc1-85d2-4ba6-8809-4b4cde084688.png" width="600" height="184" class="calibre76"/></div>
<p class="mce-root">As you can see, with Java 9, the version schema is now <kbd class="calibre16">$MAJOR.$MINOR.$SECURITY.$PATCH</kbd>. This is markedly different than with previous versions of Java. This will only impact your applications if you have code that parses the string returned by the <kbd class="calibre16">java -version</kbd> command and option.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JDK and JRE layout</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">How files are organized in the JDK and the JRE have changed in the new version of Java. It is worth your time to familiarize yourself with the new filesystem layout. The following screenshot shows the file structure of the JDK's <kbd class="calibre16">/bin</kbd> folder:</p>
<div class="mce-root1"><img src="Images/fc9d9d4e-6c5c-4874-b740-c09ce1d1091c.png" width="718" height="1600" class="calibre77"/></div>
<p class="mce-root">Here is the layout of the <kbd class="calibre16">lib</kbd> folder:</p>
<div class="mce-root1"><img src="Images/97375e98-a2ab-4a00-b8fd-2e6f1908f103.png" width="682" height="1070" class="calibre78"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">What has been removed</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Another area of change for the new version of the Java platform is that many platform components have been removed. The following sections represent the most significant components.</p>
<p class="mce-root">Notably, the <kbd class="calibre16">rt.jar</kbd> and <kbd class="calibre16">tools.jar</kbd> and <kbd class="calibre16">dt.jar</kbd> have been removed. These JAR files contained class and other resources files and all resided in the <kbd class="calibre16">/lib</kbd> directory.</p>
<p class="mce-root">The e<em class="calibre20">ndorsed standards override mechanism</em> has been removed. In Java 9, both <kbd class="calibre16">javac</kbd> and <kbd class="calibre16">java</kbd> will exit if they detect that mechanism. The mechanism was used for application servers to override some JDK components. In Java 9, you can use upgradeable modules to achieve the same result.</p>
<p class="mce-root">As previously covered in this chapter, the e<em class="calibre20">xtension mechanism</em> has also been removed.</p>
<p class="mce-root">The following listed APIs were previously depreciated and have been removed and are not accessible in Java 9. Removal of these APIs is the result of the modularization of the Java platform:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">apple.applescript</kbd></li>
<li class="calibre14"><kbd class="calibre16">com.apple.concurrent</kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">com.sun.image.codec.jpeg</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.awt.dnd.peer</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.awt.peer</span></kbd></li>
<li class="calibre14"><kbd class="calibre16">java.rmi.server.disableHttp</kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.util.logging.LogManager.addPropertyChangeListener</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.util.logging.LogManager.removePropertyChangeListener</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.util.jar.Pack200.Packer.addPropertyChangeListener</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.util.jar.Pack200.Packer.removePropertyChangeListener</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.util.jar.Pack200.Unpacker.addPropertyChangeListener</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">java.util.jar.Pack200.Unpacker.removePropertyChangeListener</span></kbd></li>
<li class="calibre14"><kbd class="calibre16">javax.management.remote.rmi.RMIIIOPServerImpl</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.misc.BASE64Encoder</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.misc.BASE64Decoder</kbd></li>
<li class="calibre14"><kbd class="calibre16"><kbd class="calibre79">sun.rmi.transport.proxy.connectTimeout</kbd></kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.rmi.transport.proxy.eagerHttpFallback</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.rmi.transport.proxy.logLevel</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.rmi.transport.tcp.proxy</kbd></li>
</ul>
<p class="mce-root">The following listed tools have been removed. In each case, the tool was previously depreciated or its functionality superseded by better alternatives:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">hprof</kbd></li>
<li class="calibre14"><kbd class="calibre16">java-rmi.cgi</kbd></li>
<li class="calibre14"><kbd class="calibre16">java-rmi.exe</kbd></li>
<li class="calibre14"><kbd class="calibre16">JavaDB</kbd></li>
<li class="calibre14"><kbd class="calibre16">jhat</kbd></li>
<li class="calibre14"><kbd class="calibre16">native2ascii</kbd></li>
</ul>
<p class="mce-root">Two additional things that have been removed in Java 9 are:</p>
<ul class="calibre13">
<li class="calibre14">AppleScript engine. This engine was deemed as unusable and is dropped without replacement.</li>
<li class="calibre14">Windows 32-bit client virtual machine. JDK 9 does support a 32-bit server JVM, but not a 32-bit client VM. This change was made to focus on the increased performance of 64-bit systems.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Updated garbage collection</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Garbage collection has been one of Java's great claims to fame. In Java 9, the <strong class="calibre8">Garbage-First</strong> (<strong class="calibre8">G1</strong>) garbage collector is now the default garbage collector on both 32- and 64-bit servers. In Java 8, the default garbage collector was the parallel garbage collector. Oracle reports that there are three garbage collection combinations that will prohibit your application from starting in Java 9. Those combinations are:</p>
<ul class="calibre13">
<li class="calibre14">DefNew + CMS</li>
<li class="calibre14">Incremental CMS</li>
<li class="calibre14">ParNew + SerialOld</li>
</ul>
<p class="mce-root">We will take an in-depth look at Java 9 garbage collection in <a href="" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">Chapter 7</a>, <em class="calibre20">Leveraging the New Default G1 Garbage Collector</em>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Deployment</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There are three issues that you should be aware of, in the context of migrating to Java 9, when you are deploying your applications. These issues are JRE version selection, serialized applets, and the update to the JNLP.</p>
<div class="packt_infobox"><strong class="calibre3">JNLP</strong> is the acronym for <strong class="calibre3">Java Network Launch Protocol</strong> and is covered in a later section of this chapter.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JRE version selection</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Prior to Java 9, developers could request a JRE version other than the version being launched when launching an application. This could be accomplished with a command-line option or with a proper JAR file manifest configuration. This feature has been removed in JDK 9 because of the way we typically deploy applications. Here are the three primary methods:</p>
<ul class="calibre13">
<li class="calibre14">Active installers</li>
<li class="calibre14"><strong class="calibre3">Java Web Start</strong> using JNLP</li>
<li class="calibre14">Native OS packaging systems</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Serialized applets</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Java 9 does not support the ability to deploy applets as serialized objects. In the past, applets were deployed as serialized objects to compensate for slow compression and JVM performance issues. With Java 9, compression techniques are advanced and the JVM has great performance.</p>
<p class="mce-root">If you attempt to deploy your applets as serialized objects, your object attributes and parameter tags will simply be ignored when your applet launches. Starting with Java 9, you can deploy your applets using standard deployment strategies.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JNLP update</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JNLP is used for launching applications on a desktop client using resources located on a web server. JNLP clients include Java Web Start and Java Plug-in software because they are able to launch applets that are remotely hosted. This protocol is instrumental in launching RIAs.</p>
<p class="mce-root"><strong class="calibre8">RIAs</strong> are <strong class="calibre8">Rich Internet Applications</strong> and when launched with JNLP have access to the various JNLP APIs that, with user permission, can access the user's desktop.</p>
<p class="mce-root">In Java 9, the JNLP specification has been updated. There are four specific updates as detailed in the next sections.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Nested resources</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The ability to use component extensions with nest resources in Java or j2se elements was previously supported, but not documented in the specification. The specification has now been updated to reflect this support. The previous specification read:</p>
<div class="packt_quote"><span class="calibre5">No java elements can be specified as part of the resources.</span></div>
<p class="mce-root">The updated specification for Java 9 now reads:</p>
<div class="packt_quote"><span class="calibre5">A java element in a component extension will not govern what version of java is used, but may be used containing nested resource elements, and then those resources may be used only when using a Java version that matches the given version as specified in section 4.6</span></div>
<p class="mce-root">This specific change ensures that extension JLP files must have <kbd class="calibre16">java</kbd> or <kbd class="calibre16">j2se</kbd> resources and those resources will not dictate what JRE is used. Nested resources are permitted when using the specified version.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">FX XML extension</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">When using the <span class="calibre7">JNLP</span>, you create a JNLP file. Here is an example:</p>
<pre class="calibre21">    &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br class="calibre2"/>    &lt;jnlp spec="1.0+" codebase="" href=""&gt;<br class="calibre2"/>      &lt;information&gt;<br class="calibre2"/>        &lt;title&gt;Sample/title&gt;<br class="calibre2"/>        &lt;vendor&gt;The Sample Vendor&lt;/vendor&gt;<br class="calibre2"/>        &lt;icon href="sample-icon.jpg"/&gt;<br class="calibre2"/>        &lt;offline-allowed/&gt;<br class="calibre2"/>     &lt;/information&gt;<br class="calibre2"/>     &lt;resources&gt;<br class="calibre2"/>       &lt;!-- Application Resources --&gt;<br class="calibre2"/>       &lt;j2se version="1.6+"  <br class="calibre2"/>        href="http://java.sun.com/products/autodl/j2se"/&gt;<br class="calibre2"/>       &lt;jar href="Sample-Set.jar" main="true" /&gt;<br class="calibre2"/>     &lt;/resources&gt;<br class="calibre2"/>     &lt;application-desc<br class="calibre2"/>       name="Sample Application"<br class="calibre2"/>       main-class="com.vendor.SampleApplication" <br class="calibre2"/>       width="800" <br class="calibre2"/>       height="500"&gt;<br class="calibre2"/>       &lt;argument&gt;Arg1&lt;/argument&gt;<br class="calibre2"/>       &lt;argument&gt;Arg2&lt;/argument&gt;<br class="calibre2"/>       &lt;argument&gt;Arg3&lt;/argument&gt;<br class="calibre2"/>     &lt;/application-desc&gt;<br class="calibre2"/>     &lt;update check="background"/&gt;<br class="calibre2"/>    &lt;/jnlp&gt;</pre>
<p class="mce-root">Two changes have been made to the <kbd class="calibre16">&lt;application-desc&gt;</kbd> element. First, the optional <kbd class="calibre16">type</kbd> attribute has been added so the type of application can be annotated. The default type is <kbd class="calibre16">Java</kbd>, so if your program is a Java app, you need not include the <kbd class="calibre16">type</kbd> attribute. Alternatively, you can specify <kbd class="calibre16">Java</kbd> as your type as follows:</p>
<pre class="calibre21">    &lt;application-desc <br class="calibre2"/>      name="Another Sample Application"<br class="calibre2"/>      type="Java" main-class="com.vendor.SampleApplication2" <br class="calibre2"/>      width="800" <br class="calibre2"/>      height="500"&gt;<br class="calibre2"/>      &lt;argument&gt;Arg1&lt;/argument&gt;<br class="calibre2"/>      &lt;argument&gt;Arg2&lt;/argument&gt;<br class="calibre2"/>      &lt;argument&gt;Arg3&lt;/argument&gt;<br class="calibre2"/>    &lt;/application-desc&gt;</pre>
<p class="mce-root">We can indicate other application types to include <kbd class="calibre16">JavaFX</kbd> as shown here:</p>
<pre class="calibre21">    &lt;application-desc <br class="calibre2"/>      name="A Great JavaFX Application"<br class="calibre2"/>      type="JavaFX" main-class="com.vendor.GreatJavaFXApplication" <br class="calibre2"/>      width="800" <br class="calibre2"/>      height="500"&gt;<br class="calibre2"/>      &lt;argument&gt;Arg1&lt;/argument&gt;<br class="calibre2"/>      &lt;argument&gt;Arg2&lt;/argument&gt;<br class="calibre2"/>      &lt;argument&gt;Arg3&lt;/argument&gt;<br class="calibre2"/>    &lt;/application-desc&gt;</pre>
<div class="packt_tip">If you indicate an application type that is not supported by the JNLP client, your application launch will fail. For more information about JNLP, you can consult the official documentation: <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/faq.html" class="calibre25 pcalibre pcalibre3 pcalibre2 pcalibre1">http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/faq.html</a>.</div>
<p class="mce-root">The second change to the <kbd class="calibre16">&lt;application-desc&gt;</kbd> element in Java 9 is the addition of the <kbd class="calibre16">param</kbd> sub-element. This allows us to provide the name of parameters along with their value using the <kbd class="calibre16">value</kbd> attribute. Here is an example of how an <kbd class="calibre16">&lt;application-desc&gt;</kbd> element of a JNLP file looks with the <kbd class="calibre16">param</kbd> sub-element and the <kbd class="calibre16">value</kbd> attribute included. This example shows three sets of parameters:</p>
<pre class="calibre21">    &lt;application-desc<br class="calibre2"/>      name="My JRuby Application"<br class="calibre2"/>      type="JRuby"<br class="calibre2"/>      main-class="com.vendor.JRubyApplication" <br class="calibre2"/>      width="800" <br class="calibre2"/>      height="500"&gt;<br class="calibre2"/>      &lt;argument&gt;Arg1&lt;/argument&gt;<br class="calibre2"/>      &lt;argument&gt;Arg2&lt;/argument&gt;<br class="calibre2"/>      &lt;argument&gt;Arg3&lt;/argument&gt;<br class="calibre2"/>      &lt;param name="Parameter1" value="Value1"/&gt;<br class="calibre2"/>      &lt;param name="Parameter2" value="Value2"/&gt;<br class="calibre2"/>      &lt;param name="Parameter3" value="Value3"/&gt;<br class="calibre2"/>    &lt;/application-desc&gt;</pre>
<div class="packt_infobox">If the application <kbd class="calibre39">type</kbd> is Java, then any <kbd class="calibre39">param</kbd> sub-elements you use will be ignored.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JNLP file syntax</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JNLP file syntax is now in complete compliance with XML specifications. Prior to Java 9, you could use <kbd class="calibre16">&amp;</kbd> to create complex comparisons. That is not supported with standard XML. You can still create complex comparisons in JNLP files. Now you will use <kbd class="calibre16">&amp;amp;</kbd> instead of <kbd class="calibre16">&amp;</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Numeric version comparison</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JNLP specification has been changed to reflect how numeric version elements were compared against non-numeric version elements. Previous to the change, version elements were compared lexicographically by ASCII value. With Java 9 and this JNLP specification change, elements are still compared lexicographically by ASCII value. The change is evident when the two strings have different lengths. In new comparisons, the shorter string will be padded with leading zeros to match the length of the longer string.</p>
<div class="packt_infobox">Lexicographical comparisons use a mathematical model that is based on alphabetical order.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Useful tools</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The first thing you will need to do before migrating your applications to Java 9 is to download JDK 9. You can download the early access builds at this URL--<a href="http://jdk.java.net/9/" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">http://jdk.java.net/9/</a>. You will need to accept the license agreement and then select which build to download. As you can see in the following screenshot, there are several options based on your operating system:</p>
<div class="mce-root1"><img src="Images/ad5ae026-64d1-4c22-a76d-19c56266be94.png" width="536" height="274" class="calibre80"/></div>
<p class="mce-root">Now that you have JDK 9 installed on your development computer, let's look at a couple of tools that can help facilitate migrating your applications to Java 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java environment - jEnv</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">If you develop on a computer with Linux or macOS, you might consider using <kbd class="calibre16">jEnv</kbd>, an open source Java environment management tool. This is a command-line tool, so do not expect a GUI. You can download the tool at this URL--<a href="https://github.com/gcuisinier/jenv" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://github.com/gcuisinier/jenv</a>.</p>
<p class="mce-root">Here is the installation command for Linux:</p>
<pre class="calibre21"><strong class="calibre3">$ git clone https://github.com/gcuisinier/jenv.git ~/.jenv</strong></pre>
<p class="mce-root">To download using macOS with Homebrew, use this command:</p>
<pre class="calibre21"><strong class="calibre3">$ brew install jenv</strong></pre>
<p class="mce-root">You can also install on Linux or macOS using <kbd class="calibre16">Bash</kbd> as follows:</p>
<pre class="calibre21"><strong class="calibre3">$ echo 'export PATH="$HOME/.jenv/bin:$PATH"' &gt;&gt; ~/.bash_profile</strong><br class="calibre2"/><strong class="calibre3">$ echo 'eval "$(jenv init -)"' &gt;&gt; ~/.bash_profile</strong></pre>
<p class="mce-root">Alternatively, you can install on Linux or macOS using <kbd class="calibre16">Zsh</kbd> as follows:</p>
<pre class="calibre21"><strong class="calibre3">$ echo 'export PATH="$HOME/.jenv/bin:$PATH"' &gt;&gt; ~/.zshrc</strong><br class="calibre2"/><strong class="calibre3">$ echo 'eval "$(jenv init -)"' &gt;&gt; ~/.zshrc</strong></pre>
<p class="mce-root">After you have <kbd class="calibre16">jEnv</kbd> installed, you will need to configure it on your system as shown here. You will need to modify the script to reflect your actual path:</p>
<pre class="calibre21"><strong class="calibre3">$ jenv add /Library/Java/JavaVirtualMachines/jdk17011.jdk/Contents/Home</strong></pre>
<p class="mce-root">You will want to repeat the <kbd class="calibre16">jenv add</kbd> command for each version of the JDK on your system. With each <kbd class="calibre16">jenv add</kbd> command, you will receive confirmation that the specific JDK version was added to <kbd class="calibre16">jEnv</kbd> as follows:</p>
<div class="calibre40">
<pre class="calibre21"><strong class="calibre3">$ jenv add /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
  oracle64-1.6.0.39 added
$ jenv add /Library/Java/JavaVirtualMachines/jdk17011.jdk/Contents/Home
  oracle64-1.7.0.11 added</strong></pre></div>
<p class="mce-root">You can check to see what JDK versions you have added to your <kbd class="calibre16">jEnv</kbd> by using <kbd class="calibre16">$ jenv versions</kbd> at the Command Prompt. This will result in an output list.</p>
<p class="mce-root">Here are three additional <kbd class="calibre16">jEnv</kbd> commands:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">jenv global &lt;version&gt;</kbd>: this sets the global version</li>
<li class="calibre14"><kbd class="calibre16">jenv local &lt;version&gt;</kbd>: this sets the local version</li>
<li class="calibre14"><kbd class="calibre16">jenv shell &lt;version&gt;</kbd>: this sets the instance version for the shell</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Maven</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Maven is an open source tool that can be used for building and managing Java-based projects. It already supports Java 9 and is part of the <em class="calibre20">Apache Maven Project</em>. If you are not already using Maven and you do a lot of Java development you might be enticed by the following Maven objectives:</p>
<ul class="calibre13">
<li class="calibre14">Making the build process easy</li>
<li class="calibre14">Providing a uniform build system</li>
<li class="calibre14">Providing quality project information</li>
<li class="calibre14">Providing guidelines for best practices development</li>
<li class="calibre14">Allowing transparent migration to new features</li>
</ul>
<p class="mce-root">You can read more specifics about each of the Maven objectives at this site--<a href="https://maven.apache.org/what-is-maven.html" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://maven.apache.org/what-is-maven.html</a>. To download Maven, visit this site--<a href="https://maven.apache.org/download.cgi" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://maven.apache.org/download.cgi</a>. Installation instructions for Windows, macOS, Linux, and Solaris are available here--<a href="https://maven.apache.org/install.html" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://maven.apache.org/install.html</a>.</p>
<p class="mce-root">Maven can be integrated with Eclipse (M2Eclipse), JetBrains IntelliJ IDEA, and the Netbeans IDE. The M2Eclipse IDE, as an example, provides rich integration with Apache Maven and boasts the following features:</p>
<ul class="calibre13">
<li class="calibre14">You can launch Maven builds from within Eclipse</li>
<li class="calibre14">Manage your dependencies for the Eclipse build path</li>
<li class="calibre14">Easily resolve Maven dependencies (you can do this directly from Eclipse and not have to install a local Maven repository)</li>
<li class="calibre14">Automatically download required dependencies (from remote Maven repositories)</li>
<li class="calibre14">Use software wizards to create new Maven projects, create <kbd class="calibre16">pom.xml</kbd> files, and to enable Maven support for your plain Java projects</li>
<li class="calibre14">Rapid dependency search of Maven remote repositories</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Obtaining the M2Eclipse IDE</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">To obtain the M2Eclipse IDE, you must first have Eclipse installed. Here are the steps:</p>
<ol class="calibre18">
<li class="chapter">Start by opening your current Eclipse IDE. Next, select <span class="calibre5">Preferences</span> | <span class="calibre5">Install/Update</span> | <span class="calibre5">Available Software Sites</span> as shown in the following screenshot:</li>
</ol>
<div class="mce-root1"><img src="Images/2ba63e52-cdb6-41ec-a3ea-3f03c64989ba.png" width="1814" height="1238" class="calibre81"/></div>
<ol start="2" class="calibre18">
<li class="chapter">The next task is to add the M2Eclipse repository site to your list of <span class="calibre5">Available Software Sites</span>. To accomplish this, click the <span class="calibre5">Add</span> button and enter values in the <span class="calibre5">Name</span> and <span class="calibre5">Location</span> text input boxes. For <span class="calibre5">Name</span>, enter something to help you remember that M2Eclipse is available at this site. For <span class="calibre5">Location</span>, enter the URL--<kbd class="calibre16">http://download.eclipse.org/technology/m2e/releases</kbd>. Then, click the <span class="calibre5">OK</span> button:</li>
</ol>
<div class="mce-root1"><img src="Images/265485fa-f472-4fad-8b9a-aeb1a2074ef0.png" width="938" height="348" class="calibre82"/></div>
<ol start="3" class="calibre18">
<li class="chapter">You should now see the <span class="calibre5">M2Eclipse</span> site listed in your list of <span class="calibre5">Available Software Sites</span> as shown in the following screenshot. Your final step is to click the <span class="calibre5">OK</span> button:</li>
</ol>
<div class="mce-root1"><img src="Images/b4d352e8-46d9-43f7-8cb2-5ed6810d3da3.png" width="1814" height="1238" class="calibre83"/></div>
<ol start="4" class="calibre18">
<li class="chapter">Now, when you start a new project, you will see <kbd class="calibre16">Maven Project</kbd> as an option:</li>
</ol>
<div class="mce-root1"><img src="Images/850c5e6f-e1a4-4c01-8892-93abd6f12262.png" width="1050" height="1000" class="calibre84"/></div>
<p class="mce-root">Maven is a proven tool for Java developers. You might consider obtaining additional information on Maven with one of the following resources:</p>
<ul class="calibre13">
<li class="calibre14"><em class="calibre22">Apache Maven Project</em>: <a href="https://maven.apache.org/index.html" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://maven.apache.org/index.html</a></li>
<li class="calibre14"><em class="calibre22">Apache Maven Cookbook</em>: <a href="https://www.packtpub.com/application-development/apache-maven-cookbook" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://www.packtpub.com/application-development/apache-maven-cookbook</a></li>
<li class="calibre14"><em class="calibre22">Apache Maven 3.o Cookbook</em>: <a href="https://www.packtpub.com/application-development/apache-maven-3-cookbook" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://www.packtpub.com/application-development/apache-maven-3-cookbook</a></li>
<li class="calibre14"><em class="calibre22">Getting Started with Apache Maven [Video]</em>: <a href="https://www.packtpub.com/application-development/getting-started-apache-maven-video" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://www.packtpub.com/application-development/getting-started-apache-maven-video</a></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this chapter, we explored potential issues involved in migrating our existing applications to the Java 9 platform. We looked at both manual and semi-automated migration processes. This chapter provided you with insights and processes to get your Java 8 code working with Java 9. Specifically, we conducted a q<span class="calibre7">uick review of Project Jigsaw, looked at how modules fit into the Java landscape, provided tips for</span> migration <span class="calibre7">planning, shared advice from</span> Oracle <span class="calibre7">regarding migration, and shared tools that you can use to help you as you get started with Java 9.</span></p>
<p class="mce-root">In the next chapter, we will take a close look at the Java shell and the JShell API. We demonstrate the JShell API and the JShell tool's ability to interactively evaluate declarations, statements, and expressions of the Java programming language. We will demonstrate features and use of this command-line tool.</p>


            </article>

            
        </section>
    </div>



  </body></html>