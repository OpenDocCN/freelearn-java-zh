<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating a Simple JEE Web Application</h1>
                
            
            <article>
                
<p class="calibre3">The previous chapter gave you a brief introduction to JEE and Eclipse. We also learned how to install the Eclipse JEE package and also how to install and configure Tomcat. Tomcat is a servlet container and it is easy to use and configure. Therefore, many developers use it to run JEE web applications on local machines.</p>
<p class="calibre3">In this chapter, we will cover the following topics:</p>
<ul class="calibre10">
<li class="calibre11">Configuring Tomcat in Eclipse and deploying web applications from within Eclipse</li>
<li class="calibre11">Using different technologies to create web applications in JEE, for example, JSP, JSTL, JSF, and servlets</li>
<li class="calibre11">Using the Maven dependency management tool</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Configuring Tomcat in Eclipse</h1>
                
            
            <article>
                
<p class="calibre3">We will perform the following steps to configure Tomcat in Eclipse:</p>
<ol class="calibre14">
<li value="1" class="calibre11">In the Java EE perspective of Eclipse, you will find the <span>Servers</span> tab at the bottom. Since no server is added yet, you will see a link in the tab as shown in the following screenshot—<span>No servers are available. Click this link to create a new server...</span>. </li>
</ol>
<div class="mce-root1"><img src="../images/00021.jpeg" class="calibre29"/></div>
<div class="packt_figure1">Figure 2.1: The Servers tab in Eclipse JEE</div>
<ol start="2" class="calibre14">
<li value="2" class="calibre11">Click the link in the <span>Servers</span> tab to add a new server.</li>
<li value="3" class="calibre11">Expand the <kbd class="calibre13">Apache</kbd> group and select the Tomcat version that you have already installed. If Eclipse and the Tomcat server are on the same machine, then leave <span>Server's host name</span> as <kbd class="calibre13">localhost</kbd>. Otherwise, enter hostname or IP address of the Tomcat server. Click <span>Next</span>:</li>
</ol>
<div class="mce-root1"><img src="../images/00022.jpeg" class="calibre38"/></div>
<div class="packt_figure3">Figure 2.2: Selecting a server in the New Server wizard</div>
<ol start="4" class="calibre14">
<li value="4" class="calibre11">Click the <span>Browse...</span> button and select the folder where Tomcat is installed.</li>
</ol>
<ol start="5" class="calibre14">
<li value="5" class="calibre11">Click <span>Next</span> until you complete the wizard. At the end of it, you will see the Tomcat server added to the <span>Servers</span> view. If Tomcat is not already started, you will see the status as stopped.</li>
</ol>
<div class="mce-root1"><img src="../images/00023.jpeg" class="calibre39"/></div>
<div class="packt_figure1">Figure 2.3: Configuring Tomcat folder in the New Server wizard</div>
<ol start="6" class="calibre14">
<li value="6" class="calibre11">To start the server, right-click on the server and select <span>Start</span>. You can also start the server by clicking the Start button in the toolbar of the <span>Server</span> view.</li>
</ol>
<div class="mce-root1"><img src="../images/00024.jpeg" class="calibre40"/></div>
<div class="packt_figure3">Figure 2.4: The Tomcat server added to the Servers view</div>
<p class="calibre3">Once the server is started successfully, you will see the status changed to <kbd class="calibre13">Started</kbd>. If you click on the <span class="calibre12">Console</span> tab, you will see console messages that the Tomcat server outputs during startup.</p>
<p class="calibre3">If you expand the <span class="calibre12">Servers</span> group in the <span class="calibre12">Project Explorer</span> view, you will see the Tomcat server that you just added. Expand the Tomcat server node to view configuration files. This is an easy way to edit the Tomcat configuration so that you don't have to go look for the configuration files in the filesystem.</p>
<p class="calibre3">Double-click <kbd class="calibre13">server.xml</kbd> to open it in the XML editor. You get the <span class="calibre12">Design</span> view as well as the <span class="calibre12">Source</span> view (two tabs at the bottom of the editor). We have learned how to change the default port of Tomcat in the last chapter. You can easily change that in the Eclipse editor by opening <kbd class="calibre13">server.xml</kbd> and going to the <span class="calibre12">Connector</span> node. If you need to search the text, you can switch to the <span class="calibre12">Source</span> tab (at the bottom of the editor).</p>
<div class="mce-root1"><img src="../images/00025.jpeg" class="calibre29"/></div>
<div class="packt_figure1">Figure 2.5: Open server.xml</div>
<p class="calibre3">You can also easily edit <kbd class="calibre13">tomcat-users.xml</kbd> to add/edit Tomcat users. Recall that we added a Tomcat user in <a target="_blank" href="part0008.html#7K4G0-d43a3a5ee6dd4ebc9d7c7e1cc8d7df55" class="calibre9"><span>Chapter 1</span></a>, <em class="calibre21">Introducing JEE and Eclipse</em>, to administer the Tomcat server.</p>
<p class="calibre3">By default, Eclipse does not change anything in the Tomcat installation folder when you add the server in Eclipse. Instead, it creates a folder in the workspace and copies Tomcat configuration files to this folder. Applications that are deployed in Tomcat are also copied and published from this folder. This works well in development, when you do not want to modify Tomcat settings or any application deployed in the server. However, if you want to use the actual Tomcat installation folder, then you need to modify server settings in Eclipse. Double-click the server in the <span class="calibre12">Servers</span> view to open it in the editor.</p>
<div class="mce-root1"><img src="../images/00026.jpeg" class="calibre41"/></div>
<div class="packt_figure1">Figure 2.6: Tomcat settings</div>
<p class="calibre3">Note the options under <span class="calibre12">Server Locations</span>. Select the second option, <span class="calibre12">Use </span><span class="calibre12">Tomcat installation</span>, if you want to use the actual Tomcat installation folders for configuration and for publishing applications from within Eclipse.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">JavaServer Pages</h1>
                
            
            <article>
                
<p class="calibre3">We will start with a project to create a simple JSP. We will create a login JSP that submits data to itself and validates the user.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating a dynamic web project</h1>
                
            
            <article>
                
<p class="calibre3">We will perform the following steps to create a dynamic web project:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Select the <span>File</span> | <span>New</span> | <span>Other</span> menu. This opens the selection wizard. At the top of the wizard, you will find a textbox with a cross icon on the extreme right side.</li>
<li value="2" class="calibre11">Type <kbd class="calibre13">web</kbd> in the textbox. This is the filter box. Many wizards and views in Eclipse have such a filter textbox, which makes finding items very easy.</li>
</ol>
<div class="mce-root1"><img src="../images/00027.jpeg" class="calibre42"/></div>
<div class="packt_figure1">Figure 2.7: New selection wizard</div>
<ol start="3" class="calibre14">
<li value="3" class="calibre11">Select <span>Dynamic Web Project</span> and click <span>Next</span> to open the <span>Dynamic Web Project</span> wizard. Enter project name, for example, <kbd class="calibre13">LoginSampleWebApp</kbd>. Note that the <span>Dynamic web module version</span> field in this page lists Servlet API version numbers. Select version 3.0 or greater. Click <span>Next</span>.</li>
</ol>
<div class="mce-root1"><img src="../images/00028.jpeg" class="calibre43"/></div>
<div class="packt_figure3">Figure 2.8: New Dynamic Web Project wizard</div>
<ol start="4" class="calibre14">
<li value="4" class="calibre11">Click <span>Next</span> in the following pages and click <span>Finish</span> on the last page to create a <kbd class="calibre13">LoginSimpleWebApp</kbd> project. This project is also added to <span>Project Explorer</span>.</li>
</ol>
<div class="mce-root1"><img src="../images/00029.jpeg" class="calibre44"/></div>
<div class="packt_figure3">Figure 2.9: New web project</div>
<p class="calibre3">Java source files go in the <kbd class="calibre13">src</kbd> folder under <kbd class="calibre13">Java Resources</kbd>. Web resources such as the HTML, JS, and CSS files go in the <kbd class="calibre13">WebContent</kbd> folder.</p>
<p class="calibre3">In the next section, we will create a JSP page for login.</p>
<div class="packt_tip">To keep the page simple in the first JSP, we will not follow many of the best practices. We will have the UI code mixed with the application business code. Such design is not recommended in real applications, but could be useful for quick prototyping. We will see how to write better JSP code with clear separation of the UI and business logic later in the chapter.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating JSP</h1>
                
            
            <article>
                
<p class="calibre3">We will perform the following steps to create the JSP:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Right-click on the <kbd class="calibre13">WebContent</kbd> folder and select <span>New</span> | <span>JSP File</span>. Name it <kbd class="calibre13">index.jsp</kbd>. The file will open in the editor with the split view. The top part shows the design view, and the bottom part shows the code. If the file is not opened in the split editor, right-click on <kbd class="calibre13">index.jsp</kbd> in the <span>Project Explorer</span> and select <span>Open With</span> | <span>Web Page Editor</span>.</li>
</ol>
<div class="mce-root1"><img src="../images/00030.jpeg" class="calibre41"/></div>
<div class="packt_figure3">Figure 2.10: The JSP editor</div>
<ol start="2" class="calibre14">
<li value="2" class="calibre11">If you do not like the split view and want to see either the full design view or the full code view, then use appropriate toolbar buttons at the top right, as shown in the following screenshot:</li>
</ol>
<div class="mce-root1"><img src="../images/00031.jpeg" class="calibre45"/></div>
<div class="packt_figure3">Figure 2.11: The JSP editor display buttons</div>
<ol start="3" class="calibre14">
<li value="3" class="calibre11">Change the title from <kbd class="calibre13">Insert title here</kbd> to <kbd class="calibre13">Login</kbd>.</li>
<li value="4" class="calibre11">Let's now see how Eclipse provides code assistance for HTML tags. Note that input fields must be in a <kbd class="calibre13">form</kbd> tag. We will add a <kbd class="calibre13">form</kbd> tag later. Inside the <kbd class="calibre13">body</kbd> tag, type the <kbd class="calibre13">User Name:</kbd> label. Then, type <kbd class="calibre13">&lt;</kbd>. If you wait for a moment, Eclipse pops up the code assist window showing options for all the valid HTML tags. You can also invoke code assist manually.</li>
<li value="5" class="calibre11">Place a caret just after <kbd class="calibre13">&lt;</kbd> and press <em class="calibre2"><span>Ctrl</span></em> + <em class="calibre2"><span>Spacebar</span></em>.</li>
</ol>
<div class="mce-root1"><img src="../images/00032.jpeg" class="calibre46"/></div>
<div class="packt_figure3">Figure 2.12: HTML code assist in JSP</div>
<div class="title-page-name">
<p class="mce-root2">Code assist works on partial text too; for example, if you invoke code assist after text <kbd class="calibre13">&lt;i</kbd>, you will see a list of HTML tags starting with <kbd class="calibre13">i</kbd> (<kbd class="calibre13">i</kbd>, <kbd class="calibre13">iframe</kbd>, <kbd class="calibre13">img</kbd>, <kbd class="calibre13">input</kbd>, and so on). You can also use code assist for tag attributes and attribute values.<br class="calibre6"/>
For now, we want to insert the <kbd class="calibre13">input</kbd> field for username.</p>
</div>
<ol start="6" class="calibre14">
<li value="6" class="calibre11">Select <kbd class="calibre13">input</kbd> from the code assist proposals, or type it.</li>
<li value="7" class="calibre11">After the <kbd class="calibre13">input</kbd> element is inserted, move the caret inside the closing <kbd class="calibre13">&gt;</kbd> and invoke code assist again (<em class="calibre2">Ctrl</em>/<em class="calibre2">Cmd</em> + <em class="calibre2">Spacebar</em>). You will see the list of proposals for the attributes of the <kbd class="calibre13">input</kbd> tag.</li>
</ol>
<div class="mce-root1"><img src="../images/00033.jpeg" class="calibre29"/></div>
<div class="packt_figure3">Figure 2.13: Code assist for the tag attribute value</div>
<ol start="8" class="calibre14">
<li value="8" class="calibre11">Type the following code to create a login form:</li>
</ol>
<pre class="calibre35">&lt;body&gt; 
  &lt;h2&gt;Login:&lt;/h2&gt; 
  &lt;form method="post"&gt; 
    User Name: &lt;input type="text" name="userName"&gt;&lt;br&gt; 
    Password: &lt;input type="password" name="password"&gt;&lt;br&gt; 
    &lt;button type="submit" name="submit"&gt;Submit&lt;/button&gt; 
    &lt;button type="reset"&gt;Reset&lt;/button&gt; 
  &lt;/form&gt; 
&lt;/body&gt; 
 </pre>
<div class="packt_tip"><span class="calibre23">Downloading the example code<br class="calibre26"/></span>You can download the example code files from your account at <a href="http://www.packtpub.com" class="calibre17"><span class="calibre23">http://www.packtpub.com</span></a> for all the Packt Publishing books that you have purchased. If you purchased this book elsewhere, you can visit <a href="http://www.packtpub.com/support" class="calibre17"><span class="calibre23">http://www.packtpub.com/support</span></a> and register to have the files emailed directly to you.</div>
<p class="calibre3">If you are using the split editor (design and source pages), you can see the login form rendered in the design view. If you want to see how the page would look in the web browser, click the <span class="calibre12">Preview</span> tab at the bottom of the editor. You will see that the web page is displayed in the browser view inside the editor. Therefore, you don't need to move out of Eclipse to test your web pages.</p>
<div class="mce-root1"><img src="../images/00034.jpeg" class="calibre47"/></div>
<div class="packt_figure1">Figure 2.14: Design and Source views</div>
<p class="calibre3">If you click on any user interface control in the design view, you will see its properties in the <span class="calibre12">Properties</span> view (see <em class="calibre21">Figure 2.14</em>). You can edit properties, such as <span class="calibre12">Name</span> and <span class="calibre12">Value</span> of the selected element. Click on the <span class="calibre12">Style</span> tab of the <span class="calibre12">Properties</span> window to edit CSS styles of the element.</p>
<div class="packt_infobox">We have not specified the <kbd class="calibre48">action</kbd> attribute in the previous form. This attribute specifies a URL to which the form data is to be posted when the user clicks the <span class="calibre23">Submit</span> button. If this attribute is not specified, then the request or the form data would be submitted to the same page; in this case, the form data would be submitted to <kbd class="calibre48">index.jsp</kbd>. We will now write the code to handle form data.</div>
<p class="calibre3">As mentioned in <a href="part0008.html#7K4G0-d43a3a5ee6dd4ebc9d7c7e1cc8d7df55" class="calibre9"><span>Chapter 1</span></a>, <em class="calibre21">Introducing JEE and Eclipse</em>, you can write Java code and the client-side code (HTML, CSS, and JavaScript) in the same JSP. It is not considered good practice to mix Java code with HTML code, but we will do that anyway in this example to keep the code simpler. Later in the book, we will see how to make our code modular.</p>
<p class="calibre3">Java code is written in JSP between <kbd class="calibre13">&lt;%</kbd> and <kbd class="calibre13">%&gt;</kbd>; such Java code blocks in JSP are called <strong class="calibre5">scriptlets</strong>. You can also set page-level attributes in JSP. They are called <strong class="calibre5">page directives</strong> and are included between <kbd class="calibre13">&lt;%@</kbd> and <kbd class="calibre13">%&gt;</kbd>. The JSP that we created already has a page directive to set the content type of the page. The content type tells the browser the type of response (in this case, <kbd class="calibre13">html/text</kbd>) returned by the server. The browser displays an appropriate response based on the content type:</p>
<pre class="calibre25">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" 
    pageEncoding="UTF-8"%&gt; </pre>
<p class="calibre3">In JSP you have access to a number of objects to help you process and generate the response, as described in the following table:</p>
<table border="1" class="calibre49">
<tbody class="calibre50">
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><strong class="calibre5">Object name</strong></p>
</td>
<td class="calibre52">
<p class="calibre3"><strong class="calibre5">Type</strong></p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">request</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">HttpServletRequest</kbd> (<a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html" class="calibre9"><span>http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html</span></a>). Use this to get request parameters and other request-related data.</p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">response</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">HttpServletResponse</kbd> (<a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html" class="calibre9"><span>http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html</span></a>). Use this to send a response.</p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">out</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">JSPWriter</kbd> (<a href="http://docs.oracle.com/javaee/7/api/javax/servlet/jsp/JspWriter.html" class="calibre9"><span>http://docs.oracle.com/javaee/7/api/javax/servlet/jsp/JspWriter.html</span></a>). Use this to generate a text response.</p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">session</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">HttpSession</kbd> (<a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html" class="calibre9"><span>http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html</span></a>). Use this to get or put objects in the session.</p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">application</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">ServletContext</kbd> (<a href="http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html" class="calibre9"><span>http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html</span></a>). Use this to get or put objects in the context, which are shared across all JSPs and servlets in the same application.</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre3"> </p>
<p class="calibre3">In this example, we are going to make use of <kbd class="calibre13">request</kbd> and <kbd class="calibre13">out</kbd> objects. We will first check whether the form is submitted using the <kbd class="calibre13">POST</kbd> method. If true, we will get values of username and password fields. If the credentials are valid (in this example, we are going to hardcode username and the password as <kbd class="calibre13">admin</kbd>), we will print a welcome message:</p>
<pre class="calibre25">&lt;% 
  String errMsg = null; 
  //first check whether the form was submitted 
  if ("POST".equalsIgnoreCase(request.getMethod()) &amp;&amp; <br class="title-page-name"/>   request.getParameter("submit") != null) 
  { 
    //form was submitted 
    String userName = request.getParameter("userName"); 
    String password = request.getParameter("password"); 
    if ("admin".equalsIgnoreCase(userName) &amp;&amp; <br class="title-page-name"/>     "admin".equalsIgnoreCase(password)) 
    { 
      //valid user 
      System.out.println("Welcome admin !"); 
    } 
    else 
    { 
      //invalid user. Set error message 
      errMsg = "Invalid user id or password. Please try again"; 
    } 
  } 
%&gt; </pre>
<p class="calibre3">We have used two built-in objects in the preceding code—<kbd class="calibre13">request</kbd> and <kbd class="calibre13">out</kbd>. We first check whether the form was submitted—<kbd class="calibre13">"POST".equalsIgnoreCase(request.getMethod()</kbd>. Then, we check whether the submit button was used to post the form—<kbd class="calibre13">request.getParameter("submit") != null</kbd>.</p>
<p class="calibre3">We then get the username and the password by calling the <kbd class="calibre13">request.getParameter</kbd> method. To keep the code simple, we compare them with the hardcoded values. In the real application, you would most probably validate credentials against a database or some naming and folder service. If the credentials are valid, we print a message by using the <kbd class="calibre13">out</kbd> (<kbd class="calibre13">JSPWriter</kbd>) object. If the credentials are not valid, we set an error message. We will print the error message, if any, just before the login form:</p>
<pre class="calibre25">&lt;h2&gt;Login:&lt;/h2&gt; 
  &lt;!-- Check error message. If it is set, then display it --&gt; 
  &lt;%if (errMsg != null) { %&gt; 
    &lt;span style="color: red;"&gt;&lt;%=;"&gt;&lt;%=;"&gt;&lt;%=errMsg %&gt;&lt;/span&gt; 
  &lt;%} %&gt; 
  &lt;form method="post"&gt; 
  ... 
  &lt;/form&gt; </pre>
<p class="calibre3">Here, we start another Java code block by using <kbd class="calibre13">&lt;%%&gt;</kbd>. If an error message is not null, we display it by using the <kbd class="calibre13">span</kbd> tag. Notice how the value of the error message is printed—<kbd class="calibre13">&lt;%=errMsg %&gt;</kbd>. This is a short syntax for <kbd class="calibre13">&lt;%out.print(errMsg);%&gt;</kbd>. Also notice that the curly brace that started in the first Java code block is completed in the next and separate Java code block. Between these two code blocks you can add any HTML code and it will be included in the response only if the conditional expression in the <kbd class="calibre13">if</kbd> statement is evaluated to true.</p>
<p class="calibre3">Here is the complete code of the JSP we created in this section:</p>
<pre class="calibre25">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" 
    pageEncoding="UTF-8"%&gt; 
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" <br class="title-page-name"/> "http://www.w3.org/TR/html4/loose.dtd"&gt; 
&lt;html&gt; 
&lt;head&gt; 
&lt;meta http-equiv="Content-Type" content="text/html; 
charset=UTF-8"&gt; 
&lt;title&gt;Login&lt;/title&gt; 
&lt;/head&gt; 
&lt;% 
  String errMsg = null; 
  //first check whether the form was submitted 
  if ("POST".equalsIgnoreCase(request.getMethod()) &amp;&amp; <br class="title-page-name"/>   request.getParameter("submit") != null) 
  { 
    //form was submitted 
    String userName = request.getParameter("userName"); 
    String password = request.getParameter("password"); 
    if ("admin".equalsIgnoreCase(userName) &amp;&amp; <br class="title-page-name"/>     "admin".equalsIgnoreCase(password)) 
    { 
      //valid user 
      out.println("Welcome admin !"); 
      return; 
    } 
    else 
    { 
      //invalid user. Set error message 
      errMsg = "Invalid user id or password. Please try again"; 
    } 
  } 
%&gt; 
&lt;body&gt; 
  &lt;h2&gt;Login:&lt;/h2&gt; 
  &lt;!-- Check error message. If it is set, then display it --&gt; 
  &lt;%if (errMsg != null) { %&gt; 
    &lt;span style="color: red;"&gt;&lt;%out.print(errMsg); %&gt;&lt;/span&gt; 
  &lt;%} %&gt; 
  &lt;form method="post"&gt; 
    User Name: &lt;input type="text" name="userName"&gt;&lt;br&gt; 
    Password: &lt;input type="password" name="password"&gt;&lt;br&gt; 
    &lt;button type="submit" name="submit"&gt;Submit&lt;/button&gt; 
    &lt;button type="reset"&gt;Reset&lt;/button&gt; 
  &lt;/form&gt; 
&lt;/body&gt; 
&lt;/html&gt; </pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Running JSP in Tomcat</h1>
                
            
            <article>
                
<p class="calibre3">To run the JSP we created in the previous section in the web browser, you will need to deploy the application in a servlet container. We have already seen how to configure Tomcat in Eclipse. Make sure that Tomcat is running by checking its status in the <span class="calibre12">Servers</span> view of Eclipse:</p>
<div class="mce-root1"><img src="../images/00035.jpeg" class="calibre53"/></div>
<div class="packt_figure1">Figure 2.15: Tomcat started in the Servers view</div>
<p class="calibre3">There are two ways to add a project to a configured server so that the application can be run on the server:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Right-click on the server in the <span>Servers</span> view and select the <span>Add and Remove</span> option. Select your project from the list on the left (<span>Available</span> resources) and click <span>Add</span> to move it to the <span>Configured</span> list. Click <span>Finish</span>.</li>
</ol>
<div class="mce-root1"><img src="../images/00036.jpeg" class="calibre54"/></div>
<div class="packt_figure1">Figure 2.16: Add a project to the server</div>
<ol start="2" class="calibre14">
<li value="2" class="calibre11">The other method to add a project to the server is to right-click on the project in <span>Project Explorer</span> and select <span>Properties</span>. This opens the <span>Project </span><span>Properties</span> dialog box. Click on <span>Server</span> in the list and select the server in which you want to deploy this project. Click <span>OK</span> or <span>Apply</span>.</li>
</ol>
<div class="mce-root1"><img src="../images/00037.jpeg" class="calibre55"/></div>
<div class="packt_figure1">Figure 2.17: Select server in project properties</div>
<p class="mce-root2">In the first method, the project is immediately deployed in the server. In the second method, it will be deployed only when you run the project in the server.</p>
<ol start="3" class="calibre14">
<li value="3" class="calibre11">To run the application, right-click on the project in <span>Project Explorer</span> and select <span>Run As</span> | <span>Run on Server</span>. The first time you will be prompted to restart the server. Once the application is deployed, you will see it under the selected server in the <span>Servers</span> view:</li>
</ol>
<div class="mce-root1"><img src="../images/00038.jpeg" class="calibre56"/></div>
<div class="packt_figure1">Figure 2.18: Project deployed on the server</div>
<ol start="4" class="calibre14">
<li value="4" class="calibre11">Enter some text other than admin in the username and password boxes<br class="title-page-name"/>
and click <span>Submit</span>. You should see the error message and the same form should be displayed again.</li>
</ol>
<div class="mce-root1"><img src="../images/00039.jpeg" class="calibre57"/></div>
<div class="packt_figure1">Figure 2.19: Project running in the built-in browser in Eclipse</div>
<ol start="5" class="calibre14">
<li value="5" class="calibre11">Now enter <kbd class="calibre13">admin</kbd> as username and password and then submit the form. You should see the welcome message.</li>
</ol>
<p class="calibre3">JSPs are compiled dynamically to Java classes, so if you make any changes in the page, in most cases, you do not have to restart the server; just refresh the page, and Tomcat will recompile the page if it has changed and the modified page will be displayed. In cases when you need to restart the server to apply your changes, Eclipse will prompt you if you want to restart the server.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Using JavaBeans in JSP</h1>
                
            
            <article>
                
<p class="calibre3">The JSP that we created previously does not follow JSP best practices. In general, it is a bad idea to have scriptlets (Java code) in JSP. In most large organizations, UI designer and programmer are different roles performed by different people. Therefore, it is recommended that JSP contains mostly markup tags so that it is easy for designers to work on the page design. Java code should be in separate classes. It also makes sense from a reusability point of view to move Java code out of JSP.</p>
<p class="calibre3">You can delegate the processing of the business logic to JavaBeans from JSP. JavaBeans are simple Java objects with attributes and getters and setters methods. The naming convention for getter/setter methods in JavaBeans is the prefix <kbd class="calibre13">get</kbd>/<kbd class="calibre13">set</kbd> followed by the name of the attribute, with the first letter of each word in uppercase, also known as CamelCase. For example, if you have a class attribute named <kbd class="calibre13">firstName</kbd>, then the getter method will be <kbd class="calibre13">getFirstName</kbd> and the setter will be <kbd class="calibre13">setFirstName</kbd>.</p>
<p class="calibre3">JSP has a special tag for using JavaBeans—<kbd class="calibre13">jsp:useBean</kbd>:</p>
<pre class="calibre25">&lt;jsp:useBean id="name_of_variable" class="name_of_bean_class" <br class="title-page-name"/> scope="scope_of_bean"/&gt;</pre>
<p class="calibre3">Scope indicates the lifetime of the bean. Valid values are <kbd class="calibre13">application</kbd>, <kbd class="calibre13">page</kbd>, <kbd class="calibre13">request</kbd>, and <kbd class="calibre13">session</kbd>.</p>
<table border="1" class="calibre49">
<tbody class="calibre50">
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><strong class="calibre5">Scope name</strong></p>
</td>
<td class="calibre52">
<p class="calibre3"><strong class="calibre5">Description</strong></p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">page</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3">Bean can be used only in the current page.</p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">request</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3">Bean can be used in any page in the processing of the same request. One web request can be handled by multiple JSPs if one page forwards the request to another page.</p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">session</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3">Bean can be used in the same HTTP session. The session is useful if your application wants to save the user data per interaction with the application, for example, to save items in the shopping cart in an online store application.</p>
</td>
</tr>
<tr class="calibre51">
<td class="calibre52">
<p class="calibre3"><kbd class="calibre13">application</kbd></p>
</td>
<td class="calibre52">
<p class="calibre3">Bean can be used in any page in the same web application. Typically, web applications are deployed in a web application container as <strong class="calibre5">web application archive</strong> (<strong class="calibre5">WAR</strong>) files. In the application scope, all JSPs in the WAR file can use JavaBeans.</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre3"> </p>
<p class="calibre3">We will move the code to validate users in our login example to the <kbd class="calibre13">JavaBean</kbd> class. First, we need to create a <kbd class="calibre13">JavaBean</kbd> class:</p>
<ol class="calibre14">
<li value="1" class="calibre11">In <span>Project Explorer</span>, right-click on the <kbd class="calibre13">src</kbd> folder <span>New</span> | <span>Package </span>menu option.</li>
<li value="2" class="calibre11">Create a package named <kbd class="calibre13">packt.book.jee_eclipse.ch2.bean</kbd>.</li>
<li value="3" class="calibre11">Right-click on the package and select the <span>New</span> | <span>Class</span> menu option.</li>
<li value="4" class="calibre11">Create a class named <kbd class="calibre13">LoginBean</kbd>.</li>
</ol>
<ol start="5" class="calibre14">
<li value="5" class="calibre11">Create two private <kbd class="calibre13">String</kbd> members as follows:</li>
</ol>
<pre class="calibre35">public class LoginBean { 
  private String userName; 
  private String password; 
} </pre>
<ol start="6" class="calibre14">
<li value="6" class="calibre11">Right-click anywhere inside the class (in the editor) and select the <span>Source</span> | <span>Generate Getters and Setters</span> menu option:</li>
</ol>
<div class="mce-root1"><img src="../images/00040.jpeg" class="calibre58"/></div>
<div class="packt_figure1">Figure 2.20: Generate getters and setters</div>
<ol start="7" class="calibre14">
<li value="7" class="calibre11">We want to generate getters and setters for all members of the class. Therefore, click the <span>Select All</span> button and select <span>Last member</span> from the drop-down list for <span>Insertion point</span>, because we want to insert the getters and setters after declaring all member variables.</li>
</ol>
<p class="mce-root2">The <kbd class="calibre13">LoginBean</kbd> class should now be as follows:</p>
<pre class="calibre35">public class LoginBean { 
private String userName; 
  private String password; 
  public String getUserName() { 
    return userName; 
  } 
  public void setUserName(String userName) { 
    this.userName = userName; 
  } 
  public String getPassword() { 
    return password; 
  } 
  public void setPassword(String password) { 
    this.password = password; 
  } 
} </pre>
<ol start="8" class="calibre14">
<li value="8" class="calibre11">We will add one more method to it, to validate username and password:</li>
</ol>
<pre class="calibre35">public boolean isValidUser() 
  { 
    //Validation can happen here from a number of sources 
    //for example, database and LDAP 
    //We are just going to hardcode a valid username and 
    //password here. 
    return "admin".equals(this.userName) &amp;&amp; <br class="title-page-name"/>            "admin".equals(this.password); 
  } </pre>
<p class="calibre3">This completes our JavaBean for storing user information and validation.<br class="calibre6"/>
We will now use this bean in our JSP and delegate the task of validating users to this bean. Open <kbd class="calibre13">index.jsp</kbd>. Replace the Java scriptlet just above the <kbd class="calibre13">&lt;body&gt;</kbd> tag in the preceding code with the following:</p>
<pre class="calibre25">&lt;%String errMsg = null; %&gt; 
&lt;%if ("POST".equalsIgnoreCase(request.getMethod()) &amp;&amp; request.getParameter("submit") != null) {%&gt; 
  &lt;jsp:useBean id="loginBean" <br class="title-page-name"/>   class="packt.book.jee_eclipse.ch2.bean.LoginBean"&gt; 
    &lt;jsp:setProperty name="loginBean" property="*"/&gt; 
  &lt;/jsp:useBean&gt; 
  &lt;% 
    if (loginBean.isValidUser()) 
    { 
      //valid user 
      out.println("&lt;h2&gt;Welcome admin !&lt;/h2&gt;"); 
      out.println("You are successfully logged in"); 
    } 
    else 
    { 
 
      errMsg = "Invalid user id or password. Please try again"; 
 
    } 
  %&gt; 
&lt;%} %&gt; </pre>
<p class="calibre3">Before we discuss what has changed in the preceding code, note that you can invoke and get code assist for the attributes and values of <kbd class="calibre13">&lt;jsp:*&gt;</kbd> tags too. If you are not sure whether code assist is available, just press <em class="calibre21">Ctrl</em>/<em class="calibre21">Cmd</em> + <em class="calibre21">C</em>.</p>
<div class="mce-root1"><img src="../images/00041.jpeg" class="calibre59"/></div>
<div class="packt_figure1">Figure 2.21: Code assist in JSP tags</div>
<p class="calibre3">Notice that Eclipse displays code assist for the JavaBean that we just added.</p>
<p class="calibre3">Let's now understand what we changed in the JSP:</p>
<ul class="calibre10">
<li class="calibre11">We created multiple scriptlets, one for declaration of the <kbd class="calibre13">errMsg</kbd> variable and two more for separate <kbd class="calibre13">if</kbd> blocks. </li>
<li class="calibre11">We added a <kbd class="calibre13">&lt;jsp:useBean</kbd> tag in the first <kbd class="calibre13">if</kbd> condition. The bean is created when a condition in the <kbd class="calibre13">if</kbd> statement is true, that is, when the form is posted by clicking the <span>Submit</span> button.</li>
</ul>
<ul class="calibre10">
<li class="calibre11">We used the <kbd class="calibre13">&lt;jsp:setProperty&gt;</kbd> tag to set attributes of the bean:</li>
</ul>
<pre class="calibre35">&lt;jsp:setProperty name="loginBean" property="*"/&gt; </pre>
<p class="mce-root2">We are setting values of member variables of <kbd class="calibre13">loginBean</kbd>. Furthermore, we are setting values of all the member variables by specifying <kbd class="calibre13">property="*"</kbd>. However, where do we specify values? The values are specified implicitly because we have named members of <kbd class="calibre13">LoginBean</kbd> to be the same as the fields in the form. So, the JSP runtime gets parameters from the <kbd class="calibre13">request</kbd> object and assigns values to the JavaBean members with the same name.<br class="calibre6"/>
If names of the members of JavaBean do not match the request parameters, then you need to set the values explicitly:</p>
<pre class="calibre35">&lt;jsp:setProperty name="loginBean" property="userName" 
  value="&lt;%=request.getParameter("userName")%&gt;"/&gt; 
&lt;jsp:setProperty name="loginBean" property="password" 
  value="&lt;%=request.getParameter("password")%&gt;"/&gt; </pre>
<ul class="calibre10">
<li class="calibre11">We then checked whether the user is valid by calling <kbd class="calibre13">loginBean.isValidUser()</kbd>. The code to handle error messages hasn't changed.</li>
</ul>
<p class="calibre3">To test the page, perform the following steps:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Right-click on <kbd class="calibre13">index.jsp</kbd> in <span>Project Explorer</span>.</li>
<li value="2" class="calibre11">Select the <span>Run As</span> | <span>Run </span><span>on Server</span> menu option. Eclipse will prompt you to restart the Tomcat server.</li>
<li value="3" class="calibre11">Click the <span>OK</span> button to restart the server.</li>
</ol>
<p class="calibre3">The page will be displayed in the internal Eclipse browser. It should behave in the same way as in the previous example.</p>
<p class="calibre3">Although we have moved validation of users to <kbd class="calibre13">LoginBean</kbd>, we still have a lot of code in Java scriptlets. Ideally, we should have as few Java scriptlets as possible in JSP. We still have scriptlets for checking conditions and for variable assignments. We can write the same code by using tags so that it is consistent with the remaining tag-based code in JSP and will be easier for web designers to work with it. This can be achieved using <strong class="calibre5">JSP Standard Tag Library</strong> (<strong class="calibre5">JSTL</strong>).</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Using JSTL</h1>
                
            
            <article>
                
<p class="calibre3">JSTL tags can be used to replace much of the Java scriptlets in JSP. JSTL tags are classified in five broad groups:</p>
<ul class="calibre10">
<li class="calibre11"><strong class="calibre1">Core</strong>: Covers flow control and variable support among other things</li>
<li class="calibre11"><strong class="calibre1">XML</strong>: Tags to process XML documents</li>
<li class="calibre11"><strong class="calibre1">i18n</strong>: Tags to support internationalization</li>
<li class="calibre11"><strong class="calibre1">SQL</strong>: Tags to access database</li>
<li class="calibre11"><strong class="calibre1">Functions</strong>: Tags to perform some of the common string operations</li>
</ul>
<div class="packt_infobox"><br class="calibre26"/>
See <a href="http://docs.oracle.com/javaee/5/tutorial/doc/bnake.html" class="calibre17"><span class="calibre23">http://docs.oracle.com/javaee/5/tutorial/doc/bnake.html</span></a> for more details on JSTL.</div>
<p class="calibre3">We will modify the login JSP to use JSTL, so that there are no Java scriptlets in it:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Download JSTL libraries for APIs and their implementation. At the time of writing, the latest <kbd class="calibre13">.jar</kbd> files are <kbd class="calibre13">javax.servlet.jsp.jstl-api-1.2.1.jar</kbd> <span>(</span><a href="http://search.maven.org/remotecontent?filepath=javax/servlet/jsp/jstl/javax.servlet.jsp.jstl-api/1.2.1/javax.servlet.jsp.jstl-api-1.2.1.jar" class="calibre9"><span>http://search.maven.org/remotecontent?filepath=javax/servlet/jsp/jstl/javax.servlet.jsp.jstl-api/1.2.1/javax.servlet.jsp.jstl-api-1.2.1.jar</span></a><span>) and</span> <kbd class="calibre13">javax.servlet.jsp.jstl-1.2.1.jar</kbd> <span>(</span><a href="http://search.maven.org/remotecontent?filepath=org/glassfish/web/javax.servlet.jsp.jstl/1.2.1/javax.servlet.jsp.jstl-1.2.1.jar" class="calibre9"><span>http://search.maven.org/remotecontent?filepath=org/glassfish/web/javax.servlet.jsp.jstl/1.2.1/javax.servlet.jsp.jstl-1.2.1.jar</span></a><span>). Make sure that these files are copied to</span> <kbd class="calibre13">WEB-INF/lib</kbd><span>. All <kbd class="calibre13">.jar</kbd> files in this folder are added to the</span> <kbd class="calibre13">classpath</kbd> <span>of the web application.<br class="title-page-name"/>
<br class="title-page-name"/></span></li>
<li value="2" class="calibre11">We need to add a declaration for JSTL in our JSP. Add the following <kbd class="calibre13">taglib</kbd> declaration below the first page declaration (<kbd class="calibre13">&lt;%@ page language="java" ...&gt;</kbd>):</li>
</ol>
<pre class="calibre35">&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt; </pre>
<p class="mce-root2">The <kbd class="calibre13">taglib</kbd><span class="calibre12"> declaration contains the URL of the </span><kbd class="calibre13">tag</kbd><span class="calibre12"> library and </span><kbd class="calibre13">prefix</kbd><span class="calibre12">. All tags in the <kbd class="calibre13">tag</kbd> library are accessed using </span><kbd class="calibre13">prefix</kbd><span class="calibre12"> in JSP.</span></p>
<ol start="3" class="calibre14">
<li value="3" class="calibre11"><span>Replace </span><kbd class="calibre13">&lt;%String errMsg = null; %&gt;</kbd><span> with the </span><kbd class="calibre13">set</kbd><span><span><span> tag of JSTL:<br class="title-page-name"/></span></span></span></li>
</ol>
<pre class="calibre35">&lt;c:set var="errMsg" value="${null}"/&gt; 
&lt;c:set var="displayForm" value="${true}"/&gt; </pre>
<p class="mce-root2"><span class="calibre12"><span class="calibre12">We have enclosed the value in <kbd class="calibre13">${}</kbd>. This is called <strong class="calibre5">Expression Language</strong> (<strong class="calibre5">EL</strong>). You enclose the Java expression in JSTL in <kbd class="calibre13">${}</kbd>.<br class="calibre6"/></span></span></p>
<ol start="4" class="calibre14">
<li value="4" class="calibre11">Replace the following code:</li>
</ol>
<pre class="calibre35">&lt;%if ("POST".equalsIgnoreCase(request.getMethod()) &amp;&amp; 
request.getParameter("submit") != null) {%&gt; </pre>
<p class="mce-root2">With the <kbd class="calibre13">if</kbd> tag of JSTL:</p>
<pre class="calibre35">&lt;c:if test="${"POST".equalsIgnoreCase(pageContext.request 
.method) &amp;&amp; pageContext.request.getParameter("submit") != <br class="title-page-name"/> null}"&gt;</pre>
<p class="mce-root2"><span class="calibre12">The </span><kbd class="calibre13">request</kbd><span class="calibre12"> object is accessed in the JSTL tag via </span><kbd class="calibre13">pageContext</kbd><span class="calibre12">.<br class="calibre6"/></span></p>
<ol start="5" class="calibre14">
<li value="5" class="calibre11"><span>JavaBean tags go within the</span> <kbd class="calibre13">if</kbd> <span>tag. There is no change in this code:</span></li>
</ol>
<pre class="calibre35">&lt;jsp:useBean id="loginBean" 
  class="packt.book.jee_eclipse.ch2.bean.LoginBean"&gt; 
  &lt;jsp:setProperty name="loginBean" property="*"/&gt; 
&lt;/jsp:useBean&gt; </pre>
<ol start="6" class="calibre14">
<li value="6" class="calibre11"> We then add tags to call <kbd class="calibre13">loginBean.isValidUser()</kbd> and based on its return value, to set messages. However, we can't use the <kbd class="calibre13">if</kbd> tag of JSTL here, because we need to write the <kbd class="calibre13">else</kbd> statement too. JSTL does not have a tag for <kbd class="calibre13">else</kbd>. Instead, for multiple <kbd class="calibre13">if...else</kbd> statements, you need to use the <kbd class="calibre13">choose</kbd> statement, which is somewhat similar to the <kbd class="calibre13">switch</kbd> statement:</li>
</ol>
<pre class="calibre35">&lt;c:choose&gt; 
  &lt;c:when test="${!loginBean.isValidUser()}"&gt; 
    &lt;c:set var="errMsg" value="Invalid user id or password. Please <br class="title-page-name"/>     try again"/&gt; 
  &lt;/c:when&gt; 
  &lt;c:otherwise&gt; 
    &lt;h2&gt;&lt;c:out value="Welcome admin !"/&gt;&lt;/h2&gt; 
    &lt;c:out value="You are successfully logged in"/&gt; 
    &lt;c:set var="displayForm" value="${false}"/&gt; 
  &lt;/c:otherwise&gt; 
&lt;/c:choose&gt;</pre>
<p class="mce-root2">If the user credentials are not valid, we set the error message. Or (in the<span class="calibre12"> </span><kbd class="calibre13">c:otherwise</kbd><span class="calibre12"> </span>tag), we print the welcome message and set the<span class="calibre12"> </span><kbd class="calibre13">displayForm</kbd><span class="calibre12"> </span>flag to<span class="calibre12"> </span><kbd class="calibre13">false</kbd>. We don't want to display the login form if the user is successfully logged in.</p>
<ol start="7" class="calibre14">
<li value="7" class="calibre11">We will now replace another <kbd class="calibre13">if</kbd> scriptlet code by <kbd class="calibre13">&lt;%if%&gt;</kbd> tag. Replace the following code snippet:</li>
</ol>
<pre class="calibre35">&lt;%if (errMsg != null) { %&gt; 
  &lt;span style="color: red;"&gt;&lt;%out.print(errMsg); %&gt;&lt;/span&gt; 
&lt;%} %&gt; </pre>
<p class="mce-root2">With the following code:</p>
<pre class="calibre35">&lt;c:if test="${errMsg != null}"&gt; 
  &lt;span style="color: red;"&gt; 
    &lt;c:out value="${errMsg}"&gt;&lt;/c:out&gt; 
  &lt;/span&gt; 
&lt;/c:if&gt;</pre>
<p class="mce-root2">Note that we have used the <kbd class="calibre13">out</kbd> tag to print an error message.</p>
<ol start="8" class="calibre14">
<li value="8" class="calibre11"> Finally, we enclose the entire <kbd class="calibre13">&lt;body&gt;</kbd> content in another JSTL <kbd class="calibre13">if</kbd> tag:</li>
</ol>
<pre class="calibre35">&lt;c:if test="${displayForm}"&gt; 
&lt;body&gt; 
   ... 
&lt;/body&gt; 
&lt;/c:if&gt; </pre>
<p class="mce-root2">Here is the complete source code of the JSP:</p>
<pre class="calibre35">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" 
    pageEncoding="UTF-8"%&gt; 
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt; 
 
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt; 
&lt;html&gt; 
&lt;head&gt; 
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF- <br class="title-page-name"/> 8"&gt; 
&lt;title&gt;Login&lt;/title&gt; 
&lt;/head&gt; 
 
&lt;c:set var="errMsg" value="${null}"/&gt; 
&lt;c:set var="displayForm" value="${true}"/&gt; 
&lt;c:if test="${"POST".equalsIgnoreCase(pageContext.request.method) 
&amp;&amp; pageContext.request.getParameter("submit") != null}"&gt; 
  &lt;jsp:useBean id="loginBean" <br class="title-page-name"/>   class="packt.book.jee_eclipse.ch2.bean.LoginBean"&gt; 
    &lt;jsp:setProperty name="loginBean" property="*"/&gt; 
  &lt;/jsp:useBean&gt; 
  &lt;c:choose&gt; 
    &lt;c:when test="${!loginBean.isValidUser()}"&gt; 
      &lt;c:set var="errMsg" value="Invalid user id or password. <br class="title-page-name"/>       Please try again"/&gt; 
    &lt;/c:when&gt; 
    &lt;c:otherwise&gt; 
    &lt;h2&gt;&lt;c:out value="Welcome admin !"/&gt;&lt;/h2&gt; 
      &lt;c:out value="You are successfully logged in"/&gt; 
      &lt;c:set var="displayForm" value="${false}"/&gt; 
    &lt;/c:otherwise&gt; 
  &lt;/c:choose&gt; 
&lt;/c:if&gt; 
 
&lt;c:if test="${displayForm}"&gt; 
&lt;body&gt; 
  &lt;h2&gt;Login:&lt;/h2&gt; 
  &lt;!-- Check error message. If it is set, then display it --&gt; 
  &lt;c:if test="${errMsg != null}"&gt; 
    &lt;span style="color: red;"&gt; 
      &lt;c:out value="${errMsg}"&gt;&lt;/c:out&gt; 
    &lt;/span&gt; 
  &lt;/c:if&gt; 
  &lt;form method="post"&gt; 
    User Name: &lt;input type="text" name="userName"&gt;&lt;br&gt; 
    Password: &lt;input type="password" name="password"&gt;&lt;br&gt; 
    &lt;button type="submit" name="submit"&gt;Submit&lt;/button&gt; 
    &lt;button type="reset"&gt;Reset&lt;/button&gt; 
  &lt;/form&gt; 
&lt;/body&gt; 
&lt;/c:if&gt; 
&lt;/html&gt; </pre>
<p class="calibre3">As you can see, there are no Java scriptlets in the preceding code. All of them, from the previous code, are replaced by tags. This makes it easy for web designers to edit the page without worrying about Java scriptlets.</p>
<p class="calibre3">One last note before we leave the topic of JSP. In real-world applications, you would probably forward the request to another page after the user successfully logs in, instead of just displaying a welcome message on the same page. You could use the <kbd class="calibre13">&lt;jsp:forward&gt;</kbd> tag to achieve this.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Java Servlet</h1>
                
            
            <article>
                
<p class="calibre3">We will now see how to implement a login application using Java Servlet. Create a new <strong class="calibre5">Dynamic Web Application</strong> in Eclipse as described in the previous section. We will call this <kbd class="calibre13">LoginServletApp</kbd>:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Right-click on the <kbd class="calibre13">src</kbd> folder under <kbd class="calibre13">Java Resources</kbd> for the project in <span>Project Explorer</span>. Select the <span>New</span> | <span>Servlet</span> menu option.</li>
<li value="2" class="calibre11">In the <span>Create Servlet</span> <span>wizard, enter package name as </span><kbd class="calibre13">packt.book.jee_eclipse.book.servlet</kbd> <span>and class name as</span> <kbd class="calibre13">LoginServlet</kbd><span>. Then, click</span> <span>Finish</span><span>.</span></li>
</ol>
<div class="mce-root1"><img src="../images/00042.jpeg" class="calibre60"/></div>
<div class="packt_figure1"><span>Figure 2.22: Create Servlet wizard</span></div>
<ol start="3" class="calibre14">
<li value="3" class="calibre11">The servlet wizard creates the class for you. Notice the <kbd class="calibre13">@WebServlet("/LoginServlet")</kbd> <span>annotation just above the class declaration. Before JEE 5, you had to declare servlets in</span> <kbd class="calibre13">web.xml</kbd> <span>in the</span> <kbd class="calibre13">WEB-INF</kbd> <span>folder. You can still do that, but you can skip this declaration if you use proper annotations. Using</span> <kbd class="calibre13">WebServlet</kbd><span>, we are telling the servlet container that</span> <kbd class="calibre13">LoginServlet</kbd> <span>is a servlet, and we are mapping it to the </span><kbd class="calibre13">/LoginServlet</kbd><span> URL path. </span><span>Thus, we are avoiding the following two entries in</span> <kbd class="calibre13">web.xml</kbd> <span>by using this annotation:</span> <kbd class="calibre13">&lt;servlet&gt;</kbd> <span>and</span> <kbd class="calibre13">&lt;servlet-mapping&gt;</kbd>.</li>
</ol>
<p class="mce-root2"><span class="calibre12">We will now change the mapping from <kbd class="calibre13">/LoginServlet</kbd> to just <kbd class="calibre13">/login</kbd>. Therefore, we will modify the annotation as follows:</span></p>
<pre class="calibre35">@WebServlet("/login") 
public class LoginServlet extends HttpServlet {...} </pre>
<ol start="4" class="calibre14">
<li value="4" class="calibre11">The wizard also created the <kbd class="calibre13">doGet</kbd> and <kbd class="calibre13">doPost</kbd> methods. These methods are overridden from the following base class: <kbd class="calibre13">HttpServlet</kbd>. The <kbd class="calibre13">doGet</kbd> method is called to create response for the <kbd class="calibre13">Get</kbd> request and <kbd class="calibre13">doPost</kbd> is called to create a response for the <kbd class="calibre13">Post</kbd> request.</li>
</ol>
<p class="mce-root2">We will create a login form in the <kbd class="calibre13">doGet</kbd> method and process the form data (<kbd class="calibre13">Post</kbd>) in the <kbd class="calibre13">doPost</kbd> method. However, because <kbd class="calibre13">doPost</kbd> may need to display the form, in case user credentials are invalid, we will write a <kbd class="calibre13">createForm</kbd> method, which could be called from both <kbd class="calibre13">doGet</kbd> and <kbd class="calibre13">doPost</kbd>.</p>
<ol start="5" class="calibre14">
<li value="5" class="calibre11"><span>Add a </span><kbd class="calibre13">createForm</kbd> <span>method as follows:</span></li>
</ol>
<pre class="calibre35">protected String createForm(String errMsg) { 
 StringBuilder sb = new StringBuilder("&lt;h2&gt;Login&lt;/h2&gt;"); 
//check whether error message is to be displayed 
  if (errMsg != null) { 
    sb.append("&lt;span style='color: red;'&gt;") 
      .append(errMsg) 
      .append("&lt;/span&gt;"); 
  } 
  //create form 
  sb.append("&lt;form method='post'&gt;n") 
    .append("User Name: &lt;input type='text' <br class="title-page-name"/>     name='userName'&gt;&lt;br&gt;n")    .append("Password: &lt;input type='password' <br class="title-page-name"/>     name='password'&gt;&lt;br&gt;n")    .append("&lt;button type='submit' <br class="title-page-name"/>     name='submit'&gt;Submit&lt;/button&gt;n") 
    .append("&lt;button type='reset'&gt;Reset&lt;/button&gt;n") 
    .append("&lt;/form&gt;"); 
 
  return sb.toString(); 
} </pre>
<ol start="6" class="calibre14">
<li value="6" class="calibre11">We will now modify a <kbd class="calibre13">doGet</kbd> method to call a <kbd class="calibre13">createForm</kbd> method and return the response:</li>
</ol>
<pre class="calibre35">protected void doGet(HttpServletRequest request, <br class="title-page-name"/> HttpServletResponse response) 
  throws ServletException, IOException { 
  response.getWriter().write(createForm(null)); 
} </pre>
<p class="mce-root2">We call the <kbd class="calibre13">getWrite</kbd> method on the <kbd class="calibre13">response</kbd> object and write the form content to it by calling the <kbd class="calibre13">createForm</kbd> function. Note that when we display the form, initially, there is no error message, so we pass a <kbd class="calibre13">null</kbd> argument to <kbd class="calibre13">createForm</kbd>.</p>
<ol start="7" class="calibre14">
<li class="calibre11" value="7"><span>We will modify</span> <kbd class="calibre13">doPost</kbd> <span>to process the form content when the user posts the form by clicking the </span><span>Submit</span> <span>button:</span></li>
</ol>
<pre class="calibre35">protected void doPost(HttpServletRequest request, 
HttpServletResponse response) 
  throws ServletException, IOException { 
    String userName = request.getParameter("userName"); 
    String password = request.getParameter("password"); 
 
  //create StringBuilder to hold response string 
  StringBuilder responseStr = new StringBuilder(); 
  if ("admin".equals(userName) &amp;&amp; "admin".equals(password)) { 
    responseStr.append("&lt;h2&gt;Welcome admin !&lt;/h2&gt;") 
    .append("You are successfully logged in"); 
  } 
  else { 
    //invalid user credentials 
    responseStr.append(createForm("Invalid user id or password. <br class="title-page-name"/>     Please try again")); 
  } 
 
  response.getWriter().write(responseStr.toString()); 
} </pre>
<p class="mce-root2"><span class="calibre12">We first get username and password from the <kbd class="calibre13">request</kbd> object by calling the </span><kbd class="calibre13">request.getParameter</kbd> <span class="calibre12">method. If the credentials are valid, we add a welcome message to the <kbd class="calibre13">response</kbd> string; or else, we call</span> <kbd class="calibre13">createForm</kbd> <span class="calibre12">with an error message and add a return value (markup for the form) to the <kbd class="calibre13">response</kbd> string.</span></p>
<p class="mce-root2"><span class="calibre12">Finally, we get the <kbd class="calibre13">Writer</kbd> object from the <kbd class="calibre13">response</kbd> string an</span>d write the <span class="calibre12">response.</span></p>
<ol start="8" class="calibre14">
<li value="8" class="calibre11"> Right-click on the <kbd class="calibre13">LoginServlet.java</kbd> file in <span>Project Explorer</span> and select the <span>Run As</span> | <span>Run on Server</span> option. We have not added this project to the Tomcat server. Therefore, Eclipse will ask if you want to use the configured server to run this servlet. Click the <span>Finish</span> button of the wizard.</li>
<li value="9" class="calibre11"><span>Tomcat needs to restart because </span><span>a new web application is deployed in the server</span><span>. Eclipse will prompt you to restart the server. Click </span><span>OK</span><span>.</span></li>
</ol>
<p class="calibre3">When the servlet is run in the internal browser of Eclipse, notice the URL; it ends with <kbd class="calibre13">/login</kbd>, which is the mapping that we specified in the servlet annotation. However, you will observe that instead of rendering the HTML form, the page displays the markup text. This is because we missed an important setting on the <kbd class="calibre13">response</kbd> object. We did not tell the browser the type of content we are returning, so the browser assumed it to be text and rendered it as plain text. We need to tell the browser that it is HTML content. We do this by calling <kbd class="calibre13">response.setContentType("text/html")</kbd> in both the <kbd class="calibre13">doGet</kbd> and the <kbd class="calibre13">doPost</kbd> methods. Here is the complete source code:</p>
<pre class="calibre25">package packt.book.jee_eclipse.book.servlet; 
<br class="title-page-name"/>// skipping imports to save space
 
/** 
 * Servlet implementation class LoginServlet 
 */ 
@WebServlet("/login") 
public class LoginServlet extends HttpServlet { 
  private static final long serialVersionUID = 1L; 
 
  public LoginServlet() { 
    super(); 
  } 
  //Handles HTTP Get requests 
  protected void doGet(HttpServletRequest request, HttpServletResponse response)  
    throws ServletException, IOException { 
  response.setContentType("text/html"); 
  response.getWriter().write(createForm(null)); 
  } 
  //Handles HTTP POST requests 
  protected void doPost(HttpServletRequest request, <br class="title-page-name"/>   HttpServletResponse response) 
      throws ServletException, IOException { 
    String userName = request.getParameter("userName"); 
    String password = request.getParameter("password"); 
 
    //create StringBuilder to hold response string 
    StringBuilder responseStr = new StringBuilder(); 
    if ("admin".equals(userName) &amp;&amp; "admin".equals(password)) { 
      responseStr.append("&lt;h2&gt;Welcome admin !&lt;/h2&gt;") 
        .append("You're are successfully logged in"); 
    } else { 
      //invalid user credentials 
      responseStr.append(createForm("Invalid user id or password. <br class="title-page-name"/>       Please try again")); 
    } 
    response.setContentType("text/html"); 
    response.getWriter().write(responseStr.toString()); 
  }<br class="title-page-name"/><br class="title-page-name"/> 
  //Creates HTML Login form 
  protected String createForm(String errMsg) { 
    StringBuilder sb = new StringBuilder("&lt;h2&gt;Login&lt;/h2&gt;"); 
    //check if error message to be displayed 
    if (errMsg != null) { 
      sb.append("&lt;span style='color: red;'&gt;") 
        .append(errMsg) 
        .append("&lt;/span&gt;"); 
    } 
    //create form 
    sb.append("&lt;form method='post'&gt;n") 
      .append("User Name: &lt;input type='text' <br class="title-page-name"/>       name='userName'&gt;&lt;br&gt;n")      .append("Password: &lt;input type='password' <br class="title-page-name"/>       name='password'&gt;&lt;br&gt;n")      .append("&lt;button type='submit' <br class="title-page-name"/>       name='submit'&gt;Submit&lt;/button&gt;n") 
      .append("&lt;button type='reset'&gt;Reset&lt;/button&gt;n") 
      .append("&lt;/form&gt;"); 
    return sb.toString(); 
  } 
} </pre>
<p class="calibre3">As you can see, it is not very convenient to write HTML markup in servlet. Therefore, if you are creating a page with a lot of HTML markup, then it is better to use JSP or plain HTML. Servlets are good to process requests that do not need to generate too much markup, for example, controllers in <strong class="calibre5">Model-View-Controller</strong> (<strong class="calibre5">MVC</strong>) frameworks, for processing requests that generate a non-text response, or for creating a web service or WebSocket endpoints.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating WAR</h1>
                
            
            <article>
                
<p class="calibre3">Thus far, we have been running our web application from Eclipse, which does all the work of deploying the application to the Tomcat server. This works fine during development, but when you want to deploy it to test or production servers, you need to create a <strong class="calibre5">web application archive</strong> (<strong class="calibre5">WAR</strong>). We will see how to create a WAR from Eclipse. However, first we will un-deploy the existing applications from Tomcat.</p>
<ol class="calibre14">
<li value="1" class="calibre11">Go to the <span>Servers</span> view, select the application, and right-click and select the <span>Remove</span> option:</li>
</ol>
<div class="mce-root1"><img src="../images/00043.jpeg" class="calibre61"/></div>
<div class="packt_figure1">Figure 2.23 Un-deploy a web application from the server</div>
<ol start="2" class="calibre14">
<li class="calibre11" value="2">Then, right-click on the project in <span>Project Explorer</span> and select <span>Export</span> | <span>WAR file</span>. Select the destination for the WAR file:</li>
</ol>
<div class="mce-root1"><img src="../images/00044.jpeg" class="calibre62"/></div>
<div class="packt_figure1">Figure 2.24 Export WAR</div>
<p class="calibre3">To deploy the WAR file to Tomcat, copy it to the <kbd class="calibre13">&lt;tomcat_home&gt;/webapps</kbd> folder. Then start the server if it is not already running. If Tomcat is already running, you don't need to restart it.</p>
<p class="calibre3">Tomcat monitors the <kbd class="calibre13">webapps</kbd> folder and any WAR file copied to it is automatically deployed. You can verify this by opening the URL of your application in the browser, for example, <kbd class="calibre13">http://localhost:8080/LoginServletApp/login</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">JavaServer Faces</h1>
                
            
            <article>
                
<p class="calibre3">When working with JSP, we saw that it is not a good idea to mix scriptlets with the HTML markup. We solved this problem by using JavaBean. JavaServer Faces takes this design further. In addition to supporting JavaBeans, JSF provides built-in tags for HTML user controls, which are context aware, can perform validation, and can preserve the state between requests. We will now create the login application using JSF:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Create a dynamic web application in Eclipse; let's name it <kbd class="calibre13">LoginJSFApp</kbd>. In the last page of the wizard, make sure that you check the <span>Generate web.xml deployment descriptor</span> box.</li>
<li value="2" class="calibre11">Download JSF libraries from <a href="https://maven.java.net/content/repositories/releases/org/glassfish/javax.faces/2.2.9/javax.faces-2.2.9.jar" class="calibre9"><span>https://maven.java.net/content/repositories/releases/org/glassfish/javax.faces/2.2.9/javax.faces-2.2.9.jar</span></a> and copy them to the <kbd class="calibre13">WEB-INF/lib</kbd> folder in your project.</li>
<li value="3" class="calibre11">JSF follows the MVC pattern. In the MVC pattern, the code to generate user interface (view) is separate from the container of the data (model). The controller acts as the interface between the view and the model. It selects the model for processing a request on the basis of the configuration, and once the model processes the request, it selects the view to be generated and returned to the client, on the basis of the result of the processing in the model. The advantage of MVC is that there is a clear separation of the UI and the business logic (which requires a different set of expertise) so that they can be developed independently, to a large extent. In JSP the implementation of MVC is optional, but JSF enforces the MVC design.</li>
</ol>
<p class="calibre3">Views are JSF created as <kbd class="calibre13">xhtml</kbd> files. The controller is a servlet from the JSF library and models are <strong class="calibre5">managed beans</strong> (JavaBeans).</p>
<p class="calibre3">We will first configure a controller for JSF. We will add the servlet configuration and mapping in <kbd class="calibre13">web.xml</kbd>. Open <kbd class="calibre13">web.xml</kbd> from the <kbd class="calibre13">WEB-INF</kbd> folder of the project (<kbd class="calibre13">web.xml</kbd> should have been created for you by the project wizard if you checked the <span class="calibre12">Generate web.xml deployment descriptor</span> box; step 1). Add the following XML snippet before <kbd class="calibre13">&lt;/web-app&gt;</kbd>:</p>
<pre class="calibre25">&lt;servlet&gt; 
  &lt;servlet-name&gt;JSFServlet&lt;/servlet-name&gt; 
  &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt; 
  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; 
&lt;/servlet&gt; 
 
&lt;servlet-mapping&gt; 
  &lt;servlet-name&gt;JSFServlet&lt;/servlet-name&gt; 
  &lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt; 
&lt;/servlet-mapping&gt; </pre>
<p class="calibre3">Note that you can get code assist when creating the preceding elements by pressing <em class="calibre21"><span class="calibre12">Ctrl</span></em>/<em class="calibre21"><span class="calibre12">Cmd</span></em> + <em class="calibre21"><span class="calibre12">C</span></em>.</p>
<p class="calibre3">You can specify any name as <kbd class="calibre13">servlet-name</kbd>; just make sure that you use the same name in <kbd class="calibre13">servlet-mapping</kbd>. The class for the servlet is <kbd class="calibre13">javax.faces.webapp.FacesServlet</kbd>, which is in the JAR file that we downloaded as the JSF library and copied to <kbd class="calibre13">WEB-INF/lib</kbd>. Furthermore, we have mapped any request ending with <kbd class="calibre13">.xhtml</kbd> to this servlet.</p>
<p class="calibre3">Next, we will create a managed bean for our login page. This is the same as JavaBean that we had created earlier, but with the addition of JSF-specific annotations:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Right-click on the <kbd class="calibre13">src</kbd> folder under <kbd class="calibre13">Java Resources</kbd> for the project in <span>Project Explorer</span>.</li>
<li value="2" class="calibre11">Select the <span>New</span> | <span>Class</span> menu option.</li>
<li value="3" class="calibre11">Create JavaBean, <kbd class="calibre13">LoginBean</kbd>, as described in the <em class="calibre2">Using JavaBeans in JSP</em> section of this chapter.</li>
<li value="4" class="calibre11">Create two members for <kbd class="calibre13">userName</kbd> and <kbd class="calibre13">password</kbd>.</li>
<li class="calibre11" value="5"><span>Create the getters and setters for them. Then, add two annotations as follows:</span></li>
</ol>
<pre class="calibre35">package packt.book.jee_eclipse.bean; 
import javax.faces.bean.ManagedBean; 
import javax.faces.bean.RequestScoped; 
 
@ManagedBean(name="loginBean") 
@RequestScoped 
public class LoginBean { 
  private String userName; 
  private String password; 
  public String getUserName() { 
    return userName; 
  } 
  public void setUserName(String userName) { 
    this.userName = userName; 
  } 
  public String getPassword() { 
    return password; 
  } 
  public void setPassword(String password) { 
    this.password = password; 
  } 
}</pre>
<p class="mce-root2"><span class="calibre12">(You can get code assist for annotations too. Type</span> <kbd class="calibre13">@</kbd> <span class="calibre12">and press</span> <em class="calibre21"><span class="calibre12">Ctrl</span></em>/<em class="calibre21"><span class="calibre12">Cmd</span></em> + <em class="calibre21"><span class="calibre12">C</span></em><span class="calibre12">. Code assist works for the annotation</span> <kbd class="calibre13">key-value</kbd> <span class="calibre12">attribute pairs too, for example, for the <kbd class="calibre13">name</kbd> attribute of the</span> <kbd class="calibre13">ManagedBean</kbd> <span class="calibre12">annotation).</span></p>
<ol start="6" class="calibre14">
<li class="calibre11" value="6"><span>Create a new file called</span> <kbd class="calibre13">index.xhtml</kbd> <span>inside the </span><kbd class="calibre13">WebContent</kbd> <span>folder of the project by selecting the </span><span>File</span> <span>|</span> <span>New</span> <span>|</span> <span>File</span> <span>menu option. When using JSF, you need to add a few namespace declarations at the top of the file:</span></li>
</ol>
<pre class="calibre35">&lt;html  
   
  &gt; </pre>
<p class="mce-root2"><span class="calibre12">Here, we are declaring namespaces for JSF built-in <kbd class="calibre13">tag</kbd> libraries. We will access tags in the core JSF <kbd class="calibre13">tag</kbd> library with the prefix</span> <kbd class="calibre13">f</kbd> <span class="calibre12">and HTML tags with the prefix <kbd class="calibre13">h</kbd>.<br class="calibre6"/></span></p>
<ol start="7" class="calibre14">
<li value="7" class="calibre11">Add the title and start the <kbd class="calibre13">body</kbd> tag:</li>
</ol>
<pre class="calibre35">&lt;head&gt; 
&lt;title&gt;Login&lt;/title&gt; 
&lt;/head&gt; 
&lt;body&gt; 
  &lt;h2&gt;Login&lt;/h2&gt; </pre>
<p class="mce-root2">There are corresponding JSF tags for the <kbd class="calibre13">head</kbd> and the <kbd class="calibre13">body</kbd>, but we do not use any attributes specific to JSF; therefore, we have used simple HTML tags.</p>
<ol start="8" class="calibre14">
<li value="8" class="calibre11">We then add the code to display the error message, if it is not null:</li>
</ol>
<pre class="calibre35">&lt;h:outputText value="#{loginBean.errorMsg}" 
              rendered="#{loginBean.errorMsg != null}" 
              style="color:red;"/&gt; </pre>
<p class="mce-root2">Here, we use a tag specific to JSF and expression language to display the value of the error message. The<span class="calibre12"> </span><kbd class="calibre13">OutputText</kbd><span class="calibre12"> </span>tag is similar to the<span class="calibre12"> </span><kbd class="calibre13">c:out</kbd><span class="calibre12"> </span>tag that we saw in JSTL. We have also added a condition to render it only if the error message in the managed bean is not <kbd class="calibre13">null</kbd>. Additionally, we have set the color of this output text.</p>
<ol start="9" class="calibre14">
<li value="9" class="calibre11">We have not added the <kbd class="calibre13">errorMsg</kbd> member to the managed bean yet. Therefore, let's add the declaration, the getter, and the setter. Open the <kbd class="calibre13">LoginBean</kbd> class and add the following code:</li>
</ol>
<pre class="calibre35">private String errorMsg; 
public String getErrorMsg() { 
  return errorMsg; 
} 
public void setErrorMsg(String errorMsg) { 
  this.errorMsg = errorMsg; 
} </pre>
<p class="mce-root2">Note that we access the managed bean in JSF by using value of the <kbd class="calibre13">name</kbd> <span class="calibre12">attribute of the</span> <kbd class="calibre13">ManagedBean</kbd> <span class="calibre12">annotation. Furthermore, unlike JavaBean in JSP,</span> we do not create it by using the <kbd class="calibre13">&lt;jsp:useBean&gt;</kbd> <span class="calibre12">tag. The JSF runtime creates the bean if it is not already there in the required scope, in this case, the</span> <kbd class="calibre13">Request</kbd> <span class="calibre12">scope.</span></p>
<ol start="10" class="calibre14">
<li value="10" class="calibre11">Let's go back to editing <kbd class="calibre13">index.xhtml</kbd>. We will now add the following form:</li>
</ol>
<pre class="calibre35">&lt;h:form&gt; 
  User Name: &lt;h:inputText id="userName" 
                value="#{loginBean.userName}"/&gt;&lt;br/&gt; 
  Password: &lt;h:inputSecret id="password" 
                value="#{loginBean.password}"/&gt;&lt;br/&gt; 
  &lt;h:commandButton value="Submit" <br class="title-page-name"/>   action="#{loginBean.validate}"/&gt; 
&lt;/h:form&gt; </pre>
<p class="mce-root2">Many things are happening here. First, we have used the <kbd class="calibre13">inputText</kbd> tag of JSF to create textboxes for username and password. We have set their values with the corresponding members of <kbd class="calibre13">loginBean</kbd>. We have used the <kbd class="calibre13">commandButton</kbd> tag of JSF to create a <span class="calibre12">Submit</span> button. When the user clicks the <span class="calibre12">Submit</span> button, we have set it to call the <kbd class="calibre13">loginBean.validate</kbd> method (using the <kbd class="calibre13">action</kbd> attribute).</p>
<ol start="11" class="calibre14">
<li value="11" class="calibre11">We haven't defined a <kbd class="calibre13">validate</kbd> method in <kbd class="calibre13">loginBean</kbd>, so let's add that. Open the <kbd class="calibre13">LoginBean</kbd> class and add the following code:</li>
</ol>
<pre class="calibre35">public String validate() 
{ 
  if ("admin".equals(userName) &amp;&amp; "admin".equals(password)) { 
    errorMsg = null; 
    return "welcome"; 
  } else { 
    errorMsg = "Invalid user id or password. Please try <br class="title-page-name"/>     again"; 
    return null; 
  } 
}</pre>
<p class="mce-root2">Note that the <kbd class="calibre13">validate</kbd> method returns a string. How is the return value used? It is used for navigation purposes in JSF. The JSF runtime looks for the JSF file with the same name as the string value returned after evaluating the expression in the <kbd class="calibre13">action</kbd> attribute of <kbd class="calibre13">commandButton</kbd>. In the <kbd class="calibre13">validate</kbd> method, we return <kbd class="calibre13">welcome</kbd> if the user credentials are valid. In this case we are telling the JSF runtime to navigate to <kbd class="calibre13">welcome.xhtml</kbd>. If the credentials are invalid, we set the error message and return <kbd class="calibre13">null</kbd>, in which case, the JSF runtime displays the same page.</p>
<ol start="12" class="calibre14">
<li value="12" class="calibre11">We will now add the <kbd class="calibre13">welcome.xhml</kbd> page. It simply contains the welcome message:</li>
</ol>
<pre class="calibre35">&lt;html  
       
      &gt; 
  &lt;body&gt; 
    &lt;h2&gt;Welcome admin !&lt;/h2&gt; 
      You are successfully logged in 
  &lt;/body&gt; 
&lt;/html&gt; </pre>
<p class="calibre3">Here is the complete source code of <kbd class="calibre13">index.html</kbd>:</p>
<pre class="calibre25">&lt;html  
   
  &gt; 
 
  &lt;head&gt; 
    &lt;title&gt;Login&lt;/title&gt; 
  &lt;/head&gt; 
  &lt;body&gt; 
  &lt;h2&gt;Login&lt;/h2&gt; 
  &lt;h:outputText value="#{loginBean.errorMsg}" 
  rendered="#{loginBean.errorMsg != null}" 
  style="color:red;"/&gt; 
  &lt;h:form&gt; 
    User Name: &lt;h:inputText id="userName" <br class="title-page-name"/>     value="#{loginBean.userName}"/&gt;&lt;br/&gt;    Password: &lt;h:inputSecret id="password" <br class="title-page-name"/>     value="#{loginBean.password}"/&gt;&lt;br/&gt; 
  &lt;h:commandButton value="Submit" action="#{loginBean.validate}"/&gt; 
  &lt;/h:form&gt; 
&lt;/body&gt; 
&lt;/html&gt;</pre>
<p class="calibre3">Here is the source code of the <kbd class="calibre13">LoginBean</kbd> class:</p>
<pre class="calibre25">package packt.book.jee_eclipse.bean; 
import javax.faces.bean.ManagedBean; 
import javax.faces.bean.RequestScoped; 
 
@ManagedBean(name="loginBean") 
@RequestScoped 
public class LoginBean { 
  private String userName; 
  private String password; 
  private String errorMsg; 
  public String getUserName() { 
    return userName; 
  } 
  public void setUserName(String userName) { 
    this.userName = userName; 
  } 
  public String getPassword() { 
    return password; 
  } 
  public void setPassword(String password) { 
    this.password = password; 
  } 
  public String getErrorMsg() { 
    return errorMsg; 
  } 
  public void setErrorMsg(String errorMsg) { 
    this.errorMsg = errorMsg; 
  } 
  public String validate() 
  { 
    if ("admin".equals(userName) &amp;&amp; "admin".equals(password)) { 
      errorMsg = null; 
      return "welcome"; 
    } 
    else { 
      errorMsg = "Invalid user id or password. Please try again"; 
      return null; 
    } 
  } 
} </pre>
<p class="calibre3">To run the application, right-click on <kbd class="calibre13">index.xhtml</kbd> in <span class="calibre12">Project Explorer</span> and select the <span class="calibre12">Run As</span> | <span class="calibre12">Run on Server</span> option.</p>
<p class="calibre3">JSF can do much more than what we have seen in this small example—it has the support to validate an input and create page templates too. However, these topics are beyond the scope of this book.</p>
<div class="packt_tip"><br class="calibre26"/>
Visit <a href="http://docs.oracle.com/cd/E11035_01/workshop102/webapplications/jsf/jsf-app-tutorial/Introduction.html" class="calibre17"><span class="calibre23">http://docs.oracle.com/cd/E11035_01/workshop102/webapplications/jsf/jsf-app-tutorial/Introduction.html</span></a> for a tutorial on JSF.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Using Maven for project management</h1>
                
            
            <article>
                
<p class="calibre3">In the projects that we have created thus far in this chapter, we have managed many project management tasks, such as downloading libraries on which our project depends, adding them to the appropriate folder so that the web application can find it, and exporting the project to create the WAR file for deployment. These are just some of the project management tasks that we have performed so far, but there are many more, which we will see in the subsequent chapters. It helps to have a tool do many of the project management tasks for us so that we can focus on application development. There are some well-known build management tools available for Java, for example, Apache Ant (<a href="http://ant.apache.org/" class="calibre9"><span>http://ant.apache.org/</span></a>) and Maven (<a href="http://maven.apache.org/" class="calibre9"><span>http://maven.apache.org/</span></a>).</p>
<p class="calibre3">In this section, we will see how to use Maven as a project management tool. By following the convention for creating the project structure and allowing projects to define the hierarchy, Maven makes project management easier than Ant. Ant is primarily a build tool, whereas Maven is a project management tool, which does build management too. See <a href="http://maven.apache.org/what-is-maven.html" class="calibre9"><span>http://maven.apache.org/what-is-maven.html</span></a> to understand what Maven can do.</p>
<p class="calibre3">In particular, Maven simplifies dependency management. In the JSF project earlier in this chapter, we first downloaded the appropriate <kbd class="calibre13">.jar</kbd> files for JSF and copied them to the <kbd class="calibre13">lib</kbd> folder. Maven can automate this. You can configure Maven settings in <kbd class="calibre13">pom.xml</kbd>. <strong class="calibre5">POM</strong> stands for <strong class="calibre5">Project Object Model</strong>.</p>
<p class="calibre3">Before we use Maven, it is important to understand how it works. Maven uses repositories. Repositories contain plugins for many well-known libraries/projects. A plugin includes the project configuration information, <kbd class="calibre13">.jar</kbd> files required to use this project in your own project, and any other supporting artifacts. The default Maven repository is a collection of plugins. You can find the list of plugins in the default Maven repository at <a href="http://maven.apache.org/plugins/index.html" class="calibre9"><span>http://maven.apache.org/plugins/index.html</span></a>. You can also browse the content of the Maven repository at <a href="http://search.maven.org/#browse" class="calibre9"><span>http://search.maven.org/#browse</span></a>. Maven also maintains a local repository on your machine. This local repository contains only those plugins that your projects have specified dependencies on. On Windows, you will find the local repository at <kbd class="calibre13">C:/Users /&lt;username&gt;.m2</kbd>, and on macOS X, it is located at <kbd class="calibre13">~/.m2</kbd>.</p>
<p class="calibre3">You define plugins on which your project depends in the <kbd class="calibre13">dependencies</kbd> section of <kbd class="calibre13">pom.xml</kbd> (we will see the structure of <kbd class="calibre13">pom.xml</kbd> shortly when we create a Maven project). For example, we can specify a dependency on JSF. When you run the Maven tool, it first inspects all dependencies in <kbd class="calibre13">pom.xml</kbd>. It then checks whether the dependent plugins with the required versions are already downloaded in the local repository. If not, it downloads them from the central (remote) repository. You can also specify repositories to look in. If you do not specify any repository, then dependencies are searched in the central Maven repository.</p>
<p class="calibre3">We will create a Maven project and explore <kbd class="calibre13">pom.xml</kbd> in more detail. However, if you are curious to know what <kbd class="calibre13">pom.xml</kbd> is, then visit <a href="http://maven.apache.org/pom.html#What_is_the_POM" class="calibre9"><span>http://maven.apache.org/pom.html#What_is_the_POM</span></a>.</p>
<p class="calibre3">Eclipse JEE version has Maven built-in, so you don't need to download it. However, if you plan to use Maven from outside Eclipse, then download it from <a href="http://maven.apache.org/download.cgi" class="calibre9"><span>http://maven.apache.org/download.cgi</span></a>. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Maven views and preferences in Eclipse JEE</h1>
                
            
            <article>
                
<p class="calibre3">Before we create a Maven project, let's explore the views and preferences specific to Maven in Eclipse:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Select the <span>Window</span> | <span>Show </span><span>View</span> | <span>Other...</span> menu.</li>
</ol>
<ol start="2" class="calibre14">
<li value="2" class="calibre11">Type <kbd class="calibre13">Maven</kbd> in the filter box. You will see two views for <span>Maven</span>:</li>
</ol>
<div class="mce-root1"><img src="../images/00045.jpeg" class="calibre63"/></div>
<div class="packt_figure1">Figure 2.25: Maven views</div>
<ol start="3" class="calibre14">
<li value="3" class="calibre11">Select <span>Maven Repositories</span> view and click <span>OK</span>. This view is opened in the bottom tab window of Eclipse. You can see the location of the local and remote repositories.</li>
<li value="4" class="calibre11">Right-click on a global repository to see the options to index the repository:</li>
</ol>
<div class="mce-root1"><img src="../images/00046.jpeg" class="calibre64"/></div>
<div class="packt_figure1">Figure 2.26: The Maven Repositories view</div>
<ol start="5" class="calibre14">
<li value="5" class="calibre11">Open Eclipse <span>Preferences</span> and type <kbd class="calibre13">Maven</kbd> in the filter box to see all the Maven preferences:</li>
</ol>
<div class="mce-root1"><img src="../images/00047.jpeg" class="calibre65"/></div>
<div class="packt_figure1">Figure 2.27: Maven preferences</div>
<p class="mce-root2">You should set the Maven preferences to refresh repository indexes on startup, so that the latest libraries are available when you add dependencies to your project (we will learn how to add dependencies shortly).</p>
<ol start="6" class="calibre14">
<li value="6" class="calibre11">Click on the <span>Maven</span> node in <span>Preferences</span> and set the following options:</li>
</ol>
<div class="mce-root1"><img src="../images/00048.jpeg" class="calibre66"/></div>
<div class="packt_figure1">Figure 2.28: Maven preferences for updating indexes on startup</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating a Maven project</h1>
                
            
            <article>
                
<p class="calibre3">In the following steps, we will see how to create a Maven project in Eclipse:</p>
<ol class="calibre14">
<li value="1" class="calibre11">Select the <span>New</span> | <span>Maven Project</span> menu:</li>
</ol>
<div class="mce-root1"><img src="../images/00049.jpeg" class="calibre67"/></div>
<div class="packt_figure1">Figure 2.29: Maven New Project wizard</div>
<ol start="2" class="calibre14">
<li value="2" class="calibre11">Accept all default options and click <span>Next</span>. Type <kbd class="calibre13">webapp</kbd> in the filter box and select <span>maven-archetype-webapp</span>:</li>
</ol>
<div class="mce-root1"><img src="../images/00050.jpeg" class="calibre68"/></div>
<div class="packt_figure1">Figure 2.30: N<span>ew </span>Maven project - select archetype</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Maven archetype</h1>
                
            
            <article>
                
<p class="calibre3">We selected <span class="calibre12">maven-archetype-webapp</span> in the preceding wizard. An archetype is a project template. When you use an archetype for your project, all the dependencies and other Maven project configurations defined in the template (archetype) are imported into your project.</p>
<div class="packt_tip"><br class="calibre26"/>
See more information about Maven archetype at <a href="http://maven.apache.org/guides/introduction/introduction-to-archetypes.html" class="calibre17"><span class="calibre23">http://maven.apache.org/guides/introduction/introduction-to-archetypes.html</span></a>.</div>
<ol class="calibre14">
<li value="1" class="calibre11">Continuing with the <span>New Maven Project</span> wizard, click on <span>Next</span>. In the <span>Group Id</span> field, enter <kbd class="calibre13">packt.book.jee_eclipse</kbd>. In the <span>Artifact Id</span> field, enter <kbd class="calibre13">maven_jsf_web_app</kbd>:</li>
</ol>
<div class="mce-root1"><img src="../images/00051.jpeg" class="calibre69"/></div>
<div class="packt_figure1">Figure 2.31: New Maven project - archetype parameters</div>
<ol start="2" class="calibre14">
<li value="2" class="calibre11">Click on <span>Finish</span>. A <kbd class="calibre13">maven_jsf_web_app</kbd> project is added in <span>Project Explorer</span>.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Exploring the POM</h1>
                
            
            <article>
                
<p class="calibre3">Open <kbd class="calibre13">pom.xml</kbd> in the editor and go to the <span class="calibre12">pom.xml</span> tab. The file should have the following content:</p>
<pre class="calibre25">&lt;project   
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 <br class="title-page-name"/>   http://maven.apache.org/maven-v4_0_0.xsd"&gt; 
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; 
  &lt;groupId&gt;packt.book.jee_eclipse&lt;/groupId&gt; 
  &lt;artifactId&gt;maven_jsf_web_app&lt;/artifactId&gt; 
  &lt;packaging&gt;war&lt;/packaging&gt; 
  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; 
  &lt;name&gt;maven_jsf_web_app Maven Webapp&lt;/name&gt; 
  &lt;url&gt;http://maven.apache.org&lt;/url&gt; 
  &lt;dependencies&gt; 
    &lt;dependency&gt; 
      &lt;groupId&gt;junit&lt;/groupId&gt; 
      &lt;artifactId&gt;junit&lt;/artifactId&gt; 
      &lt;version&gt;3.8.1&lt;/version&gt; 
      &lt;scope&gt;test&lt;/scope&gt; 
    &lt;/dependency&gt; 
  &lt;/dependencies&gt; 
  &lt;build&gt; 
    &lt;finalName&gt;maven_jsf_web_app&lt;/finalName&gt; 
  &lt;/build&gt; 
&lt;/project&gt; </pre>
<p class="calibre3">Let's have a look at the different tags in detail, that are used in the preceding code snippet:</p>
<ul class="calibre10">
<li class="calibre11"><kbd class="calibre13">modelVersion</kbd>: This in the <kbd class="calibre13">pom.xml</kbd> file is the version of Maven.</li>
<li class="calibre11"><kbd class="calibre13">groupId</kbd>: This is the common ID used in the business unit or organization under which projects are grouped together. Although it is not necessary to use the package structure format for group ID, it is generally used.</li>
<li class="calibre11"><kbd class="calibre13">artifactId</kbd>: This is the project name.</li>
<li class="calibre11"><kbd class="calibre13">version</kbd>: This is version number of the project. Version numbers are important when specifying dependencies. You can have multiple versions of a project, and you can specify different version dependencies in different projects. Maven also appends the version number to JAR, WAR, or EAR files that it creates for the project.</li>
<li class="calibre11"><kbd class="calibre13">packaging</kbd>: This tells Maven what kind of final output we want when the project is built. In this book, we will be using JAR, WAR, and EAR packaging types, although more types exist.</li>
<li class="calibre11"><kbd class="calibre13">name</kbd>: This is actually the name of the project, but Eclipse shows <kbd class="calibre13">artifactid</kbd> as the project name in <span>Project Explorer</span>.</li>
<li class="calibre11"><kbd class="calibre13">url</kbd>: This is the URL of your project if you are hosting the project information on the web. The default is Maven's URL.</li>
<li class="calibre11"><kbd class="calibre13">dependencies</kbd>: This section is where we specify the libraries (or other Maven artifacts) that the project depends on. The archetype that we selected for this project has added the default dependency of JUnit to our project. We will learn more about JUnit in <a href="part0108.html#36VSO0-d43a3a5ee6dd4ebc9d7c7e1cc8d7df55" class="calibre9"><span>Chapter 5</span></a>, <em class="calibre2">Unit Testing</em>.</li>
<li class="calibre11"><kbd class="calibre13">finalName</kbd>: This tag in the <kbd class="calibre13">build</kbd> tag indicates the name of the output file (JAR, WAR, or EAR) that Maven generates for your project.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Adding Maven dependencies</h1>
                
            
            <article>
                
<p class="calibre3">The archetype that we selected for the project does not include some of the dependencies required for a JEE web project. Therefore, you might see error markers in <kbd class="calibre13">index.jsp</kbd>. We will fix this by adding dependencies for the JEE libraries:</p>
<ol class="calibre14">
<li value="1" class="calibre11">With <kbd class="calibre13">pom.xml</kbd> open in the editor, click on the <span>Dependencies</span> tab.</li>
<li value="2" class="calibre11">Click the <span>Add</span> button. This opens the <span>Select Dependency</span> dialog.</li>
<li value="3" class="calibre11">In the filter box, type <kbd class="calibre13">javax.servlet</kbd> (we want to use servlet APIs in the project).</li>
</ol>
<ol start="4" class="calibre14">
<li value="4" class="calibre11">Select the latest version of the API and click the <span>OK</span> button.</li>
</ol>
<div class="mce-root1"><img src="../images/00052.jpeg" class="calibre70"/></div>
<div class="packt_figure1">Figure 2.32: Adding servlet API dependency</div>
<p class="cdpaligncenter">However, we need JAR files for servlet APIs only at the compile time; at runtime, these APIs are provided by Tomcat. We can indicate this by specifying the scope of the dependency; in this case, setting it to provided, which tells Maven to evaluate this dependency for compilation only and not to package it in the WAR file. See <a href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" class="calibre9">http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html</a> for more information on dependency scopes.</p>
<ol start="5" class="calibre14">
<li value="5" class="calibre11">To set scope of the dependency, select dependency from the <span>Dependencies</span> tab of the POM editor.</li>
<li value="6" class="calibre11">Click the <span>Properties</span> button. Then, select the <span>provided</span> scope from the drop-down list:</li>
</ol>
<div class="mce-root1"><img src="../images/00053.jpeg" class="calibre71"/></div>
<div class="packt_figure1">Figure 2.33: Setting the Maven dependency scope</div>
<ol start="7" class="calibre14">
<li value="7" class="calibre11">Now we need to add dependencies for JSF APIs and their implementation. Click the <span>Add</span> button again and type <kbd class="calibre13">jsf</kbd> in the search box.</li>
</ol>
<ol start="8" class="calibre14">
<li value="8" class="calibre11">From the list, select <strong class="calibre1"><kbd class="calibre13">jsf-api</kbd></strong> with <span>Group Id </span><strong class="calibre1"><kbd class="calibre13">com.sun.faces</kbd></strong> and click the <span>OK</span> button:</li>
</ol>
<div class="mce-root1"><img src="../images/00054.jpeg" class="calibre72"/></div>
<div class="packt_figref">Figure 2.34: Adding Maven dependencies for JSF</div>
<ol start="9" class="calibre14">
<li value="9" class="calibre11">Similarly, add a dependency for <kbd class="calibre13">jsf-impl</kbd> <span>with</span> <span>Group Id </span><kbd class="calibre13">com.sun.faces</kbd><span>. </span>The dependencies section in your <kbd class="calibre13">pom.xml</kbd> <span><span>should look as follows:<br class="title-page-name"/></span></span></li>
</ol>
<pre class="calibre35">&lt;dependencies&gt; 
    &lt;dependency&gt; 
      &lt;groupId&gt;junit&lt;/groupId&gt; 
      &lt;artifactId&gt;junit&lt;/artifactId&gt; 
      &lt;version&gt;3.8.1&lt;/version&gt; 
      &lt;scope&gt;test&lt;/scope&gt; 
    &lt;/dependency&gt; 
    &lt;dependency&gt; 
      &lt;groupId&gt;javax.servlet&lt;/groupId&gt; 
      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; 
      &lt;version&gt;3.1.0&lt;/version&gt; 
      &lt;scope&gt;provided&lt;/scope&gt; 
    &lt;/dependency&gt; 
    &lt;dependency&gt; 
      &lt;groupId&gt;com.sun.faces&lt;/groupId&gt; 
      &lt;artifactId&gt;jsf-api&lt;/artifactId&gt; 
      &lt;version&gt;2.2.16&lt;/version&gt; 
      &lt;/dependency&gt; 
    &lt;dependency&gt; 
      &lt;groupId&gt;com.sun.faces&lt;/groupId&gt; 
      &lt;artifactId&gt;jsf-impl&lt;/artifactId&gt; 
      &lt;version&gt;2.2.16&lt;/version&gt; 
    &lt;/dependency&gt; 
  &lt;/dependencies&gt; <br class="title-page-name"/><br class="title-page-name"/></pre>
<div class="packt_tip"><br class="calibre26"/>
If Tomcat throws an exception for not finding <kbd class="calibre48">javax.faces.webapp.FacesServlet<br class="calibre26"/></kbd> then you may have to download <kbd class="calibre48">jsf-api-2.2.16.jar</kbd> (<a href="http://central.maven.org/maven2/com/sun/faces/jsf-api/2.2.16/jsf-api-2.2.16.jar" class="calibre17">http://central.maven.org/maven2/com/sun/faces/jsf-impl/2.2.16/jsf-impl-2.2.16.jar</a>) and <kbd class="calibre48">jsf-impl-2.2.16.jar</kbd> (<a href="http://central.maven.org/maven2/com/sun/faces/jsf-impl/2.2.16/jsf-impl-2.2.16.jar" class="calibre17">http://central.maven.org/maven2/com/sun/faces/jsf-impl/2.2.16/jsf-impl-2.2.16.jar</a>) and copy them to the <kbd class="calibre48">&lt;tomcat-install-folder&gt;/lib</kbd> folder.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Maven project structure</h1>
                
            
            <article>
                
<p class="calibre3">The Maven project wizard creates <kbd class="calibre13">src</kbd> and <kbd class="calibre13">target</kbd> folders under the main project folder. As the name suggests, all source files go under <kbd class="calibre13">src</kbd>. However, Java package structure starts under the <kbd class="calibre13">main</kbd> folder. By convention, Maven expects Java source files under the <kbd class="calibre13">java</kbd> folder. Therefore, create a <kbd class="calibre13">java</kbd> folder under <kbd class="calibre13">src/main</kbd>. The Java package structure starts from the <kbd class="calibre13">java</kbd> folder, that is, <kbd class="calibre13">src/main/java/&lt;java-packages&gt;</kbd>. Web content such as HTML, JS, CSS, and JSP goes in the <kbd class="calibre13">webapp</kbd> folder under <kbd class="calibre13">src/main</kbd>. Compiled classes and other output files generated by the Maven build process are stored in the <kbd class="calibre13">target</kbd> folder:</p>
<div class="mce-root1"><img src="../images/00055.jpeg" class="calibre73"/></div>
<div class="packt_figure1">Figure 2.35: Maven web application project structure</div>
<p class="calibre3">The source code for our login JSF page is the same as in the previous example of <kbd class="calibre13">LoginJSFApp</kbd>. Therefore, copy the <kbd class="calibre13">packt</kbd> folder from the <kbd class="calibre13">src</kbd> folder of that project to the <kbd class="calibre13">src/main/java</kbd> folder of this Maven project. This adds <kbd class="calibre13">LoginBean.java</kbd> to the project. Then, copy <kbd class="calibre13">web.xml</kbd> from the <kbd class="calibre13">WEB-INF</kbd> folder to the <kbd class="calibre13">src/main/webapp/WEB-INF</kbd> folder of this project. Copy <kbd class="calibre13">index.xhtml</kbd> and <kbd class="calibre13">welcome.xhtml</kbd> to the <kbd class="calibre13">src/main/webapp</kbd> folder:</p>
<div class="mce-root1"><img src="../images/00056.jpeg" class="calibre74"/></div>
<div class="packt_figure1">Figure 2.36: Project structure after adding source files</div>
<p class="calibre3">No change is required in the source code. To run the application, right-click on <kbd class="calibre13">index.xhtml</kbd> and select <span class="calibre12">Run As</span> | <span class="calibre12">Run on Server</span>.</p>
<p class="calibre3">We will be using Maven for project management in the rest of this book.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating a WAR file using Maven</h1>
                
            
            <article>
                
<p class="calibre3">In a previous example, we created the WAR file using the <span class="calibre12">Export</span> option of Eclipse. In a Maven project you can create a WAR by invoking the <span class="calibre12">Maven Install</span> plugin. Right-click on the project and select the <span class="calibre12">Run As</span> | <span class="calibre12">Maven install</span> option. The WAR file is created in the <kbd class="calibre13">target</kbd> folder. You can then deploy the WAR file in Tomcat by copying it to the <kbd class="calibre13">webapps</kbd> folder of Tomcat.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre3">In this chapter, we learned how to configure Tomcat in Eclipse. We learned how the same web page can be implemented using three different technologies, namely JSP, Servlet, and JSF. All of them can be used for developing any dynamic web application. However, JSP and JSF are better suited for more UI-intensive pages, and servlets are better suited for controllers and as endpoints for web services and WebSockets. JSF enforces the MVC design and provides many additional services compared to JSP.</p>
<p class="calibre3">We also learned how to use Maven for many project management tasks.</p>
<p class="calibre3">In the next chapter, we will learn how to configure and use source control management systems, particularly SVN and Git.</p>


            </article>

            
        </section>
    </body></html>