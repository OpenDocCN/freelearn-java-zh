<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Building Modular Applications with Java 9</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In the last chapter, we <span class="calibre7">covered changes in Java 9 with regards to variable handlers and how they related to th</span>e AtoMiC Toolkit. W<span class="calibre7">e also covered depreciation warnings and why they are now suppressed under specific circumstances. Five enhancements to changes introduced with Java 7 as part of <em class="calibre20">Project Coin</em> were also reviewed. Finally, we explored the improvements to import statement processing.</span></p>
<p class="mce-root"><span class="calibre7">In this chapter, we will examine the structure of a Java module as specified by <em class="calibre20">Project Jigsaw</em>. We will take a deep-dive into how <em class="calibre20">Project Jigsaw</em> is implemented as part of the Java platform. We will also review key internal changes to the Java platform as they relate to the modular system.</span></p>
<p class="mce-root">The topics we will cover here are:</p>
<ul class="calibre13">
<li class="calibre14">An introduction to Java modularity</li>
<li class="calibre14">Review of the Java platform's module system</li>
<li class="calibre14">Modularizing JDK source code</li>
<li class="calibre14">Modular runtime images</li>
<li class="calibre14">Getting to know the module system</li>
<li class="calibre14">Modular Java application packaging</li>
<li class="calibre14">The Java linker</li>
<li class="calibre14">Encapsulation of internal APIs</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">A modular primer</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Before we dive into the Java 9 enhancements in this chapter, let's examine what modularity is in the context of Java.</p>
<p class="mce-root">We can define the term <strong class="calibre8">modular</strong> as a type of design or construction, in our context, of computer software. This type of software design involves a set of modules that collectively comprise the whole. A house, for example, can be built as a single structure or in a modular fashion where each room is constructed independently and joined to create a home. With this analogy, you could selectively add or not add modules in the creation of your home. The collection of modules, in our analogy, becomes the design of your home. Your design does not need to use every module, only the ones you want. So, for example, if there are basement and bonus room modules and your design does not include those modular rooms, those modules are not used to build your home. The alternative would be that every home would include every room, not just the ones that are used. This, of course, would be wasteful. Let's see how that correlates to software.</p>
<p class="mce-root">This concept can be applied to computer architecture and software systems. Our systems can be comprised of several components instead of one behemoth system. As you can likely imagine, this provides us with some specific benefits:</p>
<ul class="calibre13">
<li class="calibre14">We should be able to scale our Java applications to run on small devices</li>
<li class="calibre14">Our Java applications will be smaller</li>
<li class="calibre14">Our modular code can be more targeted</li>
<li class="calibre14">Increased use of the object-oriented programming model</li>
<li class="calibre14">Additional opportunities for encapsulation</li>
<li class="calibre14">Our code will be more efficient</li>
<li class="calibre14">Java applications will have increased performance</li>
<li class="calibre14">Overall system complexity is reduced</li>
<li class="calibre14">Testing and debugging is easier</li>
<li class="calibre14">Code maintenance is easier</li>
</ul>
<p class="mce-root">The shift to a modular system for Java was necessary for several reasons. Here are the primary conditions of the Java platform as of Java 9 that led to the creation of the module system for the Java 9 platform:</p>
<ul class="calibre13">
<li class="calibre14">The <strong class="calibre3">Java Development Kit</strong> (<strong class="calibre3">JDK</strong>) was simply too big. This made it difficult to support small devices. Even with the compact profiles discussed in the next section, supporting some small devices was difficult at best and, in some cases, not possible.</li>
<li class="calibre14">Due to the over-sized JDK, it was difficult to support truly optimized performance with our Java applications. In this case, smaller is better.</li>
<li class="calibre14">The <strong class="calibre3">Java Runtime Environment</strong> (<strong class="calibre3">JRE</strong>) was too large to efficiently test and maintain our Java applications. This results in time consuming, inefficient testing, and maintenance operations.</li>
<li class="calibre14">The <strong class="calibre3">Java Archive</strong> (<strong class="calibre3">JAR</strong>) files were also too large. This made supporting small devices problematic.</li>
<li class="calibre14">Because the JDK and JRE were all encompassing, security was of great concern. Internal APIs, for example, that were not used by the Java application, were still available due to the nature of the public access modifier.</li>
<li class="calibre14">Finally, our Java applications were unnecessarily large.</li>
</ul>
<p class="mce-root">Modular systems have the following requirements:</p>
<ul class="calibre13">
<li class="calibre14">There must be a common interface to permit interoperability among all connected modules</li>
<li class="calibre14">Isolated and connected testing must be supported</li>
<li class="calibre14">Compile time operations must be able to identify which modules are in use</li>
<li class="calibre14">Runtime support for modules</li>
</ul>
<p class="mce-root">A module is a new concept and component in Java 9; it is a named collection of data and code. Specifically, modules are a collection of:</p>
<ul class="calibre13">
<li class="calibre14">Packages</li>
<li class="calibre14">Classes</li>
<li class="calibre14">Interfaces</li>
<li class="calibre14">Code</li>
<li class="calibre14">Data</li>
<li class="calibre14">Resources</li>
</ul>
<p class="mce-root">Key to successful implementation, a module in Java 9 is self-described in its modular declaration. Module names must be unique and typically use the reverse domain name schema. Here is an example declaration:</p>
<pre class="calibre21">    module com.three19.irisScan { }</pre>
<p class="mce-root">Module declarations are contained in a <kbd class="calibre16">module-info.java</kbd> file that should be in the module's root folder. As one might expect, this file is compiled into a <kbd class="calibre16">module-info.class</kbd> file and will be placed in the appropriate output directory. These output directories are established in the module source code.</p>
<p class="mce-root">In the next sections, we will look at specific changes for Java 9 in regards to modularity.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Reviewing Java's platform module system [JEP-200]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The core aim of JEP-200 was to modularize the <strong class="calibre8">Java Development Kit</strong> (<strong class="calibre8">JDK</strong>) using the <strong class="calibre8">Java Platform Module System</strong> (<strong class="calibre8">JPMS</strong>). Prior to Java 9, our familiarity with the JDK includes awareness of its major components:</p>
<ul class="calibre13">
<li class="calibre14">Java runtime environment (JRE)</li>
<li class="calibre14">The interpreter (java)</li>
<li class="calibre14">Compiler (javac)</li>
<li class="calibre14">The archiver (jar)</li>
<li class="calibre14">Document generator (javadoc)</li>
</ul>
<p class="mce-root">The task of modularizing the JDK was to break it into components that could be combined at compile time or runtime. The modular structure is based on the following modular profiles established as compact profiles in Java 8. Each of the three profiles is detailed in the following tables:</p>
<p class="mce-root"><strong class="calibre8">Compact profile 1</strong>:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.io</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.lang.annotation</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.lang.invoke</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.lang.ref</kbd></td>
<td class="calibre33"><kbd class="calibre16">lava.lang.reflect</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.math</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.net</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.nio</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.nio.channels</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.nio.channels.spi</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.nio.charset</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.nio.charset.spi</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.nio.file</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.nio.file.attribute</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.nio.file.spi</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.security</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.security.cert</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.security.interfaces</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.security.spec</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.text</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.text.spi</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.time</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.time.chrono</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.time.format</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.time.temporal</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.time.zone</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.util</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.util.concurrent</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.util.concurrent.atomic</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.util.concurrent.locks</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.util.function</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.util.jar</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.util.logging</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.util.regex</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.util.spi</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.util.stream</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.util.zip</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.crypto</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.crypto.interfaces</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.crypto.spec</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.net</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.net.ssl</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.script</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.security.auth</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.security.auth.callback</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.security.auth.login</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.security.auth.spi</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.security.auth.spi</kbd></td>
</tr>
<tr class="calibre41">
<td class="calibre33"><kbd class="calibre16">javax.security.auth.x500</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.security.cert</kbd></td>
<td class="calibre33"/>
</tr>
</tbody>
</table>
<p class="mce-root"> </p>
<p class="mce-root"><strong class="calibre8">Compact profile 2</strong>:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.rmi</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.rmi.activation</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.rmi.dgc</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.rmi.registry</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.rmi.server</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.sql</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.rmi.ssl</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.sql</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.transaction</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.transaction.xa</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.database</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.xml.namespace</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.parsers</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.stream</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.xml.stream.events</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.stream.util</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.transform</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.xml.transform.dom</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.transform.sax</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.transform.stax</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.xml.transform.stream</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.validation</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.xpath</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">org.w3c.dom</kbd></td>
<td class="calibre33"><kbd class="calibre16">org.w3c.dom.bootstrap</kbd></td>
<td class="calibre33"><kbd class="calibre16">org.w3c.dom.events</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">org.w3c.dom.ls</kbd></td>
<td class="calibre33"><kbd class="calibre16">org.xml.sax</kbd></td>
<td class="calibre33"><kbd class="calibre16">org.xml.sax.ext</kbd></td>
</tr>
<tr class="calibre41">
<td class="calibre33"><kbd class="calibre16">org.xml.sax.helpers</kbd></td>
<td class="calibre33"/>
<td class="calibre33"/>
</tr>
</tbody>
</table>
<p class="mce-root"><strong class="calibre8">Compact profile 3</strong>:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">java.lang.instrument</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.lang.management</kbd></td>
<td class="calibre33"><kbd class="calibre16">java.security.acl</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">java.util.prefs</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.annotation.processing</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.lang.model</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.lang.model.element</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.lang.model.type</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.lang.model.util</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.management</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.management.loading</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.management.modelmbean</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.management.monitor</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.management.openmbean</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.management.relation</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.management.remote</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.management.remote.rmi</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.management.timer</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.naming</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.naming.directory</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.naming.event</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.naming.ldap</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.naming.spi</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.security.auth.kerberos</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.security.sasl</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.sql.rowset</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.sql.rowset.serial</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">javax.sql.rowest.spi</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.tools</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.crypto</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">javax.xml.crypto.dom</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.crypto.dsig</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.crypto.dsig.dom</kbd></td>
</tr>
<tr class="calibre35">
<td class="calibre33"><kbd class="calibre16">javax.xml.crypto.dsig.keyinfo</kbd></td>
<td class="calibre33"><kbd class="calibre16">javax.xml.crypto.dsig.spec</kbd></td>
<td class="calibre33"><kbd class="calibre16">org.ieft.jgss</kbd></td>
</tr>
</tbody>
</table>
<p class="mce-root"> </p>
<p class="mce-root">The three compact module profiles represent the basis for the standardized modular system in Java 9. The effectiveness of this standardization relies on the following six principles:</p>
<ul class="calibre13">
<li class="calibre14">All JCP-governed modules must start with the string <kbd class="calibre16">java.</kbd>. So, if a module on spatial utilities was being developed it would have a name such as <kbd class="calibre16">java.spatial.util</kbd>.</li>
</ul>
<div class="packt_infobox"><strong class="calibre3">JCP</strong> refers to the <strong class="calibre3">Java Community Process</strong>. JCP allows developers to create technical specifications for Java. You can learn more about JCP and become a member at the official JCP website--<a href="http://www.jcp.org" class="calibre25 pcalibre pcalibre3 pcalibre2 pcalibre1">http://www.jcp.org</a>.</div>
<ul class="calibre13">
<li class="calibre14">Non-JCP modules are considered part of the JDK and their names must start with the string <kbd class="calibre16">jdk.</kbd>.</li>
<li class="calibre14">Ensure method invocation chaining works properly. This is best illustrated with the following flowchart:</li>
</ul>
<div class="mce-root1"><img src="Images/88848edf-300b-4222-920c-d507982fd6a8.png" class="calibre42"/></div>
<div class="packt_infobox">As you can see in the preceding flowchart, it only applies to modules that export a package.</div>
<ul class="calibre13">
<li class="calibre14">The fourth principle deals with both standard and non-standard API packages being used in a standard module. The following flowchart illustrates the implementation of this principle's covenants:</li>
</ul>
<div class="mce-root1"><img src="Images/725694d1-88e1-4bc1-8295-e3b852a7c67c.png" class="calibre43"/></div>
<ul class="calibre13">
<li class="calibre14">The fifth design principle is that standard modules can be dependent upon more than one non-standard module. While this dependency is permitted, implied readability access to non-standard modules is not.</li>
<li class="calibre14">The final design principle ensures non-standard modules do not export standard API packages.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Modularizing JDK source code [JEP-201]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">As previously mentioned, Project Jigsaw had the goal of modularization. The envisioned standard modular system would be applied to the Java SE platform and the JDK. In addition to efficiency gains, the modular shift would result in better security and ease maintainability. The enhancement detailed in JEP-201 focused on JDK source code reorganization. Let's take a closer look.</p>
<p class="mce-root">Reorganizing the JDK's source code is a significant task and was accomplished with the following subset of goals:</p>
<ul class="calibre13">
<li class="calibre14">Provide JDK developers insights and familiarity with the new Java 9 modular system. So, this goal was aimed at developers of the JDK, not mainstream developers.</li>
<li class="calibre14">Ensure modular boundaries are established and maintained throughout the JDK build process. This was a necessary precaution so the modular system would be stable throughout Java 9's enhancements and, more specifically, in implementing the modular system.</li>
<li class="calibre14">The third goal was to ensure future enhancements, specifically with <em class="calibre22">Project Jigsaw</em>, could be easily integrated into the new modular system.</li>
</ul>
<p class="mce-root">The significance of this source code reorganization cannot be overstated. The pre-Java 9 source code organization is 20 years old. This overdue JDK source code reorganization will make the code much easier to maintain. Let's look at the previous organization of the JDK source code and then examine the changes.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Pre-Java 9 JDK source code organization</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JDK is a compilation of code files, tools, libraries, and more. The following illustration provides an overview of the JDK components:</p>
<div class="mce-root1"><img src="Images/64a9f5ea-6310-4974-9517-b2b66c1ea67e.png" width="796" height="927" class="calibre44"/></div>
<p class="mce-root">The pre-Java 9 organization of the JDK components in the preceding illustration are detailed in the next seven subsections.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Development tools</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The development tools are located in the <kbd class="calibre16">bin</kbd> directory. These tools include seven broad categorizations, each detailed in the subsequent sections.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Deployment</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">This is a set of tools intended to help deploy Java applications:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">appletviewer</kbd>: This tool gives you the ability to run and debug Java applets without the need for a web browser.</li>
<li class="calibre14"><kbd class="calibre16">extcheck</kbd>: This tool allows you to find conflicts in JAR files.</li>
<li class="calibre14"><kbd class="calibre16">jar</kbd>: This tool is used for creating and manipulating JAR files. JAR files are Java Archive files.</li>
<li class="calibre14"><kbd class="calibre16">java</kbd>: This is the Java application launcher.</li>
<li class="calibre14"><kbd class="calibre16">javac</kbd>: This is the Java Compiler.</li>
<li class="calibre14"><kbd class="calibre16">javadoc</kbd>: This tool generates API documentation.</li>
<li class="calibre14"><kbd class="calibre16">javah</kbd>: This tool allows you to write native methods; it generates C header files.</li>
<li class="calibre14"><kbd class="calibre16">javap</kbd>: This tool disassembles class files.</li>
<li class="calibre14"><kbd class="calibre16">javapackager</kbd>: For signing and packaging Java applications, including JavaFX.</li>
<li class="calibre14"><kbd class="calibre16">jdb</kbd>: This is the Java debugger.</li>
<li class="calibre14"><kbd class="calibre16">jdeps</kbd>: This is an analyzer for Java class dependencies.</li>
<li class="calibre14"><kbd class="calibre16">pack200</kbd>: This is a tool that compresses JAR files into <kbd class="calibre16">pack200</kbd> files. The compression ratio using this tool is impressive.</li>
<li class="calibre14"><kbd class="calibre16">unpack200</kbd>: This tool unpacks <kbd class="calibre16">pack200</kbd> files resulting in JAR files.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Internationalization</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">If you are interested in creating localizable applications, the following tool might come in handy:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">native2ascii</kbd>: This tool creates Unicode Latin-1 from normal text.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Monitoring</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Monitoring tools used for providing JVM performance data include:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">jps</kbd>: This is the <strong class="calibre3">JVM process status tool</strong> (<strong class="calibre3">jps</strong>). It provides a list of HotSpot JVMs on a specific system.</li>
<li class="calibre14"><kbd class="calibre16">jstat</kbd>: This is the JVM statistics monitoring tool. It collects log data and performance information from a machine with a HotSpot JVM.</li>
<li class="calibre14"><kbd class="calibre16">jstatd</kbd>: This is the <strong class="calibre3">jstat</strong> daemon tool. It runs an RMI server app for monitoring HotSpot JVM operations.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">RMI</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><strong class="calibre8">RMI</strong> tools are <strong class="calibre8">Remote Method Invocation</strong> tools. They help developers create applications that operate over a network to include the internet:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">rmic</kbd>: This tool can generate stubs and skeletons for objects over a network</li>
<li class="calibre14"><kbd class="calibre16">rmiregistry</kbd>: This is a registry service for remote objects</li>
<li class="calibre14"><kbd class="calibre16">rmid</kbd>: This tool is an activation system daemon for RMI</li>
<li class="calibre14"><kbd class="calibre16">serialver</kbd>: This tool returns the class <kbd class="calibre16">serialVersionUID</kbd> value</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Security</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">This set of security tools empowers developers to create security policies that can be enforced on the developer's computer system as well as on remote systems:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">keytool</kbd>: This tool manages security certificates and keystores</li>
<li class="calibre14"><kbd class="calibre16">jarsigner</kbd>: This tool generates and verifies JAR signatures for creating/opening JAR files</li>
<li class="calibre14"><kbd class="calibre16">policytool</kbd>: This tool has a graphical user interface that helps developers manage their security policy files</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Troubleshooting</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">These experimental troubleshooting tools are useful for very specific troubleshooting. They are experimental and, therefore, not officially supported:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">jinfo</kbd>: This tool provides configuration information for specific processes, files, or servers.</li>
<li class="calibre14"><kbd class="calibre16">jhat</kbd>: This is a heap dump tool. It instantiates a web server so that a heap can be viewed with a browser.</li>
<li class="calibre14"><kbd class="calibre16">jmap</kbd>: This displays heap and shared object memory maps from a process, file, or server.</li>
<li class="calibre14"><kbd class="calibre16">jsadebugd</kbd>: This is Java's Serviceability Agent Debug Daemon. It acts as a debug server for a process or file.</li>
<li class="calibre14"><kbd class="calibre16">jstack</kbd>: This is a Java Stack Trace tool that provides a thread stack trace for a process, file, or server.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Web services</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">This set of tools provides a utility that can be used with <strong class="calibre8">Java Web Start</strong> and other web services:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">javaws</kbd>: This is a command line tool that launches Java Web Start.</li>
<li class="calibre14"><kbd class="calibre16">schemagen</kbd>: This tool generates schemas for Java architecture. These schemas are used for XML binding.</li>
<li class="calibre14"><kbd class="calibre16">wsgen</kbd>: This tool is used for generating JAX-WS artifacts that are portable.</li>
<li class="calibre14"><kbd class="calibre16">wsimport</kbd>: This tool is used for importing portable JAX-WS artifacts.</li>
<li class="calibre14"><kbd class="calibre16">xjc</kbd>: This is the binding compiler that is used for XML binding.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JavaFX tools</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JavaFX tools are located in a few different places including <kbd class="calibre16">bin</kbd>, <kbd class="calibre16">man</kbd>, and <kbd class="calibre16">lib</kbd> directories.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java runtime environment</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <strong class="calibre8">Java runtime environment</strong> (<strong class="calibre8">JRE</strong>) is located in the <kbd class="calibre16">jre</kbd> directory. Key contents include the <strong class="calibre8">Java Virtual Machine</strong> (<strong class="calibre8">JVM</strong>) and class libraries.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Source code</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JDK's source code, pre-Java 9, has the following basic organizational schema:</p>
<pre class="calibre21">    source code / [shared, OS-specific] / [classes / native] / Java API<br class="calibre2"/>     package name / [.file extension]</pre>
<p class="mce-root">Let's look at this a bit closer. After the source code, we have two options. If the code is cross-platform, then it is a shared directory; otherwise, it is operating system specific. For example:</p>
<pre class="calibre45">    src/share/...<br class="calibre2"/>    src/windows/...</pre>
<p class="mce-root">Next, we have the classes directory or a native language directory. For example:</p>
<pre class="calibre45">    src/share/classes/...<br class="calibre2"/>    src/share/classes/java/...</pre>
<p class="mce-root">Next, we have the name of the Java API package followed by the file extension. The file extensions depend on content such as <kbd class="calibre16">.java</kbd>, <kbd class="calibre16">.c</kbd>, and more.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Libraries</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">lib</kbd> directory houses class libraries that are needed by one or more of the development tools in the <kbd class="calibre16">bin</kbd> directory. Here is a list of files in a typical Java 8 <kbd class="calibre16">lib</kbd> directory:</p>
<div class="mce-root1"><img src="Images/e67259d8-c847-4cec-b143-ad635911a3e8.png" width="476" height="484" class="calibre46"/></div>
<p class="mce-root">Reviewing the directory listing does not provide a great level of granular insight. We can list the classes contained in any of the <kbd class="calibre16">.jar</kbd> files with the following command--<kbd class="calibre16">jar tvf fileName.jar</kbd>. As an example, here is the class listing generated from executing <kbd class="calibre16">jar tvf javafx-mx.jar</kbd> at the command line:</p>
<div class="mce-root1"><img src="Images/5ff17c34-02a8-49c6-9f3c-76cf6253473d.png" width="849" height="592" class="calibre47"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">C header files</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">/include</kbd> directory contains C header files. These files primarily support the following:</p>
<ul class="calibre13">
<li class="calibre14"><strong class="calibre3">Java Native Interface</strong> (<strong class="calibre3">JNI</strong>): This is used for native-code programming support. The JNI is used to embed Java native methods and the JVM into native apps.</li>
<li class="calibre14"><strong class="calibre3">JVM Tool Interface</strong> (<strong class="calibre3">JVM TI</strong>): This is used by tools for state inspections and execution control for apps running the JVM.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Database</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Apache Derby relational database is stored in the <kbd class="calibre16">/db</kbd> directory. You can learn more about Java DB at the following sites:</p>
<p class="mce-root"><a href="http://docs.oracle.com/javadb/support/overview.html" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">http://docs.oracle.com/javadb/support/overview.html</a></p>
<p class="mce-root"><a href="http://db.apache.org/derby/manuals/#docs_10.11" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">http://db.apache.org/derby/manuals/#docs_10.11</a></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JDK source code reorganized</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In a previous section, you learned that the pre-Java 9 source code organization schema was as follows:</p>
<pre class="calibre21"><span class="calibre5">    source code / [shared, OS-specific] / [classes / native] / Java API <br class="calibre2"/>     package name / [.file extension]</span></pre>
<p class="mce-root">In Java 9, we have a new modular schema. That schema follows:</p>
<pre class="calibre21"><span class="calibre5">    source code / module / [shared, OS-specific] / [classes / native / <br class="calibre2"/>    configuration] / [ package / include / library ] /<br class="calibre2"/>     [.file extension]</span></pre>
<p class="mce-root">There are a few differences in the new schema, most notably the module name. After the shared or OS-specific directory, there is either the classes directory, the native directory for C or C++ source files, or a configuration directory. This seemingly rudimentary organization schema changes results in a much more maintainable code base.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Understanding modular run-time images [JEP-220]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Java 9's modular system required changes to the runtime images for compatibility. Benefits of these changes include enhancements in the following areas:</p>
<ul class="calibre13">
<li class="calibre14">Maintainability</li>
<li class="calibre14">Performance</li>
<li class="calibre14">Security</li>
</ul>
<p class="mce-root">Core to these changes was a new URI schema used for resource naming. These resources include modules and classes.</p>
<div class="packt_infobox">A <strong class="calibre3">Uniform Resource Identifier</strong> (<strong class="calibre3">URI</strong>) is similar to a <strong class="calibre3">URL</strong> (<strong class="calibre3">Uniform Resource Locator</strong>) in that it identifies the name and location of something. For a URL, that something is a web page; for a URI, it is a resource.</div>
<p class="mce-root">There were five primary goals for JEP-220 and these are detailed in the following sections.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Runtime format adoption</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">A run-time format was created for Java 9, for adoption by stored classes and other resource files. This format is applicable for stored classes and resources under the following circumstances:</p>
<ul class="calibre13">
<li class="calibre14">When the new run-time format has greater efficiencies (time and space) than the pre-Java 9 JAR format.</li>
</ul>
<div class="packt_infobox">A <strong class="calibre3">JAR</strong> file is a <strong class="calibre3">Java ARchieve</strong> file. This is a compressed file format based on the legacy ZIP format.</div>
<ul class="calibre13">
<li class="calibre14">When stored classes and other resources can be individually isolated and loaded.</li>
<li class="calibre14">When JDK and library classes and resources can be stored. This includes app modules as well.</li>
<li class="calibre14">When they are devised in such a way as to promote future enhancements. This requires them to be extensible, documented, and flexible.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Runtime image restructure</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There are two types of runtime images in Java--JDK and JRE. With Java 9, both of these image types were restructured to differentiate between files that can be used and modified by users to internal files that can be used but not modified by developers and their apps.</p>
<p class="mce-root">The JDK build system, prior to Java 9, produces both a JRE and a JDK. The JRE is a complete implementation of the Java platform. The JDK includes the JRE as well as other tools and libraries. A notable change in Java 9 is that the JRE subdirectory is no longer part of the JDK image. This change was made, in part, to ensure both image types (JDK and JRE) have identical image structures. With a common and reorganized structure, future changes will be more efficiently integrated.</p>
<div class="packt_tip">If you created custom plugins prior to Java 9 that address a specific structure, your app might not work in Java 9. This is also true if you are explicitly addressing <kbd class="calibre39">tools.jar</kbd>.</div>
<p class="mce-root">The following diagram provides a high-level view of the contents of each image before Java 9's release:</p>
<div class="mce-root1"><img src="Images/bb499c12-6ba9-4a59-b68e-2745b1118f0f.png" width="1016" height="667" class="calibre48"/></div>
<p class="mce-root">The Java 9 runtime images are illustrated in the following diagram. As shown, a full JDK image contains the same directories as a modular runtime image as well as demo, sample, man, and includes directories:</p>
<div class="mce-root1"><img src="Images/a7a55d59-4214-487a-a0ac-b4868a1d56d8.png" width="1016" height="667" class="calibre49"/></div>
<p class="mce-root">There is no longer a difference between a JRE or JDK image. Now, with Java 9, a JDK image is a JRE image that contains a full set of dev tools.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Supporting common operations</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Developers occasionally must write code that performs operations requiring access to the runtime image. Java 9 includes support for these common operations. This is possible due to the restructuring and standardized JDK and JRE runtime image structures.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">De-privileging JDK classes</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Java 9 allows privilege revocation for individual JDK classes. This change strengthens system security in that it ensures JDK classes only receive the permissions required for system operations.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Preserving existing behaviors</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The final goal of the JEP-220 was to ensure currently existing classes are not negatively impacted. This refers to applications that do not have dependencies on internal JDK or JRE runtime images.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting to know the module system [JEP-261]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The purpose of this JEP was the implementation of the new module system for the Java platform. You will recall that the modular system was created to provide reliable configuration and strong encapsulation for Java programs. Key to this implementation was the concept of link time. As illustrated here, link time is an optional phase in between compile time and runtime. This phase allows the assembly of the appropriate modules into an optimized runtime image. This is possible, in part, due to the jlink linking tool which you will learn more about later in this chapter:</p>
<div class="mce-root1"><img src="Images/e8ef012a-ce1d-41a7-82fb-d632953b5227.png" width="1163" height="503" class="calibre50"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Module paths</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">It is important to organize modules so that they can be easily located. The module path, a sequence of module components or directories, provides the organizational structure used by searches. These path components are searched for in order, returning the first path component that comprises a module.</p>
<p class="mce-root">Modules and their paths should not be considered to be the same as packages or class paths. They are indeed different and have a greater level of fidelity. The key difference is that, with classpaths, a singular component is searched for. Module path searches return complete modules. This type of search is possible by searching the following paths, in the presented order, until a module is returned:</p>
<ul class="calibre13">
<li class="calibre14">Compilation module path</li>
<li class="calibre14">Upgrade module path</li>
<li class="calibre14">System modules</li>
<li class="calibre14">Application module path</li>
</ul>
<p class="mce-root">Let's briefly review each of these paths. The compilation module path is only applicable at compile time and contains the module definitions. The upgrade module path has the compiled module definitions. The system modules are built-in and include Java SE and JDK modules. The final path, the application module path, has the compiled module definitions from the application modules as well as the library modules.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Access-control boundary violations</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">As a professional developer, you always want your code to be secure, portable, and bug-free, which requires strict adherence to Java constructs such as encapsulation. There are occasions, such as with white box testing, that you need to break the encapsulation that the JVM mandates. This mandate permits cross-modular access.</p>
<p class="mce-root">To permit breaking the encapsulation, you can add an <kbd class="calibre16">add-exports</kbd> option in your module declaration. Here is the syntax you will use:</p>
<pre class="calibre21">    module com.three19.irisScan <br class="calibre2"/>    {<br class="calibre2"/>      - - add-exports &lt;source-module&gt;/&lt;package&gt; = &lt;target-module&gt; <br class="calibre2"/>      (, &lt;target-module&gt; )*<br class="calibre2"/>    }</pre>
<p class="mce-root">Let's take a closer look at the preceding syntax. The <kbd class="calibre16">&lt;source-module&gt;</kbd> and <kbd class="calibre16">&lt;target-module&gt;</kbd> are module names and <kbd class="calibre16">&lt;package&gt;</kbd> is the name of the package. Using the <kbd class="calibre16">add-exports</kbd> <span class="calibre7">option permits us to violate access-control boundaries.</span></p>
<p class="mce-root">There are two rules regarding using the add-exports option:</p>
<ul class="calibre13">
<li class="calibre14">It can be used multiple times in a module</li>
<li class="calibre14">Each use must be of a unique pairing of <kbd class="calibre16">&lt;source-module&gt;</kbd> and <kbd class="calibre16">&lt;target-module&gt;</kbd></li>
</ul>
<div class="packt_tip">It is not recommended that the add-exports option be used unless absolutely necessary. Its use permits dangerous access to a library module's internal API. This type of use makes your code dependent on the internal API not changing, which is beyond your control.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Runtime</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The HotSpot virtual machine implements the <kbd class="calibre16">&lt;options&gt;</kbd> for the <kbd class="calibre16">jmod</kbd> and <kbd class="calibre16">jlink</kbd> command-line tools. Here is the list of <kbd class="calibre16">&lt;options&gt;</kbd> for the <kbd class="calibre16">jmod</kbd> command-line tool:</p>
<div class="mce-root1"><img src="Images/686173c7-3215-410b-bfa8-4955f8ff882e.png" class="calibre51"/></div>
<p class="mce-root">Here is the list of <kbd class="calibre16">&lt;options&gt;</kbd> for the <kbd class="calibre16">jlink</kbd> command-line tool:</p>
<div class="mce-root1"><img src="Images/9a73dc6a-c25a-400a-bbcf-ae063d32b324.png" width="725" height="687" class="calibre52"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Modular Java application packaging [JEP-275]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">One of the great improvements in Java 9 is the size of the runtime binaries generated by the <strong class="calibre8">Java Packager</strong>. This is possible in part due to the <strong class="calibre8">Java Linker</strong>, which is covered in the next section. The Java Packager's workflow has essentially remained the same in Java 9 as it was in Java 8. There have been, as you will see later in this section, new tools added to the workflow.</p>
<p class="mce-root">The Java Packager solely creates JDK 9 applications. This change to the Java Packager is intended to streamline and make the process of generating runtime images more efficient. So, the Java Packager will only create runtime images for the SDK version that it is associated with.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Advanced look at the Java Linker</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Prior to the Java Linker tool, <kbd class="calibre16">jlink</kbd>, introduced in Java 9, runtime image creation included copying the entire JRE. Then, unused components are removed. Simply put, <kbd class="calibre16">jlink</kbd> facilitates the creation of runtime images with only the required modules. <kbd class="calibre16">jlink</kbd> is used by the Java Packager to generate an embedded runtime image.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java Packager options</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The syntax for the Java Packager is as follows:</p>
<pre class="calibre21"><strong class="calibre3">    javapackager -command [-options]</strong></pre>
<p class="mce-root">There are five different commands (<kbd class="calibre16">-command</kbd>) that can be used. They are described as follows:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">command</strong></td>
<td class="calibre33"><strong class="calibre3">Description</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">-createbss</kbd></td>
<td class="calibre33">This command is used for converting files from CSS to binary</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">-createjar</kbd></td>
<td class="calibre33">This command, used along with additional parameters, creates a JAR archive file</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">-deploy</kbd></td>
<td class="calibre33">This command is used to generate jnlp and HTML files</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">-makeall</kbd></td>
<td class="calibre33">Combines the <kbd class="calibre16">-createjar</kbd>, <kbd class="calibre16">-deploy</kbd>, and compilation steps</td>
</tr>
<tr class="calibre35">
<td class="calibre33"><kbd class="calibre16">-signJar</kbd></td>
<td class="calibre33">This command creates and signs a JAR file</td>
</tr>
</tbody>
</table>
<p class="mce-root">The <kbd class="calibre16">[-options]</kbd> for the <kbd class="calibre16">-createbss</kbd> command include:</p>
<div class="mce-root1"><img src="Images/de012b83-ea8c-4efd-8f9f-d6dfe9e136d0.png" class="calibre53"/></div>
<p class="mce-root">The <kbd class="calibre16">[-options]</kbd> for the <kbd class="calibre16">-createjar</kbd> command include:</p>
<div class="mce-root1"><img src="Images/6f4976de-0d36-4971-9606-35c6d1381bea.png" class="calibre54"/></div>
<p class="mce-root">The <kbd class="calibre16">[-options]</kbd> for the <kbd class="calibre16">-deploy</kbd> command include:</p>
<div class="mce-root1"><img src="Images/193cd6df-e5fc-4ecb-a4d9-bb5277af0e3f.png" class="calibre55"/></div>
<p class="mce-root">Here are the remaining <kbd class="calibre16">[-options]</kbd> for the <kbd class="calibre16">-deploy</kbd> command:</p>
<div class="mce-root1"><img src="Images/1fc716cf-2bc1-416c-9f32-b0bd9556ad72.png" class="calibre56"/></div>
<p class="mce-root">The <kbd class="calibre16">[-options]</kbd> for the <kbd class="calibre16">-makeall</kbd> command include:</p>
<div class="mce-root1"><img src="Images/68c695e3-8357-4b04-beeb-842591fea01c.png" class="calibre57"/></div>
<p class="mce-root">The <kbd class="calibre16">[-options]</kbd> for the <kbd class="calibre16">-signJar</kbd> include:</p>
<div class="mce-root1"><img src="Images/fba3922c-bf9f-4f7e-82a3-c394846054ae.png" width="649" height="277" class="calibre58"/></div>
<p class="mce-root">The Java Packager is divided into two modules:</p>
<pre class="calibre21">    jdk.packager<br class="calibre2"/>    jdk.packager.services</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JLink - The Java Linker [JEP-282]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java Linker, commonly referred to as JLink, is a tool that was created to create custom runtime images. This tool collects the appropriate modules along with their dependencies, then optimizes them to create the image. This represents a big change for Java, with the release of Java 9. Before the Java Linker tool, <kbd class="calibre16">jlink</kbd>, was available, runtime image creation included initially copying the entire JRE. In a subsequent step, the unused components were removed. In Java 9, <kbd class="calibre16">jlink</kbd> creates runtime images with only the needed modules. <kbd class="calibre16">jlink</kbd> is used by the Java Packager to generate an embedded runtime image.</p>
<p class="mce-root">As illustrated in a previous section, JEP-282 resulted in link time as an optional phase between compile time and runtime. It is in this phase that the appropriate modules are assembled into an optimized runtime image.</p>
<p class="mce-root">JLink is a command-line linking tool that permits the creation of runtime images containing a smaller subset of the JDK modules. This results in smaller runtime images. The following syntax consists of four components--the <kbd class="calibre16">jlink</kbd> command, options, the module path, and the output path:</p>
<pre class="calibre21"><strong class="calibre3">$ jlink &lt;options&gt; ---module-path &lt;modulepath&gt; --output &lt;path&gt;</strong></pre>
<p class="mce-root">Here is a list of the options that can be used with the <kbd class="calibre16">jlink</kbd> tool along with brief descriptions of each:</p>
<div class="mce-root1"><img src="Images/44554514-2deb-468c-9e99-6f4118b42b58.png" class="calibre59"/></div>
<p class="mce-root">The module path tells the linker where to find the modules. The linker will not use exploded modules or JAR/JMOD files.</p>
<p class="mce-root">The output path simply informs the linker where to save the custom run-time image.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Encapsulating most internal APIs [JEP-260]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JEP-260 was implemented to make the Java platform more secure. The core of this JEP's goal was to encapsulate the majority of internal APIs. Specifically, most of the JDK's internal APIs are no longer accessible by default. Currently, internal APIs deemed to be <em class="calibre20">critical</em> and <em class="calibre20">widely-used</em> remain accessible. In the future, we are likely to see functionality to replace them, and at that time, those internal APIs will not be accessible by default.</p>
<p class="mce-root">So, why is this change necessary? There are a few widely-used APIs that are unstable and, in some cases, not standardized. Unsupported APIs should not have access to internal details of the JDK. Therefore, JEP-260 resulted in increased security of the Java platform. Generally speaking, you should not use unsupported APIs in your development projects.</p>
<p class="mce-root">The aforementioned critical APIs (internal to the JDK) are:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">sun.misc</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.misc.Unsafe</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.reflect.Reflection</kbd></li>
<li class="calibre14"><kbd class="calibre16">sun.reflect.ReflectionFactory.newConstrutorForSerialization</kbd></li>
</ul>
<p class="mce-root">The aforementioned critical internal APIs are still accessible in JDK 9. They will be accessible with the <kbd class="calibre16">jdk.unsupported</kbd> JDK module. Full JRE and JDK images will contain the <kbd class="calibre16">jdk.unsupported</kbd> module.</p>
<div class="packt_tip">You can use the Java Dependency Analysis Tool, <kbd class="calibre39">jdeps</kbd>, to help determine if your Java program has any dependencies on JDK internal APIs.</div>
<p class="mce-root"><span class="calibre7">This is an interesting change to watch. It is likely that the currently accessible internal APIs will not be accessible by default when Java 10 is released.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre7">In this chapter, we examined the structure of Java modules as specified by <em class="calibre20">Project Jigsaw</em> and took an in-depth look at how <em class="calibre20">Project Jigsaw</em> was implemented to improve the Java platform. We also reviewed key internal changes to the Java platform as they relate to the modular system. Our review started with a modular primer where we learned about Java 9's modular system in terms of benefits and requirements.</span></p>
<p class="mce-root"><span class="calibre7">We explored how Java 9 introduced modularity to the JDK including its source code and organization of the same. The seven primary tool categories that make up the JDK were also explored. As we learned, modularity in Java 9 also extends to runtime images resulting in more maintainability, better performance, and increased security. The concept of <strong class="calibre8">link time</strong> was introduced as an optional phase between compile-time and runtime. We concluded the chapter with a look at the Java Linker and how Java 9 encapsulates internal APIs.</span></p>
<p class="mce-root">In the next chapter, we will explore how to migrate our existing applications to the Java 9 platform. We will look at both manual and semi-automated migration processes.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  </body></html>