<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">New Tools and Tool Enhancements</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In the previous chapter, we explored Java 9's new stack walker API and learned how it enables Java applications to walk the calling stack. This is a specialized functionality that is not often implemented in Java applications. That being said, the API may be good for some very special cases, such as for functionality that is delivered by a framework. You learned that if you develop framework-supporting application programming and you want code that depends on the caller context, then the stack walker API is for you. We also discovered that the API gives fast and optimized access to the call stack, implementing lazy access to the individual frames.</p>
<p class="mce-root">In this chapter, we will cover 16 <strong class="calibre8">Java Enhancement Proposals</strong> (<strong class="calibre8">JEPs</strong>) that were incorporated into the Java 9 platform. These JEPs cover a wide range of tools and updates to APIs to make developing with Java easier, with greater optimization possibilities for our resulting programs.</p>
<p class="mce-root">Our review of new tools and tool enhancements will include the following:</p>
<ul class="calibre13">
<li class="calibre14">The new HTTP client</li>
<li class="calibre14">Javadoc and the Doclet API</li>
<li class="calibre14">mJRE changes</li>
<li class="calibre14">JavaScript parser</li>
<li class="calibre14">Multi-release JAR files</li>
<li class="calibre14">The Java-level JVM compiler interface</li>
<li class="calibre14">TIFF support</li>
<li class="calibre14">Platform logging</li>
<li class="calibre14">XML Catalogs</li>
<li class="calibre14">Collections</li>
<li class="calibre14">Platform-specific desktop features</li>
<li class="calibre14">Enhanced method handling</li>
<li class="calibre14">Enhanced deprecation</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The new HTTP client [JEP-110]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this section, we will review Java's <strong class="calibre8">Hypertext Transfer Protocol</strong> (<strong class="calibre8">HTTP</strong>) client, starting with a pre-Java 9 look and then diving into the new HTTP client that is part of the Java 9 platform. This approach is needed to support an understanding of the changes made in Java 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The HTTP client before Java 9</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JDK version 1.1 introduced the <kbd class="calibre16">HttpURLConnection</kbd> API that supported HTTP-specific features. This was a robust class that included the fields listed here:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">chunkLength</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">fixedContentLength</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">fixedContentLengthLong</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_ACCEPTED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_BAD_GATEWAY</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_BAD_METHOD</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_BAD_REQUEST</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_CLIENT_TIMEOUT</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_CONFLICT</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_CREATED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_ENTITY_TOO_LARGE</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_FORBIDDEN</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_GONE</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_INTERNAL_ERROR</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_LENGTH_REQUIRED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_MOVED_PERM</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_MOVED_TEMP</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_MULT_CHOICE</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_NO_CONTENT</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_NOT_ACCEPTABLE</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_NOT_AUTHORITATIVE</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_NOT_FOUND</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_NOT_IMPLEMENTED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_NOT_MODIFIED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_OK</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_PARTIAL</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_PAYMENT_REQUIRED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_PRECON_FAILED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_PROXY_AUTH</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_REQ_TOO_LONG</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_RESET</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_SEE_OTHER</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_SERVER_ERROR</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_UNAUTHORIZED</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_UNAVAIABLE</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_UNSUPPORTED_TYPE</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_USE_PROXY</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">HTTP_VERSION</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">instanceFollowRedirects</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">method</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">responseCode</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">responseMessage</span></kbd></li>
</ul>
<p class="mce-root">As you can see from the list of fields, there was a great support for HTTP. In addition to a constructor, there are a plethora of available methods, including the following ones:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">disconnect()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getErrorStream()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getFollowRedirects()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getHeaderField(int n)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getHeaderFieldDate(String name, long Default)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getHeaderFieldKey(int n)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getInstanceFollowRedirects()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getPermission()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getRequestMethod()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getResponseCode()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getResponseMessage()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">setChunkedStreamingMode(int chunklen)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">setFixedLengthStreamingMode(int contentLength)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">setFixedlengthStreamingMode(long contentLength)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">setFollowRedirects(boolean set)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">setInstanceFollowRedircts(boolean followRedirects)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">setRequestMethod(String method)</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">usingProxy()</span></kbd></li>
</ul>
<p class="mce-root">The class methods <span class="calibre7">listed earlier</span> are in addition to the methods inherited from the <kbd class="calibre16">java.net.URLConnection</kbd> class and the <kbd class="calibre16">java.lang.Object</kbd> class.</p>
<p class="mce-root">There were problems with the original HTTP client that made it ripe for updating with the new Java platform. Those problems were as follows:</p>
<ul class="calibre13">
<li class="calibre14">The base <kbd class="calibre16">URLConnection</kbd> API had, defunct protocols such as Gopher and FTP <span class="calibre5">increasingly over the years</span></li>
<li class="calibre14">The <kbd class="calibre16">HttpURLConnection</kbd> API predated HTTP 1.1 and was overly abstract, making it less usable</li>
<li class="calibre14">The HTTP client was woefully under documented, making the API frustrating and difficult to use</li>
<li class="calibre14">The client only functioned on one thread at a time</li>
<li class="calibre14">The API was extremely difficult to maintain due to the above points about it predating HTTP 1.1 and it lacking sufficient documentation</li>
</ul>
<p class="mce-root">Now that we know what was wrong with the HTTP client, let's look at what's in store for Java 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java 9's new HTTP client</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There were several goals associated with creating the new HTTP client for the Java 9 platform. JEP-110 was the organizing proposal for the new HTTP client. The primary goals of JEP-110 are listed here and featured the creation of the new HTTP client presented. These goals are presented in the broad categories of ease of use, core capabilities, additional capabilities, and performance:</p>
<ul class="calibre13">
<li class="calibre14">Ease of use:
<ul class="calibre13">
<li class="calibre14">The API was designed to provide up to 90 percent of HTTP-related application requirements.</li>
<li class="calibre14">The new API is usable, without unnecessary complexity, for the most common use cases.</li>
<li class="calibre14">A simplistic blocking mode is included.</li>
<li class="calibre14">The API supports modern Java language features. Lambda expressions, a major new introduction released with Java 8, are an example.</li>
</ul>
</li>
<li class="calibre14">Core capabilities:
<ul class="calibre13">
<li class="calibre14">Supports HTTPS/TLS</li>
<li class="calibre14">Supports HTTP/2</li>
<li class="calibre14">Provides visibility on all details related to HTTP protocol requests and responses</li>
<li class="calibre14">Supports standard/common authentication mechanisms</li>
<li class="calibre14">Provides <strong class="calibre3">headers received</strong> event notifications</li>
<li class="calibre14">Provides <strong class="calibre3">response body received</strong> event notifications</li>
<li class="calibre14">Provides error event notifications</li>
</ul>
</li>
<li class="calibre14">Additional capabilities:
<ul class="calibre13">
<li class="calibre14">The new API can be used for WebSocket handshakes</li>
<li class="calibre14">It performs security checks in concert with the current networking API</li>
</ul>
</li>
<li class="calibre14">Performance:
<ul class="calibre13">
<li class="calibre14">For HTTP/1.1:
<ul class="calibre13">
<li class="calibre14">The new API must perform at least as efficiently as the previous API.</li>
<li class="calibre14">Memory consumption must not exceed that of Apache HttpClient, Netty, and Jetty, when being used as a client API.</li>
</ul>
</li>
<li class="calibre14">For HTTP/2:
<ul class="calibre13">
<li class="calibre14">Performance must exceed that of HTTP/1.1.</li>
<li class="calibre14">The new performance must match or exceed that of Netty and Jetty when being used as a client API. No performance degradation should be a result of the new client.</li>
<li class="calibre14">Memory consumption must not exceed that of Apache HttpClient, Netty, and Jetty, when being used as a client API.</li>
</ul>
</li>
<li class="calibre14">Avoids running timer threads</li>
</ul>
</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">New API limitations</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There are some intentional shortcomings of the new API. While this might sound counter-intuitive, the new API was not intended to completely replace the current <kbd class="calibre16">HttpURLConnection</kbd> API. Instead, the new API is intended to eventually replace the current one.</p>
<p class="mce-root">The following code snippet provides an example of how to implement the <kbd class="calibre16">HttpURLConnect</kbd> class to open and read a URL in a Java application:</p>
<pre class="calibre21">    /*<br class="calibre2"/>    import statements<br class="calibre2"/>    */

    public class HttpUrlConnectionExample
    {  
      public static void main(String[] args) 
      {
        new HttpUrlConnectionExample();
      }
  
      public HttpUrlConnectionExample()
      {<br class="calibre2"/>        URL theUrl = null;<br class="calibre2"/>        BufferedReader theReader = null;<br class="calibre2"/>        StringBuilder theStringBuilder;<br class="calibre2"/> <br class="calibre2"/>        // put the URL into a String<br class="calibre2"/>        String theUrl = "https://www.packtpub.com/";<br class="calibre2"/><br class="calibre2"/>        // here we are creating the connection<br class="calibre2"/>        theUrl = new URL(theUrl);<br class="calibre2"/>        HttpURLConnection theConnection = (HttpURLConnection) <br class="calibre2"/>         theUrl.openConnection();<br class="calibre2"/><br class="calibre2"/>        theConnection.setRequestedMethod("GET");<br class="calibre2"/><br class="calibre2"/>        // add a delay <br class="calibre2"/>        theConnection.setReadTimeout(30000); // 30 seconds
        theConnection.connect();<br class="calibre2"/><br class="calibre2"/>        // next, we can read the output<br class="calibre2"/>        theReader = new BufferedReader(<br class="calibre2"/>          new InputStreamReader(theConnection.getInputStream()));<br class="calibre2"/>        theStringBuilder =  new StringBuilder();<br class="calibre2"/><br class="calibre2"/>        // read the output one line at a time<br class="calibre2"/>        String theLine = null;<br class="calibre2"/>        while ((theLine = theReader.readLine() != null)<br class="calibre2"/>        {<br class="calibre2"/>          theStringBUilder.append(line + "n");<br class="calibre2"/>        }<br class="calibre2"/><br class="calibre2"/>        // echo the output to the screen console<br class="calibre2"/>        System.out.println(theStringBuilder.toString());<br class="calibre2"/>    <br class="calibre2"/>        // close the reader<br class="calibre2"/>        theReader.close();<br class="calibre2"/>      }<br class="calibre2"/>    }<br class="calibre2"/>    . . . </pre>
<div class="packt_infobox">The preceding code does not include exception handling for brevity.</div>
<p class="mce-root">Here are some specific limitations of the new API:</p>
<ul class="calibre13">
<li class="calibre14">Not all HTTP-related functionality is supported. It is estimated that about 10 percent of the HTTP's protocol is not exposed by the API.</li>
<li class="calibre14">Standard/common authentication mechanisms have been limited to basic authentication.</li>
<li class="calibre14">The overarching goal of the new API was the simplicity of use, which means that performance improvements might not be realized. Certainly, there will be no performance degradation, but there is not likely to be an overwhelming level of improvement, either.</li>
<li class="calibre14">There is no support for filtering on requests.</li>
<li class="calibre14">There is no support for filtering on responses.</li>
<li class="calibre14">The new API does not include a pluggable connection cache.</li>
<li class="calibre14">There is a lack of a general upgrade mechanism.</li>
</ul>
<p class="mce-root">The new API is delivered as part of the Java 9 platform in the incubator mode. This suggests that the API will be standardized in a future Java platform, perhaps with Java 10.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Simplified Doclet API [JEP-221]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Doclet API and Javadoc are closely related. Javadoc is a documentation tool and the Doclet API provides functionality so that we can inspect the javadoc comments embedded at the source-levels of libraries and programs. In this section, we will review the pre-Java 9 status of the Doclet API and then explore the changes introduced to the Doclet API in the Java 9 platform. In the following section, we will review Javadoc.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The pre-Java 9 Doclet API</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The pre-Java 9 Doclet API, or the <kbd class="calibre16">com.sun.javadoc</kbd> package, gives us access to look at javadoc comments located in the source code. Invoking a Doclet is accomplished by using the <kbd class="calibre16">start</kbd> method. That method's signature is <kbd class="calibre16">public static boolean start(RootDoc root)</kbd>. We will use the <kbd class="calibre16">RootDoc</kbd> instance as a container for the program structure information.</p>
<p class="mce-root">In order to call javadoc, we need to pass the following:</p>
<ul class="calibre13">
<li class="calibre14">Package names</li>
<li class="calibre14">Source file names (for classes and interfaces)</li>
<li class="calibre14">An access control option--one of the following:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">package</kbd></li>
<li class="calibre14"><kbd class="calibre16">private</kbd></li>
<li class="calibre14"><kbd class="calibre16">protected</kbd></li>
<li class="calibre14"><kbd class="calibre16">public</kbd></li>
</ul>
</li>
</ul>
<p class="mce-root">When the preceding listed items are used to call javadoc, a <strong class="calibre8">documented set</strong> is provided as a filtered list. If our aim is to obtain a comprehensive, unfiltered list, we can use <kbd class="calibre16">allClasses(false)</kbd>.</p>
<p class="mce-root">Let's review an example Doclet:</p>
<pre class="calibre21">    // Mandatory import statement.<br class="calibre2"/>    import com.sun.javadoc.*;<br class="calibre2"/><br class="calibre2"/>    // We will be looking for all the @throws documentation tags.<br class="calibre2"/>    public class AllThrowsTags extends Doclet <br class="calibre2"/>    {<br class="calibre2"/>      // This is used to invoke the Doclet.<br class="calibre2"/>      public static boolean start(Rootdoc myRoot) <br class="calibre2"/>      {<br class="calibre2"/>        // "ClassDoc[]" here referes to classes and interfaces.<br class="calibre2"/>        ClassDoc[] classesAndInterfaces = <br class="calibre2"/>         myRoot.classesAndInterfaces();<br class="calibre2"/>        for (int i = 0; i &lt; classesAndInterfaces.length; ++i)<br class="calibre2"/>        {<br class="calibre2"/>          ClassDoc tempCD = classesAndInterfaces[i];<br class="calibre2"/>          printThrows(tempCD.contructors());<br class="calibre2"/>          printThrows(tempCD.methods());<br class="calibre2"/>        }<br class="calibre2"/>        return true;<br class="calibre2"/>      }<br class="calibre2"/><br class="calibre2"/>      static void printThrows(ExecutableMemberDoc[] theThrows)<br class="calibre2"/>      {<br class="calibre2"/>        for (int i = 0; i &lt; theThrows.length; ++i)<br class="calibre2"/>        {<br class="calibre2"/>          ThrowsTag[] throws = theThrows[i].throwsTags();<br class="calibre2"/><br class="calibre2"/>          // Print the "qualified name" which will be a the<br class="calibre2"/>             class or <br class="calibre2"/>          // interface name.<br class="calibre2"/>          System.out.println(theThrows[i].qualifiedName());<br class="calibre2"/><br class="calibre2"/>          // A loop to print all comments with the Throws Tag that <br class="calibre2"/>          // belongs to the previously printed class or<br class="calibre2"/>             interface name<br class="calibre2"/>          for (int j = 0; j &lt; throws.length; ++j)<br class="calibre2"/>          {<br class="calibre2"/>            // A println statement that calls three methods<br class="calibre2"/>               from the <br class="calibre2"/>            // ThrowsTag Interface: exceptionType(),<br class="calibre2"/>               exceptionName(),<br class="calibre2"/>            // and exceptionComment().<br class="calibre2"/>            System.out.println("--&gt; TYPE: " +<br class="calibre2"/>              throws[j].exceptionType() + <br class="calibre2"/>              " | NAME: " + throws[j].exceptionName() + <br class="calibre2"/>              " | COMMENT: " + throws[j].exceptionComment());<br class="calibre2"/>          }<br class="calibre2"/>        }<br class="calibre2"/>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">As you can see by the thoroughly commented code, gaining access to the javadoc content is relatively easy. In our preceding example, we would invoke the <kbd class="calibre16">AllThrows</kbd> class using the following code in the command line:</p>
<pre class="calibre21"><strong class="calibre3">javadoc -doclet AllThrowsTags -sourcepath &lt;source-location&gt; java.util</strong></pre>
<p class="mce-root">The output of our result will consist of the following structure:</p>
<pre class="calibre21"><strong class="calibre3">&lt;class or interface name&gt;</strong><br class="calibre2"/><strong class="calibre3">    TYPE: &lt;exception type&gt; | NAME: &lt;exception name&gt; | COMMENT: &lt;exception comment&gt;</strong><br class="calibre2"/><strong class="calibre3">    TYPE: &lt;exception type&gt; | NAME: &lt;exception name&gt; | COMMENT: &lt;exception comment&gt;</strong><br class="calibre2"/><strong class="calibre3">    TYPE: &lt;exception type&gt; | NAME: &lt;exception name&gt; | COMMENT: &lt;exception comment&gt;</strong><br class="calibre2"/><strong class="calibre3">&lt;class or interface name&gt;</strong><br class="calibre2"/><strong class="calibre3">    TYPE: &lt;exception type&gt; | NAME: &lt;exception name&gt; | COMMENT: &lt;exception comment&gt;</strong><br class="calibre2"/><strong class="calibre3">    TYPE: &lt;exception type&gt; | NAME: &lt;exception name&gt; | COMMENT: &lt;exception comment&gt;</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">API enums</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The API consists of one enum, <kbd class="calibre16">LanguageVersion</kbd>, which provides the Java programming language version. The constants for this enum are <kbd class="calibre16">Java_1_1</kbd> and <kbd class="calibre16">Java_1_5</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">API classes</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">Doclet</kbd> class provides an example of how to create a class to start a Doclet. It contains an empty <kbd class="calibre16">Doclet()</kbd> constructor and the following methods:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">languageVersion()</kbd></li>
<li class="calibre14"><kbd class="calibre16">optionLength(String option)</kbd></li>
<li class="calibre14"><kbd class="calibre16">start(RootDoc root)</kbd></li>
<li class="calibre14"><kbd class="calibre16">validOptions(String[][] options, DocErrorReporter reporter)</kbd></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">API interfaces</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Doclet API contains the following listed interfaces. The interface names are self-describing. You can consult the documentation for additional details:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">AnnotatedType</kbd></li>
<li class="calibre14"><kbd class="calibre16">AnnotationDesc</kbd></li>
<li class="calibre14"><kbd class="calibre16">AnnotationDesc.ElementValuePair</kbd></li>
<li class="calibre14"><kbd class="calibre16">AnnotationTypeDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">AnnotationTypeElementDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">AnnotationValue</kbd></li>
<li class="calibre14"><kbd class="calibre16">ClassDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">ConstructorDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">Doc</kbd></li>
<li class="calibre14"><kbd class="calibre16">DocErrorReporter</kbd></li>
<li class="calibre14"><kbd class="calibre16">ExecutableMemberDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">FieldDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">MemberDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">MethodDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">PackageDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">Parameter</kbd></li>
<li class="calibre14"><kbd class="calibre16">ParameterizedType</kbd></li>
<li class="calibre14"><kbd class="calibre16">ParamTag</kbd></li>
<li class="calibre14"><kbd class="calibre16">ProgramElementDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">RootDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">SeeTag</kbd></li>
<li class="calibre14"><kbd class="calibre16">SerialFieldTag</kbd></li>
<li class="calibre14"><kbd class="calibre16">SourcePosition</kbd></li>
<li class="calibre14"><kbd class="calibre16">Tag</kbd></li>
<li class="calibre14"><kbd class="calibre16">ThrowsTag</kbd></li>
<li class="calibre14"><kbd class="calibre16">Type</kbd></li>
<li class="calibre14"><kbd class="calibre16">TypeVariable</kbd></li>
<li class="calibre14"><kbd class="calibre16">WildcardType</kbd></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Problems with the pre-existing Doclet API</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Fueling the need for a new Doclet API were several issues with the pre-existing Doclet API:</p>
<ul class="calibre13">
<li class="calibre14">It was not ideal for testing or concurrent usage. This stemmed from its implementation of static methods.</li>
<li class="calibre14">The language model used in the API had several limitations and became more problematic with each successive Java upgrade.</li>
<li class="calibre14">The API was inefficient, largely due to its heavy use of substring matching.</li>
<li class="calibre14">There was no reference provided regarding the specific location of any given comment. This made diagnostics and troubleshooting difficult.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java 9's Doclet API</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Now that you have a good handle on the Doclet API as it existed prior to Java 9, let's look at what changes have been made and delivered with the Java 9 platform. The new Doclet API is in the <kbd class="calibre16">jdk.javadoc.doclet</kbd> package.</p>
<p class="mce-root">At a high level, the changes to the Doclet API are as follows:</p>
<ul class="calibre13">
<li class="calibre14">Updates the <kbd class="calibre16">com.sun.javadoc</kbd> Doclet API to take advantage of several Java SE and JDK APIs</li>
<li class="calibre14">Updates the <kbd class="calibre16">com.sun.tools.doclets.standard.Standard</kbd> Doclet to use the new API</li>
<li class="calibre14">Supports the updated Taglet API that is used to create custom javadoc tags</li>
</ul>
<p class="mce-root">In addition to the changes listed earlier, the new API uses the two APIs listed here:</p>
<ul class="calibre13">
<li class="calibre14">Compiler tree API</li>
<li class="calibre14">Language model API</li>
</ul>
<p class="mce-root">Let's explore each of these in the following sections.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Compiler tree API</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The compiler tree API is in the <kbd class="calibre16">com.sun.source.doctree</kbd> package. It provides several interfaces to document source-level comments. These APIs are represented as <strong class="calibre8">Abstract Syntax Trees</strong> (<strong class="calibre8">ASTs</strong>).</p>
<p class="mce-root">There are two enums:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">AttributeTree.ValueKind</kbd> with the following constants:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">DOUBLE</kbd></li>
<li class="calibre14"><kbd class="calibre16">EMPTY</kbd></li>
<li class="calibre14"><kbd class="calibre16">SINGLE</kbd></li>
<li class="calibre14"><kbd class="calibre16">UNQUOTED</kbd></li>
</ul>
</li>
<li class="calibre14"><kbd class="calibre16">DocTree.Kind</kbd> with the following constants:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">ATTRIBUTE</kbd></li>
<li class="calibre14"><kbd class="calibre16">AUTHOR</kbd></li>
<li class="calibre14"><kbd class="calibre16">CODE</kbd></li>
<li class="calibre14"><kbd class="calibre16">COMMENT</kbd></li>
<li class="calibre14"><kbd class="calibre16">DEPRECATED</kbd></li>
<li class="calibre14"><kbd class="calibre16">DOC_COMMENT</kbd></li>
<li class="calibre14"><kbd class="calibre16">DOC_ROOT</kbd></li>
<li class="calibre14"><kbd class="calibre16">END_ELEMENT</kbd></li>
<li class="calibre14"><kbd class="calibre16">ENTITY</kbd></li>
<li class="calibre14"><kbd class="calibre16">ERRONEOUS</kbd></li>
<li class="calibre14"><kbd class="calibre16">EXCEPTION</kbd></li>
<li class="calibre14"><kbd class="calibre16">IDENTIFIER</kbd></li>
<li class="calibre14"><kbd class="calibre16">INHERIT_DOC</kbd></li>
<li class="calibre14"><kbd class="calibre16">LINK</kbd></li>
<li class="calibre14"><kbd class="calibre16">LINK_PLAIN</kbd></li>
<li class="calibre14"><kbd class="calibre16">LITERAL</kbd></li>
<li class="calibre14"><kbd class="calibre16">OTHER</kbd></li>
<li class="calibre14"><kbd class="calibre16">PARAM</kbd></li>
<li class="calibre14"><kbd class="calibre16">REFERENCE</kbd></li>
<li class="calibre14"><kbd class="calibre16">RETURN</kbd></li>
<li class="calibre14"><kbd class="calibre16">SEE</kbd></li>
<li class="calibre14"><kbd class="calibre16">SERIAL</kbd></li>
<li class="calibre14"><kbd class="calibre16">SERIAL_DATA</kbd></li>
<li class="calibre14"><kbd class="calibre16">SERIAL_FIELD</kbd></li>
<li class="calibre14"><kbd class="calibre16">SINCE</kbd></li>
<li class="calibre14"><kbd class="calibre16">START_ELEMENT</kbd></li>
<li class="calibre14"><kbd class="calibre16">TEXT</kbd></li>
<li class="calibre14"><kbd class="calibre16">THROWS</kbd></li>
<li class="calibre14"><kbd class="calibre16">UNKNOWN_BLOCK_TAG</kbd></li>
<li class="calibre14"><kbd class="calibre16">UNKNOWN_INLINE_TAG</kbd></li>
<li class="calibre14"><kbd class="calibre16">VALUE</kbd></li>
<li class="calibre14"><kbd class="calibre16">VERSION</kbd></li>
</ul>
</li>
</ul>
<p class="mce-root">The <kbd class="calibre16">com.sun.source.doctree</kbd> package contains several interfaces. They are detailed in the following table:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Interface name</strong></td>
<td class="calibre33"><strong class="calibre3">Extends</strong></td>
<td class="calibre33"><strong class="calibre3">A tree node for:</strong></td>
<td class="calibre33"><strong class="calibre3">Non-inherited methods</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">AttributeTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">HTML element</td>
<td class="calibre33"><kbd class="calibre16">getName()</kbd>, <kbd class="calibre16">getValue()</kbd>, <kbd class="calibre16">getValueKind()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">AuthorTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd>, <kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@author</kbd> block tag</td>
<td class="calibre33"><kbd class="calibre16">getName()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">Base class for different types of block tags</td>
<td class="calibre33"><kbd class="calibre16">getTagName()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">CommentTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">An embedded HTML comment with the following HTML tags--<kbd class="calibre16">&lt;!--text--&gt;</kbd></td>
<td class="calibre33"><kbd class="calibre16">getBody()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">DeprecatedTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@deprecated</kbd> block tag</td>
<td class="calibre33"><kbd class="calibre16">getBody()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">DocCommentTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">Body block tags</td>
<td class="calibre33"><kbd class="calibre16">getBlockTags()</kbd>, <kbd class="calibre16">getBody()</kbd>, <kbd class="calibre16">getFirstSentence()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">DocRootTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">InlineTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@docroot</kbd> inline tag</td>
<td class="calibre33">N/A</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">N/A</td>
<td class="calibre33">Common interface for all</td>
<td class="calibre33"><kbd class="calibre16">accept(DocTreeVisitor&lt;R,D&gt;visitor,Ddata)</kbd>, <kbd class="calibre16">getKind()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">DocTreeVisitor&lt;R,P&gt;</kbd></td>
<td class="calibre33">N/A</td>
<td class="calibre33"><kbd class="calibre16">R</kbd> = return type of visitor's methods; <kbd class="calibre16">P</kbd> = type of the additional parameter</td>
<td class="calibre33"><kbd class="calibre16">visitAttribute(AttributeTree node, P p)</kbd>, <kbd class="calibre16">visitAuthor(AuthorTree node, P p)</kbd>, <kbd class="calibre16">visitComment(CommentTree node, P p)</kbd>, <kbd class="calibre16">visitDeprecated(DeprecatedTree node, P p)</kbd>, <kbd class="calibre16">visitDocComment(DocCommentTree node, P p)</kbd>, <kbd class="calibre16">visitDocRoot(DocRootTree node, P p)</kbd>, <kbd class="calibre16">visitEndElement(EndElementTree node, P p)</kbd>, <kbd class="calibre16">visitEntity(EntityTree node, P p)</kbd>, <kbd class="calibre16">visitErroneous(ErroneousTree node, P p)</kbd>, <kbd class="calibre16">visitIdentifier(IdentifierTree node, P p)</kbd>, <kbd class="calibre16">visitInheritDoc(InheritDocTree node, P p)</kbd>, <kbd class="calibre16">visitLink(LinkTree node, P p)</kbd>, <kbd class="calibre16">visitLiteral(LiteralTree node, P p)</kbd>, <kbd class="calibre16">visitOther(DocTree node, P p)</kbd>, <kbd class="calibre16">visitParam(ParamTree node, P p)</kbd>, <kbd class="calibre16">visitReference(ReferenceTree node, P p)</kbd>, <kbd class="calibre16">visitReturn(ReturnTree node, P p)</kbd>, <kbd class="calibre16">visitSee(SeeTree node, P p)</kbd>, <kbd class="calibre16">visitSerial(SerialTree node, P p)</kbd>, <kbd class="calibre16">visitSerialData(SerialDataTree node, P p)</kbd>, <kbd class="calibre16">visitSerialField(SerialFieldTree node, P p)</kbd>, <kbd class="calibre16">visitSince(SinceTree node, P p)</kbd>, <kbd class="calibre16">visitStartElement(StartElementTree node, P p)</kbd>, <kbd class="calibre16">visitText(TextTree node, P p)</kbd>, <kbd class="calibre16">visitThrows(ThrowsTree node, P p)</kbd>, <kbd class="calibre16">visitUnknownBlockTag(UnknownBlockTagTree node, P p)</kbd>, <kbd class="calibre16">visitUnknownInlineTag(UnknownInlineTagTree node, P p)</kbd>, <kbd class="calibre16">visitValue(ValueTree node, P p)</kbd>, <kbd class="calibre16">visitVersion(VersionTree node, P p)</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">EndElementTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">End of an HTML element <kbd class="calibre16">&lt;/name&gt;</kbd></td>
<td class="calibre33"><kbd class="calibre16">getName()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">EntityTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">An HTML entity</td>
<td class="calibre33"><kbd class="calibre16">getName()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">ErroneousTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">TextTree</kbd></td>
<td class="calibre33">This is for malformed text</td>
<td class="calibre33"><kbd class="calibre16">getDiagnostic()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">IdentifierTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">An identifier in a comment</td>
<td class="calibre33"><kbd class="calibre16">getName()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">InheritDocTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">InlineTagTree</kbd></td>
<td class="calibre33">
<p class="mce-root3"><kbd class="calibre16">@inheritDoc</kbd></p>
<p class="mce-root3">inline tag</p>
</td>
<td class="calibre33">N/A</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">InlineTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">Common interface for inline tags</td>
<td class="calibre33"><kbd class="calibre16">getTagName()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">LinkTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">InlineTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@link</kbd> or <kbd class="calibre16">@linkplan</kbd> inline tags</td>
<td class="calibre33"><kbd class="calibre16">getLabel()</kbd>, <kbd class="calibre16">getReference()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">LiteralTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">InlineTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@literal</kbd> or <kbd class="calibre16">@code</kbd> inline tags</td>
<td class="calibre33"><kbd class="calibre16">getBody()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">ParamTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@param</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getDescription()</kbd>, <kbd class="calibre16">getName()</kbd>, <kbd class="calibre16">isTypeParameter()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">ReferenceTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">Used to reference a Java lang element</td>
<td class="calibre33"><kbd class="calibre16">getSignature()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">ReturnTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@return</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getDescription()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">SeeTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@see</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getReference()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">SerialDataTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@serialData</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getDescription()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">SerialFieldTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33">
<p class="mce-root3"><kbd class="calibre16">@serialData</kbd> block tags and <kbd class="calibre16">@serialField</kbd></p>
<p class="mce-root3">field names and descriptions</p>
</td>
<td class="calibre33"><kbd class="calibre16">getDescription()</kbd>, <kbd class="calibre16">getName()</kbd>, <kbd class="calibre16">getType()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">SerialTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@serial</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getDescription()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">SinceTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@since</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getBody()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">StartElementTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">Start of an HTML element <kbd class="calibre16">&lt; name [attributes] [/] &gt;</kbd></td>
<td class="calibre33"><kbd class="calibre16">getAttributes()</kbd>, <kbd class="calibre16">getName()</kbd>, <kbd class="calibre16">isSelfClosing()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">TextTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">DocTree</kbd></td>
<td class="calibre33">Plain text</td>
<td class="calibre33"><kbd class="calibre16">getBody()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">ThrowsTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@exception</kbd> or <kbd class="calibre16">@throws</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getDescription()</kbd>, <kbd class="calibre16">getExceptionname()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">UnknownBlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33">
<p class="mce-root3">Unrecognized</p>
<p class="mce-root3">inline tags</p>
</td>
<td class="calibre33"><kbd class="calibre16">getContent()</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">UnknownInlineTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">InlineTagTree</kbd></td>
<td class="calibre33">
<p class="mce-root3">Unrecognized</p>
<p class="mce-root3">inline tags</p>
</td>
<td class="calibre33"><kbd class="calibre16">getContent()</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">ValueTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">InlineTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@value</kbd> inline tags</td>
<td class="calibre33"><kbd class="calibre16">getReference()</kbd></td>
</tr>
<tr class="calibre41">
<td class="calibre33"><kbd class="calibre16">VersionTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">BlockTagTree</kbd></td>
<td class="calibre33"><kbd class="calibre16">@version</kbd> block tags</td>
<td class="calibre33"><kbd class="calibre16">getBody()</kbd></td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Language model API</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The language model API is in the <kbd class="calibre16">java.lang.model</kbd> package. It includes packages and classes that are used for language processing and language modeling. It consists of the following components:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">AnnotatedConstruct</kbd> interface</li>
<li class="calibre14"><kbd class="calibre16">SourceVersion</kbd> enum</li>
<li class="calibre14"><kbd class="calibre16">UnknownEntityException</kbd> exception</li>
</ul>
<p class="mce-root">Each of these language model API components is further explored in the next three sections.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The AnnotatedConstruct interface</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">AnnotatedConstruction</kbd> interface provides an annotatable construct to the language model API that has been part of the Java platform since version 1.8. It is applicable to constructs that are either an element (Interface <kbd class="calibre16">Element</kbd>) or a type (Interface <kbd class="calibre16">TypeMirror</kbd>). The annotations for each of these constructs differ, as shown in this table:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Construct type</strong></td>
<td class="calibre33"><strong class="calibre3">Interface</strong></td>
<td class="calibre33"><strong class="calibre3">Annotation</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">element</kbd></td>
<td class="calibre33"><kbd class="calibre16">Element</kbd></td>
<td class="calibre33">Declaration</td>
</tr>
<tr class="calibre41">
<td class="calibre33"><kbd class="calibre16">type</kbd></td>
<td class="calibre33"><kbd class="calibre16">TypeMirror</kbd></td>
<td class="calibre33">Based on use of a type name</td>
</tr>
</tbody>
</table>
<p class="mce-root"></p>
<p class="mce-root">The <kbd class="calibre16">AnnotatedConstruction</kbd> interface has three methods:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">getAnnotation(Class&lt;A&gt; annotationType)</kbd>: This method returns the type of the construct's annotation</li>
</ul>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">getAnnotationMirrors()</kbd>: This method returns a list of annotations that are on the construct</li>
</ul>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">getAnnotationsByType(Class&lt;A&gt; annotationType)</kbd>: This method returns the construct's associated annotations</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The SourceVersion enum</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">SourceVersion</kbd> enum consists of the following constants:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">RELEASE_0</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_1</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_2</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_3</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_4</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_5</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_6</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_7</kbd></li>
<li class="calibre14"><kbd class="calibre16">RELEASE_8</kbd></li>
</ul>
<div class="packt_infobox">It is anticipated that the <kbd class="calibre39">SourceVersion</kbd> enum will be updated to include <kbd class="calibre39">RELEASE_9</kbd> once the Java 9 platform has been officially released.</div>
<p class="mce-root">This enum also contains several methods, which are as follows:</p>
<p class="mce-root"><strong class="calibre8">Method name</strong>: <kbd class="calibre16">isIdentifier</kbd></p>
<p class="mce-root"><kbd class="calibre16">public static boolean isIdentifier(CharSequence name)</kbd></p>
<p class="mce-root">This method returns <kbd class="calibre16">true</kbd> if the parameter string is a Java identifier or keyword.</p>
<p class="mce-root"><strong class="calibre8">Method name</strong>: <kbd class="calibre16">isKeyword</kbd></p>
<p class="mce-root"><kbd class="calibre16">public static boolean isKeyword(CharSequence s)</kbd></p>
<p class="mce-root">This method returns <kbd class="calibre16">true</kbd> if the given <kbd class="calibre16">CharSequence</kbd> is a literal or keyword.</p>
<p class="mce-root"><strong class="calibre8">Method name</strong>: <kbd class="calibre16">isName</kbd></p>
<p class="mce-root"><kbd class="calibre16">public static boolean isName(CharSequence name)</kbd></p>
<p class="mce-root">This method returns <kbd class="calibre16">true</kbd> if the <kbd class="calibre16">CharSequence</kbd> is a valid name.</p>
<p class="mce-root"><strong class="calibre8">Method name</strong>: <kbd class="calibre16">latest</kbd></p>
<p class="mce-root"><kbd class="calibre16">public static SourceVersion latest()</kbd></p>
<p class="mce-root">This method returns the latest source version for modeling purposes.</p>
<p class="mce-root"><strong class="calibre8">Method name</strong>: <kbd class="calibre16">latestSupported</kbd></p>
<p class="mce-root"><kbd class="calibre16">public static SourceVersion latestSupported()</kbd></p>
<p class="mce-root">This method returns the latest source version that can be fully supported for modeling.</p>
<p class="mce-root"><strong class="calibre8">Method name</strong>: <kbd class="calibre16">valueOf</kbd></p>
<p class="mce-root"><kbd class="calibre16">public static SourceVersion valueOf(String name)</kbd></p>
<p class="mce-root">This method returns the enum constant based on the parameter string provided.</p>
<div class="packt_tip">You should be aware that the <kbd class="calibre39">value(String name)</kbd> method throws two exceptions: <kbd class="calibre39">IllegalArgumentException</kbd> and <kbd class="calibre39">NullPointerException</kbd>.</div>
<p class="mce-root"><strong class="calibre8">Method name</strong>: <kbd class="calibre16">values</kbd></p>
<p class="mce-root"><kbd class="calibre16">public static SourceVersion[] values()</kbd></p>
<p class="mce-root">This method returns an array of the enum constants.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The UnknownEntityException exception</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">UnknownEntityException</kbd> class extends <kbd class="calibre16">RuntimeException</kbd> and is a superclass of unknown exceptions. The class constructor is as follows:</p>
<pre class="calibre21">    protected UnknownEntityException(String message)</pre>
<p class="mce-root">The constructor creates a new instance of <kbd class="calibre16">UnknownEntityException</kbd> with the message provided as a string argument. The method does not take additional arguments.</p>
<p class="mce-root">This class does not have its own methods, but inherits methods from both <kbd class="calibre16">java.lang.Throwable</kbd> and <kbd class="calibre16">class.java.lang.Object</kbd> classes as shown here:</p>
<p class="mce-root">The <kbd class="calibre16">java.lang.Throwable</kbd> class methods:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">addSuppressed()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">fillInStackTrace()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getCause()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getLocalizedMessage()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getMessage()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getStackTrace()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getSuppressed()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">initCause()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">printStackTrace()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">setStackTrace()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">toString()</span></kbd></li>
</ul>
<p class="mce-root">The <kbd class="calibre16">java.lang.Object</kbd> class methods:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">clone()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">equals()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">finalize()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">getClass()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">hashCode()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">notify()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">notifyAll()</span></kbd></li>
<li class="calibre14"><kbd class="calibre16"><span class="calibre5">wait()</span></kbd></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">HTML5 Javadoc [JEP-224]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Javadoc tool has been updated for the Java 9 platform. It can now generate HTML 5 markup output in addition to HTML 4. The new Javadoc tool provides support for both HTML 4 and HTML 5.</p>
<p class="mce-root">HTML 4 will continue, even with the advent of the Java 9 platform, to be the default Javadoc output format. HTML 5 will be an option and will not become the default output markup format until Java 10.</p>
<p class="mce-root">The following short Java application simply generates a <kbd class="calibre16">319</kbd>-wide by <kbd class="calibre16">319</kbd>-high frame. It is shown here without any Javadoc tags, which we will discuss later in this section:</p>
<pre class="calibre21">    /import javax.swing.JFrame;<br class="calibre2"/>    import javax.swing.WindowConstants;<br class="calibre2"/><br class="calibre2"/>    public class JavadocExample <br class="calibre2"/>    {<br class="calibre2"/><br class="calibre2"/>      public static void main(String[] args) <br class="calibre2"/>      {<br class="calibre2"/>        drawJFrame();<br class="calibre2"/>      }<br class="calibre2"/><br class="calibre2"/>      public static void drawJFrame()<br class="calibre2"/>      {<br class="calibre2"/>        JFrame myFrame = new JFrame("Javadoc Example");<br class="calibre2"/>        myFrame.setSize(319,319);<br class="calibre2"/>        myFrame.setDefaultCloseOperation(<br class="calibre2"/>          WindowConstants.EXIT_ON_CLOSE);<br class="calibre2"/>        myFrame.setVisible(true);<br class="calibre2"/>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">Once your package or class is completed, you can generate a Javadoc using the Javadoc tool. You can run the Javadoc tool, located in your JDK /bin directory, from the command line or from within your <strong class="calibre8">Integrated Development Environment</strong> (<strong class="calibre8">IDE</strong>). Each IDE handles Javadoc generation differently. For example, in Eclipse, you would select <span class="calibre7">Project</span> from the pull-down menu and then <span class="calibre7">Generate Javadoc</span>. In the IntelliJ IDEA IDE, you select the <span class="calibre7">Tools</span> pull-down menu and then <span class="calibre7">Generate Javadoc</span>.</p>
<p class="mce-root">The following screenshot shows the IntelliJ IDEA interface for the Generate Javadoc functionality. As you can see, the <kbd class="calibre16">-html5</kbd> command-line argument has been included:</p>
<div class="mce-root1"><img src="Images/f1171163-7433-41fb-b229-fbfd8defaaef.png" width="480" height="562" class="calibre124"/></div>
<p class="mce-root">When the <span class="calibre7">OK</span> button is clicked, you will see a series of status messages, as shown in the following example:</p>
<pre class="calibre21"><strong class="calibre3">"C:Program FilesJavajdk-9binjavadoc.exe" -public -splitindex -use -author -version -nodeprecated -html5 @C:UserselaviAppDataLocalTempjavadoc1304args.txt -d C:Chapter11JD-Output</strong><br class="calibre2"/><strong class="calibre3">Loading source file C:Chapter11srcJavadocExample.java...</strong><br class="calibre2"/><strong class="calibre3">Constructing Javadoc information...</strong><br class="calibre2"/><strong class="calibre3">Standard Doclet version 9</strong><br class="calibre2"/><strong class="calibre3">Building tree for all the packages and classes...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-OutputJavadocExample.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputpackage-frame.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputpackage-summary.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputpackage-tree.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputconstant-values.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputclass-useJavadocExample.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputpackage-use.html...</strong><br class="calibre2"/><strong class="calibre3">Building index for all the packages and classes...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputoverview-tree.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputindex-filesindex-1.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputindex-filesindex-2.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputindex-filesindex-3.html...</strong><br class="calibre2"/><strong class="calibre3">Building index for all classes...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputallclasses-frame.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputallclasses-frame.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputallclasses-noframe.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputallclasses-noframe.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputindex.html...</strong><br class="calibre2"/><strong class="calibre3">Generating C:Chapter11JD-Outputhelp-doc.html...</strong><br class="calibre2"/><br class="calibre2"/><strong class="calibre3">javadoc exited with exit code 0</strong></pre>
<p class="mce-root">Once the Javadoc tool exits, you are ready to view the Javadoc. Here is a screenshot of what was generated based on the previously provided code. As you can see, it is formatted in the same manner in which the formal Java documentation from Oracle is documented:</p>
<div class="mce-root1"><img src="Images/95423213-2691-4781-84b0-ecfcc9887cf7.png" width="1310" height="1742" class="calibre125"/></div>
<p class="mce-root">When we generated the Javadoc, multiple documents were created, as illustrated by the directory tree provided in the following screenshot:</p>
<div class="mce-root1"><img src="Images/a26a5121-6e62-4505-a1de-addbaefeac95.png" class="calibre126"/></div>
<p class="mce-root">You can also add optional tags that are recognized by the Javadoc tool. Those tags are provided here:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">@author</kbd></li>
<li class="calibre14"><kbd class="calibre16">@code</kbd></li>
<li class="calibre14"><kbd class="calibre16">@deprecated</kbd></li>
<li class="calibre14"><kbd class="calibre16">@docRoot</kbd></li>
<li class="calibre14"><kbd class="calibre16">@exception</kbd></li>
<li class="calibre14"><kbd class="calibre16">@inheritDoc</kbd></li>
<li class="calibre14"><kbd class="calibre16">@link</kbd></li>
<li class="calibre14"><kbd class="calibre16">@linkplain</kbd></li>
<li class="calibre14"><kbd class="calibre16">@param</kbd></li>
<li class="calibre14"><kbd class="calibre16">@return</kbd></li>
<li class="calibre14"><kbd class="calibre16">@see</kbd></li>
<li class="calibre14"><kbd class="calibre16">@serial</kbd></li>
<li class="calibre14"><kbd class="calibre16">@serialData</kbd></li>
<li class="calibre14"><kbd class="calibre16">@serialField</kbd></li>
<li class="calibre14"><kbd class="calibre16">@since</kbd></li>
<li class="calibre14"><kbd class="calibre16">@throws</kbd></li>
<li class="calibre14"><kbd class="calibre16">@value</kbd></li>
<li class="calibre14"><kbd class="calibre16">@version</kbd></li>
</ul>
<div class="packt_tip">For more information on how to write document comments for the Javadoc tool, you can visit Oracle's official instructions at <a href="http://www.oracle.com/technetwork/articles/java/index-137868.html" class="calibre25 pcalibre pcalibre3 pcalibre2 pcalibre1">http://www.oracle.com/technetwork/articles/java/index-137868.html</a>.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Javadoc search [JEP-225]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Prior to Java 9, the standard Doclet generated API documentation pages that made navigating them difficult. Unless you are very familiar with the layout of these documentation pages, you will likely use browser-based find functionality to search text. This is considered clunky and suboptimal.</p>
<p class="mce-root">The Java 9 platform includes a search box as part of the API documentation. This search box is granted by the standard Doclet and can be used to search for text within the documentation. This represents a great convenience for developers and is likely to change our usage of Doclet-generated documentation.</p>
<p class="mce-root">With the new Javadoc search functionality, we have the ability to search for the following indexed components:</p>
<ul class="calibre13">
<li class="calibre14">Module names</li>
<li class="calibre14">Package names</li>
<li class="calibre14">Types</li>
<li class="calibre14">Members</li>
<li class="calibre14">Terms/phrases indexed using the new <kbd class="calibre16">@index</kbd> inline tag</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Introducing camel case search</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The new Javadoc search functionality includes a great shortcut using camel case search. As an example, we can search for <kbd class="calibre16">openED</kbd> to find the <kbd class="calibre16">openExternalDatabase()</kbd> method.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Remove launch-time JRE version selection [JEP-231]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre7">Prior to Java 9, we could use the <strong class="calibre8">mJRE</strong> (<strong class="calibre8">Multiple JRE</strong>) feature to specify a specific JRE version, or range of</span> versions<span class="calibre7">, for launching our applications. We would accomplish this via the command-line option <kbd class="calibre16">-version</kbd> or with an entry in the JAR file's manifest. The following flowchart illustrates what happens based on our selection:</span></p>
<div class="mce-root1"><img src="Images/24e5a477-cd05-40d8-94eb-de5b075c0cb5.png" width="1202" height="1308" class="calibre127"/></div>
<p class="mce-root">This functionality was introduced with JDK 5 and was not fully documented in that release or any subsequent release prior to JDK 9.</p>
<p class="mce-root">The following specific changes were introduced with the Java 9 platform:</p>
<ul class="calibre13">
<li class="calibre14">The mJRE feature has been removed.</li>
<li class="calibre14">The launcher will now produce an error whenever the <kbd class="calibre16">-version</kbd> command-line option is used. This is a terminal errors in that processing will not continue.</li>
<li class="calibre14">A warning will be produced if there is a <kbd class="calibre16">-version</kbd> entry in a JARs manifest. The warning will not stop execution.</li>
</ul>
<p class="mce-root">Interestingly, the presence of a <kbd class="calibre16">-version</kbd> entry in a manifest file will only generate a warning. This is by design, to take into account the likelihood of the entry being in older JAR file. It is estimated that this warning will be changed into a terminal error when the Java 10 platform is released.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Parser API for Nashorn [JEP-236]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The focus of JEP 236 was to create an API for Nashorn's EMCAScript abstract syntax tree. In this section, we will individually look at Nashorn, EMCAScript and then the Parser API.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Nashorn</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Oracle Nashorn is a JavaScript engine for the JVM developed in Java by Oracle. It was released with Java 8. It was created to provide developers with a highly efficiently and lightweight JavaScript runtime engine. Using this engine, developers were able to embed JavaScript code in their Java applications. Prior to Java 8, developers had access to the JavaScript engine created by Netscape. That engine, introduced in 1997, was maintained by Mozilla.</p>
<p class="mce-root">Nashorn can be used both as a command-line tool and as an embedded interpreter in Java applications. Let's look at examples of both.</p>
<div class="packt_infobox">Nashorn is the German word for rhinoceros. The name spawned from the Rhino-named JavaScript engine from the Mozilla Foundation. Rhino is said to have originated from the picture of the animal on a JavaScript book cover. File this one under <strong class="calibre3">interesting facts</strong>.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using Nashorn as a command-line tool</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Nashorn executable file, <kbd class="calibre16">jjs.exe</kbd>, resides in the <kbd class="calibre16">bin</kbd> folder. To access it, you can navigate to that folder or, if your system path is set up appropriately, you can launch into the shell by entering the <kbd class="calibre16">jjs</kbd> command in a Terminal / Command Prompt window on your system:</p>
<div class="mce-root1"><img src="Images/2477de55-156f-4057-89a2-04db442ad294.png" width="709" height="803" class="calibre128"/></div>
<p class="mce-root">Here, you can see an open terminal window that first checks the version of Java and then uses the <kbd class="calibre16">jjs -version</kbd> command to launch the Nashorn shell. In this example, both Java and Nashorn are version 1.8.0.121. Alternatively, we can simply launch Nashorn with the <kbd class="calibre16">jjs</kbd> command, and the shell will open without the version identification:</p>
<div class="mce-root1"><img src="Images/98c76395-aef2-4b63-933c-1fe15a0de1f8.png" width="1114" height="340" class="calibre129"/></div>
<p class="mce-root">Next, let's create a short JavaScript and run it using Nashorn. Consider the following simple JavaScript code that has three simple lines of output.</p>
<pre class="calibre21">    var addtest = function()<br class="calibre2"/>    {<br class="calibre2"/>      print("Simple Test");<br class="calibre2"/>      print("This JavaScript program adds the numbers 300<br class="calibre2"/>       and 19.");<br class="calibre2"/>      print("Addition results = " + (300 + 19));<br class="calibre2"/>    }<br class="calibre2"/>    addtest();</pre>
<p class="mce-root">To have Java run this JavaScript application, we will use the <kbd class="calibre16">jjs address.js</kbd> command. Here is the output:</p>
<div class="mce-root1"><img src="Images/e8cbeafc-55b9-4983-847c-4e6c641c5b4d.png" width="1044" height="256" class="calibre130"/></div>
<p class="mce-root">There is a lot you can do with Nashorn. From the Command Prompt/Terminal window, we can execute <kbd class="calibre16">jjs</kbd> with the <kbd class="calibre16">-help</kbd> option to see a full list of command-line commands:</p>
<div class="mce-root1"><img src="Images/7d835387-1668-4f43-b13f-eb467c4ea1d1.png" class="calibre131"/></div>
<p class="mce-root">As you can see, using the <kbd class="calibre16">-scripting</kbd> option gives us the ability to create scripts using Nashorn as a text editor. There are several built-in functions that are useful when using Nashorn:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">echo()</kbd>: This is similar to a <kbd class="calibre16">System.out.print()</kbd> Java method</li>
<li class="calibre14"><kbd class="calibre16">exit()</kbd>: This exits Nashorn</li>
<li class="calibre14"><kbd class="calibre16">load()</kbd>: This loads a script from a given path or URL</li>
<li class="calibre14"><kbd class="calibre16">print()</kbd>: This is similar to a <kbd class="calibre16">System.out.print()</kbd> Java method</li>
<li class="calibre14"><kbd class="calibre16">readFull()</kbd>: This reads a file's contents</li>
<li class="calibre14"><kbd class="calibre16">readLine()</kbd>: This reads a single line from <kbd class="calibre16">stdin</kbd></li>
<li class="calibre14"><kbd class="calibre16">quit()</kbd>: This exits Nashorn</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using Nashorn as an embedded interpreter</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">A more common use of Nashorn, compared to using it as a command-line tool, is using it as an embedded interpreter. The <kbd class="calibre16">javax.script</kbd> API is public and can be accessed via the <kbd class="calibre16">nashorn</kbd> identifier. The following code demonstrates how we can gain access to Nashorn, define a JavaScript function, and obtain the results--all from within a Java application:</p>
<pre class="calibre21">    // required imports<br class="calibre2"/><span class="calibre5">    import</span> javax.script.ScriptEngine;<br class="calibre2"/><span class="calibre5">    import</span> javax.script.ScriptEngineManager;<br class="calibre2"/><br class="calibre2"/><span class="calibre5">    public</span> <span class="calibre5">class</span> EmbeddedAddTest <br class="calibre2"/>    {<br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">static</span> <span class="calibre5">void</span> main(String[] <span class="calibre5">args</span>) <span class="calibre5">throws</span> Throwable<br class="calibre2"/>      {<br class="calibre2"/>        // instantiate a new ScriptEngineManager<br class="calibre2"/>        ScriptEngineManager <span class="calibre5">myEngineManager</span> =<br class="calibre2"/>          <span class="calibre5">new</span> ScriptEngineManager();<br class="calibre2"/><br class="calibre2"/>        // instantiate a new <span class="calibre5">Nashorn</span> ScriptEngine<br class="calibre2"/>        ScriptEngine <span class="calibre5">myEngine</span> = <span class="calibre5">myEngineManager</span>.getEngineByName(<br class="calibre2"/><span class="calibre5">         "nashorn"</span>);<br class="calibre2"/><br class="calibre2"/>        // create the JavaScript function<br class="calibre2"/><span class="calibre5">        myEngine</span><span class="calibre5">.eval(</span>"function addTest(x, y) { return x + y; }"<span class="calibre5">);<br class="calibre2"/><br class="calibre2"/></span>        // generate output including a call to the addTest function<br class="calibre2"/>           via the engine<br class="calibre2"/><span class="calibre5">        System.</span><span class="calibre5">out</span><span class="calibre5">.println(</span>"The addition results are:<br class="calibre2"/>         "<span class="calibre5"> + </span><span class="calibre5">myEngine</span><span class="calibre5">.eval(</span>"addTest(300, 19);"<span class="calibre5">));<br class="calibre2"/></span>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">Here is the output provided in the console window:</p>
<div class="mce-root1"><img src="Images/a99034f5-a8b8-4038-b747-3b4aa943f569.png" class="calibre132"/></div>
<p class="mce-root">This is a simplistic example to give you an idea of what is possible with embedded use of Nashorn. There are ample examples in Oracle's official documentation.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">EMCAScript</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><strong class="calibre8">EMCA</strong> (<strong class="calibre8">European Computer Manufacturers Association</strong>) was formed in 1961 as a standards organization for both information systems and communications systems. Today, the EMCA continues to develop standards and issue technical reports to help standardize how consumer electronics, information systems, and communications technology are used. They are over 400 ECMA standards, most of which have been adopted.</p>
<div class="packt_infobox">You will notice that EMCA is not spelled with all capital letters as it is no longer considered an acronym. In 1994, the European Computer Manufacturers Association formally changed its name to EMCA.</div>
<p class="mce-root">EMCAScript, also referred to as ES, was created in 1997 as a scripted-language specification. JavaScript implements this specification. The specification includes the following:</p>
<ul class="calibre13">
<li class="calibre14">Complementary technologies</li>
<li class="calibre14">Libraries</li>
<li class="calibre14">Scripting language syntax</li>
<li class="calibre14">Semantics</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Parser API</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">One of the changes in the Java platform with version 9 is to provide specific support for Nashorn's EMCAScript abstract syntax tree. The goals of the new API are to provide the following:</p>
<ul class="calibre13">
<li class="calibre14">Interfaces to represent Nashorn syntax tree nodes</li>
<li class="calibre14">The ability to create parser instances that can be configured with command-line options</li>
<li class="calibre14">A visitor pattern API for interfacing with AST nodes</li>
<li class="calibre14">Test programs to use the API</li>
</ul>
<p class="mce-root">The new API, <kbd class="calibre16">jdk.nashorn.api.tree</kbd>, was created to permit future changes to the Nashorn classes. Prior to the new Parser API, IDEs used Nashorn's internal AST representations for code analysis. According to Oracle, use of the <kbd class="calibre16">idk.nashorn.internal.ir</kbd> package prevented the modernization of Nashorn's internal classes.</p>
<p class="mce-root">Here is a look at the the class hierarchy of the new <kbd class="calibre16">jdk.nashorn.api.tree</kbd> package:</p>
<div class="mce-root1"><img src="Images/3b2eccac-4749-460a-bacd-49cf4a003498.png" class="calibre133"/></div>
<p class="mce-root">The following graphic illustrates the complexity of the new API, featuring a full interface hierarchy:</p>
<div class="mce-root1"><img src="Images/15031354-9b91-4419-b7ee-ce5c23c5ee2a.png" width="512" height="1085" class="calibre134"/></div>
<p class="mce-root">The last component of the <kbd class="calibre16">jdk.nashorn.api.tree</kbd> package is the enum hierarchy, shown here:</p>
<div class="mce-root1"><img src="Images/e2f5bf6b-afcd-4585-abbc-fd238e288f4d.png" width="670" height="116" class="calibre135"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Multi-release JAR files [JEP-238]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JAR file format has been extended in the Java 9 platform and now permits multiple versions of class files to exist in a single JAR file. The class versions can be specific to a Java release version. This enhancement allows developers to use a single JAR file to house multiple releases of their software.</p>
<p class="mce-root">The JAR file enhancement includes the following:</p>
<ul class="calibre13">
<li class="calibre14">Support for the <kbd class="calibre16">JarFile</kbd> API</li>
<li class="calibre14">Support for standard class loaders</li>
</ul>
<p class="mce-root">The changes to the JAR file format resulted in necessary changes to core Java tools so that they are able to interpret the new multiple-release JAR files. These core tools include the following:</p>
<ul class="calibre13">
<li class="calibre14">javac</li>
<li class="calibre14">javap</li>
<li class="calibre14">jdeps</li>
</ul>
<p class="mce-root">Finally, the new JAR file format supports modularity as the key characteristic of the Java 9 platform. The changes to the JAR file format have not resulted in reduced performance of related tools or processes.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Identifying multi-release JAR files</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Multi-release JAR files will have a new attribute, <kbd class="calibre16">Multi-Release: true</kbd>. This attribute will be located in the JAR <kbd class="calibre16">MANIFEST.MF</kbd> main section.</p>
<p class="mce-root">The directory structure will differ between standard JAR files and multi-release JAR files. Here is a look at a typical JAR file structure:</p>
<div class="mce-root1"><img src="Images/6a3e63d4-2711-4099-aef6-491e94843cdb.png" width="568" height="518" class="calibre136"/></div>
<p class="mce-root">This illustration shows the new multi-release JAR file structure with Java version-specific class files for both Java 8 and Java 9:</p>
<div class="mce-root1"><img src="Images/517fa7cb-856d-424a-ba2b-a8d36c3f98a1.png" width="908" height="1396" class="calibre137"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Related JDK changes</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Several changes had to be made to the JDK to support the new multi-release JAR file format. These changes include the following:</p>
<ul class="calibre13">
<li class="calibre14">The <kbd class="calibre16">URLClassLoader</kbd> is JAR-based and was modified so that it can read class files from the specified version.</li>
<li class="calibre14">The new module-based class loader, new to Java 9, was written so that it can read class files from the specified version.</li>
<li class="calibre14">The <kbd class="calibre16">java.util.jar.JarFile</kbd> class was modified so that it selects the appropriate class version from the multi-release JAR files.</li>
<li class="calibre14">The JAR URL scheme's protocol handler was modified so that it selects the appropriate class version from the multi-release JAR files.</li>
<li class="calibre14">The Java Compiler, <kbd class="calibre16">javac</kbd>, was made to read identified versions of the class files. These version identifications are made using the <kbd class="calibre16">-target</kbd> and <kbd class="calibre16">-release</kbd> command-line options with the <kbd class="calibre16">JavacFileManager</kbd> API and the <kbd class="calibre16">ZipFileSystem</kbd> API.</li>
<li class="calibre14">The following tools were modified to take advantage of the changes to the <kbd class="calibre16">JavacFileManager</kbd> API and the <kbd class="calibre16">ZipFileSystem</kbd> API:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">javah</kbd>: This generates C header and source files</li>
<li class="calibre14"><kbd class="calibre16">schemagen</kbd>: This is the schema generator for namespaces in Java classes</li>
<li class="calibre14"><kbd class="calibre16">wsgen</kbd>: This is the parser for web service deployment</li>
</ul>
</li>
<li class="calibre14">The javap tool was updated to support the new versioning schema.</li>
<li class="calibre14">The jdeps tool was modified to support the new versioning schema.</li>
<li class="calibre14">The JAR packing tool set was updated accordingly. This tool set consists of <kbd class="calibre16">pack200</kbd> and <kbd class="calibre16">unpack200</kbd>.</li>
<li class="calibre14">Of course, the JAR tool was enhanced so that it can create the multi-release JAR files.</li>
</ul>
<p class="mce-root">All related documentation has been updated to support all the changes involved in establishing and supporting the new multi-release JAR file format.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java-level JVM compiler interface [JEP-243]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JEP-243 was to create a Java-based <strong class="calibre8">JVM Compiler Interface</strong> (<strong class="calibre8">JVMCI</strong>). The JVMCI enables a Java compiler (which must have been written in Java) to be used as a dynamic compiler by the JVM.</p>
<p class="mce-root">The reasoning behind the desire for the JVMCI is that it would be a highly optimized compiler that does not require low-level language features. Some JVM subsystems require low-level functionality, such as with garbage collection and bytemode interpretation. So, the JVMCI was written in Java instead of C or C++. This provides the collateral benefit of some of Java's greatest features, such as the following ones:</p>
<ul class="calibre13">
<li class="calibre14">Exception handling</li>
<li class="calibre14">IDEs that are both free and robust</li>
<li class="calibre14">Memory management</li>
<li class="calibre14">Runtime extensibility</li>
<li class="calibre14">Synchronization</li>
<li class="calibre14">Unit testing support</li>
</ul>
<p class="mce-root">As JVMCI was written in Java, it will arguably be easier to maintain.</p>
<p class="mce-root">There are three primary components of the JVMCI API:</p>
<ul class="calibre13">
<li class="calibre14">Virtual machine data structure access</li>
<li class="calibre14">Installing compiled code with its metadata</li>
<li class="calibre14">Using the JVM's compilation system</li>
</ul>
<p class="mce-root">The JVMCI actually existed, to some extent, in Java 8. The JVMCI API was only accessible via a class loader that worked for code on the boot class path. In Java 9, this changes. It will still be experimental in Java 9, but more accessible. In order to enable the JVMCI, the following series of command-line options must be used:</p>
<pre class="calibre21"><strong class="calibre3">-XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler - Djvmci.Compiler=&lt;name of compiler&gt;</strong></pre>
<p class="mce-root">Oracle is keeping the JVMCI experimental in Java 9 to permit further testing and to afford the greatest level of protection for developers.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">BeanInfo annotations [JEP-256]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The JEP-256 focused on replacing <kbd class="calibre16">@beanifo</kbd> javadoc tags with more appropriate annotations. Furthermore, these new annotations are now processed at runtime so that <kbd class="calibre16">BeanInfo</kbd> classes can be generated <span class="calibre7">dynamically</span>. The modularity of Java 9 resulted in this change. The creation of custom <kbd class="calibre16">BeanInfo</kbd> classes has been simplified and the client library has been modularized.</p>
<p class="mce-root">In order to fully grasp this change, we will review <kbd class="calibre16">JavaBean</kbd>, <kbd class="calibre16">BeanProperty</kbd>, and <kbd class="calibre16">SwingContainer</kbd> before going any further into this JEP.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JavaBean</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">A <kbd class="calibre16">JavaBean</kbd> is a Java class. Like other Java classes, <kbd class="calibre16">JavaBeans</kbd> are reusable code. They are unique in their design because they encapsulate several objects into one. There are three conventions a <kbd class="calibre16">JavaBean</kbd> class must follow:</p>
<ul class="calibre13">
<li class="calibre14">The constructor should not take any arguments</li>
<li class="calibre14">It must be serializable</li>
<li class="calibre14">It must contain mutator and accessor methods for its properties</li>
</ul>
<p class="mce-root">Here is an example <kbd class="calibre16">JavaBean</kbd> class:</p>
<pre class="calibre21"><span class="calibre5">    public</span> <span class="calibre5">class</span> <span class="calibre5">MyBean</span> <span class="calibre5">implements</span> java.io.Serializable <br class="calibre2"/>    {<br class="calibre2"/>      // instance variables  <br class="calibre2"/>      private<span class="calibre5"> </span>int<span class="calibre5"> </span><span class="calibre5">studentId</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">      private</span><span class="calibre5"> String </span>studentName<span class="calibre5">;<br class="calibre2"/><br class="calibre2"/></span>      // no-argument constructor<br class="calibre2"/><span class="calibre5">      public</span> MyBean() <br class="calibre2"/>      {<br class="calibre2"/>  <br class="calibre2"/>      }<br class="calibre2"/>  <br class="calibre2"/>      // mutator/setter <br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">void</span> setStudentId(<span class="calibre5">int</span> <span class="calibre5">theID</span>)<br class="calibre2"/>      {<br class="calibre2"/><span class="calibre5">        this</span><span class="calibre5">.</span>studentId<span class="calibre5"> = </span><span class="calibre5">theID</span><span class="calibre5">;<br class="calibre2"/></span>      }<br class="calibre2"/><br class="calibre2"/>      // <span class="calibre5">accessor</span>/getter<br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">int</span> getStudentId()<br class="calibre2"/>      {<br class="calibre2"/><span class="calibre5">        return</span><span class="calibre5"> </span>studentId<span class="calibre5">;<br class="calibre2"/></span>      }<br class="calibre2"/><br class="calibre2"/>      // mutator/setter <br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">void</span> setStudentName(String <span class="calibre5">theName</span>)<br class="calibre2"/>      {<br class="calibre2"/><span class="calibre5">        this</span><span class="calibre5">.</span>studentName<span class="calibre5"> = </span><span class="calibre5">theName</span><span class="calibre5">;<br class="calibre2"/></span>      }<br class="calibre2"/><br class="calibre2"/>      // <span class="calibre5">accessor</span>/getter<br class="calibre2"/><span class="calibre5">      public</span> String getStudentName()<br class="calibre2"/>      {<br class="calibre2"/><span class="calibre5">        return</span><span class="calibre5"> </span>studentName<span class="calibre5">;<br class="calibre2"/></span>      }<br class="calibre2"/><br class="calibre2"/>    }</pre>
<p class="mce-root">Accessing <kbd class="calibre16">JavaBean</kbd> classes is as simple as using the mutator and accessor methods. This is likely not new to you, but there is a good chance you did not know that those carefully coded classes you created were called <kbd class="calibre16">JavaBean</kbd> classes.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">BeanProperty</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><kbd class="calibre16">BeanProperty</kbd> is an annotation type. We use this annotation to specify a property so that we can automatically generate <kbd class="calibre16">BeanInfo</kbd> classes. This is a new annotation for Java 9.</p>
<p class="mce-root">The <kbd class="calibre16">BeanProperty</kbd> annotation has the following optional elements:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">boolean bound</kbd></li>
<li class="calibre14"><kbd class="calibre16">String description</kbd></li>
<li class="calibre14"><kbd class="calibre16">String[] enumerationValues</kbd></li>
<li class="calibre14"><kbd class="calibre16">boolean expert</kbd></li>
<li class="calibre14"><kbd class="calibre16">boolean hidden</kbd></li>
<li class="calibre14"><kbd class="calibre16">boolean preferred</kbd></li>
<li class="calibre14"><kbd class="calibre16">boolean required</kbd></li>
<li class="calibre14"><kbd class="calibre16">boolean visualUpdate</kbd></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">SwingContainer</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><kbd class="calibre16">SwingContainer</kbd> is an annotation type. We use this annotation to specify a swing-related property so that we can automatically generate <kbd class="calibre16">BeanInfo</kbd> classes. This is a new annotation for Java 9.</p>
<p class="mce-root">The <kbd class="calibre16">SwingContainer</kbd> annotation has the following optional elements:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">String delegate</kbd></li>
<li class="calibre14"><kbd class="calibre16">boolean value</kbd></li>
</ul>
<p class="mce-root">Now that we have reviewed <kbd class="calibre16">JavaBean</kbd>, <kbd class="calibre16">BeanProperty</kbd>, and <kbd class="calibre16">SwingContainer</kbd>, let's take a look at the <kbd class="calibre16">BeanInfo</kbd> classes.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">BeanInfo classes</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">For the most part, <kbd class="calibre16">BeanInfo</kbd> classes are automatically generated at runtime. The exception is with Swing classes. Those classes generate <kbd class="calibre16">BeanInfo</kbd> classes based on the <kbd class="calibre16">@beaninfo</kbd> javadoc tags. This is done at compile time, not runtime. In Java 9, the <kbd class="calibre16">@beaninfo</kbd> tags have been replaced with <kbd class="calibre16">@interface JavaBean</kbd>, <kbd class="calibre16">@interface BeanProperty</kbd>, and <kbd class="calibre16">@interface SwingContainer</kbd> annotations.</p>
<p class="mce-root">These new annotations are used to set the corresponding attributes based on the optional elements noted in the previous sections. As an example, the following code snippet sets the attributes for a <kbd class="calibre16">SwingContainer</kbd>:</p>
<pre class="calibre21">    package javax.swing;<br class="calibre2"/><br class="calibre2"/>    public @interface SwingContainer<br class="calibre2"/>    {<br class="calibre2"/>      boolean value() default false;<br class="calibre2"/>      String delegate() default "";<br class="calibre2"/>    }</pre>
<p class="mce-root">This provides us with three benefits:</p>
<ul class="calibre13">
<li class="calibre14">It will be much easier to specify attributes in Bean classes instead of having to create individual <kbd class="calibre16">BeanInfo</kbd> classes</li>
<li class="calibre14">We will be able to remove auto-generated classes</li>
<li class="calibre14">The client library is much more easily modularized with this approach</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">TIFF image input/output [JEP-262]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JEP-262 is pretty straight forward. For Java 9, the image input/output plugins have been extended to include support for the TIFF image format. The <kbd class="calibre16">ImageIO</kbd> class extends the <kbd class="calibre16">Object</kbd> class and is part of Java SE. The class contains several methods for encoding and decoding images. Here is a list of static methods:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Method</strong></td>
<td class="calibre33"><strong class="calibre3">Return value</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">createImageInputStream(Object input)</kbd></td>
<td class="calibre33"><kbd class="calibre16">ImageInputStream</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">createImageOutputStream(Object output)</kbd></td>
<td class="calibre33"><kbd class="calibre16">ImageOutputStream</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getCacheDirectory()</kbd></td>
<td class="calibre33">Current value of the <kbd class="calibre16">CacheDirectory</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getImageReader(ImageWriter writer)</kbd></td>
<td class="calibre33"><kbd class="calibre16">ImageReader</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getImageReaders(Object input)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageReaders</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getImageReadersByFormatName(String formatName)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageReaders</kbd> with the specified format name</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getImageReadersByMIMEType(String MIMEType)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageReaders</kbd> of the specified MIME type</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getImageReadersBySuffix(String fileSuffix)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageReaders</kbd> with the specified suffix.</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getImageTranscoders(ImageReader reader)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageTranscoders</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getImageWriter(ImageReader reader)</kbd></td>
<td class="calibre33"><kbd class="calibre16">ImageWriter</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getImageWriters(ImageTypeSpecifier type, String formatName)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageWriters</kbd> that can encode to the specified type</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getImageWritersByFormatName(String formatName)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageWriters</kbd> with the specified format name</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getImageWritersByMIMEType(String MIMEType)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageWriters</kbd> of the specified MIME type</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getImageWritersBySuffix(String fileSuffix)</kbd></td>
<td class="calibre33">Iterator of current <kbd class="calibre16">ImageWriters</kbd> with the specified suffix.</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getReaderFileSuffixes()</kbd></td>
<td class="calibre33">String array with file suffixes understood by current readers</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getReaderFormatNames()</kbd></td>
<td class="calibre33">String array with format names understood by current readers</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getReaderMIMETypes()</kbd></td>
<td class="calibre33">String array with MIME types understood by current readers</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getUseCache()</kbd></td>
<td class="calibre33"><kbd class="calibre16">UseCache</kbd> value</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getWriterFileSuffixes()</kbd></td>
<td class="calibre33">String array of file suffixes understood by current writers</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">getWriterFormatNames()</kbd></td>
<td class="calibre33">String array with format names understood by current writers</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">getWriterMIMETypes()</kbd></td>
<td class="calibre33">String array with MIME types understood by current writers</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">read(File input)</kbd></td>
<td class="calibre33"><kbd class="calibre16">BufferedImage</kbd> with an <kbd class="calibre16">ImageReader</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">read(ImageInputStream stream)</kbd></td>
<td class="calibre33"><kbd class="calibre16">BufferedImage</kbd> with <kbd class="calibre16">ImageInputStream</kbd> and an <kbd class="calibre16">ImageReader</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">read(InputStream input)</kbd></td>
<td class="calibre33"><kbd class="calibre16">BufferedImage</kbd> with <kbd class="calibre16">InputStream</kbd> and <kbd class="calibre16">ImageReader</kbd></td>
</tr>
<tr class="calibre35">
<td class="calibre33"><kbd class="calibre16">read(URL input)</kbd></td>
<td class="calibre33"><kbd class="calibre16">BufferedImage</kbd> with an <kbd class="calibre16">ImageReader</kbd></td>
</tr>
</tbody>
</table>
<p class="mce-root"></p>
<p class="mce-root">There are also a few static methods that do not return a value or return a Boolean:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Method</strong></td>
<td class="calibre33"><strong class="calibre3">Description</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">scanForPlugins()</kbd></td>
<td class="calibre33">
<p class="mce-root3">Performs the following actions:</p>
<ul class="calibre13">
<li class="calibre14">Scans the application classpath for plugins</li>
<li class="calibre14">Loads plugin service provider classes</li>
<li class="calibre14">Registers service provide instances in the IIORegistry</li>
</ul>
</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">setCacheDirectory(File cacheDirectory)</kbd></td>
<td class="calibre33">This is where the cache files will be stored.</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">setUseCache(boolean useCache)</kbd></td>
<td class="calibre33">This method toggles if the cache will be disk-based or not. This applies to <kbd class="calibre16">ImageInputStream</kbd> and <kbd class="calibre16">ImageOutputStream</kbd> instances.</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">write(RenderedImage im, String formatName, File output)</kbd></td>
<td class="calibre33">Writes an image to the specified file.</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">write(RenderedImage im, String formatName, ImageOutputStream output)</kbd></td>
<td class="calibre33">Writes an image to an <kbd class="calibre16">ImageOutputStream</kbd>.</td>
</tr>
<tr class="calibre41">
<td class="calibre33"><kbd class="calibre16">write(RenderedImage im, String formatName, OutputStream output)</kbd></td>
<td class="calibre33">Writes an image to an <kbd class="calibre16">OutputStream</kbd>.</td>
</tr>
</tbody>
</table>
<p class="mce-root"></p>
<p class="mce-root">As you can glean from the provided methods, the image input/output framework provides us with a convenient way of using image codecs. As of Java 7, the following image format plugins were implemented by <kbd class="calibre16">javax.imageio</kbd>:</p>
<ul class="calibre13">
<li class="calibre14">BMP</li>
<li class="calibre14">GIF</li>
<li class="calibre14">JPEG</li>
<li class="calibre14">PNG</li>
<li class="calibre14">WBMP</li>
</ul>
<p class="mce-root">The TIFF is, as you can see, not on the list of image file formats. TIFFs are a common file format and, in 2001, macOS, with the release of MacOS X, used the format extensively.</p>
<p class="mce-root">The Java 9 platform includes <kbd class="calibre16">ImageReader</kbd> and <kbd class="calibre16">ImageWriter</kbd> plugins for the TIFFs. These plugins have been written in Java and have been bundled in the new <kbd class="calibre16">javax.imageio.plugins.tiff</kbd> package.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Platform logging API and service [JEP-264]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java 9 platform includes a new logging API enabling platform classes to log messages. It has a commensurate service for manipulating the logs. Before we go too far into what is new regarding the logging API and service, let's review <kbd class="calibre16">java.util.logging.api</kbd> which was introduced in Java 7.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The java.util.logging package</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre16">java.util.logging</kbd> package includes classes and interfaces that collectively comprise Java's core logging features. This functionality was created with the following goals:</p>
<ul class="calibre13">
<li class="calibre14">Problem diagnosis by end users and system administrators</li>
<li class="calibre14">Problem diagnosis by field service engineers</li>
<li class="calibre14">Problem diagnosis by the development organization</li>
</ul>
<p class="mce-root">As you can see, the primary purpose was to enable maintenance of remote software.</p>
<p class="mce-root">The <kbd class="calibre16">java.util.logging</kbd> package has two interfaces:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">public interface Filter</kbd>
<ul class="calibre13">
<li class="calibre14">Purpose: This provides fine-grain control over logged data</li>
<li class="calibre14">Method:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">isLoggable(LogRecord record)</kbd></li>
</ul>
</li>
</ul>
</li>
<li class="calibre14"><kbd class="calibre16">public interface LoggingMXBean</kbd>
<ul class="calibre13">
<li class="calibre14">Purpose: This is the logging facility's management interface</li>
<li class="calibre14">Methods:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">getLoggerLevel(String loggerName)</kbd></li>
<li class="calibre14"><kbd class="calibre16">getLoggerNames()</kbd></li>
<li class="calibre14"><kbd class="calibre16">getparentLoggerName(String loggerName)</kbd></li>
<li class="calibre14"><kbd class="calibre16">setLoggerLevel(String loggerName, String levelName)</kbd></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="mce-root">The following table provides the <kbd class="calibre16">java.util.logging</kbd> package classes, along with a brief description regarding what each class provides in respect to logging functionality and management:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Class</strong></td>
<td class="calibre33"><strong class="calibre3">Definition</strong></td>
<td class="calibre33"><strong class="calibre3">Description</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">ConsoleHandler</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class ConsoleHandler extends StreamHandler</kbd></td>
<td class="calibre33">Publishes log records to <kbd class="calibre16">System.err</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">ErrorManager</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class ErrorManager extends Object</kbd></td>
<td class="calibre33">Used to process errors during logging</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">FileHandler</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class FileHandler extends StreamHandler</kbd></td>
<td class="calibre33">File logging</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">Formatter</kbd></td>
<td class="calibre33"><kbd class="calibre16">public abstract class Formatter extends Object</kbd></td>
<td class="calibre33">For formatting <kbd class="calibre16">LogRecords</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">Handler</kbd></td>
<td class="calibre33"><kbd class="calibre16">public abstract class Handler extends Object</kbd></td>
<td class="calibre33">Exports <kbd class="calibre16">Logger</kbd> messages</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">Level</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class Level extends Object implements Serializable</kbd></td>
<td class="calibre33">Controls level of logging. The levels, in descending order, are--severe, warning, info, config, fine, finer, and finest</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">Logger</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class Logger extends Object</kbd></td>
<td class="calibre33">Logs messages</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">LoggingPermission</kbd></td>
<td class="calibre33"><kbd class="calibre16">public final class LoggingPermission extends BasicPermission</kbd></td>
<td class="calibre33"><kbd class="calibre16">SecurityManager</kbd> checks this</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">LogManager</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class LogManager</kbd></td>
<td class="calibre33">For maintaining shared state between loggers and logging services</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">LogRecord</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class LogRecord extends Object implements Serializable</kbd></td>
<td class="calibre33">Passed between handlers</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">MemoryHandler</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class MemoryHandler extends Handler</kbd></td>
<td class="calibre33">Buffers requests in memory</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">SimpleFormatter</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class SimpleFormatter extends Formatter</kbd></td>
<td class="calibre33">Provides human-readable <kbd class="calibre16">LogRecord</kbd> metadata</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">SocketHandler</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class SocketHandler extends StreamHandler</kbd></td>
<td class="calibre33">Network logging handler</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">StreamHandler</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class StreamHandler extends Handler</kbd></td>
<td class="calibre33">Stream-based logging handler</td>
</tr>
<tr class="calibre35">
<td class="calibre33"><kbd class="calibre16">XMLFormatter</kbd></td>
<td class="calibre33"><kbd class="calibre16">public class XMLFormatter extends Formatter</kbd></td>
<td class="calibre33">Formats logs into XML</td>
</tr>
</tbody>
</table>
<p class="mce-root"></p>
<p class="mce-root">Next, let's review what changes were made in Java 9.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Logging in Java 9</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Prior to Java 9, there were multiple logging schemas available, including <kbd class="calibre16">java.util.logging</kbd>, <kbd class="calibre16">SLF4J</kbd>, and <kbd class="calibre16">Log4J</kbd>. The latter two are third-party frameworks that have separate facade and implementation components. This pattern has been replicated in the new Java 9 platform.</p>
<p class="mce-root">Java 9 introduced changes to the <kbd class="calibre16">java.base</kbd> module so that it would handle logging functions and not rely on the <kbd class="calibre16">java.util.logging</kbd> API. It has separate facade and implementation components. This means that when using third-party frameworks, the JDK only needs to provide the implementation component and return platform loggers that work with the requesting logging framework.</p>
<p class="mce-root">As you can see in the following illustration, we use the <kbd class="calibre16">java.util.ServiceLoader</kbd> API to load our <kbd class="calibre16">LoggerFinder</kbd> implementation. The JDK uses a default implementation if a concrete implementation is not found using the system class loader:</p>
<div class="mce-root1"><img src="Images/ed92ab7a-c935-4e66-a8fa-0aaecf7cb78d.png" width="1608" height="868" class="calibre138"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">XML Catalogs [JEP-268]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JEP 268, titled XML Catalogs, focused on creating a standard XML Catalog API to support the OASIS XML Catalogs Standard v1.1. The new API defines catalog and catalog-resolve abstractions so that JAXP processors can use them. In this section, we will look at the following:</p>
<ul class="calibre13">
<li class="calibre14">The OASIS XML Catalog standard</li>
<li class="calibre14">JAXP processors</li>
<li class="calibre14">XML Catalogs prior to Java 9</li>
<li class="calibre14">Java 9 platform changes</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The OASIS XML Catalog standard</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><strong class="calibre8">XML</strong> (<strong class="calibre8">eXtensible Markup Language</strong>) Catalogs are XML documents consisting of catalog entries. Each entry pairs an identifier to another location. OASIS is a not-for-profit consortium with the mission of advancing open standards. They published the XML catalog standard, version 1.1., in 2005. This standard has two basic use cases:</p>
<ul class="calibre13">
<li class="calibre14">Map an external identifier to a URI reference</li>
<li class="calibre14">Map a URI reference to another URI reference</li>
</ul>
<p class="mce-root">Here is a sample XML catalog entry:</p>
<pre class="calibre21">    &lt;public publicId="-//Packt Publishing Limited//Mastering Java 9//EN"<br class="calibre2"/>     uri="https://www.packtpub.com/application-development/mastering-java-9"/&gt;</pre>
<p class="mce-root">The complete OASIS XML Catalog standard can be found at the official site: <a href="https://www.oasis-open.org/committees/download.php/14809/xml-catalogs.html" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://www.oasis-open.org/committees/download.php/14809/xml-catalogs.html</a></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">JAXP processors</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java API for XML processing is referred to as JAXP. As its name suggests, this API is used for parsing XML documents. There are four related interfaces:</p>
<ul class="calibre13">
<li class="calibre14">DOM: Document Object Model parsing</li>
<li class="calibre14">SAX: Simple API for XML parsing</li>
<li class="calibre14">StAX: Streaming API for XML parsing</li>
<li class="calibre14">XSLT: Interface to transform XML documents</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">XML Catalogs prior to Java 9</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java platform has had an internal catalog resolver since JDK 6. There was no public API, so external tools and libraries were used to access the functionality. Moving into Java 9, the goal was to make the internal catalog resolver a standard API for common use and ease of support.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Java 9 platform changes</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The new XML Catalog API, delivered with Java 9, follows the OASIS XML Catalogs standard, v1.1. Here are the feature and capability highlights:</p>
<ul class="calibre13">
<li class="calibre14">Implements <kbd class="calibre16">EntityResolver</kbd></li>
<li class="calibre14">Implements <kbd class="calibre16">URIResolver</kbd></li>
<li class="calibre14">Creation of XML Catalogs is possible via the <kbd class="calibre16">CatalogManager</kbd></li>
<li class="calibre14"><kbd class="calibre16">CatalogManager</kbd> will be used to create <kbd class="calibre16">CatalogResolvers</kbd></li>
<li class="calibre14">OASIS open catalog file semantics will be followed
<ul class="calibre13">
<li class="calibre14">Map an external identifier to a URI reference</li>
<li class="calibre14">Map a URI reference to another URI reference</li>
</ul>
</li>
<li class="calibre14"><kbd class="calibre16">CatalogResolvers</kbd> will implement the JAXP <kbd class="calibre16">EntityResolver</kbd> interface</li>
<li class="calibre14"><kbd class="calibre16">CatalogResolvers</kbd> will implement the JAXP <kbd class="calibre16">URIResolver</kbd> interface</li>
<li class="calibre14">The SAX <kbd class="calibre16">XMLFilter</kbd> will be supported by the resolver.</li>
</ul>
<p class="mce-root">Since the new XML Catalog API will be public, the pre-Java 9 internal catalog resolver will be removed, as it will no longer be necessary.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Convenience factory methods for collections [JEP-269]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The Java programming language does not support collection literals. Adding this feature to the Java platform was proposed in 2013 and revisited in 2016, but it only gained exposure as a research proposal, not for future implementation.</p>
<div class="packt_infobox">Oracle's definition of a collection literal is "<em class="calibre22">a syntactic expression form that evaluates to an aggregate type, such as an array, list, or map</em>" (<a href="http://openjdk.java.net/jeps/186" class="calibre25 pcalibre pcalibre3 pcalibre2 pcalibre1">http://openjdk.java.net/jeps/186</a>).</div>
<p class="mce-root">Of course, that is until Java 9 is released. Implementing collection literals in the Java programming language is reported to have the following benefits:</p>
<ul class="calibre13">
<li class="calibre14">Performance improvement</li>
<li class="calibre14">Increased safety</li>
<li class="calibre14">Reduction of boilerplate code</li>
</ul>
<p class="mce-root">Even without being part of the research group, our knowledge of the Java programming language clues us in to additional benefits:</p>
<ul class="calibre13">
<li class="calibre14">Ability to write shorter code</li>
<li class="calibre14">Ability to write space-efficient code</li>
<li class="calibre14">Ability to make collection literals immutable</li>
</ul>
<p class="mce-root">Let's look at two cases--using collections before Java 9, and then with the new support for collection literals in the new Java platform.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using collections before Java 9</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Here is an example of how we would create our own collections prior to Java 9. This first class defines the structure for <kbd class="calibre16">PlanetCollection</kbd>. It has the following components:</p>
<ul class="calibre13">
<li class="calibre14">A single instance variable</li>
<li class="calibre14">A one argument constructor</li>
<li class="calibre14">Mutator/setter method</li>
<li class="calibre14">Accessor/getter method</li>
<li class="calibre14">Method to print the object</li>
</ul>
<p class="mce-root">Here is the code implementing the preceding listed constructor and methods:</p>
<pre class="calibre21"><span class="calibre5">    public</span> <span class="calibre5">class</span> PlanetCollection <br class="calibre2"/>    {<br class="calibre2"/>      // Instance Variable<br class="calibre2"/><span class="calibre5">      private</span> String <span class="calibre5">planetName</span>;<br class="calibre2"/><br class="calibre2"/>      // constructor<br class="calibre2"/><span class="calibre5">      public</span> PlanetCollection(String <span class="calibre5">name</span>)<br class="calibre2"/>      {<br class="calibre2"/>        setPlanetName(<span class="calibre5">name</span>);<br class="calibre2"/>      }<br class="calibre2"/><br class="calibre2"/>      // mutator<br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">void</span> setPlanetName(String <span class="calibre5">name</span>)<br class="calibre2"/>      {<br class="calibre2"/><span class="calibre5">        this</span><span class="calibre5">.</span>planetName<span class="calibre5"> = </span><span class="calibre5">name</span><span class="calibre5">;<br class="calibre2"/></span>      }<br class="calibre2"/><br class="calibre2"/>      // <span class="calibre5">accessor<br class="calibre2"/></span><span class="calibre5">      public</span> String getPlanetName()<br class="calibre2"/>      {<br class="calibre2"/>        return<span class="calibre5"> </span>this<span class="calibre5">.</span><span class="calibre5">planetName</span><span class="calibre5">;<br class="calibre2"/></span>      }<br class="calibre2"/><br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">void</span> print()<br class="calibre2"/>      {<br class="calibre2"/>        System.<span class="calibre5">out</span>.println(getPlanetName());<br class="calibre2"/>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">Now, let's look at the driver class that populates the collection:</p>
<pre class="calibre21"><span class="calibre5">    import</span> java.util.ArrayList;<br class="calibre2"/><br class="calibre2"/><span class="calibre5">    public</span><span class="calibre5"> </span><span class="calibre5">class</span><span class="calibre5"> OldSchool <br class="calibre2"/>    {<br class="calibre2"/></span><span class="calibre5">      private</span> <span class="calibre5">static</span> ArrayList&lt;PlanetCollection&gt; <span class="calibre5">myPlanets</span> =<br class="calibre2"/>        <span class="calibre5">new</span> ArrayList&lt;&gt;();<br class="calibre2"/><br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">static</span> <span class="calibre5">void</span> main(String[] <span class="calibre5">args</span>) <br class="calibre2"/>      {<br class="calibre2"/>        add(<span class="calibre5">"Earth"</span>);<br class="calibre2"/><span class="calibre5">        add(</span>"Jupiter"<span class="calibre5">);<br class="calibre2"/></span>        add(<span class="calibre5">"Mars"</span>);<br class="calibre2"/>        add(<span class="calibre5">"Venus"</span>);<br class="calibre2"/>        add(<span class="calibre5">"Saturn"</span>);<br class="calibre2"/><span class="calibre5">        add(</span>"Mercury"<span class="calibre5">);<br class="calibre2"/></span><span class="calibre5">        add(</span>"Neptune"<span class="calibre5">);<br class="calibre2"/></span>        add(<span class="calibre5">"Uranus"</span>);<br class="calibre2"/><span class="calibre5">        add(</span>"Dagobah"<span class="calibre5">);<br class="calibre2"/></span>        add(<span class="calibre5">"Kobol"</span>);<br class="calibre2"/>    <br class="calibre2"/><span class="calibre5">        for</span> (PlanetCollection <span class="calibre5">orb</span> : <span class="calibre5">myPlanets</span>)<br class="calibre2"/>        {<br class="calibre2"/><span class="calibre5">          orb</span>.print();<br class="calibre2"/>        }<br class="calibre2"/><br class="calibre2"/>      }<br class="calibre2"/><br class="calibre2"/><span class="calibre5">      public</span> <span class="calibre5">static</span> <span class="calibre5">void</span> add(String <span class="calibre5">name</span>)<br class="calibre2"/>      {<br class="calibre2"/>        PlanetCollection <span class="calibre5">newPlanet</span> = <span class="calibre5">new</span> PlanetCollection(<span class="calibre5">name</span>);<br class="calibre2"/><span class="calibre5">        myPlanets</span>.add(<span class="calibre5">newPlanet</span>);<br class="calibre2"/>      }<br class="calibre2"/>    }</pre>
<p class="mce-root">Here is the output from this application:</p>
<div class="mce-root1"><img src="Images/acc7f3eb-e5a2-4396-a9a5-7a94619217f6.png" class="calibre139"/></div>
<p class="mce-root">This code is, unfortunately, very verbose. We populated our collection in static initializer blocks instead of using a field initializer. There are other methods of populating our list, but they are all more verbose than they should have to be. These other methods have additional problems, such as the need to create extra classes, the use of obscure code, and hidden references.</p>
<p class="mce-root">Let's now take a look at the solution to this problem, provided by the new Java 9 platform. We will look at what is new in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using new collection literals</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In order to rectify the currently required code verbosity in creating collections, we need library APIs for creating collection instances. Look at our pre-Java 9 code snippet in the previous section and then consider this possible refactoring:</p>
<pre class="calibre21">    PlanetCollection&lt;String&gt; myPlanets = Set.of(<br class="calibre2"/>      "Earth",<br class="calibre2"/>      "Jupiter",<br class="calibre2"/>      "Mars",<br class="calibre2"/>      "Venus",<br class="calibre2"/>      "Saturn",<br class="calibre2"/>      "Mercury",<br class="calibre2"/>      "Neptune",<br class="calibre2"/>      "Uranus",<br class="calibre2"/>      "Dagobah",<br class="calibre2"/>      "Kobol");</pre>
<p class="mce-root">This code is highly human-readable and not verbose.</p>
<p class="mce-root">The new implementation will include static factory methods on the following interfaces:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">List</kbd></li>
<li class="calibre14"><kbd class="calibre16">Map</kbd></li>
<li class="calibre14"><kbd class="calibre16">Set</kbd></li>
</ul>
<p class="mce-root">So, we are now able to create unmodifiable instances of <kbd class="calibre16">List</kbd> collections, <kbd class="calibre16">Map</kbd> collections, and <kbd class="calibre16">Set</kbd> collections. They can be instantiated with the following syntax:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">List.of(a, b, c, d, e);</kbd></li>
<li class="calibre14"><kbd class="calibre16">Set.of(a, b, c, d, e);</kbd></li>
<li class="calibre14"><kbd class="calibre16">Map.of();</kbd></li>
</ul>
<p class="mce-root">The <kbd class="calibre16">Map</kbd> collections will have a set of fixed arguments.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Platform-specific desktop features [JEP-272]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The exciting JEP-272 was to create a new public API so that we can write applications with access to platform-specific desktop features. These features include interacting with task bars/docks and listening for application and system events.</p>
<p class="mce-root">The macOS X <kbd class="calibre16">com.apple.eawt</kbd> package was an internal API and, starting with Java 9, is no longer accessible. In support of Java 9's new embedded platform-specific desktop features, <kbd class="calibre16">apple.applescript</kbd> classes are being removed from the Java platform without replacement.</p>
<p class="mce-root">This effort had several objectives:</p>
<ul class="calibre13">
<li class="calibre14">Create a public API to replace the functionality in <span class="calibre5"><kbd class="calibre16">com.apple.{east,eio}</kbd></span></li>
<li class="calibre14">Ensure OS X developers do not loose functionality. To this end, the Java 9 platform has replacements for the following packages:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">com.apple.eawt</kbd></li>
<li class="calibre14"><kbd class="calibre16">com.apple.eio</kbd></li>
</ul>
</li>
<li class="calibre14">Provide developers with a near-common set of features for platforms (that is, Windows and Linux) in addition to OS X. The common features include:
<ul class="calibre13">
<li class="calibre14">Login/logout handler with event listeners</li>
<li class="calibre14">Screen lock handler with event listeners</li>
<li class="calibre14">Task bar / dock actions to include:
<ul class="calibre13">
<li class="calibre14">Requesting user attention</li>
<li class="calibre14">Indicating task progress</li>
<li class="calibre14">Action shortcuts</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="mce-root">The new API will be added to the <kbd class="calibre16">java.awt.Desktop</kbd> class.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Enhanced method handles [JEP-274]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <strong class="calibre8">Enhanced Method Handles</strong> JEP-274 was to improve the following listed classes, to make common usage easier with improved optimizations:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle</kbd> class</li>
<li class="calibre14"><kbd class="calibre16">MethodHandles</kbd> class</li>
<li class="calibre14"><kbd class="calibre16">MethodHandles.Lookup</kbd> class</li>
</ul>
<p class="mce-root">The listed classes are all part of the <kbd class="calibre16">java.lang.invoke</kbd> package, which has been updated as part of the Java 9 platform. The improvements were made possible through the use of lookup refinement and <kbd class="calibre16">MethodHandle</kbd> combinations <kbd class="calibre16">for</kbd> loops and <kbd class="calibre16">try...finally</kbd> blocks.</p>
<p class="mce-root">In this section, we will look at the following regarding JEP-274:</p>
<ul class="calibre13">
<li class="calibre14">Reason for the enhancement</li>
<li class="calibre14">Lookup functions</li>
<li class="calibre14">Argument handling</li>
<li class="calibre14">Additional combinations</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Reason for the enhancement</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">This enhancement stemmed from developer feedback and the desire to make the <kbd class="calibre16">MethodHandle</kbd>, <kbd class="calibre16">MethodHandles</kbd>, and <kbd class="calibre16">MethodHandles.Lookup</kbd> classes much easier to use. There was also the call to add additional use cases.</p>
<p class="mce-root">The changes resulted in the following benefits:</p>
<ul class="calibre13">
<li class="calibre14">Enabled precision in the usage of the <kbd class="calibre16">MethodHandle</kbd> API</li>
<li class="calibre14">Instantiation reduction</li>
<li class="calibre14">Increased JVM compiler optimizations</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Lookup functions</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Changes regarding lookup functions, for the Java 9 platform, include the following:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandles</kbd> can now be bound to non-abstract methods in interfaces</li>
<li class="calibre14">The lookup API allows class lookups from different contexts</li>
</ul>
<p class="mce-root">The <kbd class="calibre16">MethodHandles.Lookup.findSpecial(Class&lt;?&gt; refs, String name, MethodType type, Class&lt;?&gt; specialCaller)</kbd> class has been modified to permit locating super-callable methods on interfaces.</p>
<p class="mce-root">In addition, the following methods have been added to the <kbd class="calibre16">MethodHandles.Lookup</kbd> class:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">Class&lt;?&gt; findClass(String targetName)</kbd></li>
<li class="calibre14"><kbd class="calibre16">Class&lt;?&gt; accessClass(Class&lt;?&gt; targetClass)</kbd></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Argument handling</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Three updates were made to improve <kbd class="calibre16">MethodHandle</kbd> argument handling for the Java 9 platform. These changes are highlighted as follows:</p>
<ul class="calibre13">
<li class="calibre14">Argument folding using <kbd class="calibre16">foldArguments(MethodHandle target, MethodHandle combinator)</kbd> did not previously have a position argument.
<ul class="calibre13">
<li class="calibre14">Argument collection using the <kbd class="calibre16">MethodHandle.asCollector(Class&lt;?&gt; arrayType, int arrayLength)</kbd> method did not previously support collecting the arguments into an array except for the trailing element. This has been changed, and there is now an additional <kbd class="calibre16">asCollector</kbd> method to support that functionality in Java 9.</li>
</ul>
</li>
<li class="calibre14">Argument spreading using the <kbd class="calibre16">MethodHandle.asSpreader(Class&lt;?&gt; arrayType, int arrayLength)</kbd> method spreads the contents of the trailing array to a number of arguments, in a reverse method of argument collection. Argument spreading has been modified to support the expansion of an array anywhere in the method signature.</li>
</ul>
<div class="packt_infobox">The new method definitions for the updated <kbd class="calibre39">asCollector</kbd> and <kbd class="calibre39">asSpreader</kbd> methods are provided in the next section.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Additional combinations</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The following addition combinations have been added to support the ease of use and optimizations for the <kbd class="calibre16">MethodHandle</kbd><span class="calibre7">,</span> <kbd class="calibre16">MethodHandles</kbd><span class="calibre7">, and</span> <kbd class="calibre16">MethodHandles.Lookup</kbd> <span class="calibre7">classes</span> of the <kbd class="calibre16">java.lang.invoke</kbd> package in the Java 9 platform:</p>
<ul class="calibre13">
<li class="calibre14">Generic loop abstraction:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle loop(MethodHandle[] . . . clauses)</kbd></li>
</ul>
</li>
<li class="calibre14"><kbd class="calibre16">While</kbd> loops:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle whileLoop(MethodHandle init, MethodHandle pred, MethodHandle body)</kbd></li>
</ul>
</li>
<li class="calibre14"><kbd class="calibre16">Do...while</kbd> loops:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16"><kbd class="calibre79">MethodHandle doWhileLoop(MethodHandle init, MethodHandle body, MethodHandle pred)</kbd></kbd></li>
</ul>
</li>
<li class="calibre14">Counting loops:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle countedLoop(MethodHandle iterations, MethodHandle init, MethodHandle body)</kbd></li>
</ul>
</li>
<li class="calibre14">Data structure iteration:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle iteratedLoop(MethodHandle iterator, MethodHandle init, MethodHandle body)</kbd></li>
</ul>
</li>
<li class="calibre14"><kbd class="calibre16">Try...finally</kbd> blocks:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle tryFinally(MethodHandle target, MethodHandle cleanup)</kbd></li>
</ul>
</li>
<li class="calibre14">Argument handling:
<ul class="calibre13">
<li class="calibre14">Argument spreading:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle asSpreader(int pos, Class&lt;?&gt; arrayType, int arrayLength)</kbd></li>
</ul>
</li>
<li class="calibre14">Argument collection:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle asCollector(int pos, Class&lt;?&gt; arrayType, int arrayLength)</kbd></li>
</ul>
</li>
<li class="calibre14">Argument folding:
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">MethodHandle foldArguments(MethodHandle target, int pos, MethodHandle combiner)</kbd></li>
</ul>
</li>
</ul>
</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Enhanced deprecation [JEP-277]</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There are two facilities for expressing deprecation:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">@Deprecated</kbd> annotation</li>
<li class="calibre14"><kbd class="calibre16">@deprecated</kbd> javadoc tag</li>
</ul>
<p class="mce-root">These facilities were introduced in Java SE 5 and JDK 1.1, respectively. The <kbd class="calibre16">@Deprecated</kbd> annotation was intended to annotate program components that should not be used because they were deemed dangerous and/or there was a better option. That was the intended use. Actual use varied including and because warnings were only provided at compile time; there was little reason to ignore the annotated code.</p>
<p class="mce-root">The <strong class="calibre8">Enhanced Deprecation</strong> JEP-277 was taken on to provide developers with clearer information regarding the intended disposition of the APIs in the specification documentation. Work on this JEP also resulted in a tool for analyzing a program's use of deprecated APIs.</p>
<p class="mce-root">To support this fidelity in information, the following components have been added to the <kbd class="calibre16">java.lang.Deprecated</kbd> annotation type:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">forRemoval()</kbd>:
<ul class="calibre13">
<li class="calibre14">Returns Boolean <kbd class="calibre16">true</kbd> if the API element has been slated for future removal</li>
<li class="calibre14">Returns Boolean <kbd class="calibre16">false</kbd> if the API element has not been slated for future removal but is deprecated</li>
<li class="calibre14">Default is <kbd class="calibre16">false</kbd></li>
</ul>
</li>
<li class="calibre14"><kbd class="calibre16">since()</kbd>:
<ul class="calibre13">
<li class="calibre14">Returns a string containing the release or version number, at which point the specified API was marked as deprecated</li>
</ul>
</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">What the @Deprecated annotation really means</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">When an API, or methods within an API, has/have been marked with the <kbd class="calibre16">@Deprecated</kbd> annotation, one or more of the following conditions typically exists:</p>
<ul class="calibre13">
<li class="calibre14">There are errors in the API for which there is no plan to fix them</li>
<li class="calibre14">Using the API is likely to result in errors</li>
<li class="calibre14">The API has been replaced by another API</li>
<li class="calibre14">The API is experimental</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this chapter, we covered 16 JEPs that were incorporated into the Java 9 platform. These JEPs cover a wide range of tools and updates to APIs to make developing with Java easier, with greater optimization possibilities for our resulting programs. Our review included a look at the new HTTP client, changes to Javadoc and the Doclet API, the new JavaScript parser, JAR and JRE changes, the new Java-level JVM compiler interface, the new support for TIFF images, platform logging, XML Catalog support, collections, and the new platform-specific desktop features. We also looked at enhancements to method handling and the deprecation annotation.</p>
<p class="mce-root"><span class="calibre7">In the next chapter, we will cover concurrency enhancements introduced with the Java 9 platform. Our primary focus</span> will <span class="calibre7">be the support for reactive programming that is provided by the flow class API. We will also explore additional concurrency enhancements introduced in Java 9.</span></p>


            </article>

            
        </section>
    </div>



  </body></html>