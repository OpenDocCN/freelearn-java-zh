["```java\ncomponent:option?key=value&key=value\n```", "```java\n<from uri=\"timer:fire?period=5000\"/>\n<to uri=\"log:myLog\"/>\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5a</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5a;\n\npublic class Step1Bean {\n\n  public static void single(String body) {\n      System.out.println(\"STEP 1: \" + body);\n  }\n\n}\n```", "```java\npackage com.packt.camel.chapter5a;\n\npublic class Step2Bean {\n\n  public static void single(String body) {\n      System.out.println(\"STEP 2: \" + body);\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"step1\" class=\"com.packt.camel.chapter5a.Step1Bean\"/>\n\n  <bean id=\"step2\" class=\"com.packt.camel.chapter5a.Step2Bean\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody>\n              <constant>Hello Chapter5a</constant>\n          </setBody>\n          <bean ref=\"step1\"/>\n          <bean ref=\"step2\"/>\n          <to uri=\"log:pipeline\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\n\nkaraf@root()>\n\n```", "```java\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5a/1.0-SNAPSHOT\nBundle ID: 73\n\n```", "```java\nSTEP 1: Hello Chapter5a\nSTEP 2: Hello Chapter5a\nSTEP 1: Hello Chapter5a\nSTEP 2: Hello Chapter5a\nSTEP 1: Hello Chapter5a\nSTEP 2: Hello Chapter5a\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5b</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5b;\n\npublic class Step1Bean {\n\n  public static void single(String body) {\n      System.out.println(\"STEP 1: \" + body);\n  }\n\n}\n```", "```java\npackage com.packt.camel.chapter5b;\n\npublic class Step2Bean {\n\n  public static void single(String body) {\n      System.out.println(\"STEP 2: \" + body);\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"step1\" class=\"com.packt.camel.chapter5b.Step1Bean\"/>\n\n  <bean id=\"step2\" class=\"com.packt.camel.chapter5b.Step2Bean\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody>\n              <constant>Hello Chapter5b</constant>\n          </setBody>\n          <pipeline>\n              <bean ref=\"step1\"/>\n              <bean ref=\"step2\"/>\n              <to uri=\"log:pipeline\"/>\n          </pipeline>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5b/1.0-SNAPSHOT\nBundle ID: 73\n\n```", "```java\nSTEP 1: Hello Chapter5b\nSTEP 2: Hello Chapter5b\nSTEP 1: Hello Chapter5b\nSTEP 2: Hello Chapter5b\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <choice>\n              <when>\n                 <simple>${file:ext} == 'xml'</simple>\n                 <to uri=\"file:/tmp/out/xml\"/>\n              </when>\n              <when>\n                 <simple>${file:ext} == 'txt'</simple>\n                 <to uri=\"file:/tmp/out/txt\"/>\n              </when>\n              <otherwise>\n                 <to uri=\"file:/tmp/out/binaries\"/>\n              </otherwise>\n          </choice>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n<test>foobar</test>\n\n```", "```java\nFoobar\n\n```", "```java\nfoo,bar\n\n```", "```java\n/tmp/out$ tree\n.\n├── binaries\n│   └── test.csv\n├── txt\n│   └── file.txt\n└── xml\n └── file.xml\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <transform>\n             <simple>Hello ${in.body}</simple>\n          </transform>\n          <to uri=\"file:/tmp/out\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nWorld\n\n```", "```java\nHello World\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5e</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <dependencies>\n      <dependency>\n          <groupId>org.apache.camel</groupId>\n          <artifactId>camel-core</artifactId>\n          <version>2.12.4</version>\n      </dependency>\n  </dependencies>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5e;\n\nimport org.apache.camel.Exchange;\nimport org.apache.camel.Processor;\n\npublic class PrependProcessor implements Processor {\n\n  public void process(Exchange exchange) throws Exception {\n      String inBody = exchange.getIn().getBody(String.class);\n      inBody = \"Hello \" + inBody;\n      exchange.getIn().setBody(inBody);\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"prependProcessor\" class=\"com.packt.camel.chapter5e.PrependProcessor\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <process ref=\"prependProcessor\"/>\n          <to uri=\"file:/tmp/out\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5e/1.0-SNAPSHOT\nBundle ID: 73\n\n```", "```java\nWorld\n\n```", "```java\nHello World\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <dataFormats>\n          <xmljson id=\"xmljson\"/>\n      </dataFormats>\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <marshal ref=\"xmljson\"/>\n          <to uri=\"file:/tmp/out\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\nkaraf@root()> feature:install camel-xmljson\n\n```", "```java\n<person>\n      <name>jbonofre</name>\n      <address>My Street, Paris</address>\n</person>\n```", "```java\n{\"name\":\"jbonofre\",\"address\":\"My Street, Paris\"}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"amqConnectionFactory\" class=\"org.apache.activemq.ActiveMQConnectionFactory\">\n      <property name=\"brokerURL\" value=\"vm://broker\"/>\n  </bean>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=1000\"/>\n          <setBody>\n             <constant>Hello chapter5g</constant>\n          </setBody>\n          <to uri=\"jms:queue:input?connectionFactory=#amqConnectionFactory\"/>\n      </route>\n      <route>\n          <from uri=\"jms:queue:input?connectionFactory=#amqConnectionFactory\"/>\n          <delay>\n              <constant>2000</constant>\n          </delay>\n          <to uri=\"log:consumer1\"/>\n      </route>\n      <route>\n          <from uri=\"jms:queue:input?connectionFactory=#amqConnectionFactory\"/>\n          <delay>\n              <constant>2000</constant>\n          </delay>\n          <to uri=\"log:consumer2\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:repo-add activemq 5.7.0\nAdding feature url mvn:org.apache.activemq/activemq-karaf/5.7.0/xml/features\nkaraf@root()> feature:install camel-blueprint\nkaraf@root()> feature:install activemq-camel\nRefreshing bundles org.apache.servicemix.bundles.jaxb-impl (69), org.apache.camel.camel-core (70)\n\n```", "```java\n2014-12-15 15:25:22,142 | INFO  | sConsumer[input] | consumer2  | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5g]\n2014-12-15 15:25:23,105 | INFO  | sConsumer[input] | consumer1 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5g]\n2014-12-15 15:25:24,146 | INFO  | sConsumer[input] | consumer2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5g]\n2014-12-15 15:25:25,107 | INFO  | sConsumer[input] | consumer1 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5g]\n2014-12-15 15:25:26,149 | INFO  | sConsumer[input] | consumer2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5g]\n2014-12-15 15:25:27,109 | INFO  | sConsumer[input] | consumer1 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5g]\n2014-12-15 15:25:28,151 | INFO  | sConsumer[input] | consumer2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5g]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"amqConnectionFactory\" class=\"org.apache.activemq.ActiveMQConnectionFactory\">\n      <property name=\"brokerURL\" value=\"vm://broker\"/>\n  </bean>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=1000\"/>\n          <setBody>\n             <constant>Hello chapter5h</constant>\n          </setBody>\n          <to uri=\"jms:topic: input?connectionFactory=#amqConnectionFactory\"/>\n      </route>\n      <route>\n          <from uri=\"jms:topic :input?connectionFactory=#amqConnectionFactory\"/>\n          <delay>\n              <constant>2000</constant>\n          </delay>\n          <to uri=\"log:consumer1\"/>\n      </route>\n      <route>\n          <from uri=\"jms:topic:input?connectionFactory=#amqConnectionFactory\"/>\n          <delay>\n              <constant>2000</constant>\n          </delay>\n          <to uri=\"log:consumer2\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:repo-add activemq 5.7.0\nAdding feature url mvn:org.apache.activemq/activemq-karaf/5.7.0/xml/features\nkaraf@root()> feature:install camel-blueprint\nkaraf@root()> feature:install activemq-camel\nRefreshing bundles org.apache.servicemix.bundles.jaxb-impl (69), org.apache.camel.camel-core (70)\n\n```", "```java\n2014-12-15 15:47:45,363 | INFO  | sConsumer[input] | consumer1 | 70 -org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:45,363 | INFO  | sConsumer[input] | consumer2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:47,367 | INFO  | sConsumer[input] | consumer2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:47,367 | INFO  | sConsumer[input] | consumer1 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:49,369 | INFO  | sConsumer[input] | consumer1 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:49,369 | INFO  | sConsumer[input] | consumer2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:51,371 | INFO  | sConsumer[input] | consumer2  | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:51,371 | INFO  | sConsumer[input] | consumer1 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:53,373 | INFO  | sConsumer[input] | consumer2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n2014-12-15 15:47:53,373 | INFO  | sConsumer[input] | consumer1 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5h]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=1000\"/>\n          <setBody>\n             <constant>Hello chapter5i</constant>\n          </setBody>\n          <to uri=\"file:/tmp/exchange\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n$ /tmp/exchange$ ls -l\ntotal 16\n-rw-rw-r-- 1 jbonofre jbonofre 15 Dec 15 16:21 ID-latitude-51643-1418656861977-0-1\n-rw-rw-r-- 1 jbonofre jbonofre 15 Dec 15 16:21 ID-latitude-51643-1418656861977-0-3\n-rw-rw-r-- 1 jbonofre jbonofre 15 Dec 15 16:21 ID-latitude-51643-1418656861977-0-5\n-rw-rw-r-- 1 jbonofre jbonofre 15 Dec 15 16:21 ID-latitude-51643-1418656861977-0-7\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/exchange\"/>\n            <convertBodyTo type=\"java.lang.String\"/>\n          <to uri=\"log:route2\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n2014-12-15 17:04:11,258 | INFO  | :///tmp/exchange | route2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5i]\n2014-12-15 17:04:11,260 | INFO  | :///tmp/exchange | route2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5i]\n2014-12-15 17:04:11,260 | INFO  | :///tmp/exchange | route2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5i]\n2014-12-15 17:04:11,261 | INFO  | :///tmp/exchange | route2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5i]\n2014-12-15 17:04:11,262 | INFO  | :///tmp/exchange | route2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5i]\n2014-12-15 17:04:11,263 | INFO  | :///tmp/exchange | route2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5i]\n2014-12-15 17:04:11,263 | INFO  | :///tmp/exchange | route2 | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5i]\n\n```", "```java\n<route>\n   <from uri=\"direct:start\"/>\n   <inOnly uri=\"bean:myBean\"/>\n</route>\n```", "```java\n<route>\n   <from uri=\"direct:start\"/>\n   <setExchangePattern pattern=\"InOnly\"/>\n   <to uri=\"bean:myBean\"/>\n</route>\n```", "```java\n<route>\n   <from uri=\"direct:start\"/>\n   <to uri=\"bean:myBean\" pattern=\"InOnly\"/>\n</route>\n```", "```java\n<to uri=\"jms:queue:request?replyTo=response\"/>\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <choice>\n              <when>\n                 <xpath>//address='France'</xpath>\n                 <to uri=\"file:/tmp/out/france\"/>\n              </when>\n              <when>\n                 <xpath>//address='USA'</xpath>\n                 <to uri=\"file:/tmp/out/usa\"/>\n              </when>\n              <otherwise>\n                 <to uri=\"file:/tmp/out/others\"/>\n              </otherwise>\n  </choice>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n<person>\n<name>jbonofre</name>\n<address>France</address>\n</person>\n```", "```java\n<person>\n<name>Bob</name>\n<address>USA</address>\n</person>\n```", "```java\n<person>\n<name>Juan</name>\n<address>Spain</address>\n</person>\n```", "```java\n/tmp/out$ tree\n.\n├── france\n│ └── first.xml\n├── others\n│ └── third.xml\n└── usa\n└── second.xml\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <filter>\n               <xpath>//name='jbonofre'</xpath>\n               <to uri=\"direct:next\"/>\n          </filter>\n      </route>\n      <route>\n          <from uri=\"direct:next\"/>\n          <convertBodyTo type=\"java.lang.String\"/>\n          <to uri=\"log:file\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n<person>\n<name>jbonofre</name>\n<address>France</address>\n</person>\n```", "```java\n<person>\n<name>Bob</name>\n<address>USA</address>\n</person>\n```", "```java\n<person>\n<name>Juan</name>\n<address>Spain</address>\n</person>\n```", "```java\n2014-12-15 18:12:10,944 | INFO  | - file:///tmp/in | file | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body:\n<person><name>jbonofre</name><address>France</address></person>]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5l</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5l;\n\nimport java.util.Random;\n\npublic class DynamicRouterBean {\n\n  public String slip(String body) {\n      Random random = new Random();\n      int value = random.nextInt(1000);\n      if (value >= 500) {\n          return \"direct:large\";\n      } else {\n          return \"direct:small\";\n      }\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"dynamicRouterBean\" class=\"com.packt.camel.chapter5l.DynamicRouterBean\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody>\n              <constant>Hello chapter5l</constant>\n          </setBody>\n          <dynamicRouter>\n              <method ref=\"dynamicRouterBean\" method=\"slip\"/>\n          </dynamicRouter>\n      </route>\n      <route>\n          <from uri=\"direct:large\"/>\n          <to uri=\"log:large\"/>\n      </route>\n      <route>\n          <from uri=\"direct:small\"/>\n          <to uri=\"log:small\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5l/1.0- SNAPSHOT\nBundle ID: 73\n\n```", "```java\n2014-12-15 18:45:48,518 | INFO  | 1 - timer://fire | large | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5l]\n2014-12-15 18:45:48,518 | INFO  | 1 - timer://fire | small | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5l]\n2014-12-15 18:45:48,518 | INFO  | 1 - timer://fire | large | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5l]\n2014-12-15 18:45:48,519 | INFO  | 1 - timer://fire | small | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5l]\n2014-12-15 18:45:48,519 | INFO  | 1 - timer://fire | large | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5l]\n2014-12-15 18:45:48,519 | INFO  | 1 - timer://fire | large | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5l]\n2014-12-15 18:45:48,519 | INFO  | 1 - timer://fire | large | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5l]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:first?period=5000\"/>\n          <setBody><constant>Hello chapter5m</constant></setBody>\n          <multicast>\n              <to uri=\"direct:france\"/>\n              <to uri=\"direct:usa\"/>\n              <to uri=\"direct:spain\"/>\n          </multicast>\n      </route>\n      <route>\n          <from uri=\"direct:france\"/>\n          <to uri=\"log:france\"/>\n      </route>\n      <route>\n          <from uri=\"direct:usa\"/>\n          <to uri=\"log:usa\"/>\n      </route>\n      <route>\n          <from uri=\"direct:spain\"/>\n          <to uri=\"log:spain\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-15 18:59:17,198 | INFO  |  - timer://first | france | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5m]\n2014-12-15 18:59:17,199 | INFO  |  - timer://first | usa | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5m]\n2014-12-15 18:59:17,200 | INFO  |  - timer://first | spain | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5m]\n2014-12-15 18:59:22,180 | INFO  |  - timer://first | france | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5m]\n2014-12-15 18:59:22,182 | INFO  |  - timer://first | usa | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5m]\n2014-12-15 18:59:22,183 | INFO  |  - timer://first | spain | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5m]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5n</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5n;\n\nimport java.util.Random;\n\npublic class RouterBean {\n\n  public String populate(String body) {\n      Random random = new Random();\n      int value = random.nextInt(1000);\n      if (value >= 500) {\n          return \"direct:one,direct:two,direct:three\";\n      } else {\n          return \"direct:one,direct:two\";\n      }\n  }\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"routerBean\" class=\"com.packt.camel.chapter5n.RouterBean\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody>\n              <constant>Hello chapter5n</constant>\n          </setBody>\n          <setHeader headerName=\"recipientList\">\n              <method bean=\"routerBean\" method=\"populate\"/>\n          </setHeader>\n          <recipientList delimiter=\",\">\n              <header>recipientList</header>\n          </recipientList>\n      </route>\n      <route>\n          <from uri=\"direct:one\"/>\n          <to uri=\"log:one\"/>\n      </route>\n      <route>\n          <from uri=\"direct:two\"/>\n          <to uri=\"log:two\"/>\n      </route>\n      <route>\n          <from uri=\"direct:three\"/>\n          <to uri=\"log:three\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5n/1.0- SNAPSHOT\nBundle ID: 73\n\n```", "```java\n2014-12-15 19:12:32,975 | INFO  | 1 - timer://fire | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5n]\n2014-12-15 19:12:32,976 | INFO  | 1 - timer://fire | two | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5n]\n2014-12-15 19:12:37,949 | INFO  | 1 - timer://fire | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5n]\n2014-12-15 19:12:37,950 | INFO  | 1 - timer://fire | two | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5n]\n2014-12-15 19:12:37,950 | INFO  | 1 - timer://fire | three | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5n]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <split>\n              <xpath>//person</xpath>\n              <to uri=\"log:chunk\"/>\n          </split>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n<persons>\n   <person>\n    <name>jbonofre</name>\n    <address>France</address>\n   </person>\n   <person>\n    <name>Bob</name>\n    <address>USA</address>\n   </person>\n   <person>\n    <name>Juan</name>\n    <address>Spain</address>\n   </person>\n</persons>\n```", "```java\n2014-12-15 19:30:35,624 | INFO  | - file:///tmp/in | chunk | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: org.apache.xerces.dom.DeferredElementNSImpl, Body: <person> <name>jbonofre</name> <address>France</address> </person>]\n2014-12-15 19:30:35,624 | INFO  | - file:///tmp/in | chunk | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: org.apache.xerces.dom.DeferredElementNSImpl, Body: <person> <name>Bob</name> <address>USA</address>   </person>]\n2014-12-15 19:30:35,625 | INFO  | - file:///tmp/in | chunk | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: org.apache.xerces.dom.DeferredElementNSImpl, Body: <person>    <name>Juan</name>    <address>Spain</address> </person>]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5p</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <dependencies>\n      <dependency>\n          <groupId>org.apache.camel</groupId>\n          <artifactId>camel-core</artifactId>\n          <version>2.12.4</version>\n      </dependency>\n  </dependencies>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5p;\n\nimport org.apache.camel.Exchange;\nimport org.apache.camel.processor.aggregate.AggregationStrategy;\n\npublic class StringAggregator implements AggregationStrategy {\n\n  public Exchange aggregate(Exchange oldExchange, Exchange newExchange) {\n      if (oldExchange == null) {\n          return newExchange;\n      }\n      String oldBody = oldExchange.getIn().getBody(String.class);\n      String newBody = newExchange.getIn().getBody(String.class);\n      oldExchange.getIn().setBody(oldBody + \"+\" + newBody);\n      return oldExchange;\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"aggregator\" class=\"com.packt.camel.chapter5p.StringAggregator\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody>\n              <constant>Hello chapter5p</constant>\n          </setBody>\n          <setHeader headerName=\"id\">\n              <constant>same</constant>\n          </setHeader>\n          <aggregate strategyRef=\"aggregator\" completionSize=\"5\">\n              <correlationExpression>\n                  <simple>header.id</simple>\n              </correlationExpression>\n              <to uri=\"log:aggregated\"/>\n          </aggregate>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5p/1.0- SNAPSHOT\nBundle ID: 73\n\n```", "```java\n2014-12-15 21:07:22,386 | INFO  | 1 - timer://fire | aggregated | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5p+Hello chapter5p+Hello chapter5p+Hello chapter5p+Hello chapter5p]\n2014-12-15 21:07:47,380 | INFO  | 1 - timer://fire | aggregated | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5p+Hello chapter5p+Hello chapter5p+Hello chapter5p+Hello chapter5p]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:first?period=2000\"/>\n          <setBody><constant>one</constant></setBody>\n          <to uri=\"direct:resequencer\"/>\n      </route\n      <route>\n          <from uri=\"timer:second?period=2000\"/>\n          <setBody><constant>two</constant></setBody>\n          <to uri=\"direct:resequencer\"/>\n      </route>\n      <route>\n           <from uri=\"direct:resequencer\"/>\n           <resequence>\n              <simple>body</simple>\n              <to uri=\"log:requencer\"/>\n           </resequence>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-15 21:22:16,769 | INFO  | 0 - Batch Sender | requencer | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: one]\n2014-12-15 21:22:16,770 | INFO  | 0 - Batch Sender | requencer | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: two]\n2014-12-15 21:22:18,746 | INFO  | 0 - Batch Sender | requencer | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: one]\n2014-12-15 21:22:18,747 | INFO  | 0 - Batch Sender | requencer | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: two]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5r</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <dependencies>\n      <dependency>\n          <groupId>org.apache.camel</groupId>\n          <artifactId>camel-core</artifactId>\n          <version>2.12.4</version>\n      </dependency>\n  </dependencies>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5r;\n\nimport org.apache.camel.Exchange;\nimport org.apache.camel.processor.aggregate.AggregationStrategy;\n\npublic class MyAggregator implements AggregationStrategy {\n\n  public Exchange aggregate(Exchange oldExchange, Exchange   newExchange) {\n\n      if (oldExchange == null) {\n          return newExchange;\n      }\n\n      String persons = oldExchange.getIn().getBody(String.class);\n      String newPerson = newExchange.getIn().getBody(String.class);\n\n      // put orders together separating by semi colon\n      persons = persons + newPerson;\n      oldExchange.getIn().setBody(persons);\n\n      return oldExchange;\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"aggregator\" class=\"com.packt.camel.chapter5r.MyAggregator\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"file:/tmp/in\"/>\n          <split strategyRef=\"aggregator\">\n              <xpath>//person</xpath>\n              <to uri=\"log:person\"/>\n          </split>\n          <to uri=\"log:persons\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5r/1.0- SNAPSHOT\nBundle ID: 73\n\n```", "```java\n2014-12-15 21:42:38,803 | INFO  | - file:///tmp/in | person | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: org.apache.xerces.dom.DeferredElementNSImpl, Body: <person><name>jbonofre</name><address>France</address></person>]\n2014-12-15 21:42:38,804 | INFO  | - file:///tmp/in | person | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: org.apache.xerces.dom.DeferredElementNSImpl, Body: <person><name>Bob</name><address>USA</address></person>]\n2014-12-15 21:42:38,806 | INFO  | - file:///tmp/in | person | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: org.apache.xerces.dom.DeferredElementNSImpl, Body: <person><name>Juan</name><address>Spain</address></person>]\n2014-12-15 21:42:38,806 | INFO  | - file:///tmp/in | persons | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: <person><name>jbonofre</name><address>France</address></person><perso n><name>Bob</name><address>USA</address></person><person><name>Juan</ name><address>Spain</address></person>]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5s</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5s;\n\nimport java.util.Random;\n\npublic class RoutingSlipBean {\n\n  public String nextSteps(String body) {\n      Random random = new Random();\n      int value = random.nextInt(1000);\n      if (value >= 500) {\n          return \"direct:one,direct:two\";\n      } else {\n          return \"direct:one\";\n      }\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"routingSlipBean\" class=\"com.packt.camel.chapter5s.RoutingSlipBean\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody>\n              <constant>Hello chapter5s</constant>\n          </setBody>\n          <setHeader headerName=\"slip\">\n              <method bean=\"routingSlipBean\" method=\"nextSteps\"/>\n          </setHeader>\n          <routingSlip uriDelimiter=\",\">\n              <header>slip</header>\n          </routingSlip>\n      </route>\n      <route>\n          <from uri=\"direct:one\"/>\n          <to uri=\"log:one\"/>\n      </route>\n      <route>\n          <from uri=\"direct:two\"/>\n          <to uri=\"log:two\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5s/1.0- SNAPSHOT\nBundle ID: 73\n\n```", "```java\n2014-12-15 22:02:19,110 | INFO  | 1 - timer://fire | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5s]\n2014-12-15 22:02:19,111 | INFO  | 1 - timer://fire | two | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5s]\n2014-12-15 22:02:24,090 | INFO  | 1 - timer://fire | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5s]\n2014-12-15 22:02:29,090 | INFO  | 1 - timer://fire | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5s]\n2014-12-15 22:02:29,091 | INFO  | 1 - timer://fire | two | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5s]\n2014-12-15 22:02:34,090 | INFO  | 1 - timer://fire | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5s]\n2014-12-15 22:02:39,091 | INFO  | 1 - timer://fire | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5s]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:first?period=500\"/>\n          <setBody><constant>Hello chapter5t</constant></setBody>\n          <throttle timePeriodMillis=\"2000\">\n              <constant>1</constant>\n              <to uri=\"direct:sla\"/>\n          </throttle>\n      </route>\n      <route>\n          <from uri=\"direct:sla\"/>\n          <to uri=\"log:sla\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-16 07:05:03,106 | INFO  |  - timer://first | sla | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5t]\n2014-12-16 07:05:05,105 | INFO  |  - timer://first | sla | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5t]\n2014-12-16 07:05:07,105 | INFO  |  - timer://first | sla | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5t]\n2014-12-16 07:05:09,105 | INFO  |  - timer://first | sla | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5t]\n2014-12-16 07:05:11,104 | INFO  |  - timer://first | sla | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5t]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:first?period=500\"/>\n          <setBody><constant>Hello chapter5u</constant></setBody>\n          <to uri=\"log:regular\"/>\n          <sample messageFrequency=\"5\">\n              <to uri=\"direct:frequency\"/>\n          </sample>\n      </route>\n      <route>\n          <from uri=\"direct:frequency\"/>\n          <to uri=\"log:frequency\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-16 14:57:59,342 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:57:59,824 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:00,324 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:00,824 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:01,324 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:01,325 | INFO  |  - timer://first | frequency | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:01,824 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:02,324 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:02,825 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:03,325 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:03,825 | INFO  |  - timer://first | regular | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n2014-12-16 14:58:03,826 | INFO  |  - timer://first | frequency | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5u]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter5v</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\npackage com.packt.camel.chapter5v;\n\nimport java.util.Random;\n\npublic class DelayBean {\n\n  public int delay() {\n      Random random = new Random();\n      return random.nextInt(10000);\n  }\n\n}\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"delayBean\" class=\"com.packt.camel.chapter5v.DelayBean\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=1000\"/>\n          <setBody>\n              <constant>Hello chapter5v</constant>\n          </setBody>\n          <delay>\n              <method ref=\"delayBean\" method=\"delay\"/>\n          </delay>\n          <to uri=\"log:delay\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\nkaraf@root()> bundle:install -s mvn:com.packt.camel/chapter5v/1.0- SNAPSHOT\nBundle ID: 73\n\n```", "```java\n2014-12-16 17:23:57,477 | INFO  | 1 - timer://fire | delay | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5v]\n2014-12-16 17:23:58,914 | INFO  | 1 - timer://fire | delay | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5v]\n2014-12-16 17:24:05,976 | INFO  | 1 - timer://fire | delay | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5v]\n2014-12-16 17:24:14,083 | INFO  | 1 - timer://fire | delay | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5v]\n2014-12-16 17:24:20,893 | INFO  | 1 - timer://fire | delay | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5v]\n2014-12-16 17:24:30,350 | INFO  | 1 - timer://fire | delay | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5v]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:first?period=1000\"/>\n          <setBody><constant>Hello chapter5w</constant></setBody>\n          <loadBalance>\n               <roundRobin/>\n               <to uri=\"direct:one\"/>\n               <to uri=\"direct:two\"/>\n               <to uri=\"direct:three\"/>\n          </loadBalance>\n      </route>\n      <route>\n          <from uri=\"direct:one\"/>\n          <to uri=\"log:one\"/>\n      </route>\n      <route>\n          <from uri=\"direct:two\"/>\n          <to uri=\"log:two\"/>\n      </route>\n      <route>\n          <from uri=\"direct:three\"/>\n          <to uri=\"log:three\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-16 17:58:33,370 | INFO  |  - timer://first | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n2014-12-16 17:58:34,356 | INFO  |  - timer://first | two | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n2014-12-16 17:58:35,355 | INFO  |  - timer://first | three | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n2014-12-16 17:58:36,355 | INFO  |  - timer://first | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n2014-12-16 17:58:37,355 | INFO  |  - timer://first | two | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n2014-12-16 17:58:38,355 | INFO  |  - timer://first | three | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n2014-12-16 17:58:39,355 | INFO  |  - timer://first | one | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n2014-12-16 17:58:40,356 | INFO  |  - timer://first | two | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5w]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:first?period=1000\"/>\n          <setBody><constant>Hello chapter5x</constant></setBody>\n          <to uri=\"log:main\"/>\n          <loop>\n              <constant>3</constant>\n              <to uri=\"direct:loop\"/>\n          </loop>\n      </route>\n      <route>\n          <from uri=\"direct:loop\"/>\n          <to uri=\"log:loop\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-16 18:19:35,000 | INFO  |  - timer://first | main | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n2014-12-16 18:19:35,001 | INFO  |  - timer://first | loop | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n2014-12-16 18:19:35,002 | INFO  |  - timer://first | loop | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n2014-12-16 18:19:35,002 | INFO  |  - timer://first | loop | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n2014-12-16 18:19:35,982 | INFO  |  - timer://first | main | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n2014-12-16 18:19:35,982 | INFO  |  - timer://first | loop | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n2014-12-16 18:19:35,983 | INFO  |  - timer://first | loop | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n2014-12-16 18:19:35,983 | INFO  |  - timer://first | loop | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5x]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody><constant>Hello chapter5y</constant></setBody>\n          <wireTap uri=\"direct:wiretap\"/>\n          <delay>\n             <constant>3000</constant>\n             <to uri=\"log:main\"/>\n          </delay>\n      </route>\n      <route>\n          <from uri=\"direct:wiretap\"/>\n          <to uri=\"log:wiretap\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-16 21:41:12,553 | INFO  | ead #2 - WireTap | wiretap | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5y]\n2014-12-16 21:41:15,550 | INFO  | 1 - timer://fire | main | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5y]\n2014-12-16 21:41:17,540 | INFO  | ead #3 - WireTap | wiretap | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5y]\n2014-12-16 21:41:20,540 | INFO  | 1 - timer://fire | main | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5y]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n      <route>\n          <from uri=\"timer:fire?period=5000\"/>\n          <setBody><constant>Hello chapter5z</constant></setBody>\n          <to uri=\"log:component\"/>\n          <log message=\"Hey, you said ${body} !\" loggingLevel=\"WARN\" logName=\"EIP\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache-camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\n\n```", "```java\n2014-12-16 21:47:34,641 | INFO  | 1 - timer://fire | component | 70 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String, Body: Hello chapter5z]\n2014-12-16 21:47:34,642 | WARN  | 1 - timer://fire | EIP | 70 - org.apache.camel.camel-core - 2.12.4 | Hey, you said Hello chapter5z !\n\n```"]