["```java\n$ cd $WILDFLY_HOME\n$ cp -a standalone sec-std-cfg-node-1\n```", "```java\n    jboss.bind.address=10.0.0.1\n    ```", "```java\n    $ sudo ifconfig eth0:1 10.0.0.1 netmask 255.255.255.0\n    ```", "```java\n    $ cd $WILDFLY_HOME\n    $ ./bin/standalone.sh -Djboss.server.base.dir=sec-std-cfg-node-1 -P wildflycookbook.properties\n    ...\n    17:24:05,588 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-16) WFLYUT0006: Undertow HTTP listener default listening on /10.0.0.1:8080\n    ...\n    17:24:06,019 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 9.0.0.Beta2 (WildFly Core 1.0.0.Beta2) started in 2822ms - Started 202 of 379 services (210 services are lazy, passive or on-demand)\n    ```", "```java\n<subsystem >\n    <datasources>\n    <datasource jndi-name=\"java:jboss/MySqlDS\" pool-name=\"MySqlDS\">\n      <connection-url>jdbc:mysql://mysql-prod-cluster-node-1:3306/store</connection-url>\n      <driver>mysql</driver>\n      <security>\n        <user-name>root</user-name>\n        <password>1password</password>\n      </security>\n    </datasource>\n    <drivers/>\n    </datasources>\n</subsystem>\n```", "```java\n<subsystem >\n    <datasources>\n    <datasource jndi-name=\"java:jboss/MySqlDS\" pool-name=\"MySqlDS\">\n      <connection-url>${db.prod.conn.url}</connection-url>\n      <driver>mysql</driver>\n      <security>\n        <user-name>${db.prod.uid}</user-name>\n        <password>${db.prod.pwd}</password>\n      </security>\n    </datasource>\n    <drivers/>\n    </datasources>\n</subsystem>\n```", "```java\ndb.prod.conn.url=jdbc:mysql://mysql-uat-cluster-node-1:3306/store\ndb.prod.uid=uat\ndp.prod.pwd=uat-password\n```", "```java\n$ md5sum <<< abcdef\n5ab557c937e38f15291c04b7e99544ad  -\n$ md5sum <<< abcdeF\n7ab0aeb4ce14fd8efa00f3c903f72cf5  -\n```", "```java\n$ cd $WILDFLY_HOME\n$ cp -a standalone sec-std-cfg-node-2\n```", "```java\n    $ cd $WILDFLY_HOME\n    $ java -cp modules/system/layers/base/org/picketbox/main/picketbox-4.9.0.Beta2.jar org.picketbox.datasource.security.SecureIdentityLoginModule cookbook.2015\n    Encoded password: 2663ecfd3089b80f99cabb669aa2636e\n    ```", "```java\n    <security-domain name=\"encrypted-security-domain\" cache-type=\"default\">\n      <authentication>\n        <login-module \n        code=\"org.picketbox.datasource.security.SecureIdentityLoginModule\" flag=\"required\">\n          <module-option name=\"username\" value=\"root\"/>\n          <module-option name=\"password\" value=\"2663ecfd3089b80f99cabb669aa2636e\"/>\n        </login-module>\n      </authentication>\n    </security-domain>\n    ```", "```java\n    <subsystem >\n        <datasources>\n        <datasource jndi-name=\"java:jboss/MySqlDS\" pool-\n        name=\"MySqlDS\">\n          <connection-url>jdbc:mysql://mysql-prod-cluster-node-1:3306/store</connection-url>\n          <driver>mysql</driver>\n          <security>\n            <security-domain>encrypted-security-domain</security-domain>\n          </security>\n        </datasource>\n        <drivers/>\n        </datasources>\n    </subsystem>\n    ```", "```java\n<subsystem >\n    <datasources>\n    <datasource jndi-name=\"java:jboss/MySqlDS\" pool-name=\"MySqlDS\">\n      <connection-url>jdbc:mysql://mysql-prod-cluster-node-1:3306/store</connection-url>\n      <driver>mysql</driver>\n      <security>\n        <user-name>root</user-name>\n        <password>2663ecfd3089b80f99cabb669aa2636e</password>\n      </security>\n    </datasource>\n    <drivers/>\n    </datasources>\n</subsystem>\n```", "```java\n    $ cd $WILDFLY_HOME\n    $ cp -a standalone sec-std-cfg-node-3\n    ```", "```java\n    $ cd $WILDFLY_HOME\n    $ cd sec-std-cfg-node-3/configuration\n    $ mkdir vault\n    $ cd vault\n    $ keytool -v -genkey -alias wildfly.vault -keyalg RSA -keysize 2048 -sigalg SHA1withRSA -keystore wildfly.vault.keystore\n    Enter keystore password: [vault.2015]\n    Re-enter new password: [vault.2015]\n    What is your first and last name?\n      [Unknown]:  WildFly Cookbook\n    What is the name of your organizational unit?\n      [Unknown]:  Packt Publishing\n    What is the name of your organization?\n      [Unknown]:  packtpub.com\n    What is the name of your City or Locality?\n      [Unknown]:  Birmingham\n    What is the name of your State or Province?\n      [Unknown]:  GB\n    What is the two-letter country code for this unit?\n      [Unknown]:  UK\n    Is CN=WildFly Cookbook, OU=Packt Publishing, O=packtpub.com, L=Birmingham, ST=GB, C=UK correct?\n      [no]:  yes\n\n    Generating 2,048 bit RSA key pair and self-signed certificate (SHA1withRSA) with a validity of 90 days\n      for: CN=WildFly Cookbook, OU=Packt Publishing, O=packtpub.com, L=Birmingham, ST=GB, C=UK\n    Enter key password for <wildfly.vault>\n      (RETURN if same as keystore password):\n    [Storing wildfly.vault.keystore]\n    ```", "```java\n    $ keytool -list -v -keystore wildfly.vault.keystore\n    Enter keystore password:\n\n    Keystore type: JKS\n    Keystore provider: SUN\n\n    Your keystore contains 1 entry\n\n    Alias name: wildfly.vault\n    Creation date: Dec 6, 2014\n    Entry type: PrivateKeyEntry\n    Certificate chain length: 1\n    Certificate[1]:\n    Owner: CN=WildFly Cookbook, OU=Packt Publishing, O=packtpub.com, L=Birmingham, ST=GB, C=UK\n    Issuer: CN=WildFly Cookbook, OU=Packt Publishing, O=packtpub.com, L=Birmingham, ST=GB, C=UK\n    Serial number: 6cfc82e9\n    Valid from: Sat Dec 06 14:43:16 CET 2014 until: Fri Mar 06 14:43:16 CET 2015\n    Certificate fingerprints:\n       MD5:  FA:A6:5F:E6:7F:04:70:7E:70:FA:56:E7:9C:8A:B8:95\n       SHA1: D2:18:BE:44:58:B1:57:54:0A:69:F9:E2:DB:3F:A7:82:7D:DE:DB:6B\n       SHA256: 8D:DF:16:64:3D:F6:08:08:71:8A:5F:4C:16:27:82:C8:20:75:FC:67:DD:9D:68:0E:0C:6F:08:7F:FA:E8:5D:18\n       Signature algorithm name: SHA1withRSA\n       Version: 3\n\n    Extensions:\n\n    #1: ObjectId: 2.5.29.14 Criticality=false\n    SubjectKeyIdentifier [\n    KeyIdentifier [\n    0000: 68 21 C0 CE C1 A5 A0 11   3D 5B EE E8 18 92 72 ED  h!......=[....r.\n    0010: C4 28 46 2B                                        .(F+\n    ]\n    ]\n\n    *******************************************\n    *******************************************\n    ```", "```java\n    $ cd $WILDFLY_HOME/sec-std-cfg-node-3/configuration\n    $ $WILDFLY_HOME/bin/vault.sh -a PASSWORD -x cookbook.2015 -b DB-PROD -i 50 -k vault/wildfly.vault.keystore -p vault.2015 -s 86427531 -v wildfly.vault\n\n    ...\n\n    Dec 06, 2014 10:28:20 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init\n    INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready\n    Secured attribute value has been stored in Vault.\n    Please make note of the following:\n    ********************************************\n    Vault Block:DB-PROD\n    Attribute Name:PASSWORD\n    Configuration should be done as follows:\n    VAULT::DB-PROD::PASSWORD::1\n    ********************************************\n    Vault Configuration in WildFly configuration file:\n    ********************************************\n    ...\n    </extensions>\n    <vault>\n      <vault-option name=\"KEYSTORE_URL\" value=\"vault/wildfly.vault.keystore\"/>\n      <vault-option name=\"KEYSTORE_PASSWORD\" value=\"MASK-1cn1ENbx4KLXxve5VvGlPy\"/>\n      <vault-option name=\"KEYSTORE_ALIAS\" value=\"wildfly.vault\"/>\n      <vault-option name=\"SALT\" value=\"86427531\"/>\n      <vault-option name=\"ITERATION_COUNT\" value=\"50\"/>\n      <vault-option name=\"ENC_FILE_DIR\" value=\"vault/\"/>\n    </vault><management> ...\n    ********************************************\n    ```", "```java\n    <datasource jndi-name=\"java:jboss/datasources/VaultDS\" pool-name=\"VaultDS\" enabled=\"true\" use-java-context=\"true\">\n        <connection-url>jdbc:mysql://192.168.59.103:3306/test\n    </connection-url>\n        <driver>mysql</driver>\n        <security>\n            <user-name>root</user-name>\n            <password>${VAULT::DB-PROD::PASSWORD::1}</password>\n        </security>\n    </datasource>\n    ```", "```java\n    <datasource jndi-name=\"java:jboss/datasources/VaultDS\" pool-name=\"VaultDS\" enabled=\"true\">\n        <connection-url>jdbc:mysql://192.168.59.103:3306/test</connection-\n        url>\n        <driver>mysql</driver>\n        <pool>\n            <min-pool-size>5</min-pool-size>\n            <max-pool-size>5</max-pool-size>\n            <prefill>true</prefill>\n        </pool>\n        <security>\n            <user-name>root</user-name>\n            <password>${VAULT::DB-PROD::PASSWORD::1}</password>\n        </security>\n    </datasource>\n    ```", "```java\n    $ ./bin/standalone.sh -Djboss.server.base.dir=sec-std-cfg-node-3\n    ...\n    15:32:35,607 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-4) JBAS015012: Started FileSystemDeploymentService for directory /opt/wildfly/sec-std-cfg-node-2/deployments\n    15:32:35,636 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-1) JBAS010400: Bound data source [java:jboss/datasources/VaultDS]\n    15:32:35,636 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-13) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]\n    15:32:35,676 INFO  [org.jboss.ws.common.management] (MSC service thread 1-12) JBWS022052: Starting JBoss Web Services - Stack CXF Server 4.2.4.Final\n    15:32:35,722 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://127.0.0.1:9990/management\n    15:32:35,723 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990\n    15:32:35,723 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: WildFly 8.1.0.Final \"Kenny\" started in 3854ms - Started 203 of 251 services (81 services are lazy, passive or on-demand)\n    ```", "```java\n    $ ./bin/jboss-cli.sh\n    You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.\n    [disconnected /] connect\n    [standalone@localhost:9990 /] /subsystem=datasources/data-source=VaultDS/statistics=pool:read-resource(include-runtime=true)\n    {\n        \"outcome\" => \"success\",\n        \"result\" => {\n            \"ActiveCount\" => \"5\",\n            \"AvailableCount\" => \"5\",\n            \"AverageBlockingTime\" => \"0\",\n            \"AverageCreationTime\" => \"36\",\n            \"AverageGetTime\" => \"0\",\n            \"BlockingFailureCount\" => \"0\",\n            \"CreatedCount\" => \"5\",\n            \"DestroyedCount\" => \"0\",\n            \"IdleCount\" => \"5\",\n            \"InUseCount\" => \"0\",\n            \"MaxCreationTime\" => \"43\",\n            \"MaxGetTime\" => \"0\",\n            \"MaxUsedCount\" => \"1\",\n            \"MaxWaitCount\" => \"0\",\n            \"MaxWaitTime\" => \"0\",\n            \"TimedOut\" => \"0\",\n            \"TotalBlockingTime\" => \"0\",\n            \"TotalCreationTime\" => \"180\",\n            \"TotalGetTime\" => \"0\",\n            \"WaitCount\" => \"0\"\n        }\n    }\n    [standalone@localhost:9990 /]\n    ```", "```java\n    <datasource jndi-name=\"java:jboss/datasources/UnsecureDS\" pool-name=\"UnsecureDS\" enabled=\"true\">\n        <connection-url>jdbc:mysql://192.168.59.103:3306/test</connection-url>\n        <driver>mysql</driver>\n        <pool>\n            <min-pool-size>2</min-pool-size>\n            <max-pool-size>2</max-pool-size>\n            <prefill>true</prefill>\n        </pool>\n        <security>\n            <user-name>root</user-name>\n            <password>cookbook.2015</password>\n        </security>\n    </datasource>\n    <datasource jndi-name=\"java:jboss/datasources/WrongVaultDS\" pool-name=\"WrongVaultDS\" enabled=\"true\">\n        <connection-url>jdbc:mysql://192.168.59.103:3306/test</connection-url>\n        <driver>mysql</driver>\n        <pool>\n            <min-pool-size>1</min-pool-size>\n            <max-pool-size>1</max-pool-size>\n            <prefill>true</prefill>\n        </pool>\n        <security>\n            <user-name>root</user-name>\n            <password>${VAULT::DB-TEST::PASSWORD::1}</password>\n        </security>\n    </datasource>\n    ```", "```java\n    $ ./bin/standalone.sh -Djboss.server.base.dir=sec-std-cfg-node-3\n    ...\n    15:52:08,452 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 27) JBAS014612: Operation (\"add\") failed - address: ([\n        (\"subsystem\" => \"datasources\"),\n     (\"data-source\" => \"WrongVaultDS\")\n    ]): java.lang.SecurityException: JBAS013311: Security Exception\n     at  org.jboss.as.security.vault.RuntimeVaultReader.retrieveFromVault(RuntimeVaultReader.java:104)\n     at org.jboss.as.server.RuntimeExpressionResolver.resolvePluggableExpression(RuntimeExpressionResolver.java:45)\n    ...\n    15:52:08,499 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-2) JBAS017519: Undertow HTTP listener default listening on /127.0.0.1:8080\n    15:52:08,499 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) JBAS017519: Undertow AJP listener ajp listening on /127.0.0.1:8009\n    15:52:08,631 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) \"JBAS014784: Failed executing subsystem datasources boot operations\"\n    15:52:08,633 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) JBAS014613: Operation (\"parallel-subsystem-boot\") failed - address: ([]) - failure description: \"\\\"JBAS014784: Failed executing subsystem datasources boot operations\\\"\"\n    15:52:08,670 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-1) JBAS015012: Started FileSystemDeploymentService for directory /Users/foogaro/wildfly-8.1.0.Final/sec-std-cfg-node-2/deployments\n    15:52:08,705 INFO  [org.jboss.ws.common.management] (MSC service thread 1-5) JBWS022052: Starting JBoss Web Services - Stack CXF Server 4.2.4.Final\n    15:52:08,706 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) JBAS014613: Operation (\"add\") failed - address: ([\n     (\"subsystem\" => \"datasources\"),\n     (\"data-source\" => \"WrongVaultDS\")\n    ]) - failure description: \"JBAS014749: Operation handler failed: JBAS013311: Security Exception\"\n    15:52:08,748 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://127.0.0.1:9990/management\n    15:52:08,748 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990\n    15:52:08,749 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: WildFly 8.1.0.Final \"Kenny\" started in 3150ms - Started 183 of 231 services (81 services are lazy, passive or on-demand)\n    ```", "```java\n    15:57:07,585 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-11) JBAS010400: Bound data source [java:jboss/datasources/VaultDS]\n    15:57:07,585 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-16) JBAS010400: Bound data source [java:jboss/datasources/UnsecureDS]\n    ```", "```java\n$ ./bin/vault.sh --help\nusage: vault.sh <empty> |  [-a <arg>] [-b <arg>] -c | -h | -x <arg> [-e\n       <arg>]  [-i <arg>] [-k <arg>] [-p <arg>] [-s <arg>] [-v <arg>]\n -a,--attribute <arg>           Attribute name\n -b,--vault-block <arg>         Vault block\n -c,--check-sec-attr            Check whether the secured attribute\n                                already exists in the Vault\n -e,--enc-dir <arg>             Directory containing encrypted files\n -h,--help                      Help\n -i,--iteration <arg>           Iteration count\n -k,--keystore <arg>            Keystore URL\n -p,--keystore-password <arg>   Keystore password\n -s,--salt <arg>                8 character salt\n -v,--alias <arg>               Vault keystore alias\n -x,--sec-attr <arg>            Secured attribute value (such as\n                                password)to store\n```", "```java\n$ cd $WILDFLY_HOME/sec-std-cfg-node-3/configuration\n$ $WILDFLY_HOME/bin/vault.sh -a PASSWORD -x cookbook.2015 -b DB-PROD -i 50 -k vault/wildfly.vault.keystore -p vault.2015 -s 86427531 -v wildfly.vault\n```", "```java\n    $ cd $WILDFLY_HOME/sec-std-cfg-node-2/configuration\n    $ $WILDFLY_HOME/bin/vault.sh -a PASSWORD -x cookbook.2015 -b DB-TEST -i 50 -k vault/wildfly.vault.keystore -p vault.2015 -s 86427531 -v wildfly.vault\n    …\n    Dec 08, 2014 4:20:17 PM org.picketbox.plugins.vault.PicketBoxSecurityVault init\n    INFO: PBOX000361: Default Security Vault Implementation Initialized and Ready\n    Secured attribute value has been stored in Vault.\n    Please make note of the following:\n    ********************************************\n    Vault Block:DB-TEST\n    Attribute Name:PASSWORD\n    Configuration should be done as follows:\n    VAULT::DB-TEST::PASSWORD::1\n    ********************************************\n    Vault Configuration in WildFly configuration file:\n    ********************************************\n    ...\n    </extensions>\n    <vault>\n      <vault-option name=\"KEYSTORE_URL\" value=\"vault/wildfly.vault.keystore\"/>\n      <vault-option name=\"KEYSTORE_PASSWORD\" value=\"MASK-1cn1ENbx4KLXxve5VvGlPy\"/>\n      <vault-option name=\"KEYSTORE_ALIAS\" value=\"wildfly.vault\"/>\n      <vault-option name=\"SALT\" value=\"86427531\"/>\n      <vault-option name=\"ITERATION_COUNT\" value=\"50\"/>\n      <vault-option name=\"ENC_FILE_DIR\" value=\"vault/\"/>\n    </vault><management> ...\n    ********************************************\n    ```", "```java\n    <datasource jndi-name=\"java:jboss/datasources/WrongVaultDS\" pool-name=\"WrongVaultDS\" enabled=\"true\">\n        <connection-url>jdbc:mysql://192.168.59.103:3306/test</connection-url>\n        <driver>mysql</driver>\n        <pool>\n            <min-pool-size>1</min-pool-size>\n            <max-pool-size>1</max-pool-size>\n            <prefill>true</prefill>\n        </pool>\n        <security>\n            <user-name>root</user-name>\n            <password>${VAULT::DB-TEST::PASSWORD::1}</password>\n        </security>\n    </datasource>\n    ```", "```java\n    $ ./bin/standalone.sh -Djboss.server.base.dir=sec-std-cfg-node-3\n    ...\n    16:33:02,063 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) JBAS010400: Bound data source [java:jboss/datasources/WrongVaultDS]\n    16:33:02,063 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]\n    16:33:02,063 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010400: Bound data source [java:jboss/datasources/VaultDS]\n    16:33:02,063 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-9) JBAS010400: Bound data source [java:jboss/datasources/UnsecureDS]\n    16:33:02,064 INFO  [org.jboss.ws.common.management] (MSC service thread 1-5) JBWS022052: Starting JBoss Web Services - Stack CXF Server 4.2.4.Final\n    16:33:02,118 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://127.0.0.1:9990/management\n    16:33:02,119 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990\n    16:33:02,120 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: WildFly 8.1.0.Final \"Kenny\" started in 1992ms - Started 203 of 251 services (81 services are lazy, passive or on-demand)\n    ```"]