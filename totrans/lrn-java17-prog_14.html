<html><head></head><body>
		<div id="_idContainer159">
			<h1 id="_idParaDest-267"><em class="italic"><a id="_idTextAnchor266"/>Chapter 12</em>: Java GUI Programming</h1>
			<p>This chapter provides an overview of Java <strong class="bold">graphical user interface</strong> (<strong class="bold">GUI</strong>) technologies and demonstrates how the JavaFX kit can be used to create a GUI application. The latest versions of JavaFX not only provide many helpful features but also allow for the preserving and embedding of legacy implementations and styles.</p>
			<p>In a certain respect, the GUI is the most important part of an application. It directly interacts with the user. If the GUI is inconvenient, unappealing to the eye, or confusing, even the best backend solution might not persuade the user to use this application. By contrast, a well-thought-out, intuitive, and nicely designed GUI helps to retain users, even if the application does not do the job as well as its competitors.</p>
			<p>The agenda of the chapter requires us to cover the following topics: </p>
			<ul>
				<li>Java GUI technologies</li>
				<li>JavaFX fundamentals</li>
				<li>HelloWorld with JavaFX</li>
				<li>Control elements</li>
				<li>Charts</li>
				<li>Applying CSS</li>
				<li>Using FXML</li>
				<li>Embedding HTML</li>
				<li>Playing media</li>
				<li>Adding effects</li>
			</ul>
			<p>By the end of the chapter, you will be able to create a user interface using Java GUI technologies, as well as creating and using a user interface project as a standalone application.</p>
			<h1 id="_idParaDest-268"><a id="_idTextAnchor267"/>Technical requirements</h1>
			<p>To be able to execute the code examples provided in this chapter, you will need the following:</p>
			<ul>
				<li>A computer with a Microsoft Windows, Apple macOS, or Linux operating system</li>
				<li>Java SE version 17 or later</li>
				<li>An IDE or code editor of your choice</li>
			</ul>
			<p>The instructions for how to set up Java SE and the IntelliJ IDEA editor were provided in <a href="B18388_01_ePub.xhtml#_idTextAnchor015"><em class="italic">Chapter 1</em></a>, <em class="italic">Getting Started with Java 17</em>. The files with the code examples for this chapter are available on GitHub at <a href="https://github.com/PacktPublishing/Learn-Java-17-Programming.git">https://github.com/PacktPublishing/Learn-Java-17-Programming.git</a> in the <strong class="source-inline">examples/src/main/java/com/packt/learnjava/ch12_gui</strong> folder and in the <strong class="source-inline">gui</strong> folder, which contains a standalone GUI application. </p>
			<h1 id="_idParaDest-269"><a id="_idTextAnchor268"/>Java GUI technologies</h1>
			<p>The name <strong class="bold">Java Foundation Classes</strong> (<strong class="bold">JFC</strong>) may <a id="_idIndexMarker1365"/>be a source<a id="_idIndexMarker1366"/> of much confusion. It implies <em class="italic">the classes that are at the foundation of Java</em>, while, in fact, JFC includes only classes and interfaces related to the GUI. To be precise, JFC is a collection of three frameworks: the <strong class="bold">Abstract Window Toolkit</strong> (<strong class="bold">AWT</strong>), Swing, and <a id="_idIndexMarker1367"/>Java 2D. </p>
			<p>JFC is part <a id="_idIndexMarker1368"/>of <strong class="bold">Java Class Library</strong> (<strong class="bold">JCL</strong>), although the name JFC came into being only in 1997, while AWT was part of JCL from the very beginning. At that time, Netscape developed a GUI library called <strong class="bold">Internet Foundation Classes</strong> (<strong class="bold">IFC</strong>), and <a id="_idIndexMarker1369"/>Microsoft created <strong class="bold">Application Foundation Classes</strong> (<strong class="bold">AFC</strong>) for<a id="_idIndexMarker1370"/> GUI development, too. So, when Sun Microsystems and Netscape decided to form a new GUI library, they inherited the word <em class="italic">Foundation</em> and created JFC. The Swing framework took over the Java GUI programming from AWT and was successfully used for almost two decades. </p>
			<p>A new GUI programming toolkit, JavaFX, was added to JCL in Java 8. It was removed from JCL in Java 11, and since then, has resided as an open source project supported by the company Gluon as a downloadable module in addition to the JDK. JavaFX uses a somewhat different approach to GUI programming than AWT and Swing. It presents a more consistent <a id="_idIndexMarker1371"/>and simpler design and has a good chance of being a winning Java GUI-programming toolkit.</p>
			<h1 id="_idParaDest-270"><a id="_idTextAnchor269"/>JavaFX fundamentals</h1>
			<p>Cities such <a id="_idIndexMarker1372"/>as New York, London, Paris, and Moscow have many theaters, and people who live there cannot avoid hearing about new plays and productions released almost every week. It makes them inevitably familiar with theater terminology, in which the terms <em class="italic">stage</em>, <em class="italic">scene</em>, and <em class="italic">event</em> are probably used most often. These three terms are at the foundation of a JavaFX application structure, too.</p>
			<p>The top-level container in JavaFX that holds all other components is represented by the <strong class="source-inline">javafx.stage.Stage</strong> class. So, you can say that, in the JavaFX application, everything happens on a <em class="italic">stage</em>. From a user perspective, it is a display area or window where all the controls and components perform their actions (like actors in a theater). And, similar to the actors in a theater, they do it in the context of a <em class="italic">scene</em>, represented by the <strong class="source-inline">javafx.scene.Scene</strong> class. So, a JavaFX application, like a play in a theater, is composed of <strong class="source-inline">Scene</strong> objects presented inside the <strong class="source-inline">Stage</strong> object one at a time. Each <strong class="source-inline">Scene</strong> object contains a graph that defines the positions of the scene actors (called <strong class="bold">nodes</strong>) in <a id="_idIndexMarker1373"/>JavaFX: controls, layouts, groups, shapes, and so on. Each of them extends the abstract class, <strong class="source-inline">javafx.scene.Node</strong>. </p>
			<p>Some of the nodesâ€™ controls are associated with <em class="italic">events</em>: a button clicked or a checkbox checked, for example. These events can be processed by the event handler associated with the corresponding control element. </p>
			<p>The main class of a JavaFX application has to extend the abstract <strong class="source-inline">java.application.Application</strong> class, which has several life cycle methods. We list them in the sequence of the invocation: <strong class="source-inline">launch()</strong>, <strong class="source-inline">init()</strong>, <strong class="source-inline">notifyPreloader()</strong>, <strong class="source-inline">start()</strong>, and <strong class="source-inline">stop()</strong>. It looks like quite a few to remember. But, most probably, you need to implement only one method, <strong class="source-inline">start()</strong>, where the actual GUI is constructed and executed. Nevertheless, we will review all the life cycle methods just for completeness:</p>
			<ul>
				<li><strong class="source-inline">static void launch(Class&lt;? extends Application&gt; appClass, String... args)</strong>: This launches the application and is often called the <strong class="source-inline">main</strong> method; it does not return until <strong class="source-inline">Platform.exit()</strong> is called or all the application windows close. The <strong class="source-inline">appClass</strong> parameter must be a public subclass of the <strong class="source-inline">Application</strong> class with a public no-argument constructor.</li>
				<li><strong class="source-inline">static void launch(String... args)</strong>: The same as the preceding method, assuming that the public subclass of the <strong class="source-inline">Application</strong> class is the immediately enclosing class. This is the method most often used to launch the JavaFX application; we are going to use it in our examples, too.</li>
				<li><strong class="source-inline">void init()</strong>: This method is called after the <strong class="source-inline">Application</strong> class is loaded; it is typically used for some kind of resource initialization. The default implementation does nothing, and we are not going to use it.</li>
				<li><strong class="source-inline">void notifyPreloader(Preloader.PreloaderNotification info)</strong>: This can be used to show progress when the initialization takes a long time; we are<a id="_idIndexMarker1374"/> not going to use it.</li>
				<li><strong class="source-inline">abstract void start(Stage primaryStage)</strong>: The method we are going to implement. It is called after the <strong class="source-inline">init()</strong> method returns, and after the system is ready to do the main job. The <strong class="source-inline">primaryStage</strong> parameter is the stage where the application is going to present its scenes.</li>
				<li><strong class="source-inline">void stop()</strong>: This is called when the application should stop, and can be used to release the resources. The default implementation does nothing, and we are not going to use it.</li>
			</ul>
			<p>The API of the JavaFX toolkit can<a id="_idIndexMarker1375"/> be found online (<a href="https://openjfx.io/javadoc/18//">https://openjfx.io/javadoc/18//</a>). As of the time of writing, the latest version is <em class="italic">18</em>. Oracle provides extensive documentation and code examples, too (<a href="https://docs.oracle.com/javafx/2//">https://docs.oracle.com/javafx/2//</a>). The documentation includes the description and user manual of Scene Builder (a development tool that provides a visual layout environment and lets you quickly design a user interface for the JavaFX application without writing any code). This tool may be useful for creating a complex and intricate GUI, and many people use it all the time. In this book though, we will concentrate on JavaFX code writing without using this tool.</p>
			<p>To be able to do it, the following are the necessary steps:</p>
			<ol>
				<li>Add the following dependency to the <strong class="source-inline">pom.xml</strong> file:<p class="source-code">&lt;dependency&gt;</p><p class="source-code">Â Â Â &lt;groupId&gt;org.openjfx&lt;/groupId&gt;</p><p class="source-code">Â Â Â &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;</p><p class="source-code">Â Â Â &lt;version&gt;18&lt;/version&gt;</p><p class="source-code">&lt;/dependency&gt;</p><p class="source-code">&lt;dependency&gt;</p><p class="source-code">Â Â Â &lt;groupId&gt;org.openjfx&lt;/groupId&gt;</p><p class="source-code">Â Â Â &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;</p><p class="source-code">Â Â Â &lt;version&gt;18&lt;/version&gt;</p><p class="source-code">&lt;/dependency&gt;</p></li>
				<li>Download<a id="_idIndexMarker1376"/> the JavaFX <a id="_idIndexMarker1377"/>SDK for your OS from <a href="https://gluonhq.com/products/javafx/">https://gluonhq.com/products/javafx/</a> (the <strong class="source-inline">openjfx-18_osx-x64_bin-sdk.zip</strong> file, as of the time of writing) and unzip it in any directory.</li>
				<li>Assuming you have unzipped the JavaFX SDK into the <strong class="source-inline">/path/javafx-sdk/</strong> folder, add the following options to the Java command, which will launch your JavaFX application on the Linux platform:<p class="source-code">--module-path /path/javafx-sdk/libÂ Â Â </p><p class="source-code">--add-modules=javafx.controls,javafx.fxml</p></li>
			</ol>
			<p>On Windows, the same options look as follows:</p>
			<p class="source-code">--module-path C:\path\javafx-sdk\libÂ Â </p>
			<p class="source-code">--add-modules=javafx.controls,javafx.fxml</p>
			<p><strong class="source-inline">/path/JavaFX/</strong> and <strong class="source-inline">C:\path\JavaFX\</strong> are the placeholders that you need to substitute with the actual path to the folder that contains the JavaFX SDK.</p>
			<p>Assuming that the applicationâ€™s main class is <strong class="source-inline">HelloWorld</strong>, in the case of IntelliJ, enter the preceding options into the <strong class="source-inline">VM options</strong> field, as follows (the example is for Linux):</p>
			<div>
				<div id="_idContainer111" class="IMG---Figure">
					<img src="image/B18388_Figure_12.1.jpg" alt=""/>
				</div>
			</div>
			<p>These options have to be added to <strong class="source-inline">Run/Debug Configurations</strong> of the <strong class="source-inline">HelloWorld</strong>, <strong class="source-inline">BlendEffect</strong>, and <strong class="source-inline">OtherEffects</strong> classes of the <strong class="source-inline">ch12_gui</strong> package of the source code. If you prefer a different IDE or have a different OS, you can find <a id="_idIndexMarker1378"/>recommendations on how to set it in the <strong class="source-inline">openjfx.io</strong> documentation (<a href="https://openjfx.io/openjfx-docs">https://openjfx.io/openjfx-docs</a>). </p>
			<p>To run the <strong class="source-inline">HelloWorld</strong>, <strong class="source-inline">BlendEffect</strong>, and <strong class="source-inline">OtherEffects</strong> classes from the command line, use the following commands on the Linux platform in the project root directory (where<a id="_idIndexMarker1379"/> the <strong class="source-inline">pom.xml</strong> file is located):</p>
			<p class="source-code">mvn clean package</p>
			<p class="source-code">java --module-path /path/javafx-sdk/libÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â --add-modules=javafx.controls,javafx.fxmlÂ Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â -cp target/examples-1.0-SNAPSHOT.jar:target/libs/* \</p>
			<p class="source-code">Â Â Â Â Â Â com.packt.learnjava.ch12_gui.HelloWorld</p>
			<p class="source-code">java --module-path /path/javafx-sdk/libÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â --add-modules=javafx.controls,javafx.fxmlÂ Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â -cp target/examples-1.0-SNAPSHOT.jar:target/libs/*Â Â \ </p>
			<p class="source-code">Â Â Â Â Â Â com.packt.learnjava.ch12_gui.BlendEffect</p>
			<p class="source-code">java --module-path /path/javafx-sdk/libÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â --add-modules=javafx.controls,javafx.fxmlÂ Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â -cp target/examples-1.0-SNAPSHOT.jar:target/libs/*Â Â \ </p>
			<p class="source-code">Â Â Â Â Â Â com.packt.learnjava.ch12_gui.OtherEffects</p>
			<p>On Windows, the<a id="_idIndexMarker1380"/> same commands look as follows:</p>
			<p class="source-code">mvn clean package</p>
			<p class="source-code">java --module-path C:\path\javafx-sdk\libÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â --add-modules=javafx.controls,javafx.fxmlÂ Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â -cp target\examples-1.0-SNAPSHOT.jar;target\libs\*Â Â \</p>
			<p class="source-code">Â Â Â Â Â Â com.packt.learnjava.ch12_gui.HelloWorld</p>
			<p class="source-code">java --module-path C:\path\javafx-sdk\libÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â --add-modules=javafx.controls,javafx.fxmlÂ Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â -cp target\examples-1.0-SNAPSHOT.jar;target\libs\*Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â Â com.packt.learnjava.ch12_gui.BlendEffect</p>
			<p class="source-code">java --module-path C:\path\javafx-sdk\libÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â --add-modules=javafx.controls,javafx.fxmlÂ Â Â Â Â Â Â Â Â Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â -cp target\examples-1.0-SNAPSHOT.jar;target\libs\*Â Â Â Â \</p>
			<p class="source-code">Â Â Â Â Â Â com.packt.learnjava.ch12_gui.OtherEffects</p>
			<p>Each of the <strong class="source-inline">HelloWorld</strong>, <strong class="source-inline">BlendEffect</strong>, and <strong class="source-inline">OtherEffects</strong> classes has two <strong class="source-inline">start()</strong> methods: <strong class="source-inline">start1()</strong> and <strong class="source-inline">start2()</strong>. After you run the class once, rename <strong class="source-inline">start()</strong> as <strong class="source-inline">start1()</strong>, and <strong class="source-inline">start1()</strong> as <strong class="source-inline">start()</strong>, and run the preceding commands again. Then, rename <strong class="source-inline">start()</strong> as <strong class="source-inline">start2()</strong>, and <strong class="source-inline">start2()</strong> as <strong class="source-inline">start()</strong>, and run the previous commands yet again. And so on, until all the <strong class="source-inline">start()</strong> methods are executed. This way you will see the results of all the examples in this chapter.</p>
			<p>This concludes <a id="_idIndexMarker1381"/>the high-level presentation of JavaFX. With that, we move to the most exciting (for any programmer) part: writing code.</p>
			<h1 id="_idParaDest-271"><a id="_idTextAnchor270"/>HelloWorld with JavaFX</h1>
			<p>Here is<a id="_idIndexMarker1382"/> the <strong class="source-inline">HelloWorld</strong> JavaFX application that shows the <strong class="source-inline">Hello, World!</strong> and <strong class="source-inline">Exit</strong> text:</p>
			<pre class="source-code">import javafx.application.Application;</pre>
			<pre class="source-code">import javafx.application.Platform;</pre>
			<pre class="source-code">import javafx.scene.control.Button;</pre>
			<pre class="source-code">import javafx.scene.layout.Pane;</pre>
			<pre class="source-code">import javafx.scene.text.Text;</pre>
			<pre class="source-code">import javafx.scene.Scene;</pre>
			<pre class="source-code">import javafx.stage.Stage;</pre>
			<pre class="source-code">public class HelloWorld extends Application {</pre>
			<pre class="source-code">Â Â public static void main(String... args) {</pre>
			<pre class="source-code">Â Â Â Â Â Â launch(args);</pre>
			<pre class="source-code">Â Â }</pre>
			<pre class="source-code">Â Â @Override</pre>
			<pre class="source-code">Â Â public void start(Stage primaryStage) {</pre>
			<pre class="source-code">Â Â Â Â Text txt = new Text("Hello, world!");</pre>
			<pre class="source-code">Â Â Â Â txt.relocate(135, 40);</pre>
			<pre class="source-code">Â Â Â Â Button btn = new Button("Exit");</pre>
			<pre class="source-code">Â Â Â Â btn.relocate(155, 80);</pre>
			<pre class="source-code">Â Â Â Â btn.setOnAction(e:&gt; {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â System.out.println("Bye! See you later!");</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Platform.exit();</pre>
			<pre class="source-code">Â Â Â Â });</pre>
			<pre class="source-code">Â Â Â Â Pane pane = new Pane();</pre>
			<pre class="source-code">Â Â Â Â pane.getChildren().addAll(txt, btn);</pre>
			<pre class="source-code">Â Â Â Â primaryStage</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â .setTitle("The primary stage (top-level container)");</pre>
			<pre class="source-code">Â Â Â Â primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â .setValue(e:&gt; System.out.println(</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "Bye! See you later!"));</pre>
			<pre class="source-code">Â Â Â Â primaryStage.setScene(new Scene(pane, 350, 150));</pre>
			<pre class="source-code">Â Â Â Â primaryStage.show();</pre>
			<pre class="source-code">Â Â }</pre>
			<pre class="source-code">}</pre>
			<p>As you can see, the application is launched by calling the <strong class="source-inline">Application.launch(String... args)</strong> static method. The <strong class="source-inline">start(Stage primaryStage)</strong> method creates a <strong class="source-inline">Text</strong> node with the message <strong class="bold">Hello, World!</strong> located at the absolute position 135 (horizontally) and 40 (vertically). Then, it<a id="_idIndexMarker1383"/> creates another node, <strong class="source-inline">Button</strong>, with the text <strong class="source-inline">Exit</strong> located at the absolute position 155 (horizontally) and 80 (vertically). The action, assigned to <strong class="source-inline">Button</strong> (when it is clicked), prints <strong class="bold">Bye! See you later!</strong> on a screen and forces the application to exit using the <strong class="source-inline">Platform.exit()</strong> method. These two nodes are added as children to the layout pane, which allows absolute positioning. </p>
			<p>The <strong class="source-inline">Stage</strong> object is assigned the title of <strong class="source-inline">The primary stage (top-level container)</strong>. It is also assigned an action on clicking the close-the-window symbol (the <strong class="bold">x</strong> button) in the windowâ€™s upper corner: top left on the Linux system and top right on the Windows system. </p>
			<p>While creating actions, we have used a Lambda expression, which we are going to discuss in <a href="B18388_13_ePub.xhtml#_idTextAnchor281"><em class="italic">Chapter 13</em></a>, <em class="italic">Functional Programming</em>.</p>
			<p>The created layout pane is set on a <strong class="source-inline">Scene</strong> object. The scene size is set to 350 pixels horizontally and 150 pixels vertically. The <strong class="source-inline">Scene</strong> object is placed on the stage. Then, the stage is displayed by calling the <strong class="source-inline">show()</strong> method.</p>
			<p>If we run the preceding application (the <strong class="source-inline">start()</strong> method of the <strong class="source-inline">HellowWorld</strong> class), the following window will pop up:</p>
			<div>
				<div id="_idContainer112" class="IMG---Figure">
					<img src="image/B18388_Figure_12.2.jpg" alt=""/>
				</div>
			</div>
			<p>Clicking on the <strong class="bold">Exit</strong> button results in the expected message being displayed:</p>
			<div>
				<div id="_idContainer113" class="IMG---Figure">
					<img src="image/B18388_Figure_12.3.jpg" alt=""/>
				</div>
			</div>
			<p>But, if you need to do something else after the <strong class="bold">x</strong> button is clicked and the window closes, you can add an implementation of the <strong class="source-inline">stop()</strong> method to the <strong class="source-inline">HelloWorld</strong> class. In <a id="_idIndexMarker1384"/>this example it looks as follows:</p>
			<p class="source-code">@Override</p>
			<p class="source-code">public void stop(){</p>
			<p class="source-code">Â Â Â Â System.out.println(</p>
			<p class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "Doing what has to be done before closing");}</p>
			<p>If you click the <strong class="bold">x</strong> button or the <strong class="bold">Exit</strong> button, the display will show the following:</p>
			<div>
				<div id="_idContainer114" class="IMG---Figure">
					<img src="image/B18388_Figure_12.4.jpg" alt=""/>
				</div>
			</div>
			<p>This example gives you a sense of how JavaFX works. From now on, while reviewing the JavaFX capabilities, we will present only the code in the <strong class="source-inline">start()</strong> method.</p>
			<p>The toolkit has a huge number of packages, each with many classes, and each class having many methods. We wonâ€™t be able to discuss all of them. Instead, we are going to present just an overview of all the major areas of the JavaFX functionality in the most simple and straightforward way we can.</p>
			<h1 id="_idParaDest-272"><a id="_idTextAnchor271"/>Control elements</h1>
			<p>The <strong class="bold">control elements</strong> are <a id="_idIndexMarker1385"/>included in the <strong class="source-inline">javafx.scene.control</strong> package (<a href="https://openjfx.io/javadoc/11/javafx.controls/javafx/scene/control/package-summary.html">https://openjfx.io/javadoc/11/javafx.controls/javafx/scene/control/package-summary.html</a>). There are more than 80 of them, including a button, text field, checkbox, label, menu, progress bar, and scroll bar, to name a few. As we have mentioned already, each control element is a subclass of <strong class="source-inline">Node</strong> that has more than 200 methods. So, you can imagine how rich and fine-tuned a GUI can be when built using JavaFX. However, the scope of this book allows us to cover only a few elements and their methods.</p>
			<p>We have already implemented a button in the example in the preceding section. Letâ€™s now use a label and a text field to create a simple form with input fields (first name, last name, and age) and a <strong class="bold">Submit</strong> button. We will build it in steps. All the following code snippets are sequential sections of another <strong class="source-inline">start()</strong> method in the <strong class="source-inline">HelloWorld</strong> class (rename the previous <strong class="source-inline">start()</strong> method <strong class="source-inline">start1()</strong>, and rename the <strong class="source-inline">start2()</strong> method <strong class="source-inline">start()</strong>).</p>
			<p>First, letâ€™s create controls:</p>
			<pre class="source-code">Text txt = new Text("Fill the form and click Submit");</pre>
			<pre class="source-code">TextField tfFirstName = new TextField();</pre>
			<pre class="source-code">TextField tfLastName = new TextField();</pre>
			<pre class="source-code">TextField tfAge = new TextField();</pre>
			<pre class="source-code">Button btn = new Button("Submit");</pre>
			<pre class="source-code">btn.setOnAction(e:&gt; action(tfFirstName, tfLastName, tfAge));</pre>
			<p>As you can guess, the text will be used as the form instructions. The rest is quite straightforward and looks very similar to what we have seen in the <strong class="source-inline">HelloWorld</strong> example. <strong class="source-inline">action()</strong> is a function implemented as the following method:</p>
			<pre class="source-code">void action(TextField tfFirstName, </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â TextField tfLastName, TextField tfAge ) {</pre>
			<pre class="source-code">Â Â Â Â String fn = tfFirstName.getText();</pre>
			<pre class="source-code">Â Â Â Â String ln = tfLastName.getText();</pre>
			<pre class="source-code">Â Â Â Â String age = tfAge.getText();</pre>
			<pre class="source-code">Â Â Â Â int a = 42;</pre>
			<pre class="source-code">Â Â Â Â try {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â a = Integer.parseInt(age);</pre>
			<pre class="source-code">Â Â Â Â } catch (Exception ex){}</pre>
			<pre class="source-code">Â Â Â Â fn = fn.isBlank() ? "Nick" : fn;</pre>
			<pre class="source-code">Â Â Â Â ln = ln.isBlank() ? "Samoylov" : ln;</pre>
			<pre class="source-code">Â Â Â Â System.out.println("Hello, "+fn+" "+ln + ", age " + </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â a + "!");</pre>
			<pre class="source-code">Â Â Â Â Platform.exit();</pre>
			<pre class="source-code">}</pre>
			<p>This function accepts three parameters (the <strong class="source-inline">javafx.scene.control.TextField</strong> objects), then gets the submitted input values and just<a id="_idIndexMarker1386"/> prints them. The code makes sure that there are always some default values available for printing, and that entering a non-numeric value of <strong class="source-inline">age</strong> does not break the application.</p>
			<p>With the controls and action in place, we then put them into a grid layout using the <strong class="source-inline">javafx.scene.layout.GridPane</strong> class:</p>
			<pre class="source-code">GridPane grid = new GridPane();</pre>
			<pre class="source-code">grid.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">grid.setHgap(15);</pre>
			<pre class="source-code">grid.setVgap(5);</pre>
			<pre class="source-code">grid.setPadding(new Insets(20, 20, 20, 20));</pre>
			<p>The <strong class="source-inline">GridPane</strong> layout pane has rows and columns that form cells in which the nodes can be set. Nodes can span columns and rows. The <strong class="source-inline">setAlignment()</strong> method sets the position of the grid to the center of a scene (the default position is the top left of a scene). The <strong class="source-inline">setHgap()</strong> and <strong class="source-inline">setVgap()</strong> methods set the spacing (in pixels) between the columns (horizontally) and rows (vertically). The <strong class="source-inline">setPadding()</strong> method adds some space along the borders of the grid pane. The <strong class="source-inline">Insets()</strong> object sets the values (in pixels) in the order of top, right, bottom, and left. </p>
			<p>Now, we are going to place the created nodes in the corresponding cells (arranged in two columns):</p>
			<pre class="source-code">int i = 0;</pre>
			<pre class="source-code">grid.add(txt,Â Â Â Â 1, i++, 2, 1);</pre>
			<pre class="source-code">GridPane.setHalignment(txt, HPos.CENTER);</pre>
			<pre class="source-code">grid.addRow(i++, new Label("First Name"), tfFirstName);</pre>
			<pre class="source-code">grid.addRow(i++, new Label("Last Name"),Â Â tfLastName);</pre>
			<pre class="source-code">grid.addRow(i++, new Label("Age"), tfAge);</pre>
			<pre class="source-code">grid.add(btn,Â Â Â Â 1, i);</pre>
			<pre class="source-code">GridPane.setHalignment(btn, HPos.CENTER);</pre>
			<p>The <strong class="source-inline">add()</strong> method accepts<a id="_idIndexMarker1387"/> either three or five parameters:</p>
			<ul>
				<li>The node, the column index, and the row index</li>
				<li>The node, the column index, the row index, how many columns to span, and how many rows to span</li>
			</ul>
			<p>The columns and rows indices start from <strong class="source-inline">0</strong>. </p>
			<p>The <strong class="source-inline">setHalignment()</strong> method sets the position of the node in the cell. The <strong class="source-inline">HPos</strong> enum has values <strong class="source-inline">LEFT</strong>, <strong class="source-inline">RIGHT</strong>, and <strong class="source-inline">CENTER</strong>. The <strong class="source-inline">addRow(int i, Node... nodes)</strong> method accepts the row index and the varargs of nodes. We use it to place the <strong class="source-inline">Label</strong> and <strong class="source-inline">TextField</strong> objects. </p>
			<p>The rest of the <strong class="source-inline">start()</strong> method is very similar to the <strong class="source-inline">HelloWorld</strong> example (only the title and size have changed):</p>
			<pre class="source-code">primaryStage.setTitle("Simple form example");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.setScene(new Scene(grid, 300, 200));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>If we run the newly implemented <strong class="source-inline">start()</strong> method, the result will be as follows:</p>
			<div>
				<div id="_idContainer115" class="IMG---Figure">
					<img src="image/B18388_Figure_12.5.jpg" alt=""/>
				</div>
			</div>
			<p class="figure-caption">Â </p>
			<p>We can fill <a id="_idIndexMarker1388"/>the data as follows, for example:</p>
			<div>
				<div id="_idContainer116" class="IMG---Figure">
					<img src="image/B18388_Figure_12.6.jpg" alt=""/>
				</div>
			</div>
			<p>After you click the <strong class="bold">Submit</strong> button, the following message is displayed and the application exits:</p>
			<div>
				<div id="_idContainer117" class="IMG---Figure">
					<img src="image/B18388_Figure_12.7.jpg" alt=""/>
				</div>
			</div>
			<p>To help visualize the layout, especially in the case of a more complex design, you can use the <strong class="source-inline">setGridLinesVisible(boolean v)</strong> grid method to make the grid lines visible. It helps to see how the cells are aligned. We can add (uncomment) the following line to our example:</p>
			<pre class="source-code">grid.setGridLinesVisible(true);</pre>
			<p>We run it again, and the result will be as follows:</p>
			<div>
				<div id="_idContainer118" class="IMG---Figure">
					<img src="image/B18388_Figure_12.8.jpg" alt=""/>
				</div>
			</div>
			<p>As you can see, the layout is now outlined explicitly, which helps us to visualize the design.</p>
			<p>The <strong class="source-inline">javafx.scene.layout</strong> package includes 24 layout classes such as <strong class="source-inline">Pane</strong> (we saw it in the <strong class="source-inline">HelloWorld</strong> example), <strong class="source-inline">StackPane</strong> (allows us to overlay nodes), <strong class="source-inline">FlowPane</strong> (allows the positions of nodes to flow as the size of the window changes), and <strong class="source-inline">AnchorPane</strong> (preserves<a id="_idIndexMarker1389"/> the nodesâ€™ position relative to their anchor point), to name a few. The <strong class="source-inline">VBox</strong> layout will be demonstrated in the next section, <em class="italic">Charts</em>.</p>
			<h1 id="_idParaDest-273"><a id="_idTextAnchor272"/>Charts</h1>
			<p>JavaFX provides <a id="_idIndexMarker1390"/>the following chart components for data visualization in the <strong class="source-inline">javafx.scene.chart</strong> package: </p>
			<ul>
				<li><strong class="source-inline">LineChart</strong>: Adds <a id="_idIndexMarker1391"/>a line between the data points in a series. Typically used to present the trends over time.</li>
				<li><strong class="source-inline">AreaChart</strong>: Similar to <strong class="source-inline">LineChart</strong>, but fills the area between the line that connects the data points and the axis. Typically used for comparing cumulated totals over time.</li>
				<li><strong class="source-inline">BarChart</strong>: Presents data as rectangular bars. Used for visualization of discrete data.</li>
				<li><strong class="source-inline">PieChart</strong>: Presents a circle divided into segments (filled with different colors), each segment representing a value as a proportion of the total. We will demonstrate it in this section.</li>
				<li><strong class="source-inline">BubbleChart</strong>: Presents data as two-dimensional oval shapes called bubbles, which allow presenting three parameters.</li>
				<li><strong class="source-inline">ScatterChart</strong>: Presents the data points in a series as is. Useful to identify the presence of a clustering (data correlation).</li>
			</ul>
			<p>The following example (the <strong class="source-inline">start3()</strong> method of the <strong class="source-inline">HellowWorld</strong> class) demonstrates how the result of testing can be presented as a pie chart. Each segment represents<a id="_idIndexMarker1392"/> the number<a id="_idIndexMarker1393"/> of tests succeeded, failed, or ignored:</p>
			<pre class="source-code">Text txt = new Text("Test results:");</pre>
			<pre class="source-code">PieChart pc = new PieChart();</pre>
			<pre class="source-code">pc.getData().add(new PieChart.Data("Succeed", 143));</pre>
			<pre class="source-code">pc.getData().add(new PieChart.Data("Failed" ,Â Â 12));</pre>
			<pre class="source-code">pc.getData().add(new PieChart.Data("Ignored",Â Â 18));</pre>
			<pre class="source-code">VBox vb = new VBox(txt, pc);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">primaryStage.setTitle("A chart example");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â Â .setValue(e:&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.setScene(new Scene(vb, 300, 300));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>We have created two nodesâ€”<strong class="source-inline">Text</strong> and <strong class="source-inline">PieChart</strong>â€”and placed them in the cells of the <strong class="source-inline">VBox</strong> layout, which sets them in a column, one above another. We have added the padding of 10 pixels around the edges of the <strong class="source-inline">VBox</strong> pane. Notice that VBox extends the <strong class="source-inline">Node</strong> and <strong class="source-inline">Pane</strong> classes, as other panes do, too. We have also positioned the pane in the center of the scene using the <strong class="source-inline">setAlignment()</strong> method. The rest is the same as all other previous examples, except the scene title and size. </p>
			<p>If we run this example (rename the previous <strong class="source-inline">start()</strong> method <strong class="source-inline">start2()</strong>, and rename the <strong class="source-inline">start3()</strong> method <strong class="source-inline">start()</strong>), the result will be as follows:</p>
			<div>
				<div id="_idContainer119" class="IMG---Figure">
					<img src="image/B18388_Figure_12.9.jpg" alt=""/>
				</div>
			</div>
			<p class="figure-caption">Â </p>
			<p>The <strong class="source-inline">PieChart</strong> class, as well as any other chart, has several other methods that can be useful for presenting<a id="_idIndexMarker1394"/> more complex and dynamic data in a user-friendly <a id="_idIndexMarker1395"/>manner.</p>
			<p>Now, letâ€™s discuss how you can enrich the look and feel of your application by using the power of <strong class="bold">Cascading Style Sheets</strong> (<strong class="bold">CSS</strong>).</p>
			<h1 id="_idParaDest-274"><a id="_idTextAnchor273"/>Applying CSS</h1>
			<p>By default, JavaFX <a id="_idIndexMarker1396"/>uses the style sheet that comes with the distribution JAR file. To override the default style, you can add a style sheet to the scene using the <strong class="source-inline">getStylesheets()</strong> method:</p>
			<pre class="source-code">scene.getStylesheets().add("/mystyle.css");</pre>
			<p>The <strong class="source-inline">mystyle.css</strong> file has to be placed in the <strong class="source-inline">src/main/resources</strong> folder. Letâ€™s do it, and add the <strong class="source-inline">mystyle.css</strong> file with the following content to the <strong class="source-inline">HelloWorld</strong> example:</p>
			<pre class="source-code">#text-hello {</pre>
			<pre class="source-code">Â Â :fx-font-size: 20px;</pre>
			<pre class="source-code">Â Â Â -fx-font-family: "Arial";</pre>
			<pre class="source-code">Â Â Â -fx-fill: red;</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">.button {</pre>
			<pre class="source-code">Â Â Â -fx-text-fill: white;</pre>
			<pre class="source-code">Â Â Â -fx-background-color: slateblue;</pre>
			<pre class="source-code">}</pre>
			<p>As you can see, we would like to style the <strong class="source-inline">Button</strong> node and the <strong class="source-inline">Text</strong> node that has a <strong class="source-inline">text-hello</strong> ID in a certain way. We also have to modify the <strong class="source-inline">HelloWorld</strong> example by adding the ID <a id="_idIndexMarker1397"/>to the <strong class="source-inline">Text</strong> element and the style sheet file to the scene (the <strong class="source-inline">start4()</strong> method):</p>
			<pre class="source-code">Text txt = new Text("Hello, world!");</pre>
			<pre class="source-code">txt.setId("text-hello");</pre>
			<pre class="source-code">txt.relocate(115, 40);</pre>
			<pre class="source-code">Button btn = new Button("Exit");</pre>
			<pre class="source-code">btn.relocate(155, 80);</pre>
			<pre class="source-code">btn.setOnAction(e -&gt; {</pre>
			<pre class="source-code">Â Â Â Â System.out.println("Bye! See you later!");</pre>
			<pre class="source-code">Â Â Â Â Platform.exit();</pre>
			<pre class="source-code">});</pre>
			<pre class="source-code">Pane pane = new Pane();</pre>
			<pre class="source-code">pane.getChildren().addAll(txt, btn);</pre>
			<pre class="source-code">Scene scene = new Scene(pane, 350, 150);</pre>
			<pre class="source-code">scene.getStylesheets().add("/mystyle.css");</pre>
			<pre class="source-code">primaryStage.setTitle("The primary stage (top-level container)");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â .setValue(e -&gt; System.out.println("\nBye! See you later!"));</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>If we run this<a id="_idIndexMarker1398"/> code (rename the previous <strong class="source-inline">start()</strong> method <strong class="source-inline">start3()</strong> and rename the <strong class="source-inline">start4()</strong> method <strong class="source-inline">start()</strong>), the result will be as follows:</p>
			<div>
				<div id="_idContainer120" class="IMG---Figure">
					<img src="image/B18388_Figure_12.10.jpg" alt=""/>
				</div>
			</div>
			<p>Alternatively, an inline style can be set on any node that will be used to overwrite the file style sheet, default or not. Letâ€™s add (uncomment) the following line to the latest version of the <strong class="source-inline">HelloWorld</strong> example:</p>
			<pre class="source-code">btn.setStyle("-fx-text-fill: white; -fx-background-color: red;");</pre>
			<p>If we run the example again, the result will be as follows:</p>
			<div>
				<div id="_idContainer121" class="IMG---Figure">
					<img src="image/B18388_Figure_12.11.jpg" alt=""/>
				</div>
			</div>
			<p>Look through the JavaFX CSS reference guide (<a href="https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html">https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html</a>) to get an idea of the variety and possible options for custom styling.</p>
			<p>Now, letâ€™s<a id="_idIndexMarker1399"/> discuss an alternative way of building a user interface for an FX application, without writing Java code, by using <strong class="bold">FX Markup Language</strong> (<strong class="bold">FXML</strong>). </p>
			<h1 id="_idParaDest-275"><a id="_idTextAnchor274"/>Using FXML</h1>
			<p><strong class="bold">FXML</strong> is an<a id="_idIndexMarker1400"/> XML-based language that allows building a user interface and maintaining it independently of the application (business) logic (as far as the look and feel are concerned, or other presentation-related changes). Using FXML, you can design a user interface without even writing one line of Java code.</p>
			<p>FXML does not have a schema, but its capabilities reflect the API of the JavaFX objects used to build a scene. This means you can use the API documentation to understand what tags and attributes are allowed in the FXML structure. Most of the time, JavaFX classes can be used as tags and their properties as attributes.</p>
			<p>In addition to the FXML file (the view), the controller (Java class) can be used for processing the model and organizing the page flow. The model consists of domain objects managed by the view and the controller. It also allows using all the power of CSS styling and JavaScript. But, in this book, we will be able to demonstrate only the basic FXML capabilities. The rest you can find in the FXML introduction (<a href="https://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html">https://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html</a>) and many good tutorials available online.</p>
			<p>To demonstrate FXML usage, we are going to reproduce the simple form we created in the <em class="italic">Control elements</em> section and then enhance it by adding the page flow. Hereâ€™s how our form, with first name, last name, and age, can be expressed in FXML:</p>
			<pre class="source-code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.Scene?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.geometry.Insets?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.text.Text?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.control.Label?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.control.Button?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.layout.GridPane?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.control.TextField?&gt;</pre>
			<pre class="source-code">&lt;Scene fx:controller="com.packt.learnjava.ch12_gui.HelloWorldController"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â xmlns:fx="http://javafx.com/fxml"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â width="350" height="200"&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;GridPane alignment="center" hgap="15" vgap="5"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;padding&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â &lt;Insets top="20" right="20" bottom="20" left="20"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;/padding&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;Text id="textFill" text="Fill the form and click </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Submit" GridPane.rowIndex="0" GridPane.columnSpan="2"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â &lt;GridPane.halignment&gt;center&lt;/GridPane.halignment&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;/Text&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;Label text="First name"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.columnIndex="0" GridPane.rowIndex="1"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;TextField fx:id="tfFirstName"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.columnIndex="1" GridPane.rowIndex="1"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;Label text="Last name"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.columnIndex="0" GridPane.rowIndex="2"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;TextField fx:id="tfLastName"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.columnIndex="1" GridPane.rowIndex="2"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;Label text="Age"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.columnIndex="0" GridPane.rowIndex="3"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;TextField fx:id="tfAge"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.columnIndex="1" GridPane.rowIndex="3"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;Button text="Submit"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.columnIndex="1" GridPane.rowIndex="4"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â onAction="#submitClicked"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â &lt;GridPane.halignment&gt;center&lt;/GridPane.halignment&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;/Button&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;/GridPane&gt;</pre>
			<pre class="source-code">&lt;/Scene&gt;</pre>
			<p>As you can see, it<a id="_idIndexMarker1401"/> expresses the desired scene structure, familiar to you already, and specifies the controller class, <strong class="source-inline">HelloWorldController</strong>, which we are going to see shortly. As we have mentioned already, the tags match the class names we have been using to construct the same GUI with Java only. We put the preceding FXML code (as the <strong class="source-inline">helloWorld.fxml</strong> file) into the <strong class="source-inline">resources</strong> folder.</p>
			<p>Now, letâ€™s look at the <strong class="source-inline">start5()</strong> method (rename it <strong class="source-inline">start()</strong>) of the <strong class="source-inline">HelloWorld</strong> class that uses the <strong class="source-inline">helloWorld.fxml</strong> file:</p>
			<pre class="source-code">try {</pre>
			<pre class="source-code">Â Â ClassLoader classLoader =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader();</pre>
			<pre class="source-code">Â Â String file =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â classLoader.getResource("helloWorld.fxml").getFile();</pre>
			<pre class="source-code">Â Â FXMLLoader lder = new FXMLLoader();</pre>
			<pre class="source-code">Â Â lder.setLocation(new URL("file:" + file));</pre>
			<pre class="source-code">Â Â Scene scene = lder.load();</pre>
			<pre class="source-code">Â Â primaryStage.setTitle("Simple form example");</pre>
			<pre class="source-code">Â Â primaryStage.setScene(scene);</pre>
			<pre class="source-code">Â Â primaryStage.onCloseRequestProperty().setValue(e -&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â System.out.println("\nBye! See you later!"));</pre>
			<pre class="source-code">Â Â primaryStage.show();</pre>
			<pre class="source-code">} catch (Exception ex){</pre>
			<pre class="source-code">Â Â Â Â ex.printStackTrace();</pre>
			<pre class="source-code">}</pre>
			<p>The <strong class="source-inline">start()</strong> method<a id="_idIndexMarker1402"/> just loads the <strong class="source-inline">helloWorld.fxml</strong> file and sets the stage, the latter being done exactly as in our previous examples. </p>
			<p>Now, letâ€™s look at the <strong class="source-inline">HelloWorldController</strong> class. If need be, we could launch the application having only the following:</p>
			<pre class="source-code">public class HelloWorldController {</pre>
			<pre class="source-code">Â Â Â Â @FXML</pre>
			<pre class="source-code">Â Â Â Â protected void submitClicked(ActionEvent e) {</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<pre class="source-code">}</pre>
			<p>The form would be presented, but the button click would do nothing. That is what we meant while talking about the user interface development independent of the application logic. Notice the <strong class="source-inline">@FXML</strong> annotation. It binds the method and properties to the FXML tags<a id="_idIndexMarker1403"/> using their IDs. Here is how the full controller implementation looks:</p>
			<pre class="source-code">@FXML</pre>
			<pre class="source-code">private TextField tfFirstName;</pre>
			<pre class="source-code">@FXML</pre>
			<pre class="source-code">private TextField tfLastName;</pre>
			<pre class="source-code">@FXML</pre>
			<pre class="source-code">private TextField tfAge;</pre>
			<pre class="source-code">@FXML</pre>
			<pre class="source-code">protected void submitClicked(ActionEvent e) {</pre>
			<pre class="source-code">Â Â Â Â String fn = tfFirstName.getText();</pre>
			<pre class="source-code">Â Â Â Â String ln = tfLastName.getText();</pre>
			<pre class="source-code">Â Â Â Â String age = tfAge.getText();</pre>
			<pre class="source-code">Â Â Â Â int a = 42;</pre>
			<pre class="source-code">Â Â Â Â try {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â a = Integer.parseInt(age);</pre>
			<pre class="source-code">Â Â Â Â } catch (Exception ex) {</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â fn = fn.isBlank() ? "Nick" : fn;</pre>
			<pre class="source-code">Â Â Â Â ln = ln.isBlank() ? "Samoylov" : ln;</pre>
			<pre class="source-code">Â Â Â Â String hello = "Hello, " + fn + " " + ln + ", age " + </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â a + "!";</pre>
			<pre class="source-code">Â Â Â Â System.out.println(hello);</pre>
			<pre class="source-code">Â Â Â Â Platform.exit();</pre>
			<pre class="source-code">}</pre>
			<p>It should look very familiar to you for the most part. The only difference is that we refer to the fields and their values not directly (as previously), but using binding marked with the <strong class="source-inline">@FXML</strong> annotation. If we run the <strong class="source-inline">HelloWorld</strong> class now (donâ€™t forget to rename the <strong class="source-inline">start5()</strong> method as <strong class="source-inline">start()</strong>), the page appearance and behavior will be exactly the same as we described in the <em class="italic">Control elements</em> section:</p>
			<div>
				<div id="_idContainer122" class="IMG---Figure">
					<img src="image/B18388_Figure_12.12.jpg" alt=""/>
				</div>
			</div>
			<p>If the <strong class="bold">x</strong> button <a id="_idIndexMarker1404"/>in the upper corner is clicked, the following output appears on the screen:</p>
			<div>
				<div id="_idContainer123" class="IMG---Figure">
					<img src="image/B18388_Figure_12.13.jpg" alt=""/>
				</div>
			</div>
			<p>If the <strong class="bold">Submit</strong> button is clicked, the output shows the following message:</p>
			<div>
				<div id="_idContainer124" class="IMG---Figure">
					<img src="image/B18388_Figure_12.14.jpg" alt=""/>
				</div>
			</div>
			<p>Now, letâ€™s look at the standalone GUI application with two pages implemented as a separate project in the <strong class="source-inline">gui</strong> folder:</p>
			<div>
				<div id="_idContainer125" class="IMG---Figure">
					<img src="image/B18388_Figure_12.15.jpg" alt=""/>
				</div>
			</div>
			<p>As you can see, this application consists of the main <strong class="source-inline">GuiApp</strong> class, two <strong class="source-inline">Controller</strong> classes, the <strong class="source-inline">User</strong> class, and two pages (the <strong class="source-inline">.fxml</strong> files). Let us start from the <strong class="source-inline">.fxml</strong> files. To make it simple, the <strong class="source-inline">page01.fxml</strong> file has almost exactly the same content as the <strong class="source-inline">helloWorld.fxml</strong> file described in the preceding section. The only difference is that it refers to the <strong class="source-inline">Controller01</strong> class, which has the <strong class="source-inline">start()</strong> method implemented exactly as the <strong class="source-inline">start5()</strong> method described previously, too. The<a id="_idIndexMarker1405"/> main <strong class="source-inline">GuiApp</strong> class looks very simple:</p>
			<pre class="source-code">public class GuiApp extends Application {</pre>
			<pre class="source-code">Â Â Â Â public static void main(String... args) {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â launch(args);</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â @Override</pre>
			<pre class="source-code">Â Â Â Â public void stop(){</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â System.out.println("Doing what has to be done...");</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â public void start(Stage primaryStage) {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Controller01.start(primaryStage);</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<pre class="source-code">}</pre>
			<p>As you can see, it just invokes the <strong class="source-inline">start()</strong> method in the <strong class="source-inline">Controller01</strong> class, which in turn displays the familiar page to your form:</p>
			<div>
				<div id="_idContainer126" class="IMG---Figure">
					<img src="image/B18388_Figure_12.16.jpg" alt=""/>
				</div>
			</div>
			<p>After the form is filled and the <strong class="bold">Submit</strong> button is clicked, the submitted values are processed in the <strong class="source-inline">Controller01</strong> class and then passed to the <strong class="source-inline">Controller02</strong> class, using the <strong class="source-inline">submitClicked()</strong> method <a id="_idIndexMarker1406"/>of the <strong class="source-inline">Controller01</strong> class:</p>
			<pre class="source-code">Â Â Â Â @FXML</pre>
			<pre class="source-code">Â Â Â Â protected void submitClicked(ActionEvent e) {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â String fn = tfFirstName.getText();</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â String ln = tfLastName.getText();</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â String age = tfAge.getText();</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â int a = 42;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â try {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â a = Integer.parseInt(age);</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â } catch (Exception ex) {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â fn = fn.isBlank() ? "Nick" : fn;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â ln = ln.isBlank() ? "Samoylov" : ln;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Controller02.goToPage2(new User(a, fn, ln));</pre>
			<pre class="source-code"> </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Node source = (Node) e.getSource();</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Stage stage = (Stage) source.getScene().getWindow();</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â stage.close();</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<p>The <strong class="source-inline">Controller02.goToPage2()</strong> method<a id="_idIndexMarker1407"/> looks as follows:</p>
			<pre class="source-code">public static void goToPage2(User user) {</pre>
			<pre class="source-code">Â Â try {</pre>
			<pre class="source-code">Â Â Â Â ClassLoader classLoader =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader();</pre>
			<pre class="source-code">Â Â Â Â String file = classLoader.getResource("fxml" + </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â File.separator + "page02.fxml").getFile();</pre>
			<pre class="source-code">Â Â Â Â FXMLLoader loader = new FXMLLoader();</pre>
			<pre class="source-code">Â Â Â Â loader.setLocation(new URL("file:" + file));</pre>
			<pre class="source-code">Â Â Â Â Scene scene = loader.load();</pre>
			<pre class="source-code"> </pre>
			<pre class="source-code">Â Â Â Â Controller02 c = loader.getController();</pre>
			<pre class="source-code">Â Â Â Â String hello = "Hello, " + user.getFirstName() + " " + </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â user.getLastName() + ", age " + user.getAge() + "!";</pre>
			<pre class="source-code">Â Â Â Â c.textHello.setText(hello);</pre>
			<pre class="source-code"> </pre>
			<pre class="source-code">Â Â Â Â Stage primaryStage = new Stage();</pre>
			<pre class="source-code">Â Â Â Â primaryStage.setTitle("Second page of GUI App");</pre>
			<pre class="source-code">Â Â Â Â primaryStage.setScene(scene);</pre>
			<pre class="source-code">Â Â Â Â primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â .setValue(e -&gt; {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â System.out.println("\nBye!");</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Platform.exit();</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });</pre>
			<pre class="source-code">Â Â Â Â primaryStage.show();</pre>
			<pre class="source-code">Â Â } catch (Exception ex) {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â ex.printStackTrace();</pre>
			<pre class="source-code">Â Â }</pre>
			<pre class="source-code">}</pre>
			<p>The second page just presents <a id="_idIndexMarker1408"/>the received data. Here is how its FXML looks (the <strong class="source-inline">page2.fxml</strong> file):</p>
			<pre class="source-code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.Scene?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.geometry.Insets?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.text.Text?&gt;</pre>
			<pre class="source-code">&lt;?import javafx.scene.layout.GridPane?&gt;</pre>
			<pre class="source-code">&lt;Scene fx:controller="com.packt.lernjava.gui.Controller02"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â xmlns:fx="http://javafx.com/fxml"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â width="350" height="150"&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;GridPane alignment="center" hgap="15" vgap="5"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;padding&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â &lt;Insets top="20" right="20" bottom="20" left="20"/&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;/padding&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;Text fx:id="textHello"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.rowIndex="0" GridPane.columnSpan="2"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â &lt;GridPane.halignment&gt;center&lt;/GridPane.halignment&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;/Text&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;Text id="textDo" text="Do what has to be done here"</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â GridPane.rowIndex="1" GridPane.columnSpan="2"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â &lt;GridPane.halignment&gt;center&lt;/GridPane.halignment&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â &lt;/Text&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;/GridPane&gt;</pre>
			<pre class="source-code">&lt;/Scene&gt;</pre>
			<p>As you can see, the page<a id="_idIndexMarker1409"/> has only two read-only <strong class="source-inline">Text</strong> fields. The first one (with <strong class="source-inline">id="textHello"</strong>) shows the data passed from the previous page. The second just shows the message, <strong class="source-inline">Do what has to be done here</strong>. This is not very sophisticated, but it demonstrates how the flow of data and pages can be organized.</p>
			<p>If we execute the <strong class="source-inline">GuiApp</strong> class, we will see the familiar form and can fill it with data:</p>
			<div>
				<div id="_idContainer127" class="IMG---Figure">
					<img src="image/B18388_Figure_12.17.jpg" alt=""/>
				</div>
			</div>
			<p>After we click the <strong class="bold">Submit</strong> button, this window will be closed and the new one will appear:</p>
			<div>
				<div id="_idContainer128" class="IMG---Figure">
					<img src="image/B18388_Figure_12.18.jpg" alt=""/>
				</div>
			</div>
			<p>Now, we can click the <strong class="bold">x</strong> button in the upper-left corner (or in the upper-right corner on Windows) and see the following message:</p>
			<div>
				<div id="_idContainer129" class="IMG---Figure">
					<img src="image/B18388_Figure_12.19.jpg" alt=""/>
				</div>
			</div>
			<p>The <strong class="source-inline">stop()</strong> method worked as expected.</p>
			<p>With that, we <a id="_idIndexMarker1410"/>conclude our presentation of FXML and move to the next topic of adding HTML to the JavaFX application.</p>
			<h1 id="_idParaDest-276"><a id="_idTextAnchor275"/>Embedding HTML</h1>
			<p>To add HTML to<a id="_idIndexMarker1411"/> JavaFX is easy. All you have to do is to use the <strong class="source-inline">javafx.scene.web.WebView</strong> class, which provides a window where the added HTML is rendered similar to how it happens in a browser. The <strong class="source-inline">WebView</strong> class uses WebKit, the open source browser engine, and thus supports full browsing functionality.</p>
			<p>Like all other JavaFX components, the <strong class="source-inline">WebView</strong> class extends the <strong class="source-inline">Node</strong> class and can be treated in the Java code as such. In addition, it has its own properties and methods that allow adjusting the browser window to the encompassing application by setting the window size (maximum, minimum, and preferred height and width), font scale, zoom rate, adding CSS, enabling the context (right-click) menu, and similar. The <strong class="source-inline">getEngine()</strong> method returns a <strong class="source-inline">javafx.scene.web.WebEngine</strong> object associated with it. It provides the ability to load HTML pages, navigate them, apply different styles to the loaded pages, access their browsing history and the document model, and execute JavaScript. </p>
			<p>To start using the <strong class="source-inline">javafx.scene.web</strong> package, two steps have to be taken first:</p>
			<ol>
				<li value="1">Add the following dependency to the <strong class="source-inline">pom.xml</strong> file:<p class="source-code">&lt;dependency&gt;</p><p class="source-code">Â Â Â &lt;groupId&gt;org.openjfx&lt;/groupId&gt;</p><p class="source-code">Â Â Â &lt;artifactId&gt;javafx-web&lt;/artifactId&gt;</p><p class="source-code">Â Â Â &lt;version&gt;11.0.2&lt;/version&gt;</p><p class="source-code">&lt;/dependency&gt;</p></li>
			</ol>
			<p>The version of <strong class="source-inline">javafx-web</strong> typically stays abreast with the Java version, but at the time of writing, version 12 of <strong class="source-inline">javafx-web</strong> has not yet been released, so we are using the latest available version, <em class="italic">11.0.2</em>.</p>
			<ol>
				<li value="2">Since <strong class="source-inline">javafx-web</strong> uses<a id="_idIndexMarker1412"/> the <strong class="source-inline">com.sun.*</strong> packages, which have been removed from Java 9 (<a href="https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-F7696E02-A1FB-4D5A-B1F2-89E7007D4096">https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-F7696E02-A1FB-4D5A-B1F2-89E7007D4096</a>), to access the <strong class="source-inline">com.sun.*</strong> packages from Java 9+, set the following VM options in addition to <strong class="source-inline">--module-path</strong> and <strong class="source-inline">--add-modules</strong>, described in the JavaFX fundamentals section in <strong class="source-inline">Run/Debug Configuration</strong> of the <strong class="source-inline">HtmlWebView</strong> class of the<strong class="source-inline"> ch12_gui</strong> package (for Windows, change the slash sign to the backward slash):<p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.sg.prism=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.scene=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.util=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.base/com.sun.javafx.logging=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.prism=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.glass.ui=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.geom.transform=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.tk=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.glass.utils=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.font=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.application=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.controls/com.sun.javafx.scene.control=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.scene.input=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.geom=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.prism.paint=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.scenario.effect=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.text=ALL-UNNAMED </strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.iio=ALL-UNNAMED</strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.scenario.effect.impl.prism=ALL-UNNAMED</strong></p><p class="source-code"><strong class="bold">--add-exports javafx.graphics/com.sun.javafx.scene.text=ALL-UNNAMED</strong></p></li>
				<li>To execute the <strong class="source-inline">HtmlWebView</strong> class from the command line, go to the <strong class="source-inline">examples</strong> folder and use the following command for Unix/Linux/macOS systems (don't forget to substitute <strong class="source-inline">/path/JavaFX</strong> with the actual path to the folder that<a id="_idIndexMarker1413"/> contains the JavaFX SDK):<p class="source-code"><strong class="bold">mvn clean package</strong></p><p class="source-code"><strong class="bold">java --module-path /path/javaFX/lib --add-modules=javafx.controls,javafx.fxml --add-exports javafx.graphics/com.sun.javafx.sg.prism=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.scene=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.util=ALL-UNNAMED --add-exports javafx.base/com.sun.javafx.logging=ALL-UNNAMED --add-exports javafx.graphics/com.sun.prism=ALL-UNNAMED --add-exports javafx.graphics/com.sun.glass.ui=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.geom.transform=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.tk=ALL-UNNAMED --add-exports javafx.graphics/com.sun.glass.utils=ALL-UNNAMEDÂ Â --add-exports javafx.graphics/com.sun.javafx.font=ALL-UNNAMEDÂ Â --add-exports javafx.graphics/com.sun.javafx.application=ALL-UNNAMED --add-exports javafx.controls/com.sun.javafx.scene.control=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.scene.input=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.geom=ALL-UNNAMEDÂ Â --add-exports javafx.graphics/com.sun.prism.paint=ALL-UNNAMEDÂ Â --add-exports javafx.graphics/com.sun.scenario.effect=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.text=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.iio=ALL-UNNAMED --add-exports javafx.graphics/com.sun.scenario.effect.impl.prism=ALL-UNNAMED --add-exports javafx.graphics/com.sun.javafx.scene.text=ALL-UNNAMED</strong><strong class="bold">Â Â -cp target/examples-1.0-SNAPSHOT.jar com.packt.learnjava.ch12_gui.HtmlWebView</strong></p></li>
				<li>On Windows, the same<a id="_idIndexMarker1414"/> command looks as follows (don't forget to substitute <strong class="source-inline">C:\path\JavaFX</strong> with the actual path to the folder that contains the JavaFX SDK):<p class="source-code"><strong class="bold">mvn clean package</strong></p><p class="source-code"><strong class="bold">java --module-path C:\path\JavaFX\lib --add-modules=javafx.controls,javafx.fxml --add-exports javafx.graphics\com.sun.javafx.sg.prism=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.scene=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.util=ALL-UNNAMED --add-exports javafx.base\com.sun.javafx=ALL-UNNAMED --add-exports javafx.base\com.sun.javafx.logging=ALL-UNNAMED --add-exports javafx.graphics\com.sun.prism=ALL-UNNAMED --add-exports javafx.graphics\com.sun.glass.ui=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.geom.transform=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.tk=ALL-UNNAMED --add-exports javafx.graphics\com.sun.glass.utils=ALL-UNNAMEDÂ Â --add-exports javafx.graphics\com.sun.javafx.font=ALL-UNNAMEDÂ Â --add-exports javafx.graphics\com.sun.javafx.application=ALL-UNNAMED --add-exports javafx.controls\com.sun.javafx.scene.control=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.scene.input=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.geom=ALL-UNNAMEDÂ Â --add-exports javafx.graphics\com.sun.prism.paint=ALL-UNNAMEDÂ Â --add-exports javafx.graphics\com.sun.scenario.effect=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.text=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.iio=ALL-UNNAMED --add-exports javafx.graphics\com.sun.scenario.effect.impl.prism=ALL-UNNAMED --add-exports javafx.graphics\com.sun.javafx.scene.text=ALL-UNNAMEDÂ Â -cp target\examples-1.0-SNAPSHOT.jar com.packt.learnjava.ch12_gui.HtmlWebView</strong></p></li>
			</ol>
			<p>The <strong class="source-inline">HtmlWebView</strong> class contains several <strong class="source-inline">start()</strong> methods too. Rename and execute them<a id="_idIndexMarker1415"/> one by one, as described in the <em class="italic">JavaFX fundamentals</em> section.</p>
			<p>Letâ€™s look at a few examples now. We create a new application, <strong class="source-inline">HtmlWebView</strong>, and set VM options for it with the VM options (<strong class="source-inline">--module-path</strong>, <strong class="source-inline">--add-modules</strong>, and <strong class="source-inline">--add-exports</strong>) we have described. Now, we can write and execute code that uses the <strong class="source-inline">WebView</strong> class.</p>
			<p>First, here is how simple HTML can be added to the JavaFX application (the <strong class="source-inline">start()</strong> method in the <strong class="source-inline">HtmlWebView</strong> class):</p>
			<pre class="source-code">WebView wv = new WebView();</pre>
			<pre class="source-code">WebEngine we = wv.getEngine();</pre>
			<pre class="source-code">String html = </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â "&lt;html&gt;&lt;center&gt;&lt;h2&gt;Hello, world!&lt;/h2&gt;&lt;/center&gt;&lt;/html&gt;";</pre>
			<pre class="source-code">we.loadContent(html, "text/html");</pre>
			<pre class="source-code">Scene scene = new Scene(wv, 200, 60);</pre>
			<pre class="source-code">primaryStage.setTitle("My HTML page");</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>The preceding code creates a <strong class="source-inline">WebView</strong> object, gets the <strong class="source-inline">WebEngine</strong> object from it, uses the acquired <strong class="source-inline">WebEngine</strong> object to load the HTML, sets the <strong class="source-inline">WebView</strong> object on the scene, and<a id="_idIndexMarker1416"/> configures the stage. The <strong class="source-inline">loadContent()</strong> method accepts two strings: the content and its mime type. The content string can be constructed in the code or created from reading the <strong class="source-inline">.html</strong> file. </p>
			<p>If we run the <strong class="source-inline">HtmlWebView</strong> class, the result will be as follows:</p>
			<div>
				<div id="_idContainer130" class="IMG---Figure">
					<img src="image/B18388_Figure_12.20.jpg" alt=""/>
				</div>
			</div>
			<p>If necessary, you can show other JavaFX nodes along with the <strong class="source-inline">WebView</strong> object in the same window. For example, letâ€™s add a <strong class="source-inline">Text</strong> node above the embedded HTML (the <strong class="source-inline">start2()</strong> method in the <strong class="source-inline">HtmlWebView</strong> class):</p>
			<pre class="source-code">Text txt = new Text("Below is the embedded HTML:");</pre>
			<pre class="source-code">WebView wv = new WebView();</pre>
			<pre class="source-code">WebEngine we = wv.getEngine();</pre>
			<pre class="source-code">String html = </pre>
			<pre class="source-code">Â Â Â Â Â Â "&lt;html&gt;&lt;center&gt;&lt;h2&gt;Hello, world!&lt;/h2&gt;&lt;/center&gt;&lt;/html&gt;";</pre>
			<pre class="source-code">we.loadContent(html, "text/html");</pre>
			<pre class="source-code">VBox vb = new VBox(txt, wv);</pre>
			<pre class="source-code">vb.setSpacing(10);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">Scene scene = new Scene(vb, 300, 120);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle("JavaFX with embedded HTML");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>As you can <a id="_idIndexMarker1417"/>see, the <strong class="source-inline">WebView</strong> object is not set on the scene directly, but on the layout object instead, along with a <strong class="source-inline">txt</strong> object. Then, the layout object is set on the scene. The result of the preceding code is as follows:</p>
			<div>
				<div id="_idContainer131" class="IMG---Figure">
					<img src="image/B18388_Figure_12.21.jpg" alt=""/>
				</div>
			</div>
			<p>With a more complex HTML page, it is possible to load it from the file directly, using the <strong class="source-inline">load()</strong> method. To demonstrate this approach, letâ€™s create a <strong class="source-inline">form.html</strong> file in the <strong class="source-inline">resources</strong> folder with the following content:</p>
			<pre class="source-code">&lt;!DOCTYPE html&gt;</pre>
			<pre class="source-code">&lt;html lang="en"&gt;</pre>
			<pre class="source-code">&lt;head&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;meta charset="UTF-8"&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;title&gt;The Form&lt;/title&gt;</pre>
			<pre class="source-code">&lt;/head&gt;</pre>
			<pre class="source-code">&lt;body&gt;</pre>
			<pre class="source-code">&lt;form action="http://someServer:port/formHandler" method="post"&gt;</pre>
			<pre class="source-code">Â Â &lt;table&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;tr&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td&gt;&lt;label for="firstName"&gt;First name:&lt;/label&gt;&lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td&gt;&lt;input type="text" id="firstName" name="firstName"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;/tr&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;tr&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td&gt;&lt;label for="lastName"&gt;Last name:&lt;/label&gt;&lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td&gt;&lt;input type="text" id="lastName" name="lastName"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;/tr&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;tr&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td&gt;&lt;label for="age"&gt;Age:&lt;/label&gt;&lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td&gt;&lt;input type="text" id="age" name="age"&gt;&lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;/tr&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;tr&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td&gt;&lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;td align="center"&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â &lt;button id="submit" name="submit"&gt;Submit&lt;/button&gt;</pre>
			<pre class="source-code">Â Â Â Â Â Â &lt;/td&gt;</pre>
			<pre class="source-code">Â Â Â Â &lt;/tr&gt;</pre>
			<pre class="source-code">Â Â &lt;/table&gt;</pre>
			<pre class="source-code">&lt;/form&gt;</pre>
			<pre class="source-code">&lt;/body&gt;</pre>
			<pre class="source-code">&lt;/html&gt;</pre>
			<p>This HTML presents a form similar to the one we have created in the <em class="italic">Using FXML</em> section. After the <strong class="bold">Submit</strong> button is clicked, the form data is posted to a server to the <strong class="source-inline">\formHandler</strong> URI (see the <strong class="source-inline">&lt;form&gt;</strong> HTML tag). To present this form inside a JavaFX application, the <a id="_idIndexMarker1418"/>following code can be used:</p>
			<pre class="source-code">ClassLoader classLoader =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader();</pre>
			<pre class="source-code">String file = classLoader.getResource("form.html").getFile();</pre>
			<pre class="source-code">Text txt = new Text("Fill the form and click Submit");</pre>
			<pre class="source-code">WebView wv = new WebView();</pre>
			<pre class="source-code">WebEngine we = wv.getEngine();</pre>
			<pre class="source-code">File f = new File(file);</pre>
			<pre class="source-code">we.load(f.toURI().toString());</pre>
			<pre class="source-code">VBox vb = new VBox(txt, wv);</pre>
			<pre class="source-code">vb.setSpacing(10);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">Scene scene = new Scene(vb, 300, 200);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle("JavaFX with embedded HTML");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>As you can see, the difference from our other examples is that we now use the <strong class="source-inline">File</strong> class and its <strong class="source-inline">toURI()</strong> method to access the HTML in the <strong class="source-inline">src/main/resources/form.html</strong> file directly, without converting the content to a string first. If you run the <strong class="source-inline">start3()</strong> method (renamed <strong class="source-inline">start()</strong> ) of the <strong class="source-inline">HtmlWebView</strong> class, the<a id="_idIndexMarker1419"/> result looks as follows:</p>
			<div>
				<div id="_idContainer132" class="IMG---Figure">
					<img src="image/B18388_Figure_12.22.jpg" alt=""/>
				</div>
			</div>
			<p>This solution is useful when you need to send a request or post data from your JavaFX application. But, when the form you would like a user to fill is already available on the server, you can just load it from the URL. </p>
			<p>For example, letâ€™s incorporate a Google search in the JavaFX application. We can do it by changing the parameter value of the <strong class="source-inline">load()</strong> method to the URL of the page we would like to load (the <strong class="source-inline">start4()</strong> method of the <strong class="source-inline">HtmlWebView</strong> class):</p>
			<pre class="source-code">Text txt = new Text("Enjoy searching the Web!");</pre>
			<pre class="source-code">WebView wv = new WebView();</pre>
			<pre class="source-code">WebEngine we = wv.getEngine();</pre>
			<pre class="source-code">we.load("http://www.google.com");</pre>
			<pre class="source-code">VBox vb = new VBox(txt, wv);</pre>
			<pre class="source-code">vb.setSpacing(20);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setStyle("-fx-font-size: 20px;-fx-background-color: lightblue;");</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">Scene scene = new Scene(vb,750,500);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle(</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "JavaFX with the window to another server");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>We have also added a<a id="_idIndexMarker1420"/> style to the layout in order to increase the font and add color to the background, so we can see the outline of the area where the rendered HTML is embedded. When we run this example (donâ€™t forget to rename the <strong class="source-inline">start4()</strong> method <strong class="source-inline">start()</strong>), the following window appears:</p>
			<div>
				<div id="_idContainer133" class="IMG---Figure">
					<img src="image/B18388_Figure_12.23.jpg" alt=""/>
				</div>
			</div>
			<p>In this window, you<a id="_idIndexMarker1421"/> can perform all the aspects of a search that you usually access via the browser.</p>
			<p>And, as we have mentioned already, you can zoom into the rendered page. For example, if we add the <strong class="source-inline">wv.setZoom(1.5)</strong> line to the preceding example, the result will be as follows:</p>
			<div>
				<div id="_idContainer134" class="IMG---Figure">
					<img src="image/B18388_Figure_12.24.jpg" alt=""/>
				</div>
			</div>
			<p>Similarly, we can set the scale for the font and even the style from a file:</p>
			<pre class="source-code">wv.setFontScale(1.5);</pre>
			<pre class="source-code">we.setUserStyleSheetLocation("mystyle.css");</pre>
			<p>Notice, though, that we set the font scale on the <strong class="source-inline">WebView</strong> object, while we set the style in the <strong class="source-inline">WebEngine</strong> object. </p>
			<p>We can also access (and manipulate) the DOM object of the loaded page using the <strong class="source-inline">WebEngine</strong> class method, <strong class="source-inline">getDocument()</strong>: </p>
			<pre class="source-code">Document document = we.getDocument();</pre>
			<p>And, we can <a id="_idIndexMarker1422"/>access the browsing history, get the current index, and move the history backward and forward:</p>
			<pre class="source-code">WebHistory history = we.getHistory();Â Â </pre>
			<pre class="source-code">int currInd = history.getCurrentIndex(); </pre>
			<pre class="source-code">history.go(-1);</pre>
			<pre class="source-code">history.go( 1);</pre>
			<p>For each entry of the history, we can extract its URL, title, or last-visited date:</p>
			<pre class="source-code">WebHistory history = we.getHistory();</pre>
			<pre class="source-code">ObservableList&lt;WebHistory.Entry&gt; entries = </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â history.getEntries();</pre>
			<pre class="source-code">for(WebHistory.Entry entry: entries){</pre>
			<pre class="source-code">Â Â Â Â String url = entry.getUrl();</pre>
			<pre class="source-code">Â Â Â Â String title = entry.getTitle();</pre>
			<pre class="source-code">Â Â Â Â Date date = entry.getLastVisitedDate();</pre>
			<pre class="source-code">}</pre>
			<p>Read the documentation of the <strong class="source-inline">WebView</strong> and <strong class="source-inline">WebEngine</strong> classes to get more ideas about how you can take advantage of their functionality.</p>
			<h1 id="_idParaDest-277"><a id="_idTextAnchor276"/>Playing media</h1>
			<p>Adding an image<a id="_idIndexMarker1423"/> to a <a id="_idIndexMarker1424"/>scene of the JavaFX application does not require the <strong class="source-inline">com.sun.*</strong> packages, so the <strong class="source-inline">--add-export</strong> VM options listed in the <em class="italic">Embedding HTML</em> section are not needed. But, it doesnâ€™t hurt to have them anyway, so leave the <strong class="source-inline">--add-export</strong> options in place if you have added them already.</p>
			<p>An image can be included in a scene using the <strong class="source-inline">javafx.scene.image.Image</strong> and <strong class="source-inline">javafx.scene.image.ImageView</strong> classes. To demonstrate how to do it, we are going to use the Packt logo, <strong class="source-inline">packt.png</strong>, located in the <strong class="source-inline">resources</strong> folder. Here is the code that does it (the <strong class="source-inline">start6()</strong> method of the <strong class="source-inline">HelloWorld</strong> class):</p>
			<pre class="source-code">ClassLoader classLoader =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader();</pre>
			<pre class="source-code">String file = classLoader.getResource("packt.png").getFile();</pre>
			<pre class="source-code">Text txt = new Text("What a beautiful image!");</pre>
			<pre class="source-code">FileInputStream input = new FileInputStream(file);</pre>
			<pre class="source-code">Image image = new Image(input);</pre>
			<pre class="source-code">ImageView iv = new ImageView(image);</pre>
			<pre class="source-code">VBox vb = new VBox(txt, iv);</pre>
			<pre class="source-code">vb.setSpacing(20);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">Scene scene = new Scene(vb, 300, 200);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle("JavaFX with embedded HTML");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>If we run the preceding code, the result will be as follows:</p>
			<div>
				<div id="_idContainer135" class="IMG---Figure">
					<img src="image/B18388_Figure_12.25.jpg" alt=""/>
				</div>
			</div>
			<p>The currently supported image formats are BMP, GIF, JPEG, and PNG. Look through the API of the <strong class="source-inline">Image</strong> and <strong class="source-inline">ImageView</strong> classes (<a href="https://openjfx.io/javadoc/11/javafx.graphics/javafx/scene/image/package-summary.html">https://openjfx.io/javadoc/11/javafx.graphics/javafx/scene/image/package-summary.html</a>) to learn the many ways an image can be formatted and adjusted as needed.</p>
			<p>Now, letâ€™s see<a id="_idIndexMarker1425"/> how<a id="_idIndexMarker1426"/> to use other media files in a JavaFX application. Playing an audio or movie file requires the <strong class="source-inline">--add-export</strong> VM options listed in the <em class="italic">Embedding HTML</em> section. </p>
			<p>The currently supported encodings are as follows:</p>
			<ul>
				<li><strong class="source-inline">AAC</strong>: <strong class="bold">Advanced Audio Coding</strong> audio <a id="_idIndexMarker1427"/>compression</li>
				<li><strong class="source-inline">H.264/AVC</strong>: H.264/MPEG-4 Part 10 / <strong class="bold">AVC</strong> (<strong class="bold">Advanced Video Coding</strong>) video compression</li>
				<li><strong class="source-inline">MP3</strong>: Raw MPEG-1, 2, and 2.5 audio; layers I, II, and III</li>
				<li><strong class="source-inline">PCM</strong>: Uncompressed, raw audio samples</li>
			</ul>
			<p>You can see a more detailed description of the supported protocols, media containers, and metadata tags in the API documentation (<a href="https://openjfx.io/javadoc/11/javafx.media/javafx/scene/media/package-summary.html">https://openjfx.io/javadoc/11/javafx.media/javafx/scene/media/package-summary.html</a>).</p>
			<p>The following three classes allow constructing a media player that can be added to a scene:</p>
			<pre class="source-code">javafx.scene.media.Media;</pre>
			<pre class="source-code">javafx.scene.media.MediaPlayer;</pre>
			<pre class="source-code">javafx.scene.media.MediaView;</pre>
			<p>The <strong class="source-inline">Media</strong> class represents the source of the media. The <strong class="source-inline">MediaPlayer</strong> class provides all the methods that control the media playback: <strong class="source-inline">play()</strong>, <strong class="source-inline">stop()</strong>, <strong class="source-inline">pause()</strong>, <strong class="source-inline">setVolume()</strong>, and similar. You can also specify the number of times that the media should be played. The <strong class="source-inline">MediaView</strong> class extends the <strong class="source-inline">Node</strong> class and can be added to a scene. It provides a view of the media being played by the media player and is responsible for a media appearance.</p>
			<p>For the <a id="_idIndexMarker1428"/>demonstration, letâ€™s<a id="_idIndexMarker1429"/> run the <strong class="source-inline">start5()</strong> method of the <strong class="source-inline">HtmlWebView</strong> class, which plays the <strong class="source-inline">jb.mp3</strong> file located in the <strong class="source-inline">resources</strong> folder:</p>
			<pre class="source-code">Text txt1 = new Text("What a beautiful music!");</pre>
			<pre class="source-code">Text txt2 = </pre>
			<pre class="source-code">Â Â Â new Text("If you don't hear music, turn up the volume.");</pre>
			<pre class="source-code">ClassLoader classLoader =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader();</pre>
			<pre class="source-code">String file = classLoader.getResource("jb.mp3").getFile();</pre>
			<pre class="source-code">File f = new File(file);</pre>
			<pre class="source-code">Media m = new Media(f.toURI().toString());</pre>
			<pre class="source-code">MediaPlayer mp = new MediaPlayer(m);</pre>
			<pre class="source-code">MediaView mv = new MediaView(mp);</pre>
			<pre class="source-code">VBox vb = new VBox(txt1, txt2, mv);</pre>
			<pre class="source-code">vb.setSpacing(20);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">Scene scene = new Scene(vb, 350, 100);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle("JavaFX with embedded media player");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<pre class="source-code">mp.play();</pre>
			<p>Notice how a <strong class="source-inline">Media</strong> object <a id="_idIndexMarker1430"/>is <a id="_idIndexMarker1431"/>constructed based on the source file. The <strong class="source-inline">MediaPlayer</strong> object is constructed based on the <strong class="source-inline">Media</strong> object and then set as a property of the <strong class="source-inline">MediaView</strong> class constructor. The <strong class="source-inline">MediaView</strong> object is set on the scene along with two <strong class="source-inline">Text</strong> objects. We use the <strong class="source-inline">VBox</strong> object to provide the layout. Finally, after the scene is set on the stage and the stage becomes visible (after the <strong class="source-inline">show()</strong> method completes), the <strong class="source-inline">play()</strong> method is invoked on the <strong class="source-inline">MediaPlayer</strong> object. By default, the media is played once.</p>
			<p>If we execute this code, the following window will appear and the <strong class="source-inline">jb.m3</strong> file will be played:</p>
			<div>
				<div id="_idContainer136" class="IMG---Figure">
					<img src="image/B18388_Figure_12.26.jpg" alt=""/>
				</div>
			</div>
			<p>We could add controls to stop, pause, and adjust the volume, but it would require much more code, and that would go beyond the scope of this book. You can find a guide on how to do it in the Oracle online documentation (<a href="https://docs.oracle.com/javafx/2/media/jfxpub-media.htm">https://docs.oracle.com/javafx/2/media/jfxpub-media.htm</a>).</p>
			<p>A <strong class="source-inline">sea.mp4</strong> movie <a id="_idIndexMarker1432"/>file can<a id="_idIndexMarker1433"/> be played similarly (the <strong class="source-inline">start6()</strong> method of the <strong class="source-inline">HtmlWebView</strong> class):</p>
			<pre class="source-code">Text txt = new Text("What a beautiful movie!");</pre>
			<pre class="source-code">ClassLoader classLoader =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader();</pre>
			<pre class="source-code">String file = classLoader.getResource("sea.mp4").getFile(); </pre>
			<pre class="source-code">File f = new File(file);</pre>
			<pre class="source-code">Media m = new Media(f.toURI().toString());</pre>
			<pre class="source-code">MediaPlayer mp = new MediaPlayer(m);</pre>
			<pre class="source-code">MediaView mv = new MediaView(mp);</pre>
			<pre class="source-code">VBox vb = new VBox(txt, mv);</pre>
			<pre class="source-code">vb.setSpacing(20);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">Scene scene = new Scene(vb, 650, 400);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle("JavaFX with embedded media player");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<pre class="source-code">mp.play();</pre>
			<p>The only difference is the different sizes of the scene needed to show the full frame of this particular clip. We figured out the necessary size after several trial-and-error adjustments. Alternatively, we could use the <strong class="source-inline">MediaView</strong> methods (<strong class="source-inline">autosize()</strong>, <strong class="source-inline">preserveRatioProperty()</strong>, <strong class="source-inline">setFitHeight()</strong>, <strong class="source-inline">setFitWidth()</strong>, <strong class="source-inline">fitWidthProperty()</strong>, <strong class="source-inline">fitHeightProperty()</strong>, and similar) to adjust the size of the embedded window and to match the size of the scene automatically. If we execute the preceding example, the following window will pop up and<a id="_idIndexMarker1434"/> play <a id="_idIndexMarker1435"/>the clip:</p>
			<div>
				<div id="_idContainer137" class="IMG---Figure">
					<img src="image/B18388_Figure_12.27.jpg" alt=""/>
				</div>
			</div>
			<p>We can even combine playing both audio and video files in parallel, and thus provide a movie with a soundtrack (the <strong class="source-inline">start7()</strong> method of the <strong class="source-inline">HtmlWebView</strong> class):</p>
			<pre class="source-code">Text txt1 = new Text("What a beautiful movie and sound!");</pre>
			<pre class="source-code">Text txt2 = new Text("If you don't hear music, turn up the volume.");</pre>
			<pre class="source-code">ClassLoader classLoader =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader();</pre>
			<pre class="source-code">String file = classLoader.getResource("jb.mp3").getFile(); </pre>
			<pre class="source-code">File fs = new File(file);</pre>
			<pre class="source-code">Media ms = new Media(fs.toURI().toString());</pre>
			<pre class="source-code">MediaPlayer mps = new MediaPlayer(ms);</pre>
			<pre class="source-code">MediaView mvs = new MediaView(mps);</pre>
			<pre class="source-code">File fv = </pre>
			<pre class="source-code">Â Â Â Â Â new File(classLoader.getResource("sea.mp4").getFile());</pre>
			<pre class="source-code">Media mv = new Media(fv.toURI().toString());</pre>
			<pre class="source-code">MediaPlayer mpv = new MediaPlayer(mv);</pre>
			<pre class="source-code">MediaView mvv = new MediaView(mpv);</pre>
			<pre class="source-code">VBox vb = new VBox(txt1, txt2, mvs, mvv);</pre>
			<pre class="source-code">vb.setSpacing(20);</pre>
			<pre class="source-code">vb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">vb.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">Scene scene = new Scene(vb, 650, 500);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle("JavaFX with embedded media player");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â Â .setValue(e -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<pre class="source-code">mpv.play();</pre>
			<pre class="source-code">mps.play();</pre>
			<p>It is possible to do this because each of the players is executed by its own thread. </p>
			<p>For more information about the <strong class="source-inline">javafx.scene.media</strong> package, read the API and the developer guide online, links to which are provided here:</p>
			<ul>
				<li><a href="https://openjfx.io/javadoc/11/javafx.media/javafx/scene/media/package-summary.html">https://openjfx.io/javadoc/11/javafx.media/javafx/scene/media/package-summary.html</a> for the API of the <strong class="source-inline">javafx.scene.media</strong> package</li>
				<li><a href="https://docs.oracle.com/javafx/2/media/jfxpub-media.htm">https://docs.oracle.com/javafx/2/media/jfxpub-media.htm</a> for a tutorial on the <a id="_idIndexMarker1436"/>usage<a id="_idIndexMarker1437"/> of the <strong class="source-inline">javafx.scene.media</strong> package </li>
			</ul>
			<h1 id="_idParaDest-278"><a id="_idTextAnchor277"/>Adding effects</h1>
			<p>The <strong class="source-inline">javafx.scene.effects</strong> package contains <a id="_idIndexMarker1438"/>many classes that allow the adding of various effects to the nodes:</p>
			<ul>
				<li><strong class="source-inline">Blend</strong>: Combines pixels from two sources (typically images) using one of the pre-defined <strong class="source-inline">BlendModes</strong></li>
				<li><strong class="source-inline">Bloom</strong>: Makes the input image brighter, so that it appears to glow</li>
				<li><strong class="source-inline">BoxBlur</strong>: Adds blur to an image</li>
				<li><strong class="source-inline">ColorAdjust</strong>: Allows adjustments of hue, saturation, brightness, and contrast to an image</li>
				<li><strong class="source-inline">ColorInput</strong>: Renders a rectangular region that is filled with the given paint</li>
				<li><strong class="source-inline">DisplacementMap</strong>: Shifts each pixel by a specified distance</li>
				<li><strong class="source-inline">DropShadow</strong>: Renders a shadow of the given content behind the content</li>
				<li><strong class="source-inline">GaussianBlur</strong>: Adds blur using a particular (Gaussian) method</li>
				<li><strong class="source-inline">Glow</strong>: Makes the input image appear to glow</li>
				<li><strong class="source-inline">InnerShadow</strong>: Creates a shadow inside the frame</li>
				<li><strong class="source-inline">Lighting</strong>: Simulates a light source shining on the content and makes flat objects look more realistic</li>
				<li><strong class="source-inline">MotionBlur</strong>: Simulates the given content seen in motion</li>
				<li><strong class="source-inline">PerspectiveTransform</strong>: Transforms the content as seen in a perspective</li>
				<li><strong class="source-inline">Reflection</strong>: Renders a reflected version of the input below the actual input content</li>
				<li><strong class="source-inline">SepiaTone</strong>: Produces a sepia tone effect, similar to the appearance of antique photographs</li>
				<li><strong class="source-inline">Shadow</strong>: Creates a monochrome duplicate of the content with blurry edges</li>
			</ul>
			<p>All effects share <a id="_idIndexMarker1439"/>a parent, the <strong class="source-inline">Effect</strong> abstract class. The <strong class="source-inline">Node</strong> class has the <strong class="source-inline">setEffect(Effect e)</strong> method, which means that any of the effects can be added to any node. That is the main way of applying effects to the nodesâ€”the actors that produce a scene on a stage (if we recall our analogy introduced at the beginning of this chapter). </p>
			<p>The only exception is the <strong class="source-inline">Blend</strong> effect, which makes its usage more complicated than the use of other effects. In addition to using the <strong class="source-inline">setEffect(Effect e)</strong> method, some of the <strong class="source-inline">Node</strong> class children also have the <strong class="source-inline">setBlendMode(BlendMode bm)</strong> method, which allows regulating how the images blend into one another when they overlap. So, it is possible to set different blend effects in different ways that override one another and produce an unexpected result that may be difficult to debug. That is what makes the <strong class="source-inline">Blend</strong> effect usage more complicated, and that is why we are going to start the overview with how the <strong class="source-inline">Blend</strong> effect can be used.</p>
			<p>Three aspects regulate the appearance of the area where two images overlap (we use two images in our examples to make it simpler, but, in practice, many images can overlap):</p>
			<ul>
				<li><strong class="bold">The value of the opacity property</strong>: This defines how much can be seen through the image; the opacity value 0.0 means the image is fully transparent, while the opacity value 1.0 means nothing behind it can be seen.</li>
				<li><strong class="bold">The alpha value and strength of each color</strong>: This defines the transparency of the color as a double value in the range 0.0-1.0 or 0-255.</li>
				<li><strong class="bold">The blending mode, defined by the BlendMode enum value</strong>: Depending on the mode, opacity, and alpha value of each color, the result might also depend on the sequence in which the images were added to the scene; the first added image is called a bottom input, while the second of the overlapping images is called a top input. If the top input is completely opaque, the bottom input is hidden by the top input.</li>
			</ul>
			<p>The resulting appearance of the overlapping area is calculated based on the opacity, the alpha values of<a id="_idIndexMarker1440"/> the colors, the numeric values (strength) of the colors, and the blending mode, which can be one of the following:</p>
			<ul>
				<li><strong class="source-inline">ADD</strong>: The color and alpha components from the top input are added to those from the bottom input.</li>
				<li><strong class="source-inline">BLUE</strong>: The blue component of the bottom input is replaced with the blue component of the top input; the other color components are unaffected.</li>
				<li><strong class="source-inline">COLOR_BURN</strong>: The inverse of the bottom input color components is divided by the top input color components, all of which is then inverted to produce the resulting color.</li>
				<li><strong class="source-inline">COLOR_DODGE</strong>: The bottom input color components are divided by the inverse of the top input color components to produce the resulting color.</li>
				<li><strong class="source-inline">DARKEN</strong>: The darker of the color components from the two inputs is selected to produce the resulting color.</li>
				<li><strong class="source-inline">DIFFERENCE</strong>: The darker of the color components from the two inputs is subtracted from the lighter one to produce the resulting color.</li>
				<li><strong class="source-inline">EXCLUSION</strong>: The color components from the two inputs are multiplied and doubled, and then subtracted from the sum of the bottom input color components, to produce the resulting color.</li>
				<li><strong class="source-inline">GREEN</strong>: The green component of the bottom input is replaced with the green component of the top input; the other color components are unaffected.</li>
				<li><strong class="source-inline">HARD_LIGHT</strong>: The input color components are either multiplied or screened, depending on the top input color.</li>
				<li><strong class="source-inline">LIGHTEN</strong>: The lighter of the color components from the two inputs is selected to produce the resulting color.</li>
				<li><strong class="source-inline">MULTIPLY</strong>: The <a id="_idIndexMarker1441"/>color components from the first input are multiplied by those from the second input.</li>
				<li><strong class="source-inline">OVERLAY</strong>: The input color components are either multiplied or screened, depending on the bottom input color.</li>
				<li><strong class="source-inline">RED</strong>: The red component of the bottom input is replaced with the red component of the top input; the other color components are unaffected.</li>
				<li><strong class="source-inline">SCREEN</strong>: The color components from both of the inputs are inverted, multiplied with each other, and that result is again inverted to produce the resulting color.</li>
				<li><strong class="source-inline">SOFT_LIGHT</strong>: The input color components are either darkened or lightened, depending on the top input color.</li>
				<li><strong class="source-inline">SRC_ATOP</strong>: The part of the top input lying inside the bottom input is blended with the bottom input.</li>
				<li><strong class="source-inline">SRC_OVER</strong>: The top input is blended over the bottom input.</li>
			</ul>
			<p>To demonstrate the <strong class="source-inline">Blend</strong> effect, letâ€™s create another application, called <strong class="source-inline">BlendEffect</strong>. It does not require the <strong class="source-inline">com.sun.*</strong> packages, so the <strong class="source-inline">--add-export</strong> VM options are not needed. Only the <strong class="source-inline">--module-path</strong> and <strong class="source-inline">--add-modules</strong> options, described in the <em class="italic">JavaFX fundamentals</em> section, have to be set for compilation and execution. </p>
			<p>The scope of this book does not allow us to demonstrate all possible combinations, so we will create a red circle and a blue square (see the <strong class="source-inline">BlendEffect</strong> class):</p>
			<pre class="source-code">Circle createCircle(){</pre>
			<pre class="source-code">Â Â Â Â Circle c = new Circle();</pre>
			<pre class="source-code">Â Â Â Â c.setFill(Color.rgb(255, 0, 0, 0.5));</pre>
			<pre class="source-code">Â Â Â Â c.setRadius(25);</pre>
			<pre class="source-code">Â Â Â Â return c;</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">Rectangle createSquare(){</pre>
			<pre class="source-code">Â Â Â Â Rectangle r = new Rectangle();</pre>
			<pre class="source-code">Â Â Â Â r.setFill(Color.rgb(0, 0, 255, 1.0));</pre>
			<pre class="source-code">Â Â Â Â r.setWidth(50);</pre>
			<pre class="source-code">Â Â Â Â r.setHeight(50);</pre>
			<pre class="source-code">Â Â Â Â return r;</pre>
			<pre class="source-code">}</pre>
			<p>We used <a id="_idIndexMarker1442"/>the <strong class="source-inline">Color.rgb(int red, int green, int blue, double alpha)</strong> method to define the colors of each of the figures, but there are many more ways to do it. Read the <strong class="source-inline">Color</strong> class API documentation for more details (<a href="https://openjfx.io/javadoc/11/javafx.graphics/javafx/scene/paint/Color.html">https://openjfx.io/javadoc/11/javafx.graphics/javafx/scene/paint/Color.html</a>).</p>
			<p>To overlap the created circle and square, we will use the <strong class="source-inline">Group</strong> node:</p>
			<pre class="source-code">Node c = createCircle();</pre>
			<pre class="source-code">Node s = createSquare();</pre>
			<pre class="source-code">Node g = new Group(s, c);</pre>
			<p>In the preceding code, the square is a bottom input. We will also create a group where the square is a top input:</p>
			<pre class="source-code">Node c = createCircle();</pre>
			<pre class="source-code">Node s = createSquare();</pre>
			<pre class="source-code">Node g = new Group(c, s);</pre>
			<p>The distinction is important because we defined the circle as half-opaque, while the square was<a id="_idIndexMarker1443"/> completely opaque. We will use the same settings throughout all our examples. </p>
			<p>Letâ€™s compare the two modes, <strong class="source-inline">MULTIPLY</strong> and <strong class="source-inline">SRC_OVER</strong>. We will set them on the groups, using the <strong class="source-inline">setEffect()</strong> method, as follows:</p>
			<pre class="source-code">Blend blnd = new Blend();</pre>
			<pre class="source-code">blnd.setMode(BlendMode.MULTIPLY);</pre>
			<pre class="source-code">Node c = createCircle();</pre>
			<pre class="source-code">Node s = createSquare();</pre>
			<pre class="source-code">Node g = new Group(s, c);</pre>
			<pre class="source-code">g.setEffect(blnd);</pre>
			<p>In the <strong class="source-inline">start()</strong> method of the called <strong class="source-inline">BlendEffect</strong> class, for each mode, we create two groups, one with the input where the circle is on top of the square, and another with the input where the square is on top of the circle, and we put the four created groups in a <strong class="source-inline">GridPane</strong> layout (see the source code for details). If we run the <strong class="source-inline">BlendEffect</strong> application, the result will be as follows:</p>
			<div>
				<div id="_idContainer138" class="IMG---Figure">
					<img src="image/B18388_Figure_12.28.jpg" alt=""/>
				</div>
			</div>
			<p>As was expected, when the square is on the top (the two images on the right), the overlapping area<a id="_idIndexMarker1444"/> is completely taken by the opaque square. But, when the circle is a top input (the two images on the left), the overlapped area is somewhat visible and calculated based on the blend effect.</p>
			<p>However, if we set the same mode directly on the group, the result will be slightly different. Letâ€™s run the same code but with the mode set on the group:</p>
			<pre class="source-code">Node c = createCircle();</pre>
			<pre class="source-code">Node s = createSquare();</pre>
			<pre class="source-code">Node g = new Group(c, s);</pre>
			<pre class="source-code">g.setBlendMode(BlendMode.MULTIPLY);<img src="image/1.jpg" alt=""/></pre>
			<p>Locate the following code in the <strong class="source-inline">start()</strong> method:</p>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setEffectOnGroup(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setModeOnGroup(bm1, bm2);</pre>
			<p>And change it to the following:</p>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setEffectOnGroup(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setModeOnGroup(bm1, bm2);</pre>
			<p>If we run the <strong class="source-inline">BlendEffect</strong> class again, the result will look as follows:</p>
			<div>
				<div id="_idContainer140" class="IMG---Figure">
					<img src="image/B18388_Figure_12.29.jpg" alt=""/>
				</div>
			</div>
			<p>As you can see, the red color of the circle has slightly changed and there is no difference between the <strong class="source-inline">MULTIPLY</strong> and <strong class="source-inline">SRC_OVER</strong> modes. That is the issue with the sequence of adding the nodes to the scene we mentioned at the beginning of the section.</p>
			<p>The result also <a id="_idIndexMarker1445"/>changes depending on which node the effect is set on. For example, instead of setting the effect on the group, letâ€™s set the effect on the circle only:</p>
			<pre class="source-code">Blend blnd = new Blend();</pre>
			<pre class="source-code">blnd.setMode(BlendMode.MULTIPLY);</pre>
			<pre class="source-code">Node c = createCircle();</pre>
			<pre class="source-code">Node s = createSquare();</pre>
			<pre class="source-code">c.setEffect(blnd);</pre>
			<pre class="source-code">Node g = new Group(s, c);</pre>
			<p>Locate the following code in the <strong class="source-inline">start()</strong> method:</p>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setModeOnGroup(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setEffectOnCircle(bm1, bm2);</pre>
			<p>And change it to the following:</p>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setModeOnGroup(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setEffectOnCircle(bm1, bm2);</pre>
			<p>We run the application and see the following:</p>
			<div>
				<div id="_idContainer141" class="IMG---Figure">
					<img src="image/B18388_Figure_12.30.jpg" alt=""/>
				</div>
			</div>
			<p>The two images on the right remain the same as in all the previous examples, but the two images on<a id="_idIndexMarker1446"/> the left show the new colors of the overlapping area. Now, letâ€™s set the same effect on the square instead of the circle, as follows:</p>
			<pre class="source-code">Blend blnd = new Blend();</pre>
			<pre class="source-code">blnd.setMode(BlendMode.MULTIPLY);</pre>
			<pre class="source-code">Node c = createCircle();</pre>
			<pre class="source-code">Node s = createSquare();</pre>
			<pre class="source-code">s.setEffect(blnd);</pre>
			<pre class="source-code">Node g = new Group(s, c);</pre>
			<p>Locate the following code in the <strong class="source-inline">start()</strong> method:</p>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setEffectOnCircle(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setEffectOnSquare(bm1, bm2);</pre>
			<p>And change it to the following:</p>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setEffectOnCircle(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setEffectOnSquare(bm1, bm2); </pre>
			<p>The result will slightly change again and will look as presented in the following screenshot:</p>
			<div>
				<div id="_idContainer142" class="IMG---Figure">
					<img src="image/B18388_Figure_12.31.jpg" alt=""/>
				</div>
			</div>
			<p>There is no<a id="_idIndexMarker1447"/> difference between the <strong class="source-inline">MULTIPLY</strong> and <strong class="source-inline">SRC_OVER</strong> modes, but the red color is different than it was when we set the effect on the circle. </p>
			<p>We can change the approach again and set the blend mode directly on the circle only, using the following code:</p>
			<pre class="source-code">Node c = createCircle();</pre>
			<pre class="source-code">Node s = createSquare();</pre>
			<pre class="source-code">c.setBlendMode(BlendMode.MULTIPLY);</pre>
			<p>Locate the following code in the <strong class="source-inline">start()</strong> method:</p>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setEffectOnSquare(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setModeOnCircle(bm1, bm2);</pre>
			<p>And change it to this:</p>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setEffectOnSquare(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setModeOnCircle(bm1, bm2);</pre>
			<p>The result changes again:</p>
			<div>
				<div id="_idContainer143" class="IMG---Figure">
					<img src="image/B18388_Figure_12.32.jpg" alt=""/>
				</div>
			</div>
			<p>Setting the blend mode on the square only removes the difference between the <strong class="source-inline">MULTIPLY</strong> and <strong class="source-inline">SRC_OVER</strong> modes again.</p>
			<p>Locate the following <a id="_idIndexMarker1448"/>code in the <strong class="source-inline">start()</strong> method:</p>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setModeOnCircle(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setModeOnSquare(bm1, bm2);</pre>
			<p>And change it to the following:</p>
			<pre class="source-code">Â Â Â Â Â Â //Node[] node = setModeOnCircle(bm1, bm2);</pre>
			<pre class="source-code">Â Â Â Â Â Â Node[] node = setModeOnSquare(bm1, bm2);</pre>
			<p>The result is as follows:</p>
			<div>
				<div id="_idContainer144" class="IMG---Figure">
					<img src="image/B18388_Figure_12.33.jpg" alt=""/>
				</div>
			</div>
			<p>To avoid confusion and make the results of the blending more predictable, you have to watch the sequence in which the nodes are added to the scene and the consistency of the way the blend effect is applied.</p>
			<p>In the source <a id="_idIndexMarker1449"/>code provided with this book, you will find examples for all effects included in the <strong class="source-inline">javafx.scene.effects</strong> package. They are all demonstrated by running side-by-side comparisons. Here is one example:</p>
			<div>
				<div id="_idContainer145" class="IMG---Figure">
					<img src="image/B18388_Figure_12.34.jpg" alt=""/>
				</div>
			</div>
			<p>For your convenience, there are <strong class="bold">Pause</strong> and <strong class="bold">Continue</strong> buttons provided that allow you to pause the demonstration and review the result for different values of opacity set on the blend effect.</p>
			<p>To demonstrate all other effects, we have created yet another application, called <strong class="source-inline">OtherEffects</strong>, which also doesnâ€™t require the <strong class="source-inline">com.sun.*</strong> packages, so the <strong class="source-inline">--add-export</strong> VM options are not needed. The effects demonstrated include <strong class="source-inline">Bloom</strong>, <strong class="source-inline">BoxBlur</strong>, <strong class="source-inline">ColorAdjust</strong>, <strong class="source-inline">DisplacementMap</strong>, <strong class="source-inline">DropShadow</strong>, <strong class="source-inline">Glow</strong>, <strong class="source-inline">InnerShadow</strong>, <strong class="source-inline">Lighting</strong>, <strong class="source-inline">MotionBlur</strong>, <strong class="source-inline">PerspectiveTransform</strong>, <strong class="source-inline">Reflection</strong>, <strong class="source-inline">ShadowTone</strong>, and <strong class="source-inline">SepiaTone</strong>. We have used two images to present the result of applying<a id="_idIndexMarker1450"/> each of the effects (the Packt logo and a mountain lake view):</p>
			<pre class="source-code">ClassLoader classLoader = </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Thread.currentThread().getContextClassLoader(); </pre>
			<pre class="source-code">String file = classLoader.getResource("packt.png").getFile(); FileInputStream inputP = new FileInputStream(file);</pre>
			<pre class="source-code">Image imageP = new Image(inputP);</pre>
			<pre class="source-code">ImageView ivP = new ImageView(imageP);</pre>
			<pre class="source-code">String file2 = classLoader.getResource("mount.jpeg").getFile(); FileInputStream inputM = new FileInputStream(file2);</pre>
			<pre class="source-code">Image imageM = new Image(inputM);</pre>
			<pre class="source-code">ImageView ivM = new ImageView(imageM);</pre>
			<pre class="source-code">ivM.setPreserveRatio(true);</pre>
			<pre class="source-code">ivM.setFitWidth(300);</pre>
			<p>We also have added two buttons that allow you to pause and continue the demonstration (it iterates over the effect and the values of their parameters):</p>
			<pre class="source-code">Button btnP = new Button("Pause");</pre>
			<pre class="source-code">btnP.setOnAction(e1 -&gt; et.pause());</pre>
			<pre class="source-code">btnP.setStyle("-fx-background-color: lightpink;");</pre>
			<pre class="source-code">Button btnC = new Button("Continue");</pre>
			<pre class="source-code">btnC.setOnAction(e2 -&gt; et.cont());</pre>
			<pre class="source-code">btnC.setStyle("-fx-background-color: lightgreen;");</pre>
			<p>The <strong class="source-inline">et</strong> object is the object of the <strong class="source-inline">EffectsThread</strong> thread:</p>
			<pre class="source-code">EffectsThread et = new EffectsThread(txt, ivM, ivP);</pre>
			<p>The thread goes through the list of the effects, creates a corresponding effect 10 times (with 10 different effectsâ€™ parameter values), and, every time, sets the created <strong class="source-inline">Effect</strong> object on each of the images, then sleeps for 1 second to give you an opportunity to<a id="_idIndexMarker1451"/> review the result:</p>
			<pre class="source-code">public void run(){</pre>
			<pre class="source-code">Â Â Â Â try {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â for(String effect: effects){</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â for(int i = 0; i &lt; 11; i++){</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â double d = Math.round(i * 0.1 * 10.0) / 10.0;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Effect e = createEffect(effect, d, txt);</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ivM.setEffect(e);</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ivP.setEffect(e);</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â TimeUnit.SECONDS.sleep(1);</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if(pause){</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â while(true){</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â TimeUnit.SECONDS.sleep(1);</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if(!pause){</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break;</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â }</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Platform.exit();</pre>
			<pre class="source-code">Â Â Â Â } catch (Exception ex){</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â ex.printStackTrace();</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<pre class="source-code">}</pre>
			<p>We will show how each effect is created next, under the screenshot with the effectâ€™s result. To present<a id="_idIndexMarker1452"/> the result, we have used the <strong class="source-inline">GridPane</strong> layout:</p>
			<pre class="source-code">GridPane grid = new GridPane();</pre>
			<pre class="source-code">grid.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">grid.setVgap(25);</pre>
			<pre class="source-code">grid.setPadding(new Insets(10, 10, 10, 10));</pre>
			<pre class="source-code">int i = 0;</pre>
			<pre class="source-code">grid.add(txt,Â Â Â Â 0, i++, 2, 1);</pre>
			<pre class="source-code">GridPane.setHalignment(txt, HPos.CENTER);</pre>
			<pre class="source-code">grid.add(ivP,Â Â Â Â 0, i++, 2, 1);</pre>
			<pre class="source-code">GridPane.setHalignment(ivP, HPos.CENTER);</pre>
			<pre class="source-code">grid.add(ivM,Â Â Â Â 0, i++, 2, 1);</pre>
			<pre class="source-code">GridPane.setHalignment(ivM, HPos.CENTER);</pre>
			<pre class="source-code">grid.addRow(i++, new Text());</pre>
			<pre class="source-code">HBox hb = new HBox(btnP, btnC);</pre>
			<pre class="source-code">hb.setAlignment(Pos.CENTER);</pre>
			<pre class="source-code">hb.setSpacing(25);</pre>
			<pre class="source-code">grid.add(hb,Â Â Â Â 0, i++, 2, 1);</pre>
			<pre class="source-code">GridPane.setHalignment(hb, HPos.CENTER);</pre>
			<p>And, finally, the created <strong class="source-inline">GridPane</strong> object was passed to the scene, which in turn was placed on a stage familiar to you from our earlier examples:</p>
			<pre class="source-code">Scene scene = new Scene(grid, 450, 500);</pre>
			<pre class="source-code">primaryStage.setScene(scene);</pre>
			<pre class="source-code">primaryStage.setTitle("JavaFX effect demo");</pre>
			<pre class="source-code">primaryStage.onCloseRequestProperty()</pre>
			<pre class="source-code">Â Â Â Â .setValue(e3 -&gt; System.out.println("Bye! See you later!"));</pre>
			<pre class="source-code">primaryStage.show();</pre>
			<p>The following <a id="_idIndexMarker1453"/>screenshots depict examples of the effects of each of the 13 parameter values. Under each screenshot, we present the code snippet from the <strong class="source-inline">createEffect(String effect, double d, Text txt)</strong> method that created this effect:</p>
			<ul>
				<li>Effect of parameter value 1:</li>
			</ul>
			<div>
				<div id="_idContainer146" class="IMG---Figure">
					<img src="image/B18388_Figure_12.35.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">//double d = 0.9;</pre>
			<pre class="source-code">txt.setText(effect + ".threshold: " + d);</pre>
			<pre class="source-code">Bloom b = new Bloom();</pre>
			<pre class="source-code">b.setThreshold(d);</pre>
			<ul>
				<li>Effect <a id="_idIndexMarker1454"/>of parameter value 2:</li>
			</ul>
			<div>
				<div id="_idContainer147" class="IMG---Figure">
					<img src="image/B18388_Figure_12.36.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">// double d = 0.3;</pre>
			<pre class="source-code">int i = (int) d * 10;</pre>
			<pre class="source-code">int it = i / 3;</pre>
			<pre class="source-code">txt.setText(effect + ".iterations: " + it);</pre>
			<pre class="source-code">BoxBlur bb = new BoxBlur();</pre>
			<pre class="source-code">bb.setIterations(i);</pre>
			<ul>
				<li>Effect<a id="_idIndexMarker1455"/> of parameter value 3:</li>
			</ul>
			<div>
				<div id="_idContainer148" class="IMG---Figure">
					<img src="image/B18388_Figure_12.37.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">double c = Math.round((-1.0 + d * 2) * 10.0) / 10.0;Â Â Â Â Â // 0.6</pre>
			<pre class="source-code">txt.setText(effect + ": " + c);</pre>
			<pre class="source-code">ColorAdjust ca = new ColorAdjust();</pre>
			<pre class="source-code">ca.setContrast(c);</pre>
			<ul>
				<li>Effect of <a id="_idIndexMarker1456"/>parameter value 4:</li>
			</ul>
			<div>
				<div id="_idContainer149" class="IMG---Figure">
					<img src="image/B18388_Figure_12.38.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">double h = Math.round((-1.0 + d * 2) * 10.0) / 10.0;Â Â Â Â Â // 0.6</pre>
			<pre class="source-code">txt.setText(effect + ": " + h);</pre>
			<pre class="source-code">ColorAdjust ca1 = new ColorAdjust();</pre>
			<pre class="source-code">ca1.setHue(h);</pre>
			<ul>
				<li>Effect of <a id="_idIndexMarker1457"/>parameter value 5:</li>
			</ul>
			<div>
				<div id="_idContainer150" class="IMG---Figure">
					<img src="image/B18388_Figure_12.39.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">double st = Math.round((-1.0 + d * 2) * 10.0) / 10.0;Â Â Â Â // 0.6</pre>
			<pre class="source-code">txt.setText(effect + ": " + st);</pre>
			<pre class="source-code">ColorAdjust ca3 = new ColorAdjust();</pre>
			<pre class="source-code">ca3.setSaturation(st);</pre>
			<ul>
				<li>Effect of<a id="_idIndexMarker1458"/> parameter value 6:</li>
			</ul>
			<div>
				<div id="_idContainer151" class="IMG---Figure">
					<img src="image/B18388_Figure_12.40.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">int w = (int)Math.round(4096 * d);Â Â //819</pre>
			<pre class="source-code">int h1 = (int)Math.round(4096 * d); //819</pre>
			<pre class="source-code">txt.setText(effect + ": " + ": width: " + w + ", height: " + </pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â h1);</pre>
			<pre class="source-code">DisplacementMap dm = new DisplacementMap();</pre>
			<pre class="source-code">FloatMap floatMap = new FloatMap();</pre>
			<pre class="source-code">floatMap.setWidth(w);</pre>
			<pre class="source-code">floatMap.setHeight(h1);</pre>
			<pre class="source-code">for (int k = 0; k &lt; w; k++) {</pre>
			<pre class="source-code">Â Â Â Â double v = (Math.sin(k / 20.0 * Math.PI) - 0.5) / 40.0;</pre>
			<pre class="source-code">Â Â Â Â for (int j = 0; j &lt; h1; j++) {</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â floatMap.setSamples(k, j, 0.0f, (float) v);</pre>
			<pre class="source-code">Â Â Â Â }</pre>
			<pre class="source-code">}</pre>
			<pre class="source-code">dm.setMapData(floatMap);</pre>
			<ul>
				<li>Effect of parameter value 7:</li>
			</ul>
			<div>
				<div id="_idContainer152" class="IMG---Figure">
					<img src="image/B18388_Figure_12.41.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">double rd = Math.round((127.0 * d) * 10.0) / 10.0; // 127.0</pre>
			<pre class="source-code">System.out.println(effect + ": " + rd);</pre>
			<pre class="source-code">txt.setText(effect + ": " + rd);</pre>
			<pre class="source-code">DropShadow sh = new DropShadow();</pre>
			<pre class="source-code">sh.setRadius(rd);</pre>
			<ul>
				<li>Effect of <a id="_idIndexMarker1459"/>parameter value 8:</li>
			</ul>
			<div>
				<div id="_idContainer153" class="IMG---Figure">
					<img src="image/B18388_Figure_12.42.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">double rad = Math.round(12.1 * d *10.0)/10.0;Â Â Â Â Â Â // 9.7</pre>
			<pre class="source-code">double off = Math.round(15.0 * d *10.0)/10.0;Â Â Â Â Â Â // 12.0</pre>
			<pre class="source-code">txt.setText("InnerShadow: radius: " + rad + ", offset:" + off);</pre>
			<pre class="source-code">InnerShadow is = new InnerShadow();</pre>
			<pre class="source-code">is.setColor(Color.web("0x3b596d"));</pre>
			<pre class="source-code">is.setOffsetX(off);</pre>
			<pre class="source-code">is.setOffsetY(off);</pre>
			<pre class="source-code">is.setRadius(rad);</pre>
			<ul>
				<li>Effect of<a id="_idIndexMarker1460"/> parameter value 9:</li>
			</ul>
			<div>
				<div id="_idContainer154" class="IMG---Figure">
					<img src="image/B18388_Figure_12.43.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">double sS = Math.round((d * 4)*10.0)/10.0;Â Â Â Â Â Â // 0.4</pre>
			<pre class="source-code">txt.setText(effect + ": " + sS);</pre>
			<pre class="source-code">Light.Spot lightSs = new Light.Spot();</pre>
			<pre class="source-code">lightSs.setX(150);</pre>
			<pre class="source-code">lightSs.setY(100);</pre>
			<pre class="source-code">lightSs.setZ(80);</pre>
			<pre class="source-code">lightSs.setPointsAtX(0);</pre>
			<pre class="source-code">lightSs.setPointsAtY(0);</pre>
			<pre class="source-code">lightSs.setPointsAtZ(-50);</pre>
			<pre class="source-code">lightSs.setSpecularExponent(sS);</pre>
			<pre class="source-code">Lighting lSs = new Lighting();</pre>
			<pre class="source-code">lSs.setLight(lightSs);</pre>
			<pre class="source-code">lSs.setSurfaceScale(5.0);</pre>
			<ul>
				<li>Effect of <a id="_idIndexMarker1461"/>parameter value 10:</li>
			</ul>
			<div>
				<div id="_idContainer155" class="IMG---Figure">
					<img src="image/B18388_Figure_12.44.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">double r = Math.round((63.0 * d)*10.0) / 10.0;Â Â Â Â Â Â // 31.5</pre>
			<pre class="source-code">txt.setText(effect + ": " + r);</pre>
			<pre class="source-code">MotionBlur mb1 = new MotionBlur();</pre>
			<pre class="source-code">mb1.setRadius(r);</pre>
			<pre class="source-code">mb1.setAngle(-15);</pre>
			<ul>
				<li>Effect<a id="_idIndexMarker1462"/> of parameter value 11:</li>
			</ul>
			<div>
				<div id="_idContainer156" class="IMG---Figure">
					<img src="image/B18388_Figure_12.45.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">// double d = 0.9;</pre>
			<pre class="source-code">txt.setText(effect + ": " + d); </pre>
			<pre class="source-code">PerspectiveTransform pt =</pre>
			<pre class="source-code">Â Â Â Â Â Â Â Â new PerspectiveTransform(0., 1. + 50.*d, 310., 50. - </pre>
			<pre class="source-code">Â Â Â Â Â Â Â 50.*d, 310., 50. + 50.*d + 1., 0., 100. - 50. * d + 2.);</pre>
			<ul>
				<li>Effect of<a id="_idIndexMarker1463"/> parameter value 12:</li>
			</ul>
			<div>
				<div id="_idContainer157" class="IMG---Figure">
					<img src="image/B18388_Figure_12.46.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">// double d = 0.6;</pre>
			<pre class="source-code">txt.setText(effect + ": " + d);</pre>
			<pre class="source-code">Reflection ref = new Reflection();</pre>
			<pre class="source-code">ref.setFraction(d);</pre>
			<ul>
				<li>Effect of <a id="_idIndexMarker1464"/>parameter value 13:</li>
			</ul>
			<div>
				<div id="_idContainer158" class="IMG---Figure">
					<img src="image/B18388_Figure_12.47.jpg" alt=""/>
				</div>
			</div>
			<pre class="source-code">// double d = 1.0;</pre>
			<pre class="source-code">txt.setText(effect + ": " + d);</pre>
			<pre class="source-code">SepiaTone sep = new SepiaTone();</pre>
			<pre class="source-code">sep.setLevel(d);</pre>
			<p>The full source<a id="_idIndexMarker1465"/> code of this demonstration is provided with the book and is available on GitHub.</p>
			<h1 id="_idParaDest-279"><a id="_idTextAnchor278"/>Summary</h1>
			<p>In this chapter, you were introduced to the JavaFX kit, its main features, and how it can be used to create a GUI application. The topics covered included an overview of Java GUI technologies, the JavaFX control elements, charts, using CSS, FXML, embedding HTML, playing media, and adding effects.</p>
			<p>Now, you can create a user interface using Java GUI technologies, as well as creating and using a user interface project as a standalone application.</p>
			<p>The next chapter is dedicated to functional programming. It provides an overview of functional interfaces that come with JDK, explains what a Lambda expression is, and how to use a functional interface in a Lambda expression. It also explains and demonstrates how to use method references.</p>
			<h1 id="_idParaDest-280"><a id="_idTextAnchor279"/>Quiz</h1>
			<ol>
				<li value="1">What is the top-level content container in JavaFX?</li>
				<li>What is the base class of all the scene participants in JavaFX?</li>
				<li>Name the base class of a JavaFX application.</li>
				<li>What is one method of the JavaFX application that has to be implemented?</li>
				<li>Which <strong class="source-inline">Application</strong> method has to be called by the <strong class="source-inline">main</strong> method to execute a JavaFX application?</li>
				<li>Which two VM options are required to execute a JavaFX application?</li>
				<li>Which <strong class="source-inline">Application</strong> method is called when the JavaFX application window is closed using the <strong class="bold">x</strong> button in the upper corner?</li>
				<li>Which class has to be used to embed HTML?</li>
				<li>Name three classes that have to be used to play media. </li>
				<li>What is the VM option required to be added in order to play media?</li>
				<li>Name five JavaFX effects.</li>
			</ol>
		</div>
	</body></html>