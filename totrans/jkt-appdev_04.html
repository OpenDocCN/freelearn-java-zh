<html><head></head><body>
<div id="_idContainer014">
<h1 class="chapter-number" id="_idParaDest-51"><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 id="_idParaDest-52"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.2.1">JSON Processing and JSON Binding</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.3.1">JavaScript Object Notation</span></strong><span class="koboSpan" id="kobo.4.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.5.1">JSON</span></strong><span class="koboSpan" id="kobo.6.1">) is a </span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.7.1">human-readable data interchange format. </span><span class="koboSpan" id="kobo.7.2">As its name implies, JSON is derived from JavaScript. </span><span class="koboSpan" id="kobo.7.3">Jakarta EE provides support for two different APIs for JSON manipulation, namely </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">Jakarta JSON Processing</span></strong><span class="koboSpan" id="kobo.9.1">, which</span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.10.1"> is a lower-level API allowing fine-grained control, and </span><strong class="bold"><span class="koboSpan" id="kobo.11.1">Jakarta JSON Binding</span></strong><span class="koboSpan" id="kobo.12.1">, which is a higher-level API that</span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.13.1"> allows us to easily populate Java objects from JSON data, as well as quickly generate JSON-formatted data from Java objects. </span><span class="koboSpan" id="kobo.13.2">In this chapter, we will cover both JSON Processing and </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">JSON Binding.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">JSON Processing includes two APIs for </span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.16.1">processing JSON: the </span><strong class="bold"><span class="koboSpan" id="kobo.17.1">Model API</span></strong><span class="koboSpan" id="kobo.18.1"> and the </span><strong class="bold"><span class="koboSpan" id="kobo.19.1">Streaming API</span></strong><span class="koboSpan" id="kobo.20.1">. </span><span class="koboSpan" id="kobo.20.2">Both</span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.21.1"> of these APIs will be covered in this chapter. </span><span class="koboSpan" id="kobo.21.2">JSON Binding transparently populates Java objects from JSON strings, as well as easily generates JSON strings from </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">Java objects.</span></span></p>
<p><span class="koboSpan" id="kobo.23.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.25.1">Jakarta </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">JSON Processing</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Jakarta </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">JSON binding</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.29.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.30.1">Example source code for this chapter can be found on GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">at </span></span><a href="https://github.com/PacktPublishing/Jakarta-EE-Application-Development/tree/main/ch04_src"><span class="No-Break"><span class="koboSpan" id="kobo.32.1">https://github.com/PacktPublishing/Jakarta-EE-Application-Development/tree/main/ch04_src</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.33.1">.</span></span></p>
<h1 id="_idParaDest-53"><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.34.1">Jakarta JSON Processing</span></h1>
<p><span class="koboSpan" id="kobo.35.1">In the following </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.36.1">sections, we will discuss how to process JSON data using the two APIs provided by Jakarta JSON Processing, namely the Model and Streaming APIs. </span><span class="koboSpan" id="kobo.36.2">We will also discuss how to retrieve values from JSON data using JSON Pointer, as well as how to partially modify JSON data via </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">JSON Patch.</span></span></p>
<h2 id="_idParaDest-54"><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.38.1">The JSON Processing Model API</span></h2>
<p><span class="koboSpan" id="kobo.39.1">The</span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.40.1"> JSON Processing Model API allows us to generate an in-memory representation of a JSON object. </span><span class="koboSpan" id="kobo.40.2">This API is more flexible than the Streaming API discussed later in this chapter. </span><span class="koboSpan" id="kobo.40.3">However, it is slower and requires more memory, which can be a concern when handling large volumes </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">of data.</span></span></p>
<h3><span class="koboSpan" id="kobo.42.1">Generating JSON data with the Model API</span></h3>
<p><span class="koboSpan" id="kobo.43.1">At the heart </span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.44.1">of the JSON Processing Model API is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.45.1">JsonObjectBuilder</span></strong><span class="koboSpan" id="kobo.46.1"> class. </span><span class="koboSpan" id="kobo.46.2">This class has several overloaded </span><strong class="source-inline"><span class="koboSpan" id="kobo.47.1">add()</span></strong><span class="koboSpan" id="kobo.48.1"> methods that can be used to add properties and their corresponding values to the generated </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">JSON data.</span></span></p>
<p><span class="koboSpan" id="kobo.50.1">The following code sample illustrates how to generate JSON data using the </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">Model API:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.52.1">
package com.ensode.jakartaeebook.jsonpobject;
//imports omitted for brevity
@Path("jsonpmodel")
public class JsonPModelResource {
  private static final Logger LOG =
    Logger.getLogger(JsonPModelResource.class.getName());
  @Path("build")
  @GET
  @Produces(MediaType.APPLICATION_JSON)
  public String jsonpModelBuildJson() {
    </span><strong class="bold"><span class="koboSpan" id="kobo.53.1">JsonObject jsonObject = Json.createObjectBuilder().</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.54.1">      add("firstName", "Scott").</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.55.1">      add("lastName", "Gosling").</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.56.1">      add("email", "sgosling@example.com").</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.57.1">      build();</span></strong><span class="koboSpan" id="kobo.58.1">
    StringWriter stringWriter = new StringWriter();
    try (JsonWriter jsonWriter = Json.createWriter(
      stringWriter)) {
      jsonWriter.writeObject(jsonObject);
    }
    return stringWriter.toString();
  }
}</span></pre> <p><span class="koboSpan" id="kobo.59.1">As can </span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.60.1">be seen in the example, we generate an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">JsonObject</span></strong><span class="koboSpan" id="kobo.62.1"> by invoking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">add()</span></strong><span class="koboSpan" id="kobo.64.1"> method on an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.65.1">JsonObjectBuilder</span></strong><span class="koboSpan" id="kobo.66.1">. </span><span class="koboSpan" id="kobo.66.2">In our example, we see how we can add </span><strong class="source-inline"><span class="koboSpan" id="kobo.67.1">String</span></strong><span class="koboSpan" id="kobo.68.1"> values to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.69.1">JsonObject</span></strong><span class="koboSpan" id="kobo.70.1"> by invoking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.71.1">add()</span></strong><span class="koboSpan" id="kobo.72.1"> method on </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">JsonObjectBuilder</span></strong><span class="koboSpan" id="kobo.74.1">. </span><span class="koboSpan" id="kobo.74.2">The first parameter of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.75.1">add()</span></strong><span class="koboSpan" id="kobo.76.1"> method is the property name of the generated JSON object, and the second parameter corresponds to the value of the said property. </span><span class="koboSpan" id="kobo.76.2">The return value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.77.1">add()</span></strong><span class="koboSpan" id="kobo.78.1"> method is another instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.79.1">JsonObjectBuilder</span></strong><span class="koboSpan" id="kobo.80.1">; therefore, invocations to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.81.1">add()</span></strong><span class="koboSpan" id="kobo.82.1"> method can be chained as shown in </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">the example.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.84.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.85.1">The preceding example is a RESTful web service corresponding to a larger Jakarta RESTful Web Services application. </span><span class="koboSpan" id="kobo.85.2">Other parts of the application are not shown since they are not relevant to the discussion. </span><span class="koboSpan" id="kobo.85.3">The complete sample application can be obtained from this book’s GitHub repository </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">at </span></span><a href="https://github.com/PacktPublishing/Jakarta-EE-Application-Development"><span class="No-Break"><span class="koboSpan" id="kobo.87.1">https://github.com/PacktPublishing/Jakarta-EE-Application-Development</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.88.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.89.1">Once we have added all the desired properties, we need to invoke the </span><strong class="source-inline"><span class="koboSpan" id="kobo.90.1">build()</span></strong><span class="koboSpan" id="kobo.91.1"> method of </span><strong class="source-inline"><span class="koboSpan" id="kobo.92.1">JsonObjectBuilder</span></strong><span class="koboSpan" id="kobo.93.1">, which returns an instance of a class implementing the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.94.1">JsonObject</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.95.1"> interface.</span></span></p>
<p><span class="koboSpan" id="kobo.96.1">In many cases, we will want to generate a </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1">String</span></strong><span class="koboSpan" id="kobo.98.1"> representation of the JSON object we created, so that it can be processed by another process or service. </span><span class="koboSpan" id="kobo.98.2">We can do this by creating</span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.99.1"> an instance of a class implementing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">JsonWriter</span></strong><span class="koboSpan" id="kobo.101.1"> interface, by invoking the static </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">createWriter()</span></strong><span class="koboSpan" id="kobo.103.1"> method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">Json</span></strong><span class="koboSpan" id="kobo.105.1"> class, passing an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.106.1">StringWriter</span></strong><span class="koboSpan" id="kobo.107.1"> as its sole parameter. </span><span class="koboSpan" id="kobo.107.2">Once we have an instance of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.108.1">JsonWriter</span></strong><span class="koboSpan" id="kobo.109.1"> implementation, we need to invoke its </span><strong class="source-inline"><span class="koboSpan" id="kobo.110.1">writeObject()</span></strong><span class="koboSpan" id="kobo.111.1"> method, passing our </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">JsonObject</span></strong><span class="koboSpan" id="kobo.113.1"> instance as its </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">sole parameter.</span></span></p>
<p><span class="koboSpan" id="kobo.115.1">At this point, our </span><strong class="source-inline"><span class="koboSpan" id="kobo.116.1">StringWriter</span></strong><span class="koboSpan" id="kobo.117.1"> instance will have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.118.1">String</span></strong><span class="koboSpan" id="kobo.119.1"> representation of our JSON object as its value, so invoking its </span><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">toString()</span></strong><span class="koboSpan" id="kobo.121.1"> method will return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">String</span></strong><span class="koboSpan" id="kobo.123.1"> containing our </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">JSON object.</span></span></p>
<p><span class="koboSpan" id="kobo.125.1">Our specific example will generate a JSON string that looks </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.127.1">
{"firstName":"Scott","lastName":"Gosling","email":"sgosling@example.com"}</span></pre> <p><span class="koboSpan" id="kobo.128.1">Although in our example we added only </span><strong class="source-inline"><span class="koboSpan" id="kobo.129.1">String</span></strong><span class="koboSpan" id="kobo.130.1"> objects to our JSON object, we are not limited to this type of value; </span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">JsonObjectBuilder</span></strong><span class="koboSpan" id="kobo.132.1"> has several overloaded versions of its </span><strong class="source-inline"><span class="koboSpan" id="kobo.133.1">add()</span></strong><span class="koboSpan" id="kobo.134.1"> method, allowing us to add several different types of values to our </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">JSON objects.</span></span></p>
<p><span class="koboSpan" id="kobo.136.1">The following table summarizes all of the available versions of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.137.1">add()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.138.1"> method:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-3">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.139.1">JsonObjectBuilder.add() method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.140.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.141.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.142.1">BigDecimal value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.143.1">Adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">BigDecimal</span></strong><span class="koboSpan" id="kobo.145.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">JSON object.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.147.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">BigInteger value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.149.1">Adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">BigInteger</span></strong><span class="koboSpan" id="kobo.151.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">JSON object.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.153.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.154.1">JsonArrayBuilder value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.155.1">Adds an array to our JSON object. </span><span class="koboSpan" id="kobo.155.2">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">JsonArrayBuilder</span></strong><span class="koboSpan" id="kobo.157.1"> implementation allows us to create </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">JSON arrays.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">JsonObjectBuilder value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.161.1">Adds another JSON object to our original JSON object (property values for JSON objects can be other JSON objects). </span><span class="koboSpan" id="kobo.161.2">The added </span><strong class="source-inline"><span class="koboSpan" id="kobo.162.1">JsonObject</span></strong><span class="koboSpan" id="kobo.163.1"> implementation is built from the provided </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.164.1">JsonObjectBuilder</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.165.1"> parameter.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">JsonValue value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.168.1">Adds another JSON object to our original JSON object (property values for JSON objects can be other </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">JSON objects).</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">String value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.172.1">Adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.173.1">String</span></strong><span class="koboSpan" id="kobo.174.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">JSON object.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.176.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">boolean value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.178.1">Adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">boolean</span></strong><span class="koboSpan" id="kobo.180.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">JSON object.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.182.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">double value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.184.1">Adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">double</span></strong><span class="koboSpan" id="kobo.186.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">JSON object.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">int value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.190.1">Adds an </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">int</span></strong><span class="koboSpan" id="kobo.192.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">JSON object.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.194.1">add(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">long value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.196.1">Adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">long</span></strong><span class="koboSpan" id="kobo.198.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">JSON object.</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.200.1">Table 4.1 – JsonObjectBuilder add() methods</span></p>
<p><span class="koboSpan" id="kobo.201.1">In all cases, the</span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.202.1"> first parameter of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">add()</span></strong><span class="koboSpan" id="kobo.204.1"> method corresponds to the name of the property in our JSON object, and the second parameter corresponds to the value of </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">the property.</span></span></p>
<h3><span class="koboSpan" id="kobo.206.1">Parsing JSON data with the Model API</span></h3>
<p><span class="koboSpan" id="kobo.207.1">In the last </span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.208.1">section, we saw how to generate JSON data from our Java code with the object model API. </span><span class="koboSpan" id="kobo.208.2">In this section, we will see how we can read and parse existing JSON data. </span><span class="koboSpan" id="kobo.208.3">The following code sample illustrates </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.209.1">how to </span><span class="No-Break"><span class="koboSpan" id="kobo.210.1">do this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.211.1">
package com.ensode.jakartaeebook.jsonpobject;
//imports omitted for brevity
@Path("jsonpmodel")
public class JsonPModelResource {
  @Path("parse")
  @POST
  @Produces(MediaType.TEXT_PLAIN)
  @Consumes(MediaType.APPLICATION_JSON)
  public String jsonpModelParseJson(String jsonStr) {
    LOG.log(Level.INFO, String.format(
      "received the following JSON string: %s", jsonStr));
    Customer customer = new Customer();
    JsonObject jsonObject;
    </span><strong class="bold"><span class="koboSpan" id="kobo.212.1">try (JsonReader jsonReader = Json.createReader(new</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.213.1">    StringReader(jsonStr))) {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.214.1">      jsonObject = jsonReader.readObject();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.215.1">    }</span></strong><span class="koboSpan" id="kobo.216.1">
    customer.setFirstName(
      jsonObject.getString("firstName"));
    customer.setLastName(jsonObject.getString("lastName"));
    customer.setEmail(jsonObject.getString("email"));
    return customer.toString();
  }
}</span></pre> <p><span class="koboSpan" id="kobo.217.1">To parse an existing JSON string, we need to create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.218.1">StringReader</span></strong><span class="koboSpan" id="kobo.219.1"> object, passing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.220.1">String</span></strong><span class="koboSpan" id="kobo.221.1"> object containing the JSON to be parsed as a parameter. </span><span class="koboSpan" id="kobo.221.2">We then pass the resulting </span><strong class="source-inline"><span class="koboSpan" id="kobo.222.1">StringReader</span></strong><span class="koboSpan" id="kobo.223.1"> instance to the static </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">createReader()</span></strong><span class="koboSpan" id="kobo.225.1"> method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">Json</span></strong><span class="koboSpan" id="kobo.227.1"> class. </span><span class="koboSpan" id="kobo.227.2">This method invocation will return an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">JsonReader</span></strong><span class="koboSpan" id="kobo.229.1">. </span><span class="koboSpan" id="kobo.229.2">We can then obtain an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">JsonObject</span></strong><span class="koboSpan" id="kobo.231.1"> by invoking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">readObject()</span></strong><span class="koboSpan" id="kobo.233.1"> method </span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">on it.</span></span></p>
<p><span class="koboSpan" id="kobo.235.1">In this</span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.236.1"> example, we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">getString()</span></strong><span class="koboSpan" id="kobo.238.1"> method to obtain the values for all properties in our JSON object. </span><span class="koboSpan" id="kobo.238.2">The first and only argument for this method is the name of the property we wish to retrieve; unsurprisingly, the return value is the value of </span><span class="No-Break"><span class="koboSpan" id="kobo.239.1">the property.</span></span></p>
<p><span class="koboSpan" id="kobo.240.1">In addition to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">getString()</span></strong><span class="koboSpan" id="kobo.242.1"> method, there are several other similar methods to obtain values of other types. </span><span class="koboSpan" id="kobo.242.2">The following table summarizes </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">these methods:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">JsonObject method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.245.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">get(Object key)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.247.1">Retrieves an instance of a class implementing the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">JsonValue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.249.1"> interface</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">getBoolean(String name)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.251.1">Retrieves a </span><strong class="source-inline"><span class="koboSpan" id="kobo.252.1">boolean</span></strong><span class="koboSpan" id="kobo.253.1"> value corresponding to the </span><span class="No-Break"><span class="koboSpan" id="kobo.254.1">given key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.255.1">getInt(String name)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.256.1">Retrieves an </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">int</span></strong><span class="koboSpan" id="kobo.258.1"> value corresponding to the </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">given key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">getJsonArray(String name)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.261.1">Retrieves the instance of a class implementing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">JsonArray</span></strong><span class="koboSpan" id="kobo.263.1"> interface corresponding to the </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">given key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">getJsonNumber(String name)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.266.1">Retrieves the instance of a class implementing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">JsonNumber</span></strong><span class="koboSpan" id="kobo.268.1"> interface corresponding to the </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">given key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.270.1">getJsonObject(String name)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.271.1">Retrieves the instance of a class implementing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">JsonObject</span></strong><span class="koboSpan" id="kobo.273.1"> interface corresponding to the </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">given key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">getJsonString(String name)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.276.1">Retrieves the instance of a class implementing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">JsonString</span></strong><span class="koboSpan" id="kobo.278.1"> interface corresponding to the </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">given key</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.280.1">getString(String Name)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.281.1">Retrieves a </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">String</span></strong><span class="koboSpan" id="kobo.283.1"> corresponding to the </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">given key</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.285.1">Table 4.2 – JsonObject methods to retrieve values from JSON data</span></p>
<p><span class="koboSpan" id="kobo.286.1">In all cases, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.287.1">String</span></strong><span class="koboSpan" id="kobo.288.1"> parameter of the method corresponds to the key name, and the return value is the JSON property value we wish </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">to retrieve.</span></span></p>
<h2 id="_idParaDest-55"><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.290.1">The JSON Processing Streaming API</span></h2>
<p><span class="koboSpan" id="kobo.291.1">The </span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.292.1">JSON Processing Streaming API allows sequential reading of a JSON object from a stream (a subclass of </span><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">java.io.OutputStream</span></strong><span class="koboSpan" id="kobo.294.1"> or a subclass of </span><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">java.io.Writer</span></strong><span class="koboSpan" id="kobo.296.1">). </span><span class="koboSpan" id="kobo.296.2">It is faster and more memory efficient than the Model API; however, the trade-off is that it is less straightforward to access specific JSON properties directly when compared to the Model API. </span><span class="koboSpan" id="kobo.296.3">When using the Streaming API, we need to use JSON Pointer and JSON Patch to retrieve or modify specific values from </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">JSON data.</span></span></p>
<h3><span class="koboSpan" id="kobo.298.1">Generating JSON data with the streaming API</span></h3>
<p><span class="koboSpan" id="kobo.299.1">The </span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.300.1">JSON Streaming API has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">JsonGenerator</span></strong><span class="koboSpan" id="kobo.302.1"> class we can use to generate JSON data and write it to a stream. </span><span class="koboSpan" id="kobo.302.2">This class has several overloaded </span><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">write()</span></strong><span class="koboSpan" id="kobo.304.1"> methods that can be used to add properties and their corresponding values to the generated </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">JSON data.</span></span></p>
<p><span class="koboSpan" id="kobo.306.1">The following code sample illustrates how to generate JSON data using the </span><span class="No-Break"><span class="koboSpan" id="kobo.307.1">Streaming API:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.308.1">
package com.ensode.jakartaeebook.jsonpstreaming;
//imports omitted for brevity
@Path("jsonpstreaming")
public class JsonPStreamingResource {
  @Path("build")
  @GET
  @Produces(MediaType.APPLICATION_JSON)
  public String buildJson() {
    StringWriter stringWriter = new StringWriter();
    try (</span><strong class="bold"><span class="koboSpan" id="kobo.309.1">JsonGenerator jsonGenerator =</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.310.1">      Json.createGenerator(stringWriter)) {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.311.1">      jsonGenerator.writeStartObject().</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.312.1">        write("firstName", "Larry").</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.313.1">        write("lastName", "Gates").</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.314.1">        write("email", "lgates@example.com").</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.315.1">        writeEnd();</span></strong><span class="koboSpan" id="kobo.316.1">
    }
    return stringWriter.toString();
  }
}</span></pre> <p><span class="koboSpan" id="kobo.317.1">We </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.318.1">create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">JsonGenerator</span></strong><span class="koboSpan" id="kobo.320.1"> by invoking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">createGenerator()</span></strong><span class="koboSpan" id="kobo.322.1"> static method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">Json</span></strong><span class="koboSpan" id="kobo.324.1"> class. </span><span class="koboSpan" id="kobo.324.2">The JSON Processing API provides two overloaded versions of this method; one takes an instance of a class that extends </span><strong class="source-inline"><span class="koboSpan" id="kobo.325.1">java.io.Writer</span></strong><span class="koboSpan" id="kobo.326.1"> (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1">StringWriter</span></strong><span class="koboSpan" id="kobo.328.1">, which we used in our example), and the other one takes an instance of a class that </span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">extends </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">java.io.OutputStream</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.332.1">Before we can start adding properties to the generated JSON stream, we need to invoke the </span><strong class="source-inline"><span class="koboSpan" id="kobo.333.1">writeStartObject()</span></strong><span class="koboSpan" id="kobo.334.1"> method on </span><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">JsonGenerator</span></strong><span class="koboSpan" id="kobo.336.1">. </span><span class="koboSpan" id="kobo.336.2">This method writes the JSON start object character (represented by an opening curly brace ( { ) in JSON strings) and </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.337.1">returns another instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">JsonGenerator</span></strong><span class="koboSpan" id="kobo.339.1">, allowing us to chain </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">write()</span></strong><span class="koboSpan" id="kobo.341.1"> invocations to add properties to our </span><span class="No-Break"><span class="koboSpan" id="kobo.342.1">JSON stream.</span></span></p>
<p><span class="koboSpan" id="kobo.343.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">write()</span></strong><span class="koboSpan" id="kobo.345.1"> method on </span><strong class="source-inline"><span class="koboSpan" id="kobo.346.1">JsonGenerator</span></strong><span class="koboSpan" id="kobo.347.1"> allows us to add properties to the JSON stream we are generating; its first parameter is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">String</span></strong><span class="koboSpan" id="kobo.349.1"> corresponding to the name of the property we are adding, and the second parameter is the value of </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">the property.</span></span></p>
<p><span class="koboSpan" id="kobo.351.1">In our example, we are adding only </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">String</span></strong><span class="koboSpan" id="kobo.353.1"> values to the JSON stream we are creating. </span><span class="koboSpan" id="kobo.353.2">However, we are not limited to strings; the Streaming API provides several overloaded </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">write()</span></strong><span class="koboSpan" id="kobo.355.1"> methods that allow us to add several different types of data to our JSON stream. </span><span class="koboSpan" id="kobo.355.2">The following table summarizes all of the available versions of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">write()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.357.1"> method:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table003">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.358.1">JsonGenerator.write() method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.359.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><a id="_idTextAnchor056"/><span class="koboSpan" id="kobo.360.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">BigDecimal value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.362.1">Writes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">BigDecimal</span></strong><span class="koboSpan" id="kobo.364.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">JSON stream</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">BigInteger value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.368.1">Writes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.369.1">BigInteger</span></strong><span class="koboSpan" id="kobo.370.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">JSON stream</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.372.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">JsonValue value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.374.1">Writes a JSON object to our JSON stream (property values for JSON streams can be other </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">JSON objects)</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">String value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.378.1">Writes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">String</span></strong><span class="koboSpan" id="kobo.380.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">JSON stream</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">boolean value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.384.1">Writes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">boolean</span></strong><span class="koboSpan" id="kobo.386.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">JSON stream</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.389.1">double value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.390.1">Writes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.391.1">double</span></strong><span class="koboSpan" id="kobo.392.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">JSON stream</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.395.1">int value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.396.1">Writes an </span><strong class="source-inline"><span class="koboSpan" id="kobo.397.1">int</span></strong><span class="koboSpan" id="kobo.398.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">JSON stream</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">write(String name, </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">long value)</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.402.1">Writes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">long</span></strong><span class="koboSpan" id="kobo.404.1"> value to our </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">JSON stream</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.406.1">Table 4.3 – JsonGenerator write() method</span></p>
<p><span class="koboSpan" id="kobo.407.1">In all cases, the </span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.408.1">first parameter of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.409.1">write()</span></strong><span class="koboSpan" id="kobo.410.1"> method</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.411.1"> corresponds to the name of the property we are adding to our JSON stream, and the second parameter corresponds to the value of </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">the property.</span></span></p>
<p><span class="koboSpan" id="kobo.413.1">Once we are done adding properties to our JSON stream, we need to invoke the </span><strong class="source-inline"><span class="koboSpan" id="kobo.414.1">writeEnd()</span></strong><span class="koboSpan" id="kobo.415.1"> method on </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">JsonGenerator</span></strong><span class="koboSpan" id="kobo.417.1">; this method adds the JSON end object character (represented by a closing curly brace ( } ) in </span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">JSON strings).</span></span></p>
<p><span class="koboSpan" id="kobo.419.1">At this point, our stream or reader is populated with the JSON data we generated. </span><span class="koboSpan" id="kobo.419.2">What we do with it depends on our application logic. </span><span class="koboSpan" id="kobo.419.3">In our example, we simply invoked the </span><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">toString()</span></strong><span class="koboSpan" id="kobo.421.1"> method of our </span><strong class="source-inline"><span class="koboSpan" id="kobo.422.1">StringReader</span></strong><span class="koboSpan" id="kobo.423.1"> to obtain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">String</span></strong><span class="koboSpan" id="kobo.425.1"> representation of the JSON data </span><span class="No-Break"><span class="koboSpan" id="kobo.426.1">we created.</span></span></p>
<h3><span class="koboSpan" id="kobo.427.1">Parsing JSON data with the streaming API</span></h3>
<p><span class="koboSpan" id="kobo.428.1">In this </span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.429.1">section, we will cover how to parse JSON data we receive from </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">a stream.</span></span></p>
<p><span class="koboSpan" id="kobo.431.1">The following example illustrates how we can populate Java objects from JSON data using the </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">streaming API.</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.433.1">
package com.ensode.jakartaeebook.jsonpstreaming;
//imports omitted for brevity
@Path("jsonpstreaming")
public class JsonPStreamingResource {
  @Path("parse")
  @POST
  @Produces(MediaType.TEXT_PLAIN)
  @Consumes(MediaType.APPLICATION_JSON)
  public String parseJson(String jsonStr) {
    Customer customer = new Customer();
    StringReader stringReader = new StringReader(jsonStr);
    JsonParser jsonParser = Json.createParser(stringReader);
    Map&lt;String, String&gt; keyValueMap = new HashMap&lt;&gt;();
    String key = null;
    String value = null;
    </span><strong class="bold"><span class="koboSpan" id="kobo.434.1">while (jsonParser.hasNext()) {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.435.1">      JsonParser.Event event = jsonParser.next();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.436.1">      if (event.equals(Event.KEY_NAME)) {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.437.1">        key = jsonParser.getString();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.438.1">      } else if (event.equals(Event.VALUE_STRING)) {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.439.1">        value = jsonParser.getString();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.440.1">      }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.441.1">      keyValueMap.put(key, value);</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.442.1">    }</span></strong><span class="koboSpan" id="kobo.443.1">
 </span><strong class="bold"><span class="koboSpan" id="kobo.444.1">  </span></strong><span class="koboSpan" id="kobo.445.1"> </span><strong class="bold"><span class="koboSpan" id="kobo.446.1">customer.setFirstName(keyValueMap.get("firstName"));</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.447.1">    customer.setLastName(keyValueMap.get("lastName"));</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.448.1">    customer.setEmail(keyValueMap.get("email"));</span></strong><span class="koboSpan" id="kobo.449.1">
    return customer.toString();
  }
}</span></pre> <p><span class="koboSpan" id="kobo.450.1">The</span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.451.1"> first thing we need to do to read JSON data using the Streaming API is to create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.452.1">JsonParser</span></strong><span class="koboSpan" id="kobo.453.1"> by invoking the static </span><strong class="source-inline"><span class="koboSpan" id="kobo.454.1">createJsonParser()</span></strong><span class="koboSpan" id="kobo.455.1"> method on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.456.1">Json</span></strong><span class="koboSpan" id="kobo.457.1"> class. </span><span class="koboSpan" id="kobo.457.2">There are two overloaded versions of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.458.1">createJsonParser()</span></strong><span class="koboSpan" id="kobo.459.1"> method: one takes an instance of a class that extends </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">java.io.InputStream</span></strong><span class="koboSpan" id="kobo.461.1">, and the other one takes an instance of a class that extends </span><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">java.io.Reader</span></strong><span class="koboSpan" id="kobo.463.1">. </span><span class="koboSpan" id="kobo.463.2">In our example, we use the latter, passing an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">java.io.StringReader</span></strong><span class="koboSpan" id="kobo.465.1">, which is a subclass </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">java.io.Reader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.469.1">The next step is to loop through the JSON data to obtain the data to be parsed. </span><span class="koboSpan" id="kobo.469.2">We can achieve this by invoking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">hasNext()</span></strong><span class="koboSpan" id="kobo.471.1"> method on </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">JsonParser</span></strong><span class="koboSpan" id="kobo.473.1">, which returns true if there is more data to be read, and </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">false otherwise.</span></span></p>
<p><span class="koboSpan" id="kobo.475.1">We then need to read the next piece of data in our stream, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">JsonParser.next()</span></strong><span class="koboSpan" id="kobo.477.1"> method returns an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">JsonParser.Event</span></strong><span class="koboSpan" id="kobo.479.1"> that indicates the type of data that we just read. </span><span class="koboSpan" id="kobo.479.2">In our example, we check only for key names (i.e., </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">firstName</span></strong><span class="koboSpan" id="kobo.481.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">lastName</span></strong><span class="koboSpan" id="kobo.483.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">email</span></strong><span class="koboSpan" id="kobo.485.1">), and the corresponding string values. </span><span class="koboSpan" id="kobo.485.2">We check for the type of data we just read by comparing the event returned by </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">JsonParser.next()</span></strong><span class="koboSpan" id="kobo.487.1"> against several values defined </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">JsonParser.Event</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.490.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.491.1">The following table summarizes all of the possible events that can be returned </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">from </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">JsonParser.next()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table004">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.495.1">JsonParser Event</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.496.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">Event.START_OBJECT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.498.1">Indicates the start of a </span><span class="No-Break"><span class="koboSpan" id="kobo.499.1">JSON object</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">Event.END_OBJECT</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.501.1">Indicates the end of a </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">JSON object</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">Event.START_ARRAY</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.504.1">Indicates the start of </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">an array</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">Event.END_ARRAY</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.507.1">Indicates the end of </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">an array</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">Event.KEY_NAME</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.510.1">Indicates the name of a JSON property was read; we can obtain the key name by invoking </span><strong class="source-inline"><span class="koboSpan" id="kobo.511.1">getString()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.512.1">on </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.513.1">JsonParser</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="source-inline"><a id="_idTextAnchor057"/></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">Event.VALUE_TRUE</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.515.1">Indicates that a Boolean value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">true</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.517.1">was read</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">Event.VALUE_FALSE</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.519.1">Indicates that a Boolean value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">false</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.521.1">was read</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">Event.VALUE_NULL</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.523.1">Indicates that a null value </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">was read</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">Event.VALUE_NUMBER</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.526.1">Indicates that a numeric value </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">was read</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">Event.VALUE_STRING</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.529.1">Indicates that a string value </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">was read</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.531.1">Table 4.4 – JsonParser events</span></p>
<p><span class="koboSpan" id="kobo.532.1">As </span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.533.1">shown in the example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">String</span></strong><span class="koboSpan" id="kobo.535.1"> values</span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.536.1"> can be retrieved by invoking </span><strong class="source-inline"><span class="koboSpan" id="kobo.537.1">getString()</span></strong><span class="koboSpan" id="kobo.538.1"> on </span><strong class="source-inline"><span class="koboSpan" id="kobo.539.1">JsonParser</span></strong><span class="koboSpan" id="kobo.540.1">. </span><span class="koboSpan" id="kobo.540.2">Numeric values can be retrieved in several different formats. </span><span class="koboSpan" id="kobo.540.3">The following table summarizes the methods in </span><strong class="source-inline"><span class="koboSpan" id="kobo.541.1">JsonParser</span></strong><span class="koboSpan" id="kobo.542.1"> that can be used to retrieve </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">numeric values:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table005">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.544.1">JsonParser method</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.545.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.546.1">getInt()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.547.1">Retrieves the numeric value as </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">an </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">int</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.550.1">getLong()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.551.1">Retrieves the numeric value as </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">a </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">long</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.554.1">getBigDecimal()</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.555.1">Retrieves the numeric value as an instance </span><span class="No-Break"><span class="koboSpan" id="kobo.556.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.557.1">java.math.BigDecimal</span></strong></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.558.1">Table 4.5 – JsonParser methods used to retrieve numeric values</span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">JsonParser</span></strong><span class="koboSpan" id="kobo.560.1"> also provides</span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.561.1"> a convenient </span><strong class="source-inline"><span class="koboSpan" id="kobo.562.1">isIntegralNumber()</span></strong><span class="koboSpan" id="kobo.563.1"> method that returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.564.1">true</span></strong><span class="koboSpan" id="kobo.565.1"> if the</span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.566.1"> numeric value can be safely cast to an </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">int</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.568.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">long</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.570.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.571.1">What we do with the values we obtain from the stream depends on our application logic; in our example, we place them in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.572.1">Map</span></strong><span class="koboSpan" id="kobo.573.1"> and then use said </span><strong class="source-inline"><span class="koboSpan" id="kobo.574.1">Map</span></strong><span class="koboSpan" id="kobo.575.1"> to populate a </span><span class="No-Break"><span class="koboSpan" id="kobo.576.1">Java class.</span></span></p>
<h3><span class="koboSpan" id="kobo.577.1">Retrieving values from data with JSON Pointer</span></h3>
<p><span class="koboSpan" id="kobo.578.1">Jakarta JSON Processing </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.579.1">supports JSON Pointer, an </span><strong class="bold"><span class="koboSpan" id="kobo.580.1">Internet Engineering Task Force</span></strong><span class="koboSpan" id="kobo.581.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.582.1">IETF</span></strong><span class="koboSpan" id="kobo.583.1">) standard</span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.584.1"> that defines a string syntax for identifying a specific value within a JSON document, similar to what XPath provides for </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">XML documents.</span></span></p>
<p><span class="koboSpan" id="kobo.586.1">The syntax for JSON Pointer is straightforward. </span><span class="koboSpan" id="kobo.586.2">For example, let us suppose that we have the following </span><span class="No-Break"><span class="koboSpan" id="kobo.587.1">JSON document:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.588.1">
{
  "dateOfBirth": "1997-03-03",
  "firstName": "David",
  "lastName": "Heffelfinger",
  "middleName": "Raymond",
  "salutation": "Mr"
}</span></pre> <p><span class="koboSpan" id="kobo.589.1">If we would like to obtain the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.590.1">lastName</span></strong><span class="koboSpan" id="kobo.591.1"> property of the document, the JSON Pointer expression to use would </span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">be </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">"/lastName"</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.595.1">If our JSON document consisted of an array, then we would have to prefix the property with the index in the array; for example, say we want to obtain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">lastName</span></strong><span class="koboSpan" id="kobo.597.1"> property of the second element in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">JSON array:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.599.1">
[
  {
     "dateOfBirth": "1997-01-01",
     "firstName": "David",
     "lastName": "Delabassee",
     "salutation": "Mr"
   },
   {
      "dateOfBirth": "1997-03-03",
      "firstName": "David",
      "lastName": "Heffelfinger",
      "middleName": "Raymond",
      "salutation": "Mr"
   }
]</span></pre> <p><span class="koboSpan" id="kobo.600.1">The</span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.601.1"> JSON Pointer expression to do so would be </span><strong class="source-inline"><span class="koboSpan" id="kobo.602.1">"/1/lastName"</span></strong><span class="koboSpan" id="kobo.603.1">. </span><span class="koboSpan" id="kobo.603.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.604.1">"/1"</span></strong><span class="koboSpan" id="kobo.605.1"> at the beginning of the expression refers to the element index in the array. </span><span class="koboSpan" id="kobo.605.2">Just like in Java, JSON arrays are 0 indexed; therefore, in this example, we are obtaining the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.606.1">lastName</span></strong><span class="koboSpan" id="kobo.607.1"> property in the second element of the array. </span><span class="koboSpan" id="kobo.607.2">Let’s now look at an example of how we would use the JSON Pointer API to perform </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">this task:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.609.1">
package com.ensode.jakartaeebook.jsonpointer;
//imports omitted for brevity
@Path("jsonpointer")
public class JsonPointerDemoService {
  private String jsonString; //initialization omitted
  @GET
  @Produces(MediaType.TEXT_PLAIN)
  public String jsonPointerDemo() {
    </span><strong class="bold"><span class="koboSpan" id="kobo.610.1">JsonReader jsonReader = Json.createReader(</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.611.1">    new StringReader(jsonString));</span></strong><span class="koboSpan" id="kobo.612.1">
    </span><strong class="bold"><span class="koboSpan" id="kobo.613.1">JsonArray jsonArray = jsonReader.readArray();</span></strong><span class="koboSpan" id="kobo.614.1">
    </span><strong class="bold"><span class="koboSpan" id="kobo.615.1">JsonPointer jsonPointer = Json.createPointer("/1/lastName");</span></strong><span class="koboSpan" id="kobo.616.1">
    </span><strong class="bold"><span class="koboSpan" id="kobo.617.1">return jsonPointer.getValue(jsonArray).toString();</span></strong><span class="koboSpan" id="kobo.618.1">
  }
}</span></pre> <p><span class="koboSpan" id="kobo.619.1">The</span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.620.1"> preceding code sample is a RESTful web service written using Jakarta RESTful Web Services. </span><span class="koboSpan" id="kobo.620.2">In order to read property values from a JSON document, we first need to create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">jakarta.json.JsonReader</span></strong><span class="koboSpan" id="kobo.622.1"> by invoking the static </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">createReader()</span></strong><span class="koboSpan" id="kobo.624.1"> method on </span><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">jakarta.json.Json</span></strong><span class="koboSpan" id="kobo.626.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">createReader()</span></strong><span class="koboSpan" id="kobo.628.1">. </span><span class="koboSpan" id="kobo.628.2">This takes an instance of any class implementing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">java.io.Reader</span></strong><span class="koboSpan" id="kobo.630.1"> interface as an argument. </span><span class="koboSpan" id="kobo.630.2">In our example, we are creating a new instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">java.io.StringReader</span></strong><span class="koboSpan" id="kobo.632.1"> on the fly and passing our JSON string as a parameter to </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">its constructor.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.634.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.635.1">There is an overloaded version of </span><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">JSON.createReader()</span></strong><span class="koboSpan" id="kobo.637.1"> that takes an instance of any class </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">implementing </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.639.1">java.io.InputStream</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.641.1">In our example, our JSON document consists of an array of objects; therefore, we populate an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.642.1">jakarta.json.JsonArray</span></strong><span class="koboSpan" id="kobo.643.1"> by invoking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.644.1">readArray()</span></strong><span class="koboSpan" id="kobo.645.1"> method on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.646.1">JsonReader</span></strong><span class="koboSpan" id="kobo.647.1"> object we created. </span><span class="koboSpan" id="kobo.647.2">(If our JSON document had consisted of a single JSON object, we would have invoked </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">JsonReader.readObject()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.649.1"> instead.)</span></span></p>
<p><span class="koboSpan" id="kobo.650.1">Now that we have populated our </span><strong class="source-inline"><span class="koboSpan" id="kobo.651.1">JsonArray</span></strong><span class="koboSpan" id="kobo.652.1"> variable, we create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">jakarta.json.JsonPointer</span></strong><span class="koboSpan" id="kobo.654.1">, and initialize it with the JSON Pointer expression we want to use to obtain the value we are searching for. </span><span class="koboSpan" id="kobo.654.2">Recall we are looking for the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">lastName</span></strong><span class="koboSpan" id="kobo.656.1"> property in the second element of the array; therefore, the appropriate JSON Pointer expression </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.658.1">/1/lastName</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.660.1">Now </span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.661.1">that we have created an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">JsonPointer</span></strong><span class="koboSpan" id="kobo.663.1"> with the appropriate JSON Pointer expression, we simply invoke its </span><strong class="source-inline"><span class="koboSpan" id="kobo.664.1">getValue()</span></strong><span class="koboSpan" id="kobo.665.1"> method, passing our </span><strong class="source-inline"><span class="koboSpan" id="kobo.666.1">JsonArray</span></strong><span class="koboSpan" id="kobo.667.1"> object as a parameter; then, we invoke </span><strong class="source-inline"><span class="koboSpan" id="kobo.668.1">toString()</span></strong><span class="koboSpan" id="kobo.669.1"> on the result, and the return value of this invocation will be the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.670.1">lastName</span></strong><span class="koboSpan" id="kobo.671.1"> property on the JSON document </span><strong class="source-inline"><span class="koboSpan" id="kobo.672.1">"Heffelfinger</span></strong><span class="koboSpan" id="kobo.673.1">, in </span><span class="No-Break"><span class="koboSpan" id="kobo.674.1">our example).</span></span></p>
<h3><span class="koboSpan" id="kobo.675.1">Updating JSON data values with JSON Patch</span></h3>
<p><span class="koboSpan" id="kobo.676.1">Jakarta JSON</span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.677.1"> Processing includes support for JSON Patch, another IETF standard. </span><span class="koboSpan" id="kobo.677.2">This one provides a series of operations that can be applied to a JSON document. </span><span class="koboSpan" id="kobo.677.3">JSON Patch allows us to perform partial updates on a </span><span class="No-Break"><span class="koboSpan" id="kobo.678.1">JSON object.</span></span></p>
<p><span class="koboSpan" id="kobo.679.1">The following operations are supported by </span><span class="No-Break"><span class="koboSpan" id="kobo.680.1">JSON Patch:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table006">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.681.1">JSON </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.682.1">Patch Operation</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.683.1">Description</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.684.1">add</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.685.1">Adds an element to a </span><span class="No-Break"><span class="koboSpan" id="kobo.686.1">JSON document</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.687.1">remove</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.688.1">Removes an element from a </span><span class="No-Break"><span class="koboSpan" id="kobo.689.1">JSON document</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.690.1">replace</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.691.1">Replaces a value in a JSON document with a </span><span class="No-Break"><span class="koboSpan" id="kobo.692.1">new value</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.693.1">move</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.694.1">Moves a value in a JSON document from its current location in the document to a </span><span class="No-Break"><span class="koboSpan" id="kobo.695.1">new position</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.696.1">copy</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.697.1">Copies a value in a JSON document to a new location in </span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">the document</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.699.1">test</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.700.1">Verifies that the value in a specific location in a JSON document is equal to the </span><span class="No-Break"><span class="koboSpan" id="kobo.701.1">specified value</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.702.1">Table 4.6 – JSON Patch operations</span></p>
<p><span class="koboSpan" id="kobo.703.1">Jakarta JSON </span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.704.1">Processing </span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.705.1">supports all of the preceding JSON Patch operations, which rely on JSON Pointer expressions to locate source and target locations in </span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">JSON documents.</span></span></p>
<p><span class="koboSpan" id="kobo.707.1">The following example illustrates how we can use JSON Patch with Jakarta </span><span class="No-Break"><span class="koboSpan" id="kobo.708.1">JSON Processing:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.709.1">
package com.ensode.jakartaeebook.jsonpatch
//imports omitted for brevity
@Path("jsonpatch")
public class JsonPatchDemoService {
  private String jsonString; //initialization omitted
  @GET
  public Response jsonPatchDemo() {
    </span><strong class="bold"><span class="koboSpan" id="kobo.710.1">JsonReader jsonReader = Json.createReader(</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.711.1">      new StringReader(jsonString));</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.712.1">    JsonArray jsonArray = jsonReader.readArray();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.713.1">    JsonPatch jsonPatch = Json.createPatchBuilder()</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.714.1">      .replace("/1/dateOfBirth", "1977-01-01")</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.715.1">      .build();</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.716.1">    JsonArray modifiedJsonArray = jsonPatch.apply(</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.717.1">      </span></strong><strong class="bold"><span class="koboSpan" id="kobo.718.1">jsonArray);</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.719.1">    return Response.ok(modifiedJsonArray.toString(),</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.720.1">      MediaType.APPLICATION_JSON).build();</span></strong><span class="koboSpan" id="kobo.721.1">
  }
}</span></pre> <p><span class="koboSpan" id="kobo.722.1">In this</span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.723.1"> example, let’s assume we are dealing with the same JSON document we used in our previous example, an array of two individual JSON objects, each with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.724.1">dateOfBirth</span></strong><span class="koboSpan" id="kobo.725.1"> property (among </span><span class="No-Break"><span class="koboSpan" id="kobo.726.1">other properties).</span></span></p>
<p><span class="koboSpan" id="kobo.727.1">In our example, we create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">JsonArray</span></strong><span class="koboSpan" id="kobo.729.1"> as before and then modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.730.1">dateOfBirth</span></strong><span class="koboSpan" id="kobo.731.1"> of the second element in the array. </span><span class="koboSpan" id="kobo.731.2">In order to do this, we create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">jakarta.json.JsonPatchBuilder</span></strong><span class="koboSpan" id="kobo.733.1"> via the static </span><strong class="source-inline"><span class="koboSpan" id="kobo.734.1">createPatchBuilder()</span></strong><span class="koboSpan" id="kobo.735.1"> method in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.736.1">jakarta.json.Json</span></strong><span class="koboSpan" id="kobo.737.1"> class. </span><span class="koboSpan" id="kobo.737.2">In our example, we are replacing the value of one of the properties with a new value; we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.738.1">replace()</span></strong><span class="koboSpan" id="kobo.739.1"> method of our </span><strong class="source-inline"><span class="koboSpan" id="kobo.740.1">JsonPatch</span></strong><span class="koboSpan" id="kobo.741.1"> instance to accomplish this. </span><span class="koboSpan" id="kobo.741.2">The first argument in the method is a JSON Pointer expression indicating the location of the property we are going to modify, and the second argument is the new value for the property. </span><span class="koboSpan" id="kobo.741.3">As its name implies, </span><strong class="source-inline"><span class="koboSpan" id="kobo.742.1">JsonPatchBuilder</span></strong><span class="koboSpan" id="kobo.743.1"> follows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.744.1">Builder</span></strong><span class="koboSpan" id="kobo.745.1"> design pattern, meaning that most of its methods return another instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.746.1">JsonPatchBuilder</span></strong><span class="koboSpan" id="kobo.747.1">; this allows us to chain method calls on the resulting instances of </span><strong class="source-inline"><span class="koboSpan" id="kobo.748.1">JsonPatchBuilder</span></strong><span class="koboSpan" id="kobo.749.1"> (in our example, we are performing only one operation, but this doesn’t have to be the case). </span><span class="koboSpan" id="kobo.749.2">Once we are done specifying the operation(s) to perform on our JSON object, we create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.750.1">jakarta.json.JsonPatch</span></strong><span class="koboSpan" id="kobo.751.1"> by invoking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.752.1">build()</span></strong><span class="koboSpan" id="kobo.753.1"> method </span><span class="No-Break"><span class="koboSpan" id="kobo.754.1">on </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.755.1">JsonPatchBuilder</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.756.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.757.1">Once we have created the patch, we apply it to our JSON object (an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">JsonArray</span></strong><span class="koboSpan" id="kobo.759.1">, in our example) by invoking its </span><strong class="source-inline"><span class="koboSpan" id="kobo.760.1">patch()</span></strong><span class="koboSpan" id="kobo.761.1"> method and passing the JSON object as </span><span class="No-Break"><span class="koboSpan" id="kobo.762.1">a parameter.</span></span></p>
<p><span class="koboSpan" id="kobo.763.1">Our</span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.764.1"> example shows how to replace the value of a JSON property with another via JSON Patch support in Jakarta JSON-Processing. </span><span class="koboSpan" id="kobo.764.2">All standard JSON Patch operations are supported by Jakarta JSONProcessing. </span><span class="koboSpan" id="kobo.764.3">For details on how to use other JSON Patch operations with JSON Processing, consult the Jakarta EE API documentation </span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">at </span></span><a href="https://jakarta.ee/specifications/platform/10/apidocs/"><span class="No-Break"><span class="koboSpan" id="kobo.766.1">https://jakarta.ee/specifications/platform/10/apidocs/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.767.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.768.1">Now that we’ve seen how to directly manipulate JSON data with JSON Processing, we will focus our attention on how to bind JSON data with Jakarta JSON Binding, a higher-level API that allows us to do common tasks quickly </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">and easily.</span></span></p>
<h1 id="_idParaDest-56"><a id="_idTextAnchor058"/><span class="koboSpan" id="kobo.770.1">Jakarta JSON Binding</span></h1>
<p><span class="koboSpan" id="kobo.771.1">Jakarta JSON Binding </span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.772.1">is a high-level API that allows us to almost seamlessly populate Java objects from JSON data, as well as easily generate JSON-formatted data from </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">Java objects.</span></span></p>
<h2 id="_idParaDest-57"><a id="_idTextAnchor059"/><span class="koboSpan" id="kobo.774.1">Populating Java objects from JSON with JSON Binding</span></h2>
<p><span class="koboSpan" id="kobo.775.1">A </span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.776.1">common programming task is to populate Java objects from JSON strings. </span><span class="koboSpan" id="kobo.776.2">It is such a common task that several libraries were created to transparently populate Java objects from JSON, freeing application developers from having to manually code this functionality. </span><span class="koboSpan" id="kobo.776.3">Several non-standard</span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.777.1"> Java libraries that accomplish this task exist, such </span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.778.1">as Jackson (</span><a href="https://github.com/FasterXML/jackson"><span class="koboSpan" id="kobo.779.1">https://github.com/FasterXML/jackson</span></a><span class="koboSpan" id="kobo.780.1">), json-simple (</span><a href="https://code.google.com/archive/p/json-simple/"><span class="koboSpan" id="kobo.781.1">https://code.google.com/archive/p/json-simple/</span></a><span class="koboSpan" id="kobo.782.1">), or</span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.783.1"> Gson (</span><a href="https://github.com/google/gson"><span class="koboSpan" id="kobo.784.1">https://github.com/google/gson</span></a><span class="koboSpan" id="kobo.785.1">). </span><span class="koboSpan" id="kobo.785.2">Jakarta EE includes a standard API providing this functionality, namely JSON Binding. </span><span class="koboSpan" id="kobo.785.3">In this section, we will cover how to transparently populate a Java object from a </span><span class="No-Break"><span class="koboSpan" id="kobo.786.1">JSON string.</span></span></p>
<p><span class="koboSpan" id="kobo.787.1">The following example shows a RESTful web service written using Jakarta RESTful Web Services. </span><span class="koboSpan" id="kobo.787.2">The service responds to HTTP POST requests in its </span><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">addCustomer()</span></strong><span class="koboSpan" id="kobo.789.1"> method. </span><span class="koboSpan" id="kobo.789.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">addCustomer()</span></strong><span class="koboSpan" id="kobo.791.1"> method takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.792.1">String</span></strong><span class="koboSpan" id="kobo.793.1"> as a parameter; it is expected for this string to contain </span><span class="No-Break"><span class="koboSpan" id="kobo.794.1">valid JSON:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.795.1">
package com.ensode.jakartaeebook.jsonbjsontojava.service;
//imports omitted for brevity
@Path("/customercontroller")
public class CustomerControllerService {
  @POST
  @Consumes(MediaType.APPLICATION_JSON)
  public String addCustomer(String customerJson) {
    </span><strong class="bold"><span class="koboSpan" id="kobo.796.1">Jsonb jsonb = JsonbBuilder.create();</span></strong><span class="koboSpan" id="kobo.797.1">
    </span><strong class="bold"><span class="koboSpan" id="kobo.798.1">Customer customer = jsonb.fromJson(customerJson,</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.799.1">      Customer.class);</span></strong><span class="koboSpan" id="kobo.800.1">
    return customer.toString();
  }
}</span></pre> <p><span class="koboSpan" id="kobo.801.1">The </span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.802.1">JSON Binding implementation provided by our application server provides an instance of a class implementing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">JsonbBuilder</span></strong><span class="koboSpan" id="kobo.804.1"> interface; this class provides a static </span><strong class="source-inline"><span class="koboSpan" id="kobo.805.1">create() </span></strong><span class="koboSpan" id="kobo.806.1">method that we can use to obtain an instance </span><span class="No-Break"><span class="koboSpan" id="kobo.807.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.808.1">Jsonb</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.809.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.810.1">Once we have an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">Jsonb</span></strong><span class="koboSpan" id="kobo.812.1">, we can use it to parse a JSON string and automatically populate a Java object. </span><span class="koboSpan" id="kobo.812.2">This is done via its </span><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">fromJson()</span></strong><span class="koboSpan" id="kobo.814.1"> method. </span><span class="koboSpan" id="kobo.814.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.815.1">fromJson()</span></strong><span class="koboSpan" id="kobo.816.1"> method takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.817.1">String</span></strong><span class="koboSpan" id="kobo.818.1"> containing the JSON data we need to parse as its first parameter and the type of object we wish to populate as its second parameter. </span><span class="koboSpan" id="kobo.818.2">In our example, we are populating a simple </span><strong class="source-inline"><span class="koboSpan" id="kobo.819.1">Customer</span></strong><span class="koboSpan" id="kobo.820.1"> class containing fields such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">firstName</span></strong><span class="koboSpan" id="kobo.822.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.823.1">middleName</span></strong><span class="koboSpan" id="kobo.824.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.825.1">lastName</span></strong><span class="koboSpan" id="kobo.826.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">dateOfBirth</span></strong><span class="koboSpan" id="kobo.828.1">. </span><span class="koboSpan" id="kobo.828.2">Jakarta JSON Binding will look for JSON property names matching the property names in the Java object, and automatically populate the Java object with the corresponding JSON properties. </span><span class="koboSpan" id="kobo.828.3">It couldn’t get more simple </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">than that!</span></span></p>
<p><span class="koboSpan" id="kobo.830.1">Once we have populated our Java object, we can do whatever we need to do with it. </span><span class="koboSpan" id="kobo.830.2">In our example, we</span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.831.1"> simply return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.832.1">String</span></strong><span class="koboSpan" id="kobo.833.1"> representation of our </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1">Customer</span></strong><span class="koboSpan" id="kobo.835.1"> object to </span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">the client.</span></span></p>
<h2 id="_idParaDest-58"><a id="_idTextAnchor060"/><span class="koboSpan" id="kobo.837.1">Generating JSON data from Java objects with JSON Binding</span></h2>
<p><span class="koboSpan" id="kobo.838.1">In addition</span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.839.1"> to populating Java objects from JSON data, JSON Binding can also generate JSON strings from Java objects. </span><span class="koboSpan" id="kobo.839.2">The following example illustrates how to </span><span class="No-Break"><span class="koboSpan" id="kobo.840.1">do this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.841.1">
package com.ensode.jakartaeebook.jsonbjavatojson.service;
//imports omitted for brevity
@Path("/customercontroller")
public class CustomerControllerService {
  @GET
  public String getCustomerAsJson() {
    String jsonString;
    DateTimeFormatter dateTimeFormatter =
      DateTimeFormatter.ofPattern("d/MM/yyyy");
    Customer customer = new Customer("Mr", "David",
      "Raymond", "Heffelfinger",
      LocalDate.parse("03/03/1997", dateTimeFormatter));
    </span><strong class="bold"><span class="koboSpan" id="kobo.842.1">Jsonb jsonb = JsonbBuilder.create();</span></strong><span class="koboSpan" id="kobo.843.1">
    </span><strong class="bold"><span class="koboSpan" id="kobo.844.1">jsonString = jsonb.toJson(customer);</span></strong><span class="koboSpan" id="kobo.845.1">
    return jsonString;
  }
}</span></pre> <p><span class="koboSpan" id="kobo.846.1">In this example, we are generating JSON data from a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.847.1">Customer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.848.1"> object.</span></span></p>
<p><span class="koboSpan" id="kobo.849.1">Just</span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.850.1"> like before, we create an instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.851.1">jakarta.json.bind.Jsonb</span></strong><span class="koboSpan" id="kobo.852.1"> by invoking the static </span><strong class="source-inline"><span class="koboSpan" id="kobo.853.1">jakarta.json.bind.JsonbBuilder.create()</span></strong><span class="koboSpan" id="kobo.854.1"> method. </span><span class="koboSpan" id="kobo.854.2">Once we have our </span><strong class="source-inline"><span class="koboSpan" id="kobo.855.1">Jsonb</span></strong><span class="koboSpan" id="kobo.856.1"> instance, we simply invoke its </span><strong class="source-inline"><span class="koboSpan" id="kobo.857.1">toJson()</span></strong><span class="koboSpan" id="kobo.858.1"> method to convert the list of objects to its equivalent </span><span class="No-Break"><span class="koboSpan" id="kobo.859.1">JSON representation.</span></span></p>
<h1 id="_idParaDest-59"><a id="_idTextAnchor061"/><span class="koboSpan" id="kobo.860.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.861.1">In this chapter, we covered how to process JSON data using two Jakarta EE APIs, JSON Processing and </span><span class="No-Break"><span class="koboSpan" id="kobo.862.1">JSON Binding.</span></span></p>
<p><span class="koboSpan" id="kobo.863.1">We covered the </span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.865.1">We saw how we can generate and parse JSON data with JSON Processing’s </span><span class="No-Break"><span class="koboSpan" id="kobo.866.1">model API</span></span></li>
<li><span class="koboSpan" id="kobo.867.1">We also explored how to generate and parse JSON data with JSON Processing’s </span><span class="No-Break"><span class="koboSpan" id="kobo.868.1">streaming API</span></span></li>
<li><span class="koboSpan" id="kobo.869.1">Additionally, we covered how to extract values from JSON data with </span><span class="No-Break"><span class="koboSpan" id="kobo.870.1">JSON Pointer</span></span></li>
<li><span class="koboSpan" id="kobo.871.1">Also, we saw how to update specific values in JSON data with </span><span class="No-Break"><span class="koboSpan" id="kobo.872.1">JSON Patch</span></span></li>
<li><span class="koboSpan" id="kobo.873.1">Finally, we covered how to use Jakarta JSON Binding to easily populate Java objects from JSON data, as well as easily generate JSON data from </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">Java objects</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.875.1">JSON-formatted data has become a de facto standard when working with RESTful web services and microservices. </span><span class="koboSpan" id="kobo.875.2">Jakarta JSON Processing and JSON Binding APIs provide excellent support for working with JSON-formatted data, as illustrated in </span><span class="No-Break"><span class="koboSpan" id="kobo.876.1">this chapter.</span></span></p>
</div>
</body></html>