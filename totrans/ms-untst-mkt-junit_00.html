<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Preface"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="pref05" class="calibre1"/>Preface</h1></div></div></div><p class="calibre9">If you've been a software developer for a long time, you have certainly participated in software conferences or developer forums and experienced many interesting conversations. They start out well with one of the developers describing a cool development process that he/she follows, and then another developer strikes with a cutting-edge technology or tool or a mind-boggling enterprise integration pattern that he/she works with. Each speaker attempts to outdo the last speaker. Old timers speak about ancient machines that had to be programmed with punch cards or switches, where they had only few bytes of RAM, or they start describing COBOL as a dynamic language that follows the Model View Presenter pattern. Ask them three questions: "How do you unit test your program?", "Can you alleviate high blood pressure by monitoring your pressure more often?", and "Have you ever maintained your own code?"</p><p class="calibre9">I asked the first question to more than 200 developers. Believe me, 80 percent of developers replied, "We pay our testers or we have skilled testers." Five percent said, "Our customers test the software." Now the remaining 15 percent do unit testing and use print statements or write JUnit tests.</p><p class="calibre9">It is insane to keep doing things the same way and expect them to improve. Any program is only as good as it is useful; so, before applying complex tools, patterns, or APIs, we should verify whether our software functions or not. We should configure our development environment to provide us quick feedback of what is being developed. Automated JUnit tests help us verify our assumptions continuously. Side effects are detected quickly and this saves time.</p><p class="calibre9">As Martin Fowler states <span class="strong"><em class="calibre11">Any fool can write code that a computer can understand. Good programmers write code that humans can understand</em></span>.</p><p class="calibre9">We can write obfuscated code to impress our peers, but writing readable code is an art. Readability is a code quality.</p><p class="calibre9">Can you treat high blood pressure by monitoring your blood pressure more often? No, you need medication. Similarly, we should analyze our code to improve our code quality. Static code analysis tools suggest corrective actions, which means we should continuously monitor our code quality.</p><p class="calibre9">Always code as though the guy who ends up maintaining your code will be a violent psychopath who knows where you live. We work in brand new greenfield projects and also in existing brownfield projects. Greenfield projects always follow test-driven development to deliver maintainable and testable code.</p><p class="calibre9">Test-driven development is an evolutionary development approach. It offers test-first development where the production code is written only to satisfy a test. The simple idea of writing a test first reduces the extra effort of writing unit tests after coding. In test-driven development, test doubles and mock objects are extensively used to mock out external dependencies. Mockito is an open source mock unit testing framework for Java. It allows mock object creation, verification, and stubbing.</p><p class="calibre9">As Winston Churchill states <span class="strong"><em class="calibre11">We make a living by what we get, but we make a life by what we give</em></span>.</p><p class="calibre9">We inherit the legacy code from someone else—it may come from a very old existing project, from other teams who cannot maintain the code, or may be acquired from another company. However, it is our duty to improve the quality.</p><p class="calibre9">This book is an advanced-level guide that will help software developers to get complete expertise in unit testing in the JUnit framework using Mockito as the mocking framework. The focus of the book is to provide readers with comprehensive details on how effectively JUnit tests can be written. Build scripts can be customized to automate unit tests, code quality can be monitored using static code analysis tools and code quality dashboards, and tests can be written for the Web and database components. Legacy code can be refactored. Test-driven development and Mockito can be used for software development; JUnit best practices can be followed.</p><p class="calibre9">Armed with the knowledge of advanced JUnit concepts, test automation, build scripting tools, the mocking framework, code coverage tools, static code analysis tools, web tier unit testing, database tier unit testing, test-driven development, and refactoring legacy code, you will be pleasantly surprised as how quickly and easily you can write high-quality clean, readable, testable, maintainable, and extensible code. With these kinds of skills in your next software conference, you can impress the participants.</p><div class="book" title="What this book covers"><div class="book"><div class="book"><div class="book"><div class="calibre14" id="calibre_pb_1"/>
</div></div></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Preface">
<div class="book" title="What this book covers">
<div class="book">
<div class="book">
<div class="book">
<h1 class="title" id="calibre_pb_2"><a id="ch00lvl1sec02" class="calibre1"/>What this book covers</h1></div></div></div><p class="calibre9">
<a class="calibre1" title="Chapter 1. JUnit 4 – a Total Recall" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre11">JUnit 4 – a Total Recall</em></span>, covers the unit testing concept, the JUnit 4 framework, the Eclipse setup, and advance features of JUnit 4. It covers the JUnit 4 framework briefly to get you up and running. We will discuss the concept surrounding JUnit essentials, annotations, assertion, the @RunWith annotation, and exception handling so that you have an adequate background on how JUnit 4 works. Advanced readers can skip to the next section. JUnit 4++ explores the advanced topics of JUnit 4 and deep dives into the following topics: parameterized test, matchers and assertThat, assumption, theory, timeout, categories, rules, test suites, and test order.</p><p class="calibre9">
<a class="calibre1" title="Chapter 2. Automating JUnit Tests" href="part0018_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre11">Automating JUnit Tests</em></span>, focuses on getting the reader quickly started with the Extreme Programming (XP) concept, Continuous Integration (CI), benefits of CI, and JUnit test automation using various tools such as Gradle, Maven, Ant, and Jenkins. By the end of this chapter, the reader will be able to write build scripts using Gradle, Maven, and Ant and configure Jenkins to execute the build scripts.</p><p class="calibre9">
<a class="calibre1" title="Chapter 3. Test Doubles" href="part0021_split_000.html#page">Chapter 3</a>, <span class="strong"><em class="calibre11">Test Doubles</em></span>, illustrates the concept of test doubles and explains various test double types, such as mock, fake, dummy, stub, and spy.</p><p class="calibre9">
<a class="calibre1" title="Chapter 4. Progressive Mockito" href="part0027_split_000.html#page">Chapter 4</a>, <span class="strong"><em class="calibre11">Progressive Mockito</em></span>, distills the Mockito framework to its main core and provides technical examples. No previous knowledge of mocking is necessary. By the end of this chapter, the reader will be able to use advanced features of the Mockito framework; start behavior-driven development using Mockito; and write readable, maintainable, and clean JUnit tests using Mockito.</p><p class="calibre9">
<a class="calibre1" title="Chapter 5. Exploring Code Coverage" href="part0030_split_000.html#page">Chapter 5</a>, <span class="strong"><em class="calibre11">Exploring Code Coverage</em></span>, unfolds the code coverage concept, code coverage tools, and provides step-by-step guidance to generate coverage reports using various build scripts. The following topics are covered: code coverage; branch and line coverage; coverage tools—Clover, Cobertura, EclEmma, and JaCoCo; measuring coverage using Eclipse plugins; and using Ant, Maven, and Gradle to generate reports. By the end of this chapter, the reader will be able to configure Eclipse plugins and build scripts to measure code coverage.</p><p class="calibre9">
<a class="calibre1" title="Chapter 6. Revealing Code Quality" href="part0036_split_000.html#page">Chapter 6</a>, <span class="strong"><em class="calibre11">Revealing Code Quality</em></span>, explores the static code analysis and code quality improvement. By the end of this chapter, the reader will be able to configure the SONAR dashboard, set up Eclipse plugins, configure Sonar runner, and build scripts to analyze code quality using PMD, FindBugs, and Checkstyle.</p><p class="calibre9">
<a class="calibre1" title="Chapter 7. Unit Testing the Web Tier" href="part0043_split_000.html#page">Chapter 7</a>, <span class="strong"><em class="calibre11">Unit Testing the Web Tier</em></span>, deals with unit testing the web tier or presentation layer. It covers unit testing servlets, playing with Spring MVC, and working with the Model View Presenter pattern. By the end of this chapter, the reader will be able to unit test the web tier components and isolate the view components from the presentation logic.</p><p class="calibre9">
<a class="calibre1" title="Chapter 8. Playing with Data" href="part0046_split_000.html#page">Chapter 8</a>, <span class="strong"><em class="calibre11">Playing with Data</em></span>, covers the unit testing of the database layer. Topics such as separating concerns, unit testing the persistence logic, simplifying persistence with Spring, verifying the system integrity, and writing integration tests with Spring are explained. By the end of this chapter, the reader will be able to unit test the data access layer components in isolation from the database, write neat JDBC code using Spring, and write integration tests using the Spring API.</p><p class="calibre9">
<a class="calibre1" title="Chapter 9. Solving Test Puzzles" href="part0052_split_000.html#page">Chapter 9</a>, <span class="strong"><em class="calibre11">Solving Test Puzzles</em></span>, explains the importance of unit testing in greenfield and brownfield projects. Topics such as working with testing impediments, identifying constructor issues, realizing initialization issues, working with private methods, working with final methods, exploring static method issues, working with final classes, learning new concerns, exploring static variables and blocks, and test-driven development are covered. By the end of this chapter, the reader will be able to write unit tests for the legacy code; refactor the legacy code to improve the design of existing code; start writing simple, clean, and maintainable code following test-first and test-driven developments; and refactor code to improve code quality.</p><p class="calibre9">
<a class="calibre1" title="Chapter 10. Best Practices" href="part0056_split_000.html#page">Chapter 10</a>, <span class="strong"><em class="calibre11">Best Practices</em></span>, focuses on JUnit guidelines and best practices for writing clean, readable, and maintainable JUnit test cases. It covers working with assertions, handling exceptions, and working with test smells. By the end of this chapter, the reader will be able to write clean and maintainable test cases.</p></div></div>
<div class="book" title="What you need for this book"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec03" class="calibre1"/>What you need for this book</h1></div></div></div><p class="calibre9">You will need the following software to be installed before you run the examples:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Java 6 or higher: JDK 1.6 or higher can be downloaded from the following Oracle website:<p class="calibre15">
<a class="calibre1" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>
</p></li><li class="listitem">Eclipse editor: The latest version of Eclipse is Kepler (4.3). Kepler can be downloaded from the following website:<p class="calibre15">
<a class="calibre1" href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>
</p></li><li class="listitem">Mockito is required for creation, verification of mock objects, and stubbing. It can be downloaded from the following website:<p class="calibre15">
<a class="calibre1" href="https://code.google.com/p/mockito/downloads/list">https://code.google.com/p/mockito/downloads/list</a>
</p></li></ul></div></div>
<div class="book" title="Who this book is for"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec04" class="calibre1"/>Who this book is for</h1></div></div></div><p class="calibre9">This book is for advanced to novice level software testers or developers who use Mockito in the JUnit framework. Reasonable knowledge and understanding of unit testing elements and applications is required.</p><p class="calibre9">This book is ideal for developers who have some experience in Java application development as well as some basic knowledge of JUnit testing, but it covers the basic fundamentals of JUnit testing, test automation, static code analysis, legacy code refactoring, and test-driven development to get you acquainted with these concepts before using them.</p></div>
<div class="book" title="Conventions"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec05" class="calibre1"/>Conventions</h1></div></div></div><p class="calibre9">In this book, you will find a number of styles of text that distinguish between different kinds of information. Here are some examples of these styles, and an explanation of their meaning.</p><p class="calibre9">Code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "The <code class="literal">afterClass</code> and <code class="literal">beforeClass</code> methods are executed only once."</p><p class="calibre9">A block of code is set as follows:</p><div class="informalexample"><pre class="programlisting">  @Test
  public void currencyRoundsOff() throws Exception {
    assertNotNull(CurrencyFormatter.format(100.999));
    assertTrue(CurrencyFormatter.format(100.999).
      contains("$"));
    assertEquals("$101.00", CurrencyFormatter.format(100.999));
  }</pre></div><p class="calibre9">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p><div class="informalexample"><pre class="programlisting">public class LocaleTest {
  private Locale defaultLocale;
  @Before
  public void setUp() {
    <span class="strong"><strong class="calibre10">defaultLocale = Locale.getDefault();</strong></span>
    <span class="strong"><strong class="calibre10">Locale.setDefault(Locale.GERMANY);</strong></span>
  }
  @After
  public void restore() {
    <span class="strong"><strong class="calibre10">Locale.setDefault(defaultLocale);</strong></span>
  }
  @Test
  public void currencyRoundsOff() throws Exception {
    assertEquals("$101.00", 
      CurrencyFormatter.format(100.999));
  }
}</pre></div><p class="calibre9">Any command-line input or output is written as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre10">green(com.packtpub.junit.recap.rule.TestWatcherTest) success!</strong></span>
</pre></div><p class="calibre9">
<span class="strong"><strong class="calibre10">New terms</strong></span> and <span class="strong"><strong class="calibre10">important words</strong></span> are shown in bold. Words that you see on the screen, in menus or dialog boxes for example, appear in the text like this: "Click on <span class="strong"><strong class="calibre10">Java build path</strong></span> on the left-hand side and open the <span class="strong"><strong class="calibre10">Libraries</strong></span> tab."</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note01" class="calibre1"/>Note</h3><p class="calibre9">Warnings or important notes appear in a box like this.</p></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip01" class="calibre1"/>Tip</h3><p class="calibre9">Tips and tricks appear like this.</p></div></div>
<div class="book" title="Reader feedback"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec06" class="calibre1"/>Reader feedback</h1></div></div></div><p class="calibre9">Feedback from our readers is always welcome. Let us know what you think about this book—what you liked or may have disliked. Reader feedback is important for us to develop titles that you really get the most out of.</p><p class="calibre9">To send us general feedback, simply send an e-mail to <code class="literal">&lt;<a class="calibre1" href="mailto:feedback@packtpub.com">feedback@packtpub.com</a>&gt;</code>, and mention the book title via the subject of your message.</p><p class="calibre9">If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide on <a class="calibre1" href="http://www.packtpub.com/authors">www.packtpub.com/authors</a>.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Customer support"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch00lvl1sec07" class="calibre1"/>Customer support</h1></div></div></div><p class="calibre9">Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p></div>

<div class="book" title="Customer support">
<div class="book" title="Downloading the example code"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch00lvl2sec03" class="calibre1"/>Downloading the example code</h2></div></div></div><p class="calibre9">You can download the example code files for all Packt books you have purchased from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div>

<div class="book" title="Customer support">
<div class="book" title="Errata"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch00lvl2sec04" class="calibre1"/>Errata</h2></div></div></div><p class="calibre9">Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books—maybe a mistake in the text or the code—we would be grateful if you would report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a class="calibre1" href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <span class="strong"><strong class="calibre10">errata</strong></span> <span class="strong"><strong class="calibre10">submission</strong></span> <span class="strong"><strong class="calibre10">form</strong></span> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded on our website, or added to any list of existing errata, under the Errata section of that title. Any existing errata can be viewed by selecting your title from <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a>.</p></div></div>

<div class="book" title="Customer support">
<div class="book" title="Piracy"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch00lvl2sec05" class="calibre1"/>Piracy</h2></div></div></div><p class="calibre9">Piracy of copyright material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works, in any form, on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p class="calibre9">Please contact us at <code class="literal">&lt;<a class="calibre1" href="mailto:copyright@packtpub.com">copyright@packtpub.com</a>&gt;</code> with a link to the suspected pirated material.</p><p class="calibre9">We appreciate your help in protecting our authors, and our ability to bring you valuable content.</p></div></div>

<div class="book" title="Customer support">
<div class="book" title="Questions"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch00lvl2sec06" class="calibre1"/>Questions</h2></div></div></div><p class="calibre9">You can contact us at <code class="literal">&lt;<a class="calibre1" href="mailto:questions@packtpub.com">questions@packtpub.com</a>&gt;</code> if you are having a problem with any aspect of the book, and we will do our best to address it.</p></div></div></body></html>