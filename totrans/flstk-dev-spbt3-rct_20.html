<html><head></head><body>
  <div id="_idContainer354" class="Basic-Text-Frame">
    <h1 class="chapterNumber">17</h1>
    <h1 id="_idParaDest-213" class="chapterTitle">Deploying Your Application</h1>
    <p class="normal">This chapter will explain how to deploy your backend and frontend to a server. Successful deployment is a key part of the software development process, and it is important to learn how a modern deployment process works. There are a variety of cloud servers or <strong class="keyWord">PaaS</strong> (short for <strong class="keyWord">Platform-as-a-Service</strong>) providers available, such as <strong class="keyWord">Amazon Web Services </strong>(<strong class="keyWord">AWS</strong>), DigitalOcean, Microsoft Azure, Railway, and Heroku.</p>
    <p class="normal">In this book, we are using AWS and Netlify, which support multiple programming languages that are used in web development. We will also show you how to use Docker containers in deployments.</p>
    <p class="normal">In this chapter, we will cover the following topics:</p>
    <ul>
      <li class="bulletList">Deploying the backend with AWS</li>
      <li class="bulletList">Deploying the frontend with Netlify</li>
      <li class="bulletList">Using Docker containers</li>
    </ul>
    <h1 id="_idParaDest-214" class="heading-1">Technical requirements</h1>
    <p class="normal">The Spring Boot application that we created in <em class="chapterRef">Chapter 5</em>, <em class="italic">Securing Your Backend</em>, is required (<a href="https://github.com/PacktPublishing/Full-Stack-Development-with-Spring-Boot-3-and-React-Fourth-Edition/tree/main/Chapter05"><span class="url">https://github.com/PacktPublishing/Full-Stack-Development-with-Spring-Boot-3-and-React-Fourth-Edition/tree/main/Chapter05</span></a>), as is the React app that we used in <em class="chapterRef">Chapter 16</em>, <em class="italic">Securing Your Application</em> (<a href="https://github.com/PacktPublishing/Full-Stack-Development-with-Spring-Boot-3-and-React-Fourth-Edition/tree/main/Chapter16"><span class="url">https://github.com/PacktPublishing/Full-Stack-Development-with-Spring-Boot-3-and-React-Fourth-Edition/tree/main/Chapter16</span></a>).</p>
    <p class="normal">A Docker installation is necessary for the final section of the chapter.</p>
    <h1 id="_idParaDest-215" class="heading-1">Deploying the backend with AWS</h1>
    <p class="normal">If you <a id="_idIndexMarker839"/>are going to use your own server, the easiest way<a id="_idIndexMarker840"/> to deploy a Spring Boot application is to use an <a id="_idIndexMarker841"/>executable <strong class="keyWord">Java ARchive</strong> (<strong class="keyWord">JAR</strong>) file. With Gradle, an executable JAR file can be created using the Spring Boot Gradle wrapper. You can build your project using the following Gradle wrapper command in your project folder:</p>
    <pre class="programlisting con"><code class="hljs-con">./gradlew build
</code></pre>
    <p class="normal">Alternatively, you can run a Gradle task in Eclipse by right-clicking <strong class="screenText">Project</strong> in the Project Explorer, navigating to <strong class="screenText">Window | Show View | Other</strong>, and selecting <strong class="screenText">Gradle | Gradle Tasks</strong> from the list. This opens a list of Gradle tasks, and you can start the build process by double clicking the <strong class="screenText">build</strong> task, as illustrated in the following screenshot. If the Gradle tasks window is empty, click the root folder of the project in Eclipse:</p>
    <figure class="mediaobject"><img src="../Images/B19818_17_01.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.1: Gradle tasks</p>
    <p class="normal">This creates a new <code class="inlineCode">build/libs</code> folder to your project, where you will find JAR files. By default, two JAR files are created:</p>
    <ul>
      <li class="bulletList">The file with extension <code class="inlineCode">.plain.jar</code> contains Java bytecode and other resources, but it doesn’t contain any application framework or dependencies.</li>
      <li class="bulletList">The other <code class="inlineCode">.jar</code> file is a fully executable archive that you can run using the <code class="inlineCode">java -jar your_appfile.jar</code> Java command, as illustrated in the following screenshot:</li>
    </ul>
    <figure class="mediaobject"><img src="../Images/B19818_17_02.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.2: Running the executable JAR file</p>
    <p class="normal">Nowadays, cloud <a id="_idIndexMarker842"/>servers are the principal means of providing your application to end users. We are going to deploy our backend to <strong class="keyWord">Amazon Web Services </strong>(<strong class="keyWord">AWS</strong>) (<a href="https://aws.amazon.com/"><span class="url">https://aws.amazon.com/</span></a>). The AWS Free Tier offers users an <a id="_idIndexMarker843"/>opportunity to explore products for free.</p>
    <p class="normal">Create a <a id="_idIndexMarker844"/>Free Tier account and log in to AWS. You have to enter your contact information, including a functioning mobile phone number. AWS will send you an SMS confirmation message to verify your account. You must add a valid credit card, debit card, or another payment method for your accounts covered under the AWS Free Tier.</p>
    <div class="note">
      <p class="normal">You can read about the reasons why a payment method is needed at <a href="https://repost.aws/knowledge-center/free-tier-payment-method"><span class="url">https://repost.aws/knowledge-center/free-tier-payment-method</span></a>.</p>
    </div>
    <h2 id="_idParaDest-216" class="heading-2">Deploying our MariaDB database</h2>
    <p class="normal">In this first section, we <a id="_idIndexMarker845"/>will deploy our MariaDB database to AWS. <strong class="keyWord">Amazon Relational Database Service </strong>(<strong class="keyWord">RDS</strong>) can<a id="_idIndexMarker846"/> be used to set up and operate relational databases. Amazon RDS supports several popular databases, including MariaDB. The following steps will take you through the process that creates a database in RDS:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">After you have created a Free Tier account with AWS, log in to the AWS website. The AWS dashboard contains a search bar that you can use to find different services. Type <code class="inlineCode">RDS</code> into the search bar and find RDS, as illustrated in the following screenshot. Click on <strong class="screenText">RDS</strong> in the <strong class="screenText">Services</strong> list:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_03.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.3: RDS</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Click <a id="_idIndexMarker847"/>the <strong class="screenText">Create database</strong> button to begin the database creation process:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_04.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.4: Create database</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Select <strong class="screenText">MariaDB</strong> from the database engine options:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_05.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.5: Engine options</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Select <strong class="screenText">Free tier</strong> from the templates.</li>
      <li class="numberedList">Type a <a id="_idIndexMarker848"/>name for your database instance and the password for the database master user. You can use the default username (<em class="italic">admin</em>):</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_06.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.6: Database instance name</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Select <strong class="screenText">Yes</strong> under the <strong class="screenText">Public access</strong> section to allow public access to your database:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_07.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.7: Public access</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">In the <strong class="screenText">Additional configuration</strong> section at the bottom of the page, name your <a id="_idIndexMarker849"/>database <code class="inlineCode">cardb:</code>
    <figure class="mediaobject"><img src="../Images/B19818_17_08.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.8: Additional configuration</p>
    <div class="note">
      <p class="normal">Note! The database will not be created if the name is left empty.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Finally, click the <strong class="screenText">Create database</strong> button. RDS will start to create your database instance, which might take a few minutes.</li>
      <li class="numberedList">After your database is successfully created, you can press the <strong class="screenText">View connection details</strong> button to open a window that shows the connection details to your database. The <strong class="screenText">Endpoint</strong> is the address of your database. Copy the connection details for later use:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_09.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.9: Connection details</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="10">Now, we<a id="_idIndexMarker850"/> are ready to test our database. In this phase, we will use our local Spring Boot application. For this, we have to allow access to our database from outside. To change this, click on your database in the RDS database list. Then, click <strong class="screenText">VPC security groups</strong>, as shown in the next screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_10.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.10: Connectivity &amp; security</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="11">On the opening page, click the <strong class="screenText">Edit inbound rules</strong> button from the <strong class="screenText">Inbound rules</strong> tab. Click the <strong class="screenText">Add rule</strong> button to add a new rule. For the new rule, select the <strong class="screenText">MySQL/Aurora</strong> type and the <strong class="screenText">My IP</strong> destination under the <strong class="screenText">Source</strong> column. The <strong class="screenText">My IP</strong> destination automatically adds the current IP address of your local computer as an allowed destination:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_11.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.11: Inbound rules</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="12">After<a id="_idIndexMarker851"/> you have added a new rule, press the <strong class="screenText">Save rules</strong> button.</li>
      <li class="numberedList">Open the Spring Boot application that we created in <em class="chapterRef">Chapter 5</em>, <em class="italic">Securing Your Backend</em>. Change the <code class="inlineCode">url</code>, <code class="inlineCode">username</code>, and <code class="inlineCode">password</code> database settings in the <code class="inlineCode">application.properties</code> file to match your Amazon RDS database. The format of the <code class="inlineCode">spring.datasource.url</code> property value is <code class="inlineCode">jdbc:mariadb://your_rds_db_domain:3306/your_db_name</code>, as shown in the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_12.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.12: The application.properties file</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="14">Now, if you run your application, you can see from the console that database tables are created and demo data is inserted into our Amazon RDS database:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_13.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.13: Console</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="15">In this phase, you should build your Spring Boot application. Run a Gradle build task in Eclipse by right-clicking <strong class="screenText">Project</strong> in the Project Explorer, navigating to <strong class="screenText">Window | Show View | Other</strong>, and selecting <strong class="screenText">Gradle | Gradle Tasks</strong> from <a id="_idIndexMarker852"/>the list. This opens a list of Gradle tasks, and you can start the build process by double-clicking the <strong class="screenText">build</strong> task. It will create a new JAR file in the <code class="inlineCode">build/libs</code> folder.</li>
    </ol>
    <p class="normal">We now have proper database settings, and we can use our newly built application when we deploy our application to AWS.</p>
    <h2 id="_idParaDest-217" class="heading-2">Deploying our Spring Boot application</h2>
    <p class="normal">After we<a id="_idIndexMarker853"/> have deployed our database to Amazon RDS, we can start to deploy our Spring Boot application. The Amazon service that we are using<a id="_idIndexMarker854"/> is <strong class="keyWord">Elastic Beanstalk</strong>, which<strong class="keyWord"> </strong>can be used to run and manage web apps in AWS. There are other alternatives, such as AWS Amplify, that can be used as well. Elastic Beanstalk is available for the Free Tier, and it also supports a wide range of programming languages (for example, Java, Python, Node.js, and PHP).</p>
    <p class="normal">The following steps will take you through the process of deploying our Spring Boot application to Elastic Beanstalk:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">First, we have to create a new <strong class="keyWord">role</strong> for our application deployment. The role is needed to allow Elastic Beanstalk to create and manage your environment. You can create a role using <a id="_idIndexMarker855"/>the Amazon <strong class="keyWord">IAM</strong> (<strong class="keyWord">Identity and Access Management</strong>) service. Use the AWS search bar to navigate to the IAM service. In the IAM service, select <strong class="screenText">Roles</strong> and press the <strong class="screenText">Create role</strong> button. Select <strong class="screenText">AWS Service</strong> and <strong class="screenText">EC2</strong>, as shown in the following screenshot, and press the <strong class="screenText">Next</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_14.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.14: Create role</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">In the <strong class="screenText">Add Permissions </strong>step, select the following permission policies: <strong class="screenText">AWSElasticBeanstalkWorkerTier</strong>, <strong class="screenText">AWSElasticBeanstalkWebTier</strong>, and <strong class="screenText">AWSElasticBeanstalkMulticontainerDocker</strong>, then press the <strong class="screenText">Next</strong> button. You can <a id="_idIndexMarker856"/>use the search bar to find the correct policies:
    <figure class="mediaobject"><img src="../Images/B19818_17_15.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.15: Add permissions</p>
    <div class="packt_tip">
      <p class="normal">You can read more about managing Elastic Beanstalk instance profiles and policies at <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/iam-instanceprofile.html"><span class="url">https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/iam-instanceprofile.html</span></a>.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Type a name for your role, as illustrated in the next screenshot, and finally press the <strong class="screenText">Create role</strong> button:
    <figure class="mediaobject"><img src="../Images/B19818_17_16.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.16: Role name</p>
    <p class="normal">The<a id="_idIndexMarker857"/> new role that we just created allows Elastic Beanstalk to create and manage our environment. Now, we can start to deploy our Spring Boot application.</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Use the AWS dashboard search bar to find the <strong class="screenText">Elastic Beanstalk</strong> service. Click the service to navigate to the Elastic Beanstalk page:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_17.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.17: Elastic Beanstalk service</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Click <strong class="screenText">Applications</strong> in the left side menu, and press the <strong class="screenText">Create application</strong> button to create a new application. Type a name for your application, as shown in the following screenshot, and press the <strong class="screenText">Create</strong> button:</li>
    </ol>
    <figure class="mediaobject"> <img src="../Images/B19818_17_18.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.18: Create application</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Next, we<a id="_idIndexMarker858"/> have to create an <strong class="keyWord">environment </strong>for our application. An environment is a collection of AWS resources running an application version. You can have multiple environments for one application: for example, development, production, and testing environments. Click the <strong class="screenText">Create new environment</strong> button to configure a new environment:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_19.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.19: Create new environment</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">In the environment configuration, you first have to set the platform. In the <strong class="screenText">Platform type</strong> section, select <strong class="screenText">Java</strong> and the first version <strong class="screenText">17</strong> for the branch, as shown in the following screenshot. The <strong class="screenText">Platform version</strong> is a combination of specific versions of an operating system, runtime, web server, application server, and Elastic Beanstalk components. You can use the recommended <strong class="screenText">Platform</strong> <strong class="screenText">version</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_20.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.20: Platform type</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Next, go <a id="_idIndexMarker859"/>to the <strong class="screenText">Application code</strong> section in the configuration page. Select <strong class="screenText">Upload your code</strong> and <strong class="screenText">Local file</strong>. Click the <strong class="screenText">Choose file</strong> button and select the Spring Boot <code class="inlineCode">.jar</code> file that we built earlier. You also have to type in a unique <strong class="screenText">Version label</strong>. Finally, press the <strong class="screenText">Next</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_21.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.21: Create new environment</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">In the <strong class="screenText">Configuration service access</strong> step, select the role that you created earlier from the <strong class="screenText">EC2 instance profile</strong> dropdown list, as shown in the following screenshot. Then, press the <strong class="screenText">Next</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_22.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.22: Service access</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="10">You<a id="_idIndexMarker860"/> can skip the optional <strong class="screenText">Set up networking, database, and tags</strong> and <strong class="screenText">Configure instance traffic and scaling</strong> steps. </li>
      <li class="numberedList">Next, move to the <strong class="screenText">Configure updates, monitoring, and logging </strong>step. In the <strong class="screenText">Environment properties</strong> section, we have to add the following environment properties. You can add new properties by pressing the <strong class="screenText">Add environment property</strong> button at the bottom of the page. There are already some predefined properties that you don’t have to modify (<code class="inlineCode">GRADLE_HOME</code>, <code class="inlineCode">M2</code> and <code class="inlineCode">M2_HOME</code>):<ul>
          <li class="bulletList"><code class="inlineCode">SERVER_PORT</code>: <code class="inlineCode">5000</code> (Elastic beans have a Nginx reverse proxy that will forward incoming requests to internal port <code class="inlineCode">5000</code>).</li>
          <li class="bulletList"><code class="inlineCode">SPRING_DATASOURCE_URL</code>: The database URL you need to use here is identical to the database URL value we previously configured in the <code class="inlineCode">'application.properties'</code> file when we initially tested the AWS database integration.</li>
          <li class="bulletList"><code class="inlineCode">SPRING_DATASOURCE_USERNAME</code>: The username of your database.</li>
          <li class="bulletList"><code class="inlineCode">SPRING_DATASOURCE_PASSWORD</code>: The password of your database.</li>
        </ul>
    <p class="normal">The following screenshot shows the new properties:</p>
    <figure class="mediaobject"><img src="../Images/B19818_17_23.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.23: Environment properties</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="12">Finally, in <a id="_idIndexMarker861"/>the <strong class="screenText">Review</strong> step, press the <strong class="screenText">Submit</strong> button, and your deployment will start. You have to wait until your environment is successfully launched, as illustrated in the next screenshot. The <strong class="screenText">Domain</strong> in the <strong class="screenText">Environment overview</strong> is the URL of your deployed REST API:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_24.png" alt="A screenshot of a computer  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 17.24: Environment successfully launched</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="13">Now, we have deployed our Spring Boot application, but the application can’t access the AWS database yet. For this, we have to allow access from the deployed application to our database. To do this, navigate to Amazon RDS and select your database from the RDS database list. Then, click <strong class="screenText">VPC security groups</strong> and click the <strong class="screenText">Edit inbound rules</strong> button, like we did earlier. Delete the rule that allows access from your local IP address.</li>
      <li class="numberedList">Add a new rule whose <strong class="screenText">Type</strong> is <strong class="screenText">MySQL/Aurora</strong>. In the <strong class="screenText">Destination</strong> field, type in <code class="inlineCode">sg</code>. This <a id="_idIndexMarker862"/>will open a list of environments, as shown in the following screenshot. Select the environment where your Spring Boot application is running (it begins with the “awseb” text and has a subtitle that shows the name of your environment) and press the <strong class="screenText">Save rules</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_25.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.25: Inbound rules</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="15">Now, your application is properly deployed, and you can log in to your deployed REST API using Postman and the URL that you got from the domain in <em class="italic">step 12</em>. The following screenshot shows the POST request that is sent to the <code class="inlineCode">aws_domain_url/login</code> endpoint:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_26.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.26: Postman authentication</p>
    <p class="normal">You can also configure a custom domain name for your Elastic Beanstalk environment, and then you can use HTTPS to allow users to connect to your website securely. If you don’t own a <a id="_idIndexMarker863"/>domain name, you can still use HTTPS with a self-signed certificate for development and testing purposes. You can find the configuration instructions in the AWS documentation: <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https.html"><span class="url">https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https.html</span></a>.</p>
    <div class="note">
      <p class="normal">Note! You should delete AWS resources that you have created to avoid being charged unexpectedly. You will get a reminder email from AWS to delete resources before the end of your Free Tier period.</p>
    </div>
    <p class="normal">Now, we are ready to deploy our frontend.</p>
    <h1 id="_idParaDest-218" class="heading-1">Deploying the frontend with Netlify</h1>
    <p class="normal">Before we <a id="_idIndexMarker864"/>deploy with Netlify, we will learn how you can <a id="_idIndexMarker865"/>build your React project locally. Move to your frontend project folder and execute the following <code class="inlineCode">npm</code> command:</p>
    <pre class="programlisting con"><code class="hljs-con">npm run build
</code></pre>
    <p class="normal">By default, your project is built in the <code class="inlineCode">/dist</code> folder. You can change the folder by using the <code class="inlineCode">build.outDir</code> property in your Vite configuration file.</p>
    <p class="normal">First, the build process compiles your TypeScript code; therefore, you have to fix all TypeScript errors or warnings, if there are any. A commonly encountered error occurs when you forget to remove unused imports, as illustrated in the example error below:</p>
    <pre class="programlisting con"><code class="hljs-con">src/components/AddCar.tsx:10:1 - error TS6133: 'Snackbar' is declared but its value is never read.
10 import Snackbar from '@mui/material/Snackbar';
</code></pre>
    <p class="normal">This indicates that the <code class="inlineCode">AddCar.tsx</code> file imports the <code class="inlineCode">Snackbar</code> component, but the component isn’t actually utilized. Therefore, you should remove this unused import. Once all errors have been resolved, you can proceed to rebuilding your project.</p>
    <p class="normal">Vite uses <strong class="keyWord">Rollup</strong> (<a href="https://rollupjs.org/"><span class="url">https://rollupjs.org/</span></a>) to<a id="_idIndexMarker866"/> bundle your code. Test files and development tools are <em class="italic">not</em> included in the production build. After you have built your app, you can test your local build using the following <code class="inlineCode">npm</code> command:</p>
    <pre class="programlisting con"><code class="hljs-con">npm run preview
</code></pre>
    <p class="normal">The command starts a local static web server that serves your built app. You can test your app in a browser by using the URL that is shown in the terminal.</p>
    <p class="normal">You <a id="_idIndexMarker867"/>could <a id="_idIndexMarker868"/>deploy your frontend to AWS as well, but <a id="_idIndexMarker869"/>we will use <strong class="keyWord">Netlify</strong> (<a href="https://www.netlify.com/"><span class="url">https://www.netlify.com/</span></a>) for our frontend deployment. Netlify is a modern web development platform that is easy to use. You can use the Netlify <strong class="keyWord">command-line interface </strong>(<strong class="keyWord">CLI</strong>) or <a id="_idIndexMarker870"/>GitHub to deploy your project. In this section, we will use Netlify’s GitHub integration to deploy our frontend:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">First, we have to change our REST API URL. Open your frontend project with VS Code and open the <code class="inlineCode">.env</code> file in the editor. Change the <code class="inlineCode">VITE_API_URL</code> variable to match your backend’s URL, as follows, and save the changes:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">VITE_API_URL</span>=https:// carpackt-env.eba-whufxac5.eu-central-<span class="hljs-number">2</span>.
  elasticbeanstalk.com
</code></pre>
      </li>
      <li class="numberedList">Create a GitHub repository for your frontend project. Execute the following Git commands in your project folder using the command line. These Git commands create a new Git repository, make an initial commit, set up a remote repository on GitHub, and push the code to your remote repository:
        <pre class="programlisting con"><code class="hljs-con">git init
git add .
git commit -m "first commit"
git branch -M main
git remote add origin &lt;YOUR_GITHUB_REPO_URL&gt;
git push -u origin main
</code></pre>
      </li>
      <li class="numberedList">Sign up and log in to Netlify. We will use a free <strong class="screenText">Starter</strong> account that has limited features. With this account, you can build one concurrent build for free, and there is some limitation in bandwidth.<div class="packt_tip">
          <p class="normal">You can read more about the Netlify free account features at <a href="https://www.netlify.com/pricing/"><span class="url">https://www.netlify.com/pricing/</span></a>.</p>
        </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Open the <strong class="screenText">Sites</strong> from the left side menu and you should see the <strong class="screenText">Import an existing project</strong> panel, as shown in the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_27.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.27: Import an existing project</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Click the <strong class="screenText">Import from Git</strong> button and select <strong class="screenText">Deploy with GitHub</strong>. In this phase, you have to<a id="_idIndexMarker871"/> authorize your GitHub to get <a id="_idIndexMarker872"/>access to your repositories. After you have authorized successfully, you should see your GitHub username and repository search field, as shown in the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_28.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.28: GitHub repository</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Search for your frontend repository and click it.</li>
      <li class="numberedList">Next, you will see the deployment settings. Continue with the default settings by pressing the <strong class="screenText">Deploy &lt;your_repository_name&gt;</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_29.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.29: Deployment settings</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">After the<a id="_idIndexMarker873"/> deployment has finished, you will see the<a id="_idIndexMarker874"/> following dialog. Press the <strong class="screenText">View site deploy</strong> button, as shown in the following figure, and you will be redirected to the <strong class="screenText">Deploys</strong> page. Netlify generates a random site name for you, but you can use your own domain as well:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_30.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.30: Deploy success</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">On the <strong class="screenText">Deploys</strong> page, you will see your deployed site, and you can access your frontend by clicking the <strong class="screenText">Open production deploy</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_31.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.31: Deploys</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="10">Now, you <a id="_idIndexMarker875"/>should <a id="_idIndexMarker876"/>see the login form, as follows:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_32.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.32: Login screen</p>
    <div class="note">
      <p class="normal">You can delete your Netlify deployment from the <strong class="screenText">Site configuration </strong>in the left side menu.</p>
    </div>
    <p class="normal">We have now deployed our frontend, and we can move on to learning about containers.</p>
    <h1 id="_idParaDest-219" class="heading-1">Using Docker containers</h1>
    <p class="normal"><strong class="keyWord">Docker</strong> (<a href="https://www.docker.com/"><span class="url">https://www.docker.com/</span></a>) is a <a id="_idIndexMarker877"/>container platform that makes<a id="_idIndexMarker878"/> software development, deployment, and shipping easier. Containers are lightweight and executable<a id="_idIndexMarker879"/> software packages that include everything that is needed to run software. Containers can be deployed to cloud services, such as AWS, Azure, and Netlify, and they offer many benefits for deploying applications:</p>
    <ul>
      <li class="bulletList">Containers are isolated, which means each container runs independently of the host system and other containers.</li>
      <li class="bulletList">Containers are portable because they contain everything an application needs to run.</li>
      <li class="bulletList">Containers can also be used to ensure consistency between development and production environments.</li>
    </ul>
    <div class="note">
      <p class="normal">Note! To run Docker containers on Windows, you need the Windows 10 or 11 Professional or Enterprise versions. You <a id="_idIndexMarker880"/>read more about this in the Docker installation documentation: <a href="https://docs.docker.com/desktop/install/windows-install/"><span class="url">https://docs.docker.com/desktop/install/windows-install/</span></a>.</p>
    </div>
    <p class="normal">In this section, we <a id="_idIndexMarker881"/>will create a container for our MariaDB database and Spring Boot application, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Install Docker on your workstation. You can find installation packages for multiple platforms at <a href="https://www.docker.com/get-docker"><span class="url">https://www.docker.com/get-docker</span></a>. If you have a Windows operating system, you can go through the installation wizard using the default settings.
    <div class="packt_tip">
      <p class="normal">If you are having problems with the installation, you can read the Docker troubleshooting <a id="_idIndexMarker882"/>documentation at <a href="https://docs.docker.com/desktop/troubleshoot/topics"><span class="url">https://docs.docker.com/desktop/troubleshoot/topics</span></a>.</p>
    </div>
    <p class="normal">After the installation, you can check the current version by typing the following command in the terminal. Note! When you run Docker commands, you should start Docker Engine if it is not running (on Windows and macOS, you start Docker Desktop):</p>
    <pre class="programlisting con"><code class="hljs-con">docker --version
</code></pre></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">First, we create a container for our MariaDB database. You can pull the latest MariaDB database image version from Docker Hub using the following command:
        <pre class="programlisting con"><code class="hljs-con">docker pull mariadb:latest
</code></pre>
      </li>
      <li class="numberedList">After the <code class="inlineCode">pull</code> command has finished, you can check that a new <code class="inlineCode">mariadb</code> image exists by typing the <code class="inlineCode">docker image ls</code> command, and the output should look as follows. A <strong class="keyWord">Docker image</strong> is a template that contains instructions for creating a container:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_33.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.33: Docker images</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Next, we<a id="_idIndexMarker883"/> will run the <code class="inlineCode">mariadb</code> container. The <code class="inlineCode">docker run</code> command creates and runs a container based on the given image. The following command sets the root user password and creates a new database, called <code class="inlineCode">cardb</code>, that we need for our Spring Boot application (Note! Use your own MariaDB root user password that you are using in your Spring Boot application):
        <pre class="programlisting con"><code class="hljs-con">docker run --name cardb -e MYSQL_ROOT_PASSWORD=your_pwd -e MYSQL_
  DATABASE=cardb mariadb
</code></pre>
      </li>
      <li class="numberedList">Now, we have created our database container, and we can start to create a container for the Spring Boot application. First, we have to change the data source URL of our Spring Boot application. Open the <code class="inlineCode">application.properties</code> file of your application and change the <code class="inlineCode">spring.datasource.url</code> value to the following:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mariadb://mariadb:3306/cardb</span>
</code></pre>
    <p class="normal">This is because our database is now running in the <code class="inlineCode">cardb</code> container and the port is <code class="inlineCode">3306</code>.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Then, we have to create an executable JAR file from our Spring Boot application, just as we did at the beginning of this chapter. You can also run a Gradle task in the Eclipse by right-clicking <strong class="screenText">Project</strong> in the Project Explorer, selecting <strong class="screenText">Window | Show View | Gradle</strong> and then <strong class="screenText">Gradle Tasks</strong> from the list. This opens a list of Gradle tasks, and you can start the build process by double clicking the <strong class="screenText">build </strong>task. Once the build is finished, you can find the executable JAR file from the <code class="inlineCode">build/libs</code> folder inside your project folder.</li>
      <li class="numberedList">Containers are defined by <a id="_idIndexMarker884"/>using <strong class="keyWord">Dockerfiles</strong>. Create a new Dockerfile using Eclipse in the <code class="inlineCode">root</code> folder of your project (<code class="inlineCode">cardatabase</code>) and name it <code class="inlineCode">Dockerfile</code>. The <a id="_idIndexMarker885"/>following lines of code show the contents of the Dockerfile:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">FROM</span> eclipse-temurin:<span class="hljs-number">17</span>-jdk-alpine
<span class="hljs-keyword">VOLUME</span> /tmp
<span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8080</span>
<span class="hljs-keyword">COPY</span> build/libs/cardatabase-0.0.1-SNAPSHOT.jar app.jar
<span class="hljs-keyword">ENTRYPOINT</span> [<span class="hljs-string">"java"</span>,<span class="hljs-string">"-jar"</span>,<span class="hljs-string">"/app.jar"</span>]
</code></pre>
    <p class="normal">Let’s examine each line:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">FROM</code> defines<a id="_idIndexMarker886"/> the <strong class="keyWord">Java Development Kit</strong> (<strong class="keyWord">JDK</strong>) version, and you should use the same version that you used to build your JAR file. We are using Eclipse Temurin, which is an open-source JDK, and version 17, which we used when we developed our Spring Boot application.</li>
      <li class="bulletList">Volumes are used for persistent data generated by and used by Docker containers.</li>
      <li class="bulletList"><code class="inlineCode">EXPOSE</code> defines the port that should be published outside of the container.</li>
      <li class="bulletList"><code class="inlineCode">COPY</code> copies the JAR file to the container’s filesystem and renames it <code class="inlineCode">app.jar</code>.</li>
      <li class="bulletList">Lastly, <code class="inlineCode">ENTRYPOINT</code> defines the command-line arguments that the Docker container runs.</li>
    </ul>
    <div class="note">
      <p class="normal">You can read more about <a id="_idIndexMarker887"/>the Dockerfile syntax at <a href="https://docs.docker.com/engine/reference/builder/"><span class="url">https://docs.docker.com/engine/reference/builder/</span></a>.</p>
    </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Build an image with the following command in the folder where your Dockerfile is located. With the <code class="inlineCode">-t</code> argument, we can give a friendly name to our container:
        <pre class="programlisting con"><code class="hljs-con">docker build -t carbackend .
</code></pre>
      </li>
      <li class="numberedList">At the end of the build, you should see a <strong class="screenText">Building</strong> [...]<strong class="screenText"> FINISHED</strong> message, as illustrated in the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_34.png" alt="Figure 15.25 – Docker build "/></figure>
    <p class="packt_figref">Figure 17.34: Docker build</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="10">Check the<a id="_idIndexMarker888"/> list of images using the <code class="inlineCode">docker image ls</code> command. You should see two images now, as shown in the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_17_35.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.35: Docker images</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="11">Now, we can run our Spring Boot container and link the MariaDB container to it using the following command. This command specifies that our Spring Boot container can access the MariaDB container using the <code class="inlineCode">mariadb</code> name:
        <pre class="programlisting con"><code class="hljs-con">docker run -p 8080:8080 --name carapp --link cardb:mariadb -d
  carbackend
</code></pre>
      </li>
      <li class="numberedList">When our application and database are running, we can access the Spring Boot application logs using the following command:
        <pre class="programlisting con"><code class="hljs-con">docker logs carapp
</code></pre>
      </li>
    </ol>
    <p class="normal">We can see here that our application is up and running:</p>
    <figure class="mediaobject"><img src="../Images/B19818_17_36.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.36: Application log</p>
    <p class="normal">Our application<a id="_idIndexMarker889"/> has started successfully, and the demonstration data has been inserted into the database that exists in the MariaDB container. Now, you can use your backend, as seen in the following screenshot:</p>
    <figure class="mediaobject"><img src="../Images/B19818_17_37.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 17.37: Application login</p>
    <p class="normal">We have learned a few different ways to deploy your full-stack application and how to containerize your Spring Boot application. As a next step, you could study how to deploy Docker containers. For example, AWS has a guide to deploying containers on Amazon ECS: <a href="https://aws.amazon.com/getting-started/hands-on/deploy-docker-containers/"><span class="url">https://aws.amazon.com/getting-started/hands-on/deploy-docker-containers/</span></a>.</p>
    <h1 id="_idParaDest-220" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, you learned how to deploy our application. We deployed the Spring Boot application to AWS Elastic Beanstalk. Next, we deployed our React frontend using Netlify. Finally, we used Docker to create containers for our Spring Boot application and the MariaDB database.</p>
    <p class="normal">As we reach the final pages of this book, I hope you’ve had an exciting journey through the world of full-stack development with Spring Boot and React. As you continue your full-stack development journey, remember that technologies are evolving all the time. For a developer, life is constant learning and innovation – so stay curious and keep building.</p>
    <h1 id="_idParaDest-221" class="heading-1">Questions</h1>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">How should you create a Spring Boot executable JAR file?</li>
      <li class="numberedList">What AWS services you can use to deploy a database and Spring Boot application to AWS?</li>
      <li class="numberedList">What command can you use to build your Vite React project?</li>
      <li class="numberedList">What is Docker?</li>
      <li class="numberedList">How should you create a Spring Boot application container?</li>
      <li class="numberedList">How should you create a MariaDB container?</li>
    </ol>
    <h1 id="_idParaDest-222" class="heading-1">Further reading</h1>
    <p class="normal">Packt Publishing has other resources available for learning about React, Spring Boot, and Docker. A few of them are listed here:</p>
    <ul>
      <li class="bulletList"><em class="italic">Docker Fundamentals for Beginners [Video]</em>, by Coding Gears | Train Your Brain (<a href="https://www.packtpub.com/product/docker-fundamentals-for-beginners-video/9781803237428"><span class="url">https://www.packtpub.com/product/docker-fundamentals-for-beginners-video/9781803237428</span></a>)</li>
      <li class="bulletList"><em class="italic">Docker</em> <em class="italic">for</em> <em class="italic">Developers</em>, by Richard Bullington-McGuire, Andrew K. Dennis, andMichael Schwartz (<a href="https://www.packtpub.com/product/docker-for-developers/9781789536058"><span class="url">https://www.packtpub.com/product/docker-for-developers/9781789536058</span></a>)</li>
      <li class="bulletList"><em class="italic">AWS, JavaScript, React - Deploy Web Apps on the Cloud [Video]</em>, by YouAccel Training (<a href="https://www.packtpub.com/product/aws-javascript-react-deploy-web-apps-on-the-cloud-video/9781837635801"><span class="url">https://www.packtpub.com/product/aws-javascript-react-deploy-web-apps-on-the-cloud-video/9781837635801</span></a>)</li>
    </ul>
    <h1 class="heading-1">Learn more on Discord</h1>
    <p class="normal">To join the Discord community for this book – where you can share feedback, ask the author questions, and learn about new releases – follow the QR code below:</p>
    <p class="normal"><a href="https://packt.link/FullStackSpringBootReact4e"><span class="url">https://packt.link/FullStackSpringBootReact4e</span></a></p>
    <p class="normal"><img src="../Images/QR_Code10796108009382640.png" alt="" role="presentation"/></p>
  </div>
</body></html>