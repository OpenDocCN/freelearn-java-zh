<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Running Cucumber" id="aid-1ENBI1"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Running Cucumber</h1></div></div></div><p>In this chapter, we will cover the following recipes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Integrating Cucumber with Maven</li><li class="listitem">Running Cucumber from the Terminal</li><li class="listitem">Overriding options from the Terminal</li><li class="listitem">Integrating Cucumber with Jenkins and GitHub</li><li class="listitem">Running Cucumber test cases in parallel</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec43"/>Introduction</h1></div></div></div><p>For successful implementation of any testing framework, it is mandatory that test cases can be run in multiple ways so that people with different competency levels can use it how they need to. So, now we will focus on running Cucumber test cases. There are multiple ways of running Cucumber, such as integrating it with Maven and running it from the Terminal; we can run Cucumber remotely as well by integrating Cucumber with Jenkins.</p><p>In this chapter, we will also cover advanced topics of running Cucumber test cases in parallel by a combination of Cucumber, Maven, and JUnit.</p></div></div>
<div class="section" title="Integrating Cucumber with Maven" id="aid-1FLS41"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec44"/>Integrating Cucumber with Maven</h1></div></div></div><p>Maven has a lot of <a id="id247" class="indexterm"/>advantages over other build tools, such as dependency management, lots of plugins and the convenience of running integration tests<a id="id248" class="indexterm"/>. So let's also integrate our framework with Maven. Maven will allow our test cases to be run in different flavors, such as from the Terminal, integrating with Jenkins, and parallel execution.</p><p>So how do we integrate with Maven? Let's find out in the next section.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec83"/>Getting ready</h2></div></div></div><p>I am assuming that we know the basics of Maven (the basics of Maven are out of the scope of this book). Follow<a id="id249" class="indexterm"/> the upcoming instructions to install Maven on <a id="id250" class="indexterm"/>your system and to create a sample Maven project.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We need to install Maven on our system first. So, follow instructions mentioned on the following blogs:<p>For<a id="id251" class="indexterm"/> Windows:</p><p>
<a class="ulink" href="http://www.mkyong.com/maven/how-to-install-maven-in-windows/">http://www.mkyong.com/maven/how-to-install-maven-in-windows/</a>
</p><p>For<a id="id252" class="indexterm"/> Mac:</p><p>
<a class="ulink" href="http://www.mkyong.com/maven/install-maven-on-mac-osx/">http://www.mkyong.com/maven/install-maven-on-mac-osx/</a>
</p></li><li class="listitem">We can also<a id="id253" class="indexterm"/> install the Maven Eclipse plugin by following the instructions mentioned on this blog:<p>
<a class="ulink" href="http://theopentutorials.com/tutorials/eclipse/installing-m2eclipse-maven-plugin-for-eclipse/">http://theopentutorials.com/tutorials/eclipse/installing-m2eclipse-maven-plugin-for-eclipse/</a>.</p></li><li class="listitem">To import <a id="id254" class="indexterm"/>a Maven project into Eclipse, follow the instructions on this blog:<p>
<a class="ulink" href="http://www.tutorialspoint.com/maven/maven_eclispe_ide.htm">http://www.tutorialspoint.com/maven/maven_eclispe_ide.htm</a>.</p></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec84"/>How to do it…</h2></div></div></div><p>Since it is a Maven project, we are going to change the <code class="literal">pom.xml</code> file to add the Cucumber dependencies.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First we are going to declare some custom properties which will be used by us in managing the dependency version:<div class="informalexample"><pre class="programlisting">&lt;properties&gt;
    &lt;junit.version&gt;4.11&lt;/junit.version&gt;
    &lt;cucumber.version&gt;1.2.2&lt;/cucumber.version&gt;
    &lt;selenium.version&gt;2.45.0&lt;/selenium.version&gt;
    &lt;maven.compiler.version&gt;2.3.2&lt;/maven.compiler.version&gt;
&lt;/properties&gt;</pre></div></li><li class="listitem">Now, we are going to add the dependency for Cucumber-JVM with scope as test:<div class="informalexample"><pre class="programlisting">&lt;!—- Cucumber-java--&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;info.cukes&lt;/groupId&gt;
    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;
    &lt;version&gt;${cucumber.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;</pre></div></li><li class="listitem">Now we need to add the dependency for Cucumber-JUnit with scope as test.<div class="informalexample"><pre class="programlisting">&lt;!-— Cucumber-JUnit --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;info.cukes&lt;/groupId&gt;
    &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;
    &lt;version&gt;${cucumber.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;</pre></div><p>That's it! We have integrated Cucumber and Maven.</p></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec85"/>How it works…</h2></div></div></div><p>By following<a id="id255" class="indexterm"/> these Steps, we have created a Maven project and added the Cucumber-Java dependency. At the moment, this project only has a <code class="literal">pom.xml</code> file, but this project can be used for adding different modules such as Feature files and Step<a id="id256" class="indexterm"/> Definitions.</p><p>The advantage of using properties is that we are making sure that the dependency version is declared at one place in the <code class="literal">pom.xml</code> file. Otherwise, we declare a dependency at multiple places and may end up with a discrepancy in the dependency version.</p><p>The Cucumber-Java dependency is the main dependency necessary for the different building blocks of Cucumber. The <a id="id257" class="indexterm"/>
<span class="strong"><strong>Cucumber-JUnit</strong></span> dependency is for Cucumber JUnit Runner, which we use in running Cucumber test cases.</p></div></div>
<div class="section" title="Running Cucumber from the Terminal" id="aid-1GKCM1"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec45"/>Running Cucumber from the Terminal</h1></div></div></div><p>Now we have integrated Cucumber with Maven, running Cucumber from the Terminal will not be a problem. Running any test framework from the Terminal has its<a id="id258" class="indexterm"/> own advantages, such as overriding the run configurations mentioned in the code.</p><p>So how do we<a id="id259" class="indexterm"/> run Cucumber test cases from the Terminal? Let's find out in our next section.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec86"/>How to do it…</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the command prompt and <code class="literal">cd</code> until the project root directory.</li><li class="listitem">First, let's run all the Cucumber Scenarios from the command prompt. Since it's a Maven project and we have added Cucumber in test scope dependency and all features are also added in test packages, run the following command in the command<a id="id260" class="indexterm"/> prompt:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn test</strong></span>
</pre></div><p>This is<a id="id261" class="indexterm"/> the output:</p><div class="mediaobject"><img src="../Images/image00159.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p><div class="mediaobject"><img src="../Images/image00160.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">The previous command runs everything as mentioned in the JUnit Runner class. However, if we want to override the configurations mentioned in the Runner, then we need to use following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn test –DCucumber.options="&lt;&lt;OPTIONS&gt;&gt;"</strong></span>
</pre></div></li><li class="listitem">If you need<a id="id262" class="indexterm"/> help on these Cucumber <a id="id263" class="indexterm"/>options, then enter the following command in the command prompt and look at the output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn test -Dcucumber.options="--help"</strong></span>
</pre></div><p>This is the output:</p><div class="mediaobject"><img src="../Images/image00161.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec87"/>How it works…</h2></div></div></div><p>
<code class="literal">mvn test</code> runs Cucumber Features using Cucumber's JUnit Runner. The <code class="literal">@RunWith </code>(<code class="literal">Cucumber.class</code>) annotation on the <code class="literal">RunCukesTest</code> class tells JUnit to kick off Cucumber. The Cucumber runtime parses the command-line options to know what Feature to run, where the Glue Code lives, what plugins to use, and so on. When you use the JUnit Runner, these options are generated from the<a id="id264" class="indexterm"/> <code class="literal">@CucumberOptions</code> annotation on your test.</p></div></div>
<div class="section" title="Overriding Options from the Terminal" id="aid-1HIT81"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec46"/>Overriding Options from the Terminal</h1></div></div></div><p>When it is <a id="id265" class="indexterm"/>necessary to override the options mentioned in the JUnit Runner, then we need <code class="literal">Dcucumber.options</code> from the Terminal. Let's look at some of the practical examples.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec88"/>How to do it…</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">If we want to run a Scenario by specifying the filesystem path, run the following command and look at the output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn test -Dcucumber.options="src/test/java/com/features/sample.feature:5"</strong></span>
</pre></div><div class="mediaobject"><img src="../Images/image00162.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p><p>In the preceding code, "<code class="literal">5</code>" is the Feature file line number where a Scenario starts.</p></li><li class="listitem">If we want to run the test cases using Tags, then we run the following command and notice the output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn test -Dcucumber.options="--tags @sanity"</strong></span>
</pre></div><p>The following is the output of the preceding command:</p><div class="mediaobject"><img src="../Images/image00163.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">If we want to<a id="id266" class="indexterm"/> generate a different report, then we can use the following command and see the JUnit report generate at the location mentioned:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn test -Dcucumber.options="--plugin junit:target/cucumber-junit-report.xml"</strong></span>
</pre></div><div class="mediaobject"><img src="../Images/image00164.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec89"/>How it works…</h2></div></div></div><p>When you override the<a id="id267" class="indexterm"/> options with <code class="literal">-Dcucumber.options</code>, you will completely override whatever<a id="id268" class="indexterm"/> options are hardcoded in your <code class="literal">@CucumberOptions</code>. There is one exception to this rule, and that is the <code class="literal">--plugin</code> option. This will not override, but instead, it will add a plugin.</p></div></div>
<div class="section" title="Integrating Cucumber with Jenkins and GitHub"><div class="titlepage" id="aid-1IHDQ2"><div><div><h1 class="title"><a id="ch05lvl1sec47"/>Integrating Cucumber with Jenkins and GitHub</h1></div></div></div><p>To schedule test case executions remotely, we integrate our testing frameworks with Jenkins. Jenkins has a<a id="id269" class="indexterm"/> lot of advantages as it is open source, free, easy to use, can schedule a run on<a id="id270" class="indexterm"/> scheduled time or trigger builds after an event, and so on. So it<a id="id271" class="indexterm"/> becomes very important that our Cucumber test cases are also run from Jenkins. We will look at this in detail in the next<a id="id272" class="indexterm"/> chapter.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec90"/>Getting ready</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Installing and running Jenkins on a local machine is out of the scope of this book. I am assuming that you have either local or remote Jenkins setup ready and can access Jenkins via the URL. If you need any help regarding the setup, follow<a id="id273" class="indexterm"/> the Step mentioned in the blog at <a class="ulink" href="https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins">https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins</a>.</li><li class="listitem">We will also need to upload our project on GitHub. Again, committing the project on GitHub is out of the scope of this book, but if you need any help, you can follow the instructions<a id="id274" class="indexterm"/> mentioned at <a class="ulink" href="https://help.github.com/articles/set-up-git/">https://help.github.com/articles/set-up-git/</a></li><li class="listitem">The GitHub <a id="id275" class="indexterm"/>project URL is<a class="ulink" href="https://github.com/ShankarGarg/CucumberBook.git"> https://github.com/ShankarGarg/CucumberBook.git</a>, which can be used to download the project we have been using until now.</li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec91"/>How to do it…</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open Jenkins in any browser with the URL <code class="literal">http://localhost:8080/jenkins/</code> (replace localhost with the machine's IP address, if you <a id="id276" class="indexterm"/>don't have Jenkins running locally).</li><li class="listitem">Go to the Jenkins dashboard and click on <span class="strong"><strong>New Item</strong></span>:<div class="mediaobject"><img src="../Images/image00165.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Enter the <a id="id277" class="indexterm"/>name of the Job that we want to create <a id="id278" class="indexterm"/>and also select the <span class="strong"><strong>Build a maven </strong></span><a id="id279" class="indexterm"/><span class="strong"><strong>project</strong></span> option. Click on<a id="id280" class="indexterm"/> <span class="strong"><strong>OK</strong></span>.<div class="mediaobject"><img src="../Images/image00166.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, enter the <span class="strong"><strong>Description</strong></span> of the project:<div class="mediaobject"><img src="../Images/image00167.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Then, enter<a id="id281" class="indexterm"/> the Git details by selecting<a id="id282" class="indexterm"/> the <span class="strong"><strong>Git</strong></span> option in <span class="strong"><strong>Source Code Management</strong></span> and enter <span class="strong"><strong>Repository URL</strong></span> as <a class="ulink" href="https://github.com/ShankarGarg/CucumberBook.git">https://github.com/ShankarGarg/CucumberBook.git</a> and <span class="strong"><strong>Credentials</strong></span>. Keep the<a id="id283" class="indexterm"/> other options in this section as<a id="id284" class="indexterm"/> default.<div class="mediaobject"><img src="../Images/image00168.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now, we come to the <span class="strong"><strong>Build</strong></span> section. Since we have selected a Maven project, the <code class="literal">Root POM</code> is automatically mentioned. We need to mention the goal that we want to run, which, in our case, is <code class="literal">test</code>:<div class="mediaobject"><img src="../Images/image00169.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Keep all<a id="id285" class="indexterm"/> other options as default and click <a id="id286" class="indexterm"/>on <span class="strong"><strong>Save</strong></span>.</li><li class="listitem">Now, click on <a id="id287" class="indexterm"/><span class="strong"><strong>Build Now</strong></span> to run the project.<div class="mediaobject"><img src="../Images/image00170.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Once you click on <span class="strong"><strong>Build Now</strong></span>, a build is triggered immediately. You can see the build <a id="id288" class="indexterm"/>number and the timestamp.<div class="mediaobject"><img src="../Images/image00171.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Click on the timestamp on the build. And then click on <span class="strong"><strong>Console Output</strong></span>. Just verifying the<a id="id289" class="indexterm"/> output to make sure whether the<a id="id290" class="indexterm"/> test cases were run or not:<div class="mediaobject"><img src="../Images/image00172.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec92"/>How it works…</h2></div></div></div><p>Since we have<a id="id291" class="indexterm"/> integrated Maven with Cucumber, the integration with Jenkins was basically running a Maven project with Jenkins. Jenkins <a id="id292" class="indexterm"/>comes with a Maven plugin by default (when we selected the item type to <span class="strong"><strong>Build a maven project</strong></span> most of the settings were taken care of at that time) The Build section was prepopulated with <code class="literal">pom.xml</code> and we just had to mention the goal as test.</p><p>Jenkins is also prepopulated with the GitHub plugin and we just had to mention the GitHub URL and credentials. So now every time the project is built, Jenkins takes the latest code from GitHub and then runs the test cases.</p></div></div>
<div class="section" title="Running Cucumber test cases in parallel"><div class="titlepage" id="aid-1JFUC2"><div><div><h1 class="title"><a id="ch05lvl1sec48"/>Running Cucumber test cases in parallel</h1></div></div></div><p>Running test <a id="id293" class="indexterm"/>cases in parallel is a very common and required <a id="id294" class="indexterm"/>practice for a good automation framework. Cucumber, by default, does not have any such option or setting. However, since Cucumber can be integrated with Maven and JUnit, using these two tools, we can run Cucumber Scenarios in parallel.</p><p>In this recipe, we will run two Scenarios in parallel and, for web automation that will mean opening two browsers at the same time. So how do we make this possible? Let's understand in the next section.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec93"/>How to do it…</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">We create a<a id="id295" class="indexterm"/> Feature file that has two Scenarios. We will aim to run these two Scenarios in parallel. This is just for the <a id="id296" class="indexterm"/>purpose of a demo, you can implement the same approach for <span class="emphasis"><em>n</em></span> number of Scenarios.<p>Both the Scenarios will be associated with two different Tags so that they can be run using these tags. Focus on the highlighted tags in the following code; our Feature file should look something like this:</p><div class="informalexample"><pre class="programlisting">Feature: sample

  @sanity
  Scenario: Home Page Default content
    Given user is on Application home page
    Then user gets a GitHub bootcamp section

  @regression
  Scenario: GitHub Bootcamp Section
    Given user is on Application home page
    When user focuses on GitHub Bootcamp Section
    Then user gets an option to setup git</pre></div></li><li class="listitem">Now, we should also have Step Definitions ready for this feature file. To focus on the main objective of this recipe, I have kept the code inside Step Definitions as a dummy. Here is what our Step Definition will look like:<div class="informalexample"><pre class="programlisting">@Given("^user is on Application home page$")
  public void user_is_on_Application_home_page()  {
    
    System.out.println("application home");
  }

@Then("^user gets a GitHub bootcamp section$")
  public void user_gets_a_ GitHub_bootcamp_section()  {
    
    System.out.println("bootcamp section");
  }

@When("^user focuses on GitHub Bootcamp Section$")
  public void user_focuses_on_GitHub_Bootcamp_Section()  {
    
    System.out.println("focus on GitHub");
    
  }

@Then("^user gets an option to setup git$")
  public void user_gets_an_option_to_setup_git()  {
    
    System.out.println("git section");
  }</pre></div></li><li class="listitem">The next Step<a id="id297" class="indexterm"/> is to write the Runners, which will make sure that test cases run in parallel. The first Step in that direction is<a id="id298" class="indexterm"/> to have one <code class="literal">RunCukeTest.java</code> class, which will specifically run Scenarios associated with the <code class="literal">@sanity</code> Tag. The code for <code class="literal">RunCukeTest</code> will be as follows:<div class="informalexample"><pre class="programlisting">package com.CucumberOptions;

import org.junit.runner.RunWith;

import cucumber.api.CucumberOptions;
import cucumber.api.junit.Cucumber;

@RunWith(Cucumber.class)
@CucumberOptions(
    features = "src/test/java/com/features",
    glue = "com.StepDefinitions",
    tags = { "@sanity" },
    dryRun = false,
    strict = true,
    monochrome = true,
    plugin = { "pretty",
      "html:target/cucumber_sanity.html"
      }
    )
public class RunCukeTest {
}</pre></div></li><li class="listitem">Now we need to write one more Runner, which will run Scenarios tagged with <code class="literal">@regression</code>. Focus on the highlighted code; the code for <code class="literal">RunCukeParallelTest.java</code> will look like this:<div class="informalexample"><pre class="programlisting">package com.CucumberOptions;

import org.junit.runner.RunWith;

import cucumber.api.CucumberOptions;
import cucumber.api.junit.Cucumber;

@RunWith(Cucumber.class)
@CucumberOptions(
    features = "src/test/java/com/features",
    glue = "com.StepDefinitions",
    tags = { "<span class="strong"><strong>@regression</strong></span>" },
    dryRun = false,
    strict = true,
    monochrome=true,
    plugin = { "pretty",
      "html:target/<span class="strong"><strong>cucumber_regression</strong></span>.html"
    }
    )
public class RunCukeParallelTest {
}</pre></div></li><li class="listitem">The last Step<a id="id299" class="indexterm"/> is to make sure that these two Runner classes are run in parallel. We will achieve this by making some changes to the <code class="literal">pom.xml</code> file. We will add<a id="id300" class="indexterm"/> the configuration for the Maven Surefire plugin, which will run the Runner classes in parallel. Here is what we will add to the existing <code class="literal">pom.xml</code> file:<div class="informalexample"><pre class="programlisting">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.5.1&lt;/version&gt;
      &lt;configuration&gt;
        &lt;encoding&gt;UTF-8&lt;/encoding&gt;
        &lt;source&gt;1.7&lt;/source&gt;
        &lt;target&gt;1.7&lt;/target&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.14&lt;/version&gt;
    &lt;configuration&gt;
      &lt;skip&gt;true&lt;/skip&gt;
    &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
        &lt;id&gt;acceptance-test&lt;/id&gt;
        &lt;phase&gt;integration-test&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;test&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;skip&gt;false&lt;/skip&gt;
          &lt;forkCount&gt;2&lt;/forkCount&gt;
          &lt;reuseForks&gt;false&lt;/reuseForks&gt;
          &lt;argLine&gt;-Duser.language=en&lt;/argLine&gt;
          &lt;argLine&gt;-Xmx1024m&lt;/argLine&gt;
          &lt;argLine&gt;-XX:MaxPermSize=256m&lt;/argLine&gt;
          &lt;argLine&gt;-Dfile.encoding=UTF-8&lt;/argLine&gt;
          &lt;useFile&gt;false&lt;/useFile&gt;
          &lt;includes&gt;
            &lt;include&gt;**/*Test.class&lt;/include&gt;
          &lt;/includes&gt;
          &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;
        &lt;/configuration&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre></div></li><li class="listitem">We will also add the dependencies for Selenium, so that we can write the code for invoking the<a id="id301" class="indexterm"/> Selenium Webdriver instance. The code for this is as follows:<div class="informalexample"><pre class="programlisting">&lt;!-- Selenium --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;
  &lt;artifactId&gt;selenium-firefox-driver&lt;/artifactId&gt;
  &lt;version&gt;${selenium.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;
  &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;
  &lt;version&gt;${selenium.version}&lt;/version&gt;     
&lt;/dependency&gt;</pre></div></li><li class="listitem">We will create<a id="id302" class="indexterm"/> one more class <code class="literal">DriverFactory.java</code> for adding Selenium Code, which will have a function to invoke the Firefox browser. The class will look like this:<div class="informalexample"><pre class="programlisting">package com.cucumber.automation.utils;

import java.net.MalformedURLException;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.WebDriverWait;


public class DriverFactory {

  public static WebDriver driver = null;
  public static WebDriverWait waitVar = null;

  public static String baseURL = "https://github.com/";

  /**
  *  This function is to invoke Selenium Webdriver
  * 
  * @throws MalformedURLException
  * @throws InterruptedException
  */
  public void createDriver() throws MalformedURLException, InterruptedException {
    
    driver = new FirefoxDriver();

    driver.manage().window().maximize();
    driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS);

    driver.get(baseURL);

    waitVar = new WebDriverWait(driver, 15);
  }

  /**
  * This function is to close driver instance
  */
  public void teardown() {
    driver.quit();
  }
}</pre></div></li><li class="listitem">We will update the <code class="literal">hooks.java</code> file to add the <code class="literal">createDriver()</code> function so that Firefox will be<a id="id303" class="indexterm"/> invoked before each Scenario. This is how the code will look:<div class="informalexample"><pre class="programlisting">@Before
public void taggedHookMethod1() throws InterruptedException 
{
  System.out.println("inside hook");
  DriverFactory.createDriver();
}</pre></div></li><li class="listitem">Open Terminal and <code class="literal">cd</code> until the project root directory. To invoke the Maven <a id="id304" class="indexterm"/>configuration that we put in <code class="literal">pom.xml</code> file, run the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn integration-test</strong></span>
</pre></div><p>This is the output of the preceding command:</p><div class="mediaobject"><img src="../Images/image00173.jpeg" alt="How to do it…"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec94"/>How it works…</h2></div></div></div><p>The Maven <a id="id305" class="indexterm"/>surefire plugin will run the classes mentioned in the <code class="literal">include</code> Tag in the configuration Tag as per the <code class="literal">forkcount</code> Tag value. So all the Java <a id="id306" class="indexterm"/>classes that end in <code class="literal">Test</code> (which are our <code class="literal">RunCukeTest</code> and <code class="literal">RunCukeParallelTest</code> JUnit Runner classes) will be executed in parallel in different threads. And since these two classes are JUnit Runner classes, they invoke the execution of Scenarios that are tagged with <code class="literal">@sanity</code> and on the different thread execution of Scenarios tagged with <code class="literal">@regression</code>.</p></div></div></body></html>