- en: '15'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Writing Tests in Angular
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous chapter, we learned how to secure an Angular application by
    adding user authentication, retrieving user information, and protecting routes.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: What if I told you that writing tests in the frontend could be fun and exciting?
    This chapter will show you how good the developer experience of Cypress E2E, short
    for end-to-end testing, is. Why do frontend developers love the Cypress framework?
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: This chapter will teach you how to write basic Cypress tests and mock HTTP requests
    for testing.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: Getting started with Cypress
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Writing a simple Cypress test
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mocking HTTP responses and intercepting HTTP requests
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The following link will take you to the finished version of this chapter: [https://github.com/PacktPublishing/Spring-Boot-and-Angular/tree/main/Chapter-15/superheroes](https://github.com/PacktPublishing/Spring-Boot-and-Angular/tree/main/Chapter-15/superheroes).'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: Getting started with Cypress
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, you will learn what Cypress is and how to get started with
    it.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: Cypress is an end-to-end agnostic framework for testing web applications. You
    can write test IDs in HTML tags and assert whether the HTML tags are rendered
    in the way you would expect them to be.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: Let’s define what **end-to-end** means. End-to-end means how a user will use
    your application after they land on your web application and finish tasks such
    as logging in, signing up, checking out, viewing a profile, logging out, filling
    out a form, and so on.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: 'For instance, you can test or check the UI of your web application in different
    example cases or scenarios:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: The sentence of the landing page’s value proposition contains the word *sale*
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The widget count of a section of your website is what you expected
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The items in the basket on the checkout page are cleared out after hitting the
    **Clear** button
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A login form is present when the web application’s URL is `domain.com/login`
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: These scenarios are examples of what to test for in a web application. Cypress
    is a test framework where you can write and run tests that don’t take much time
    to set up and configure.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: Now, let’s see how Cypress can be installed.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: Installation
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To start using Cypress, we must install it from the npm repository by running
    the following command:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The preceding `npm` command will install Cypress and the `cypress` testing library
    in the `dev` dependency packages. `@testing-library` is a group of common testing
    utilities in web development that makes the life of a developer easier
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we will learn what we must add to the `npm` script of our
    `package.json` file so that we can run the test later in this chapter.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: npm script
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To make it easier for us to run the Cypress test later, it’s a good idea to
    add a new npm script to our `package.json` file to help us easily run a command.
    Insert the following key/value pair inside the `scripts` block of the `package.json`
    file:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The preceding key/value pair helps you run the test by running the `npm run
    test` command in your Terminal. Run the full stack application as well as the
    `npm run test` command in your Terminal to start Cypress.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: 'An interactive browser app will open where you can run your test. *Figure 15**.1*
    shows the Cypress dashboard with a welcome message after running the `npm run
    test` command. Here, we are going to use **E2E Testing**, so click that box to
    continue:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.1 – The Cypress dashboard](img/B18159_15_01.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
- en: Figure 15.1 – The Cypress dashboard
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: '*Figure 15**.2* shows the folders and files that will be automatically added
    to your Angular application directory. These are required for any web application
    that uses Cypress. We will add more to this because we are using TypeScript, but
    we will do that later. For now, just hit the **Continue** button; you will be
    taken to the following screen:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.2 – Configuration Files](img/B18159_15_02.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
- en: Figure 15.2 – Configuration Files
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '*Figure 15**.3* shows that you can choose different browsers to run your E2E
    tests. You can choose from Chrome, Microsoft Edge, and Firefox. We will stop here
    because we haven’t written any tests yet, and we still need to help Cypress learn
    TypeScript. Stop Cypress from running by pressing *Ctrl* + *C* in your Terminal:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.3 – Choose a Browser](img/B18159_15_03.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
- en: Figure 15.3 – Choose a Browser
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '*Figure 15**.4* shows the generated `cypress` folders, which contain additional
    folders inside them, and the `cypress.config.ts` file for editing some of Cypress’s
    default behaviors. We will discuss the `cypress.config.ts` file later:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.4 – Cypress folders and files](img/B18159_15_04.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
- en: Figure 15.4 – Cypress folders and files
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: TypeScript for Cypress
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To help Cypress understand TypeScript, we must add the `tsconfig.json` file
    to the root directory of the `cypress` folder. Create a new file and name it `tsconfig.json`;
    then, write the following configuration:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The preceding code inherits the `tsconfig.json` file at the root of our Angular
    application. Then, we added `cypress` and `@testing-library/cypress` to the `tsconfig.json`
    file, which will help Cypress understand any TypeScript files in the Cypress directory.
    The array shows that we are including these TypeScript files in any level of the
    directory.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: Now that we have set up Cypress for TypeScript, let’s update the `cypress.config.ts`
    file in our Angular application.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: Updating the Cypress config file
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: What is a Cypress config file? The `cypress.config.ts` file is used to store
    any configurations for things such as environments, timeouts, folders/files, screenshots,
    videos, downloads, browsers, viewports, and more that are specific to Cypress.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: 'You are modifying the default behavior of Cypress by supplying any optional
    configurations you want to add. So, update the `cypress.config.ts` file with the
    following code:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The preceding code configures the base URL for Cypress where Angular runs. There
    is also a configuration for the video that disables the end-to-end testing recording.
    We are only using `baseUrl` and the video properties of the Cypress configuration.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we will start writing some simple Cypress tests to help
    you gain confidence in writing tests and see how easy it is to write tests in
    Cypress.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: Writing Cypress tests
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this section, we will start writing simple Cypress tests to see how fun
    and easy it is to write tests using Cypress. We will start the tests by adding
    a test attribute in an HTML tag in the authentication form. We are going to edit
    the `auth-form.component.html` file to write the `test-id` attribute. Here is
    what was changed in the `auth-form.component.html` line:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: You can see the attribute we added in the preceding code. `data-cy` is an attribute
    for the test ID that Cypress will use to target the HTML element we want to test.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we’ve added our first test ID, let’s go to the `e2e` folder inside
    the `cypress` directory and create a new file. The filename needs to contain *.cy*.
    Name the new file `anti-heroes.cy.ts` and then add the following code:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The preceding code provides the first description of our test. First, we are
    adding a reference to the Cypress types to get extra tooling using TypeScript.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: Then, we have the `describe` function, which is used for group tests. The `describe`
    function has two arguments. The first argument is a string, and it passes the
    name that the `describe` function will use. The second argument is a callback
    function that will contain all tests under the `describe` function.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: The `it` function also accepts a string for the name of the test and a callback
    function for the details of the tests. The first `it` function tests whether an
    authenticated user can see the login page if the user visits the root domain of
    the Angular app’s URL.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: '`cy` is an object where you can chain different types of commands. We are using
    the `visit` command, which allows us to write the URL we will use to navigate
    to `localhost:4200` once we run the test. `cy.url` asserts that the URL can be
    found on the login subpage. We are also testing `mat-card-title` through the `data-cy=
    "auth-title"` attribute, which has the word *Login* in this test.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: 'As you can see, the first test is easy to write. The setup for writing the
    test is also easy. But before we run our first test, let’s create a user for our
    test:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.5 – A user for E2E testing (Angular app login page)](img/B18159_15_05.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
- en: Figure 15.5 – A user for E2E testing (Angular app login page)
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: In *Figure 15**.5*, we are creating a user for our E2E testing. The `user@cypress.com`
    username is just a made-up email address you are not required to use. You can
    use whatever email address you want. We will use the `user@cypress.com` user to
    log into our app and use the web app like a real user would use our application.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, go to your Terminal and run the `npm run test` command to run Angular’s
    E2E tests. Go to the **Specs** section of the Cypress dashboard to find the list
    of **E2E specs**:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.6 – E2E specs](img/B18159_15_06.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
- en: Figure 15.6 – E2E specs
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: '*Figure 15**.6* shows the list of **E2E specs** files for testing. Here, there
    is a single spec file; this is the one we created earlier.'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the **anti-heroes** spec to run the test we created and see whether
    it is passing or failing:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.7 – Passing test](img/B18159_15_07.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
- en: Figure 15.7 – Passing test
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '*Figure 15**.7* shows that the two asserts we wrote in our test are passing.
    This means that the login subpage is where the unauthenticated user was directed
    after landing on the root domain page. The passing test also tells us that the
    title of the form the user saw was *Login* and not *Register*.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
- en: If you change `should("contain", "Login");` to `should("contain", "Register");`,
    the test will fail, which is an indicator that the test is accurate and that it
    is not just passing anything we write in the test.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: With that, we have finished writing a simple E2E test using Cypress and saw
    that our tests are passing. In the next section, we will mock HTTP responses and
    intercept HTTP requests that our Angular application sends so that we no longer
    need the backend application to run these tests.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: Mocking HTTP responses and intercepting HTTP requests
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Mocking tests** can help us isolate and focus on tests and not on the state
    of external dependencies or behavior. In this section, we will mock the HTTP responses
    of our server and intercept the HTTP requests of our Angular application for testing.
    We are going to intercept the HTTP requests so that we can send fake responses
    to Angular and not pollute our dev database.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: We will start by adding a new file to the root of the `cypress` directory. Name
    the file `global.d.ts`. The `global.d.ts` file, also known as **global libraries**,
    provides a way to make interfaces and types globally available in our TypeScript
    code.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: 'After creating the `global.d.ts` file, write the following code inside it:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The preceding code allows us to use custom chainable commands, which will give
    us IntelliSense whenever we hit the dot after writing *cy*.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: Now that we’ve added `global.d.ts`, let’s install a library that can generate
    a unique universal ID, also known as a **UUID**, and use it as a temporary ID
    for a fake object we will create to respond to Angular’s HTTP request.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: 'The following `npm` command will install an `npm` library called `uuid` to
    help us generate the UUID we need:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'We also need the types for the `uuid` library we installed:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The preceding `npm` command will install the `uuid` TypeScript types.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, we need a file for the fixtures in our Cypress test. A **fixture** is
    the fixed state of an object or array that’s used as a baseline for running tests:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: Go to the `fixtures` folder inside the `cypress` directory in your application.
    Create two JSON files and name them `anti-heroes.json` and `user.json`.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Copy the content of the file from [https://github.com/PacktPublishing/Spring-Boot-and-Angular/blob/main/Chapter-15/superheroes/cypress/fixtures/anti-heroes.json](https://github.com/PacktPublishing/Spring-Boot-and-Angular/blob/main/Chapter-15/superheroes/cypress/fixtures/anti-heroes.json)
    and paste it into the `anti-heroes.json` file.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, copy the content of the file from [https://github.com/PacktPublishing/Spring-Boot-and-Angular/blob/main/Chapter-15/superheroes/cypress/fixtures/user.json](https://github.com/PacktPublishing/Spring-Boot-and-Angular/blob/main/Chapter-15/superheroes/cypress/fixtures/user.json)
    and paste it into the `user.json` file.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The preceding JSON objects are objects that we are going to use in our fixtures.
    We will use these as response bodies to send mock responses.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let’s update the `commands.ts` file in the `support` folder inside the
    `cypress` directory. Use the following code:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '[PRE22]'
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[PRE23]'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[PRE24]'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[PRE25]'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[PRE26]'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '[PRE28]'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[PRE29]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '[PRE30]'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: The preceding code implements the custom chainable commands we wrote inside
    the `global.d.ts` file. `getCommand`, `deleteCommand`, and `postCommand` require
    URLs as strings to intercept any HTTP requests. The custom chainable commands
    require a state, which will be a fixture.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: Now, let’s write more tests in `anti-heroes.cy.ts`. But first, we must add more
    test IDs for the tests we write.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Go to `auth-form.component.html` and update the code with the following code:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: The preceding code contains four `data-cy` attributes that will be used as targeted
    selectors. You can find the `data-cy` selectors in the `mat-card-title`, inputs,
    and `button` elements.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: 'The next file to update will be `navbar.component.html`. Use the following
    code to update the file:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[PRE33]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '[PRE34]'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[PRE35]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[PRE36]'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: The preceding code contains one `data-cy` attribute, which you can find in the
    `span` element.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, we need to update the `anti-hero-list-component.html` file:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE37]'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '[PRE38]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '[PRE39]'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[PRE40]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '[PRE41]'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '[PRE42]'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[PRE43]'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '[PRE44]'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: '[PRE45]'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '[PRE46]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '[PRE47]'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: '[PRE48]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '[PRE49]'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '[PRE50]'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '[PRE51]'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '[PRE52]'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '[PRE53]'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[PRE54]'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '[PRE55]'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '[PRE56]'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '[PRE57]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '[PRE58]'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '[PRE59]'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: '[PRE60]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '[PRE61]'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: '[PRE62]'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '[PRE63]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE63]'
- en: '[PRE64]'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '[PRE65]'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '[PRE66]'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '[PRE67]'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: '[PRE68]'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '[PRE69]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE69]'
- en: The preceding code contains three `data-cy` attributes, which you can find in
    the `td` element, and two `button` elements.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, we must edit the `anti-hero-command-bar.component.html` file using the
    following code:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE70]'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '[PRE71]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '[PRE72]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '[PRE73]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '[PRE74]'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '[PRE75]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE75]'
- en: '[PRE76]'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '[PRE77]'
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE77]'
- en: '[PRE78]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE78]'
- en: '[PRE79]'
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: '[PRE80]'
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: '[PRE81]'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE81]'
- en: '[PRE82]'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '[PRE83]'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE83]'
- en: '[PRE84]'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '[PRE85]'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE85]'
- en: '[PRE86]'
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE86]'
- en: The preceding code contains three selectors, which you can find in the `button`
    elements.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: 'The last file to update is `anti-hero-form.component.html`:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE87]'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE88]'
- en: '[PRE89]'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE89]'
- en: '[PRE90]'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE90]'
- en: '[PRE91]'
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE91]'
- en: '[PRE92]'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE92]'
- en: '[PRE93]'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE93]'
- en: '[PRE94]'
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE94]'
- en: '[PRE95]'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE95]'
- en: '[PRE96]'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE96]'
- en: '[PRE97]'
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE97]'
- en: '[PRE98]'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '[PRE99]'
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE99]'
- en: '[PRE100]'
  id: totrans-198
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE100]'
- en: '[PRE101]'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE101]'
- en: '[PRE102]'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE102]'
- en: '[PRE103]'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE103]'
- en: '[PRE104]'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE104]'
- en: '[PRE105]'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE105]'
- en: '[PRE106]'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE106]'
- en: '[PRE107]'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE107]'
- en: '[PRE108]'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE108]'
- en: '[PRE109]'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE109]'
- en: '[PRE110]'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE110]'
- en: '[PRE111]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE111]'
- en: '[PRE112]'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE112]'
- en: '[PRE113]'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE113]'
- en: '[PRE114]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE114]'
- en: '[PRE115]'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE115]'
- en: '[PRE116]'
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE116]'
- en: '[PRE117]'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE117]'
- en: '[PRE118]'
  id: totrans-216
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE118]'
- en: '[PRE119]'
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE119]'
- en: '[PRE120]'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE120]'
- en: The preceding code contains five inputs, which you can find in the `input` elements
    and the `button` element.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
- en: With that, we have added the necessary test ID attributes to the HTML elements
    we are going to test later. We will need the mentioned `data-cy` test IDs when
    we start writing tests in the `anti-heroes.cy.ts` file.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let’s start writing tests in `anti-heroes.cy.ts`. Here is the new code:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE121]'
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE121]'
- en: '[PRE122]'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE122]'
- en: '[PRE123]'
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE123]'
- en: '[PRE124]'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE124]'
- en: '[PRE125]'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE125]'
- en: '[PRE126]'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE126]'
- en: '[PRE127]'
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE127]'
- en: '[PRE128]'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE128]'
- en: '[PRE129]'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE129]'
- en: '[PRE130]'
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE130]'
- en: '[PRE131]'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE131]'
- en: '[PRE132]'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE132]'
- en: '[PRE133]'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE133]'
- en: '[PRE134]'
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE134]'
- en: '[PRE135]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE135]'
- en: '[PRE136]'
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE136]'
- en: '[PRE137]'
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE137]'
- en: '[PRE138]'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE138]'
- en: '[PRE139]'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE139]'
- en: '[PRE140]'
  id: totrans-241
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE140]'
- en: '[PRE141]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE141]'
- en: '[PRE142]'
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE142]'
- en: '[PRE143]'
  id: totrans-244
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE143]'
- en: '[PRE144]'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE144]'
- en: '[PRE145]'
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE145]'
- en: '[PRE146]'
  id: totrans-247
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE146]'
- en: '[PRE147]'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE147]'
- en: The preceding code shows a `describe` function that has two other functions
    inside it.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
- en: The first function inside the `describe` function is called `beforeEach`, which
    runs each time a test starts running. The `beforeEach` function keeps its state
    and uses it in the test. This function fits scenarios where the test has to do
    precisely the same thing that other tests will also have to do – for instance,
    going to a particular URL, logging in, and intercepting HTTP calls using custom
    chainable commands such as `getCommand` and `deleteCommand`.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
- en: The second function inside the `describe` function is called `afterEach`. The
    `afterEach` function runs every time a test ends. This function is suitable for
    cleaning up or logging out the user in the test. The `beforeEach` and `afterEach`
    functions save us a lot of repeatable code.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let’s add some tests to the `anti-heroes.cy.ts` file. Copy the following
    code and put it under the first test we wrote:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE148]'
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE148]'
- en: '[PRE149]'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE149]'
- en: '[PRE150]'
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE150]'
- en: '[PRE151]'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE151]'
- en: '[PRE152]'
  id: totrans-257
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE152]'
- en: '[PRE153]'
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE153]'
- en: '[PRE154]'
  id: totrans-259
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE154]'
- en: '[PRE155]'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE155]'
- en: '[PRE156]'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE156]'
- en: '[PRE157]'
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE157]'
- en: '[PRE158]'
  id: totrans-263
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE158]'
- en: '[PRE159]'
  id: totrans-264
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE159]'
- en: '[PRE160]'
  id: totrans-265
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE160]'
- en: '[PRE161]'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE161]'
- en: '[PRE162]'
  id: totrans-267
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE162]'
- en: '[PRE163]'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE163]'
- en: '[PRE164]'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE164]'
- en: '[PRE165]'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE165]'
- en: '[PRE166]'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE166]'
- en: '[PRE167]'
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE167]'
- en: '[PRE168]'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE168]'
- en: '[PRE169]'
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE169]'
- en: '[PRE170]'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE170]'
- en: '[PRE171]'
  id: totrans-276
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE171]'
- en: '[PRE172]'
  id: totrans-277
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE172]'
- en: '[PRE173]'
  id: totrans-278
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE173]'
- en: '[PRE174]'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE174]'
- en: The preceding code shows the tests we are going to use for Cypress. You can
    see that `fixture` needs a string, which is the name of the JSON file. The data
    from `fixture` is the parameter of the anonymous function.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
- en: We are asserting `24` because there are four elements for every object we use
    in `data-cy=" row"`, which is how we built the HTML elements on the user interface.
    There are also six objects inside the array of the `anti-heroes.json` file.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
- en: The newly added tests show how we can pick a particular object from a list or
    array of rendered UIs using the `eq` keyword and an `index` number.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
- en: The newly added tests also show how to write text into an input field by calling
    the `click` and `type` functions. Then, you can use the `postCommand` custom chainable
    command to intercept HTTP POST requests.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
- en: 'Lastly, before running the test, make Cypress skip the simple test we wrote
    earlier by calling `skip`, like so:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE175]'
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE175]'
- en: The preceding code changed the simple test from *run* to *don’t run*.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
- en: The entire code for the `anti-heroes.cy.ts` spec file can be found at [https://github.com/PacktPublishing/Spring-Boot-and-Angular/blob/main/Chapter-15/superheroes/cypress/e2e/anti-heroes.cy.ts](https://github.com/PacktPublishing/Spring-Boot-and-Angular/blob/main/Chapter-15/superheroes/cypress/e2e/anti-heroes.cy.ts).
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, we can run the `anti-heroes.cs.ts` spec file to see whether everything
    will pass, as shown in the following figure:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.8 – Passing tests](img/B18159_15_08.jpg)'
  id: totrans-289
  prefs: []
  type: TYPE_IMG
- en: Figure 15.8 – Passing tests
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
- en: '*Figure 15**.8* shows that the **should display login page** test was skipped,
    while the rest of the tests passed.'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
- en: 'You can see what is happening inside the `beforeEach` function, like so:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 15.9 – BEFORE EACH DOM snapshot](img/B18159_15_09.jpg)'
  id: totrans-293
  prefs: []
  type: TYPE_IMG
- en: Figure 15.9 – BEFORE EACH DOM snapshot
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
- en: '*Figure 15**.9* shows the steps that were taken by the `beforeEach` function.
    The steps are DOM snapshots of the web application.'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s also check the test body of the `anti-heroes.cy.ts` spec file. You should
    see the following information:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
- en: "![Figure 15.10 – TEST BODY DOM snapshot\uFEFF](img/B18159_15_10.jpg)"
  id: totrans-297
  prefs: []
  type: TYPE_IMG
- en: Figure 15.10 – TEST BODY DOM snapshot
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.10 – 测试主体DOM快照
- en: '*Figure 15**.10* shows the steps that were taken in the test body. These are
    the actions that you wrote in the `anti-heroes.cy.ts` file.'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: '*图15.10* 展示了在测试主体中采取的步骤。这些是你写在`anti-heroes.cy.ts`文件中的操作。'
- en: 'We can also see what happened inside the `afterEach` function. You should be
    able to see the following output:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以看到`afterEach`函数内部发生了什么。你应该能看到以下输出：
- en: '![Figure 15.11 – AFTER EACH DOM snapshot](img/B18159_15_11.jpg)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![图15.11 – 每次DOM快照之后](img/B18159_15_11.jpg)'
- en: Figure 15.11 – AFTER EACH DOM snapshot
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.11 – 每次DOM快照之后
- en: '*Figure 15**.11* shows the steps inside the `afterEach` function. Here, you
    can see that the `afterEach` function logged out and redirected the user to the
    application’s login page.'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: '*图15.11* 展示了`afterEach`函数内部的步骤。在这里，你可以看到`afterEach`函数进行了注销并将用户重定向到应用程序的登录页面。'
- en: And that’s how you write Cypress tests. Now, let’s summarize what was covered
    in this chapter.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是编写Cypress测试的方法。现在，让我们总结一下本章所涵盖的内容。
- en: Summary
  id: totrans-305
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: With this, you have arrived at the end of this chapter. First, you learned what
    Cypress is and how easy it is to set up and write an end-to-end test. You also
    learned how to intercept HTTP requests and mock HTTP responses.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这些，你已经到达了本章的结尾。首先，你学习了Cypress是什么，以及如何轻松地设置和编写端到端测试。你还学习了如何拦截HTTP请求和模拟HTTP响应。
- en: In the next chapter, you will learn how to package both frontend and backend
    applications into a single executable JAR file.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将学习如何将前端和后端应用程序打包成一个单一的可执行JAR文件。
- en: 'Part 4: Deployment'
  id: totrans-308
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四部分：部署
- en: 'This part demonstrates the modern way of shipping backend and frontend applications.
    The following chapters are covered in this part:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 本部分演示了将后端和前端应用程序以现代方式交付的方法。本部分涵盖了以下章节：
- en: '[*Chapter 16*](B18159_16.xhtml#_idTextAnchor303), *Packaging Backend and Frontend
    with Maven*'
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第16章*](B18159_16.xhtml#_idTextAnchor303)，*使用Maven打包后端和前端*'
- en: '[*Chapter 17*](B18159_17.xhtml#_idTextAnchor315), *Deploying Spring Boot and
    the Angular App*'
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第17章*](B18159_17.xhtml#_idTextAnchor315)，*部署Spring Boot和Angular应用程序*'
