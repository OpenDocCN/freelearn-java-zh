<html><head></head><body><div class="chapter" title="Chapter&#xA0;11.&#xA0;Troubleshooting"><div class="titlepage"><div><div><h1 class="title"><a id="ch11"/>Chapter 11. Troubleshooting</h1></div></div></div><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Navigating through the process workflow</li><li class="listitem" style="list-style-type: disc">Submitting a defect to the OpenJDK bug systems</li><li class="listitem" style="list-style-type: disc">Creating a patch using NetBeans</li><li class="listitem" style="list-style-type: disc">Creating a code review</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec88"/>Introduction</h1></div></div></div><p>OpenJDK's openness is its most valuable feature in our fast-paced world. We can be sure that it will never vanish and be forgotten when it is needed. If its support is discontinued, we can support it ourselves. We could fix bugs independently, since the code is open.</p><p>However, OpenJDK, as well as the Oracle Java implementation, still contains a lot of issues. Some of them are security issues and should be fixed as soon as possible. Some of the issues may be almost invisible or even valuable only for a virtually nonexistent percent of customers. They might never be fixed in production JDK, but everyone has an opportunity to try to do it for himself/herself.</p><p>OpenJDK in the past used a Bugzilla bug tracker to track bugs. Bugzilla is a well-known, but morally outdated project, initially written in 1998 by Terry Weissman. It was open source from the beginning, and it is used even now by thousands of people around the world. It is very simple and easy to use.</p><p>However, some time ago, the OpenJDK foundation decided to switch from Bugzilla to JIRA, a proprietary but powerful bug tracking system mostly written in Java. JIRA provides support for different types of workflow, such as Scrum, Kanban, and custom Agile workflows, as well as incorporating all the Bugzilla features.</p><p>Sometimes there are opportunities to enlarge the OpenJDK functionality and create a fully-functioning JSR prototype to contribute to OpenJDK development with great benefits to your projects. Sometimes you need to switch to other implementations, such as GNU classpath, or even merge some solutions into your specific version.</p><p>In this chapter, we will see how the process workflow is organized, what steps are needed to be followed, and how to cope with the community process. Also, we will see how to submit a bug, and create a patch on it.</p></div></div>
<div class="section" title="Navigating through the process workflow"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec89"/>Navigating through the process workflow</h1></div></div></div><p>The knowledge<a id="id545" class="indexterm"/> of process workflows, and of <a id="id546" class="indexterm"/>how things are done in complex projects like OpenJDK, is critical for a developer. In this recipe, we will explain how things are done while contributing to OpenJDK. We will explain how the work is organized, and how the team co-operates.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec288"/>Getting ready</h2></div></div></div><p>We will need an Internet connection and a browser.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec289"/>How to do it...</h2></div></div></div><p>We will go through the OpenJDK process workflow and see what to do to contribute to OpenJDK. There are a few initial steps to be followed before you start with the workflow:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Firstly, you need to become a contributor. To do so, you need to sign an Oracle Contributor Agreement, and e-mail it to Oracle.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>You may find these links useful:</p><p>How to become a contributor at <a class="ulink" href="http://openjdk.java.net/contribute/">http://openjdk.java.net/contribute/</a></p><p>Know what is discussed at <a class="ulink" href="http://mail.openjdk.java.net/mailman/listinfo">http://mail.openjdk.java.net/mailman/listinfo</a></p></div></div></li><li class="listitem">Then you need to find something interesting to work with.</li><li class="listitem">Now, you are free to discuss and submit patches using the JIRA bug tracking system.</li></ol></div><p>Let's suppose that you've found a bug:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">When the bug is found, check whether it's already in JIRA.</li><li class="listitem">Click on <span class="strong"><strong>Issues</strong></span> and search for issues. You will see the following screen:<div class="mediaobject"><img src="graphics/8405OT_11_01.jpg" alt="How to do it..."/></div></li><li class="listitem">In the <a id="id547" class="indexterm"/>highlighted section, you<a id="id548" class="indexterm"/> can see a filter panel. Use it in combination with the keyword search. Also, notice the <span class="strong"><strong>Switch to Advanced</strong></span> link in the right corner.</li><li class="listitem">If the bug is not present already in JIRA, create a JIRA issue.<div class="tip" title="Tip" style=""><div class="inner"><h3 class="title"><a id="tip20"/>Tip</h3><p>JIRA<a id="id549" class="indexterm"/> is a commonly used <a id="id550" class="indexterm"/>bug tracker tool. You can find how to add issues at <a class="ulink" href="https://confluence.atlassian.com/display/JIRA/">https://confluence.atlassian.com/display/JIRA/</a>.</p></div></div></li><li class="listitem">If you don't know how to resolve the issue, this is the successful ending of your involvement here. The OpenJDK team will be grateful to know all usable information about this problem. If you have anything to add, you are welcome to post information in comments.</li><li class="listitem">However, if you feel that you can resolve the issue, comment on it and indicate that you are working on the solution. In some circumstances, you need to wait until the JIRA ticket is assigned to you. Individual workflows use different approaches in this regards.</li><li class="listitem">Then, resolve the solution and create the patch.<p>The patch creating process is described in the <span class="emphasis"><em>Creating a patch using NetBeans</em></span> recipe in this chapter. you will also find some useful information about building, debugging, and editing OpenJDK code in <a class="link" href="ch08.html" title="Chapter 8. Hacking OpenJDK">Chapter 8</a>, <span class="emphasis"><em>Hacking OpenJDK</em></span>.</p></li><li class="listitem">If you are a committer (for example, you have the commit right to the OpenJDK repository), you are free to create a code review using webrev (use information<a id="id551" class="indexterm"/> from <a class="ulink" href="https://bitbucket.org/adoptopenjdk/betterrev">https://bitbucket.org/adoptopenjdk/betterrev</a> to learn how to create a code review). When it is approved, you may commit your changes to the repository and mark your issue as resolved.</li><li class="listitem">If you<a id="id552" class="indexterm"/> are not a committer, you can also create a webrev review, but the commit process differs slightly. You might push your code changes to the Bitbucket repository along with a <code class="literal">pull</code> request. It is described in detail in the <span class="emphasis"><em>Creating a code review</em></span> recipe. Read more about the OpenJDK testing process in <a class="link" href="ch09.html" title="Chapter 9. Testing OpenJDK">Chapter 9</a>, <span class="emphasis"><em>Testing OpenJDK</em></span>.</li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec290"/>How it works…</h2></div></div></div><p>OpenJDK has an established workflow, which can differ from one project to another. In all cases, though there are rules of teamwork, one should follow them in order to make the work productive.</p><p>Under the hood of this process, there are other team members whose function is to review and test the changes.</p></div></div>
<div class="section" title="Submitting a defect to the OpenJDK bug systems"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec90"/>Submitting a defect to the OpenJDK bug systems</h1></div></div></div><p>This<a id="id553" class="indexterm"/> recipe will show you how<a id="id554" class="indexterm"/> to submit a defect to OpenJDK bug systems. This <a id="id555" class="indexterm"/>bug system is used by people who do not have developer access to OpenJDK. For OpenJDK developers, there is JIRA.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec291"/>How to do it...</h2></div></div></div><p>We will consider the necessary steps to submit a defect to OpenJDK.</p><p>First, we will describe some prerequisites to fill a bug report:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, do a quick search for bugs. It is possible that a similar or even identical bug has already been created. Even if you have something more to say on the subject, please do it in the existing topic without creating a new one.</li><li class="listitem">Then, think about the defect's reproducibility. There is a need to describe in detail how to reproduce your defect and cases in which it can and cannot be reproduced.</li><li class="listitem">Also, you can make and add logs, traces, and other debug information.<div class="tip" title="Tip" style=""><div class="inner"><h3 class="title"><a id="tip21"/>Tip</h3><p>Please include the fullest possible logs, without cutouts. Even one string in the log may be critical.</p></div></div></li><li class="listitem">Also, you <a id="id556" class="indexterm"/>may include screenshots along with your logs, especially when you are describing an UI issue.</li><li class="listitem">Try to include as much system information as possible. For example, for the <span class="emphasis"><em>Sumatra</em></span> project, even your graphics card driver version may be helpful.</li></ol></div><p>If we <a id="id557" class="indexterm"/>need <a id="id558" class="indexterm"/>to report an issue without referring to code pieces to describe it generally and not specifically, we can fill the standard bug report as shown here:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Fill the fields as shown in the following screenshot:<div class="mediaobject"><img src="graphics/8405OT_11_02.jpg" alt="How to do it..."/></div></li><li class="listitem">Then click on <span class="strong"><strong>Continue</strong></span>.</li></ol></div><p>You will then be required to provide some information to receive the feedback from the team:</p><div class="mediaobject"><img src="graphics/8405OT_11_03.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec292"/>How it works…</h2></div></div></div><p>The OpenJDK project <a id="id559" class="indexterm"/>has a bug report <a id="id560" class="indexterm"/>system for non-developers to which you can submit your changes where it's convenient. However, it <a id="id561" class="indexterm"/>has a JIRA bug tracker, which is used by developers to work in more complex ways with various bugs.</p></div></div>
<div class="section" title="Creating a patch using NetBeans"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec91"/>Creating a patch using NetBeans</h1></div></div></div><p>This<a id="id562" class="indexterm"/> section<a id="id563" class="indexterm"/> will show <a id="id564" class="indexterm"/>you how to create a patch of the OpenJDK project using NetBeans.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec293"/>Getting ready</h2></div></div></div><p>You will need a configured development environment. It is preferable that you use NetBeans since NetBeans is a standard tool for developing and debugging OpenJDK.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec294"/>How to do it...</h2></div></div></div><p>We will do a simple patch creation with Mercurial and NetBeans by following these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the OpenJDK project with NetBeans.</li><li class="listitem">Make some changes in the project code as shown:<div class="mediaobject"><img src="graphics/8405OT_11_04.jpg" alt="How to do it..."/></div></li><li class="listitem">Then, follow<a id="id565" class="indexterm"/> the chain <a id="id566" class="indexterm"/>of context menus, as shown in the<a id="id567" class="indexterm"/> preceding screenshot.</li><li class="listitem">Click on the <span class="strong"><strong>OK</strong></span> button.<div class="mediaobject"><img src="graphics/8405OT_11_05.jpg" alt="How to do it..."/></div></li><li class="listitem">Your <a id="id568" class="indexterm"/>patch will be saved to the specified directory. Later, you<a id="id569" class="indexterm"/> can apply patches using the <span class="strong"><strong>Apply Diff Patch</strong></span> item in the Mercurial context menu.</li></ol></div></div><div class="section" title="How it works"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec295"/>How it works</h2></div></div></div><p>NetBeans calls <a id="id570" class="indexterm"/>a program that exports a diff (your uncommitted changes versus the head revision in the repository) to a file that can be read and applied when needed.</p></div><div class="section" title="See also..."><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec296"/>See also...</h2></div></div></div><p>Also, diffs between different divisions can also be exported. To do that, simply click on the highlighted item:</p><div class="mediaobject"><img src="graphics/8405OT_11_06.jpg" alt="See also..."/></div></div></div>
<div class="section" title="Creating a code review"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec92"/>Creating a code review</h1></div></div></div><p>OpenJDK uses<a id="id571" class="indexterm"/> webrev as the code review tool. The process <a id="id572" class="indexterm"/>of creating a code review and handling lies on the shoulders of the AdoptOpenJDK community, which developed a web tool called <a id="id573" class="indexterm"/>
<span class="strong"><strong>Betterrev</strong></span>. Review Board along with the Mercurial plugin can be used as well. It automatically generates code reviews, synchronizes with Oracle repository, and performs other useful tasks.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec297"/>Getting ready</h2></div></div></div><p>We will need a computer capable of building OpenJDK and which can handle a large amount of code. Also, we will need a development environment installed, as described in <a class="link" href="ch08.html" title="Chapter 8. Hacking OpenJDK">Chapter 8</a>, <span class="emphasis"><em>Hacking OpenJDK</em></span>. We will also need Internet access.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec298"/>How to do it...</h2></div></div></div><p>We will create a code review using the Betterrev tool, by following the given steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, let's clone a repository from Bitbucket.</li><li class="listitem">Go to the Betterrev Bitbucket at <a class="ulink" href="https://bitbucket.org/adoptopenjdk/betterrev/src">https://bitbucket.org/adoptopenjdk/betterrev/src</a>:<div class="mediaobject"><img src="graphics/8405OT_11_07.jpg" alt="How to do it..."/></div></li><li class="listitem">Fork it, using the highlighted button:<div class="mediaobject"><img src="graphics/8405OT_11_08.jpg" alt="How to do it..."/></div></li><li class="listitem">Specify the <a id="id574" class="indexterm"/>repository name in the <span class="strong"><strong>Name</strong></span> field, and add a description if needed.</li><li class="listitem">Check<a id="id575" class="indexterm"/> the <span class="strong"><strong>This is a private repository</strong></span> checkbox if you want to make your repository private.</li><li class="listitem">Click on the <span class="strong"><strong>Fork repository</strong></span> button.</li><li class="listitem">You will see the following screen for a while. It will take some time, but don't worry, all is going well.<div class="mediaobject"><img src="graphics/8405OT_11_09.jpg" alt="How to do it..."/></div></li><li class="listitem">Make changes that has to be reviewed in the code.</li><li class="listitem">Commit them to your local repository.</li><li class="listitem">Perform a pull request as shown:<div class="mediaobject"><img src="graphics/8405OT_11_10.jpg" alt="How to do it..."/></div></li></ol></div><p>Betterrev will <a id="id576" class="indexterm"/>automatically<a id="id577" class="indexterm"/> generate a review for your issue.</p></div></div></body></html>