<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Displaying Information Using Web Pages</h1>
                </header>
            
            <article>
                
<p class="mce-root">In this chapter, we will learn about template engines and how they are integrated and used in Spring Boot 2. After that, we will cover how Thymeleaf, a very commonly used template engine, is used to build web pages displaying dynamic data from an<br/>
application.</p>
<p class="mce-root">A template engine is a composition framework, which allows us to integrate dynamic information and building blocks, allowing developers to create page fragments independently. These tiles are then assembled together when running the application or rendering the page. Spring is well integrated with template engines such as Thymeleaf, Groovy Templates, Freemarker, and Mustache. However, we will be focusing on Thymeleaf, as it is commonly used and allows us to comfortably work with HTML pages used for web applications.</p>
<p>By the end of this chapter, you will be able to:</p>
<ul>
<li>Identify how the Thymeleaf template engine works</li>
<li>Explain the basic syntax of a template</li>
<li>Define the most important elements</li>
<li>Explain how to iterate through lists and conditionally show parts of a page</li>
<li>Build web pages using Thymeleaf to display dynamic data from an application</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">HTML Templating with Thymeleaf</h1>
                </header>
            
            <article>
                
<p>We have already been discussing template engines in the previous chapter. We will now take a closer look at how they work.</p>
<p><strong>Thymeleaf</strong> is a server-side template engine that became very popular for Spring Web MVC applications. It's currently available in its third major version. But Thymeleaf goes far beyond the scope of regular web applications. It is also used to generate other formats, such as PDF or XML. It's even possible to incorporate the template engine into an application to not only be used by developers but also end users of an application.</p>
<p>What makes Thymeleaf special is the ability to write natural HTML templates that can be displayed in a web browser without the need to run the application. This allows for very short development cycles when designing the UI of an application. The downside of this is that you may have to add some additional HTML attributes only for the sake of displaying the template at design time. You can however decide when the additional attributes are required and when you can just leave them out.</p>
<p>Other popular template engines are <strong>Java Server Pages</strong> (<strong>JSP</strong>) and <strong>FreeMarker</strong>. However, these alternatives don't allow for an easy template development without a running engine.</p>
<p>HTML is used by a web browser to render a page. It mainly consists of tags that that are enclosed in angle brackets (for example <kbd>&lt;div&gt;</kbd>). There is a starting and an ending tag (<kbd>&lt;div&gt;...&lt;/div&gt;</kbd>). The tags may also contain additional attributes (<kbd>div class="important"&gt;</kbd>, where class is the attribute).</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Templating Engine</h1>
                </header>
            
            <article>
                
<p>The following diagram shows a typical relationship among various components:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/7bfc395b-66c8-4126-989a-45c5e33d40ea.png" style="width:15.75em;height:20.50em;" width="491" height="640"/></div>
<p>In the case of Thymeleaf, the templates are written using regular XML, XHTML, or HTML5 files. These files can be previewed in a browser without the need for a running template engine. For Thymeleaf to do its work, you add special attributes to the HTML, tags that usually start with <kbd>th</kbd>:</p>
<pre>&lt;p th:text="${welcome}"&gt;This will be replaced!&lt;/p&gt;</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Integrating Thymeleaf Into a Spring Boot Application</h1>
                </header>
            
            <article>
                
<p>To integration Thymeleaf in a Spring Boot application, you add the following dependency to your Maven <kbd>pom.xml</kbd> file:</p>
<pre>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;<br/>&lt;/dependency&gt;</pre>
<p>This will include Thymeleaf Version 3 in your project. Since Spring Boot is taking care of the configuration for you, it expects the templates in the <kbd>src/main/resources/templates</kbd> folder. When you later return the name of a view from your controller method, Spring looks in this folder for a file with the name of the view and a .html extension. For example, a view named welcome is expected to be in the <kbd>src/main/resources/templates/welcome.html</kbd> file.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">A Basic Thymeleaf Template</h1>
                </header>
            
            <article>
                
<p>The following code is showing a simple Thymeleaf template:</p>
<pre>&lt;!DOCTYPE html&gt;<br/>&lt;html &gt;<br/><br/>  &lt;head&gt;<br/>    &lt;title&gt;Welcome to BlogMania&lt;/title&gt;<br/>  &lt;/head&gt;<br/><br/>  &lt;body&gt;<br/>    &lt;p th:text="${welcome}"&gt;This will be replaced!&lt;/p&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</pre>
<p class="mce-root"/>
<p>The second part is what makes this file a template:</p>
<pre>&lt;html &gt;</pre>
<p>This defines what is called a namespace for Thymeleaf and enables the use of <kbd>th:</kbd> as a prefix to mark attributes that are specific to Thymeleaf.</p>
<p>You will find a lot of these attributes, directives, and expressions in a template. They allow you to output content of the model, conditionally display parts of the view, iterate over lists, or execute functions.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Externalizing Text</h1>
                </header>
            
            <article>
                
<p>In some cases, you may want to have text outside your template. This is called <strong>externalized text fragments</strong>. You are using Java properties files to store these fragments. In the case of a Spring Boot application, you create a file called <kbd>messages.properties</kbd> in the <kbd>src/main/resources</kbd> folder.</p>
<p>Since this is a regular properties file, you add your text as properties:</p>
<pre>welcome.title=Welcome to BlogMania!</pre>
<p>In the Thymeleaf template, you insert the text by using a <kbd>#{...}</kbd> expression:</p>
<pre>&lt;h2 th:text="#{welcome.title}"&gt;Welcome to BlogMania!&lt;/h2&gt;</pre>
<p>You will find the complete sample in the code repository.</p>
<div class="packt_infobox"><br/>
It is possible to include placeholder or parameters in an externalized string. These parts of the message get replaced by model attributes or other dynamic values when the page is rendered. More information about this feature can be found in the Thymeleaf documentation at <a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#messages">https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#messages</a>.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Create Context Aware URLs</h1>
                </header>
            
            <article>
                
<p>The Java Servlet specification includes what is known as <strong>servlet context</strong>. When configured, a servlet context is a part of a URI that will be added in front of each mapping. For example, when setting the servlet context to <kbd>/blogmania</kbd>, the mapping <kbd>/blogposts</kbd> will become <kbd>/blogmania/blogposts</kbd>.</p>
<p>In Spring Boot, you set a context path in the <kbd>application.properties</kbd> file:</p>
<p><kbd>server.servlet.contextPath=/blogmania</kbd></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Statements in Thymeleaf Templates</h1>
                </header>
            
            <article>
                
<p>Beside the expressions to include externalized text or creating URLs, Thymeleaf offers a lot more statements and expressions. They can be used in any Thymeleaf attribute that is prefixed with the namespace <kbd>th:</kbd> as defined earlier.</p>
<p>The following table lists a few of the most interesting statements:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"> <img src="Images/c2bac19a-84d3-4a31-beb8-f18211ea13e1.png" style="width:45.00em;height:30.92em;" width="762" height="523"/></div>
<p class="mce-root"/>
<p>An example combining a lot of the statements from this table is as follows:</p>
<pre>'User is of kind ' + (${user.isEditor()} ? 'Editor' : (${user.<br/>kind} ?: 'Unknown'))</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Bootstrapping and Templating With Thymeleaf</h1>
                </header>
            
            <article>
                
<p>The aim is to implement bootstrapping of Thymeleaf and make first contact with Thymeleaf templating. The steps for completion are as follows:</p>
<ol>
<li>Open the project folder in <a href="https://bit.ly/2Og1oMZ">https://bit.ly/2Og1oMZ</a>.</li>
<li>Start the application with <kbd>mvnw spring-boot:run</kbd>.</li>
<li>Navigate your browser to <kbd>http://localhost:8080</kbd> to see a page containing a title.</li>
<li>In your IDE or text editor, add the following line to the file: <kbd>src/main/resources/templates/welcome.html&lt;p th:text="#{welcome.message}"&gt;There goes the message!&lt;/p&gt;</kbd>.</li>
<li>Add another line to the file:<br/>
<kbd>3 + 4 = &lt;span th:text="3 + 4"&gt;Result of the calculation&lt;/span&gt;</kbd>.</li>
<li>Stop the application and start it again using the previous command.</li>
<li>Reload the page to view the following output:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/4a0f22b6-04c4-41e2-b7c5-488d9bd69d38.png" style="width:30.42em;height:17.58em;" width="397" height="229"/></div>
<p>With this sub-section, you have implemented bootstrapping and the templating procedure in Thymeleaf.</p>
<div class="packt_infobox"><br/>
Go to <a href="https://bit.ly/2Og1oMZ">https://bit.ly/2Og1oMZ</a> to access the <kbd>exercise-first-thymeleaf/</kbd> folder.<br/>
Go to <a href="https://bit.ly/2CP8dnd">https://bit.ly/2CP8dnd</a> to access the code for the <kbd>ExternalizedTextApplicationTests.java</kbd> file.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Displaying Data Using a Model and Data Binding</h1>
                </header>
            
            <article>
                
<p class="mce-root"><strong>Data Binding</strong> deals with binding together information from two separate data sources and to keep them in sync. Data model instances use the required methods to set or retrieve data from a server, and reflect changes between two data sources. </p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How Spring Web MVC Handles the Model</h1>
                </header>
            
            <article>
                
<p>The Thymeleaf engine we have just been looking at is responsible for handling the view part of the MVC pattern. The model, which is another aspect of this pattern, is handled by the Spring MVC framework. This includes creating and initializing attributes of the model and passing it between the view and the controller. This is different than, for example, Java Server Faces, where no distinct model is available but the components that render the view must access the attributes of the session or request.</p>
<p>The model itself consists of one or more <strong>named attributes</strong>. A class that is commonly used in Spring MVC applications is the <kbd>org.springframework.ui.Model</kbd> class. It is similar to a map, which means it is where you associate the attribute with its name. The name is later used to reference attributes from the model while rendering the view.</p>
<p>For example, there could be an attribute named <kbd>blogPost</kbd> referencing an instance of a <kbd>BlogPost</kbd> class that by itself contains information about the post that should be displayed by the view:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/c1c7be77-15e9-4d15-a2cc-3ba276ad0e0d.png" style="width:25.00em;height:15.75em;" width="802" height="504"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Model-View Interaction</h1>
                </header>
            
            <article>
                
<p>The following diagram shows a typical relationship among various components:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/1fcab629-425e-45e4-b894-0dbd028d0545.png" style="width:16.33em;height:13.08em;" width="637" height="510"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Passing the Model as a Parameter to a Handler Method</h1>
                </header>
            
            <article>
                
<p>To add arbitrary objects to the model, you can declare a method parameter in a handling method that is of the type of <kbd>org.springframework.ui.Model</kbd>. When a request is handled by Spring MVC, an instance is created and provided to the method.</p>
<p>Look at the following code snippet that is taken from a class that you can find in the code files at <a href="https://bit.ly/2OkI7ci">https://bit.ly/2OkI7ci</a><a href="https://bit.ly/2OkI7ci">:</a></p>
<pre>@GetMapping("/blogposts")<br/>public String renderBlogPostList(Model model) {<br/>    List&lt;BlogPost&gt; blogPosts =<br/>                   blogPostService.findAllBlogPosts();<br/>    model.addAttribute("blogPosts", blogPosts);<br/>    return "blogposts/list";<br/>}</pre>
<p>The <kbd>@GetMapping</kbd> annotation maps this method the <kbd>/blogpost</kbd> URL.</p>
<p>An instance of the <kbd>org.springframework.ui.Model</kbd> class is passed to the method as a parameter.</p>
<p>All blog posts are retrieved using the <kbd>findAllBlogPosts()</kbd> method.</p>
<p>The list of blog posts is added to the model and associated with the name <kbd>blogPosts</kbd>.</p>
<p>The name of the view to be rendered is returned. In this case, the view is called <kbd>blogposts/list</kbd>.</p>
<p>Use the <kbd>@ModelAttribute</kbd> to pass model attributes as method parameters.</p>
<p>In some cases, you may only require a few model attributes in a handling method. For this case, Spring allows you to annotate the parameters of methods with a <kbd>@ModelAttribute</kbd> annotation that also contains the attribute name. Spring will then try to get an existing attribute with the given name from the model. If the attribute cannot be found, it will be created.</p>
<p>Whenever an attribute is initialized and added to the model, the same instance will be accessible throughout the rest of the request for the given name. This means that the attributes are also available inside a template when the view is rendered:</p>
<pre>@GetMapping("/blogposts/new")<br/>public String initNewBlogPost(<br/>              @ModelAttribute("blogPost") BlogPost blogPost<br/>) {<br/>    blogPost.setPublicationDate(LocalDateTime.now());<br/>    return "blogposts/edit";<br/>}</pre>
<p>In this example, Spring makes sure that an attribute named <kbd>blogPost</kbd> is associated with the model and then passes the <kbd>blogPost</kbd> to the handling method, where it will be manipulated. Finally, the view named <kbd>blogposts/edit</kbd> is rendered.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Returning Model Attributes from a Controller Method</h1>
                </header>
            
            <article>
                
<p>Another way of binding attributes to the model is simply by returning them from a controller method. Any types of object can be returned. However, some of them have a special meaning and will be handled appropriately.</p>
<p>When returning instances of <kbd>java.util.Map</kbd> or <kbd>org.springframework.ui.Model</kbd>, all of their attributes will be added to an existing model.</p>
<p>Any arbitrary object that is not a String will be added to the model. The name is determined either by the name of the return type or the name given in the <kbd>@ModelAttribute</kbd> annotation, if present.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using @ModelAttribute to Initialize Model Attributes</h1>
                </header>
            
            <article>
                
<p>Any method inside a controller class that is annotated with the <kbd>@ModelAttribute</kbd> annotation is called before the actual request - handling method in the same controller. It can access an instance of the model passed in as a parameter, return a model attribute as described previously, or even combine both methods.</p>
<p>Take a look at the following code example:</p>
<pre>@ModelAttribute<br/>public void addDefaultAttributes(Model model) {<br/>    int allPostsCount = blogPostService.numberOfBlogPosts();<br/>    model.addAttribute("allPostsCount", allPostsCount);<br/>}</pre>
<p>This method will add the number of all posts as reported by the <kbd>numBlogPosts()</kbd> method for any request that is handled by the controller class.</p>
<p>You can even use <kbd>@PathParam</kbd> and similar directives if you require access to such values. For example, this can be useful to query the database.</p>
<div class="packt_tip"><br/>
Using an annotated parameter allows you to pick up only certain attributes that may have been initialized elsewhere. It also enables a handling method to clearly express its purpose. Finally, the controller method doesn't need to fiddle around with the full model.</div>
<p>Having an annotated method allows you to initialize the model with attributes that are generally used in all views and are independent of the current task to be performed. This expresses the principle of separation of concerns.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How a View is Selected by the Spring Framework</h1>
                </header>
            
            <article>
                
<p>Spring offers a lot of ways to render the information from the model. We will look at HTML pages in particular.</p>
<p>The Thymeleaf template engine uses a view name to determine which template it should use.</p>
<p>Thymeleaf uses the view name to search for the template file in the <kbd>src/main/resources/templates</kbd> folder. The file has to be named exactly the same as the view name, prefixed by <kbd>.html</kbd>.</p>
<p>The following table lists some examples:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/048037fd-54b1-480f-8750-09ff57da73b1.png" style="width:45.33em;height:7.17em;" width="847" height="134"/> </div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Selecting a View Template by Returning Its Name</h1>
                </header>
            
            <article>
                
<p>Take a look at the following code example:</p>
<pre>@GetMapping("/blogposts/new")<br/>public String initNewBlogPost(<br/>@ModelAttribute("blogPost") BlogPost blogPost<br/>) {<br/>blogPost.setPublicationDate(LocalDateTime.now());<br/>return "blogposts/edit";<br/>}</pre>
<p>This example will render the template, which is found in the <kbd>src/main/resources/templates/blogPosts/list.html</kbd> file.<a href="https://bit.ly/2CRBV9A"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Redirecting to a URL Instead of Rendering a View Directly</h1>
                </header>
            
            <article>
                
<p>To redirect to a URL, you prefix the view name that is returned from the handling method with <kbd>redirect:</kbd>. This can either be a URL relative to the servlet context or an absolute URL. Any attributes in the model will be added to the URL as query parameters.</p>
<p>Here is an example:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/dd7ce5da-9468-49ec-b3dc-2c63e40faaf1.png" style="width:35.75em;height:8.83em;" width="1007" height="248"/></div>
<p>Another way to redirect is to return an instance of <kbd>org.springframework.web.servlet.view.RedirectView</kbd> containing the URL to redirect to. This allows us to pass additional attributes to the handling method that gets executed after the redirect.</p>
<p>Another kind of attributes, called <strong>flash attributes</strong>, will also be available after the redirect.</p>
<p>Look at the following example from the <kbd>BlogPostController</kbd> taken from the basic Thymeleaf source in the repository:</p>
<pre>@GetMapping("/blogposts/random")<br/>public RedirectView displayRandomBlogPost(RedirectAttributes<br/>attributes) {<br/>    attributes.addFlashAttribute("flashMessage", "Enjoy this<br/>post");<br/>    attributes.addAttribute("extraMessage", "This message appears<br/>in the query");<br/>    BlogPost blogPost = blogPostService.randomBlogPost();<br/>    return new RedirectView("/blogposts/" + blogPost.getSlug(),</pre>
<pre>true);<br/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p>In the constructor of the <kbd>RedirectView</kbd> instance, the URL of the redirect is specified. The second parameter tells Spring to do the redirect relative to the context path of the current application. After this handling method returns, the client will be redirected to a URL such as <kbd>/blogPosts/slug-of-random-post?extraMessage=extraMessage=This+message+appears+in+the+query</kbd>. The method that handles this request is able to access <kbd>flashMessage</kbd>:</p>
<pre>&lt;html lang="en"<br/>      &gt;<br/>&lt;head&gt;<br/>    &lt;title th:text="${blogPost.title}"&gt;Blog Post Title&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;div th:text="${param.extraMessage}"&gt;The extraMessage<br/>parameter&lt;/div&gt;<br/>  &lt;div th:text="${flashMessage}"&gt;The flashMessage attribute&lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</pre>
<p>In contrast, request parameters can be sent to any application or site, since it is encoded in the URL.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Selecting a View and Returning a Model at the Same Time</h1>
                </header>
            
            <article>
                
<p>By returning an instance of <kbd>org.springframework.web.servlet.ModelAndView</kbd>, it is possible to specify a view name, add model attributes or set the HTTP response status at the same time.</p>
<p>An example can be found in the <kbd>BlogPostController</kbd> provided in the code repository for this chapter:</p>
<pre>@GetMapping("/blogpost/{slug}")<br/>public ModelAndView displayBlogPostBySlug(@PathVariable String<br/>slug)<br/>    throws BlogPostNotFoundException {<br/>    BlogPost blogPost = blogPostService.findBlogPostBySlug(slug)<br/>            .orElseThrow(() -&gt; new BlogPostNotFoundException("Blog<br/>post with slug " + slug + " could not be found"));<br/><br/>    return new ModelAndView("/blogposts/details", "blogPost",<br/>blogPost);<br/>}</pre>
<p>This method returns the following information:</p>
<p>The view name <kbd>/blogposts/details</kbd>.</p>
<p>A model attribute called <kbd>blogPost</kbd> containing the actual blog post.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Working with the Model in Thymeleaf Templates</h1>
                </header>
            
            <article>
                
<p>Once the model and view name have been provided by the handling method, the framework will pass both to the Thymeleaf template engine. Everything that has been added to the model will be available in the template by its attribute name.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Binding Model Data to a Thymeleaf Template</h1>
                </header>
            
            <article>
                
<p>After Thymeleaf has been enabled by adding the namespace, directives can be used to add dynamic content. This will be achieved by using the <kbd>th</kbd> prefix. For example, assume that you have added an attribute named <kbd>message</kbd> to the model:</p>
<pre>&lt;h1 th:text="${message}"&gt;This will be replaced!&lt;/h1&gt;</pre>
<p>Instead of the text <kbd>This will be replaced!</kbd>, the content of the model attribute named message will be shown.</p>
<p>To access a model attribute, <kbd>${...}</kbd> is used to reference an attribute from the model.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding Dynamic Data</h1>
                </header>
            
            <article>
                
<p>The aim is to add dynamic data to be displayed on a web page. <span>T</span><span>he steps for completion are as follows:</span></p>
<ol>
<li>Open the <kbd>exercise-basic-thymeleaf</kbd> project in your IDE.</li>
<li>Open the <kbd>BlogPostController</kbd> class.</li>
<li>Add the following method, which adds a simple blog post to the model:</li>
</ol>
<pre style="padding-left: 60px">@GetMapping("/sample-post")<br/>public ModelAndView displaySampleBlogPost() {<br/>    BlogPost blogPost = new BlogPost();<br/>    blogPost.setTitle("A sample blog post");<br/>    blogPost.setPublicationDate(LocalDateTime.now());<br/><br/>    blogPost.setContent("Writing blog posts is fun!");<br/><br/>    return new ModelAndView("blogposts/details",<br/>"blogPost", blogPost);<br/>}</pre>
<ol start="4">
<li>Open the <kbd>src/main/resources/templates/blogposts/details.html</kbd> file</li>
<li>Add the following code at the location marked by this:</li>
</ol>
<pre style="padding-left: 60px">&lt;!-- Insert details view here --&gt;<br/>&lt;div class="card"&gt;<br/>    &lt;div class="card-body"&gt;<br/>        &lt;h5 class="card-title" th:text="${blogPost.<br/>title}"&gt;Title&lt;/h5&gt;<br/>        &lt;h6 class="card-subtitle" th:text="${#temporals.<br/>format(blogPost.publicationDate, 'MMMM d,<br/>YYYY')}"&gt;Publication Date&lt;/h6&gt;<br/>        &lt;p class="card-text" th:text="${blogPost.<br/>content}"&gt;Main Content&lt;/p&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</pre>
<ol start="6">
<li>Navigate your browser to <kbd>http://localhost:8080/sample-post</kbd>.</li>
</ol>
<p style="padding-left: 60px"> You should see the details of the blogpost:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/3bcf2bc5-844f-4f46-a356-04717435f8c6.png" style="width:28.58em;height:15.17em;" width="396" height="210"/></div>
<p>With this sub-section, you have utilized dynamic data and displayed it as an output on a web page.</p>
<div class="packt_infobox"><br/>
Go to <a href="https://bit.ly/2OcOLSH">https://bit.ly/2OcOLSH</a> to access the <kbd>exercise-basic-thymeleaf/</kbd> folder.<br/>
Go to <a href="https://bit.ly/2MtdW1X">https://bit.ly/2MtdW1X</a> to access the code for the <kbd>BasicThymeleafApplication.java</kbd> file.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Iterating and Displaying Items from a List</h1>
                </header>
            
            <article>
                
<p>When you want to display a list of items, you need a way to iterate over that list. Thymeleaf is able to iterate over lists, such as arrays or Java Collections, using the <kbd>th:each</kbd> directive:</p>
<pre>&lt;div th:each="currentBlogPost : ${blogPosts}"&gt;<br/>    &lt;h2 class="blog-post-title"<br/>        th:text="${currentBlogPost.title}"&gt;Title&lt;/h2&gt;<br/>    &lt;p th:text="${currentBlogPost.content}"&gt;<br/>        Main Content&lt;/p&gt;<br/>&lt;/div&gt;</pre>
<p>This is a simplified version of the content you find in the <a href="https://bit.ly/2Rqpkyn">https://bit.ly/2Rqpkyn</a> file.</p>
<p>This snippet will create a <kbd>&lt;div&gt;</kbd> for each blog post that is present in the collection with the attribute name <kbd>blogPosts</kbd>. Inside this <kbd>&lt;div&gt;</kbd> element, the current blog post object can be accessed by using the name <kbd>currentBlogPost</kbd>. As you can see, the title and content are inserted using the <kbd>th:text</kbd> attribute.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Handling Lists</h1>
                </header>
            
            <article>
                
<p>The aim is to display lists in a blogpost. <span>T</span><span>he steps for completion are as follows:</span></p>
<ol>
<li>Open the welcome page file at <kbd>src/main/resources/templates/index.html</kbd> from the previous sub-section.</li>
<li>Add the following code at the location marked with the <kbd>&lt;div&gt;</kbd>:</li>
</ol>
<pre style="padding-left: 60px">&lt;!-- Insert list here --&gt;<br/>&lt;div th:each="currentBlogPost : ${blogPosts}" class="card"&gt;<br/>    &lt;div class="card-body"&gt;<br/>        &lt;h5 class="card-title" th:text="${currentBlogPost.<br/>title}"&gt;Title&lt;/h5&gt;<br/>        &lt;h6 class="card-subtitle" th:text="${#temporals.<br/>format(currentBlogPost.publicationDate, 'MMMM d,<br/>YYYY')}"&gt;Publication Date&lt;/h6&gt;<br/>        &lt;p class="card-text" th:text="${currentBlogPost.<br/>content}"&gt;Main Content&lt;/p&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</pre>
<ol start="3">
<li>Open a terminal and go to the <kbd>exercise-basic-thymeleaf</kbd> folder.</li>
<li>Enter <kbd>mvnw spring-boot:run</kbd> to start the application.</li>
<li>Navigate your browser to <kbd>http://localhost:8080</kbd> to see the list in action.</li>
<li>Click the <span class="packt_screen">Add</span> button so that the list should show one new entry:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/41afeb55-8be4-4e0d-b489-86aecb5b7df3.png" style="width:28.33em;height:42.67em;" width="394" height="592"/></div>
<p class="mce-root"/>
<p>After, you have displayed multiple blog posts on a website by iterating over a list of items.</p>
<div class="packt_infobox"><br/>
The previous sub-section illustrates the use of a built-in function of Thymeleaf to format temporal attributes such as the <kbd>LocalDateTime</kbd> that is used for the publication date of a blogpost.</div>
<p>The <kbd>th:text="${#temporals.format(currentBlogPost.publicationDate, 'MMMM d, YYYY')}"</kbd> expression takes the publication date from the current blog posts and formats it to the given pattern. The month is printed first, then the day of the month, followed by a colon and the year (January 1, 2018).</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Displaying Parts of the View Using Conditions</h1>
                </header>
            
            <article>
                
<p>Beside iterating through lists, Thymeleaf also allows you to hide or show parts of the template depending on the state model attributes. You can also evaluate expressions containing logic operations or method calls.</p>
<p>To conditionally show a page element, Thymeleaf offers the <kbd>th:if</kbd> directive:</p>
<pre>&lt;div th:if="${#lists.isEmpty(blogPosts)}"&gt;<br/>    There are no blog posts<br/>&lt;/div&gt;</pre>
<p>This is a simplified version of the content you find in the <a href="https://bit.ly/2CRBV9A">https://bit.ly/2CRBV9A</a> file.</p>
<p>In this case, there are no blog posts that will appear when the model attribute named <kbd>blogPosts</kbd> is empty.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Displaying Text Conditionally</h1>
                </header>
            
            <article>
                
<p>The aim is to display text on the screen based on certain conditions. The steps for completion are as follows:</p>
<ol>
<li>Open the welcome page from the previous sub-section.</li>
<li>Add the following code above the list at the location marked with the <kbd>&lt;div&gt;</kbd>:</li>
</ol>
<pre style="padding-left: 60px">&lt;!-- Insert conditional here --&gt;<br/>&lt;div th:if="${#lists.isEmpty(blogPosts)}" class="alert<br/>alert-primary"&gt;<br/>    There are no blog posts<br/>&lt;/div&gt;</pre>
<ol start="3">
<li>Open a terminal and go to the <kbd>exercise-basic-thymeleaf</kbd> folder.</li>
<li>Enter <kbd>mvnw spring-boot:run</kbd> to start the application.</li>
<li>Navigate your browser to <kbd>http://localhost:8080</kbd> to see the list in action.</li>
<li>Click the <span class="packt_screen">Remove all</span> button to clear the list of blog posts:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/f155e8c9-4e4f-47a4-96b2-2392b22a6636.png" style="width:32.08em;height:19.08em;" width="398" height="236"/></div>
<p>With this sub-section, you have displayed the text data on the website based on the applied conditions.</p>
<p>You have seen multiple ways to add attributes to the model. Model attributes can be any arbitrary object that is referenced by a name. The name is defined by the developer when it is added to the model. This can either be in a separate or in a mapping - handling method.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Activity: Displaying the Details of a Blog Post</h1>
                </header>
            
            <article>
                
<p><strong>Aim</strong></p>
<p>To implement a handling method and a corresponding view template.</p>
<p><strong>Scenario</strong></p>
<p>The blogmania application is set up. There is a method to retrieve a blogpost from the internal storage using the slug attribute. You now want to add a view that displays a blog post when the user enters the <kbd>/blogposts/{slug}</kbd> URI.</p>
<p><strong>Steps for Completion</strong></p>
<ol>
<li>Create an annotated class and inject the <kbd>BlogPostService</kbd>.</li>
<li>Add a handling method to the <kbd>BlogPostController</kbd> and use a path variable slug to find the blog post. Throw an exception when a blogpost is not found.</li>
<li>Retrieve the blog post from the <kbd>BlogPostService</kbd>.</li>
<li>Return the instance from the required method. Set the view name to blogpost and add the blog post returned from the service.</li>
<li>Create a view template file.</li>
<li>Start the application using the maven command.</li>
<li>Open the <kbd>http://localhost:8080/blogposts/my-first-post</kbd> URL to view the output screen:</li>
</ol>
<div class="packt_figref CDPAlignCenter CDPAlign"><img src="Images/d4e604b1-61c3-4659-89d7-e02cf840f659.png" style="width:29.42em;height:13.92em;" width="398" height="188"/></div>
<p><strong>Outcome</strong></p>
<p>The resulting handling method and a corresponding view template are visible on the web page.</p>
<div class="packt_infobox"><span><br/>
Go to <a href="https://bit.ly/2NGgDS4">https://bit.ly/2NGgDS4</a> to access the code for the <kbd>BasicThymeleafApplication.java</kbd> file.</span> <span>To refer to the detailed steps, go to the <em>Solutions</em> section at the end of </span><span>this book on page 254.</span><span><br/></span> <span><br/></span></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we have learnt about the Thymeleaf template engine. We looked at how to add the required dependency to our project and the basic syntax to write view templates.</p>
<p>We then looked at how Spring MVC handles the model and how to add attributes to it. Adding and accessing attributes is similar to a Java Map.</p>
<p>Finally, we looked at expressions and control statements that Thymeleaf uses to insert data from the model, iterate through lists, and conditionally display parts of the page.</p>
<p>In this chapter, we have learnt how to display information that has been made available from the controller as model attributes in a view. In the next chapter, we will take a look at how input from the view is handed to the controller.</p>


            </article>

            
        </section>
    </div>



  </body></html>