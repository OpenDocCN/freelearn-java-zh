<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Working with the Process Designer"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Working with the Process Designer</h1></div></div></div><p>In the previous chapters, we were introduced to the concept of BPM and we got an overview of the jBPM tool stack and the family along some hands-on experience to build our first application using jBPM. The next four chapters will detail each jBPM component that we have discussed so far and the remaining chapters will guide you to customizing jBPM, integrating with the application architecture, and deploying a production-ready BPM application.</p><p>The first step that a business analyst with requirements for an application in hand would be the design and modeling of the business processes. This step is not often straightforward and involves multiple artifacts apart from the business process flow itself. This chapter will take us through the journey of designing a business process with all its etiquettes and will simulate the business process to understand how the designed business process would behave in a runtime environment.</p><p>The chapter guides you through the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Business process modeling using BPM</li><li class="listitem" style="list-style-type: disc">Data object modeling</li><li class="listitem" style="list-style-type: disc">Using scripting and logic within BPM activities</li><li class="listitem" style="list-style-type: disc">Modeling user interface forms that are attached to human activities in order to take input from human actors</li><li class="listitem" style="list-style-type: disc">Simulating a business process to understand its runtime characteristics</li><li class="listitem" style="list-style-type: disc">Using web-based and Eclipse tooling to work on the same project, and to collaborate between business users and technologists</li></ul></div><p>We will discuss how to do the above primarily by using the web-based process designer. Eclipse-based tooling is also discussed but briefly, highlighting only the differences in performing modeling.</p><div class="section" title="Web-based tooling"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec20"/>Web-based tooling</h1></div></div></div><p>Web-based tooling for<a id="id227" class="indexterm"/> jBPM is an extension to the user interface framework provided for the Drools Guvnor knowledge repository. The framework provides a platform to create, maintain, and run multiple knowledge assets for a knowledge-based<a id="id228" class="indexterm"/> application. The jBPM extension (which is named jBPM-WB, the short form for jBPM workbench) uses the features of the platform to create and maintain applications and leverage the capabilities of the platform to provide user interactions with knowledge assets corresponding to the business process. This kind of abstraction helps the jBPM workbench to easily integrate the assets of the other software in the family and create an integrated development environment for the business logic integration platform.</p><p>In this section, we will focus on the asset editors for the knowledge assets that are part of jBPM, namely business process definitions, process and task forms, and data models.</p><div class="section" title="Process modeling"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec38"/>Process modeling</h2></div></div></div><p>The process<a id="id229" class="indexterm"/> designer provided with jBPM is an integrated<a id="id230" class="indexterm"/> environment to design, validate, and simulate business processes. The following screenshot highlights six distinct parts of the process designer:</p><div class="mediaobject"><img src="graphics/9578OS_03_01.jpg" alt="Process modeling"/><div class="caption"><p>Parts of jBPM process designer</p></div></div><p>They are as <a id="id231" class="indexterm"/>follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>1</strong></span>: Object library</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>2</strong></span>: Process canvas</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>3</strong></span>: Properties editor</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>4</strong></span>: Toolbar</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>5</strong></span>: Problem visualization screen</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>6</strong></span>: Metadata</li></ul></div><p>Each of these parts is detailed in the following subsections.</p><div class="section" title="The Object Library"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec11"/>The Object Library</h3></div></div></div><p>The <span class="strong"><strong>Object Library</strong></span> is a palette of constructs that are used to build business processes. The <span class="strong"><strong>Object Library</strong></span> holds largely the BPMN-compliant constructs. The library is arranged as a drop-down<a id="id232" class="indexterm"/> menu with the categories of constructs serving as the headings. Users creating a business process can choose a construct from the palette and drop the construct in the process canvas. The following screenshot shows the default object:</p><div class="mediaobject"><img src="graphics/9578OS_03_02.jpg" alt="The Object Library"/></div><p>Apart from the BPMN constructs, the object repository also holds the workflow patterns. We have <a id="id233" class="indexterm"/>discussed these workflow patterns in <a class="link" href="ch01.html" title="Chapter 1. Business Process Modeling – Bridging Business and Technology">Chapter 1</a>, <span class="emphasis"><em>Business Process Modeling – Bridging Business and Technology</em></span>, and they are solution templates for frequently occurring process design scenarios.</p><p>A developer can choose to customize the object library by adding extended and customized tasks; we can discuss these in the chapter exclusively for customization.</p></div><div class="section" title="The process canvas"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec12"/>The process canvas</h3></div></div></div><p>The process canvas is our workspace; we create the business process in this canvas by dragging and dropping the BPMN constructs provided by the object library, connecting and customizing<a id="id234" class="indexterm"/> them to create the desired business process. The process designer helps us to create a technically deployable business process and to model the aesthetics of diagramming by ordering and placing the objects, resizing the objects, and changing the color patterns. The following screenshot shows a sample business process designed using the process designer:</p><div class="mediaobject"><img src="graphics/9578OS_03_03.jpg" alt="The process canvas"/></div><p>A useful tool, the community calls the morphing menu a great feature available in the process canvas. Once you drag and drop and select the object, we can see a tool menu around the object. The tools available in the menu will be different for different objects. There are three menus, one each at the top, bottom, and right of the object; they have a distinct collection of tools.</p><p>The right part of the menu has tools that help the user to work primarily on the process without always relying on the drag and drop feature of the object library. The user can add a task or gateway object to the canvas, include the connector, add an attachment, or add a data object. The following screenshot highlights the right part of the menu.</p><div class="mediaobject"><img src="graphics/9578OS_03_04.jpg" alt="The process canvas"/></div><p>The top part <a id="id235" class="indexterm"/>of the menu has utilities for the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Adding the task to the process dictionary (this will be discussed in detail in the subsequent section of the chapter)</li><li class="listitem" style="list-style-type: disc">Viewing the <span class="strong"><strong>Node Source</strong></span>, which helps in viewing the BPMN source of the object<div class="mediaobject"><img src="graphics/9578OS_03_05.jpg" alt="The process canvas"/></div></li></ul></div><p>The preceding screenshot shows the top menu highlighted and a view of the <span class="strong"><strong>Node Source</strong></span> window, which shows the source of the task object.</p><p>The bottom menu contains the tooling for converting a BPMN object into a similar counterpart. For example, we have placed a service task and have to change it to a human task. We will have to delete the task, replace it with another task, and restore the connections to it. Using this feature, and upon clicking the tool icon, we get a list of objects that we can interchange, and by selecting another object, we can change the object. This is a handy tool, particularly while maintaining a very large business process flow.</p><p>The following<a id="id236" class="indexterm"/> image shows the menu of interchangeable objects on a task element:</p><div class="mediaobject"><img src="graphics/9578OS_03_06.jpg" alt="The process canvas"/></div></div><div class="section" title="Properties editor"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec13"/>Properties editor</h3></div></div></div><p>Apart from the visible parts of a business process diagram, each object in the business process has<a id="id237" class="indexterm"/> properties that can be customized. For example, in a human task, we have to assign an actor or a group. The <span class="strong"><strong>Properties</strong></span> editor helps the designer to set these details. The <span class="strong"><strong>Properties</strong></span> editor panel for each object can be obtained by selecting the object. For setting the process level properties, we have to click on the canvas itself.</p><p>The Properties editor panel has the following four sections:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Core Properties</strong></span>: The Core properties section contains the properties that are essential for a particular BPMN element.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Extra Properties</strong></span>: Extra properties as the name indicates are properties other than the core properties that are non-mandatory. For example, documentation for a task.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Graphical Settings</strong></span>: Properties that can be changed for improving the aesthetics of the business process. The designers will have the flexibility to change the background, border, font colors, and the font size.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Simulation Properties</strong></span>: Simulation properties are settings needed for creating<a id="id238" class="indexterm"/> the process simulation. The details of these properties are discussed in the <span class="emphasis"><em>Process Simulation</em></span> section.<div class="mediaobject"><img src="graphics/9578OS_03_07.jpg" alt="Properties editor"/></div></li></ul></div><p>The preceding screenshot shows the property editor for a process, showing core, extra, and simulation properties for a BPMN process.</p><p>The core and extra properties for each BPMN construct and the purpose are detailed in <a class="link" href="ch05.html" title="Chapter 5. BPMN Constructs">Chapter 5</a>, <span class="emphasis"><em>BPMN Constructs</em></span>.</p></div><div class="section" title="Toolbar"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec14"/>Toolbar</h3></div></div></div><p>Toolbar contains a set of utilities that aid in creating and maintaining a business process. Most of the utilities <a id="id239" class="indexterm"/>are common to any diagram editor (such as cut, paste, save, rename, delete, and zoom) and provide advanced features such as form modeling and process simulation.</p><p>Most of the tools are easily understandable from their names itself and may not need a detailed discussion. We will discuss the specific functionalities that need attention in the following sections.</p></div><div class="section" title="Problem visualization"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec15"/>Problem visualization</h3></div></div></div><p>As we continue<a id="id240" class="indexterm"/> designing a business process, it is important to be informed about the syntactic and semantic errors in our business process. The problems section shows these errors in our application.</p><p>The following screenshot shows the errors from a BPMN process that has just started; that is, it contains only the start node. The errors indicate that the start node has no outgoing connection and the process does not have an end node:</p><div class="mediaobject"><img src="graphics/9578OS_03_08.jpg" alt="Problem visualization"/></div><p>Another provision included for the users is to visualize a problem in a specific process. This provision switches the editor into the validation mode. It can be accessed from the toolbar (refer to the following screenshot), and clicking on <span class="strong"><strong>Start validating</strong></span> will show a list of errors in the process:</p><div class="mediaobject"><img src="graphics/9578OS_03_09.jpg" alt="Problem visualization"/></div><p>Also, if the error is in a particular object, the object is highlighted. Click on the highlighted object to get the list of errors.</p><p>The designer <a id="id241" class="indexterm"/>shows these errors by validating the business processes against a set of preconfigured rules; these rules are customizable. (Please see <a class="link" href="ch07.html" title="Chapter 7. Customizing and Extending jBPM">Chapter 7</a>, <span class="emphasis"><em>Customizing and Extending jBPM</em></span> for the customization techniques).</p></div><div class="section" title="The Metadata tab"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec16"/>The Metadata tab</h3></div></div></div><p>The <span class="strong"><strong>Metadata</strong></span> tab shows the details of the business process as an artifact. It contains information<a id="id242" class="indexterm"/> such as the user who created and modified the artifact, the format of the artifact, and so on. Also, there is a provision to have a discussion about the artifact, which will be very useful in scenarios where we have a larger distributed team of business analysts who create and manage the business processes.</p></div></div><div class="section" title="Data object modeling"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec39"/>Data object modeling</h2></div></div></div><p>A part of<a id="id243" class="indexterm"/> business domain modeling is to identify all the entities in the problem domain, the relationships between the entities, and their attributes. The data associated with these entities are often collected, updated, and removed via business processes. Thus, these entities become a part of our business process.</p><p>For example, <span class="strong"><strong>Customer</strong></span> is a<a id="id244" class="indexterm"/> data entity that occurs in almost every business domain, and customer creation (the process of adding a customer) is a very common business process. JBPM provides data modeling features where these entities can be created as data objects and be included in the business process.</p><p>Let us discuss data modeling with an example. We consider a very primitive customer creation process with a human task to capture customer details and a service task to call the customer creation service available. The image given below shows the business process under discussion.</p><div class="mediaobject"><img src="graphics/9578OS_03_10.jpg" alt="Data object modeling"/></div><p>To create the <code class="literal">Customer</code> data object by using the process designer, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in to the workbench.</li><li class="listitem">Go to<a id="id245" class="indexterm"/> <span class="strong"><strong>Authoring</strong></span> | <span class="strong"><strong>Project Authoring</strong></span> | <span class="strong"><strong>Tools</strong></span> | <span class="strong"><strong>Data Modeler</strong></span> and click the <span class="strong"><strong>Create</strong></span> button. The following screen pops up:<div class="mediaobject"><img src="graphics/9578OS_03_11.jpg" alt="Data object modeling"/></div></li><li class="listitem">For creating the customer data object, give an identifier, a label, and the package name for the unique identification of this data object.</li></ol></div><p>Well, as you must have noticed, there is another (optional) field called <span class="strong"><strong>Superclass</strong></span>. This needs a bit of explanation on the technical side of how the data object is considered in the design of jBPM.</p><p>The data object<a id="id246" class="indexterm"/> modeled by us is created as a Java object with the attributes specified by us and included in the application as its dependency. The superclass points to the inheritance feature of Java, and we can use this feature in scenarios where data objects have parent–child relationships.</p><p>After creating the data object, we can use the <span class="strong"><strong>Create new field</strong></span> provision (see the following screenshot) to add the attributes corresponding to the data object. The following screenshot shows the <span class="strong"><strong>name</strong></span>, <span class="strong"><strong>age</strong></span>, and <span class="strong"><strong>sex</strong></span> attributes added to the <span class="strong"><strong>Customer</strong></span> data object:</p><div class="mediaobject"><img src="graphics/9578OS_03_12.jpg" alt="Data object modeling"/></div><p>Save the data object. Now, we have to utilize the data object in the business process.</p><p>In the business process, we have a human task that captures the information of a customer as its input and maps it to the output set of the task. For doing so, in the process designer, add the customer objects as <span class="strong"><strong>Type</strong></span> in the input and output set of the human tasks.</p><p>The following screenshot shows the property editor for the <span class="strong"><strong>Capture customer details</strong></span> human task, where the customer data object is used:</p><div class="mediaobject"><img src="graphics/9578OS_03_13.jpg" alt="Data object modeling"/></div></div><div class="section" title="Form modeling"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec40"/>Form modeling</h2></div></div></div><p>Continuing the discussion with our example of primitive customer creation, the next problem will be how to <a id="id247" class="indexterm"/>provide a user interface for the human task (capturing customer information). Form modeling provides a solution for this scenario. A business analyst can design a form that can be used to capture the<a id="id248" class="indexterm"/> information attached to a task.</p><p>To be precise, the data collected through the form is mapped to the data output set of the human task. When we run the <span class="strong"><strong>Create customer</strong></span> business process, the "Capturing customer information" task is assigned to an actor (or a group) and will be available in the inbox. For completing the task, the user will have to enter the details into a user interface that the engine renders by using the model of the form.</p><div class="section" title="Creating a form"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec17"/>Creating a form</h3></div></div></div><p>So, let us explore<a id="id249" class="indexterm"/> how to model a form for a task included in the business process.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Create customer</strong></span> process, select the <span class="strong"><strong>Capturing customer</strong></span> <span class="strong"><strong>information</strong></span> task.</li><li class="listitem">In the highlighted tool menu, the top part contains the tool for editing the associated form. Click on the tool, and select graphic modeling; this takes us to the form modeling screen:<div class="mediaobject"><img src="graphics/9578OS_03_13_A.jpg" alt="Creating a form"/></div></li></ol></div><p>For modeling the<a id="id250" class="indexterm"/> form, first, we have to create the data origins, where we define the mapping of data input sets to form variables and the form variables to data output sets. In this scenario, we have to map the data input and the data output of the customer variable.</p><p>We have to fill the <span class="strong"><strong>Id</strong></span>, <span class="strong"><strong>Input Id</strong></span>, and <span class="strong"><strong>Output Id</strong></span> fields and choose the render color for the form. Further, we have to select the data models that the form has to represent and click <span class="strong"><strong>Add data holder</strong></span> to add a data model as a data origin for the form.</p><p>The following screenshot shows the form modeling screen after adding the customer data origin:</p><div class="mediaobject"><img src="graphics/9578OS_03_14.jpg" alt="Creating a form"/></div><p>Now, we can model the look and feel of the form. For this, we choose the <span class="strong"><strong>Add fields by origin</strong></span> tab, where the data origins are listed and add to the form canvas the fields attached in the customer <a id="id251" class="indexterm"/>data object (as shown in the following screenshot).</p><p>Select a field, use the toolbar to edit the field properties, and move the field around in the form, to improve the aesthetics.</p><div class="mediaobject"><img src="graphics/9578OS_03_15.jpg" alt="Creating a form"/></div></div><div class="section" title="Setting the field properties"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec18"/>Setting the field properties</h3></div></div></div><p>For each field included in the form, we can specify a set of properties that determine its runtime behavior <a id="id252" class="indexterm"/>and its layout.</p><p>For using the <span class="strong"><strong>Properties</strong></span> panel (as shown in the following screenshot), select the field, and on the tool menu, click the edit button.</p><p>The properties include the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Properties for validating data integrity</li><li class="listitem" style="list-style-type: disc">Size of the input text</li><li class="listitem" style="list-style-type: disc">Maximum characters supported</li><li class="listitem" style="list-style-type: disc">Mandatory or not</li><li class="listitem" style="list-style-type: disc">Read-only or not</li><li class="listitem" style="list-style-type: disc">Password field or not</li><li class="listitem" style="list-style-type: disc">Pattern of the data expressed as a regular expression</li><li class="listitem" style="list-style-type: disc">Properties for specifying the look and feel</li><li class="listitem" style="list-style-type: disc">CSS style of the label and the field</li><li class="listitem" style="list-style-type: disc">Type of the field if the type of data has multiple user interfaces; for example, string can be capture in a field or text area or by using a rich-text editor</li><li class="listitem" style="list-style-type: disc">Properties for data binding</li><li class="listitem" style="list-style-type: disc">Properties for increasing usability</li><li class="listitem" style="list-style-type: disc">Setting default values</li><li class="listitem" style="list-style-type: disc">Inferring values using formulas</li></ul></div><p>The following screenshot shows the <span class="strong"><strong>Properties</strong></span> editor for the string type data:</p><div class="mediaobject"><img src="graphics/9578OS_03_16.jpg" alt="Setting the field properties"/></div></div><div class="section" title="Setting a default value"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec19"/>Setting a default value</h3></div></div></div><p>A general usability<a id="id253" class="indexterm"/> and productivity improvement technique in data entry screens is to provide default values for the fields. The form modeler supports this feature by using Java and <span class="strong"><strong>XPath</strong></span> expressions.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>XPath is a query<a id="id254" class="indexterm"/> language that can be used for selecting nodes in an XML document. See <a class="ulink" href="http://en.wikipedia.org/wiki/XPath">http://en.wikipedia.org/wiki/XPath</a>.</p></div></div><p>Suppose that in the customer creation process example, we have to default the field <span class="strong"><strong>sex</strong></span> to <span class="strong"><strong>Male</strong></span>, assuming that there are more male customers in the problem domain than female customers. So, in the <span class="strong"><strong>Default value formula</strong></span> field of the property editor, we can use the expression as given in the following screenshot:</p><div class="mediaobject"><img src="graphics/9578OS_03_17.jpg" alt="Setting a default value"/></div><p>Another common occurring scenario is to default a date field to the current date.</p><div class="mediaobject"><img src="graphics/9578OS_03_18.jpg" alt="Setting a default value"/></div></div><div class="section" title="Inferring field values"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec20"/>Inferring field values</h3></div></div></div><p>Another feature that we require in a data entry screen is to populate the values of some fields on the basis of the<a id="id255" class="indexterm"/> values of the other fields. For example, if we are capturing the information of a product (say, a laptop), there will be multiple cost components such as price, tax value, and discount. The total cost of the product is derived from these three components. So, we can set the formula for calculating the total cost by using an XPath expression referring to the fields for price, tax value, and discount (see the following screenshot).</p><div class="mediaobject"><img src="graphics/9578OS_03_19.jpg" alt="Inferring field values"/></div><p>Making the field read-only would complete the trick.</p></div><div class="section" title="Subforms"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec21"/>Subforms</h3></div></div></div><p>In a form, it is common to contain multiple sections. For example, while capturing customer information, we also need to capture the address information. Further, there are two type of <a id="id256" class="indexterm"/>address: one is the permanent address and the other is the communication address. Considering reusability in the form design, the most elegant way of modeling this scenario will be to create a single address form and including it twice in the <span class="strong"><strong>Customer</strong></span> form.</p><p>Form modeler supports this scenario by using a feature called subform, where we can include one form in another. For achieving this, we have to create <span class="strong"><strong>Address form</strong></span> and we have to go to the <span class="strong"><strong>Add field by type</strong></span> tab of <span class="strong"><strong>Customer form</strong></span> and add <span class="strong"><strong>Simple Subform</strong></span> and choose the property of <span class="strong"><strong>Default form</strong></span> as the already created <span class="strong"><strong>Address.form</strong></span>:</p><div class="mediaobject"><img src="graphics/9578OS_03_20.jpg" alt="Subforms"/></div></div><div class="section" title="Multiple subforms"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec22"/>Multiple subforms</h3></div></div></div><p>Yet another requirement is to have multiple objects of the same item in a form. Consider a scenario of the order management process. We have to capture the order information. An order typically<a id="id257" class="indexterm"/> consists of two parts: one is the order itself having information such as who the requestor is and at what time the request was made, and the other part is the requested item that consists of the product and the quantity ordered. This can be multiple; that is, the requestor may have multiple items in an order. A typical form to capture these details will be as given in the following screenshot:</p><div class="mediaobject"><img src="graphics/9578OS_03_21.jpg" alt="Multiple subforms"/></div><p>Furthermore, on clicking <span class="strong"><strong>Add order Items</strong></span>, we will get a row of order items.</p><div class="mediaobject"><img src="graphics/9578OS_03_22.jpg" alt="Multiple subforms"/></div><p>How do we model this scenario in the form modeler?</p><p>Follow the same method as that for the subform. Create data models for Order and Item. Create forms for Order and Item. In <span class="strong"><strong>Order form</strong></span>, use the <span class="strong"><strong>Multiple subform</strong></span> form type.</p><p>If we take the property editor of <span class="strong"><strong>multiple subform</strong></span>, we will get a lot of options to improve the look and feel of the form, to control what operations can be seen in the form, and so on. Play around<a id="id258" class="indexterm"/> and get a good feel of it.</p></div></div><div class="section" title="Process simulation"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec41"/>Process simulation</h2></div></div></div><p>So far, we have <a id="id259" class="indexterm"/>discussed a lot about business process modeling and aids that jBPM provides for it. The modeled process can now be deployed to know the runtime characteristics. Wait! Don't we have to analyze and verify the characteristics of the business process? JBPM provides tooling for analyzing the runtime characteristics of a modeled business process, and this is called business process simulation.</p><p>Process simulation helps<a id="id260" class="indexterm"/> us to do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Optimize the business process design by pre-execution</li><li class="listitem" style="list-style-type: disc">Understand the resource utilization of human actors involved in the business process</li><li class="listitem" style="list-style-type: disc">Understand the performance characteristics of the business process by prediction and analysis</li><li class="listitem" style="list-style-type: disc">Continuously improve the business process design by minimizing the errors caused by a change</li></ul></div><p>We can progress with the discussion on process simulation by using a sample business process flow as shown in the following image. The process flow depicts a business process for an online transaction, including the collection of customer information, sending the one-time password, and validation of the password. The consideration for choosing this process design for illustration was to have multiple process paths:</p><div class="mediaobject"><img src="graphics/9578OS_03_23.jpg" alt="Process simulation"/></div><div class="section" title="Process paths"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec23"/>Process paths</h3></div></div></div><p>The process<a id="id261" class="indexterm"/> paths feature helps the process designer to see all the possible combinations of paths in the business process. This will help us to understand any flaw in the logic we have used.</p><p>We can access the <span class="strong"><strong>Process Paths</strong></span> tooling from the designer toolbar, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/9578OS_03_24.jpg" alt="Process paths"/></div><p>Select the <span class="strong"><strong>Process Paths</strong></span> menu; it will calculate and list the paths that the process flow can possibly take. Select one of the paths, and click <span class="strong"><strong>Show Path</strong></span> to highlight it in the process canvas:</p><div class="mediaobject"><img src="graphics/9578OS_03_25.jpg" alt="Process paths"/></div><p>The preceding screenshot shows the process with a path highlighted. This tool becomes handy, particularly <a id="id262" class="indexterm"/>while designing complex business processes.</p></div><div class="section" title="Simulation parameters"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec24"/>Simulation parameters</h3></div></div></div><p>The process simulation<a id="id263" class="indexterm"/> engine needs some parameter inputs other than the information available in the business process; these parameters collectively describe or define the scenario of business process simulation. The parameters to be captured for scenario creation vary with the type of business process elements in a business process. For example, we need to capture the working hours with<a id="id264" class="indexterm"/> the human tasks for simulating resource utilization.</p><p>Simulation properties can be changed using the property editor and vary when selecting different process elements. The following screenshot shows the property editor showing the simulation properties for a human task (<span class="strong"><strong>Provide one-time password</strong></span>):</p><div class="mediaobject"><img src="graphics/9578OS_03_26.jpg" alt="Simulation parameters"/></div><p>The following section details the simulation parameters that have to be set for various process<a id="id265" class="indexterm"/> elements.</p><div class="section" title="Process-level parameters"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec01"/>Process-level parameters</h4></div></div></div><p>The process-level simulation properties are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">baseTimeunit</code>: The unit of time used in the simulation scenario. All values representing time <a id="id266" class="indexterm"/>will be considered to be expressed in this unit unless<a id="id267" class="indexterm"/> overridden locally.</li><li class="listitem" style="list-style-type: disc"><code class="literal">baseCurrencyUnit</code>: The base currency unit used in the simulation scenario expressed using the ISO<a id="id268" class="indexterm"/> 4217 (three-letter code) standard. For example, the US dollar is represented <a id="id269" class="indexterm"/>as <span class="strong"><strong>USD</strong></span>. Similar to baseTimeUnit, all values representing currency will be considered to be expressed in this unit unless overridden locally.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>ISO 4217 is an international standard, established for the purpose of having internationally recognized codes for the representation of currencies.</p></div></div></div><div class="section" title="Task-level parameters"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec02"/>Task-level parameters</h4></div></div></div><p>The task-level<a id="id270" class="indexterm"/> simulation properties are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">unitCost</code> (labeled as cost per time unit): This is the cost per time unit that has to be paid for performing<a id="id271" class="indexterm"/> the task. The cost is expressed as the number of <code class="literal">baseCurrencyUnit</code> properties per <code class="literal">baseTimeUnit</code>, and the default value is zero.</li><li class="listitem" style="list-style-type: disc"><code class="literal">distributionType</code>: This <a id="id272" class="indexterm"/>specifies the statistical distribution of the processing time of this task over the period of execution of multiple instances of the business process in the scenario.</li></ul></div><p>The supported statistical distribution types in jBPM are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Uniform distribution</strong></span>: Uniform distribution or rectangular distribution has equal probability for <a id="id273" class="indexterm"/>all values between the minimum and the maximum processing time values</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Normal distribution</strong></span>: It is one of the common distributions in nature represented as a <a id="id274" class="indexterm"/>symmetric bell-shaped curve and is specified by the mean and standard deviation values of the processing time</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Poison distribution</strong></span>: It is<a id="id275" class="indexterm"/> used to estimate the number of arrivals within a given time and is specified by the mean processing time<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>For in-depth<a id="id276" class="indexterm"/> understanding of the distribution type, please try understanding probability distributions; see <a class="ulink" href="http://en.wikipedia.org/wiki/Probability_distribution">http://en.wikipedia.org/wiki/Probability_distribution</a>.</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">staffAvailability</code>: The quantity of resources available for the task and is set to a default of 1. This <a id="id277" class="indexterm"/>parameter is applicable only to human tasks.</li><li class="listitem" style="list-style-type: disc"><code class="literal">workingHours</code>: The working <a id="id278" class="indexterm"/>hours for a human resource. This parameter is also applicable only<a id="id279" class="indexterm"/> to manual (human) tasks.</li></ul></div></div><div class="section" title="Flow element parameters"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec03"/>Flow element parameters</h4></div></div></div><p>The simulation<a id="id280" class="indexterm"/> property attached to a sequence flow is <span class="emphasis"><em>probability</em></span>, which is the probability of the control being passed to this element. This is attached to the sequence flow process element. If we specify a probability value of 50 percent to each of the two sequence flows outgoing from a gateway, it means that the two sequence flows are equally probable to occur.</p></div></div><div class="section" title="Running simulation"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec25"/>Running simulation</h3></div></div></div><p>Now, as we have <a id="id281" class="indexterm"/>discussed about setting the simulation properties, we can run the simulation. The menu is available along with <span class="strong"><strong>Process Paths</strong></span> in the process designer toolbar:</p><div class="mediaobject"><img src="graphics/9578OS_03_27.jpg" alt="Running simulation"/></div><p>We will be prompted to provide details such as the number of instances to be simulated and the interval <a id="id282" class="indexterm"/>between process simulations. The simulation process is asynchronous, and once completed, the simulation tab will be populated with the simulation results.</p></div><div class="section" title="Simulation results"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec26"/>Simulation results</h3></div></div></div><p>The summary <a id="id283" class="indexterm"/>of the simulation is available on the right hand side of the simulation tab. This contains the information of the simulation and a hierarchy for navigating through the simulation results at different levels such as process, process elements, and paths. The following screenshot shows the summary information for the sample process:</p><div class="mediaobject"><img src="graphics/9578OS_03_28.jpg" alt="Simulation results"/></div><p>The results section is quite fleshy, with different types of charts to choose from that represent data in multiple ways. Play around with the options there. The following are the major datasets included in the simulation results:</p><p>
<span class="strong"><strong>Process simulation results</strong></span>: If we select the process (from the hierarchy shown) to view the execution<a id="id284" class="indexterm"/> result, we can view the<a id="id285" class="indexterm"/> following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Execution times results</strong></span>: This shows<a id="id286" class="indexterm"/> the maximum, minimum, and average time of execution.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Activity instances</strong></span>: This shows<a id="id287" class="indexterm"/> the activity (task) instances created during the simulation.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Total cost</strong></span>: Shows the<a id="id288" class="indexterm"/> minimum, maximum, and average value of the projected cost for the business process.</li><li class="listitem" style="list-style-type: disc">The following image shows the execution time results of the online transaction business process:<div class="mediaobject"><img src="graphics/9578OS_03_29.jpg" alt="Simulation results"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Process element-wise simulation results</strong></span>: Select each process element in the hierarchy to show<a id="id289" class="indexterm"/> the process element-wise simulation results. For service tasks, this basically shows the minimum, maximum, and average values of the execution time. Further, for human tasks, it also shows the resource allocation details, wait time<a id="id290" class="indexterm"/> for resources, and the cost factor.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Path simulation results</strong></span>: Path simulation results show the number of times that the path has<a id="id291" class="indexterm"/> been executed and its percentage contribution.</li></ul></div></div></div></div></div>
<div class="section" title="Eclipse-based tooling"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec21"/>Eclipse-based tooling</h1></div></div></div><p>In the previous sections of this chapter, we have concentrated on modeling the process and utilities available in the web-based tooling provided by jBPM. The web-based tooling primarily focuses <a id="id292" class="indexterm"/>on the business analysts. Can the business analysts create an application on their own? We must acknowledge that we are not yet there, but, of course, there are only a few gaps left to reach that destiny. On today's course, we need the help of technologists to create a completely functional application.</p><p>jBPM tooling considers this reality in the form of the updated Eclipse tooling that helps developers to create a jBPM application or collaborate with the team of business analysts to complete an application.</p><div class="section" title="Importing a project created using web-based tooling"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec42"/>Importing a project created using web-based tooling</h2></div></div></div><p>In this chapter, we<a id="id293" class="indexterm"/> have discussed how to create a jBPM project by using Eclipse tooling. Here, we will discuss how to import a project that was created in the process designer (possibly by someone in the business analyst role) into Eclipse and continue working on it.</p><p>The default implementation of the knowledge repository in jBPM utilizes Git, a widely used source code management system. So, when we create a project by using web-based tooling, it actually creates a project in Git. Git supports people to work concurrently on a project, and this facility can be utilized for collaborative working between users of web-based tooling and Eclipse tooling.</p><p>So, first, we should know the Git repository location that jBPM uses as the knowledge repository for the sample project:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log into web-based tooling, and go to the <span class="strong"><strong>Project Authoring</strong></span> | <span class="strong"><strong>Administration </strong></span>menu. There will be a list of repositories and projects.</li><li class="listitem">Select the project we want and we can see the Git repository URL. There will be two URLs available: one using the <span class="strong"><strong>git</strong></span> protocol and the other for the <span class="strong"><strong>ssh</strong></span> protocol. The screenshot of this section is as follows:<div class="mediaobject"><img src="graphics/9578OS_03_30.jpg" alt="Importing a project created using web-based tooling"/></div></li><li class="listitem">Copy the<a id="id294" class="indexterm"/> URL using the tooling available.</li><li class="listitem">Open Eclipse (that is installed with the jBPM installation).</li><li class="listitem">Go to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Import</strong></span> | <span class="strong"><strong>Projects from Git</strong></span>, click <span class="strong"><strong>Next</strong></span>, select <span class="strong"><strong>URL</strong></span>, and click <span class="strong"><strong>Next</strong></span>. We will get the window shown in the following screenshot.</li><li class="listitem">Enter the ssh URL and authentication details:<div class="mediaobject"><img src="graphics/9578OS_03_31.jpg" alt="Importing a project created using web-based tooling"/></div></li><li class="listitem">Proceed with the wizard and finish importing the project; in Eclipse <span class="strong"><strong>Package Explorer</strong></span>, we <a id="id295" class="indexterm"/>will get the project imported. The project structure is the Maven project structure for a Java project. Explore and we can see the data object, forms, and business processes that we have created:<div class="mediaobject"><img src="graphics/9578OS_03_32.jpg" alt="Importing a project created using web-based tooling"/></div></li></ol></div></div><div class="section" title="Process modeling"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec43"/>Process modeling</h2></div></div></div><p>Eclipse-based<a id="id296" class="indexterm"/> tooling comes with a BPMN diagram editor for modeling business processes. The editor provides similar features as the web-based process designer. It consists of a canvas where we can visually illustrate the business process, <span class="strong"><strong>Palette</strong></span>, which acts the BPMN object library, and the property editor for setting the properties of each BPMN element. The following screenshot provides the BPMN diagram editor:</p><div class="mediaobject"><img src="graphics/9578OS_03_33.jpg" alt="Process modeling"/></div><p>We are not discussing the features of the editor in detail as they are similar to the features explained for web-based<a id="id297" class="indexterm"/> tooling.</p></div><div class="section" title="Data object modeling"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec44"/>Data object modeling</h2></div></div></div><p>For data object modeling, jBPM<a id="id298" class="indexterm"/> doesn't provide any visual modeling tooling, but the source code generated internally while creating a data object is provided to the developer user. This source code is in Java, and the objects are represented as<a id="id299" class="indexterm"/> <span class="strong"><strong>Plain Old Java Object</strong></span> (<span class="strong"><strong>POJO</strong></span>) and decorated using annotations from the knowledge API.</p><p>The following screenshot shows <code class="literal">Order.java</code> created for the <code class="literal">Order</code> data object created in the process designer:</p><div class="mediaobject"><img src="graphics/9578OS_03_34.jpg" alt="Data object modeling"/></div></div><div class="section" title="Form modeling"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec45"/>Form modeling</h2></div></div></div><p>Similar to data<a id="id300" class="indexterm"/> object modeling, developer tooling doesn't include any visual tooling for form modeling but is available as a raw file that can be hacked by developers.</p><p>The files with the <code class="literal">.form</code> extension contain the properties within the form and the files with the <code class="literal">.ftl</code> (which refers to FreeMarker template files) extension contain the layout information of the form.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>For more details<a id="id301" class="indexterm"/> on FreeMarker templates, see <a class="ulink" href="http://en.wikipedia.org/wiki/FreeMarker">http://en.wikipedia.org/wiki/FreeMarker</a>.</p></div></div></div><div class="section" title="Process simulation"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec46"/>Process simulation</h2></div></div></div><p>There is no tooling<a id="id302" class="indexterm"/> as such available for process simulation, and the developers have to rely on unit test cases and debugging tooling available for analyzing the runtime characteristics of a process.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>The view for writing unit test cases and process instances is discussed in the <span class="emphasis"><em>Writing automated test cases</em></span> section of <a class="link" href="ch02.html" title="Chapter 2. Building Your First BPM Application">Chapter 2</a>, <span class="emphasis"><em>Building Your First BPM Application</em></span>.</p></div></div></div><div class="section" title="Saving changes to the knowledge repository"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec47"/>Saving changes to the knowledge repository</h2></div></div></div><p>In web-based tooling, saving the artifact would be reflected in the knowledge repository. Eclipse-based tooling<a id="id303" class="indexterm"/> is a bit different in this aspect. The saved files will reflect only in our local file system; for synchronizing with the knowledge repository (here, the Git repository), we can use Eclipse tooling for commit and pushing to the Git repository.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Right click on the project (<span class="strong"><strong>Package Explorer</strong></span>), and go to <span class="strong"><strong>Team</strong></span> | <span class="strong"><strong>Commit</strong></span>. It will take you to the commit screen shown in the following screenshot.</li><li class="listitem">Select the artifacts to be moved to the repository, provide a commit message, and use the <span class="strong"><strong>Commit and Push</strong></span> button to push the changes to the knowledge repository:<div class="mediaobject"><img src="graphics/9578OS_03_35.jpg" alt="Saving changes to the knowledge repository"/></div></li></ol></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec22"/>Summary</h1></div></div></div><p>The chapter focused on the tooling available for process design and covered in detail the various features available in both web and Eclipse-based tooling, targeting business users and technologists, respectively. The chapter also helps in getting a hands-on experience of how both web and Eclipse-based tooling can be used collaboratively in process design.</p><p>Now, as we have discussed process design in considerable detail, let us explore the tooling available for operation management in the next chapter.</p><p>Also, <a class="link" href="ch05.html" title="Chapter 5. BPMN Constructs">Chapter 5</a>, <span class="emphasis"><em>BPMN Constructs</em></span>, can be considered an extension to process designing, where we will discuss in detail each BPMN construct that can be included in a business process.</p></div></body></html>