<html><head></head><body>
<div id="_idContainer031">
<h1 class="chapter-number" id="_idParaDest-170"><a id="_idTextAnchor169"/><span class="koboSpan" id="kobo.1.1">7</span></h1>
<h1 id="_idParaDest-171"><a id="_idTextAnchor170"/><span class="koboSpan" id="kobo.2.1">Designing a User Interface</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, you implemented authentication and authorization using Spring Security; that chapter also included all the example e-commerce app APIs. </span><span class="koboSpan" id="kobo.3.2">In this chapter, you will develop the frontend of an example e-commerce app using the React library. </span><span class="koboSpan" id="kobo.3.3">This UI app will then consume the APIs developed in the previous chapter, </span><a href="B19349_06.xhtml#_idTextAnchor148"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.4.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.5.1">, </span><em class="italic"><span class="koboSpan" id="kobo.6.1">Securing REST Endpoints Using Authorization and Authentication</span></em><span class="koboSpan" id="kobo.7.1">. </span><span class="koboSpan" id="kobo.7.2">This UI app will be a </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">single-page application</span></strong><span class="koboSpan" id="kobo.9.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.10.1">SPA</span></strong><span class="koboSpan" id="kobo.11.1">) that consists of interactive components such </span><a id="_idIndexMarker583"/><span class="koboSpan" id="kobo.12.1">as </span><em class="italic"><span class="koboSpan" id="kobo.13.1">Login</span></em><span class="koboSpan" id="kobo.14.1">, </span><em class="italic"><span class="koboSpan" id="kobo.15.1">Product Listing</span></em><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Product Detail</span></em><span class="koboSpan" id="kobo.18.1">, </span><em class="italic"><span class="koboSpan" id="kobo.19.1">Cart</span></em><span class="koboSpan" id="kobo.20.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.21.1">Order Listing</span></em><span class="koboSpan" id="kobo.22.1">. </span><span class="koboSpan" id="kobo.22.2">This chapter will conclude the end-to-end development and communication between different layers of an online shopping app. </span><span class="koboSpan" id="kobo.22.3">By the end of this chapter, you will have learned about SPAs, UI component development using React, and consuming the REST APIs using the browser’s built-in </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.23.1">Fetch API</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.25.1">This chapter will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.27.1">Learning </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">React fundamentals</span></span></li>
<li><span class="koboSpan" id="kobo.29.1">Exploring React components and </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">other features</span></span></li>
<li><span class="koboSpan" id="kobo.31.1">Designing e-commerce </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">app components</span></span></li>
<li><span class="koboSpan" id="kobo.33.1">Consuming APIs </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">using Fetch</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.35.1">Implementing authentication</span></span></li>
</ul>
<h1 id="_idParaDest-172"><a id="_idTextAnchor171"/><span class="koboSpan" id="kobo.36.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.37.1">You need the following prerequisites for developing and executing </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">the code:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.39.1">You should be familiar with JavaScript: </span><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">data types</span></strong><span class="koboSpan" id="kobo.41.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.42.1">variables</span></strong><span class="koboSpan" id="kobo.43.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.44.1">functions</span></strong><span class="koboSpan" id="kobo.45.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.46.1">loops</span></strong><span class="koboSpan" id="kobo.47.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.48.1">array</span></strong><span class="koboSpan" id="kobo.49.1"> methods such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.50.1">map()</span></strong><span class="koboSpan" id="kobo.51.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.52.1">Promises</span></strong><span class="koboSpan" id="kobo.53.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.54.1">async</span></strong><span class="koboSpan" id="kobo.55.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">so on.</span></span></li>
<li><span class="koboSpan" id="kobo.57.1">Node.js 18.x with </span><strong class="bold"><span class="koboSpan" id="kobo.58.1">Node Package Manager</span></strong><span class="koboSpan" id="kobo.59.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.60.1">npm</span></strong><span class="koboSpan" id="kobo.61.1">) 9.x (and optionally, Yarn, which you can install using </span><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">npm install </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">yarn -g</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">).</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.65.1">Visual Studio Code</span></strong><span class="koboSpan" id="kobo.66.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.67.1">VS Code</span></strong><span class="koboSpan" id="kobo.68.1">): This is a free source code editor. </span><span class="koboSpan" id="kobo.68.2">You can use any other source code editor of </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">your choice.</span></span></li>
<li><span class="koboSpan" id="kobo.70.1">React 18 libraries that will be included when you </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">use </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.72.1">create-react-app</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.73.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.74.1">Let’s get the </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">ball rolling!</span></span></p>
<p><span class="koboSpan" id="kobo.76.1">Please visit the following link to check the code for </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">this chapter:</span></span></p>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/main/Chapter07"><span class="No-Break"><span class="koboSpan" id="kobo.78.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/main/Chapter07</span></span></a></p>
<h1 id="_idParaDest-173"><a id="_idTextAnchor172"/><span class="koboSpan" id="kobo.79.1">Learning React fundamentals</span></h1>
<p><span class="koboSpan" id="kobo.80.1">React is a declarative library used to build interactive and dynamic UIs, including isolated small components. </span><span class="koboSpan" id="kobo.80.2">It is also sometimes referred to as a framework because it is as capable as and comparable with other JavaScript frameworks such as AngularJS. </span><span class="koboSpan" id="kobo.80.3">However, React is a library and</span><a id="_idIndexMarker584"/><span class="koboSpan" id="kobo.81.1"> works with other supported libraries, including React Router, React Redux, and so on. </span><span class="koboSpan" id="kobo.81.2">You normally use it to develop SPAs, but it can also be used to develop full </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">stack applications.</span></span></p>
<p><span class="koboSpan" id="kobo.83.1">React is used to build the view layer of the application per the MVC architecture. </span><span class="koboSpan" id="kobo.83.2">You can build reusable UI components</span><a id="_idIndexMarker585"/><span class="koboSpan" id="kobo.84.1"> with their own state. </span><span class="koboSpan" id="kobo.84.2">You can use either plain JavaScript with HTML or </span><strong class="bold"><span class="koboSpan" id="kobo.85.1">JavaScript Syntax Extension</span></strong><span class="koboSpan" id="kobo.86.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.87.1">JSX</span></strong><span class="koboSpan" id="kobo.88.1">) for templating. </span><span class="koboSpan" id="kobo.88.2">We’ll be using JSX in this chapter, which employs a </span><strong class="bold"><span class="koboSpan" id="kobo.89.1">virtual Document Object Model</span></strong><span class="koboSpan" id="kobo.90.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.91.1">VDOM</span></strong><span class="koboSpan" id="kobo.92.1">) for </span><a id="_idIndexMarker586"/><span class="koboSpan" id="kobo.93.1">dynamic changes </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">and interactions.</span></span></p>
<p><span class="koboSpan" id="kobo.95.1">Let’s create a new React app using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.96.1">create-react-app</span></strong><span class="koboSpan" id="kobo.97.1"> utility next. </span><span class="koboSpan" id="kobo.97.2">This utility scaffolds and provides the basic app structure that you’ll use to develop the example e-commerce </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">app frontend.</span></span></p>
<h2 id="_idParaDest-174"><a id="_idTextAnchor173"/><span class="koboSpan" id="kobo.99.1">Creating a React app</span></h2>
<p><span class="koboSpan" id="kobo.100.1">You can configure and build a React UI app</span><a id="_idIndexMarker587"/><span class="koboSpan" id="kobo.101.1"> from scratch. </span><span class="koboSpan" id="kobo.101.2">However, as mentioned, React provides a </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">create-react-app</span></strong><span class="koboSpan" id="kobo.103.1"> utility that bootstraps and builds a basic running app template. </span><span class="koboSpan" id="kobo.103.2">You can take it further to build a full-fleshed </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">UI application.</span></span></p>
<p><span class="koboSpan" id="kobo.105.1">Its syntax is </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">shown here:</span></span></p>
<pre class="console">
<strong class="bold"><span class="koboSpan" id="kobo.107.1">npx</span></strong> <strong class="bold"><span class="koboSpan" id="kobo.108.1">create-react-app</span></strong><span class="koboSpan" id="kobo.109.1"> &lt;app name&gt;</span></pre> <p><strong class="bold"><span class="koboSpan" id="kobo.110.1">npm package executor</span></strong><span class="koboSpan" id="kobo.111.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.112.1">NPX</span></strong><span class="koboSpan" id="kobo.113.1">) is a tool that allows you to use </span><strong class="bold"><span class="koboSpan" id="kobo.114.1">command-line interface</span></strong><span class="koboSpan" id="kobo.115.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.116.1">CLI</span></strong><span class="koboSpan" id="kobo.117.1">) tools and other executables </span><a id="_idIndexMarker588"/><span class="koboSpan" id="kobo.118.1">available in the npm registry. </span><span class="koboSpan" id="kobo.118.2">It is </span><a id="_idIndexMarker589"/><span class="koboSpan" id="kobo.119.1">by default available with npm 5.2.0, or you can install it using </span><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">npm i npx</span></strong><span class="koboSpan" id="kobo.121.1">. </span><span class="koboSpan" id="kobo.121.2">It executes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">create-react-app</span></strong><span class="koboSpan" id="kobo.123.1"> React </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">package directly.</span></span></p>
<p><span class="koboSpan" id="kobo.125.1">Now, let’s create an </span><strong class="source-inline"><span class="koboSpan" id="kobo.126.1">ecomm-ui</span></strong><span class="koboSpan" id="kobo.127.1"> application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.129.1">
$ npx create-react-app ecomm-uiCreating a new React app in /Users/dev/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/Chapter07/ecomm-ui.
</span><span class="koboSpan" id="kobo.129.2">Installing packages. </span><span class="koboSpan" id="kobo.129.3">This might take a couple of minutes.
</span><span class="koboSpan" id="kobo.129.4">Installing react, react-dom, and react-scripts with cra-template...
</span><span class="koboSpan" id="kobo.129.5">//… stripped output for brevity
added 1418 packages in 50s
Success! </span><span class="koboSpan" id="kobo.129.6">Created ecomm-ui at /Users/sourabhsharma/dev/pws/java/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/Chapter07/ecomm-ui
//… stripped output for brevity
Inside that directory
We suggest that you begin by typing:
  cd ecomm-ui
  npm start</span></pre>
<p><span class="koboSpan" id="kobo.130.1">Once it has been installed </span><a id="_idIndexMarker590"/><span class="koboSpan" id="kobo.131.1">successfully, you can go to the app directory and start the installed application using </span><strong class="source-inline"><span class="koboSpan" id="kobo.132.1">create-react-app</span></strong><span class="koboSpan" id="kobo.133.1"> by running the </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.135.1">
$ cd ecomm-ui$ code .</span></pre>
<p><span class="koboSpan" id="kobo.136.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.137.1">code .</span></strong><span class="koboSpan" id="kobo.138.1"> command opens the </span><strong class="source-inline"><span class="koboSpan" id="kobo.139.1">ecomm-ui</span></strong><span class="koboSpan" id="kobo.140.1"> app project in VS Code. </span><span class="koboSpan" id="kobo.140.2">You can then use the following command in the terminal in VS Code to start the </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">development server:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.142.1">
$ npm start</span></pre> <p><span class="koboSpan" id="kobo.143.1">Once the server has started successfully, it will open a new tab on your default browser at </span><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">localhost:3000</span></strong><span class="koboSpan" id="kobo.145.1">, as </span><a id="_idIndexMarker591"/><span class="koboSpan" id="kobo.146.1">shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer024">
<span class="koboSpan" id="kobo.148.1"><img alt="Figure 7.1 – Default UI app created by the create-react-app utility" src="image/Figure_07.1_B19349.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.149.1">Figure 7.1 – Default UI app created by the create-react-app utility</span></p>
<p><span class="koboSpan" id="kobo.150.1">Our bootstrapped React UI is up and running, but before you can build an e-commerce UI app on top of it, you need to understand the basic concepts and files generated </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">by </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">create-react-app</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">.</span></span></p>
<h2 id="_idParaDest-175"><a id="_idTextAnchor174"/><span class="koboSpan" id="kobo.154.1">Exploring the basic structures and files</span></h2>
<p><span class="koboSpan" id="kobo.155.1">A scaffolded React</span><a id="_idIndexMarker592"/><span class="koboSpan" id="kobo.156.1"> app contains the following directories and files inside the root </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">project directory:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.158.1">
ecomm-ui├── README.md
├── node_modules
├── package.json
├── package-lock.json
├── .gitignore
├── public
│ ├── favicon.ico
│ ├── index.html
│ ├── logo192.png
│ ├── logo512.png
│ ├── manifest.json
│ └── robots.txt
└── src
  ├── App.css
  ├── App.js
  ├── App.test.js
  ├── index.css
  ├── index.js
  ├── logo.svg
  ├── reportWebVitals.js
  └── setupTests.js</span></pre>
<p><span class="koboSpan" id="kobo.159.1">Let’s understand the main parts, </span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">node_modules</span></strong><span class="koboSpan" id="kobo.162.1">: You don’t need to make any changes here. </span><span class="koboSpan" id="kobo.162.2">Node-based applications keep a local copy of all the dependent </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">packages here.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.164.1">public</span></strong><span class="koboSpan" id="kobo.165.1">: This directory</span><a id="_idIndexMarker593"/><span class="koboSpan" id="kobo.166.1"> contains all the static assets of an app, including </span><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">index.html</span></strong><span class="koboSpan" id="kobo.168.1">, images, favicon icon, </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">robots.txt</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.171.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.172.1">src</span></strong><span class="koboSpan" id="kobo.173.1">: This directory contains all</span><a id="_idIndexMarker594"/><span class="koboSpan" id="kobo.174.1"> the dynamic code, including React code and </span><strong class="bold"><span class="koboSpan" id="kobo.175.1">Cascading Style Sheets</span></strong><span class="koboSpan" id="kobo.176.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.177.1">CSS</span></strong><span class="koboSpan" id="kobo.178.1">) (including </span><strong class="bold"><span class="koboSpan" id="kobo.179.1">Syntactically Awesome Style Sheets</span></strong><span class="koboSpan" id="kobo.180.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.181.1">Sass</span></strong><span class="koboSpan" id="kobo.182.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.183.1">Leaner Style Sheets</span></strong><span class="koboSpan" id="kobo.184.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.185.1">Less</span></strong><span class="koboSpan" id="kobo.186.1">), and so on). </span><span class="koboSpan" id="kobo.186.2">It also </span><a id="_idIndexMarker595"/><span class="koboSpan" id="kobo.187.1">contains the</span><a id="_idIndexMarker596"/> <span class="No-Break"><span class="koboSpan" id="kobo.188.1">test code.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">package.json</span></strong><span class="koboSpan" id="kobo.190.1">: This </span><strong class="bold"><span class="koboSpan" id="kobo.191.1">JavaScript Object Notation</span></strong><span class="koboSpan" id="kobo.192.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.193.1">JSON</span></strong><span class="koboSpan" id="kobo.194.1">) file contains all the</span><a id="_idIndexMarker597"/><span class="koboSpan" id="kobo.195.1"> metadata, commands (inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">scripts</span></strong><span class="koboSpan" id="kobo.197.1">), and </span><a id="_idIndexMarker598"/><span class="koboSpan" id="kobo.198.1">dependent </span><a id="_idIndexMarker599"/><span class="koboSpan" id="kobo.199.1">packages (inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">dependencies</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.201.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">dev-dependencies</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">).</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.204.1">You can remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.205.1">serviceWorker.js</span></strong><span class="koboSpan" id="kobo.206.1"> file (if generated), the </span><strong class="source-inline"><span class="koboSpan" id="kobo.207.1">logo.svg</span></strong><span class="koboSpan" id="kobo.208.1"> file, and test files from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.209.1">src</span></strong><span class="koboSpan" id="kobo.210.1"> directory for now as we are not going to use them in </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.212.1">Let’s discuss the </span><strong class="source-inline"><span class="koboSpan" id="kobo.213.1">package.json</span></strong><span class="koboSpan" id="kobo.214.1"> file in the </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">next subsection.</span></span></p>
<h2 id="_idParaDest-176"><a id="_idTextAnchor175"/><span class="koboSpan" id="kobo.216.1">Understanding the package.json file</span></h2>
<p><span class="koboSpan" id="kobo.217.1">You can also view the </span><strong class="source-inline"><span class="koboSpan" id="kobo.218.1">package.json</span></strong><span class="koboSpan" id="kobo.219.1"> file </span><a id="_idIndexMarker600"/><span class="koboSpan" id="kobo.220.1">that contains all the dependencies under the </span><strong class="source-inline"><span class="koboSpan" id="kobo.221.1">dependencies</span></strong><span class="koboSpan" id="kobo.222.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.223.1">dev-dependencies</span></strong><span class="koboSpan" id="kobo.224.1"> fields. </span><span class="koboSpan" id="kobo.224.2">It is similar in nature to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">build.gradle</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.226.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.227.1">The main React libraries are </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">react</span></strong><span class="koboSpan" id="kobo.229.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">react-dom</span></strong><span class="koboSpan" id="kobo.231.1">, mentioned in the dependencies field; these are for React and the </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">VDOM, respectively.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">package.json</span></strong><span class="koboSpan" id="kobo.234.1"> also contains a script field that contains all the commands you can execute on this application. </span><span class="koboSpan" id="kobo.234.2">We have used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">yarn start</span></strong><span class="koboSpan" id="kobo.236.1"> command to start the application in development mode. </span><span class="koboSpan" id="kobo.236.2">Similarly, you can execute other commands, as shown in the following code block, with </span><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">yarn</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.238.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">npm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.241.1">
"scripts": {    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
},</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">react-scripts</span></strong><span class="koboSpan" id="kobo.243.1"> is a CLI package installed by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">create-react-app</span></strong><span class="koboSpan" id="kobo.245.1"> utility. </span><span class="koboSpan" id="kobo.245.2">It contains many dependencies, a few of the primary ones of which are </span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">listed here:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.247.1">webpack</span></strong><span class="koboSpan" id="kobo.248.1"> (</span><a href="https://webpack.js.org"><span class="koboSpan" id="kobo.249.1">https://webpack.js.org</span></a><span class="koboSpan" id="kobo.250.1">): This is a module bundler that bundles JavaScript, CSS, images, HTML, and so on. </span><span class="koboSpan" id="kobo.250.2">CSS and images may require extra loaders as dependencies. </span><span class="koboSpan" id="kobo.250.3">For </span><a id="_idIndexMarker601"/><span class="koboSpan" id="kobo.251.1">example, it will pick all JavaScript files and bundle them into a single JavaScript file, though you can customize the way it bundles them by using a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.252.1">webpack.config.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.253.1"> configuration.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.254.1">Jest</span></strong><span class="koboSpan" id="kobo.255.1"> (</span><a href="https://jestjs.io"><span class="koboSpan" id="kobo.256.1">https://jestjs.io</span></a><span class="koboSpan" id="kobo.257.1">): Jest is a </span><a id="_idIndexMarker602"/><span class="koboSpan" id="kobo.258.1">JavaScript testing framework maintained </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">by </span></span><span class="No-Break"><a id="_idIndexMarker603"/></span><span class="No-Break"><span class="koboSpan" id="kobo.260.1">Facebook.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.261.1">ESLint</span></strong><span class="koboSpan" id="kobo.262.1"> (</span><a href="https://eslint.org"><span class="koboSpan" id="kobo.263.1">https://eslint.org</span></a><span class="koboSpan" id="kobo.264.1">): ESLint is a</span><a id="_idIndexMarker604"/><span class="koboSpan" id="kobo.265.1"> linter that allows you to maintain code quality. </span><span class="koboSpan" id="kobo.265.2">It is very similar to </span><em class="italic"><span class="koboSpan" id="kobo.266.1">Checkstyle</span></em><span class="koboSpan" id="kobo.267.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">Java world.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.269.1">Babel</span></strong><span class="koboSpan" id="kobo.270.1"> (</span><a href="https://babeljs.io"><span class="koboSpan" id="kobo.271.1">https://babeljs.io</span></a><span class="koboSpan" id="kobo.272.1">): Babel is</span><a id="_idIndexMarker605"/><span class="koboSpan" id="kobo.273.1"> a JavaScript transcompiler tool that converts JavaScript code to backward-compatible JavaScript code. </span><span class="koboSpan" id="kobo.273.2">The latest JavaScript draft </span><a id="_idIndexMarker606"/><span class="koboSpan" id="kobo.274.1">version is </span><strong class="bold"><span class="koboSpan" id="kobo.275.1">ECMAScript 2020</span></strong><span class="koboSpan" id="kobo.276.1">, also referred to as </span><strong class="bold"><span class="koboSpan" id="kobo.277.1">ES10</span></strong><span class="koboSpan" id="kobo.278.1">. </span><span class="koboSpan" id="kobo.278.2">The latest JavaScript</span><a id="_idIndexMarker607"/><span class="koboSpan" id="kobo.279.1"> stable version is </span><strong class="bold"><span class="koboSpan" id="kobo.280.1">ECMAScript 2018</span></strong><span class="koboSpan" id="kobo.281.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.282.1">ES9</span></strong><span class="koboSpan" id="kobo.283.1">). </span><span class="koboSpan" id="kobo.283.2">Babel allows you to generate optimized backward-compatible code from JavaScript code written using the </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">latest versions.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.285.1">You can find </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">react-scripts</span></strong><span class="koboSpan" id="kobo.287.1"> under the </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">dependencies</span></strong><span class="koboSpan" id="kobo.289.1"> field in </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">package.json</span></strong><span class="koboSpan" id="kobo.291.1">. </span><span class="koboSpan" id="kobo.291.2">Let’s understand each of these commands, </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">start</span></strong><span class="koboSpan" id="kobo.294.1">: This command allows you to start the development server in a node environment. </span><span class="koboSpan" id="kobo.294.2">It also provides the hot reload feature, which means any changes to the React code would be reflected in the application, without a restart being required. </span><span class="koboSpan" id="kobo.294.3">Therefore, if there are any linting or code issues, they will show up accordingly in the console (terminal window) and </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">web browser.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">build</span></strong><span class="koboSpan" id="kobo.297.1">: This command packages the React application code for production deployment. </span><span class="koboSpan" id="kobo.297.2">It does the bundling of the JavaScript files in one, the CSS files into another, and then minifies and optimizes the code files. </span><span class="koboSpan" id="kobo.297.3">You can then deploy this bundle on any </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">web server.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.299.1">test</span></strong><span class="koboSpan" id="kobo.300.1">: This command executes a test using the test runner (the Jest tool). </span><span class="koboSpan" id="kobo.300.2">It executes all test files with extensions such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">.test.js</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.302.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">.spec.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">eject</span></strong><span class="koboSpan" id="kobo.306.1">: React comes with default build configurations such as webpack, Babel, and so on. </span><span class="koboSpan" id="kobo.306.2">The build configuration has the best practices already implemented to optimize the built app. </span><span class="koboSpan" id="kobo.306.3">This </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">eject</span></strong><span class="koboSpan" id="kobo.308.1"> command allows you to eject the hidden configuration, after which you can override and customize the build configuration. </span><span class="koboSpan" id="kobo.308.2">However, you should do this with the utmost care because this is a one-way activity, and you can’t </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">reverse it.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.310.1">Let’s take a closer look at</span><a id="_idIndexMarker608"/><span class="koboSpan" id="kobo.311.1"> how React works in the </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">next subsection.</span></span></p>
<h2 id="_idParaDest-177"><a id="_idTextAnchor176"/><span class="koboSpan" id="kobo.313.1">Bootstrapping a React app</span></h2>
<p><span class="koboSpan" id="kobo.314.1">A web page is nothing but an HTML document. </span><span class="koboSpan" id="kobo.314.2">HTML documents contain the DOM, a tree-like structure of HTML elements. </span><span class="koboSpan" id="kobo.314.3">Any changes to the DOM are reflected in the rendering of the HTML </span><a id="_idIndexMarker609"/><span class="koboSpan" id="kobo.315.1">document in the browser. </span><span class="koboSpan" id="kobo.315.2">Making changes in the actual DOM— and, specifically to the nth level—is a heavy operation in terms of traversal and rendering the DOM, because each change is done on the whole DOM, and this is a time- and </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">memory-consuming operation.</span></span></p>
<p><span class="koboSpan" id="kobo.317.1">React uses a VDOM to make these operations lightweight. </span><span class="koboSpan" id="kobo.317.2">A VDOM is an in-memory copy of the actual DOM. </span><span class="koboSpan" id="kobo.317.3">React maintains the VDOM using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">react-dom</span></strong><span class="koboSpan" id="kobo.319.1"> package. </span><span class="koboSpan" id="kobo.319.2">Therefore, when you initialize the React app, you first pass the root HTML </span><strong class="source-inline"><span class="koboSpan" id="kobo.320.1">ID</span></strong><span class="koboSpan" id="kobo.321.1"> element to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.322.1">ReactDOM</span></strong><span class="koboSpan" id="kobo.323.1"> object’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.324.1">render</span></strong><span class="koboSpan" id="kobo.325.1"> function. </span><span class="koboSpan" id="kobo.325.2">React writes the VDOM under this root element after its </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">first render.</span></span></p>
<p><span class="koboSpan" id="kobo.327.1">After the first render, only the necessary changes are written to the actual DOM based on the changes in React components and their state. </span><span class="koboSpan" id="kobo.327.2">The React components’ </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">render</span></strong><span class="koboSpan" id="kobo.329.1"> function returns the markup in JSX syntax. </span><span class="koboSpan" id="kobo.329.2">Then, React transforms it to HTML markup and compares the generated VDOM with the actual HTML DOM, and only makes the necessary changes to the actual DOM. </span><span class="koboSpan" id="kobo.329.3">This process then continues till the components get changed. </span><span class="koboSpan" id="kobo.329.4">Let’s explore how the first render </span><span class="No-Break"><span class="koboSpan" id="kobo.330.1">takes place.</span></span></p>
<p><span class="koboSpan" id="kobo.331.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">pubic/index.html</span></strong><span class="koboSpan" id="kobo.333.1"> file contains the main HTML file. </span><span class="koboSpan" id="kobo.333.2">This is an application skeleton that contains the web app’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">title</span></strong><span class="koboSpan" id="kobo.335.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">meta</span></strong><span class="koboSpan" id="kobo.337.1"> elements, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">body</span></strong><span class="koboSpan" id="kobo.339.1"> element. </span><span class="koboSpan" id="kobo.339.2">It also contains a </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">div</span></strong><span class="koboSpan" id="kobo.341.1"> element (under </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">body</span></strong><span class="koboSpan" id="kobo.343.1">) with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">ID</span></strong><span class="koboSpan" id="kobo.345.1"> as </span><strong class="source-inline"><span class="koboSpan" id="kobo.346.1">root</span></strong><span class="koboSpan" id="kobo.347.1">. </span><span class="koboSpan" id="kobo.347.2">You pass this root element to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">render</span></strong><span class="koboSpan" id="kobo.349.1"> function of </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">ReactDOM</span></strong><span class="koboSpan" id="kobo.351.1"> in </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">index.js</span></strong><span class="koboSpan" id="kobo.353.1">, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">src</span></strong><span class="koboSpan" id="kobo.355.1"> directory. </span><span class="koboSpan" id="kobo.355.2">This is the entry point of the React app. </span><span class="koboSpan" id="kobo.355.3">Let’s have a look at its code, </span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.357.1">
import React from 'react';import ReactDOM from 'react-dom/client';
import '</span><strong class="bold"><span class="koboSpan" id="kobo.358.1">./index.css'</span></strong><span class="koboSpan" id="kobo.359.1">;
import </span><strong class="bold"><span class="koboSpan" id="kobo.360.1">App</span></strong><span class="koboSpan" id="kobo.361.1"> from '</span><strong class="bold"><span class="koboSpan" id="kobo.362.1">./App</span></strong><span class="koboSpan" id="kobo.363.1">';
const root = </span><strong class="bold"><span class="koboSpan" id="kobo.364.1">ReactDOM.createRoot</span></strong><span class="koboSpan" id="kobo.365.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.366.1">document.getElementById('root')</span></strong><span class="koboSpan" id="kobo.367.1">);
</span><strong class="bold"><span class="koboSpan" id="kobo.368.1">root.render</span></strong><span class="koboSpan" id="kobo.369.1">(
  &lt;React.StrictMode&gt;
    &lt;</span><strong class="bold"><span class="koboSpan" id="kobo.370.1">App</span></strong><span class="koboSpan" id="kobo.371.1"> /&gt;
  &lt;/React.StrictMode&gt;
);</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/index.js"><span class="No-Break"><span class="koboSpan" id="kobo.372.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/index.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.373.1">Here, React uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.374.1">ReactDOM</span></strong><span class="koboSpan" id="kobo.375.1"> object from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">react-dom</span></strong><span class="koboSpan" id="kobo.377.1"> package to render the page. </span><span class="koboSpan" id="kobo.377.2">First it creates the root object by calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.378.1">createRoot</span></strong><span class="koboSpan" id="kobo.379.1"> method and passing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.380.1">root</span></strong><span class="koboSpan" id="kobo.381.1"> element. </span><span class="koboSpan" id="kobo.381.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">document.getElementById('root')</span></strong><span class="koboSpan" id="kobo.383.1"> method fetches </span><strong class="source-inline"><span class="koboSpan" id="kobo.384.1">&lt;div id= "root"&gt;</span></strong><span class="koboSpan" id="kobo.385.1"> from inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">&lt;body&gt;</span></strong><span class="koboSpan" id="kobo.387.1"> element </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.389.1">index.html</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.391.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">render()</span></strong><span class="koboSpan" id="kobo.393.1"> function of</span><a id="_idIndexMarker610"/><span class="koboSpan" id="kobo.394.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.395.1">root</span></strong><span class="koboSpan" id="kobo.396.1"> object contains an argument: element of type </span><strong class="source-inline"><span class="koboSpan" id="kobo.397.1">ReactNode</span></strong><span class="koboSpan" id="kobo.398.1">. </span><span class="koboSpan" id="kobo.398.2">You pass an </span><strong class="source-inline"><span class="koboSpan" id="kobo.399.1">&lt;App /&gt;</span></strong><span class="koboSpan" id="kobo.400.1"> tag component wrapped with React’s strict mode component as an </span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">element argument.</span></span></p>
<p><span class="koboSpan" id="kobo.402.1">App components can be a single component or a parent component with single or multilayer child components. </span><span class="koboSpan" id="kobo.402.2">A single component won’t contain any other React component; it simply contains the JSX, and that’s it. </span><span class="koboSpan" id="kobo.402.3">However, parent components may contain one or more child components, and those child components may contain one or more child components, and so on. </span><span class="koboSpan" id="kobo.402.4">For example, an </span><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">App</span></strong><span class="koboSpan" id="kobo.404.1"> component may have </span><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">header</span></strong><span class="koboSpan" id="kobo.406.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">footer</span></strong><span class="koboSpan" id="kobo.408.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.409.1">content</span></strong><span class="koboSpan" id="kobo.410.1"> components. </span><span class="koboSpan" id="kobo.410.2">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.411.1">content</span></strong><span class="koboSpan" id="kobo.412.1"> component may have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">cart</span></strong><span class="koboSpan" id="kobo.414.1"> component, and then the </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">cart</span></strong><span class="koboSpan" id="kobo.416.1"> component may have items </span><span class="No-Break"><span class="koboSpan" id="kobo.417.1">inside it.</span></span></p>
<p><span class="koboSpan" id="kobo.418.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">&lt;React.StrictMode&gt;</span></strong><span class="koboSpan" id="kobo.420.1"> component is a special React component that gets rendered twice in development mode to check for best practices, deprecated methods, and potential risks in your React components, and prints warnings and suggestions in the console log. </span><span class="koboSpan" id="kobo.420.2">It has no impact on the production build because it only works in </span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">development mode.</span></span></p>
<p><span class="koboSpan" id="kobo.422.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">render()</span></strong><span class="koboSpan" id="kobo.424.1"> function transforms the JSX of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">App</span></strong><span class="koboSpan" id="kobo.426.1"> component to HTML and adds it inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">&lt;div id="root"&gt;</span></strong><span class="koboSpan" id="kobo.428.1"> tag, then it compares the VDOM with the real DOM and makes the necessary changes in the real DOM. </span><span class="koboSpan" id="kobo.428.2">This is how React components get rendered on </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">the browser.</span></span></p>
<p><span class="koboSpan" id="kobo.430.1">You now understand that </span><a id="_idIndexMarker611"/><span class="koboSpan" id="kobo.431.1">React components are key here. </span><span class="koboSpan" id="kobo.431.2">Let’s deep dive into them in the </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">next section.</span></span></p>
<h1 id="_idParaDest-178"><a id="_idTextAnchor177"/><span class="koboSpan" id="kobo.433.1">Exploring React components and other features</span></h1>
<p><span class="koboSpan" id="kobo.434.1">Each page in an app is built up </span><a id="_idIndexMarker612"/><span class="koboSpan" id="kobo.435.1">using React components — for example, the </span><strong class="bold"><span class="koboSpan" id="kobo.436.1">Product Listing</span></strong><span class="koboSpan" id="kobo.437.1"> page of Amazon can broadly be divided into </span><em class="italic"><span class="koboSpan" id="kobo.438.1">Header</span></em><span class="koboSpan" id="kobo.439.1">, </span><em class="italic"><span class="koboSpan" id="kobo.440.1">Footer</span></em><span class="koboSpan" id="kobo.441.1">, </span><em class="italic"><span class="koboSpan" id="kobo.442.1">Content</span></em><span class="koboSpan" id="kobo.443.1">, </span><em class="italic"><span class="koboSpan" id="kobo.444.1">Product List</span></em><span class="koboSpan" id="kobo.445.1">, </span><em class="italic"><span class="koboSpan" id="kobo.446.1">Filter and Sorting options</span></em><span class="koboSpan" id="kobo.447.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.448.1">Product Card</span></em><span class="koboSpan" id="kobo.449.1"> components. </span><span class="koboSpan" id="kobo.449.2">You can create components in React in two ways: by using JavaScript classes </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">or functions.</span></span></p>
<p><span class="koboSpan" id="kobo.451.1">Let’s create an example header component in React with both a function and </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">a class.</span></span></p>
<p><span class="koboSpan" id="kobo.453.1">You can either write a plain old JavaScript function or an </span><strong class="bold"><span class="koboSpan" id="kobo.454.1">ECMAScript 6</span></strong><span class="koboSpan" id="kobo.455.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.456.1">ES6</span></strong><span class="koboSpan" id="kobo.457.1">) arrow function. </span><span class="koboSpan" id="kobo.457.2">Components created using either </span><a id="_idIndexMarker613"/><span class="koboSpan" id="kobo.458.1">arrow functions or plain JavaScript functions are called React </span><strong class="bold"><span class="koboSpan" id="kobo.459.1">functional components</span></strong><span class="koboSpan" id="kobo.460.1">. </span><span class="koboSpan" id="kobo.460.2">We’ll mostly use functional components in our code. </span><span class="koboSpan" id="kobo.460.3">In the following code snippet, check out the </span><strong class="source-inline"><span class="koboSpan" id="kobo.461.1">Header</span></strong><span class="koboSpan" id="kobo.462.1"> component using a JavaScript </span><span class="No-Break"><span class="koboSpan" id="kobo.463.1">arrow function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.464.1">
export default const Header = (props) </span><strong class="bold"><span class="koboSpan" id="kobo.465.1">=&gt;</span></strong><span class="koboSpan" id="kobo.466.1"> {  return (
    &lt;div&gt;
      &lt;h1&gt;{props.title}&lt;/h1&gt;
    &lt;div&gt;
  )
}</span></pre>
<p><span class="koboSpan" id="kobo.467.1">Let’s create the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">Header</span></strong><span class="koboSpan" id="kobo.469.1"> component using a JavaScript class, </span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.471.1">
export default </span><strong class="bold"><span class="koboSpan" id="kobo.472.1">class</span></strong><span class="koboSpan" id="kobo.473.1"> Header extends </span><strong class="bold"><span class="koboSpan" id="kobo.474.1">React.Component</span></strong><span class="koboSpan" id="kobo.475.1"> {  </span><strong class="bold"><span class="koboSpan" id="kobo.476.1">render()</span></strong><span class="koboSpan" id="kobo.477.1"> {
    </span><strong class="bold"><span class="koboSpan" id="kobo.478.1">return</span></strong><span class="koboSpan" id="kobo.479.1"> (
      &lt;div&gt;
        &lt;h1&gt;{this.props.title}&lt;/h1&gt;
      &lt;div&gt;
    )
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.480.1">Let’s understand both components point by point, </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.482.1">Both return JSX that looks like HTML, which gets rendered after transformation (from JSX </span><span class="No-Break"><span class="koboSpan" id="kobo.483.1">to HTML).</span></span></li>
<li><span class="koboSpan" id="kobo.484.1">Both export the function </span><a id="_idIndexMarker614"/><span class="koboSpan" id="kobo.485.1">and class respectively so that they can be imported by </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">other components.</span></span></li>
<li><span class="koboSpan" id="kobo.487.1">Both have props—one as an argument and one bound with this scope, which is part of </span><strong class="source-inline"><span class="koboSpan" id="kobo.488.1">React.Component</span></strong><span class="koboSpan" id="kobo.489.1">. </span><span class="koboSpan" id="kobo.489.2">Props represent the attributes and their values—for example, here, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">title</span></strong><span class="koboSpan" id="kobo.491.1"> attribute is used. </span><span class="koboSpan" id="kobo.491.2">When it gets rendered, it is replaced by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">title</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.493.1">attribute’s value.</span></span></li>
<li><span class="koboSpan" id="kobo.494.1">The class needs a </span><strong class="source-inline"><span class="koboSpan" id="kobo.495.1">render()</span></strong><span class="koboSpan" id="kobo.496.1"> function, whereas the function simply needs a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">return</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.498.1"> statement.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.499.1">Let’s see how the </span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">Header</span></strong><span class="koboSpan" id="kobo.501.1"> component could be used. </span><span class="koboSpan" id="kobo.501.2">You can use this </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">Header</span></strong><span class="koboSpan" id="kobo.503.1"> component as you would use any other HTML tag in your JSX code, as </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">shown next:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.505.1">
 &lt;Header title="Sample Ecommerce App" /&gt;</span></pre> <p><span class="koboSpan" id="kobo.506.1">Here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">title</span></strong><span class="koboSpan" id="kobo.508.1"> is the property of </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">Header</span></strong><span class="koboSpan" id="kobo.510.1"> component. </span><span class="koboSpan" id="kobo.510.2">It describes how properties (props) of components are passed. </span><span class="koboSpan" id="kobo.510.3">When this </span><strong class="source-inline"><span class="koboSpan" id="kobo.511.1">Header</span></strong><span class="koboSpan" id="kobo.512.1"> component gets rendered, it will show the </span><strong class="source-inline"><span class="koboSpan" id="kobo.513.1">title</span></strong><span class="koboSpan" id="kobo.514.1"> value wrapped in an </span><strong class="source-inline"><span class="koboSpan" id="kobo.515.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">H1&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.517.1"> element.</span></span></p>
<p><span class="koboSpan" id="kobo.518.1">Let’s explore the JSX next. </span><span class="koboSpan" id="kobo.518.2">This is how you use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.519.1">props</span></strong><span class="koboSpan" id="kobo.520.1">: you add an attribute (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.521.1">title</span></strong><span class="koboSpan" id="kobo.522.1">) to its value while using the component. </span><span class="koboSpan" id="kobo.522.2">Inside the component, you can access these attributes (properties) by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">props</span></strong><span class="koboSpan" id="kobo.524.1"> directly or using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">{ title }</span></strong><span class="koboSpan" id="kobo.526.1"> de-structuring form in functional components and by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">this.props</span></strong><span class="koboSpan" id="kobo.528.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.529.1">class components.</span></span></p>
<h2 id="_idParaDest-179"><a id="_idTextAnchor178"/><span class="koboSpan" id="kobo.530.1">Exploring JSX</span></h2>
<p><span class="koboSpan" id="kobo.531.1">React components would return the JSX. </span><span class="koboSpan" id="kobo.531.2">You can write HTML code to design the components because JSX is very similar to HTML, except for the HTML attributes. </span><span class="koboSpan" id="kobo.531.3">Therefore, you need to make sure to update attributes such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">class</span></strong><span class="koboSpan" id="kobo.533.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">className</span></strong><span class="koboSpan" id="kobo.535.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">for</span></strong><span class="koboSpan" id="kobo.537.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">htmlFor</span></strong><span class="koboSpan" id="kobo.539.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">fill-rule</span></strong><span class="koboSpan" id="kobo.541.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">fillRule</span></strong><span class="koboSpan" id="kobo.543.1">, and so on. </span><span class="koboSpan" id="kobo.543.2">The advantage of using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.544.1">React.StrictMode</span></strong><span class="koboSpan" id="kobo.545.1"> component is that you get a warning and a suggestion to use the correct JSX attribute names if you use HTML attributes or have </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">a typo.</span></span></p>
<p><span class="koboSpan" id="kobo.547.1">You can also put any JavaScript expressions inside JSX or an element’s attributes to make the component </span><a id="_idIndexMarker615"/><span class="koboSpan" id="kobo.548.1">dynamic by using the expression wrapped in curly </span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">braces (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.550.1">{}</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.551.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.552.1">Let’s have a look at some example code to understand both JSX and expressions. </span><span class="koboSpan" id="kobo.552.2">The following JSX code snippet has been taken from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">CartItem</span></strong><span class="koboSpan" id="kobo.554.1"> component. </span><span class="koboSpan" id="kobo.554.2">Check out the highlighted code for expressions; the rest of the code is JSX, which is very similar </span><span class="No-Break"><span class="koboSpan" id="kobo.555.1">to HTML:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.556.1">
&lt;div className="w-32"&gt; &lt;img className="h-24" </span><strong class="bold"><span class="koboSpan" id="kobo.557.1">src={item?.imageUrl}</span></strong><span class="koboSpan" id="kobo.558.1"> alt="" /&gt;
&lt;/div&gt;
&lt;div className="flex flex-col justify-between
   ml-4 flexgrow"&gt;
 &lt;Link </span><strong class="bold"><span class="koboSpan" id="kobo.559.1">to={"/products/" + item.id}</span></strong><span class="koboSpan" id="kobo.560.1"> className="font-bold
      text-sm text-indigo-500 hover:text-indigo-700"&gt;
   </span><strong class="bold"><span class="koboSpan" id="kobo.561.1">{item?.name}</span></strong><span class="koboSpan" id="kobo.562.1">
 &lt;/Link&gt;
 &lt;span className="text-xs"&gt;</span><strong class="bold"><span class="koboSpan" id="kobo.563.1">Author: {author}</span></strong><span class="koboSpan" id="kobo.564.1">&lt;/span&gt;
 &lt;button className="font-semibold hover:text-red-500
   text-indigo-500 text-xs text-left"
     </span><strong class="bold"><span class="koboSpan" id="kobo.565.1">onClick={() =&gt; removeItem(item.id)}</span></strong><span class="koboSpan" id="kobo.566.1">&gt;
  Remove
 &lt;/button&gt;
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.567.1">The preceding code fragment represents a cart item that shows the product image, product name, author, and </span><strong class="bold"><span class="koboSpan" id="kobo.568.1">Remove</span></strong><span class="koboSpan" id="kobo.569.1"> button. </span><span class="koboSpan" id="kobo.569.2">The product name is also a link that links to the product detail page. </span><span class="koboSpan" id="kobo.569.3">You can design these components using JSX (read HTML) as shown. </span><span class="koboSpan" id="kobo.569.4">Please also note that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">class</span></strong><span class="koboSpan" id="kobo.571.1"> attribute name is changed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.572.1">className</span></strong><span class="koboSpan" id="kobo.573.1"> because it is JSX. </span><strong class="source-inline"><span class="koboSpan" id="kobo.574.1">Link</span></strong><span class="koboSpan" id="kobo.575.1"> is a part of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.576.1">react-router-dom</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.577.1"> library.</span></span></p>
<p><span class="koboSpan" id="kobo.578.1">You are done with the</span><a id="_idIndexMarker616"/><span class="koboSpan" id="kobo.579.1"> cart item’s design part. </span><span class="koboSpan" id="kobo.579.2">Now, you need a mechanism to populate the values and add the event handling in it. </span><span class="koboSpan" id="kobo.579.3">This is where a JSX expression </span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">helps you.</span></span></p>
<p><span class="koboSpan" id="kobo.581.1">You use </span><strong class="source-inline"><span class="koboSpan" id="kobo.582.1">item</span></strong><span class="koboSpan" id="kobo.583.1"> — an object that represents the cart item, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.584.1">author</span></strong><span class="koboSpan" id="kobo.585.1"> — a variable that contains the author’s name. </span><span class="koboSpan" id="kobo.585.2">Both are part of the React component’s state. </span><span class="koboSpan" id="kobo.585.3">You will learn more about the state in the next subsection, but for the time being you can think of them as variables defined in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.586.1">CartItem</span></strong><span class="koboSpan" id="kobo.587.1"> component. </span><span class="koboSpan" id="kobo.587.2">Once you write the JSX (read HTML), dynamic values (from variables) and interaction (for events) can be defined using the expressions wrapped inside curly </span><span class="No-Break"><span class="koboSpan" id="kobo.588.1">braces (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.589.1">{}</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.591.1">Let’s understand each of the expressions </span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">src={item?.imageUrl}</span></strong><span class="koboSpan" id="kobo.594.1">: You get the item (product) image URL as part of the API response. </span><span class="koboSpan" id="kobo.594.2">You simply assign it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.595.1">src</span></strong><span class="koboSpan" id="kobo.596.1"> attribute of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.597.1">img</span></strong><span class="koboSpan" id="kobo.598.1"> tag. </span><span class="koboSpan" id="kobo.598.2">Note that the dot operator (</span><strong class="source-inline"><span class="koboSpan" id="kobo.599.1">.</span></strong><span class="koboSpan" id="kobo.600.1">) allows you to access the property of an object. </span><span class="koboSpan" id="kobo.600.2">The code may throw an error if you try to read the property of any </span><strong class="source-inline"><span class="koboSpan" id="kobo.601.1">null</span></strong><span class="koboSpan" id="kobo.602.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.603.1">undefined</span></strong><span class="koboSpan" id="kobo.604.1"> object. </span><span class="koboSpan" id="kobo.604.2">You can avoid that by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">?.</span></strong><span class="koboSpan" id="kobo.606.1"> operator. </span><span class="koboSpan" id="kobo.606.2">Then, the property (in this case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">imageUrl</span></strong><span class="koboSpan" id="kobo.608.1">) will only be read if an object (in this case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.609.1">item</span></strong><span class="koboSpan" id="kobo.610.1">) is not </span><strong class="source-inline"><span class="koboSpan" id="kobo.611.1">null</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.612.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.613.1">undefined</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.614.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.615.1">to={"/products/" + item.id}</span></strong><span class="koboSpan" id="kobo.616.1">: Here, links to an attribute are formed by using the object item’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.617.1">id</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.618.1"> property.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.619.1">{item?.name}</span></strong><span class="koboSpan" id="kobo.620.1">: Here, the name of the product is displayed using the name property of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">item</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.622.1"> object.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">Author: {author}</span></strong><span class="koboSpan" id="kobo.624.1">: The author value is displayed using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">author</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.626.1"> variable.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">onClick={() =&gt; removeItem(item.id)}</span></strong><span class="koboSpan" id="kobo.628.1">: This is the way you associate a user-defined function with an event. </span><span class="koboSpan" id="kobo.628.2">Here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">removeItem()</span></strong><span class="koboSpan" id="kobo.630.1"> will be called by passing the item object’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">id</span></strong><span class="koboSpan" id="kobo.632.1"> property on the click of a button. </span><span class="koboSpan" id="kobo.632.2">If you are not passing any argument or using multiple statements, then you can directly pass the function name instead of using the arrow function—for </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">example, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">onClick={removeItem}</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.636.1">Next, we will deep </span><a id="_idIndexMarker617"/><span class="koboSpan" id="kobo.637.1">dive into the state of React components. </span><span class="koboSpan" id="kobo.637.2">Let’s see how </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">this works.</span></span></p>
<h2 id="_idParaDest-180"><a id="_idTextAnchor179"/><span class="koboSpan" id="kobo.639.1">Understanding React hooks</span></h2>
<p><span class="koboSpan" id="kobo.640.1">Components are dynamic and </span><a id="_idIndexMarker618"/><span class="koboSpan" id="kobo.641.1">contain a state. </span><span class="koboSpan" id="kobo.641.2">The state represents the data and metadata held by the component at a given point in time. </span><span class="koboSpan" id="kobo.641.3">There are two levels of state: a global (app-level) state and a local (</span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">component-level) state.</span></span></p>
<p><span class="koboSpan" id="kobo.643.1">Earlier (prior to React version 16.8), the state was only supported in components defined using classes. </span><span class="koboSpan" id="kobo.643.2">Now, React supports the state in both functional and class components. </span><span class="koboSpan" id="kobo.643.3">React supports the state in </span><a id="_idIndexMarker619"/><span class="koboSpan" id="kobo.644.1">functional components using </span><strong class="bold"><span class="koboSpan" id="kobo.645.1">hooks</span></strong><span class="koboSpan" id="kobo.646.1"> such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">useState()</span></strong><span class="koboSpan" id="kobo.648.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">useContext()</span></strong><span class="koboSpan" id="kobo.650.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">so on.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.652.1">What are hooks?</span></p>
<p class="callout"><span class="koboSpan" id="kobo.653.1">Hooks are special React built-in functions or user-defined functions that can be stateful and are used to manage the side effects of React functional components. </span><span class="koboSpan" id="kobo.653.2">Popular and frequently used hooks are </span><strong class="source-inline"><span class="koboSpan" id="kobo.654.1">useState()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.655.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.656.1">useEffect()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.658.1">React introduced hooks (a set of functions) in the 16.8 version, which introduced many features to functional components that were earlier not supported, including state and events such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">componentDidMount</span></strong><span class="koboSpan" id="kobo.660.1"> (a lifecycle method in the class that indicates a component was mounted), and you can now perform certain operations such as loading data using APIs, among </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">other things.</span></span></p>
<p><span class="koboSpan" id="kobo.662.1">Let’s discuss React </span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">hooks next.</span></span></p>
<p><span class="koboSpan" id="kobo.664.1">Each hook in React represents a special feature that you can use in functional components. </span><span class="koboSpan" id="kobo.664.2">Let’s discuss the most popular and common hooks one by one, </span><span class="No-Break"><span class="koboSpan" id="kobo.665.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.666.1">useState</span></strong><span class="koboSpan" id="kobo.667.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.668.1">useState()</span></strong><span class="koboSpan" id="kobo.669.1"> allows you to define and maintain the state. </span><span class="koboSpan" id="kobo.669.2">Let’s examine how you use this hook. </span><span class="koboSpan" id="kobo.669.3">First, you import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.670.1">useState()</span></strong><span class="koboSpan" id="kobo.671.1"> hook at the top of the component </span><a id="_idIndexMarker620"/><span class="koboSpan" id="kobo.672.1">code file, </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.674.1">
import {useState} from "react";</span></pre></li> </ul>
<p><span class="koboSpan" id="kobo.675.1">Next, inside your component’s arrow function code, define the state before the </span><strong class="source-inline"><span class="koboSpan" id="kobo.676.1">return</span></strong><span class="koboSpan" id="kobo.677.1"> statement, as </span><span class="No-Break"><span class="koboSpan" id="kobo.678.1">shown next:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.679.1">
 const [total, setTotal] = useState(0);</span></pre> <p><span class="koboSpan" id="kobo.680.1">You need to define both state and state setter functions in an array while declaring the state. </span><span class="koboSpan" id="kobo.680.2">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.681.1">total</span></strong><span class="koboSpan" id="kobo.682.1"> state is defined with its setter function. </span><span class="koboSpan" id="kobo.682.2">You can use any type of state, such as an </span><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">object</span></strong><span class="koboSpan" id="kobo.684.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">array</span></strong><span class="koboSpan" id="kobo.686.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.687.1">string</span></strong><span class="koboSpan" id="kobo.688.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.689.1">number</span></strong><span class="koboSpan" id="kobo.690.1">. </span><span class="koboSpan" id="kobo.690.2">The total state is of type </span><strong class="source-inline"><span class="koboSpan" id="kobo.691.1">number</span></strong><span class="koboSpan" id="kobo.692.1">; therefore, it is initialized with </span><strong class="source-inline"><span class="koboSpan" id="kobo.693.1">0</span></strong><span class="koboSpan" id="kobo.694.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.695.1">setTotal()</span></strong><span class="koboSpan" id="kobo.696.1"> is a setter function. </span><span class="koboSpan" id="kobo.696.2">The setter function allows you to update the state (</span><strong class="source-inline"><span class="koboSpan" id="kobo.697.1">total</span></strong><span class="koboSpan" id="kobo.698.1"> here)—for example, you could update the total state by calling </span><strong class="source-inline"><span class="koboSpan" id="kobo.699.1">setTotal(100)</span></strong><span class="koboSpan" id="kobo.700.1">, in which case the </span><strong class="source-inline"><span class="koboSpan" id="kobo.701.1">total</span></strong><span class="koboSpan" id="kobo.702.1"> state would be changed from </span><strong class="source-inline"><span class="koboSpan" id="kobo.703.1">0</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.704.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.705.1">100</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.707.1">React tracks the state’s setter function and whenever it is called. </span><span class="koboSpan" id="kobo.707.2">React updates the state of the component and re-renders the component. </span><span class="koboSpan" id="kobo.707.3">The naming convention of the setter function is to prefix the state name with </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">set</span></strong><span class="koboSpan" id="kobo.709.1"> and make the state’s first letter a capital letter. </span><span class="koboSpan" id="kobo.709.2">Therefore, we have used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">setTotal()</span></strong><span class="koboSpan" id="kobo.711.1"> name for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">total</span></strong><span class="koboSpan" id="kobo.713.1"> state. </span><span class="koboSpan" id="kobo.713.2">You’ll use </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">useState()</span></strong><span class="koboSpan" id="kobo.715.1"> for local state management in </span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">most components.</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">useEffect</span></strong><span class="koboSpan" id="kobo.718.1">: You use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.719.1">useEffect()</span></strong><span class="koboSpan" id="kobo.720.1"> hook when you want to do something after rendering a component. </span><span class="koboSpan" id="kobo.720.2">This gets called after each render. </span><span class="koboSpan" id="kobo.720.3">You can also use it when you want to load the initial data from an API or add an event listener. </span><span class="koboSpan" id="kobo.720.4">However, if an API call should be made once, then you can pass the empty array (</span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">[]</span></strong><span class="koboSpan" id="kobo.722.1">) dependency while calling it. </span><span class="koboSpan" id="kobo.722.2">You’ll find multiple instances of </span><strong class="source-inline"><span class="koboSpan" id="kobo.723.1">useEffect</span></strong><span class="koboSpan" id="kobo.724.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">ecomm-ui</span></strong><span class="koboSpan" id="kobo.726.1"> code when an empty array is passed for a </span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">single call.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.728.1">React recommends using multiple </span><strong class="source-inline"><span class="koboSpan" id="kobo.729.1">useEffect</span></strong><span class="koboSpan" id="kobo.730.1"> functions inside components for separating the concern. </span><span class="koboSpan" id="kobo.730.2">Also, make sure it returns an arrow function for cleanup. </span><span class="koboSpan" id="kobo.730.3">For example, when you add the event listener for any component, it should return an arrow function that removes the </span><span class="No-Break"><span class="koboSpan" id="kobo.731.1">event listener.</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">useContext</span></strong><span class="koboSpan" id="kobo.733.1">: You can pass props from one component to another. </span><span class="koboSpan" id="kobo.733.2">Sometimes, you must </span><a id="_idIndexMarker621"/><span class="koboSpan" id="kobo.734.1">use props drilling to the nth level. </span><span class="koboSpan" id="kobo.734.2">React also provides an alternative way to define these props so that they can be used in any component in a tree without using prop drilling. </span><span class="koboSpan" id="kobo.734.3">You would use it for props that are common across components, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.735.1">theme</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.736.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.737.1">isUserLoggedIn</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.738.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.739.1">React provides a </span><strong class="source-inline"><span class="koboSpan" id="kobo.740.1">createContext()</span></strong><span class="koboSpan" id="kobo.741.1"> function to create a context. </span><span class="koboSpan" id="kobo.741.2">It returns a provider and consumer to provide access to its values and changes respectively (see the next code block). </span><span class="koboSpan" id="kobo.741.3">However, </span><strong class="source-inline"><span class="koboSpan" id="kobo.742.1">useContext</span></strong><span class="koboSpan" id="kobo.743.1"> can easily make use of the context by removing the usage of the consumer, which is returned by </span><strong class="source-inline"><span class="koboSpan" id="kobo.744.1">createContext()</span></strong><span class="koboSpan" id="kobo.745.1">. </span><span class="koboSpan" id="kobo.745.2">The following code snippet depicts </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.746.1">useContext</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.747.1"> usage:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.748.1">
import {createContext} from "react";import ReactDOM from "react-dom";</span><strong class="bold"><span class="koboSpan" id="kobo.749.1">const LoggedInContext = createContext();</span></strong><span class="koboSpan" id="kobo.750.1">const App = () =&gt; {  return (    </span><strong class="bold"><span class="koboSpan" id="kobo.751.1">&lt;LoggedInContext.Provider isUserLoggedIn=true&gt;</span></strong><span class="koboSpan" id="kobo.752.1">      &lt;ProductList/&gt;    </span><strong class="bold"><span class="koboSpan" id="kobo.753.1">&lt;LoggedInContext.Provider/&gt;</span></strong><span class="koboSpan" id="kobo.754.1">  );}const ProductList = () =&gt; { return (   </span><strong class="bold"><span class="koboSpan" id="kobo.755.1">&lt;LoggedInContext.Consumer&gt; { isUserLoggedIn =&gt;</span></strong><span class="koboSpan" id="kobo.756.1">    </span><strong class="bold"><span class="koboSpan" id="kobo.757.1">&lt;div&gt;Is user logged-in: {isUserLoggedIn}&lt;/div&gt;</span></strong><span class="koboSpan" id="kobo.758.1">   </span><strong class="bold"><span class="koboSpan" id="kobo.759.1">} &lt;LoggedInContext.Consumer&gt;</span></strong><span class="koboSpan" id="kobo.760.1"> );}ReactDOM.render(&lt;App/&gt;,document.getElementById("root"));</span></pre></li> </ul>
<p><span class="koboSpan" id="kobo.761.1">You can simplify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.762.1">ProductList</span></strong><span class="koboSpan" id="kobo.763.1"> component’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.764.1">return</span></strong><span class="koboSpan" id="kobo.765.1"> block in the previous code </span><a id="_idIndexMarker622"/><span class="koboSpan" id="kobo.766.1">snippet (check the highlighted code) with </span><strong class="source-inline"><span class="koboSpan" id="kobo.767.1">useContext</span></strong><span class="koboSpan" id="kobo.768.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.770.1">
import {createContext, useContext} from "react";import ReactDOM from "react-dom";
</span><strong class="bold"><span class="koboSpan" id="kobo.771.1">const LoggedInContext = createContext();</span></strong><span class="koboSpan" id="kobo.772.1">
const App = () =&gt; {
  return (
    </span><strong class="bold"><span class="koboSpan" id="kobo.773.1">&lt;LoggedInContext.Provider isUserLoggedIn=true&gt;</span></strong><span class="koboSpan" id="kobo.774.1">
      &lt;ProductList/&gt;
    &lt;LoggedInContext.Provider/&gt;
  );
}
const ProductList = () =&gt; {
  </span><strong class="bold"><span class="koboSpan" id="kobo.775.1">const isUserLoggedIn = useContext(LoggedInContext);</span></strong><span class="koboSpan" id="kobo.776.1">
  </span><strong class="bold"><span class="koboSpan" id="kobo.777.1">return (</span></strong><span class="koboSpan" id="kobo.778.1">
   </span><strong class="bold"><span class="koboSpan" id="kobo.779.1">&lt;div&gt;Is user logged-in: {isUserLoggedIn}&lt;/div&gt;</span></strong><span class="koboSpan" id="kobo.780.1">
  </span><strong class="bold"><span class="koboSpan" id="kobo.781.1">);</span></strong><span class="koboSpan" id="kobo.782.1">
}
ReactDOM.render(&lt;App/&gt;, document.getElementById("root"));</span></pre>
<p><span class="koboSpan" id="kobo.783.1">This is how you can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">createContext</span></strong><span class="koboSpan" id="kobo.785.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.786.1">useContext</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.787.1"> hooks.</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">useReducer</span></strong><span class="koboSpan" id="kobo.789.1">: This is an advanced version of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">useState</span></strong><span class="koboSpan" id="kobo.791.1"> hook that not only allows you to use a component’s state but also provides better controls to manage its state by taking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.792.1">reducer</span></strong><span class="koboSpan" id="kobo.793.1"> function as a first argument. </span><span class="koboSpan" id="kobo.793.2">It takes the initial state as a </span><a id="_idIndexMarker623"/><span class="koboSpan" id="kobo.794.1">second argument. </span><span class="koboSpan" id="kobo.794.2">Check out its syntax, as seen in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.795.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.796.1">
const [state, dispatch] = useReducer(reducer, initialState);</span></pre></li> </ul>
<p><span class="koboSpan" id="kobo.797.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">reducer</span></strong><span class="koboSpan" id="kobo.799.1"> function is a special function that takes state and action as arguments and returns a new state. </span><span class="koboSpan" id="kobo.799.2">We’ll explore this more when we build the </span><strong class="source-inline"><span class="koboSpan" id="kobo.800.1">CartContext</span></strong><span class="koboSpan" id="kobo.801.1"> component later in </span><span class="No-Break"><span class="koboSpan" id="kobo.802.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.803.1">Now that you have learned the basic concepts of React, let’s add some styling to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.804.1">ecomm-ui</span></strong><span class="koboSpan" id="kobo.805.1"> application using </span><span class="No-Break"><span class="koboSpan" id="kobo.806.1">Tailwind CSS.</span></span></p>
<h2 id="_idParaDest-181"><a id="_idTextAnchor180"/><span class="koboSpan" id="kobo.807.1">Styling components using Tailwind</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.808.1">Tailwind CSS</span></strong><span class="koboSpan" id="kobo.809.1"> is a utility CSS framework that helps you to design a responsive UI. </span><span class="koboSpan" id="kobo.809.2">It supports theming, animation, pre-defined </span><a id="_idIndexMarker624"/><span class="koboSpan" id="kobo.810.1">padding and margins, flex, grids, and so on. </span><span class="koboSpan" id="kobo.810.2">You can install Tailwind and its peer packages using </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">npm</span></strong><span class="koboSpan" id="kobo.812.1">, as shown in the following command (executing it from the project </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">root directory):</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.814.1">
$ npm install -D tailwindcss</span></pre> <p><span class="koboSpan" id="kobo.815.1">Here, version 3.2.7 of Tailwind CSS </span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">was installed.</span></span></p>
<p><span class="koboSpan" id="kobo.817.1">Next, let’s configure Tailwind CSS. </span><span class="koboSpan" id="kobo.817.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.818.1">npx tailwindcss init</span></strong><span class="koboSpan" id="kobo.819.1"> command generates the Tailwind CSS configuration file with the default </span><span class="No-Break"><span class="koboSpan" id="kobo.820.1">empty values:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.821.1">
$ npx tailwindcss initCreated Tailwind CSS config file: tailwind.config.js</span></pre>
<p><span class="koboSpan" id="kobo.822.1">The previous command generates the </span><span class="No-Break"><span class="koboSpan" id="kobo.823.1">following file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.824.1">
/** @type {import('tailwindcss').Config} */module.exports = {
  content: [],
  theme: {
    extend: {},
  },
  plugins: [],
}</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/blob/main/Chapter07/ecomm-ui/tailwind.config.js"><span class="No-Break"><span class="koboSpan" id="kobo.825.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/blob/main/Chapter07/ecomm-ui/tailwind.config.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.826.1">Now, we can modify the </span><a id="_idIndexMarker625"/><span class="koboSpan" id="kobo.827.1">Tailwind CSS configuration to purge unused styles </span><span class="No-Break"><span class="koboSpan" id="kobo.828.1">in production.</span></span></p>
<h3><span class="koboSpan" id="kobo.829.1">Configuration to remove unused styles in production</span></h3>
<p><span class="koboSpan" id="kobo.830.1">You would like to keep the</span><a id="_idIndexMarker626"/><span class="koboSpan" id="kobo.831.1"> style sheet size down in a production environment because this improves the performance of the application. </span><span class="koboSpan" id="kobo.831.2">You can purge unnecessary styles by adding the following filters to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.832.1">content</span></strong><span class="koboSpan" id="kobo.833.1"> block of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1">tailwind.config.js</span></strong><span class="koboSpan" id="kobo.835.1"> file. </span><span class="koboSpan" id="kobo.835.2">Then, Tailwind can tree-shake unused styles while building the production build. </span><span class="koboSpan" id="kobo.835.3">Generated CSS files only contain the used styles in files matching the given filters. </span><span class="koboSpan" id="kobo.835.4">The code is illustrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">following snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.837.1">
module.exports = {  content: [</span><strong class="bold"><span class="koboSpan" id="kobo.838.1">"./src/**/*.{js,jsx,ts,tsx}"</span></strong><span class="koboSpan" id="kobo.839.1">,
            </span><strong class="bold"><span class="koboSpan" id="kobo.840.1">"./public/index.html</span></strong><span class="koboSpan" id="kobo.841.1">"],
  theme: {
    extend: {},
  },
  plugins: [],
}</span></pre>
<p><span class="koboSpan" id="kobo.842.1">Next, we will add</span><a id="_idIndexMarker627"/><span class="koboSpan" id="kobo.843.1"> Tailwind </span><span class="No-Break"><span class="koboSpan" id="kobo.844.1">to React.</span></span></p>
<h3><span class="koboSpan" id="kobo.845.1">Including Tailwind in React</span></h3>
<p><span class="koboSpan" id="kobo.846.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.847.1">src/index.css</span></strong><span class="koboSpan" id="kobo.848.1"> file that </span><strong class="source-inline"><span class="koboSpan" id="kobo.849.1">create-react-app</span></strong><span class="koboSpan" id="kobo.850.1"> generates for you by default and import Tailwind’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.851.1">base</span></strong><span class="koboSpan" id="kobo.852.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.853.1">components</span></strong><span class="koboSpan" id="kobo.854.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.855.1">utilities</span></strong><span class="koboSpan" id="kobo.856.1"> styles, replacing the original file contents </span><span class="No-Break"><span class="koboSpan" id="kobo.857.1">as </span></span><span class="No-Break"><a id="_idIndexMarker628"/></span><span class="No-Break"><span class="koboSpan" id="kobo.858.1">follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.859.1">
@tailwind base;@tailwind components;
@tailwind utilities;</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/index.css"><span class="No-Break"><span class="koboSpan" id="kobo.860.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/index.css</span></span></a></p>
<p><span class="koboSpan" id="kobo.861.1">These statements import the styles generated by the build based on the Tailwind configuration when you execute </span><span class="No-Break"><span class="koboSpan" id="kobo.862.1">the build.</span></span></p>
<p><span class="koboSpan" id="kobo.863.1">Finally, make sure that the CSS file is imported in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.864.1">src/index.js</span></strong><span class="koboSpan" id="kobo.865.1"> file, as shown in </span><span class="No-Break"><span class="koboSpan" id="kobo.866.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.867.1">
import React from 'react';import ReactDOM from 'react-dom/client';
</span><strong class="bold"><span class="koboSpan" id="kobo.868.1">import './index.css';</span></strong><span class="koboSpan" id="kobo.869.1">
import App from './App';
import reportWebVitals from './reportWebVitals';
const root = ReactDOM.createRoot(document.getElementById('root'));
// … rest of the code removed for brevity</span></pre>
<p><span class="koboSpan" id="kobo.870.1">Done! </span><span class="koboSpan" id="kobo.870.2">Next, execute </span><strong class="source-inline"><span class="koboSpan" id="kobo.871.1">yarn start</span></strong><span class="koboSpan" id="kobo.872.1"> to use Tailwind CSS in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.873.1">ecomm-ui</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.874.1"> app.</span></span></p>
<p><span class="koboSpan" id="kobo.875.1">However, before that, you are going to add the basic structure to your web app – the header, container (content), </span><span class="No-Break"><span class="koboSpan" id="kobo.876.1">and footer.</span></span></p>
<h3><span class="koboSpan" id="kobo.877.1">Adding basic structural React components</span></h3>
<p><span class="koboSpan" id="kobo.878.1">Before adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1">Header</span></strong><span class="koboSpan" id="kobo.880.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.881.1">Footer</span></strong><span class="koboSpan" id="kobo.882.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.883.1">Container</span></strong><span class="koboSpan" id="kobo.884.1"> components, you need to remove the following</span><a id="_idIndexMarker629"/><span class="koboSpan" id="kobo.885.1"> files created </span><span class="No-Break"><span class="koboSpan" id="kobo.886.1">by </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.887.1">create-react-app</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.889.1">App.css</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.890.1">logo.svg</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.891.1">Don’t forget to remove these file references from </span><strong class="source-inline"><span class="koboSpan" id="kobo.892.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.893.1">src/App.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.894.1"> too.</span></span></p>
<p><span class="koboSpan" id="kobo.895.1">Then, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">components</span></strong><span class="koboSpan" id="kobo.897.1"> directory under </span><strong class="source-inline"><span class="koboSpan" id="kobo.898.1">/src</span></strong><span class="koboSpan" id="kobo.899.1">. </span><span class="koboSpan" id="kobo.899.2">You will create all new components under this directory, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.900.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.901.1">.2</span></em><span class="koboSpan" id="kobo.902.1">. </span><span class="koboSpan" id="kobo.902.2">Let’s create three new components, </span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.904.1">Header</span></strong><span class="koboSpan" id="kobo.905.1">: This will be displayed at the top and contains header items such as the app name and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.906.1">Login/Logout</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.907.1"> button</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.908.1">Container</span></strong><span class="koboSpan" id="kobo.909.1">: This will contain the main content, such as the </span><span class="No-Break"><span class="koboSpan" id="kobo.910.1">product list</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">Footer</span></strong><span class="koboSpan" id="kobo.912.1">: This will be displayed at the bottom and contains footer items such as the </span><span class="No-Break"><span class="koboSpan" id="kobo.913.1">copyright information</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.914.1">The basic structure can be seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.915.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer025">
<span class="koboSpan" id="kobo.916.1"><img alt="Figure 7.2 – Basic structure of the app containing the Header, Footer, and Container components" src="image/Figure_07.2_B19349.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.917.1">Figure 7.2 – Basic structure of the app containing the Header, Footer, and Container components</span></p>
<p><span class="koboSpan" id="kobo.918.1">Let’s add these basic components. </span><span class="koboSpan" id="kobo.918.2">First, let’s create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.919.1">Header</span></strong><span class="koboSpan" id="kobo.920.1"> component, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.921.1">code </span></span><span class="No-Break"><a id="_idIndexMarker630"/></span><span class="No-Break"><span class="koboSpan" id="kobo.922.1">snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.923.1">
const Header = () =&gt; {  return (
    &lt;div&gt;
      &lt;header className="p-2 border-b-2
        border-gray-300 bggray-200"&gt;
        &lt;h1 className="text-lg font-bold"&gt;
          Ecommerce App&lt;/h1&gt;
      &lt;/header&gt;
    &lt;/div&gt;
  );
};
export default Header;</span></pre>
<p><span class="koboSpan" id="kobo.924.1">Similarly, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.925.1">Footer</span></strong><span class="koboSpan" id="kobo.926.1"> component, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.927.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.928.1">
const Footer = () =&gt; {  return (
    &lt;div&gt;
      &lt;footer
        className="text-center p-2 border-t-2 bggray-
          200 border-gray-300 text-sm"&gt;
        No &amp;copy; by Ecommerce App.{" "}
        &lt;a href=https://github.com/PacktPublishing/Modern-
           API-Development-with-Spring-and-Spring-Boot&gt;
          Modern API development with Spring and
            Spring Boot
        &lt;/a&gt;
      &lt;/footer&gt;
    &lt;/div&gt;
  );
};
export default Footer;</span></pre>
<p><span class="koboSpan" id="kobo.929.1">Next, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.930.1">Container</span></strong><span class="koboSpan" id="kobo.931.1"> component, as</span><a id="_idIndexMarker631"/><span class="koboSpan" id="kobo.932.1"> shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.933.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.934.1">
const Container = () =&gt; {  return (
    &lt;div className="flex-grow flex-shrink-0 p-4"&gt;
      &lt;p&gt;Hello, text/element would appear in container&lt;/p&gt;
    &lt;/div&gt;
  );
};
export default Container;</span></pre>
<p><span class="koboSpan" id="kobo.935.1">And finally, modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.936.1">/src/App.js</span></strong><span class="koboSpan" id="kobo.937.1"> file as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.938.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.939.1">
import Header from "./components/Header";import Footer from "./components/Footer";
import Container from "./components/Container";
function App() {
  return (
    &lt;div className="flex flex-col min-h-screen h-full"&gt;
      &lt;Header /&gt;
      &lt;Container /&gt;
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
}
export default App;</span></pre>
<p><span class="koboSpan" id="kobo.940.1">This is how you can create and use new components. </span><span class="koboSpan" id="kobo.940.2">These components are in their simplest form and are kept as such to be understood more easily. </span><span class="koboSpan" id="kobo.940.3">However, you can find refined and improved </span><a id="_idIndexMarker632"/><span class="koboSpan" id="kobo.941.1">versions of these components on GitHub, </span><span class="No-Break"><span class="koboSpan" id="kobo.942.1">as follows:</span></span></p>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.943.1">Header component </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.944.1">source</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.945.1">: </span></span><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Header.js"><span class="No-Break"><span class="koboSpan" id="kobo.946.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Header.js</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.947.1">Footer component </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.948.1">source</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.949.1">: </span></span><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Footer.js"><span class="No-Break"><span class="koboSpan" id="kobo.950.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Footer.js</span></span></a></li>
<li><span class="koboSpan" id="kobo.951.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.952.1">Container</span></strong><span class="koboSpan" id="kobo.953.1"> component (which contains the actual content in the center) could be replaced with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.954.1">switch</span></strong><span class="koboSpan" id="kobo.955.1"> component from </span><strong class="source-inline"><span class="koboSpan" id="kobo.956.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.957.1">, which would display the components based on a given </span><strong class="source-inline"><span class="koboSpan" id="kobo.958.1">route</span></strong><span class="koboSpan" id="kobo.959.1">, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.960.1">cart</span></strong><span class="koboSpan" id="kobo.961.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.962.1">orders</span></strong><span class="koboSpan" id="kobo.963.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.964.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.965.1">login</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.966.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.967.1">Now, you can start writing the actual </span><strong class="source-inline"><span class="koboSpan" id="kobo.968.1">ecomm-ui</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.969.1">components next.</span></span></p>
<h1 id="_idParaDest-182"><a id="_idTextAnchor181"/><span class="koboSpan" id="kobo.970.1">Designing the e-commerce app components</span></h1>
<p><span class="koboSpan" id="kobo.971.1">Design is not only a</span><a id="_idIndexMarker633"/><span class="koboSpan" id="kobo.972.1"> key part of UX and UI work, but is also important for frontend developers. </span><span class="koboSpan" id="kobo.972.2">Based on the design, you can create reusable and maintainable components. </span><span class="koboSpan" id="kobo.972.3">Our example e-commerce app is a simple application that does not need much attention. </span><span class="koboSpan" id="kobo.972.4">You will create the following components in </span><span class="No-Break"><span class="koboSpan" id="kobo.973.1">this application:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.974.1">Product listing component</span></strong><span class="koboSpan" id="kobo.975.1">: A </span><a id="_idIndexMarker634"/><span class="koboSpan" id="kobo.976.1">component that displays all the products and acts as a home page. </span><span class="koboSpan" id="kobo.976.2">Each product in the list will be displayed as a card with the product name, price, and two buttons—</span><strong class="bold"><span class="koboSpan" id="kobo.977.1">Buy now</span></strong><span class="koboSpan" id="kobo.978.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.979.1">Add to bag</span></strong><span class="koboSpan" id="kobo.980.1">. </span><span class="koboSpan" id="kobo.980.2">The following screenshot displays the </span><strong class="bold"><span class="koboSpan" id="kobo.981.1">Product listing</span></strong><span class="koboSpan" id="kobo.982.1"> page, which shows the product information</span><a id="_idIndexMarker635"/><span class="koboSpan" id="kobo.983.1"> along with an image of </span><span class="No-Break"><span class="koboSpan" id="kobo.984.1">each product:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer026">
<span class="koboSpan" id="kobo.985.1"><img alt="Figure 7.3 – Product listing page (home page)" src="image/Figure_07.3_B19349.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.986.1">Figure 7.3 – Product listing page (home page)</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.987.1">Product detail component</span></strong><span class="koboSpan" id="kobo.988.1">: This</span><a id="_idIndexMarker636"/><span class="koboSpan" id="kobo.989.1"> component displays the details of a product when clicked. </span><span class="koboSpan" id="kobo.989.2">It displays the product image, product name, product description, tags, and the </span><strong class="bold"><span class="koboSpan" id="kobo.990.1">Buy now</span></strong><span class="koboSpan" id="kobo.991.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.992.1">Add to bag</span></strong><span class="koboSpan" id="kobo.993.1"> buttons, as </span><span class="No-Break"><span class="koboSpan" id="kobo.994.1">shown next:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer027">
<span class="koboSpan" id="kobo.995.1"><img alt="Figure 7.4 – Product detail page" src="image/Figure_07.4_B19349.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.996.1">Figure 7.4 – Product detail page</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.997.1">Login component</span></strong><span class="koboSpan" id="kobo.998.1">: Login</span><a id="_idIndexMarker637"/><span class="koboSpan" id="kobo.999.1"> components allow a user to log in to an app by using their username and password, as illustrated in the</span><a id="_idIndexMarker638"/><span class="koboSpan" id="kobo.1000.1"> following screenshot. </span><span class="koboSpan" id="kobo.1000.2">This component displays an error message when a login attempt fails. </span><span class="koboSpan" id="kobo.1000.3">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.1001.1">Cancel</span></strong><span class="koboSpan" id="kobo.1002.1"> to go back to the </span><strong class="bold"><span class="koboSpan" id="kobo.1003.1">Product listing</span></strong><span class="koboSpan" id="kobo.1004.1"> page. </span><span class="koboSpan" id="kobo.1004.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.1005.1">Product listing</span></strong><span class="koboSpan" id="kobo.1006.1"> page shows a list of products a customer </span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1">can buy.</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer028">
<span class="koboSpan" id="kobo.1008.1"><img alt="Figure 7.5 – Login page" src="image/Figure_07.5_B19349.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1009.1">Figure 7.5 – Login page</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1010.1">Cart component</span></strong><span class="koboSpan" id="kobo.1011.1">: The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1012.1">Cart</span></strong><span class="koboSpan" id="kobo.1013.1"> component lists all the items that have been added to the cart. </span><span class="koboSpan" id="kobo.1013.2">Each</span><a id="_idIndexMarker639"/><span class="koboSpan" id="kobo.1014.1"> item displays the given product</span><a id="_idIndexMarker640"/><span class="koboSpan" id="kobo.1015.1"> image, name, description, price, quantity, and total. </span><span class="koboSpan" id="kobo.1015.2">It also provides a button to decrease or increase the quantity, and a button to remove the item from </span><span class="No-Break"><span class="koboSpan" id="kobo.1016.1">the cart.</span></span></li>
</ul>
<p><strong class="bold"><span class="koboSpan" id="kobo.1017.1">Product name</span></strong><span class="koboSpan" id="kobo.1018.1"> is a link that takes the user back to the </span><strong class="bold"><span class="koboSpan" id="kobo.1019.1">Product detail</span></strong><span class="koboSpan" id="kobo.1020.1"> page. </span><span class="koboSpan" id="kobo.1020.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.1021.1">Continue</span></strong> <strong class="bold"><span class="koboSpan" id="kobo.1022.1">shopping</span></strong><span class="koboSpan" id="kobo.1023.1"> button takes the user to the </span><strong class="bold"><span class="koboSpan" id="kobo.1024.1">Product listing</span></strong><span class="koboSpan" id="kobo.1025.1"> page. </span><span class="koboSpan" id="kobo.1025.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.1026.1">CHECKOUT</span></strong><span class="koboSpan" id="kobo.1027.1"> button performs the checkout process. </span><span class="koboSpan" id="kobo.1027.2">On successful checkout, an order is generated </span><a id="_idIndexMarker641"/><span class="koboSpan" id="kobo.1028.1">and the user is redirected to the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1029.1">Orders</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1030.1"> page.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer029">
<span class="koboSpan" id="kobo.1031.1"><img alt="Figure 7.6 – Cart page" src="image/Figure_07.6_B19349.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1032.1">Figure 7.6 – Cart page</span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1033.1">Orders component</span></strong><span class="koboSpan" id="kobo.1034.1">: The </span><strong class="bold"><span class="koboSpan" id="kobo.1035.1">Orders</span></strong><span class="koboSpan" id="kobo.1036.1"> page shows all orders placed by the user in a tabular form. </span><span class="koboSpan" id="kobo.1036.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.1037.1">Orders</span></strong><span class="koboSpan" id="kobo.1038.1"> table </span><a id="_idIndexMarker642"/><span class="koboSpan" id="kobo.1039.1">displays the</span><a id="_idIndexMarker643"/><span class="koboSpan" id="kobo.1040.1"> order date, ordered items, order status, and order amount for </span><span class="No-Break"><span class="koboSpan" id="kobo.1041.1">each order.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1042.1">The order date will be displayed in</span><a id="_idIndexMarker644"/><span class="koboSpan" id="kobo.1043.1"> the user’s local time, but on the server it will be in </span><strong class="bold"><span class="koboSpan" id="kobo.1044.1">Universal Coordinated Time</span></strong><span class="koboSpan" id="kobo.1045.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1046.1">UTC</span></strong><span class="koboSpan" id="kobo.1047.1">) format. </span><span class="koboSpan" id="kobo.1047.2">Order items will be displayed in an order list, with their quantity and unit price in brackets, as illustrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1048.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer030">
<span class="koboSpan" id="kobo.1049.1"><img alt="Figure 7.7 – Order page" src="image/Figure_07.7_B19349.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1050.1">Figure 7.7 – Order page</span></p>
<p><span class="koboSpan" id="kobo.1051.1">Let’s start coding these </span><a id="_idIndexMarker645"/><span class="koboSpan" id="kobo.1052.1">components. </span><span class="koboSpan" id="kobo.1052.2">First, you will code the </span><strong class="bold"><span class="koboSpan" id="kobo.1053.1">Product listing</span></strong><span class="koboSpan" id="kobo.1054.1"> page, which fetches the products from the backend server using </span><a id="_idIndexMarker646"/><span class="koboSpan" id="kobo.1055.1">the </span><span class="No-Break"><span class="koboSpan" id="kobo.1056.1">REST API.</span></span></p>
<h1 id="_idParaDest-183"><a id="_idTextAnchor182"/><span class="koboSpan" id="kobo.1057.1">Consuming APIs using Fetch</span></h1>
<p><span class="koboSpan" id="kobo.1058.1">Let’s create the first component — that is, the </span><strong class="bold"><span class="koboSpan" id="kobo.1059.1">Product Listing</span></strong><span class="koboSpan" id="kobo.1060.1"> page. </span><span class="koboSpan" id="kobo.1060.2">Create a new file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1061.1">src/components</span></strong><span class="koboSpan" id="kobo.1062.1"> directory </span><a id="_idIndexMarker647"/><span class="koboSpan" id="kobo.1063.1">with the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.1064.1">ProductList.js</span></strong><span class="koboSpan" id="kobo.1065.1">. </span><span class="koboSpan" id="kobo.1065.2">This is the parent component of the </span><strong class="bold"><span class="koboSpan" id="kobo.1066.1">Product </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1067.1">Listing</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1068.1"> page.</span></span></p>
<p><span class="koboSpan" id="kobo.1069.1">This component fetches the </span><a id="_idIndexMarker648"/><span class="koboSpan" id="kobo.1070.1">products from the backend server and passes them to the child component, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1071.1">Products</span></strong><span class="koboSpan" id="kobo.1072.1"> (it creates a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.1073.1">Products.js</span></strong><span class="koboSpan" id="kobo.1074.1"> file under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1075.1">src/components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1076.1"> directory).</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1077.1">Products</span></strong><span class="koboSpan" id="kobo.1078.1"> contains the logic responsible for looping through the fetched product list. </span><span class="koboSpan" id="kobo.1078.2">Each iteration renders the card UI of each product. </span><span class="koboSpan" id="kobo.1078.3">This product card component is represented using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1079.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1080.1">, another component. </span><span class="koboSpan" id="kobo.1080.2">Therefore, let’s create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1081.1">ProductCard.js</span></strong><span class="koboSpan" id="kobo.1082.1"> file, </span><span class="No-Break"><span class="koboSpan" id="kobo.1083.1">under </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1084.1">src/components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1085.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1086.1">You can write the product card code inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.1087.1">products</span></strong><span class="koboSpan" id="kobo.1088.1"> (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1089.1">product list</span></strong><span class="koboSpan" id="kobo.1090.1"> component), but to single out the responsibilities, it’s better to create a </span><span class="No-Break"><span class="koboSpan" id="kobo.1091.1">new component.</span></span></p>
<p><span class="koboSpan" id="kobo.1092.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1093.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1094.1"> component</span><a id="_idIndexMarker649"/><span class="koboSpan" id="kobo.1095.1"> has a </span><strong class="bold"><span class="koboSpan" id="kobo.1096.1">Buy now</span></strong><span class="koboSpan" id="kobo.1097.1"> button and an </span><strong class="bold"><span class="koboSpan" id="kobo.1098.1">Add to bag</span></strong><span class="koboSpan" id="kobo.1099.1"> link. </span><span class="koboSpan" id="kobo.1099.2">These links should only work if the user is logged in, else it should redirect the user to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1100.1">login page.</span></span></p>
<p><span class="koboSpan" id="kobo.1101.1">You now have an idea about the </span><strong class="bold"><span class="koboSpan" id="kobo.1102.1">Product Listing</span></strong><span class="koboSpan" id="kobo.1103.1"> page component tree structure. </span><span class="koboSpan" id="kobo.1103.2">Now, our first task is to have an API client that fetches products we can render in </span><span class="No-Break"><span class="koboSpan" id="kobo.1104.1">these components.</span></span></p>
<h2 id="_idParaDest-184"><a id="_idTextAnchor183"/><span class="koboSpan" id="kobo.1105.1">Writing the product API client</span></h2>
<p><span class="koboSpan" id="kobo.1106.1">You are going to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1107.1">Fetch</span></strong><span class="koboSpan" id="kobo.1108.1"> browser built-in library as a REST API client. </span><span class="koboSpan" id="kobo.1108.2">You can also use a third-party</span><a id="_idIndexMarker650"/><span class="koboSpan" id="kobo.1109.1"> library such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1110.1">axios</span></strong><span class="koboSpan" id="kobo.1111.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1112.1">Fetch</span></strong><span class="koboSpan" id="kobo.1113.1"> can do the job for </span><a id="_idIndexMarker651"/><span class="koboSpan" id="kobo.1114.1">this example app and reduce the number of </span><span class="No-Break"><span class="koboSpan" id="kobo.1115.1">third-party dependencies.</span></span></p>
<p><span class="koboSpan" id="kobo.1116.1">You can create a configuration file for API clients settings. </span><span class="koboSpan" id="kobo.1116.2">Let’s name it </span><strong class="source-inline"><span class="koboSpan" id="kobo.1117.1">Config.js</span></strong><span class="koboSpan" id="kobo.1118.1"> and place it in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1119.1">src/api</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1120.1"> directory.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1121.1">Config</span></strong><span class="koboSpan" id="kobo.1122.1"> is a JavaScript class that contains constants such as URLs and common methods such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1123.1">DefaultHeaders()</span></strong><span class="koboSpan" id="kobo.1124.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1125.1">tokenExpired()</span></strong><span class="koboSpan" id="kobo.1126.1">. </span><span class="koboSpan" id="kobo.1126.2">Check out its code in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1127.1">following snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1128.1">
class Config {  SCHEME = process.env.SCHEME ? </span><span class="koboSpan" id="kobo.1128.2">process.env.
</span><span class="koboSpan" id="kobo.1128.3">    SCHEME : "http";
  HOST = process.env.HOST ? </span><span class="koboSpan" id="kobo.1128.4">process.env.HOST : "localhost";
  PORT = process.env.PORT ? </span><span class="koboSpan" id="kobo.1128.5">process.env.PORT : "8080";
  CART_URL = `${this.SCHEME}://${this.HOST}:$
    {this.PORT}/api/v1/carts`;
  // truncated code for brevity
  defaultHeaders() {
    return {
      "Content-Type": "application/json",
      Accept: "application/json",
    };
  }
   …
}</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/Config.js"><span class="No-Break"><span class="koboSpan" id="kobo.1129.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/Config.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1130.1">Here, you can see that we have</span><a id="_idIndexMarker652"/><span class="koboSpan" id="kobo.1131.1"> created constants that are formed using environment variables. </span><span class="koboSpan" id="kobo.1131.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1132.1">defaultHeaders()</span></strong><span class="koboSpan" id="kobo.1133.1"> function returns the common headers used in all API calls, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1134.1">headersWithAuthorization()</span></strong><span class="koboSpan" id="kobo.1135.1"> returns common headers with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1136.1">Authorization</span></strong><span class="koboSpan" id="kobo.1137.1"> header. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1138.1">headersWithAuthorization()</span></strong><span class="koboSpan" id="kobo.1139.1"> uses object destruction to retrieve the</span><a id="_idIndexMarker653"/><span class="koboSpan" id="kobo.1140.1"> default headers. </span><span class="koboSpan" id="kobo.1140.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">Authorization</span></strong><span class="koboSpan" id="kobo.1142.1"> header is fetched from the local storage, which is set when a user is logged in successfully and is removed once the user </span><span class="No-Break"><span class="koboSpan" id="kobo.1143.1">logs out.</span></span></p>
<p><span class="koboSpan" id="kobo.1144.1">It also has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1145.1">tokenExpired()</span></strong><span class="koboSpan" id="kobo.1146.1"> function that simply checks the expiration time for a token stored in local storage. </span><span class="koboSpan" id="kobo.1146.2">This expiration time is extracted from the access token (</span><strong class="bold"><span class="koboSpan" id="kobo.1147.1">JSON Web Token</span></strong><span class="koboSpan" id="kobo.1148.1">, or </span><strong class="bold"><span class="koboSpan" id="kobo.1149.1">JWT</span></strong><span class="koboSpan" id="kobo.1150.1">). </span><span class="koboSpan" id="kobo.1150.2">It returns true if the expiration time is past the current time. </span><span class="koboSpan" id="kobo.1150.3">Check out this function’s code in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1151.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1152.1">
// src/api/Config.jstokenExpired() {
  const expDate = Number(localStorage.getItem
     (this.EXPIRATION));
  if (expDate &gt; Date.now()) {
      return false;
  }
  return true;
}</span></pre>
<p><span class="koboSpan" id="kobo.1153.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1154.1">Config</span></strong><span class="koboSpan" id="kobo.1155.1"> class also contains a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1156.1">storeAccessToken()</span></strong><span class="koboSpan" id="kobo.1157.1"> function that simply stores the access token and expiration time in local storage. </span><span class="koboSpan" id="kobo.1157.2">It uses a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1158.1">getExpiration()</span></strong><span class="koboSpan" id="kobo.1159.1"> function to extract the </span><a id="_idIndexMarker654"/><span class="koboSpan" id="kobo.1160.1">expiration time from the access token. </span><span class="koboSpan" id="kobo.1160.2">Put simply, this function first extracts the payload from the token string and then decodes the payload and converts it to JSON. </span><span class="koboSpan" id="kobo.1160.3">Finally, it returns the expiration time if a payload is a </span><a id="_idIndexMarker655"/><span class="koboSpan" id="kobo.1161.1">valid object, else it returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.1162.1">0</span></strong><span class="koboSpan" id="kobo.1163.1">. </span><span class="koboSpan" id="kobo.1163.2">You can find these functions in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1164.1">code block:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1165.1">Relevant code of src/api/Config.js</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1166.1">
storeAccessToken(token) {  localStorage.setItem(this.ACCESS_TOKEN, `Bearer ${token}`);
  localStorage.setItem(this.EXPIRATION,
                                  this.getExpiration(token));
}
getExpiration(token) {
  let encodedPayload = token ? </span><span class="koboSpan" id="kobo.1166.2">token.split(".")[1] : null;
      if (encodedPayload) {
          encodedPayload = encodedPayload.replace
              (/-/g, "+").replace(/_/g, "/");
          const payload = JSON.parse(window.atob
              (encodedPayload));
          return payload?.exp ? </span><span class="koboSpan" id="kobo.1166.3">payload?.exp * 1000 : 0;
      }
  return 0;
}</span></pre>
<p><span class="koboSpan" id="kobo.1167.1">Next, let’s make use of this </span><strong class="source-inline"><span class="koboSpan" id="kobo.1168.1">Config</span></strong><span class="koboSpan" id="kobo.1169.1"> class in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1170.1">src/api/ProductClient.js</span></strong><span class="koboSpan" id="kobo.1171.1"> file, as shown in the following </span><a id="_idIndexMarker656"/><span class="koboSpan" id="kobo.1172.1">code block. </span><span class="koboSpan" id="kobo.1172.2">This file will act as the API </span><a id="_idIndexMarker657"/><span class="koboSpan" id="kobo.1173.1">client for </span><span class="No-Break"><span class="koboSpan" id="kobo.1174.1">product-related APIs:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1175.1">import Config from "./Config";</span></strong><span class="koboSpan" id="kobo.1176.1">class </span><strong class="bold"><span class="koboSpan" id="kobo.1177.1">ProductClient</span></strong><span class="koboSpan" id="kobo.1178.1"> {
  constructor() { </span><strong class="bold"><span class="koboSpan" id="kobo.1179.1">this.config = new Config()</span></strong><span class="koboSpan" id="kobo.1180.1">; }
  async fetchList() {
    return fetch(</span><strong class="bold"><span class="koboSpan" id="kobo.1181.1">this.config.PRODUCT_URL</span></strong><span class="koboSpan" id="kobo.1182.1">, {
      method: "GET",
      mode: "cors",
      headers: { ...</span><strong class="bold"><span class="koboSpan" id="kobo.1183.1">this.config.defaultHeaders</span></strong><span class="koboSpan" id="kobo.1184.1">(),},
    })
    .then((res) =&gt; Promise.all([res, res.json()]))
    .then(([res, json]) =&gt; {
      if (!res.ok) { return { success: false, error: json };}
      return { success: true, data: json };
    }).catch((e) =&gt; {
      return this.handleError(e);
    });
  }
  …
  …</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/ProductClient.js"><span class="No-Break"><span class="koboSpan" id="kobo.1185.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/ProductClient.js</span></span></a></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1186.1">ProductClient</span></strong><span class="koboSpan" id="kobo.1187.1"> is a class, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">config</span></strong><span class="koboSpan" id="kobo.1189.1"> instance is instantiated in its constructor. </span><span class="koboSpan" id="kobo.1189.2">This class contains two asynchronous functions for fetching the products: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1190.1">fetchList()</span></strong><span class="koboSpan" id="kobo.1191.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1192.1">fetch()</span></strong><span class="koboSpan" id="kobo.1193.1">. </span><span class="koboSpan" id="kobo.1193.2">The former fetches all products, and the latter is for fetching a single product based on its ID. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1194.1">fetchList()</span></strong><span class="koboSpan" id="kobo.1195.1"> makes use of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1196.1">fetch</span></strong><span class="koboSpan" id="kobo.1197.1"> browser function to fetch the</span><a id="_idIndexMarker658"/><span class="koboSpan" id="kobo.1198.1"> product list. </span><span class="koboSpan" id="kobo.1198.2">You pass the URL as the first argument input and request an initialization object that contains the HTTP </span><a id="_idIndexMarker659"/><span class="koboSpan" id="kobo.1199.1">method, mode, and headers as the second argument. </span><span class="koboSpan" id="kobo.1199.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1200.1">fetch</span></strong><span class="koboSpan" id="kobo.1201.1"> browser call returns a promise that you use to handle the request. </span><span class="koboSpan" id="kobo.1201.2">First, you resolve both the promises – the response and response JSON and then check </span><strong class="source-inline"><span class="koboSpan" id="kobo.1202.1">response.ok</span></strong><span class="koboSpan" id="kobo.1203.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1204.1">response.ok</span></strong><span class="koboSpan" id="kobo.1205.1"> returns true for a status in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1206.1">200</span></strong><span class="koboSpan" id="kobo.1207.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1208.1">299</span></strong><span class="koboSpan" id="kobo.1209.1"> range. </span><span class="koboSpan" id="kobo.1209.2">Upon a successful response, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1210.1">fetchList()</span></strong><span class="koboSpan" id="kobo.1211.1"> method returns an object with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1212.1">data</span></strong><span class="koboSpan" id="kobo.1213.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1214.1">success</span></strong><span class="koboSpan" id="kobo.1215.1"> fields as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1216.1">true</span></strong><span class="koboSpan" id="kobo.1217.1">. </span><span class="koboSpan" id="kobo.1217.2">Upon an unsuccessful response, it returns success as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1218.1">false</span></strong><span class="koboSpan" id="kobo.1219.1"> and shows an error response in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1220.1">data</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1221.1"> field.</span></span></p>
<p><span class="koboSpan" id="kobo.1222.1">Similarly, you can write a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1223.1">fetch</span></strong><span class="koboSpan" id="kobo.1224.1"> function to retrieve the product by </span><strong class="source-inline"><span class="koboSpan" id="kobo.1225.1">ID</span></strong><span class="koboSpan" id="kobo.1226.1">. </span><span class="koboSpan" id="kobo.1226.2">Everything will be the same except the URL, as you can see in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1227.1">code block:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1228.1">Remaining code of src/api/ProductClient.js</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1229.1">
 async fetch(prodId) {   return fetch(this.config.PRODUCT_URL + "/" + prodId, {
     method: "GET",
     mode: "cors",
     headers: { ...this.config.defaultHeaders(),},
   })
   .then((res) =&gt; Promise.all([res,  res.json()]))
   .then(([res, json]) =&gt; {
     if (!res.ok) { return { success: false, error: json }; }
     return { success: true, data: json };
   }).catch((e) =&gt; {
     this.handleError(e);
   });
 }
 </span><strong class="bold"><span class="koboSpan" id="kobo.1230.1">handleError</span></strong><span class="koboSpan" id="kobo.1231.1">(error) {
  const err = new Map([
     [TypeError, "Problem fetching the response."],
     [SyntaxError, "Problem parsing the response."],
     [Error, error.message],
   ]).get(error.constructor);
   return err;
 }
}
export default ProductClient;</span></pre>
<p><span class="koboSpan" id="kobo.1232.1">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1233.1">handleError()</span></strong><span class="koboSpan" id="kobo.1234.1"> function</span><a id="_idIndexMarker660"/><span class="koboSpan" id="kobo.1235.1"> checks the type of the error (using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1236.1">error. </span><span class="koboSpan" id="kobo.1236.2">constructor</span></strong><span class="koboSpan" id="kobo.1237.1">) and, based on that, returns the appropriate </span><span class="No-Break"><span class="koboSpan" id="kobo.1238.1">error message.</span></span></p>
<p><span class="koboSpan" id="kobo.1239.1">Please note that other </span><a id="_idIndexMarker661"/><span class="koboSpan" id="kobo.1240.1">API clients such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1241.1">CartClient</span></strong><span class="koboSpan" id="kobo.1242.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1243.1">CustomerClient</span></strong><span class="koboSpan" id="kobo.1244.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1245.1">OrderClient</span></strong><span class="koboSpan" id="kobo.1246.1"> are developed in a similar fashion. </span><span class="koboSpan" id="kobo.1246.2">The code is available at the </span><span class="No-Break"><span class="koboSpan" id="kobo.1247.1">following locations:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1248.1">CartClient</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1249.1">: </span></span><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/CartClient.js"><span class="No-Break"><span class="koboSpan" id="kobo.1250.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/CartClient.js</span></span></a></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1251.1">CustomerClient</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1252.1">: </span></span><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-and-Spring-Boot/blob/main/Chapter07/ecomm-ui/src/api/CustomerClient.js"><span class="No-Break"><span class="koboSpan" id="kobo.1253.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-and-Spring-Boot/blob/main/Chapter07/ecomm-ui/src/api/CustomerClient.js</span></span></a></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1254.1">OrderClient</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1255.1">: </span></span><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-and-Spring-Boot/blob/main/Chapter07/ecomm-ui/src/api/OrderClient.js"><span class="No-Break"><span class="koboSpan" id="kobo.1256.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-and-Spring-Boot/blob/main/Chapter07/ecomm-ui/src/api/OrderClient.js</span></span></a></li>
</ul>
<p><span class="koboSpan" id="kobo.1257.1">Now, we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1258.1">ProductClient</span></strong><span class="koboSpan" id="kobo.1259.1"> to fetch the products from the backend using REST APIs. </span><span class="koboSpan" id="kobo.1259.2">Let’s code the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1260.1">ProductList</span></strong><span class="koboSpan" id="kobo.1261.1"> component and its </span><span class="No-Break"><span class="koboSpan" id="kobo.1262.1">child components.</span></span></p>
<h2 id="_idParaDest-185"><a id="_idTextAnchor184"/><span class="koboSpan" id="kobo.1263.1">Coding the Product Listing page</span></h2>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1264.1">ProductList</span></strong><span class="koboSpan" id="kobo.1265.1"> is a </span><a id="_idIndexMarker662"/><span class="koboSpan" id="kobo.1266.1">straightforward component that loads the products after their first render using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1267.1">ProductClient</span></strong><span class="koboSpan" id="kobo.1268.1">. </span><span class="koboSpan" id="kobo.1268.2">You know</span><a id="_idIndexMarker663"/><span class="koboSpan" id="kobo.1269.1"> that for this purpose, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1270.1">useEffect</span></strong><span class="koboSpan" id="kobo.1271.1"> hooks should be used. </span><span class="koboSpan" id="kobo.1271.2">Let’s code it </span><span class="No-Break"><span class="koboSpan" id="kobo.1272.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1273.1">
// other importsimport Products from "./Products";
const ProductList = ({ </span><strong class="bold"><span class="koboSpan" id="kobo.1274.1">auth</span></strong><span class="koboSpan" id="kobo.1275.1"> }) =&gt; {
  const [</span><strong class="bold"><span class="koboSpan" id="kobo.1276.1">productList</span></strong><span class="koboSpan" id="kobo.1277.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.1278.1">setProductList</span></strong><span class="koboSpan" id="kobo.1279.1">] = </span><strong class="bold"><span class="koboSpan" id="kobo.1280.1">useState()</span></strong><span class="koboSpan" id="kobo.1281.1">;
  const [noRecMsg, setNoRecMsg] = useState("Loading...");
  const { </span><strong class="bold"><span class="koboSpan" id="kobo.1282.1">dispatch</span></strong><span class="koboSpan" id="kobo.1283.1"> } = </span><strong class="bold"><span class="koboSpan" id="kobo.1284.1">useCartContext()</span></strong><span class="koboSpan" id="kobo.1285.1">;
  </span><strong class="bold"><span class="koboSpan" id="kobo.1286.1">useEffect</span></strong><span class="koboSpan" id="kobo.1287.1">(() =&gt; {
    async function </span><strong class="bold"><span class="koboSpan" id="kobo.1288.1">fetchProducts</span></strong><span class="koboSpan" id="kobo.1289.1">() {
      const res = await new </span><strong class="bold"><span class="koboSpan" id="kobo.1290.1">ProductClient</span></strong><span class="koboSpan" id="kobo.1291.1">().fetchList();
      if (res &amp;&amp; res.success) { setProductList(res.data); }
      else { setNoRecMsg(res); }
    }
    async function fetchCart(auth) {
      const res = await new CartClient(auth).fetch();
      if (res &amp;&amp; res.success) {
        dispatch(updateCart(res.data.items));
        if (res.data?.items &amp;&amp; res.data.items?.length &lt; 1)
       {
          setNoRecMsg("Cart is empty.");
        }
      } else {
        setNoRecMsg(res &amp;&amp; typeof res === "string"?
</span><span class="koboSpan" id="kobo.1291.2">          res : res?.error?.message);
      }
    }
    if (auth?.token) </span><strong class="bold"><span class="koboSpan" id="kobo.1292.1">fetchCart</span></strong><span class="koboSpan" id="kobo.1293.1">(auth);
    fetchProducts();
  }, []);
  // rest of the code …</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductList.js"><span class="No-Break"><span class="koboSpan" id="kobo.1294.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductList.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1295.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1296.1">ProductList</span></strong><span class="koboSpan" id="kobo.1297.1"> component</span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.1298.1"> uses </span><strong class="source-inline"><span class="koboSpan" id="kobo.1299.1">auth</span></strong><span class="koboSpan" id="kobo.1300.1"> as a prop. </span><span class="koboSpan" id="kobo.1300.2">It contains authentication information such as a token. </span><span class="koboSpan" id="kobo.1300.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1301.1">ProductList</span></strong><span class="koboSpan" id="kobo.1302.1"> component is used as the main </span><strong class="source-inline"><span class="koboSpan" id="kobo.1303.1">App</span></strong><span class="koboSpan" id="kobo.1304.1"> component, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1305.1">auth</span></strong><span class="koboSpan" id="kobo.1306.1"> is passed to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1307.1">ProductList</span></strong><span class="koboSpan" id="kobo.1308.1"> component </span><span class="No-Break"><span class="koboSpan" id="kobo.1309.1">by it.</span></span></p>
<p><span class="koboSpan" id="kobo.1310.1">Please note that you have </span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.1311.1">passed an empty array (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1312.1">[]</span></strong><span class="koboSpan" id="kobo.1313.1">) as a dependency to make sure that the API is called only once. </span><span class="koboSpan" id="kobo.1313.2">You are using a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1314.1">useState</span></strong><span class="koboSpan" id="kobo.1315.1"> hook to store the product list (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1316.1">productList</span></strong><span class="koboSpan" id="kobo.1317.1">) and message states (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1318.1">noRecMsg</span></strong><span class="koboSpan" id="kobo.1319.1">—no record) via </span><span class="No-Break"><span class="koboSpan" id="kobo.1320.1">setter methods.</span></span></p>
<h2 id="_idParaDest-186"><a id="_idTextAnchor185"/><span class="koboSpan" id="kobo.1321.1">Why does the cart need to be fetched in ProductList?</span></h2>
<p><span class="koboSpan" id="kobo.1322.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1323.1">ProductList</span></strong><span class="koboSpan" id="kobo.1324.1"> component and its </span><a id="_idIndexMarker666"/><span class="koboSpan" id="kobo.1325.1">child components are available for non-authenticated users. </span><span class="koboSpan" id="kobo.1325.2">Once the user clicks on the </span><strong class="bold"><span class="koboSpan" id="kobo.1326.1">Buy now</span></strong><span class="koboSpan" id="kobo.1327.1"> button or the </span><strong class="bold"><span class="koboSpan" id="kobo.1328.1">Add to bag</span></strong><span class="koboSpan" id="kobo.1329.1"> link, it will ask the user to log in. </span><span class="koboSpan" id="kobo.1329.2">Once logged in, the user can add items to the cart. </span><span class="koboSpan" id="kobo.1329.3">It is quite possible that the user might already have some items in the cart. </span><span class="koboSpan" id="kobo.1329.4">Therefore, when you add an item to the cart, the quantity of existing products should be increased, and if a clicked item does not exist in the cart, then it should be added to </span><span class="No-Break"><span class="koboSpan" id="kobo.1330.1">the cart.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1331.1">Cart</span></strong><span class="koboSpan" id="kobo.1332.1"> is a separate component altogether; this means you can’t access the cart unless you do cart prop drilling from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1333.1">App</span></strong><span class="koboSpan" id="kobo.1334.1"> component to both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1335.1">Cart</span></strong><span class="koboSpan" id="kobo.1336.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1337.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1338.1"> components or have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1339.1">useContext</span></strong><span class="koboSpan" id="kobo.1340.1"> hook for the cart. </span><span class="koboSpan" id="kobo.1340.2">We have built a custom store to maintain the cart state, very similar to </span><strong class="bold"><span class="koboSpan" id="kobo.1341.1">Redux</span></strong><span class="koboSpan" id="kobo.1342.1"> (a library used to maintain the state in React app). </span><span class="koboSpan" id="kobo.1342.2">We’ll learn more about this library later in this chapter. </span><span class="koboSpan" id="kobo.1342.3">Dispatch is an action that updates the cart items received from the backend server to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1343.1">cart context.</span></span></p>
<p><span class="koboSpan" id="kobo.1344.1">Next, create a JSX template</span><a id="_idIndexMarker667"/><span class="koboSpan" id="kobo.1345.1"> and pass the fetched </span><strong class="source-inline"><span class="koboSpan" id="kobo.1346.1">productList</span></strong><span class="koboSpan" id="kobo.1347.1"> component to the child component, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1348.1">Products</span></strong><span class="koboSpan" id="kobo.1349.1">, for further rendering, as illustrated in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1350.1">code snippet:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1351.1">Remaining code of src/components/ProductList.js</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1352.1">
 return (   &lt;div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"&gt;
     {productList ? </span><span class="koboSpan" id="kobo.1352.2">(
       &lt;div className="flex flex-wrap -mx-1 lg:-mx-4"&gt;
         &lt;Products auth={auth} productList={productList ?
</span><span class="koboSpan" id="kobo.1352.3">            productList : []} /&gt;
       &lt;/div&gt;
     ) : (
       &lt;div className="text-lg
         font-semibold"&gt;{noRecMsg}&lt;/div&gt;
     )}
   &lt;/div&gt;
 );
};
export default ProductList;</span></pre>
<p><span class="koboSpan" id="kobo.1353.1">Here, it also passes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1354.1">auth</span></strong><span class="koboSpan" id="kobo.1355.1"> object as a prop </span><span class="No-Break"><span class="koboSpan" id="kobo.1356.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1357.1">Products</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1358.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1359.1">Let’s have a look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1360.1">Products</span></strong><span class="koboSpan" id="kobo.1361.1"> code, </span><span class="No-Break"><span class="koboSpan" id="kobo.1362.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1363.1">
import ProductCard from "./ProductCard";const Products = ({ auth, productList }) =&gt; {
 return ( &lt;&gt; {productList.map((item) =&gt; (
  </span><strong class="bold"><span class="koboSpan" id="kobo.1364.1">&lt;ProductCard key={item.id} product</span></strong><span class="koboSpan" id="kobo.1365.1">={item} auth={auth} /&gt; ))}
  &lt;/&gt;
 );
};
export default Products;</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Products.js"><span class="No-Break"><span class="koboSpan" id="kobo.1366.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Products.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1367.1">Put simply, the code does</span><a id="_idIndexMarker668"/><span class="koboSpan" id="kobo.1368.1"> the job of iterating the product list passed by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1369.1">ProductList</span></strong><span class="koboSpan" id="kobo.1370.1"> component and passes each item with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1371.1">product</span></strong><span class="koboSpan" id="kobo.1372.1"> props to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1373.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1374.1"> component along with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1375.1">auth</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1376.1"> object.</span></span></p>
<p><span class="koboSpan" id="kobo.1377.1">You can observe the usage of two React concepts here, </span><span class="No-Break"><span class="koboSpan" id="kobo.1378.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1379.1">The code uses a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1380.1">&lt;&gt;&lt;/&gt;</span></strong><span class="koboSpan" id="kobo.1381.1"> fragment, which is an empty tag. </span><span class="koboSpan" id="kobo.1381.2">Ideally, this is used when a component returns more than one top-level tag because React needs only one top-level tag in each component. </span><span class="koboSpan" id="kobo.1381.3">Then, you can wrap those tags with a fragment. </span><span class="koboSpan" id="kobo.1381.4">You can also use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1382.1">&lt;React.Fragment&gt;</span></strong><span class="koboSpan" id="kobo.1383.1"> in place of an empty tag after importing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1384.1">React</span></strong><span class="koboSpan" id="kobo.1385.1"> from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1386.1">react</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1387.1"> package.</span></span></li>
<li><span class="koboSpan" id="kobo.1388.1">Another usage is for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1389.1">key</span></strong><span class="koboSpan" id="kobo.1390.1"> props in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1391.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1392.1"> component. </span><span class="koboSpan" id="kobo.1392.2">When you generate components based on a collection, React requires the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1393.1">key</span></strong><span class="koboSpan" id="kobo.1394.1"> props to uniquely identify them. </span><span class="koboSpan" id="kobo.1394.2">This will allow React to identify which item is changed, removed, or added. </span><span class="koboSpan" id="kobo.1394.3">We have used the item ID here. </span><span class="koboSpan" id="kobo.1394.4">If you don’t have an ID in your collection, you can also use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1395.1">index</span></strong><span class="koboSpan" id="kobo.1396.1">, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1397.1">code example:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1398.1">
{productList.map((item, </span><strong class="bold"><span class="koboSpan" id="kobo.1399.1">index</span></strong><span class="koboSpan" id="kobo.1400.1">) =&gt; (  &lt;ProductCard </span><strong class="bold"><span class="koboSpan" id="kobo.1401.1">key={index</span></strong><span class="koboSpan" id="kobo.1402.1">} product={item} auth={auth} /&gt;))}</span></pre></li> </ul>
<p><span class="koboSpan" id="kobo.1403.1">Now, let’s have a look at the last child component of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1404.1">ProductList</span></strong><span class="koboSpan" id="kobo.1405.1"> component: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1406.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1407.1">. </span><span class="koboSpan" id="kobo.1407.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1408.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1409.1"> component simply passes </span><strong class="source-inline"><span class="koboSpan" id="kobo.1410.1">Product</span></strong><span class="koboSpan" id="kobo.1411.1"> values to JSX template expressions </span><span class="No-Break"><span class="koboSpan" id="kobo.1412.1">for rendering.</span></span></p>
<p><span class="koboSpan" id="kobo.1413.1">We have added some extra </span><a id="_idIndexMarker669"/><span class="koboSpan" id="kobo.1414.1">code to add the functionality associated with the </span><strong class="bold"><span class="koboSpan" id="kobo.1415.1">Add to bag</span></strong><span class="koboSpan" id="kobo.1416.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.1417.1">Buy now</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1418.1">click events.</span></span></p>
<h2 id="_idParaDest-187"><a id="_idTextAnchor186"/><span class="koboSpan" id="kobo.1419.1">Configuring routing</span></h2>
<p><span class="koboSpan" id="kobo.1420.1">You are creating an SPA. </span><span class="koboSpan" id="kobo.1420.2">Here, routing is not</span><a id="_idIndexMarker670"/><span class="koboSpan" id="kobo.1421.1"> available by default. </span><span class="koboSpan" id="kobo.1421.2">Routing is the mechanism that provides the routing to an SPA, which means that with each new page, the browser URL will reflect the change and allow you to bookmark the page. </span><span class="koboSpan" id="kobo.1421.3">SPA routing also maintains the browser history. </span><span class="koboSpan" id="kobo.1421.4">You are going to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1422.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.1423.1"> package for routing management. </span><span class="koboSpan" id="kobo.1423.2">You need to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1424.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.1425.1"> package to use routing, as shown in the following code snippet. </span><span class="koboSpan" id="kobo.1425.2">Make sure to execute it from the project </span><span class="No-Break"><span class="koboSpan" id="kobo.1426.1">root directory:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1427.1">
$ npm install react-router-dom</span></pre> <p><span class="koboSpan" id="kobo.1428.1">The routing will be configured in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1429.1">App</span></strong><span class="koboSpan" id="kobo.1430.1"> component because it is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1431.1">root</span></strong><span class="koboSpan" id="kobo.1432.1"> component of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1433.1">ecomm-ui</span></strong><span class="koboSpan" id="kobo.1434.1"> application. </span><span class="koboSpan" id="kobo.1434.2">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1435.1">ProductList</span></strong><span class="koboSpan" id="kobo.1436.1"> component, you are going to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1437.1">Link</span></strong><span class="koboSpan" id="kobo.1438.1"> component and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1439.1">useNavigate()</span></strong><span class="koboSpan" id="kobo.1440.1"> hook from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1441.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.1442.1"> package. </span><span class="koboSpan" id="kobo.1442.2">Let’s examine them, </span><span class="No-Break"><span class="koboSpan" id="kobo.1443.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1444.1">Link</span></strong><span class="koboSpan" id="kobo.1445.1">: This is like a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1446.1">&lt;a&gt;</span></strong><span class="koboSpan" id="kobo.1447.1"> HTML anchor tag. </span><span class="koboSpan" id="kobo.1447.2">Instead of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1448.1">href</span></strong><span class="koboSpan" id="kobo.1449.1"> attribute, it uses a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1450.1">to</span></strong><span class="koboSpan" id="kobo.1451.1"> attribute to link the URL. </span><span class="koboSpan" id="kobo.1451.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1452.1">route</span></strong><span class="koboSpan" id="kobo.1453.1"> library maintains the links; therefore, it knows which component to render when a link is passed in with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1454.1">to</span></strong><span class="koboSpan" id="kobo.1455.1"> attribute when </span><strong class="source-inline"><span class="koboSpan" id="kobo.1456.1">Link</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1457.1">is clicked.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1458.1">useNavigate()</span></strong><span class="koboSpan" id="kobo.1459.1">: This allows navigation inside the component and accesses the state of the router. </span><span class="koboSpan" id="kobo.1459.2">You would use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1460.1">navigate("/path")</span></strong><span class="koboSpan" id="kobo.1461.1"> function if </span><strong class="source-inline"><span class="koboSpan" id="kobo.1462.1">navigate</span></strong><span class="koboSpan" id="kobo.1463.1"> is declared as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1464.1">const navigate = useNavigate()</span></strong><span class="koboSpan" id="kobo.1465.1"> to navigate from one component to another, as shown in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1466.1">checkLogin()</span></strong><span class="koboSpan" id="kobo.1467.1"> function of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1468.1">ProductCard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1469.1"> component.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1470.1">Let’s continue with the development of the next product-based </span><span class="No-Break"><span class="koboSpan" id="kobo.1471.1">component: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1472.1">ProductCard</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1473.1">.</span></span></p>
<h2 id="_idParaDest-188"><a id="_idTextAnchor187"/><span class="koboSpan" id="kobo.1474.1">Developing the ProductCard component</span></h2>
<p><span class="koboSpan" id="kobo.1475.1">First, let’s import the</span><a id="_idIndexMarker671"/><span class="koboSpan" id="kobo.1476.1"> required packages. </span><span class="koboSpan" id="kobo.1476.2">Then, declare the state (using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1477.1">useCartContext</span></strong><span class="koboSpan" id="kobo.1478.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1479.1">useState</span></strong><span class="koboSpan" id="kobo.1480.1">) and variables. </span><span class="koboSpan" id="kobo.1480.2">Please note that the following code snippet has </span><strong class="source-inline"><span class="koboSpan" id="kobo.1481.1">auth</span></strong><span class="koboSpan" id="kobo.1482.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1483.1">product</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1484.1">as props:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1485.1">
import { useState } from "react";</span><strong class="bold"><span class="koboSpan" id="kobo.1486.1">import { Link, useNavigate } from "react-router-dom";</span></strong><span class="koboSpan" id="kobo.1487.1">
import CartClient from "../api/CartClient";
import { updateCart, useCartContext } from "../hooks/CartContext";
const ProductCard = ({ auth, product }) =&gt; {
  const navigate = new </span><strong class="bold"><span class="koboSpan" id="kobo.1488.1">useNavigate</span></strong><span class="koboSpan" id="kobo.1489.1">();
  const cartClient = new </span><strong class="bold"><span class="koboSpan" id="kobo.1490.1">CartClient(auth)</span></strong><span class="koboSpan" id="kobo.1491.1">;
  const { </span><strong class="bold"><span class="koboSpan" id="kobo.1492.1">cartItems</span></strong><span class="koboSpan" id="kobo.1493.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.1494.1">dispatch</span></strong><span class="koboSpan" id="kobo.1495.1"> } = </span><strong class="bold"><span class="koboSpan" id="kobo.1496.1">useCartContext()</span></strong><span class="koboSpan" id="kobo.1497.1">;
  const [msg, setMsg] = new useState("");
  // continue …</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductCard.js"><span class="No-Break"><span class="koboSpan" id="kobo.1498.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductCard.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1499.1">To begin, you write the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1500.1">add()</span></strong><span class="koboSpan" id="kobo.1501.1"> asynchronous function that adds the product to the cart. </span><span class="koboSpan" id="kobo.1501.2">It first checks whether the user is logged in or not. </span><span class="koboSpan" id="kobo.1501.3">If not, it redirects the user to the login page. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1502.1">checkLogin()</span></strong><span class="koboSpan" id="kobo.1503.1"> uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1504.1">useNavigate</span></strong><span class="koboSpan" id="kobo.1505.1"> hook’s push method to redirect. </span><span class="koboSpan" id="kobo.1505.2">The token property of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1506.1">auth</span></strong><span class="koboSpan" id="kobo.1507.1"> is used to identify whether the user is logged in </span><span class="No-Break"><span class="koboSpan" id="kobo.1508.1">or not.</span></span></p>
<p><span class="koboSpan" id="kobo.1509.1">Once it has identified that the user is logged in, it calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1510.1">callAddItemApi</span></strong><span class="koboSpan" id="kobo.1511.1"> function to add a product to the cart. </span><span class="koboSpan" id="kobo.1511.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1512.1">callAddItemApi</span></strong><span class="koboSpan" id="kobo.1513.1"> function first finds out whether the product exists in the cart or not. </span><span class="koboSpan" id="kobo.1513.2">If it exists, it finds out the quantity and adds one more to it. </span><span class="koboSpan" id="kobo.1513.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1514.1">callAddItemApi</span></strong><span class="koboSpan" id="kobo.1515.1"> function then calls the REST API using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1516.1">CartClient</span></strong><span class="koboSpan" id="kobo.1517.1"> to add a new item or update the quantity in the existing </span><span class="No-Break"><span class="koboSpan" id="kobo.1518.1">cart item.</span></span></p>
<p><span class="koboSpan" id="kobo.1519.1">Finally, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1520.1">add</span></strong><span class="koboSpan" id="kobo.1521.1"> function calls </span><strong class="source-inline"><span class="koboSpan" id="kobo.1522.1">dispatch</span></strong><span class="koboSpan" id="kobo.1523.1"> to update the state of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1524.1">cartItems</span></strong><span class="koboSpan" id="kobo.1525.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1526.1">cart context.</span></span></p>
<p><span class="koboSpan" id="kobo.1527.1">The following code snippet contains the </span><span class="No-Break"><span class="koboSpan" id="kobo.1528.1">same logic:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1529.1">// Continue code of src/components/ProductCard.js</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1530.1">
const add = async () =&gt; {  const isLoggedIn = checkLogin();
  if (isLoggedIn &amp;&amp; product?.id) {
    const res = await callAddItemApi();
    if (res &amp;&amp; res.success) {
      if (res.data?.length &gt; 0) {
        setMsg("Product added to bag.");
        dispatch(updateCart(res.data));
      }
    } else { setMsg(res &amp;&amp; typeof res === "string" ? </span><span class="koboSpan" id="kobo.1530.2">res :
       res.error.message); }
  }
};
const checkLogin = () =&gt; {
  if (!auth.token) {
    navigate("/login");
    return false;
  }
  return true;
};
const callAddItemApi = async () =&gt; {
  const qty = findQty(product.id);
  return cartClient.addOrUpdate({
    id: product.id,
    quantity: qty + 1,
    unitPrice: product.price,
  });
};
const findQty = (id) =&gt; {
  const idx = cartItems.findIndex((i) =&gt; i.id === id);
  if (~idx) { return cartItems[idx].quantity; }
  return 0;
};</span></pre>
<p><span class="koboSpan" id="kobo.1531.1">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1532.1">add</span></strong><span class="koboSpan" id="kobo.1533.1"> function is </span><a id="_idIndexMarker672"/><span class="koboSpan" id="kobo.1534.1">called when the </span><strong class="bold"><span class="koboSpan" id="kobo.1535.1">Add to bag</span></strong><span class="koboSpan" id="kobo.1536.1"> link is clicked. </span><span class="koboSpan" id="kobo.1536.2">Similarly, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1537.1">buy</span></strong><span class="koboSpan" id="kobo.1538.1"> function shown in the following code snippet will be called when the user clicks on the </span><strong class="bold"><span class="koboSpan" id="kobo.1539.1">Buy </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1540.1">now</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1541.1"> button:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1542.1">
// ProductCard.jsconst buy = async () =&gt; {
  const isLoggedIn = checkLogin();
  if (isLoggedIn &amp;&amp; product?.id) {
    const res = await callAddItemApi();
    if (res &amp;&amp; res.success) { navigate("/cart"); }
    else { setMsg(res &amp;&amp; typeof res === "string" ? </span><span class="koboSpan" id="kobo.1542.2">res :
        res.error.message); }
  }
};</span></pre>
<p><span class="koboSpan" id="kobo.1543.1">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1544.1">buy</span></strong><span class="koboSpan" id="kobo.1545.1"> function is very similar to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1546.1">add</span></strong><span class="koboSpan" id="kobo.1547.1"> function. </span><span class="koboSpan" id="kobo.1547.2">Contrary to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1548.1">add</span></strong><span class="koboSpan" id="kobo.1549.1"> function, on a successful response from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1550.1">callAddItemApi</span></strong><span class="koboSpan" id="kobo.1551.1">, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1552.1">buy</span></strong><span class="koboSpan" id="kobo.1553.1"> function redirects the user to the cart page using a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1554.1">useNavigate</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1555.1">hook instance.</span></span></p>
<p><span class="koboSpan" id="kobo.1556.1">Let’s have a look at a JSX template. </span><span class="koboSpan" id="kobo.1556.2">In the following code snippet, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1557.1">className</span></strong><span class="koboSpan" id="kobo.1558.1"> attribute values have been stripped for </span><span class="No-Break"><span class="koboSpan" id="kobo.1559.1">better readability:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1560.1">
return ( &lt;div id={product.id} className="my-1 px-1 w-full…"&gt;
  &lt;figure className="bg-gray-100 rounded-xl p-8 …"&gt;
   &lt;img className="w-72 h-72 mx-auto"
     src={product.imageUrl}alt={product.name} /&gt;
   &lt;div className="pt-4 md:p-6 text-center xs:pl-2 …"&gt;
    &lt;form className="flex-auto"&gt;
     &lt;div className="flex flex-wrap items-center …"&gt;
      &lt;h1 className="w-full flex-none font-bold mb-2.5 …"&gt;
        </span><strong class="bold"><span class="koboSpan" id="kobo.1561.1">&lt;Link to={`/products/${product.id}`}&gt;</span></strong><span class="koboSpan" id="kobo.1562.1">
          </span><strong class="bold"><span class="koboSpan" id="kobo.1563.1">{product.name}&lt;/Link&gt;</span></strong><span class="koboSpan" id="kobo.1564.1">
      &lt;/h1&gt;
      &lt;div className="text-4xl leading-7 font-bold …"&gt;
        {"$"}
        {product.price.toFixed(2)}
      &lt;/div&gt;
      &lt;div className="text-sm font-medium text-gray-400 …"&gt;
        In stock
      &lt;/div&gt;
     &lt;/div&gt;
     &lt;div className="flex space-x-3 mt-8 mb-4 text-sm …"&gt;
      &lt;div className="flex-auto flex justify-between"&gt;
       &lt;button className="w-1/2…"
         type="button" </span><strong class="bold"><span class="koboSpan" id="kobo.1565.1">onClick={buy}</span></strong><span class="koboSpan" id="kobo.1566.1">&gt;
        Buy now
       &lt;/button&gt;
       &lt;button className="flex…"
         type="button" </span><strong class="bold"><span class="koboSpan" id="kobo.1567.1">onClick={add}</span></strong><span class="koboSpan" id="kobo.1568.1">&gt;
        Add to bag
       &lt;/button&gt;
      &lt;/div&gt;
     &lt;/div&gt;
     &lt;p className="text-sm text-gray-500 text-left"&gt;
      Free shipping on all local orders.
</span><span class="koboSpan" id="kobo.1568.2">     &lt;/p&gt;
    &lt;/form&gt;
   &lt;/div&gt;
  &lt;/figure&gt;
 &lt;/div&gt;
 );
};
export default ProductCard;</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductCard.js"><span class="No-Break"><span class="koboSpan" id="kobo.1569.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductCard.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1570.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1571.1">onClick</span></strong><span class="koboSpan" id="kobo.1572.1"> event has</span><a id="_idIndexMarker673"/><span class="koboSpan" id="kobo.1573.1"> been bound to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1574.1">buy</span></strong><span class="koboSpan" id="kobo.1575.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1576.1">add</span></strong><span class="koboSpan" id="kobo.1577.1"> for the </span><strong class="bold"><span class="koboSpan" id="kobo.1578.1">Buy now</span></strong><span class="koboSpan" id="kobo.1579.1"> button and the </span><strong class="bold"><span class="koboSpan" id="kobo.1580.1">Add to bag</span></strong><span class="koboSpan" id="kobo.1581.1"> link, respectively. </span><span class="koboSpan" id="kobo.1581.2">Also, the product name is a link created using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1582.1">Link</span></strong><span class="koboSpan" id="kobo.1583.1">. </span><span class="koboSpan" id="kobo.1583.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1584.1">to</span></strong><span class="koboSpan" id="kobo.1585.1"> attribute of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1586.1">Link</span></strong><span class="koboSpan" id="kobo.1587.1"> contains the path that points to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1588.1">ProductDetail</span></strong><span class="koboSpan" id="kobo.1589.1"> component. </span><span class="koboSpan" id="kobo.1589.2">This path also contains the path parameter ID. </span><span class="koboSpan" id="kobo.1589.3">You can use this parameter to perform certain operations on it. </span><span class="koboSpan" id="kobo.1589.4">Similarly, you can also pass the query parameters the way you do in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1590.1">browser URL.</span></span></p>
<p><span class="koboSpan" id="kobo.1591.1">When the user clicks on the product name, the user is redirected to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1592.1">ProductDetail</span></strong><span class="koboSpan" id="kobo.1593.1"> component (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1594.1">ProductDetail.js</span></strong><span class="koboSpan" id="kobo.1595.1">). </span><span class="koboSpan" id="kobo.1595.2">Let’s develop </span><span class="No-Break"><span class="koboSpan" id="kobo.1596.1">this next.</span></span></p>
<h2 id="_idParaDest-189"><a id="_idTextAnchor188"/><span class="koboSpan" id="kobo.1597.1">Developing the ProductDetail component</span></h2>
<p><span class="koboSpan" id="kobo.1598.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1599.1">ProductDetail</span></strong><span class="koboSpan" id="kobo.1600.1"> component is like the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1601.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1602.1"> component, except that it loads the product details from </span><a id="_idIndexMarker674"/><span class="koboSpan" id="kobo.1603.1">the backend by using the ID from </span><span class="No-Break"><span class="koboSpan" id="kobo.1604.1">the path.</span></span></p>
<p><span class="koboSpan" id="kobo.1605.1">Let’s see how this is done. </span><span class="koboSpan" id="kobo.1605.2">Only code related to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1606.1">Fetch</span></strong><span class="koboSpan" id="kobo.1607.1"> product has been shown in the following snippet. </span><span class="koboSpan" id="kobo.1607.2">The rest of the code is the same as for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1608.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1609.1"> component. </span><span class="koboSpan" id="kobo.1609.2">However, you can refer to the full code in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1610.1">GitHub repository:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1611.1">
import {Link, </span><strong class="bold"><span class="koboSpan" id="kobo.1612.1">useParams</span></strong><span class="koboSpan" id="kobo.1613.1">, useNavigate} from "react-router-dom";import ProductClient from "../api/ProductClient";
// Other imports removed for brevity
const ProductDetail = ({ auth }) =&gt; {
  </span><strong class="bold"><span class="koboSpan" id="kobo.1614.1">const { id } = useParams();</span></strong><span class="koboSpan" id="kobo.1615.1">
  // Other declaration removed for brevity
  // Other functions removed for brevity
  useEffect(() =&gt; {
    async function getProduct(id) {
      const client = new ProductClient();
      const res = await </span><strong class="bold"><span class="koboSpan" id="kobo.1616.1">client.fetch(id)</span></strong><span class="koboSpan" id="kobo.1617.1">;
      if (res &amp;&amp; res.success) { setProduct(res.data); }
    }
    async function fetchCart(auth) {
      const res = await new CartClient(auth).fetch();
      if (res &amp;&amp; res.success) {
        console.log(res.data);
        dispatch(updateCart(res.data.items));
      }
    }
    if (auth?.token) fetchCart(auth);
    getProduct(</span><strong class="bold"><span class="koboSpan" id="kobo.1618.1">id</span></strong><span class="koboSpan" id="kobo.1619.1">);
  }, [</span><strong class="bold"><span class="koboSpan" id="kobo.1620.1">id</span></strong><span class="koboSpan" id="kobo.1621.1">]);
  return ( /* JSX Template */ );
};
export default ProductDetail;</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductDetail.js"><span class="No-Break"><span class="koboSpan" id="kobo.1622.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/ProductDetail.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1623.1">You have used </span><strong class="source-inline"><span class="koboSpan" id="kobo.1624.1">useParams()</span></strong><span class="koboSpan" id="kobo.1625.1"> from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1626.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.1627.1"> package to retrieve the product ID passed from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1628.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1629.1"> component. </span><span class="koboSpan" id="kobo.1629.2">This </span><strong class="source-inline"><span class="koboSpan" id="kobo.1630.1">id</span></strong><span class="koboSpan" id="kobo.1631.1"> property is then used to fetch the product from the backend server using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1632.1">ProductClient</span></strong><span class="koboSpan" id="kobo.1633.1"> component. </span><span class="koboSpan" id="kobo.1633.2">Upon a successful response, the retrieved product detail is set in the state product using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1634.1">setProduct</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1635.1">state</span></span><span class="No-Break"><a id="_idIndexMarker675"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1636.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.1637.1">We are done with the development of product-based components such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1638.1">ProductList</span></strong><span class="koboSpan" id="kobo.1639.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1640.1">Products</span></strong><span class="koboSpan" id="kobo.1641.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1642.1">ProductCard</span></strong><span class="koboSpan" id="kobo.1643.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1644.1">ProductDetail</span></strong><span class="koboSpan" id="kobo.1645.1">. </span><span class="koboSpan" id="kobo.1645.2">We will now focus on authentication functionality so that we can later work on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1646.1">cart</span></strong><span class="koboSpan" id="kobo.1647.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1648.1">orders</span></strong><span class="koboSpan" id="kobo.1649.1"> components, which require an </span><span class="No-Break"><span class="koboSpan" id="kobo.1650.1">authenticated user.</span></span></p>
<h1 id="_idParaDest-190"><a id="_idTextAnchor189"/><span class="koboSpan" id="kobo.1651.1">Implementing authentication</span></h1>
<p><span class="koboSpan" id="kobo.1652.1">Before you</span><a id="_idIndexMarker676"/><span class="koboSpan" id="kobo.1653.1"> jump into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1654.1">Login</span></strong><span class="koboSpan" id="kobo.1655.1"> component development, you will want to figure out how to manage a token received from a successful login response and</span><a id="_idIndexMarker677"/><span class="koboSpan" id="kobo.1656.1"> how to make sure that if the access token has expired, then a refresh token request should be fired before making any call that </span><span class="No-Break"><span class="koboSpan" id="kobo.1657.1">requires authentication.</span></span></p>
<p><span class="koboSpan" id="kobo.1658.1">The browser allows you to store tokens or any other information in cookies, session storage, and local storage. </span><span class="koboSpan" id="kobo.1658.2">From the server side, we haven’t opted for cookie or stateful communication, therefore we are left with the remaining two options. </span><span class="koboSpan" id="kobo.1658.3">Session storage is preferable for more secure applications because it is specific to a given tab, and it gets cleared as soon as you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1659.1">Refresh</span></strong><span class="koboSpan" id="kobo.1660.1"> button or close the tab. </span><span class="koboSpan" id="kobo.1660.2">We want to manage login persistence between different tabs and page refresh; therefore, we’ll opt for local storage of </span><span class="No-Break"><span class="koboSpan" id="kobo.1661.1">the browser.</span></span></p>
<p><span class="koboSpan" id="kobo.1662.1">On top of that, you can also</span><a id="_idIndexMarker678"/><span class="koboSpan" id="kobo.1663.1"> store them in the state in the same way you will manage the cart state. </span><span class="koboSpan" id="kobo.1663.2">However, this will be very similar to session storage. </span><span class="koboSpan" id="kobo.1663.3">Let’s leave that option </span><span class="No-Break"><span class="koboSpan" id="kobo.1664.1">for now.</span></span></p>
<h2 id="_idParaDest-191"><a id="_idTextAnchor190"/><span class="koboSpan" id="kobo.1665.1">Creating a custom useToken hook</span></h2>
<p><span class="koboSpan" id="kobo.1666.1">You have now used </span><a id="_idIndexMarker679"/><span class="koboSpan" id="kobo.1667.1">different React hooks. </span><span class="koboSpan" id="kobo.1667.2">Let’s move a step forward and create a custom hook. </span><span class="koboSpan" id="kobo.1667.3">First, create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.1668.1">hooks</span></strong><span class="koboSpan" id="kobo.1669.1"> directory</span><a id="_idIndexMarker680"/><span class="koboSpan" id="kobo.1670.1"> under the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1671.1">src</span></strong><span class="koboSpan" id="kobo.1672.1"> directory, and create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1673.1">useToken.js</span></strong><span class="koboSpan" id="kobo.1674.1"> file </span><span class="No-Break"><span class="koboSpan" id="kobo.1675.1">in it.</span></span></p>
<p><span class="koboSpan" id="kobo.1676.1">Then, add the following code </span><span class="No-Break"><span class="koboSpan" id="kobo.1677.1">to it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1678.1">
import { useState } from "react";export default function </span><strong class="bold"><span class="koboSpan" id="kobo.1679.1">useToken</span></strong><span class="koboSpan" id="kobo.1680.1">() {
 const </span><strong class="bold"><span class="koboSpan" id="kobo.1681.1">getToken</span></strong><span class="koboSpan" id="kobo.1682.1"> = () =&gt; {
  const tokenResponse = localStorage.getItem
    ("tokenResponse");
  const info = tokenResponse ? </span><span class="koboSpan" id="kobo.1682.2">JSON.parse
    (tokenResponse) : "";
  return info;
 };
 </span><strong class="bold"><span class="koboSpan" id="kobo.1683.1">const [token, setToken] = useState(getToken());</span></strong><span class="koboSpan" id="kobo.1684.1">
 const </span><strong class="bold"><span class="koboSpan" id="kobo.1685.1">saveToken</span></strong><span class="koboSpan" id="kobo.1686.1"> = (tokenResponse) =&gt; {
  localStorage.setItem("tokenResponse", JSON.stringify
    (tokenResponse));
  setToken(tokenResponse);
 };
 </span><strong class="bold"><span class="koboSpan" id="kobo.1687.1">return { setToken: saveToken, token, };</span></strong><span class="koboSpan" id="kobo.1688.1">
}</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/hooks/useToken.js"><span class="No-Break"><span class="koboSpan" id="kobo.1689.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/hooks/useToken.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1690.1">Here, you are using a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1691.1">useState</span></strong><span class="koboSpan" id="kobo.1692.1"> hook to maintain the token state. </span><span class="koboSpan" id="kobo.1692.2">The token state is initialized while declaring the token state by calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1693.1">getToken</span></strong><span class="koboSpan" id="kobo.1694.1"> function in the constructor of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1695.1">useState</span></strong><span class="koboSpan" id="kobo.1696.1">. </span><span class="koboSpan" id="kobo.1696.2">Now, you need to</span><a id="_idIndexMarker681"/><span class="koboSpan" id="kobo.1697.1"> provide a mechanism that should update the initial token state whenever there is a change in action, such as login or logout. </span><span class="koboSpan" id="kobo.1697.2">You can create a new function, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1698.1">saveToken</span></strong><span class="koboSpan" id="kobo.1699.1">, for </span><span class="No-Break"><span class="koboSpan" id="kobo.1700.1">this purpose.</span></span></p>
<p><span class="koboSpan" id="kobo.1701.1">Both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1702.1">getToken</span></strong><span class="koboSpan" id="kobo.1703.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1704.1">saveToken</span></strong><span class="koboSpan" id="kobo.1705.1"> functions use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1706.1">localStorage</span></strong><span class="koboSpan" id="kobo.1707.1"> to retrieve and update the token respectively. </span><span class="koboSpan" id="kobo.1707.2">Finally, both the token state and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1708.1">saveToken</span></strong><span class="koboSpan" id="kobo.1709.1"> function (in the form of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1710.1">setToken</span></strong><span class="koboSpan" id="kobo.1711.1">) are returned for </span><span class="No-Break"><span class="koboSpan" id="kobo.1712.1">their usage.</span></span></p>
<p><span class="koboSpan" id="kobo.1713.1">Next, you create </span><a id="_idIndexMarker682"/><span class="koboSpan" id="kobo.1714.1">another REST API client for authentication. </span><span class="koboSpan" id="kobo.1714.2">Let’s add another client, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1715.1">Auth.js</span></strong><span class="koboSpan" id="kobo.1716.1"> (</span><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/Auth.js"><span class="koboSpan" id="kobo.1717.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/api/Auth.js</span></a><span class="koboSpan" id="kobo.1718.1">), in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1719.1">src/api</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1720.1"> directory.</span></span></p>
<p><span class="koboSpan" id="kobo.1721.1">This </span><strong class="source-inline"><span class="koboSpan" id="kobo.1722.1">Auth.js</span></strong><span class="koboSpan" id="kobo.1723.1"> client is very similar to other API clients. </span><span class="koboSpan" id="kobo.1723.2">It has three functions that perform the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1724.1">login</span></strong><span class="koboSpan" id="kobo.1725.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1726.1">logout</span></strong><span class="koboSpan" id="kobo.1727.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1728.1">refresh</span></strong><span class="koboSpan" id="kobo.1729.1"> access token operations by using the backend server REST APIs, outlined </span><span class="No-Break"><span class="koboSpan" id="kobo.1730.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1731.1">The login operation sets the access token, refresh token, user ID, and username in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1732.1">responseToken</span></strong><span class="koboSpan" id="kobo.1733.1"> key of the local storage by using the state arguments passed by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1734.1">App</span></strong><span class="koboSpan" id="kobo.1735.1"> component. </span><span class="koboSpan" id="kobo.1735.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1736.1">App</span></strong><span class="koboSpan" id="kobo.1737.1"> component, as usual, uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1738.1">useToken</span></strong><span class="koboSpan" id="kobo.1739.1"> custom hook. </span><span class="koboSpan" id="kobo.1739.2">The login operation also sets the access token’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1740.1">expiration time.</span></span></li>
<li><span class="koboSpan" id="kobo.1741.1">The refresh access token operation updates the access token and its </span><span class="No-Break"><span class="koboSpan" id="kobo.1742.1">expiration time.</span></span></li>
<li><span class="koboSpan" id="kobo.1743.1">The logout operation removes the tokens and sets the expiration time </span><span class="No-Break"><span class="koboSpan" id="kobo.1744.1">to zero.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1745.1">You are done with</span><a id="_idIndexMarker683"/><span class="koboSpan" id="kobo.1746.1"> the prerequisite work for implementing the login functionality and can now move on to creating the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1747.1">Login</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1748.1"> component.</span></span></p>
<h2 id="_idParaDest-192"><a id="_idTextAnchor191"/><span class="koboSpan" id="kobo.1749.1">Writing the Login component</span></h2>
<p><span class="koboSpan" id="kobo.1750.1">Let’s create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.1751.1">Login.js</span></strong><span class="koboSpan" id="kobo.1752.1"> file </span><a id="_idIndexMarker684"/><span class="koboSpan" id="kobo.1753.1">under the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1754.1">src/components</span></strong><span class="koboSpan" id="kobo.1755.1"> directory and then add the </span><span class="No-Break"><span class="koboSpan" id="kobo.1756.1">following </span></span><span class="No-Break"><a id="_idIndexMarker685"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1757.1">code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1758.1">
import { useNavigate } from "react-router-dom";import { useState } from "react";
</span><strong class="bold"><span class="koboSpan" id="kobo.1759.1">import PropTypes from "prop-types";</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1760.1">Login.propTypes = { auth: PropTypes.object.isRequired, };</span></strong><span class="koboSpan" id="kobo.1761.1">
const Login = ({ uri, auth }) =&gt; {
  const [username, setUserName] = useState();
  const [password, setPassword] = useState();
  const [errMsg, setErrMsg] = useState();
  const navigate = useNavigate();
  const </span><strong class="bold"><span class="koboSpan" id="kobo.1762.1">cancel</span></strong><span class="koboSpan" id="kobo.1763.1"> = () =&gt; {
    const l = navigate.length;
    l &gt; 2 ? </span><span class="koboSpan" id="kobo.1763.2">navigate.goBack() : navigate("/");
  };
  const </span><strong class="bold"><span class="koboSpan" id="kobo.1764.1">handleSubmit</span></strong><span class="koboSpan" id="kobo.1765.1"> = async € =&gt; {
    e.preventDefault();
    const res = await auth.loginUser({ username, password });
    if (res &amp;&amp; res.success) {
      setErrMsg(null);
      navigate(uri ? </span><span class="koboSpan" id="kobo.1765.2">uri":""/");
    } else { setErrMsg(
     res &amp;&amp; typeof res ="= "str"ng" ?
</span><span class="koboSpan" id="kobo.1765.3">       res : "Unsuccessful");
    }
  };
  return (/* JSX Template */ );
}</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Login.js"><span class="No-Break"><span class="koboSpan" id="kobo.1766.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Login.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1767.1">Before you start understanding the code, it’s useful to know that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1768.1">PropTypes</span></strong><span class="koboSpan" id="kobo.1769.1"> provides a way to check the type of passed props. </span><span class="koboSpan" id="kobo.1769.2">Here, we have made sure that the auth prop is an object and a required </span><a id="_idIndexMarker686"/><span class="koboSpan" id="kobo.1770.1">prop. </span><span class="koboSpan" id="kobo.1770.2">You may see messages in the console if typing fails during argument passing or</span><a id="_idIndexMarker687"/><span class="koboSpan" id="kobo.1771.1"> assignments. </span><span class="koboSpan" id="kobo.1771.2">Normally, you add this </span><strong class="source-inline"><span class="koboSpan" id="kobo.1772.1">props</span></strong><span class="koboSpan" id="kobo.1773.1"> check at the end of a file (see bottom of the source code), but here it has been added at the top for </span><span class="No-Break"><span class="koboSpan" id="kobo.1774.1">better readability.</span></span></p>
<p><span class="koboSpan" id="kobo.1775.1">This component contains two props: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1776.1">auth</span></strong><span class="koboSpan" id="kobo.1777.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1778.1">uri</span></strong><span class="koboSpan" id="kobo.1779.1">. </span><span class="koboSpan" id="kobo.1779.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1780.1">auth</span></strong><span class="koboSpan" id="kobo.1781.1"> prop represents the authentication client, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1782.1">uri</span></strong><span class="koboSpan" id="kobo.1783.1"> is a string that sends the user back to the appropriate page after a </span><span class="No-Break"><span class="koboSpan" id="kobo.1784.1">successful login.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1785.1">Login.js</span></strong><span class="koboSpan" id="kobo.1786.1"> has two functions: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1787.1">handleSubmit</span></strong><span class="koboSpan" id="kobo.1788.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1789.1">cancel</span></strong><span class="koboSpan" id="kobo.1790.1">. </span><span class="koboSpan" id="kobo.1790.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1791.1">cancel</span></strong><span class="koboSpan" id="kobo.1792.1"> function just sends the user back to the previous page or the home page. </span><span class="koboSpan" id="kobo.1792.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1793.1">handleSubmit</span></strong><span class="koboSpan" id="kobo.1794.1"> function makes use of the authentication client and calls the login API with the username </span><span class="No-Break"><span class="koboSpan" id="kobo.1795.1">and password.</span></span></p>
<p><span class="koboSpan" id="kobo.1796.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1797.1">handleSubmit</span></strong><span class="koboSpan" id="kobo.1798.1"> function is called when a form is submitted (i.e., when the user clicks on the </span><strong class="bold"><span class="koboSpan" id="kobo.1799.1">Sign in</span></strong><span class="koboSpan" id="kobo.1800.1"> button). </span><span class="koboSpan" id="kobo.1800.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1801.1">cancel</span></strong><span class="koboSpan" id="kobo.1802.1"> function is called when the user clicks on the </span><strong class="bold"><span class="koboSpan" id="kobo.1803.1">Cancel</span></strong><span class="koboSpan" id="kobo.1804.1"> button. </span><span class="koboSpan" id="kobo.1804.2">Another noteworthy point relates to setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1805.1">username</span></strong><span class="koboSpan" id="kobo.1806.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1807.1">password</span></strong><span class="koboSpan" id="kobo.1808.1"> states. </span><span class="koboSpan" id="kobo.1808.2">These are set on </span><strong class="source-inline"><span class="koboSpan" id="kobo.1809.1">onChange</span></strong><span class="koboSpan" id="kobo.1810.1"> events respectively (refer to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1811.1">Login.js</span></strong><span class="koboSpan" id="kobo.1812.1"> code file on GitHub for truncated JSX content). </span><span class="koboSpan" id="kobo.1812.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1813.1">e.target.value</span></strong><span class="koboSpan" id="kobo.1814.1"> argument represents the user input value in the input field. </span><span class="koboSpan" id="kobo.1814.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1815.1">e</span></strong><span class="koboSpan" id="kobo.1816.1"> instance represents the event and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1817.1">target</span></strong><span class="koboSpan" id="kobo.1818.1"> represents the target input field for the </span><span class="No-Break"><span class="koboSpan" id="kobo.1819.1">respective event.</span></span></p>
<p><span class="koboSpan" id="kobo.1820.1">So, now you know the complete flow: the user logs in and the app sets the required token and information in local storage. </span><span class="koboSpan" id="kobo.1820.2">The API client uses this information to call the authenticated APIs. </span><span class="koboSpan" id="kobo.1820.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1821.1">logout</span></strong><span class="koboSpan" id="kobo.1822.1"> operation, which is a part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1823.1">Header</span></strong><span class="koboSpan" id="kobo.1824.1"> component (</span><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Header.js"><span class="koboSpan" id="kobo.1825.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Header.js</span></a><span class="koboSpan" id="kobo.1826.1">), calls the Auth client’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1827.1">logout</span></strong><span class="koboSpan" id="kobo.1828.1"> function, which calls the remove refresh token backend server’s REST API and removes</span><a id="_idIndexMarker688"/><span class="koboSpan" id="kobo.1829.1"> the authentication information from the </span><span class="No-Break"><span class="koboSpan" id="kobo.1830.1">local storage.</span></span></p>
<p><span class="koboSpan" id="kobo.1831.1">After authentication implementation, you need to write one more piece of code before you jump to </span><a id="_idIndexMarker689"/><span class="koboSpan" id="kobo.1832.1">writing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1833.1">Cart</span></strong><span class="koboSpan" id="kobo.1834.1"> component: cart context. </span><span class="koboSpan" id="kobo.1834.2">Let’s do </span><span class="No-Break"><span class="koboSpan" id="kobo.1835.1">that now.</span></span></p>
<h2 id="_idParaDest-193"><a id="_idTextAnchor192"/><span class="koboSpan" id="kobo.1836.1">Writing the custom cart context</span></h2>
<p><span class="koboSpan" id="kobo.1837.1">You can use the Redux library</span><a id="_idIndexMarker690"/><span class="koboSpan" id="kobo.1838.1"> for centralizing and maintaining an application’s global state. </span><span class="koboSpan" id="kobo.1838.2">However, you</span><a id="_idIndexMarker691"/><span class="koboSpan" id="kobo.1839.1"> are going to use a Redux-like custom hook to maintain the state for the cart. </span><span class="koboSpan" id="kobo.1839.2">This uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1840.1">createContext</span></strong><span class="koboSpan" id="kobo.1841.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1842.1">useReducer</span></strong><span class="koboSpan" id="kobo.1843.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1844.1">useContext</span></strong><span class="koboSpan" id="kobo.1845.1"> hooks from the </span><span class="No-Break"><span class="koboSpan" id="kobo.1846.1">React library.</span></span></p>
<p><span class="koboSpan" id="kobo.1847.1">You already know that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1848.1">createContext</span></strong><span class="koboSpan" id="kobo.1849.1"> returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.1850.1">Provider</span></strong><span class="koboSpan" id="kobo.1851.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1852.1">Consumer</span></strong><span class="koboSpan" id="kobo.1853.1">. </span><span class="koboSpan" id="kobo.1853.2">Therefore, when you create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1854.1">CartContext</span></strong><span class="koboSpan" id="kobo.1855.1"> using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1856.1">createContext</span></strong><span class="koboSpan" id="kobo.1857.1">, it will provide </span><strong class="source-inline"><span class="koboSpan" id="kobo.1858.1">CartContext.Provider</span></strong><span class="koboSpan" id="kobo.1859.1">. </span><span class="koboSpan" id="kobo.1859.2">You won’t use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1860.1">Consumer</span></strong><span class="koboSpan" id="kobo.1861.1">, as you are going to use a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1862.1">useContext</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1863.1"> hook.</span></span></p>
<p><span class="koboSpan" id="kobo.1864.1">Next, you need a cart state (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1865.1">cartItems</span></strong><span class="koboSpan" id="kobo.1866.1">) that you pass to the value in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1867.1">CartContext.Provider</span></strong><span class="koboSpan" id="kobo.1868.1"> so that it will be available in the component that uses  </span><strong class="source-inline"><span class="koboSpan" id="kobo.1869.1">CartContext</span></strong><span class="koboSpan" id="kobo.1870.1">. </span><span class="koboSpan" id="kobo.1870.2">Now, we just need a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1871.1">reducer</span></strong><span class="koboSpan" id="kobo.1872.1"> function. </span><span class="koboSpan" id="kobo.1872.2">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.1873.1">reducer</span></strong><span class="koboSpan" id="kobo.1874.1"> function accepts two arguments: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1875.1">state</span></strong><span class="koboSpan" id="kobo.1876.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1877.1">action</span></strong><span class="koboSpan" id="kobo.1878.1">. </span><span class="koboSpan" id="kobo.1878.2">Based on the provided action, it updates (mutates) the state and returns the </span><span class="No-Break"><span class="koboSpan" id="kobo.1879.1">updated state.</span></span></p>
<p><span class="koboSpan" id="kobo.1880.1">Now, let’s jump into</span><a id="_idIndexMarker692"/><span class="koboSpan" id="kobo.1881.1"> the code and see how it turns out. </span><span class="koboSpan" id="kobo.1881.2">Have a look at the </span><span class="No-Break"><span class="koboSpan" id="kobo.1882.1">following snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1883.1">
import React, { createContext, useReducer, useContext }  from "react";
export const </span><strong class="bold"><span class="koboSpan" id="kobo.1884.1">CartContext = createContext()</span></strong><span class="koboSpan" id="kobo.1885.1">;
function </span><strong class="bold"><span class="koboSpan" id="kobo.1886.1">useCartContext</span></strong><span class="koboSpan" id="kobo.1887.1">() { return </span><strong class="bold"><span class="koboSpan" id="kobo.1888.1">useContext(CartContext)</span></strong><span class="koboSpan" id="kobo.1889.1">; }
export const UPDATE_CART = "UPDATE_CART";
export const ADD_ITEM = "ADD_ITEM";
export const REMOVE_ITEM = "REMOVE_ITEM";
export function updateCart(items) {
  return { type: UPDATE_CART, items };
}
export function addItem(item) {
  return { type: ADD_ITEM, item };
}
export function removeItem(index) {
  return { type: REMOVE_ITEM, index };
}
export function </span><strong class="bold"><span class="koboSpan" id="kobo.1890.1">cartReducer</span></strong><span class="koboSpan" id="kobo.1891.1">(state, action) {
  switch (action.type) {
    case UPDATE_CART:
      return [...action?.items];
    case ADD_ITEM:
      return [...state, action.item];
    case REMOVE_ITEM:
      const list = [...state];
      list.splice(action.index, 1);
      return list;
    default:
      return state;
  }
}
const </span><strong class="bold"><span class="koboSpan" id="kobo.1892.1">CartContextProvider</span></strong><span class="koboSpan" id="kobo.1893.1"> = (props) =&gt; {
 const [cartItems, dispatch] = </span><strong class="bold"><span class="koboSpan" id="kobo.1894.1">useReducer(cartReducer, [])</span></strong><span class="koboSpan" id="kobo.1895.1">;
 const cartData = { cartItems, dispatch };
 return </span><strong class="bold"><span class="koboSpan" id="kobo.1896.1">&lt;CartContext.Provider value={cartData} {...props} /&gt;</span></strong><span class="koboSpan" id="kobo.1897.1">;
};
export { CartContextProvider, useCartContext };</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/hooks/CartContext.js"><span class="No-Break"><span class="koboSpan" id="kobo.1898.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/hooks/CartContext.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.1899.1">First, you have created a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1900.1">CartContext</span></strong><span class="koboSpan" id="kobo.1901.1"> with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1902.1">createContext</span></strong><span class="koboSpan" id="kobo.1903.1"> hook. </span><span class="koboSpan" id="kobo.1903.2">Then, you have declared a function that uses a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1904.1">useContext</span></strong><span class="koboSpan" id="kobo.1905.1"> hook and returns the value field’s value declared in</span><a id="_idIndexMarker693"/><span class="koboSpan" id="kobo.1906.1"> the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1907.1">CartContext.Provider</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1908.1"> tag.</span></span></p>
<p><span class="koboSpan" id="kobo.1909.1">Next, you </span><a id="_idIndexMarker694"/><span class="koboSpan" id="kobo.1910.1">need a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1911.1">reducer</span></strong><span class="koboSpan" id="kobo.1912.1"> function that uses the action and state. </span><span class="koboSpan" id="kobo.1912.2">Therefore, we first define action types such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1913.1">UPDATE_CART</span></strong><span class="koboSpan" id="kobo.1914.1"> and then write functions that return an action object that contains both the action type and argument value, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1915.1">updateCart</span></strong><span class="koboSpan" id="kobo.1916.1">. </span><span class="koboSpan" id="kobo.1916.2">Finally, you can write a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1917.1">reducer</span></strong><span class="koboSpan" id="kobo.1918.1"> function that takes </span><strong class="source-inline"><span class="koboSpan" id="kobo.1919.1">state</span></strong><span class="koboSpan" id="kobo.1920.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1921.1">action</span></strong><span class="koboSpan" id="kobo.1922.1"> as arguments and, based on the passed action type, will mutate the state and return the </span><span class="No-Break"><span class="koboSpan" id="kobo.1923.1">updated state.</span></span></p>
<p><span class="koboSpan" id="kobo.1924.1">Next, you define a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1925.1">CartContextProvider</span></strong><span class="koboSpan" id="kobo.1926.1"> function that returns the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1927.1">CartContext.Provider</span></strong><span class="koboSpan" id="kobo.1928.1"> component. </span><span class="koboSpan" id="kobo.1928.2">Here, you use the reducer function in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1929.1">useReducer</span></strong><span class="koboSpan" id="kobo.1930.1"> hook, and in its second argument, you pass the empty array as an initial state. </span><span class="koboSpan" id="kobo.1930.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1931.1">useReducer</span></strong><span class="koboSpan" id="kobo.1932.1"> hook returns to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1933.1">state</span></strong><span class="koboSpan" id="kobo.1934.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1935.1">dispatch</span></strong><span class="koboSpan" id="kobo.1936.1"> functions. </span><span class="koboSpan" id="kobo.1936.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1937.1">dispatch</span></strong><span class="koboSpan" id="kobo.1938.1"> function takes the action object as an argument. </span><span class="koboSpan" id="kobo.1938.2">You can use the function that returns the action object, such </span><strong class="source-inline"><span class="koboSpan" id="kobo.1939.1">updateCart</span></strong><span class="koboSpan" id="kobo.1940.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1941.1">addItem</span></strong><span class="koboSpan" id="kobo.1942.1">. </span><span class="koboSpan" id="kobo.1942.2">You wrap the state (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1943.1">cartItems</span></strong><span class="koboSpan" id="kobo.1944.1">) and dispatcher function (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1945.1">dispatch</span></strong><span class="koboSpan" id="kobo.1946.1">) in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1947.1">cartData</span></strong><span class="koboSpan" id="kobo.1948.1"> object and pass it to the value attribute in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1949.1">CartContext.Provider</span></strong><span class="koboSpan" id="kobo.1950.1"> component. </span><span class="koboSpan" id="kobo.1950.2">Finally, it exports both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1951.1">CartContextProvider</span></strong><span class="koboSpan" id="kobo.1952.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1953.1">useCartContext</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1954.1"> functions.</span></span></p>
<p><span class="koboSpan" id="kobo.1955.1">You are going to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1956.1">CartContextProvider</span></strong><span class="koboSpan" id="kobo.1957.1"> as a component wrapper in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1958.1">App</span></strong><span class="koboSpan" id="kobo.1959.1"> component. </span><span class="koboSpan" id="kobo.1959.2">This makes </span><strong class="source-inline"><span class="koboSpan" id="kobo.1960.1">cartData</span></strong><span class="koboSpan" id="kobo.1961.1"> (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1962.1">cartItems</span></strong><span class="koboSpan" id="kobo.1963.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1964.1">dispatch</span></strong><span class="koboSpan" id="kobo.1965.1">) available to all components inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.1966.1">CartContextProvider</span></strong><span class="koboSpan" id="kobo.1967.1">, which can be accessed and used </span><span class="No-Break"><span class="koboSpan" id="kobo.1968.1">via </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1969.1">useCartContext</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1970.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1971.1">Now, finally, you can</span><a id="_idIndexMarker695"/><span class="koboSpan" id="kobo.1972.1"> write the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1973.1">Cart</span></strong><span class="koboSpan" id="kobo.1974.1"> component in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1975.1">next subsection.</span></span></p>
<h2 id="_idParaDest-194"><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.1976.1">Writing the Cart component</span></h2>
<p><span class="koboSpan" id="kobo.1977.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1978.1">Cart</span></strong><span class="koboSpan" id="kobo.1979.1"> component is a parent </span><a id="_idIndexMarker696"/><span class="koboSpan" id="kobo.1980.1">component because it can</span><a id="_idIndexMarker697"/><span class="koboSpan" id="kobo.1981.1"> have multiple items (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1982.1">CartItem</span></strong><span class="koboSpan" id="kobo.1983.1"> components) in it. </span><span class="koboSpan" id="kobo.1983.2">Let’s create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.1984.1">cart.js</span></strong><span class="koboSpan" id="kobo.1985.1"> file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1986.1">src/components</span></strong><span class="koboSpan" id="kobo.1987.1"> directory and add the following code </span><span class="No-Break"><span class="koboSpan" id="kobo.1988.1">to it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1989.1">
// other imports</span><strong class="bold"><span class="koboSpan" id="kobo.1990.1">import { removeItem, updateCart, useCartContext }</span></strong><span class="koboSpan" id="kobo.1991.1">
       </span><strong class="bold"><span class="koboSpan" id="kobo.1992.1">from "../hooks/CartContext";</span></strong><span class="koboSpan" id="kobo.1993.1">
import CartItem from "./CartItem";
const Cart = ({ auth }) =&gt; {
  const [grandTotal, setGrandTotal] = useState(0);
  const [noRecMsg, setNoRecMsg] = useState("Loading...");
  const navigate = useNavigate();
  const cartClient = new CartClient(auth);
  const </span><strong class="bold"><span class="koboSpan" id="kobo.1994.1">orderClient = new OrderClient(auth);</span></strong><span class="koboSpan" id="kobo.1995.1">
  const </span><strong class="bold"><span class="koboSpan" id="kobo.1996.1">customerClient = new CustomerClient(auth);</span></strong><span class="koboSpan" id="kobo.1997.1">
  const </span><strong class="bold"><span class="koboSpan" id="kobo.1998.1">{ cartItems, dispatch } = useCartContext();</span></strong><span class="koboSpan" id="kobo.1999.1">
  // continue …</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Cart.js"><span class="No-Break"><span class="koboSpan" id="kobo.2000.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Cart.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.2001.1">Here, you used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2002.1">useCartContext</span></strong><span class="koboSpan" id="kobo.2003.1"> that was created in the previous subsection. </span><span class="koboSpan" id="kobo.2003.2">You also use import functions such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2004.1">updateCart</span></strong><span class="koboSpan" id="kobo.2005.1"> that return the action object (consumed by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2006.1">dispatch</span></strong><span class="koboSpan" id="kobo.2007.1"> function). </span><span class="koboSpan" id="kobo.2007.2">Apart from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2008.1">CartClient</span></strong><span class="koboSpan" id="kobo.2009.1"> Fetch-based API client, you also used </span><strong class="source-inline"><span class="koboSpan" id="kobo.2010.1">OrderClient</span></strong><span class="koboSpan" id="kobo.2011.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2012.1">CustomerClient</span></strong><span class="koboSpan" id="kobo.2013.1"> here for cart </span><span class="No-Break"><span class="koboSpan" id="kobo.2014.1">checkout operations.</span></span></p>
<p><span class="koboSpan" id="kobo.2015.1">Let’s add functions for</span><a id="_idIndexMarker698"/><span class="koboSpan" id="kobo.2016.1"> calculating the total (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2017.1">calTotal</span></strong><span class="koboSpan" id="kobo.2018.1">) and increasing the quantity (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2019.1">increaseQty</span></strong><span class="koboSpan" id="kobo.2020.1">) of a given product ID, as </span><span class="No-Break"><span class="koboSpan" id="kobo.2021.1">shown next:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2022.1">
// continue src/components/Cart.jsconst </span><strong class="bold"><span class="koboSpan" id="kobo.2023.1">calTotal</span></strong><span class="koboSpan" id="kobo.2024.1"> = (items) =&gt; {
  let total = 0;
  items?.forEach((i) =&gt; (
    total = total + i?.unitPrice * i?.quantity));
  return total.toFixed(2);
};
const </span><strong class="bold"><span class="koboSpan" id="kobo.2025.1">increaseQty</span></strong><span class="koboSpan" id="kobo.2026.1"> = async (id) =&gt; {
  const idx = cartItems.findIndex((i) =&gt; i.id === id);
  if (~idx) {
    cartItems[idx].</span><strong class="bold"><span class="koboSpan" id="kobo.2027.1">quantity</span></strong><span class="koboSpan" id="kobo.2028.1"> = cartItems[idx].</span><strong class="bold"><span class="koboSpan" id="kobo.2029.1">quantity + 1</span></strong><span class="koboSpan" id="kobo.2030.1">;
    const res = await cartClient.addOrUpdate
        (cartItems[idx]);
    if (res &amp;&amp; res.success) {
      </span><strong class="bold"><span class="koboSpan" id="kobo.2031.1">refreshCart</span></strong><span class="koboSpan" id="kobo.2032.1">(res.data);
      if (res.data?.length &lt; 1) { setNoRecMsg
          ("Cart empty"); }
    } else {
      setNoRecMsg(res &amp;&amp; typeof res === "string" ?
</span><span class="koboSpan" id="kobo.2032.2">         res : res.error.message);
    }
  }
}; // continue …</span></pre>
<p><span class="koboSpan" id="kobo.2033.1">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2034.1">increaseQty</span></strong><span class="koboSpan" id="kobo.2035.1"> function first finds whether the given ID exists among the cart items or not. </span><span class="koboSpan" id="kobo.2035.2">If it exists, then it increases </span><a id="_idIndexMarker699"/><span class="koboSpan" id="kobo.2036.1">the quantity of a product by </span><strong class="source-inline"><span class="koboSpan" id="kobo.2037.1">1</span></strong><span class="koboSpan" id="kobo.2038.1">. </span><span class="koboSpan" id="kobo.2038.2">Finally, it calls the REST API to update the cart items and uses</span><a id="_idIndexMarker700"/><span class="koboSpan" id="kobo.2039.1"> the response to update the cart by calling the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2040.1">refreshCart</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2041.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.2042.1">Let’s add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2043.1">decreaseQty</span></strong><span class="koboSpan" id="kobo.2044.1"> function, which is like </span><strong class="source-inline"><span class="koboSpan" id="kobo.2045.1">increaseQty</span></strong><span class="koboSpan" id="kobo.2046.1"> but rather decreases the quantity by one. </span><span class="koboSpan" id="kobo.2046.2">Also, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2047.1">deleteItem</span></strong><span class="koboSpan" id="kobo.2048.1"> function will </span><a id="_idIndexMarker701"/><span class="koboSpan" id="kobo.2049.1">remove a given cart item from the cart. </span><span class="koboSpan" id="kobo.2049.2">The code is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2050.1">following snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2051.1">
// continue src/components/Cart.jsconst </span><strong class="bold"><span class="koboSpan" id="kobo.2052.1">decreaseQty</span></strong><span class="koboSpan" id="kobo.2053.1"> = async (id) =&gt; {
  const idx = cartItems.findIndex((i) =&gt; i.id === id);
  if (~idx &amp;&amp; cartItems[idx].quantity &lt;= 1) {
    return </span><strong class="bold"><span class="koboSpan" id="kobo.2054.1">deleteItem(id)</span></strong><span class="koboSpan" id="kobo.2055.1">;
  } else if (cartItems[idx]?.quantity &gt; 1) {
    cartItems[idx].</span><strong class="bold"><span class="koboSpan" id="kobo.2056.1">quantity</span></strong><span class="koboSpan" id="kobo.2057.1"> = cartItems[idx].</span><strong class="bold"><span class="koboSpan" id="kobo.2058.1">quantity - 1</span></strong><span class="koboSpan" id="kobo.2059.1">;
    const res = await cartClient.addOrUpdate
        (cartItems[idx]);
    if (res &amp;&amp; res.success) {
      </span><strong class="bold"><span class="koboSpan" id="kobo.2060.1">refreshCart(res.data)</span></strong><span class="koboSpan" id="kobo.2061.1">;
      if (res.data?.length &lt; 1) { setNoRecMsg
          ("Empty cart"); }
      return;
    } else {
      setNoRecMsg(res &amp;&amp; typeof res === "string" ?
</span><span class="koboSpan" id="kobo.2061.2">          res : res?.error?.message);
    }
  }
};
const </span><strong class="bold"><span class="koboSpan" id="kobo.2062.1">deleteItem</span></strong><span class="koboSpan" id="kobo.2063.1"> = async (id) =&gt; {
 const idx = cartItems.findIndex((i) =&gt; i.id === id);
 if (~idx) {
   const res = await cartClient.remove(cartItems[idx].id);
   if (res &amp;&amp; res.success) {
    </span><strong class="bold"><span class="koboSpan" id="kobo.2064.1">dispatch(removeItem(idx))</span></strong><span class="koboSpan" id="kobo.2065.1">;
    if (res.data?.length &lt; 1) { setNoRecMsg
        ("Item removed");}
   } else {
     setNoRecMsg(
       res &amp;&amp; typeof res === "string" ? </span><span class="koboSpan" id="kobo.2065.2">res:
           "There is an error performing the remove.");
   }
 }
}; // continue …</span></pre>
<p><span class="koboSpan" id="kobo.2066.1">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2067.1">decreaseQty</span></strong><span class="koboSpan" id="kobo.2068.1"> function does one extra step in comparison to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2069.1">increaseQty</span></strong><span class="koboSpan" id="kobo.2070.1"> — it removes the</span><a id="_idIndexMarker702"/><span class="koboSpan" id="kobo.2071.1"> item if the existing quantity is </span><strong class="source-inline"><span class="koboSpan" id="kobo.2072.1">1</span></strong><span class="koboSpan" id="kobo.2073.1"> by calling the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2074.1">deleteItem</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2075.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.2076.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2077.1">deleteItem</span></strong><span class="koboSpan" id="kobo.2078.1"> function first finds the product based on a given ID. </span><span class="koboSpan" id="kobo.2078.2">If it exists, then it calls the REST API to remove</span><a id="_idIndexMarker703"/><span class="koboSpan" id="kobo.2079.1"> the product from the cart and updates the cart item state by calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2080.1">dispatch</span></strong><span class="koboSpan" id="kobo.2081.1"> function with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2082.1">action</span></strong><span class="koboSpan" id="kobo.2083.1"> object returned by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2084.1">removeItem</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2085.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.2086.1">Let’s define the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2087.1">refreshCart</span></strong><span class="koboSpan" id="kobo.2088.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2089.1">useEffect</span></strong><span class="koboSpan" id="kobo.2090.1"> functions, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.2091.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2092.1">
// continue src/components/Cart.jsconst </span><strong class="bold"><span class="koboSpan" id="kobo.2093.1">refreshCart</span></strong><span class="koboSpan" id="kobo.2094.1"> = (items) =&gt; {
  setGrandTotal(calTotal(items));
  </span><strong class="bold"><span class="koboSpan" id="kobo.2095.1">dispatch(updateCart(items))</span></strong><span class="koboSpan" id="kobo.2096.1">;
};
</span><strong class="bold"><span class="koboSpan" id="kobo.2097.1">useEffect</span></strong><span class="koboSpan" id="kobo.2098.1">(() =&gt; {
  async function </span><strong class="bold"><span class="koboSpan" id="kobo.2099.1">fetch</span></strong><span class="koboSpan" id="kobo.2100.1">() {
    const res = </span><strong class="bold"><span class="koboSpan" id="kobo.2101.1">await cartClient.fetch()</span></strong><span class="koboSpan" id="kobo.2102.1">;
    if (res &amp;&amp; res.success) {
      refreshCart(res.data.items);
      if (res.data?.items &amp;&amp; res.data.items?.length &lt; 1) {
        setNoRecMsg("Cart is empty.");
      }
    } else {
      setNoRecMsg(res &amp;&amp; typeof res === "string" ?
</span><span class="koboSpan" id="kobo.2102.2">          res : res.error.message);
    }
  }
  fetch();
}, []); // continue …</span></pre>
<p><span class="koboSpan" id="kobo.2103.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2104.1">refreshCart</span></strong><span class="koboSpan" id="kobo.2105.1"> function updates the total and dispatches the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2106.1">updateCart</span></strong><span class="koboSpan" id="kobo.2107.1"> action. </span><strong class="source-inline"><span class="koboSpan" id="kobo.2108.1">useEffect</span></strong><span class="koboSpan" id="kobo.2109.1"> loads the</span><a id="_idIndexMarker704"/><span class="koboSpan" id="kobo.2110.1"> cart items from the backend server and calls </span><strong class="source-inline"><span class="koboSpan" id="kobo.2111.1">refreshCart</span></strong><span class="koboSpan" id="kobo.2112.1"> to update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2113.1">cartItems</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2114.1">global state.</span></span></p>
<p><span class="koboSpan" id="kobo.2115.1">Let’s add the last function </span><a id="_idIndexMarker705"/><span class="koboSpan" id="kobo.2116.1">of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2117.1">Cart</span></strong><span class="koboSpan" id="kobo.2118.1"> component to perform the checkout operation, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.2119.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2120.1">
// continue src/components/Cart.js  const checkout = async () =&gt; {
    const res = await customerClient.fetch();
    if (res &amp;&amp; res.success) {
      const payload = {
        address: { id: res.data.addressId },
        card: { id: res.data.cardId },
      };
      const orderRes = await orderClient.add(payload);
      if (orderRes &amp;&amp; orderRes.success) {
        navigate("/orders");
      } else {
        setNoRecMsg(orderRes &amp;&amp; typeof
            orderRes === "string"
          ? </span><span class="koboSpan" id="kobo.2120.2">orderRes : "Couldn't process checkout.");
      }
    } else {
      setNoRecMsg(res &amp;&amp; typeof res === "string" ?
</span><span class="koboSpan" id="kobo.2120.3">         res : "error retreiving customer");
    }
  };
  return (/* JSX Template */ );
}</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Cart.js"><span class="No-Break"><span class="koboSpan" id="kobo.2121.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Cart.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.2122.1">Here, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2123.1">checkout</span></strong><span class="koboSpan" id="kobo.2124.1"> function first fetches the customer information and forms a payload for placing the order. </span><span class="koboSpan" id="kobo.2124.2">On a</span><a id="_idIndexMarker706"/><span class="koboSpan" id="kobo.2125.1"> successful </span><strong class="source-inline"><span class="koboSpan" id="kobo.2126.1">POST</span></strong><span class="koboSpan" id="kobo.2127.1"> order API response, the user is redirected to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2128.1">Orders</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2129.1"> component.</span></span></p>
<p><span class="koboSpan" id="kobo.2130.1">Finally, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2131.1">Cart</span></strong><span class="koboSpan" id="kobo.2132.1"> component</span><a id="_idIndexMarker707"/><span class="koboSpan" id="kobo.2133.1"> returns a JSX template, which is taken from CodePen user </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2134.1">abdelrhman</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2135.1"> .</span></span></p>
<p><span class="koboSpan" id="kobo.2136.1">In the JSX template, you will find that when the </span><strong class="bold"><span class="koboSpan" id="kobo.2137.1">Checkout</span></strong><span class="koboSpan" id="kobo.2138.1"> button is clicked, the checkout function to place the user order is called. </span><span class="koboSpan" id="kobo.2138.2">Cart items are rendered using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2139.1">CartItem</span></strong><span class="koboSpan" id="kobo.2140.1"> component that you create next. </span><span class="koboSpan" id="kobo.2140.2">You pass the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2141.1">removeItem</span></strong><span class="koboSpan" id="kobo.2142.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2143.1">increaseQty</span></strong><span class="koboSpan" id="kobo.2144.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2145.1">decreaseQty</span></strong><span class="koboSpan" id="kobo.2146.1"> functions as props </span><span class="No-Break"><span class="koboSpan" id="kobo.2147.1">to it.</span></span></p>
<p><span class="koboSpan" id="kobo.2148.1">Let’s write the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2149.1">CartItem</span></strong><span class="koboSpan" id="kobo.2150.1"> component by creating a new file (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2151.1">src/components/ CartItem.js</span></strong><span class="koboSpan" id="kobo.2152.1">) and adding </span><a id="_idIndexMarker708"/><span class="koboSpan" id="kobo.2153.1">the </span><span class="No-Break"><span class="koboSpan" id="kobo.2154.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2155.1">
// importsconst </span><strong class="bold"><span class="koboSpan" id="kobo.2156.1">CartItem=({item, increaseQty, decreaseQty, removeItem })</span></strong><span class="koboSpan" id="kobo.2157.1"> =&gt; {
  const d = item ? </span><span class="koboSpan" id="kobo.2157.2">item.description?.split(".") : [];
  const author = d &amp;&amp; des.length &gt; 0 ? </span><span class="koboSpan" id="kobo.2157.3">d
     [d.length - 1] : "";
  const [</span><strong class="bold"><span class="koboSpan" id="kobo.2158.1">total</span></strong><span class="koboSpan" id="kobo.2159.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.2160.1">setTotal</span></strong><span class="koboSpan" id="kobo.2161.1">] = </span><strong class="bold"><span class="koboSpan" id="kobo.2162.1">useState</span></strong><span class="koboSpan" id="kobo.2163.1">();
  const </span><strong class="bold"><span class="koboSpan" id="kobo.2164.1">calTotal</span></strong><span class="koboSpan" id="kobo.2165.1"> = (item) =&gt; {
    setTotal((item?.unitPrice * item?.quantity)
        ?.toFixed(2));
  };
  const </span><strong class="bold"><span class="koboSpan" id="kobo.2166.1">updateQty</span></strong><span class="koboSpan" id="kobo.2167.1"> = (qty) =&gt; {
    if (qty === -1) { decreaseQty(item?.id); }
    else if (qty === 1) { increaseQty(item?.id); }
    else { return false; }
    calTotal(item);
  };
  useEffect(() =&gt; { calTotal(item); }, []);
  return (/* JSX Template */ );
}</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/CartItem.js"><span class="No-Break"><span class="koboSpan" id="kobo.2168.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/CartItem.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.2169.1">Here, you maintain the state </span><a id="_idIndexMarker709"/><span class="koboSpan" id="kobo.2170.1">of the total that is a product of the quantity and the unit price (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2171.1">calTotal</span></strong><span class="koboSpan" id="kobo.2172.1"> function), and use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2173.1">updateQty</span></strong><span class="koboSpan" id="kobo.2174.1"> helper function to perform the increase or decrease </span><a id="_idIndexMarker710"/><span class="koboSpan" id="kobo.2175.1">quantity operations. </span><span class="koboSpan" id="kobo.2175.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2176.1">useEffect</span></strong><span class="koboSpan" id="kobo.2177.1"> hook also calls </span><strong class="source-inline"><span class="koboSpan" id="kobo.2178.1">calTotal</span></strong><span class="koboSpan" id="kobo.2179.1"> to update the total on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2180.1">Cart</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2181.1"> page.</span></span></p>
<p><span class="koboSpan" id="kobo.2182.1">Now, you can write the last component (page) of this application in the next subsection: the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2183.1">Order</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2184.1"> component.</span></span></p>
<h2 id="_idParaDest-195"><a id="_idTextAnchor194"/><span class="koboSpan" id="kobo.2185.1">Writing the Order component</span></h2>
<p><span class="koboSpan" id="kobo.2186.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2187.1">Order</span></strong><span class="koboSpan" id="kobo.2188.1"> component</span><a id="_idIndexMarker711"/><span class="koboSpan" id="kobo.2189.1"> contains the order details fetched from the backend server. </span><span class="koboSpan" id="kobo.2189.2">It shows the date, status, amount, and items in a tabular </span><a id="_idIndexMarker712"/><span class="koboSpan" id="kobo.2190.1">format. </span><span class="koboSpan" id="kobo.2190.2">It loads the order details on the first render with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2191.1">useEffect</span></strong><span class="koboSpan" id="kobo.2192.1"> hook and then the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2193.1">orders</span></strong><span class="koboSpan" id="kobo.2194.1"> state is used in the JSX expression to </span><span class="No-Break"><span class="koboSpan" id="kobo.2195.1">display it.</span></span></p>
<p><span class="koboSpan" id="kobo.2196.1">Let’s create a new file, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2197.1">Orders.js</span></strong><span class="koboSpan" id="kobo.2198.1">, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2199.1">src/components</span></strong><span class="koboSpan" id="kobo.2200.1"> directory and add the following code </span><span class="No-Break"><span class="koboSpan" id="kobo.2201.1">to it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2202.1">
// importsconst Orders = ({ auth }) =&gt; {
  const [</span><strong class="bold"><span class="koboSpan" id="kobo.2203.1">orders</span></strong><span class="koboSpan" id="kobo.2204.1">, setOrders] = useState([]);
  const formatDate = (dt) =&gt; {
    return dt &amp;&amp; new Date(dt).toLocaleString();
  };
  useEffect(() =&gt; {
    async function fetchOrders() {
      const client = new OrderClient(auth);
      const res = await client.fetch();
      if (res &amp;&amp; res.success) { </span><strong class="bold"><span class="koboSpan" id="kobo.2205.1">setOrders(res.data)</span></strong><span class="koboSpan" id="kobo.2206.1">; }
    }
    </span><strong class="bold"><span class="koboSpan" id="kobo.2207.1">fetchOrders</span></strong><span class="koboSpan" id="kobo.2208.1">();
  }, []);
  return (/* JSX Template */ );
}</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Orders.js"><span class="No-Break"><span class="koboSpan" id="kobo.2209.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/components/Orders.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.2210.1">Here, the code is</span><a id="_idIndexMarker713"/><span class="koboSpan" id="kobo.2211.1"> straightforward. </span><span class="koboSpan" id="kobo.2211.2">It simply displays the information fetched from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2212.1">orders</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2213.1"> state.</span></span></p>
<p><span class="koboSpan" id="kobo.2214.1">Now, we can update the</span><a id="_idIndexMarker714"/><span class="koboSpan" id="kobo.2215.1"> root component to complete the flow and test the application after starting it again with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2216.1">yarn </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2217.1">start</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2218.1"> command.</span></span></p>
<h2 id="_idParaDest-196"><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.2219.1">Writing the root (App) component</span></h2>
<p><span class="koboSpan" id="kobo.2220.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2221.1">App</span></strong><span class="koboSpan" id="kobo.2222.1"> component is</span><a id="_idIndexMarker715"/><span class="koboSpan" id="kobo.2223.1"> a root component of the </span><a id="_idIndexMarker716"/><span class="koboSpan" id="kobo.2224.1">React application. </span><span class="koboSpan" id="kobo.2224.2">It contains routing information and the application layout with all the parent components, such as the product list and </span><span class="No-Break"><span class="koboSpan" id="kobo.2225.1">orders components.</span></span></p>
<p><span class="koboSpan" id="kobo.2226.1">Update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2227.1">App.js</span></strong><span class="koboSpan" id="kobo.2228.1"> file available in the project </span><strong class="source-inline"><span class="koboSpan" id="kobo.2229.1">src</span></strong><span class="koboSpan" id="kobo.2230.1"> directory with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2231.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2232.1">
import { </span><strong class="bold"><span class="koboSpan" id="kobo.2233.1">BrowserRouter as Router, Route, Routes</span></strong><span class="koboSpan" id="kobo.2234.1"> }   from "</span><strong class="bold"><span class="koboSpan" id="kobo.2235.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.2236.1">";
// other imports
function App() {
  const { </span><strong class="bold"><span class="koboSpan" id="kobo.2237.1">token</span></strong><span class="koboSpan" id="kobo.2238.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.2239.1">setToken</span></strong><span class="koboSpan" id="kobo.2240.1"> } = useToken();
  const auth = </span><strong class="bold"><span class="koboSpan" id="kobo.2241.1">new Auth(token, setToken)</span></strong><span class="koboSpan" id="kobo.2242.1">;
  const </span><strong class="bold"><span class="koboSpan" id="kobo.2243.1">LoginComponent</span></strong><span class="koboSpan" id="kobo.2244.1"> = (props) =&gt; (
    &lt;Login {...props} uri="/login" auth={auth} /&gt;
  );
  const ProductListComponent = (props) =&gt;
      &lt;ProductList auth={auth} /&gt;;
  // continue …</span></pre>
<p><a href="https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/App.js"><span class="No-Break"><span class="koboSpan" id="kobo.2245.1">https://github.com/PacktPublishing/Modern-API-Development-with-Spring-6-and-Spring-Boot-3/tree/dev/Chapter07/ecomm-ui/src/App.js</span></span></a></p>
<p><span class="koboSpan" id="kobo.2246.1">Here, the first </span><strong class="source-inline"><span class="koboSpan" id="kobo.2247.1">import</span></strong><span class="koboSpan" id="kobo.2248.1"> statement imports the required components from </span><strong class="source-inline"><span class="koboSpan" id="kobo.2249.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.2250.1">. </span><span class="koboSpan" id="kobo.2250.2">There are other imports that you can check on the GitHub repository (the link is given at the bottom</span><a id="_idIndexMarker717"/><span class="koboSpan" id="kobo.2251.1"> of the preceding code block). </span><span class="koboSpan" id="kobo.2251.2">Then, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2252.1">useToken()</span></strong><span class="koboSpan" id="kobo.2253.1"> hook and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2254.1">Auth</span></strong><span class="koboSpan" id="kobo.2255.1"> authentication</span><a id="_idIndexMarker718"/><span class="koboSpan" id="kobo.2256.1"> REST API client are used for authentication purposes. </span><span class="koboSpan" id="kobo.2256.2">You create functions that return </span><strong class="source-inline"><span class="koboSpan" id="kobo.2257.1">loginComponent</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2258.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2259.1">productListComponent</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2260.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2261.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2262.1">App.js</span></strong><span class="koboSpan" id="kobo.2263.1"> JSX template is different from what we have used till now. </span><span class="koboSpan" id="kobo.2263.2">It uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2264.1">BrowserRouter</span></strong><span class="koboSpan" id="kobo.2265.1"> (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2266.1">Router</span></strong><span class="koboSpan" id="kobo.2267.1">), </span><strong class="source-inline"><span class="koboSpan" id="kobo.2268.1">Route</span></strong><span class="koboSpan" id="kobo.2269.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2270.1">Routes</span></strong><span class="koboSpan" id="kobo.2271.1"> components from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2272.1">react-router-dom</span></strong><span class="koboSpan" id="kobo.2273.1"> package. </span><span class="koboSpan" id="kobo.2273.2">You define all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2274.1">Route</span></strong><span class="koboSpan" id="kobo.2275.1"> components inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2276.1">BrowserRouter</span></strong><span class="koboSpan" id="kobo.2277.1"> component. </span><span class="koboSpan" id="kobo.2277.2">Here, we are also using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2278.1">Routes</span></strong><span class="koboSpan" id="kobo.2279.1"> component because we want to render components exclusively. </span><strong class="source-inline"><span class="koboSpan" id="kobo.2280.1">Route</span></strong><span class="koboSpan" id="kobo.2281.1"> also allows you to render the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2282.1">NotFound</span></strong><span class="koboSpan" id="kobo.2283.1"> component (the typical </span><em class="italic"><span class="koboSpan" id="kobo.2284.1">404 – not found</span></em><span class="koboSpan" id="kobo.2285.1"> page) if no path matches. </span><span class="koboSpan" id="kobo.2285.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2286.1">Route</span></strong><span class="koboSpan" id="kobo.2287.1"> component allows you to define the path and component to be rendered. </span><span class="koboSpan" id="kobo.2287.2">You used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2288.1">element</span></strong><span class="koboSpan" id="kobo.2289.1"> property to </span><a id="_idIndexMarker719"/><span class="koboSpan" id="kobo.2290.1">represent the component that you want to render based on the given </span><strong class="source-inline"><span class="koboSpan" id="kobo.2291.1">path</span></strong><span class="koboSpan" id="kobo.2292.1">. </span><span class="koboSpan" id="kobo.2292.2">The following code snippet contains the logic </span><span class="No-Break"><span class="koboSpan" id="kobo.2293.1">explained here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2294.1">
// App.js continuereturn (
 &lt;div className="flex flex-col min-h-screen h-full "&gt;
  &lt;Router&gt;
   &lt;Header userInfo={token} auth={auth} /&gt;
    &lt;div className="flex-grow flex-shrink-0 p-4"&gt;
      &lt;</span><strong class="bold"><span class="koboSpan" id="kobo.2295.1">CartContextProvider</span></strong><span class="koboSpan" id="kobo.2296.1">&gt;
        &lt;</span><strong class="bold"><span class="koboSpan" id="kobo.2297.1">Routes</span></strong><span class="koboSpan" id="kobo.2298.1">&gt;
         &lt;</span><strong class="bold"><span class="koboSpan" id="kobo.2299.1">Route</span></strong><span class="koboSpan" id="kobo.2300.1"> path="</span><strong class="bold"><span class="koboSpan" id="kobo.2301.1">/</span></strong><span class="koboSpan" id="kobo.2302.1">" exact
            element={&lt;ProductListComponent /&gt;} /&gt;
         &lt;Route
           path="</span><strong class="bold"><span class="koboSpan" id="kobo.2303.1">/login</span></strong><span class="koboSpan" id="kobo.2304.1">"
           element={token ? </span><span class="koboSpan" id="kobo.2304.2">&lt;ProductListComponent /&gt; :
               &lt;LoginComponent /&gt;} /&gt;
         &lt;Route
           path="</span><strong class="bold"><span class="koboSpan" id="kobo.2305.1">/cart</span></strong><span class="koboSpan" id="kobo.2306.1">"
           element={token ? </span><span class="koboSpan" id="kobo.2306.2">&lt;Cart auth={auth} /&gt; :
               &lt;LoginComponent /&gt;} /&gt;
         &lt;Route
           path="</span><strong class="bold"><span class="koboSpan" id="kobo.2307.1">/orders</span></strong><span class="koboSpan" id="kobo.2308.1">"
           element={token ? </span><span class="koboSpan" id="kobo.2308.2">&lt;Orders auth={auth} /&gt; :
           &lt;LoginComponent /&gt;} /&gt;
         &lt;Route
           path="</span><strong class="bold"><span class="koboSpan" id="kobo.2309.1">/products/:id</span></strong><span class="koboSpan" id="kobo.2310.1">"
           element={&lt;ProductDetail auth={auth} /&gt;} /&gt;
         &lt;Route path="</span><strong class="bold"><span class="koboSpan" id="kobo.2311.1">*</span></strong><span class="koboSpan" id="kobo.2312.1">" exact element={&lt;</span><strong class="bold"><span class="koboSpan" id="kobo.2313.1">NotFound</span></strong><span class="koboSpan" id="kobo.2314.1"> /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/CartContextProvider&gt;
    &lt;/div&gt;
   &lt;Footer /&gt;
  &lt;/Router&gt;
 &lt;/div&gt;
);
}
export default App;</span></pre>
<p><span class="koboSpan" id="kobo.2315.1">All components are wrapped inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.2316.1">CartContextProvider</span></strong><span class="koboSpan" id="kobo.2317.1"> to allow </span><strong class="source-inline"><span class="koboSpan" id="kobo.2318.1">cartItems</span></strong><span class="koboSpan" id="kobo.2319.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2320.1">dispatch</span></strong><span class="koboSpan" id="kobo.2321.1"> to be accessible</span><a id="_idIndexMarker720"/><span class="koboSpan" id="kobo.2322.1"> in all components provided they use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2323.1">useCartContext</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2324.1">custom hook.</span></span></p>
<p><span class="koboSpan" id="kobo.2325.1">You are done with the major </span><a id="_idIndexMarker721"/><span class="koboSpan" id="kobo.2326.1">development work. </span><span class="koboSpan" id="kobo.2326.2">Let’s run the code using the instructions given in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2327.1">next section.</span></span></p>
<h1 id="_idParaDest-197"><a id="_idTextAnchor196"/><span class="koboSpan" id="kobo.2328.1">Running the application</span></h1>
<p><span class="koboSpan" id="kobo.2329.1">You need a backend </span><a id="_idIndexMarker722"/><span class="koboSpan" id="kobo.2330.1">server for testing the UI because the UI fires REST APIs to get the data. </span><span class="koboSpan" id="kobo.2330.2">You are going to use code from </span><a href="B19349_06.xhtml#_idTextAnchor148"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2331.1">Chapter 6</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.2332.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2333.1">Go to the home directory of the </span><a href="B19349_06.xhtml#_idTextAnchor148"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2334.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.2335.1"> code. </span><span class="koboSpan" id="kobo.2335.2">You can build the code by running </span><strong class="source-inline"><span class="koboSpan" id="kobo.2336.1">gradlew clean build</span></strong><span class="koboSpan" id="kobo.2337.1"> from the root of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2338.1">Chapter06</span></strong><span class="koboSpan" id="kobo.2339.1"> project and run the backend using the </span><span class="No-Break"><span class="koboSpan" id="kobo.2340.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2341.1">
$ java -jar build/libs/Chapter06-0.0.1-SNAPSHOT.jar.</span></pre> <p><span class="koboSpan" id="kobo.2342.1">Make sure to use Java 17 in </span><span class="No-Break"><span class="koboSpan" id="kobo.2343.1">the path.</span></span></p>
<p><span class="koboSpan" id="kobo.2344.1">Once the backend is up and running, you can open another terminal and start the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2345.1">ecomm-ui</span></strong><span class="koboSpan" id="kobo.2346.1"> app by executing the following command from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2347.1">Chapter07/ecomm</span></strong><span class="koboSpan" id="kobo.2348.1"> project </span><span class="No-Break"><span class="koboSpan" id="kobo.2349.1">root directory:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.2350.1">
$ yarn start</span></pre> <p><span class="koboSpan" id="kobo.2351.1">If the application starts successfully, the UI will be accessible at </span><strong class="source-inline"><span class="koboSpan" id="kobo.2352.1">http://localhost:3000</span></strong><span class="koboSpan" id="kobo.2353.1">. </span><span class="koboSpan" id="kobo.2353.2">You can open </span><strong class="source-inline"><span class="koboSpan" id="kobo.2354.1">http://localhost:3000</span></strong><span class="koboSpan" id="kobo.2355.1"> in your </span><span class="No-Break"><span class="koboSpan" id="kobo.2356.1">favorite browser.</span></span></p>
<p><span class="koboSpan" id="kobo.2357.1">Once the product listing </span><a id="_idIndexMarker723"/><span class="koboSpan" id="kobo.2358.1">page loads, you can log in to the example e-commerce UI app with the username/password (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2359.1">scott/tiger</span></strong><span class="koboSpan" id="kobo.2360.1">) and perform all the operations such as checkout, orders, and </span><span class="No-Break"><span class="koboSpan" id="kobo.2361.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.2362.1">Let’s review what you have learned and summarize this chapter in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2363.1">next section.</span></span></p>
<h1 id="_idParaDest-198"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.2364.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.2365.1">In this chapter, you have learned some basic concepts of React and created different types of components using them. </span><span class="koboSpan" id="kobo.2365.2">You have also learned how to use the browser’s built-in Fetch API to consume the REST APIs. </span><span class="koboSpan" id="kobo.2365.3">You acquired the following skills in React: developing a component-based UI, implementing routing, consuming REST APIs, implementing functional components with hooks, writing custom hooks, and building a global state store with a React context API and a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2366.1">useReducer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2367.1"> hook.</span></span></p>
<p><span class="koboSpan" id="kobo.2368.1">The concepts and skills you acquired in this chapter have laid a solid foundation for modern frontend development and advance you toward gaining a 360-degree perspective of </span><span class="No-Break"><span class="koboSpan" id="kobo.2369.1">application development.</span></span></p>
<p><span class="koboSpan" id="kobo.2370.1">In the next chapter, you will learn about writing automated tests for REST-based </span><span class="No-Break"><span class="koboSpan" id="kobo.2371.1">web services.</span></span></p>
<h1 id="_idParaDest-199"><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.2372.1">Questions</span></h1>
<ol>
<li><span class="koboSpan" id="kobo.2373.1">What is the difference between props </span><span class="No-Break"><span class="koboSpan" id="kobo.2374.1">and state?</span></span></li>
<li><span class="koboSpan" id="kobo.2375.1">What is an event and how can you bind events in a </span><span class="No-Break"><span class="koboSpan" id="kobo.2376.1">React component?</span></span></li>
<li><span class="koboSpan" id="kobo.2377.1">What is a </span><span class="No-Break"><span class="koboSpan" id="kobo.2378.1">higher-order component?</span></span></li>
</ol>
<h1 id="_idParaDest-200"><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.2379.1">Answers</span></h1>
<ol>
<li value="1"><span class="koboSpan" id="kobo.2380.1">Props are special objects that you use to pass the values/objects/functions from the parent component to a child component, whereas state belongs to a component – it could be global or local to the component. </span><span class="koboSpan" id="kobo.2380.2">From a functional component perspective, you use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2381.1">useState</span></strong><span class="koboSpan" id="kobo.2382.1"> hook for local state and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2383.1">useContext</span></strong><span class="koboSpan" id="kobo.2384.1"> for </span><span class="No-Break"><span class="koboSpan" id="kobo.2385.1">global state.</span></span></li>
<li><span class="koboSpan" id="kobo.2386.1">In general, events are objects generated by the browser on input such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2387.1">keydown</span></strong><span class="koboSpan" id="kobo.2388.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.2389.1">onclick</span></strong><span class="koboSpan" id="kobo.2390.1">. </span><span class="koboSpan" id="kobo.2390.2">React uses </span><strong class="source-inline"><span class="koboSpan" id="kobo.2391.1">SyntheticEvent</span></strong><span class="koboSpan" id="kobo.2392.1"> to ensure that the browser’s native events work identically across all browsers. </span><strong class="source-inline"><span class="koboSpan" id="kobo.2393.1">SyntheticEvent</span></strong><span class="koboSpan" id="kobo.2394.1"> wraps on top of the native event. </span><span class="koboSpan" id="kobo.2394.2">You used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2395.1">onChange={(e) =&gt; setUserName(e.target.value)}</span></strong><span class="koboSpan" id="kobo.2396.1"> code in the login component. </span><span class="koboSpan" id="kobo.2396.2">Here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2397.1">e</span></strong><span class="koboSpan" id="kobo.2398.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.2399.1">SyntheticEvent</span></strong><span class="koboSpan" id="kobo.2400.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2401.1">target</span></strong><span class="koboSpan" id="kobo.2402.1"> is one of its attributes. </span><span class="koboSpan" id="kobo.2402.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2403.1">onChange</span></strong><span class="koboSpan" id="kobo.2404.1"> event is bound in JSX that calls </span><strong class="source-inline"><span class="koboSpan" id="kobo.2405.1">setUserName</span></strong><span class="koboSpan" id="kobo.2406.1"> when the input value is changed. </span><span class="koboSpan" id="kobo.2406.2">You can also use the same JavaScript technique to bind events such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2407.1">window. </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2408.1">addEventListener("click", handleClick)</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2409.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.2410.1">Ideally, you would do this in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2411.1">useEffect</span></strong><span class="koboSpan" id="kobo.2412.1"> hook; however, the event should be removed as a part of the cleanup. </span><span class="koboSpan" id="kobo.2412.2">That can also be done in </span><strong class="source-inline"><span class="koboSpan" id="kobo.2413.1">useEffect</span></strong><span class="koboSpan" id="kobo.2414.1"> when you return the arrow function that removes the binding, for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2415.1">return () =&gt; { window. </span><span class="koboSpan" id="kobo.2415.2">removeEventListener("click", handleClick); }</span></strong><span class="koboSpan" id="kobo.2416.1">. </span><span class="koboSpan" id="kobo.2416.2">You can find this example in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2417.1">Header.js</span></strong><span class="koboSpan" id="kobo.2418.1"> file in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2419.1">src/components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2420.1"> directory.</span></span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.2421.1">In JavaScript, higher-order functions take a function as an argument and/or return a function, such as that of an array (map, filter, and so on). </span><span class="koboSpan" id="kobo.2421.2">Similarly, in React, </span><strong class="bold"><span class="koboSpan" id="kobo.2422.1">higher-order components</span></strong><span class="koboSpan" id="kobo.2423.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.2424.1">HOCs</span></strong><span class="koboSpan" id="kobo.2425.1">) are a pattern that involves the use of composition with an existing component and returns a new component. </span><span class="koboSpan" id="kobo.2425.2">Basically, you write a new function that takes a component as an argument and returns it. </span><span class="koboSpan" id="kobo.2425.3">An HOC allows you to reuse the existing component and </span><span class="No-Break"><span class="koboSpan" id="kobo.2426.1">its logic.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.2427.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2428.1">ecomm-ui</span></strong><span class="koboSpan" id="kobo.2429.1"> application, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2430.1">ProductCard</span></strong><span class="koboSpan" id="kobo.2431.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2432.1">ProductDetail</span></strong><span class="koboSpan" id="kobo.2433.1"> components are similar in nature, and you can use an HOC to reuse </span><span class="No-Break"><span class="koboSpan" id="kobo.2434.1">the logic.</span></span></p>
<h1 id="_idParaDest-201"><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.2435.1">Further reading</span></h1>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.2436.1">React 18</span></em> <em class="italic"><span class="koboSpan" id="kobo.2437.1">Design Patterns and Best Practices - Fourth </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2438.1">Edition</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2439.1">: </span></span><a href="https://www.packtpub.com/product/react-18-design-patterns-and-best-practices-fourth-edition/9781803233109"><span class="No-Break"><span class="koboSpan" id="kobo.2440.1">https://www.packtpub.com/product/react-18-design-patterns-and-best-practices-fourth-edition/9781803233109</span></span></a></li>
<li><span class="koboSpan" id="kobo.2441.1">React </span><span class="No-Break"><span class="koboSpan" id="kobo.2442.1">documentation: </span></span><a href="https://reactjs.org/docs/getting-started.html"><span class="No-Break"><span class="koboSpan" id="kobo.2443.1">https://reactjs.org/docs/getting-started.html</span></span></a></li>
<li><span class="koboSpan" id="kobo.2444.1">React Router </span><span class="No-Break"><span class="koboSpan" id="kobo.2445.1">guide: </span></span><a href="https://reactrouter.com/en/main"><span class="No-Break"><span class="koboSpan" id="kobo.2446.1">https://reactrouter.com/en/main</span></span></a></li>
</ul>
</div>
</body></html>