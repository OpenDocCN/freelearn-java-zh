<html><head></head><body>
<div id="_idContainer032">
<h1 class="chapter-number" id="_idParaDest-65"><a id="_idTextAnchor064"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-66"><a id="_idTextAnchor065"/><span class="koboSpan" id="kobo.2.1">Reactive REST Development and Asynchronous Systems</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Up to this chapter, we have built our theoretical base with microservice and </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">Spring Boot 3.0</span></strong><span class="koboSpan" id="kobo.5.1"> capabilities. </span><span class="koboSpan" id="kobo.5.2">Now, it is time to get our hands dirty. </span><span class="koboSpan" id="kobo.5.3">We will learn and practice </span><strong class="bold"><span class="koboSpan" id="kobo.6.1">reactive programming</span></strong><span class="koboSpan" id="kobo.7.1"> with Spring Boot 3.0. </span><span class="koboSpan" id="kobo.7.2">We will go over the instructions and build our first reactive REST application. </span><span class="koboSpan" id="kobo.7.3">We are also going to discuss </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">backpressure</span></strong><span class="koboSpan" id="kobo.9.1"> and how it can help </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">our application.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">In this chapter, we’re going to cover the following </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">main topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.13.1">Introducing reactive </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">programming basics</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Building a reactive </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">REST API</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Asynchronous systems </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">and backpressure</span></span></li>
</ul>
<h1 id="_idParaDest-67"><a id="_idTextAnchor066"/><span class="koboSpan" id="kobo.19.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.20.1">For this chapter, we are going to need </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.22.1">Java 17 Development Kit</span></strong><span class="koboSpan" id="kobo.23.1"> (</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.24.1">JDK 17</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">):</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.26.1">Download JDK 17</span></strong><span class="koboSpan" id="kobo.27.1">: Visit the official Oracle website or adopt an open-source version such as AdoptOpenJDK to download </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">Java 17</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.29.1">Install JDK 17</span></strong><span class="koboSpan" id="kobo.30.1">: Run the downloaded installer and follow the steps to install Java 17 on </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">your system</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.32.1">Configure environment variables</span></strong><span class="koboSpan" id="kobo.33.1">: Ensure your </span><strong class="source-inline"><span class="koboSpan" id="kobo.34.1">JAVA_HOME</span></strong><span class="koboSpan" id="kobo.35.1"> environment variable is set to the JDK 17 directory and that your PATH includes the bin directory of </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">JDK 17</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.37.1">A modern </span><strong class="bold"><span class="koboSpan" id="kobo.38.1">integrated development environment</span></strong><span class="koboSpan" id="kobo.39.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.40.1">IDE</span></strong><span class="koboSpan" id="kobo.41.1">): I recommend </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">IntelliJ IDEA:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.43.1">Download IntelliJ IDEA</span></strong><span class="koboSpan" id="kobo.44.1">: Visit the JetBrains website and choose the edition you prefer (Community </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">or Ultimate).</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.46.1">Run the installer</span></strong><span class="koboSpan" id="kobo.47.1">: Once downloaded, run the installer and follow the instructions. </span><span class="koboSpan" id="kobo.47.2">Choose the settings and plugins that suit </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">your needs.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.49.1">Launch IntelliJ IDEA</span></strong><span class="koboSpan" id="kobo.50.1">: After installation, open IntelliJ IDEA to configure it further as needed and familiarize yourself with </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">the interface.</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.52.1">GitHub repository</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">:</span></span><ul><li><span class="koboSpan" id="kobo.54.1">The code for the </span><em class="italic"><span class="koboSpan" id="kobo.55.1">Building a reactive REST API</span></em><span class="koboSpan" id="kobo.56.1"> section is available </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">at </span></span><a href="https://github.com/PacktPublishing/Mastering-Spring-Boot-3.0/tree/main/Chapter-3-Building_Reactive_REST_API"><span class="No-Break"><span class="koboSpan" id="kobo.58.1">https://github.com/PacktPublishing/Mastering-Spring-Boot-3.0/tree/main/Chapter-3-Building_Reactive_REST_API</span></span></a></li><li><span class="koboSpan" id="kobo.59.1">The code for the </span><em class="italic"><span class="koboSpan" id="kobo.60.1">Asynchronous systems and backpressure</span></em><span class="koboSpan" id="kobo.61.1"> section is available </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">at </span></span><a href="https://github.com/PacktPublishing/Mastering-Spring-Boot-3.0/tree/main/Chapter-3-Implement_back-pressure"><span class="No-Break"><span class="koboSpan" id="kobo.63.1">https://github.com/PacktPublishing/Mastering-Spring-Boot-3.0/tree/main/Chapter-3-Implement_back-pressure</span></span></a></li><li><span class="koboSpan" id="kobo.64.1">Please download or clone the code and follow the content through </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">these repositories</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.66.1">Curl Installation:</span></strong></span><ul><li><span class="koboSpan" id="kobo.67.1">Please find the installation packet for your operating system and download the related packet </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">from </span></span><a href="https://curl.se/download.html"><span class="No-Break"><span class="koboSpan" id="kobo.69.1">https://curl.se/download.html</span></span></a></li><li><span class="koboSpan" id="kobo.70.1">Follow the instructions to install it on your </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">local machine</span></span></li></ul></li>
</ul>
<h1 id="_idParaDest-68"><a id="_idTextAnchor067"/><a id="_idTextAnchor068"/><a id="_idTextAnchor069"/><a id="_idTextAnchor070"/><span class="koboSpan" id="kobo.72.1">Introduction to reactive programming</span></h1>
<p><span class="koboSpan" id="kobo.73.1">Speaking of the basics of </span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.74.1">reactive programming, firstly, I would like to say that no solution/approach can fit each need. </span><span class="koboSpan" id="kobo.74.2">So, the projects have different problems and according to the problem, there are different solutions. </span><span class="koboSpan" id="kobo.74.3">One of them is the </span><strong class="bold"><span class="koboSpan" id="kobo.75.1">reactive programming approach</span></strong><span class="koboSpan" id="kobo.76.1">. </span><span class="koboSpan" id="kobo.76.2">Here, we are going to learn how to make our applications more responsive, efficient, and robust in the face of specific requirements such as handling a huge number of requests and providing fast responses. </span><span class="koboSpan" id="kobo.76.3">As we work through the concepts and practices, you’ll see how this approach can fundamentally change the nature of the application you can build – making them fully prepared for the challenges posed by real-time user expectations and high data throughput. </span><span class="koboSpan" id="kobo.76.4">In the following section, we take a look at some of the basics of </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">reactive programming.</span></span><a id="_idTextAnchor071"/></p>
<h2 id="_idParaDest-69"><a id="_idTextAnchor072"/><span class="koboSpan" id="kobo.78.1">Introducing reactive programming basics</span></h2>
<p><span class="koboSpan" id="kobo.79.1">Let’s start with what reactive programming is. </span><span class="koboSpan" id="kobo.79.2">In order to understand it, we first need to define its </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">core terminologies.</span></span><a id="_idTextAnchor073"/></p>
<h3><span class="koboSpan" id="kobo.81.1">Embracing a new paradigm – asynchronicity and responsiveness</span></h3>
<p><span class="koboSpan" id="kobo.82.1">Reactive programming </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.83.1">introduces an innovative approach to software development; it is to respond asynchronously. </span><span class="koboSpan" id="kobo.83.2">Traditional programming events execute one after another whereas in reactive programming, lots of events happen in </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.84.1">parallel. </span><span class="koboSpan" id="kobo.84.2">With asynchronicity, your application does not waste time waiting and continues processing other tasks. </span><span class="koboSpan" id="kobo.84.3">This makes it significantly faster and </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">more responsiv</span><a id="_idTextAnchor074"/><span class="koboSpan" id="kobo.86.1">e.</span></span></p>
<h3><span class="koboSpan" id="kobo.87.1">The essence of reactivity – data streams and propagation</span></h3>
<p><span class="koboSpan" id="kobo.88.1">At its core, reactive programming is </span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.89.1">really about </span><strong class="bold"><span class="koboSpan" id="kobo.90.1">data streams</span></strong><span class="koboSpan" id="kobo.91.1"> and </span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.92.1">reacting to changes in those streams. </span><span class="koboSpan" id="kobo.92.2">Picture a stream of data along the same vein as a conveyor belt of information that is always moving forward and changing. </span><span class="koboSpan" id="kobo.92.3">Any user input, messages, or live data could be this stream. </span><span class="koboSpan" id="kobo.92.4">In reactive programming, you work with these streams using a concept </span><a id="_idIndexMarker156"/><span class="No-Break"><span class="koboSpan" id="kobo.93.1">called </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.94.1">Observables</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.96.1">Observables are like messengers that tell parts of your application when new data arrives. </span><span class="koboSpan" id="kobo.96.2">They can be transformed, combined, or reacted to as data flows through these streams. </span><span class="koboSpan" id="kobo.96.3">We’ll see these concepts at work in the following sections. </span><span class="koboSpan" id="kobo.96.4">When new data arrives or the state of data changes, the relevant parts of the application update immediately. </span><span class="koboSpan" id="kobo.96.5">This is called the propagation of change, and it always ensures that your application reflects the current state of affairs and adjusts and responds </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">as nece</span><a id="_idTextAnchor075"/><span class="koboSpan" id="kobo.98.1">ssary.</span></span></p>
<p><span class="koboSpan" id="kobo.99.1">In reactive programming, it is not only</span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.100.1"> about how data has to be handled effectively but it’s also about making your applications feel alive and interactive. </span><span class="koboSpan" id="kobo.100.2">The application we are dealing with would be a live feed of news, updates in social networks, or real-time control systems – reactive programming can help you build software that keeps up with the pace of </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">information today.</span></span></p>
<p><span class="koboSpan" id="kobo.102.1">Later in this article, I will explain the terminology, go a bit more into the benefits, and then show how tools such as Spring Boot 3.0 make it easier to build those reactive systems. </span><span class="koboSpan" id="kobo.102.2">So, whether you’re new to this concept or are looking to turn up your skill a notch by better understanding reactive programming, it’s a potent multi-tool in your developer’s tool belt. </span><span class="koboSpan" id="kobo.102.3">So, let’s move on and I’ll show you with this fresh approach how we can revolutionize the way that we think about and </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">build software.</span></span></p>
<h2 id="_idParaDest-70"><a id="_idTextAnchor076"/><span class="koboSpan" id="kobo.104.1">Contrasting paradigms – reactive versus traditional programming</span></h2>
<p><span class="koboSpan" id="kobo.105.1">In </span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.106.1">order to make it clear, we may compare </span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.107.1">reactive programming with the traditional way of development. </span><span class="koboSpan" id="kobo.107.2">When learning software development, we begin by understanding flow algorithms. </span><span class="koboSpan" id="kobo.107.3">We are all aware of the traditional way, so, this comparison will help us to understand the new way. </span><span class="koboSpan" id="kobo.107.4">Let’s break down this transition from traditional to reactive programming and understand how it changes how our code behaves and how our </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">applications </span><a id="_idTextAnchor077"/><span class="koboSpan" id="kobo.109.1">perform.</span></span></p>
<p><span class="koboSpan" id="kobo.110.1">In traditional </span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.111.1">programming, operations are often processed one by one. </span><span class="koboSpan" id="kobo.111.2">This is called </span><strong class="bold"><span class="koboSpan" id="kobo.112.1">blocking</span></strong><span class="koboSpan" id="kobo.113.1">. </span><span class="koboSpan" id="kobo.113.2">Let’s assume you are in a shopping center and, after you pick up your goods, you join a payment queue in front of a cash register. </span><span class="koboSpan" id="kobo.113.3">The cashier accepts the next customer after the current customer completes the payment. </span><span class="koboSpan" id="kobo.113.4">This flow is how traditional programming works. </span><span class="koboSpan" id="kobo.113.5">When there are lots of customers, the solution is to open new cash registers. </span><span class="koboSpan" id="kobo.113.6">This way is also scalable but you need to increase the number of servers to handle a huge amount </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">of customers.</span></span></p>
<p><span class="koboSpan" id="kobo.115.1">Reactive programming introduces a non-blocking model. </span><span class="koboSpan" id="kobo.115.2">In this approach, tasks are handled as soon as the necessary resources are available, and the application can continue doing other things in the meantime. </span><span class="koboSpan" id="kobo.115.3">In our previous example, instead of waiting in line, the cashier can deal with more than one customer at the same time. </span><span class="koboSpan" id="kobo.115.4">When one customer tries to find the credit card, the cashier scans the next customer’s goods. </span><span class="koboSpan" id="kobo.115.5">When the next customer tries to put the goods in the bag, the cashier can take the payment from another customer. </span><span class="koboSpan" id="kobo.115.6">In reactive programming, these processes don’t mix up. </span><span class="koboSpan" id="kobo.115.7">This shift to handling multiple tasks is crucial in a world where users expect fast and </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">responsive appl</span><a id="_idTextAnchor078"/><span class="koboSpan" id="kobo.117.1">ications.</span></span></p>
<p><span class="koboSpan" id="kobo.118.1">In summary, the shift from</span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.119.1"> traditional to reactive </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.120.1">programming is all about making your applications more responsive, efficient, and adaptable. </span><span class="koboSpan" id="kobo.120.2">In the next section, we will take a look at the terminologies that will help us understand </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">reactive p</span><a id="_idTextAnchor079"/><span class="koboSpan" id="kobo.122.1">rogramming.</span></span></p>
<h2 id="_idParaDest-71"><span class="koboSpan" id="kobo.123.1">Exploring the dictionary of reactive </span><a id="_idTextAnchor080"/><span class="koboSpan" id="kobo.124.1">programming</span></h2>
<p><span class="koboSpan" id="kobo.125.1">In order to better understand reactive programming, we need to learn the basic vocabulary of it. </span><span class="koboSpan" id="kobo.125.2">This section is all about defining the terms, in plain English, that will allow you to feel comfortable speaking the language of reactivity. </span><span class="koboSpan" id="kobo.125.3">We will decode some of the most common terms that you are likely to come across in the </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">following list:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.127.1">Observable</span></strong><span class="koboSpan" id="kobo.128.1">: At its</span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.129.1"> simplest, you can think of an Observable</span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.130.1"> as being like a publisher. </span><span class="koboSpan" id="kobo.130.2">You can also think </span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.131.1">of it as a news broadcaster sending out the latest news/information. </span><span class="koboSpan" id="kobo.131.2">In programming terms, it’s a stream of data or events that you want to work with. </span><span class="koboSpan" id="kobo.131.3">It can be any number of things, from clicks on a web page to incoming data over </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">a network.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.133.1">Observer</span></strong><span class="koboSpan" id="kobo.134.1">: If the Observable is the broadcaster into whom events are sent, then the Observer</span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.135.1"> is the listener or viewer who subscribes and is notified when said </span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.136.1">event occurs. </span><span class="koboSpan" id="kobo.136.2">It’s the part of your code that “observes” or “watches” the Observable and then reacts to the data or events it emits. </span><span class="koboSpan" id="kobo.136.3">Whenever fresh data arrives, the Observer responds by updating the user interface, processing the data, or performing any other </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">necessary tasks.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.138.1">Subscription</span></strong><span class="koboSpan" id="kobo.139.1">: It’s the</span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.140.1"> link between an Observable and an Observer. </span><span class="koboSpan" id="kobo.140.2">When an Observer </span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.141.1">subscribes to an Observable, it starts receiving updates from it. </span><span class="koboSpan" id="kobo.141.2">Think of this like subscribing to a newsletter or following someone on social media – you’re essentially saying, “I’m interested in what you have </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">to say.”</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.143.1">Subject</span></strong><span class="koboSpan" id="kobo.144.1">: A </span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.145.1">Subject</span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.146.1"> is a special type of Observable that can act as either an Observable or Observer. </span><span class="koboSpan" id="kobo.146.2">It allows values and events to be emitted and passed along to Observers, as well as listen to Observables by becoming an Observer. </span><span class="koboSpan" id="kobo.146.3">Think of it more like a team where you’re the manager and you provide updates and listen to the people in </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">your team.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.148.1">Backpressure</span></strong><span class="koboSpan" id="kobo.149.1">: Think of drinking at a water fountain and the water comes out too fast. </span><span class="koboSpan" id="kobo.149.2">Backpressure</span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.150.1"> is being able to hold that flow so you can comfortably drink without being overwhelmed. </span><span class="koboSpan" id="kobo.150.2">In a programming context, backpressure stands for the</span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.151.1"> capacity to control the rate at which data flows between two interacting components so that the receiving end of a communication channel is not overwhelmed by more data than it is able to process. </span><span class="koboSpan" id="kobo.151.2">This ensures that the application does not become unresponsive and remains stable while processing as much data </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">as possible.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.153.1">Asynchronous operations</span></strong><span class="koboSpan" id="kobo.154.1">: In a synchronous world, it’s generally perceived that one task has to be </span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.155.1">completed for another task to start. </span><span class="koboSpan" id="kobo.155.2">However, in</span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.156.1"> asynchronous operations, several tasks can run simultaneously. </span><span class="koboSpan" id="kobo.156.2">This is similar to the nature of a kitchen, where it’s possible for the chef to chop vegetables and prepare a salad at the same time as he or she waits for the soup to simmer. </span><span class="koboSpan" id="kobo.156.3">In programming terms, this means that your app can process user input while also carrying out calculations and loading data, rather than waiting for each process to finish before moving on to the </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">next one.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.158.1">These fundamental terms are as important for you before getting started with reactive programming on Android as learning the rules of the road is before you start driving. </span><span class="koboSpan" id="kobo.158.2">They are core to mastering reactive programming and will help you not just be introduced to the concept but achieve contextual knowledge of its principles, once you start navigating the reactive highways while developing applications. </span><span class="koboSpan" id="kobo.158.3">As you dive more into these concepts, you will realize that they’re not just theoretical concepts but practical tools that will empower you as a developer to create better software that is engaging and powerful for its users. </span><span class="koboSpan" id="kobo.158.4">After learning all the basic terms of reactive programming, we will focus on how to decide to use this approach instead of the </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">traditional way.</span></span></p>
<h2 id="_idParaDest-72"><a id="_idTextAnchor081"/><span class="koboSpan" id="kobo.160.1">Identifying opportunities for reactive programming</span></h2>
<p><span class="koboSpan" id="kobo.161.1">When it comes to </span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.162.1">integrating reactive programming into your projects, we should know when and where to apply it to enhance our application’s performance and user experience. </span><span class="koboSpan" id="kobo.162.2">Let’s explore the ideal scenarios for choosing reactivity and how to assess its fi</span><a id="_idTextAnchor082"/><span class="koboSpan" id="kobo.163.1">t for your </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">specific needs.</span></span></p>
<p><span class="koboSpan" id="kobo.165.1">The following are the ideal scenarios for reactivity that indicate when to make the shift from traditional to </span><span class="No-Break"><span class="koboSpan" id="kobo.166.1">reactive programming:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.167.1">Real-time user interfaces</span></strong><span class="koboSpan" id="kobo.168.1">: If your application displays real-time updates (i.e., live sports scores, stock tickers, social media feeds, etc.), then reactive programming is a pretty good boost for this application. </span><span class="koboSpan" id="kobo.168.2">It takes care to maintain the user interface’s fast speed and keep it acting upon changes immediately </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">and correctly.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.170.1">Complex network applications</span></strong><span class="koboSpan" id="kobo.171.1">: Reactive programming proves beneficial in managing the applications that require repeated calls to networks, for instance, chat apps or online games. </span><span class="koboSpan" id="kobo.171.2">With reactive programming, the communication gets managed as well as optimized properly so that even during heavy loads, a good flow of data can </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">be maintained.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.173.1">Microservices architecture</span></strong><span class="koboSpan" id="kobo.174.1">: Reactive programming offers two key benefits in performance and resilience to systems built around the microservices architecture. </span><span class="koboSpan" id="kobo.174.2">Broadly, every service can process requests independently as well as asynchronously, which provides higher responsiveness and </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">fault tolerance.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.176.1">IoT and data streaming</span></strong><span class="koboSpan" id="kobo.177.1">: Consider the scenario where data is being streamed continuously from devices or sensors in a reactive system. </span><span class="koboSpan" id="kobo.177.2">Asynchronous reactive programming would enable good stream management, which enables real-time stream processing as well as reacting to incoming data, which are fundamental use cases in IoT applications or even in data </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">analytics contexts.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.179.1">Having the preceding scenarios understood more clearly, you will be in a better position to tell when reactive programming is the best approach for your application. </span><span class="koboSpan" id="kobo.179.2">It all revolves around matching the needs and challenges of an application with what reactivity brings to </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">the table.</span></span></p>
<p><span class="koboSpan" id="kobo.181.1">To assess </span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.182.1">the need for reactivity, refer to the </span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">following list:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.184.1">Performance requirements</span></strong><span class="koboSpan" id="kobo.185.1">: Think about your application responsiveness and speed requirements. </span><span class="koboSpan" id="kobo.185.2">Reactive programming is necessary if your users expect applications to respond quickly while being more interactive compared to </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">static pages.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.187.1">Data volume and velocity</span></strong><span class="koboSpan" id="kobo.188.1">: Estimate the degree of data volume and speed that your application will have to handle. </span><span class="koboSpan" id="kobo.188.2">In applications that involve a large volume of data or streaming of data at high velocity, reactivity may introduce the robustness and speed that </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">is required.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.190.1">Complexity of operations</span></strong><span class="koboSpan" id="kobo.191.1">: Scrutinize the complexity of the operations that your application is performing. </span><span class="koboSpan" id="kobo.191.2">Be it complicated asynchronous task handling or complex user interactive dynamics, your reactive applications will provide more </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">effective solutions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.193.1">Resource constraints</span></strong><span class="koboSpan" id="kobo.194.1">: Consider the hardware and resources available. </span><span class="koboSpan" id="kobo.194.2">With reactive programming in relation to resource usage, it may be optimized most reasonably in comparison to traditional programming thus it is an appropriate paradigm for</span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.195.1"> applications running in </span><span class="No-Break"><span class="koboSpan" id="kobo.196.1">resource-constraint environments.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.197.1">We can decide to use or not use reactive programming according to these instances. </span><span class="koboSpan" id="kobo.197.2">Remember, the whole point is not about using the latest and greatest technology but creating a better experience for your users and a more manageable code base for your team. </span><span class="koboSpan" id="kobo.197.3">Consider whether reactive programming is a good choice for your next project given some of these factors and scenarios. </span><span class="koboSpan" id="kobo.197.4">In the next section, we will see which industries are most likely to choose to use the reactive approach, and we will also see the real-world usage of </span><span class="No-Break"><span class="koboSpan" id="kobo.198.1">reactive programming.</span></span></p>
<h2 id="_idParaDest-73"><a id="_idTextAnchor083"/><span class="koboSpan" id="kobo.199.1">Learning from the field – reactive programming in action</span></h2>
<p><span class="koboSpan" id="kobo.200.1">We now know when we</span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.201.1"> might need reactive programming in our projects. </span><span class="koboSpan" id="kobo.201.2">While we may not know the exact technology stack of every company, we can force our brains a little bit and make some predictions by identifying scenarios where reactive programming is likely at play and drawing inspiration from confirmed cases of its application. </span><span class="koboSpan" id="kobo.201.3">These are some platforms that most likely u</span><a id="_idTextAnchor084"/><span class="koboSpan" id="kobo.202.1">tilize </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">reactive programming:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.204.1">Streaming platforms such as Netflix</span></strong><span class="koboSpan" id="kobo.205.1">: If you are streaming media in a high quality, it means you have a huge volume of data. </span><span class="koboSpan" id="kobo.205.2">Millions of clients are expecting smooth, uninterrupted service simultaneously. </span><span class="koboSpan" id="kobo.205.3">In order to handle this data stream and provide uninterrupted services, most media services are using a reactive programming </span><a id="_idTextAnchor085"/><span class="koboSpan" id="kobo.206.1">approach in </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">their projects.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.208.1">Social media platforms such as LinkedIn and Twitter</span></strong><span class="koboSpan" id="kobo.209.1">: When we talk about social media, you can imagine how big the streams they have are. </span><span class="koboSpan" id="kobo.209.2">Again, millions of users publish, read, and listen at the same time. </span><span class="koboSpan" id="kobo.209.3">Uncountable user interactions and instant content delivery are the requirements of these projects. </span><span class="koboSpan" id="kobo.209.4">So, again, the best solution here is reactive programming because these requirements align well with the princip</span><a id="_idTextAnchor086"/><span class="koboSpan" id="kobo.210.1">les of </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">reactive programming.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.212.1">We have assumed some </span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.213.1">companies are using reactive programming by considering their requirements. </span><span class="koboSpan" id="kobo.213.2">However, several organizations have openly shared their successful adoption of </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">reactive programming:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.215.1">Booking.com</span></strong><span class="koboSpan" id="kobo.216.1">: Known for its global accommodation booking platform, Booking.com has implemented Spring WebFlux, enhancing its capability to provide a responsive and </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">efficient service.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.218.1">The Guardian</span></strong><span class="koboSpan" id="kobo.219.1">: The international news organization utilizes Akka and Play Framework to manage its real-time news updates and high traffic volumes, ensuring users have immediate access to the </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">latest stories.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.221.1">Patreon</span></strong><span class="koboSpan" id="kobo.222.1">: The membership platform uses RxJava to handle intricate financial transactions and user interactions, showcasing the ability of reactive programming to manage c</span><a id="_idTextAnchor087"/><span class="koboSpan" id="kobo.223.1">omplex, </span><span class="No-Break"><span class="koboSpan" id="kobo.224.1">data-intensive tasks.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.225.1">These real-world applications </span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.226.1">reflect how reactive programming is implemented across industries. </span><span class="koboSpan" id="kobo.226.2">While they are using different frameworks to handle the requirements, in the next section, we will focus on how Spring Boot 3.0 will help us implement </span><span class="No-Break"><span class="koboSpan" id="kobo.227.1">reactive programming.</span></span></p>
<h2 id="_idParaDest-74"><a id="_idTextAnchor088"/><span class="koboSpan" id="kobo.228.1">Leveraging Spring Boot 3.0 for reactive solutions</span></h2>
<p><span class="koboSpan" id="kobo.229.1">When </span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.230.1">we say Spring Boot, the word “simplicity” rises in our minds out of the blue. </span><span class="koboSpan" id="kobo.230.2">The same can be said for reactive programming. </span><span class="koboSpan" id="kobo.230.3">In this section, first, we will go over the key concepts of Spring Boot 3.0 that can help us while engaging with reactive programming. </span><span class="koboSpan" id="kobo.230.4">Later on, we will see which libraries Spring Bo</span><a id="_idTextAnchor089"/><span class="koboSpan" id="kobo.231.1">ot is using for </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">this approach.</span></span></p>
<h3><span class="koboSpan" id="kobo.233.1">Simplifying reactive development – tools and features in Spring Boot 3.0</span></h3>
<p><span class="koboSpan" id="kobo.234.1">As</span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.235.1"> we have seen, Spring Boot 3.0 is designed to simplify the entire development process by making it faster and easier to create robust applications. </span><span class="koboSpan" id="kobo.235.2">Here’s how it enhances </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">reactive programming:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.237.1">Auto-configuration</span></strong><span class="koboSpan" id="kobo.238.1">: Spring Boot 3.0 auto-configures your application based on the</span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.239.1"> dependencies you have added, reducing the need for manual setup and letting you focus on writing your </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">business logic.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.241.1">Standalone</span></strong><span class="koboSpan" id="kobo.242.1">: It allows you</span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.243.1"> to create standalone applications that “just run,” simplifying deployment and testing. </span><span class="koboSpan" id="kobo.243.2">You don’t need an external server or container; your app can run as a </span><span class="No-Break"><span class="koboSpan" id="kobo.244.1">simple executable.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.245.1">Opinionated defaults</span></strong><span class="koboSpan" id="kobo.246.1">: Spring Boot provides sensible defaults for project configurations. </span><span class="koboSpan" id="kobo.246.2">This means </span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.247.1">you spend less time configuring and more time building your application with the comfort of following </span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">best practices.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.249.1">Community and extensions</span></strong><span class="koboSpan" id="kobo.250.1">: We can get help from a large Spring community and find</span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.251.1"> ready-to-use extensions so that we can easily integrate additional functionalities into our application, from security to data access, without having to reinvent </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">the </span></span><span class="No-Break"><a id="_idIndexMarker188"/></span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">wheel.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.254.1">These are common Spring Boot features, which are not specific tools for reactive programming. </span><span class="koboSpan" id="kobo.254.2">But these help us implement the reactive approach as they help us with other frameworks by lowering the entry barrier and reducing boilerplate code. </span><span class="koboSpan" id="kobo.254.3">Spring Boot 3.0 lets us dive into reactive programming</span><a id="_idTextAnchor090"/><span class="koboSpan" id="kobo.255.1"> with less overhead and </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">more support.</span></span></p>
<h3><span class="koboSpan" id="kobo.257.1">Building blocks of reactivity – a closer look at WebFlux and Project Reactor</span></h3>
<p><span class="koboSpan" id="kobo.258.1">The libraries in Spring Boot 3.0 for reactive capabilities are WebFlux and Project Reactor. </span><span class="koboSpan" id="kobo.258.2">We are going to discuss these components and it will give us a solid foundation for building reactive </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">applications here:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.260.1">WebFlux</span></strong><span class="koboSpan" id="kobo.261.1">: This is the reactive </span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.262.1">web framework for Spring. </span><span class="koboSpan" id="kobo.262.2">It has been designed to be used in creating non-blocking, asynchronous web applications that could serve a high level of concurrent users effectively. </span><span class="koboSpan" id="kobo.262.3">It has been designed to work with all the reactive libraries and provides all you need to build a fully reactive </span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">REST application.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.264.1">Project Reactor</span></strong><span class="koboSpan" id="kobo.265.1">: It’s the reactive programming library that helps to write code in a reactive way for Spring</span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.266.1"> developers. </span><span class="koboSpan" id="kobo.266.2">It has two core types which are used for </span><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">0</span></strong><span class="koboSpan" id="kobo.268.1"> to </span><em class="italic"><span class="koboSpan" id="kobo.269.1">N</span></em><span class="koboSpan" id="kobo.270.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.271.1">0</span></strong><span class="koboSpan" id="kobo.272.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.273.1">1</span></strong><span class="koboSpan" id="kobo.274.1"> element data streams called Flux and Mono. </span><span class="koboSpan" id="kobo.274.2">With Project Reactor, you get a powerful toolkit to build, transform, and consume the reactive streams </span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">of data.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.276.1">Together, WebFlux and Project Reactor form the backbone of complete reactive programming in Spring Boot. </span><span class="koboSpan" id="kobo.276.2">They provide a highly streamlined way of working with data streams and events, granting you a uniform model upon which you are able to build responsive and resilient applications. </span><span class="koboSpan" id="kobo.276.3">Real-time-data-implemented microservices or high-loaded applications can take advantage </span><a id="_idTextAnchor091"/><span class="koboSpan" id="kobo.277.1">of the capacity that these </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">tools offer.</span></span></p>
<h2 id="_idParaDest-75"><a id="_idTextAnchor092"/><span class="koboSpan" id="kobo.279.1">Wrapping up and looking forward</span></h2>
<p><span class="koboSpan" id="kobo.280.1">As we wrap up this section on reactive programming, let me summarize what we have learned. </span><span class="koboSpan" id="kobo.280.2">First, we touched upon the what, why, and how of reactive programming, got into the terminology, as well as surveyed some real-world applications. </span><span class="koboSpan" id="kobo.280.3">We came to know that reactive programming is not just a set of techniques but it’s actually a mindset for thinking about software development, where your first priority is to be responsive, then resilient, and its focus is on providing a great user experience. </span><span class="koboSpan" id="kobo.280.4">Finally, we have mentioned how can we use it in Spring Boot 3.0. </span><span class="koboSpan" id="kobo.280.5">Now, it is the time for us to get our hands dirty. </span><span class="koboSpan" id="kobo.280.6">We’re now empowered with the knowledge of reactive programming and the next step is applying that knowledge through </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">practice itself.</span></span></p>
<p><span class="koboSpan" id="kobo.282.1">Remember, though, as you go along that the process of mastering reactive programming is an enduring journey. </span><span class="koboSpan" id="kobo.282.2">It is one of a lifetime of continued learning, experimenting, and embracing growth at every opportunity that presents itself. </span><span class="koboSpan" id="kobo.282.3">So, enjoy yourself in making your applications more dynamic, more robust, and more user friendly with the opportunities that it presents. </span><span class="koboSpan" id="kobo.282.4">Cheers to </span><a id="_idTextAnchor093"/><span class="koboSpan" id="kobo.283.1">all your success in the </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">reactive world!</span></span></p>
<h1 id="_idParaDest-76"><a id="_idTextAnchor094"/><span class="koboSpan" id="kobo.285.1">Building a reactive REST API</span></h1>
<p><span class="koboSpan" id="kobo.286.1">Yes, now we are starting to write our first code in the reactive world with Spring Boot 3.0. </span><span class="koboSpan" id="kobo.286.2">We will develop a</span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.287.1"> REST API. </span><span class="koboSpan" id="kobo.287.2">As we all know, REST is the most used transfer protocol in applications. </span><span class="koboSpan" id="kobo.287.3">By this protocol, we can develop platform and language-independent applications. </span><span class="koboSpan" id="kobo.287.4">Because we can use REST in Java, Python, C#, and more, thanks to this protocol, each application can interact with each other hassle free. </span><span class="koboSpan" id="kobo.287.5">That’s why I have chosen REST API development in </span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">this sample.</span></span></p>
<p><span class="koboSpan" id="kobo.289.1">Firstly, we will initiate our Spring Boot 3.0 project. </span><span class="koboSpan" id="kobo.289.2">We will introduce each component step by step and we will understand why we are using them. </span><span class="koboSpan" id="kobo.289.3">So, let’s roll up our sleeves and beg</span><a id="_idTextAnchor095"/><span class="koboSpan" id="kobo.290.1">in this journey into the </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">reactive world.</span></span></p>
<h2 id="_idParaDest-77"><a id="_idTextAnchor096"/><span class="koboSpan" id="kobo.292.1">Setting up the development environment</span></h2>
<p><span class="koboSpan" id="kobo.293.1">This is the first step – we </span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.294.1">need to be sure we have everything ready to use on our local machine. </span><span class="koboSpan" id="kobo.294.2">We have already mentioned the fundamental steps in the </span><em class="italic"><span class="koboSpan" id="kobo.295.1">Technical requirements</span></em><span class="koboSpan" id="kobo.296.1"> section. </span><span class="koboSpan" id="kobo.296.2">Here, we will hav</span><a id="_idTextAnchor097"/><span class="koboSpan" id="kobo.297.1">e a quick check and initiate </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">our project.</span></span></p>
<h3><span class="koboSpan" id="kobo.299.1">Tools and dependencies</span></h3>
<p><span class="koboSpan" id="kobo.300.1">In order to start development, we will </span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.301.1">need an IDE. </span><span class="koboSpan" id="kobo.301.2">You can choose your favorite IDE. </span><span class="koboSpan" id="kobo.301.3">Popular choices among Java developers</span><a id="_idIndexMarker194"/><span class="koboSpan" id="kobo.302.1"> include</span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.303.1"> IntelliJ IDEA, Eclipse, and Visual Studio </span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.304.1">Code. </span><span class="koboSpan" id="kobo.304.2">If the IDE has support for Spring Boot, it will make life easier for you, with helpful plugins and built-in features to simplify the </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">coding experience.</span></span></p>
<p><span class="koboSpan" id="kobo.306.1">Next, Java</span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.307.1"> is the most important component of our development environments. </span><span class="koboSpan" id="kobo.307.2">Spring Boot 3.0 requires at least Java 11, but we will use Java 17. </span><span class="koboSpan" id="kobo.307.3">So, please be sure you have Java 17 installed on your </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">development machine.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.309.1">Spring Initializr</span></strong><span class="koboSpan" id="kobo.310.1"> is our </span><a id="_idIndexMarker198"/><span class="koboSpan" id="kobo.311.1">next stop; we mentioned it previously in </span><a href="B18400_01.xhtml#_idTextAnchor014"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.312.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.313.1">. </span><span class="koboSpan" id="kobo.313.2">It’s an incredibly handy tool for bootstrapping your Spring Boot projects. </span><span class="koboSpan" id="kobo.313.3">It is accessible via a web interface or directly through your IDE and it allows you to generate a project with the desired dependencies, packaging, and Java v</span><a id="_idTextAnchor098"/><span class="koboSpan" id="kobo.314.1">ersion, all ready to be imported into</span><a id="_idIndexMarker199"/> <span class="No-Break"><span class="koboSpan" id="kobo.315.1">your IDE.</span></span></p>
<h3><span class="koboSpan" id="kobo.316.1">Creating a new Spring Boot project</span></h3>
<p><span class="koboSpan" id="kobo.317.1">Let’s start by visiting the </span><a id="_idIndexMarker200"/><span class="koboSpan" id="kobo.318.1">Spring Initializr (</span><a href="https://start.spring.io"><span class="koboSpan" id="kobo.319.1">https://start.spring.io</span></a><span class="koboSpan" id="kobo.320.1">) website or </span><a id="_idIndexMarker201"/><span class="koboSpan" id="kobo.321.1">accessing it through your IDE. </span><span class="koboSpan" id="kobo.321.2">We will select Spring Boot version 3.2.5 since it is the latest stable version of Spring Boot 3.0 and the Java version will be 17. </span><span class="koboSpan" id="kobo.321.3">When you go to the link, you will see a screen like in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.322.1">Figure 3</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.323.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer031">
<span class="koboSpan" id="kobo.325.1"><img alt="Figure 3.1: Screenshot of the Spring Initializr window" src="image/B18400_03_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.326.1">Figure 3.1: Screenshot of the Spring Initializr window</span></p>
<p><span class="koboSpan" id="kobo.327.1">As you can see, a </span><strong class="bold"><span class="koboSpan" id="kobo.328.1">Spring Initializr</span></strong><span class="koboSpan" id="kobo.329.1"> sample project is in the figure. </span><span class="koboSpan" id="kobo.329.2">As for project metadata, fill in the relevant details such as </span><strong class="bold"><span class="koboSpan" id="kobo.330.1">Group</span></strong><span class="koboSpan" id="kobo.331.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.332.1">Artifact</span></strong><span class="koboSpan" id="kobo.333.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.334.1">Name</span></strong><span class="koboSpan" id="kobo.335.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.336.1">Description</span></strong><span class="koboSpan" id="kobo.337.1"> to personalize your project. </span><span class="koboSpan" id="kobo.337.2">For dependencies, please choose the keys </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.339.1">Spring Reactive Web</span></strong><span class="koboSpan" id="kobo.340.1">: This is WebFlux and the most important dependency for this project, because our sample will be a </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">reactive application.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.342.1">Spring Data R2DBC</span></strong><span class="koboSpan" id="kobo.343.1">: We need this to connect a relational database in </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1">reactive applications.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.345.1">H2 Database</span></strong><span class="koboSpan" id="kobo.346.1">: In our sample project, we are going to use an embedded database to reduce </span><a id="_idIndexMarker202"/><span class="koboSpan" id="kobo.347.1">our dependency on another </span><span class="No-Break"><span class="koboSpan" id="kobo.348.1">database server.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.349.1">Once you’ve made all the selections, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.350.1">Generate</span></strong><span class="koboSpan" id="kobo.351.1"> button to get the ready-to-build project. </span><span class="koboSpan" id="kobo.351.2">This will download a ZIP file containing a Gradle project, depending on your preference. </span><span class="koboSpan" id="kobo.351.3">Extract this and import it into your chosen IDE. </span><span class="koboSpan" id="kobo.351.4">You’re now ready to dive into the </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">actual coding!</span></span></p>
<p><span class="koboSpan" id="kobo.353.1">Now, we have completed the first important step. </span><span class="koboSpan" id="kobo.353.2">We have a running Spring Boot 3.0 app on our local machine. </span><span class="koboSpan" id="kobo.353.3">In</span><a id="_idTextAnchor099"/><span class="koboSpan" id="kobo.354.1"> the next section, we will build it tile </span><span class="No-Break"><span class="koboSpan" id="kobo.355.1">by tile.</span></span></p>
<p><span class="koboSpan" id="kobo.356.1">Defining the reactive </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">data model</span></span></p>
<p><span class="koboSpan" id="kobo.358.1">The data model is the </span><a id="_idIndexMarker203"/><span class="koboSpan" id="kobo.359.1">key point for a project. </span><span class="koboSpan" id="kobo.359.2">Because the data model is the smallest piece of the architectural design of an application, we will decide how data is structured, stored, and accessed. </span><span class="koboSpan" id="kobo.359.3">In our sample project, we will have one </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">User</span></strong><span class="koboSpan" id="kobo.361.1"> entity. </span><span class="koboSpan" id="kobo.361.2">We will see how to create it and discuss it, emphasizing the simplicity and power of records in Java, and the significance of annotations such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">@Table</span></strong><span class="koboSpan" id="kobo.363.1"> and</span><a id="_idTextAnchor100"/> <strong class="source-inline"><span class="koboSpan" id="kobo.364.1">@Id</span></strong><span class="koboSpan" id="kobo.365.1"> in linking these structures with </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">the database.</span></span></p>
<h3><span class="koboSpan" id="kobo.367.1">Creating a user record</span></h3>
<p><span class="koboSpan" id="kobo.368.1">This is a</span><a id="_idIndexMarker204"/><span class="koboSpan" id="kobo.369.1"> straightforward </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">User</span></strong><span class="koboSpan" id="kobo.371.1"> entity characterized by an ID, a name, and an email. </span><span class="koboSpan" id="kobo.371.2">Traditionally in Java, we might define this as a class, but with the advantage of Java records, we will introduce it as </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">a record:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.373.1">
@Table("users")
public record User(@Id Long id, String name, String email) {}</span></pre> <p><span class="koboSpan" id="kobo.374.1">This one-line code </span><a id="_idIndexMarker205"/><span class="koboSpan" id="kobo.375.1">encapsulates everything our </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">User</span></strong><span class="koboSpan" id="kobo.377.1"> entity is about: its fields are immutable, it comes equipped with necessary methods such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.378.1">equals()</span></strong><span class="koboSpan" id="kobo.379.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.380.1">hashCode()</span></strong><span class="koboSpan" id="kobo.381.1">, and it’s ready to inte</span><a id="_idTextAnchor101"/><span class="koboSpan" id="kobo.382.1">ract with our database. </span><span class="koboSpan" id="kobo.382.2">Let’s break down </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">the details.</span></span></p>
<h3><span class="koboSpan" id="kobo.384.1">Understanding records versus classes</span></h3>
<p><span class="koboSpan" id="kobo.385.1">At first sight, you </span><a id="_idIndexMarker206"/><span class="koboSpan" id="kobo.386.1">can see a major difference between a record and a class; it is </span><a id="_idIndexMarker207"/><span class="koboSpan" id="kobo.387.1">simplicity. </span><span class="koboSpan" id="kobo.387.2">But there are some more differences in the unseen side. </span><span class="koboSpan" id="kobo.387.3">Here’s why records are often favored over traditional classes in modern </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">Java applications:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.389.1">Immutability</span></strong><span class="koboSpan" id="kobo.390.1">: The fields of a record are final. </span><span class="koboSpan" id="kobo.390.2">This immutable nature is a boon in reactive applications where thread safety and predictability </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">are paramount.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.392.1">Boilerplate reduction</span></strong><span class="koboSpan" id="kobo.393.1">: Automatically provided constructors, getters, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">equals()</span></strong><span class="koboSpan" id="kobo.395.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">hashCode()</span></strong><span class="koboSpan" id="kobo.397.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">toString()</span></strong><span class="koboSpan" id="kobo.399.1"> methods cut down on repetitive code, keeping your models lean </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">and focused.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.401.1">Clarity</span></strong><span class="koboSpan" id="kobo.402.1">: A record’s structure makes it evident what it represents, fostering a code base that’s easier to understand </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">and maintain.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.404.1">Now, we are clear on why we have chosen </span><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">record</span></strong><span class="koboSpan" id="kobo.406.1"> instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">class</span></strong><span class="koboSpan" id="kobo.408.1">. </span><span class="koboSpan" id="kobo.408.2">Now, let’s learn about the an</span><a id="_idTextAnchor102"/><span class="koboSpan" id="kobo.409.1">notations in the code snippet in the </span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">following section.</span></span></p>
<h3><span class="koboSpan" id="kobo.411.1">Understanding @Table and @Id annotations</span></h3>
<p><span class="koboSpan" id="kobo.412.1">When connecting our records to a database, annotations such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">@Table</span></strong><span class="koboSpan" id="kobo.414.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">@Id</span></strong><span class="koboSpan" id="kobo.416.1"> come into play, especially when using Spring Data JPA or R2DBC for </span><span class="No-Break"><span class="koboSpan" id="kobo.417.1">relational databases:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">@Table</span></strong><span class="koboSpan" id="kobo.419.1">: This </span><a id="_idIndexMarker208"/><span class="koboSpan" id="kobo.420.1">annotation specifies the table name in the database with which this entity is associated. </span><span class="koboSpan" id="kobo.420.2">In our case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">@Table("users")</span></strong><span class="koboSpan" id="kobo.422.1"> indicates that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">User</span></strong><span class="koboSpan" id="kobo.424.1"> record corresponds to a table named </span><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">users</span></strong><span class="koboSpan" id="kobo.426.1"> in the database. </span><span class="koboSpan" id="kobo.426.2">It’s a critical piece of information </span><a id="_idIndexMarker209"/><span class="koboSpan" id="kobo.427.1">that </span><strong class="bold"><span class="koboSpan" id="kobo.428.1">object-relational mapping</span></strong><span class="koboSpan" id="kobo.429.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.430.1">ORM</span></strong><span class="koboSpan" id="kobo.431.1">) frameworks use to map the record to the correct </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">database table.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">@Id</span></strong><span class="koboSpan" id="kobo.434.1">: Every </span><a id="_idIndexMarker210"/><span class="koboSpan" id="kobo.435.1">table needs a primary key, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">@Id</span></strong><span class="koboSpan" id="kobo.437.1"> annotation helps you mark which field in your entity is the primary key. </span><span class="koboSpan" id="kobo.437.2">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.438.1">User</span></strong><span class="koboSpan" id="kobo.439.1"> record, annotating the </span><strong class="source-inline"><span class="koboSpan" id="kobo.440.1">id</span></strong><span class="koboSpan" id="kobo.441.1"> field with </span><strong class="source-inline"><span class="koboSpan" id="kobo.442.1">@Id</span></strong><span class="koboSpan" id="kobo.443.1"> tells the ORM framework that this field uniquely identifies each user and should be treated as the primary key in the </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">database table.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.445.1">In conclusion, defining our data model is an important step. </span><span class="koboSpan" id="kobo.445.2">By using annotations such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">@Table</span></strong><span class="koboSpan" id="kobo.447.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">@Id</span></strong><span class="koboSpan" id="kobo.449.1">, we make our model ready for efficient interaction with the database. </span><span class="koboSpan" id="kobo.449.2">This approach makes our code cleaner and more maintainable. </span><span class="koboSpan" id="kobo.449.3">In the next sect</span><a id="_idTextAnchor103"/><span class="koboSpan" id="kobo.450.1">ion, we will be dealing with the database </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">operation part.</span></span></p>
<h2 id="_idParaDest-78"><a id="_idTextAnchor104"/><span class="koboSpan" id="kobo.452.1">Implementing the repository layer</span></h2>
<p><span class="koboSpan" id="kobo.453.1">In our reactive </span><a id="_idIndexMarker211"/><span class="koboSpan" id="kobo.454.1">user management service, establishing a well-structured repository layer is essential. </span><span class="koboSpan" id="kobo.454.2">This layer will liaise between our application’s business logic and the database, handling all data interactions. </span><span class="koboSpan" id="kobo.454.3">In this section, we’ll delve into why the H2 database is a prime choice for development purposes, how to configure it, and the significance o</span><a id="_idTextAnchor105"/><span class="koboSpan" id="kobo.455.1">f implementing reactive repositories </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.457.1">R2dbcRepository</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.459.1">Choosing the H2 database</span></h3>
<p><span class="koboSpan" id="kobo.460.1">When </span><a id="_idIndexMarker212"/><span class="koboSpan" id="kobo.461.1">developing an application, the H2 database is a good option due to its simplicity and ease of use. </span><span class="koboSpan" id="kobo.461.2">It’s a lightweight and in-memory database that doesn’t require installation or setup, making it ideal for testing and development. </span><span class="koboSpan" id="kobo.461.3">The database starts and stops with your application, allowing for quick testing without affecting any live databases. </span><span class="koboSpan" id="kobo.461.4">Additionally, the H2 database is compatible with SQL, maki</span><a id="_idTextAnchor106"/><span class="koboSpan" id="kobo.462.1">ng it easy to switch to a more permanent database </span><span class="No-Break"><span class="koboSpan" id="kobo.463.1">if needed.</span></span></p>
<h3><span class="koboSpan" id="kobo.464.1">Configuring application properties and schema</span></h3>
<p><span class="koboSpan" id="kobo.465.1">To integrate the </span><a id="_idIndexMarker213"/><span class="koboSpan" id="kobo.466.1">H2 database into your Spring Boot application, you’ll need to configure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">application.properties</span></strong><span class="koboSpan" id="kobo.468.1"> file. </span><span class="koboSpan" id="kobo.468.2">Here’s a </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">basic setup:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.470.1">
# Enable H2 Console
spring.h2.console.enabled=true
# Database Configuration for H2
spring.r2dbc.url=r2dbc:h2:mem:///testdb
spring.r2dbc.username=sa
spring.r2dbc.password=
# Schema Generation
spring.sql.init.mode=always
spring.sql.init.platform=h2</span></pre> <p><span class="koboSpan" id="kobo.471.1">Additionally, we</span><a id="_idIndexMarker214"/><span class="koboSpan" id="kobo.472.1"> need to define our database schema and initial data in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.473.1">schema.sql</span></strong><span class="koboSpan" id="kobo.474.1"> file located in our resources directory. </span><span class="koboSpan" id="kobo.474.2">This SQL script is automatically executed </span><a id="_idTextAnchor107"/><span class="koboSpan" id="kobo.475.1">when your application starts, setting up your </span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">database schema.</span></span></p>
<h3><span class="koboSpan" id="kobo.477.1">An introduction to reactive repositories</span></h3>
<p><span class="koboSpan" id="kobo.478.1">In a traditional Spring </span><a id="_idIndexMarker215"/><span class="koboSpan" id="kobo.479.1">application, you might be familiar with JPA and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">CrudRepository</span></strong><span class="koboSpan" id="kobo.481.1"> interface for managing data operations. </span><span class="koboSpan" id="kobo.481.2">However, in the reactive world, we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">ReactiveCrudRepository</span></strong><span class="koboSpan" id="kobo.483.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">R2dbcRepository</span></strong><span class="koboSpan" id="kobo.485.1">. </span><span class="koboSpan" id="kobo.485.2">These interfaces are designed to work with reactive types, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">Mono</span></strong><span class="koboSpan" id="kobo.487.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.488.1">Flux</span></strong><span class="koboSpan" id="kobo.489.1">. </span><span class="koboSpan" id="kobo.489.2">By using these interfaces we will ensure that all data operations are non-blocking and support backpressure. </span><span class="koboSpan" id="kobo.489.3">This shift to reactive types allows our a</span><a id="_idTextAnchor108"/><span class="koboSpan" id="kobo.490.1">pplication to handle operations asynchronously </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">and efficiently.</span></span></p>
<h3><span class="koboSpan" id="kobo.492.1">Understanding R2dbcRepository</span></h3>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">ReactiveCrudRepository</span></strong><span class="koboSpan" id="kobo.494.1"> offers all</span><a id="_idIndexMarker216"/><span class="koboSpan" id="kobo.495.1"> the standard </span><strong class="bold"><span class="koboSpan" id="kobo.496.1">create</span></strong><span class="koboSpan" id="kobo.497.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.498.1">read</span></strong><span class="koboSpan" id="kobo.499.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.500.1">update</span></strong><span class="koboSpan" id="kobo.501.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.502.1">delete</span></strong><span class="koboSpan" id="kobo.503.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.504.1">CRUD</span></strong><span class="koboSpan" id="kobo.505.1">) operations</span><a id="_idIndexMarker217"/><span class="koboSpan" id="kobo.506.1"> we’re familiar with but adapted for a reactive paradigm. </span><span class="koboSpan" id="kobo.506.2">This means operations return </span><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">Mono</span></strong><span class="koboSpan" id="kobo.508.1"> for single results or </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">Flux</span></strong><span class="koboSpan" id="kobo.510.1"> for multiple results. </span><span class="koboSpan" id="kobo.510.2">This helps us to i</span><a id="_idTextAnchor109"/><span class="koboSpan" id="kobo.511.1">ntegrate seamlessly with the rest of the </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">reactive infrastructure.</span></span></p>
<h3><span class="koboSpan" id="kobo.513.1">Creating a user repository</span></h3>
<p><span class="koboSpan" id="kobo.514.1">Now, let’s </span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.515.1">define a repository for the User entity. </span><span class="koboSpan" id="kobo.515.2">Utilizing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">R2dbcRepository</span></strong><span class="koboSpan" id="kobo.517.1"> interface, you can create a customized repository that extends its capabilities. </span><span class="koboSpan" id="kobo.517.2">Here’s what a simple </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">UserRepository</span></strong><span class="koboSpan" id="kobo.519.1"> might </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">look like:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.521.1">
public interface UserRepository extends R2dbcRepository&lt;User, String&gt; {
    Mono&lt;User&gt; findByEmail(String email);
}</span></pre> <p><span class="koboSpan" id="kobo.522.1">In this snippet, </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">UserRepository</span></strong><span class="koboSpan" id="kobo.524.1"> extends </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">R2dbcRepository</span></strong><span class="koboSpan" id="kobo.526.1">. </span><span class="koboSpan" id="kobo.526.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">findByEmail</span></strong><span class="koboSpan" id="kobo.528.1"> method is a custom query method that returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">Mono&lt;User&gt;</span></strong><span class="koboSpan" id="kobo.530.1">. </span><span class="koboSpan" id="kobo.530.2">This method returns a single-user result in a reactive wrapper. </span><span class="koboSpan" id="kobo.530.3">This method might be used to check unique email constraints or retrieve </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">user information.</span></span></p>
<p><span class="koboSpan" id="kobo.532.1">By these simple lines, we can implement the repository layer. </span><span class="koboSpan" id="kobo.532.2">By choosing the H2 database for development, we simplify our setup process and make our development cycle faster and more flexible. </span><span class="koboSpan" id="kobo.532.3">As we continue to build your user management service, remember that each layer, from the data model to the repository, is a part of our reactive application. </span><span class="koboSpan" id="kobo.532.4">Now, we will see how</span><a id="_idTextAnchor110"/><span class="koboSpan" id="kobo.533.1"> we can connect the user and repository with the </span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">controller layer.</span></span></p>
<h2 id="_idParaDest-79"><a id="_idTextAnchor111"/><span class="koboSpan" id="kobo.535.1">Building the reactive REST controller</span></h2>
<p><span class="koboSpan" id="kobo.536.1">The controller layer is </span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.537.1">the place where we interact with the outside world. </span><span class="koboSpan" id="kobo.537.2">Our application will handle incoming HTTP requests and respond reactively. </span><span class="koboSpan" id="kobo.537.3">Let’s dive into how a reactive controller operate</span><a id="_idTextAnchor112"/><span class="koboSpan" id="kobo.538.1">s and walk through the implementation of essential </span><span class="No-Break"><span class="koboSpan" id="kobo.539.1">CRUD operations.</span></span></p>
<h3><span class="koboSpan" id="kobo.540.1">Overview of controller structure</span></h3>
<p><span class="koboSpan" id="kobo.541.1">In a Spring Boot </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.542.1">application, controllers are the gatekeepers of our API. </span><span class="koboSpan" id="kobo.542.2">It navigates incoming requests to the appropriate services or actions. </span><span class="koboSpan" id="kobo.542.3">In a reactive environment, these controllers are designed to work with non-blocking operations and handle streams of data efficiently. </span><span class="koboSpan" id="kobo.542.4">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.543.1">@RestController</span></strong><span class="koboSpan" id="kobo.544.1"> annotation is the default annotation for RESTful controllers. </span><span class="koboSpan" id="kobo.544.2">There is no specific change for reactive in this creating </span><span class="No-Break"><span class="koboSpan" id="kobo.545.1">a controller.</span></span></p>
<p><span class="koboSpan" id="kobo.546.1">Here’s the </span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.547.1">basic structure of our </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">reactive </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">UserController</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.550.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.551.1">
@RestController
@RequestMapping("/users")
public class UserController {
    private final UserRepository userRepository;
    public UserController(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
    // ... </span><span class="koboSpan" id="kobo.551.2">CRUD operations
}</span></pre> <p><span class="koboSpan" id="kobo.552.1">In this class, </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">@RestController</span></strong><span class="koboSpan" id="kobo.554.1"> marks it as a controller where each method returns a domain object, and the </span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.555.1">client gets it as a JSON object. </span><strong class="source-inline"><span class="koboSpan" id="kobo.556.1">@RequestMapping("/users")</span></strong><span class="koboSpan" id="kobo.557.1"> sets the base path for all routes in the controller. </span><span class="koboSpan" id="kobo.557.2">W</span><a id="_idTextAnchor113"/><span class="koboSpan" id="kobo.558.1">e also inject </span><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">UserRepository</span></strong><span class="koboSpan" id="kobo.560.1"> to interact with the </span><span class="No-Break"><span class="koboSpan" id="kobo.561.1">database reactively.</span></span></p>
<h3><span class="koboSpan" id="kobo.562.1">Implementing CRUD operations</span></h3>
<p><span class="koboSpan" id="kobo.563.1">CRUD operations </span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.564.1">form the core functionalities of most APIs, allowing clients to create, read, update, and delete resources. </span><span class="koboSpan" id="kobo.564.2">Here’s how these operations are implemented reactively </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.566.1">UserController</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.567.1">:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.568.1">Create (POST)</span></strong><span class="koboSpan" id="kobo.569.1">: We always use HTTP POST calls for creating a </span><span class="No-Break"><span class="koboSpan" id="kobo.570.1">new record:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.571.1">
    @PostMapping
    public Mono&lt;User&gt; createUser(@RequestBody User user) {
        return userRepository.save(user);
    }</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.572.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">createUser</span></strong><span class="koboSpan" id="kobo.574.1"> method handles POST requests to </span><strong class="source-inline"><span class="koboSpan" id="kobo.575.1">/users</span></strong><span class="koboSpan" id="kobo.576.1">, saving a new user to the database. </span><span class="koboSpan" id="kobo.576.2">Notice the return type is </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">Mono&lt;User&gt;</span></strong><span class="koboSpan" id="kobo.578.1">, indicating it’s a single </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">asynchronous operation.</span></span></p></li> <li><strong class="bold"><span class="koboSpan" id="kobo.580.1">List all users (GET)</span></strong><span class="koboSpan" id="kobo.581.1">: This </span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.582.1">method is used to list or read the data from </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">the application:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.584.1">
    @GetMapping
    public Flux&lt;User&gt; getAllUsers() {
        return userRepository.findAll();
    }</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.585.1"> Here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.586.1">getAllUsers</span></strong><span class="koboSpan" id="kobo.587.1"> retrieves all users. </span><span class="koboSpan" id="kobo.587.2">It returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.588.1">Flux&lt;User&gt;</span></strong><span class="koboSpan" id="kobo.589.1">, suitable for streaming all </span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">users reactively:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.591.1">    @GetMapping("/{id}")
    public Mono&lt;User&gt; getUserById(@PathVariable String id) {
        return userRepository.findById(id);
    }</span></pre><p class="list-inset"><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">getUserById</span></strong><span class="koboSpan" id="kobo.593.1"> fetches a single user based on the provided ID. </span><span class="koboSpan" id="kobo.593.2">It’s a typical example of a read operation in a REST API, returning </span><strong class="source-inline"><span class="koboSpan" id="kobo.594.1">Mono&lt;User&gt;</span></strong><span class="koboSpan" id="kobo.595.1"> as it expects at most </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">one result.</span></span></p></li> <li><strong class="bold"><span class="koboSpan" id="kobo.597.1">Delete (DELETE)</span></strong><span class="koboSpan" id="kobo.598.1">: We always use this method when we want to delete a record in </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">our applications:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.600.1">
    @DeleteMapping("/{id}")
    public Mono&lt;Void&gt; deleteUser(@PathVariable String id) {
        return userRepository.deleteById(id);
    }</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.601.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.602.1">deleteUser</span></strong><span class="koboSpan" id="kobo.603.1"> method handles the deletion of a user given their ID. </span><span class="koboSpan" id="kobo.603.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.604.1">Mono&lt;Void&gt;</span></strong><span class="koboSpan" id="kobo.605.1"> return type</span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.606.1"> indicates an operation that will complete without emitting any </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">data (void).</span></span></p></li> </ul>
<p><span class="koboSpan" id="kobo.608.1">With this reactive REST controller, we ensure that every operation is non-blocking and scalable. </span><span class="koboSpan" id="kobo.608.2">This will allow our API to handle a large number of concurrent users and operations. </span><span class="koboSpan" id="kobo.608.3">As you can notice, each CRUD operation returns Mono or Flux (a single item or a stream). </span><span class="koboSpan" id="kobo.608.4">These methods were basic operations and</span><a id="_idTextAnchor114"/><span class="koboSpan" id="kobo.609.1"> now we will see a sample that is a bit more complex in the </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">next section.</span></span></p>
<h2 id="_idParaDest-80"><a id="_idTextAnchor115"/><span class="koboSpan" id="kobo.611.1">Adding advanced Mono operations</span></h2>
<p><span class="koboSpan" id="kobo.612.1">Creating a</span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.613.1"> reactive REST API involves more than just implementing the basic CRUD operations. </span><span class="koboSpan" id="kobo.613.2">It’s about enhancing the functionality to handle real-world scenarios efficiently and effectively. </span><span class="koboSpan" id="kobo.613.3">Now, assume we have a business requirement to check the email uniqueness of the user when creating a new user. </span><span class="koboSpan" id="kobo.613.4">Let’s enrich the </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">createUser</span></strong><span class="koboSpan" id="kobo.615.1"> method by using advanced Mono operations to </span><a id="_idTextAnchor116"/><span class="koboSpan" id="kobo.616.1">ensure email uniqueness and provide a more robust </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">error-handling strategy.</span></span></p>
<p><span class="koboSpan" id="kobo.618.1">In order to check email uniqueness, we need to use several reactive operators and </span><span class="No-Break"><span class="koboSpan" id="kobo.619.1">error handling.</span></span></p>
<p><span class="koboSpan" id="kobo.620.1">Here’s the advanced </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">createUser</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.622.1"> method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.623.1">
@PostMapping
public Mono&lt;ResponseEntity&lt;User&gt;&gt; createUser(@RequestBody User user) {
    return userRepository.findByEmail(user.email())
            .flatMap(existingUser -&gt; Mono.error(new EmailUniquenessException("Email already exists!")))
            .then(userRepository.save(user)) // Save the new user if the email doesn't exist
            .map(ResponseEntity::ok) // Map the saved user to a ResponseEntity
            .doOnNext(savedUser -&gt; System.out.println("New user created: " + savedUser)) // Logging or further action
            .onErrorResume(e -&gt; { // Handling errors, such as email uniqueness violation
                System.out.println("An exception has occurred: " + e.getMessage());
                if (e instanceof EmailUniquenessException) {
                    return Mono.just(ResponseEntity
                            .status(HttpStatus.CONFLICT).build());
                } else {
                    return Mono.just(ResponseEntity
                            .status(HttpStatus.INTERNAL_SERVER_ERROR)
                            .build());
                }
            });
}</span></pre> <p><span class="koboSpan" id="kobo.624.1">Let’s learn about the </span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.625.1">reactive methods in this </span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">code snippet:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">flatMap()</span></strong><span class="koboSpan" id="kobo.628.1">: Useful for mapping and flattening, </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">flatMap()</span></strong><span class="koboSpan" id="kobo.630.1"> allows you to chain asynchronous operations, making it perfect for checking conditions or transforming data. </span><span class="koboSpan" id="kobo.630.2">In this sample, this operator is used to check whether the email already exists. </span><span class="koboSpan" id="kobo.630.3">If the email is found, it throws a custom </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">EmailUniquenessException</span></strong><span class="koboSpan" id="kobo.632.1">. </span><span class="koboSpan" id="kobo.632.2">This ensures that each email in the system is unique and provides a clear path for handling </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">the error.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">then()</span></strong><span class="koboSpan" id="kobo.635.1">: This is used for chaining another </span><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">Mono</span></strong><span class="koboSpan" id="kobo.637.1"> and executing it after the previous operation completes. </span><span class="koboSpan" id="kobo.637.2">In our case, after ensuring the email doesn’t exist, </span><strong class="source-inline"><span class="koboSpan" id="kobo.638.1">then()</span></strong><span class="koboSpan" id="kobo.639.1"> is used to save the new user. </span><span class="koboSpan" id="kobo.639.2">It effectively chains the user save operation, ensuring it only occurs if the email uniqueness </span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">check passes.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.641.1">map()</span></strong><span class="koboSpan" id="kobo.642.1">: This transforms the data in the stream, often used for converting one type to another or wrapping it in another object. </span><span class="koboSpan" id="kobo.642.2">In our case, once the user is saved, </span><strong class="source-inline"><span class="koboSpan" id="kobo.643.1">map()</span></strong><span class="koboSpan" id="kobo.644.1"> transforms the saved user into </span><strong class="source-inline"><span class="koboSpan" id="kobo.645.1">ResponseEntity</span></strong><span class="koboSpan" id="kobo.646.1"> with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">OK</span></strong><span class="koboSpan" id="kobo.648.1"> status, ready to be returned to </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">the client.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.650.1">doOnNext():</span></strong><span class="koboSpan" id="kobo.651.1"> This executes side effects, such as logging or metrics collection, without altering the stream. </span><span class="koboSpan" id="kobo.651.2">In our case, this operator is used for logging or any other side actions you want to perform after the new user is created. </span><span class="koboSpan" id="kobo.651.3">It’s a way to tap into the stream and perform an action without altering the </span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">data flow.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">onErrorResume()</span></strong><span class="koboSpan" id="kobo.654.1">: This provides a way to recover from errors, allowing you to continue the data flow with an alternative </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">Mono</span></strong><span class="koboSpan" id="kobo.656.1">. </span><span class="koboSpan" id="kobo.656.2">This is crucial for error handling; this operator catches exceptions and allows you to provide an alternative </span><strong class="source-inline"><span class="koboSpan" id="kobo.657.1">Mono</span></strong><span class="koboSpan" id="kobo.658.1">. </span><span class="koboSpan" id="kobo.658.2">In the case of </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">EmailUniquenessException</span></strong><span class="koboSpan" id="kobo.660.1">, it returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.661.1">Res</span><a id="_idTextAnchor117"/><span class="koboSpan" id="kobo.662.1">ponseEntity</span></strong><span class="koboSpan" id="kobo.663.1"> with</span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.664.1"> a conflict status, indicating the email is already </span><span class="No-Break"><span class="koboSpan" id="kobo.665.1">in use.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.666.1">Adding these advanced </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">Mono</span></strong><span class="koboSpan" id="kobo.668.1"> operations into your </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">createUser</span></strong><span class="koboSpan" id="kobo.670.1"> method transforms it from a simple save function to a more sophisticated, real-world-ready operation. </span><span class="koboSpan" id="kobo.670.2">This approach ensures data integrity with the email uniqueness check. </span><span class="koboSpan" id="kobo.670.3">It also provides clearer communication back to the client about the result of their request, whether successful or in error. </span><span class="koboSpan" id="kobo.670.4">No</span><a id="_idTextAnchor118"/><span class="koboSpan" id="kobo.671.1">w, it is time to run the application and see how it looks in the </span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">user’s eye.</span></span></p>
<h2 id="_idParaDest-81"><a id="_idTextAnchor119"/><span class="koboSpan" id="kobo.673.1">Running the Spring Boot application with Gradle and Java 17</span></h2>
<p><span class="koboSpan" id="kobo.674.1">With your reactive REST API in place and ready to show its prowess, it’s time to run the application using Gradle an</span><a id="_idTextAnchor120"/><span class="koboSpan" id="kobo.675.1">d Java 17. </span><span class="koboSpan" id="kobo.675.2">Here’s how you can get your application up and running in </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">no time.</span></span></p>
<p><span class="koboSpan" id="kobo.677.1">To run a </span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.678.1">Spring Boot application using Gradle, follow </span><a id="_idIndexMarker230"/><span class="No-Break"><span class="koboSpan" id="kobo.679.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.680.1">Open a terminal or command prompt and change the directory to the root directory of your project where the </span><strong class="source-inline"><span class="koboSpan" id="kobo.681.1">build.gradle</span></strong><span class="koboSpan" id="kobo.682.1"> file </span><span class="No-Break"><span class="koboSpan" id="kobo.683.1">is located.</span></span></li>
<li><span class="koboSpan" id="kobo.684.1">Execute the Run Command – use the following command to start </span><span class="No-Break"><span class="koboSpan" id="kobo.685.1">your application:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.686.1">
   ./gradlew bootRun</span></pre></li> </ol>
<p><span class="koboSpan" id="kobo.687.1">This command initiates the Gradle build process, compiles your Java code, </span><a id="_idTextAnchor121"/><span class="koboSpan" id="kobo.688.1">and starts the embedded server (typically Tomcat) that comes with </span><span class="No-Break"><span class="koboSpan" id="kobo.689.1">Spring Boot.</span></span></p>
<p><span class="koboSpan" id="kobo.690.1">After </span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.691.1">executing the run command, watch the console for log messages. </span><span class="koboSpan" id="kobo.691.2">Spring Boot provides detailed logs that can help you understand what’s</span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.692.1"> happening behind the scenes. </span><span class="koboSpan" id="kobo.692.2">The key things to look for are </span><span class="No-Break"><span class="koboSpan" id="kobo.693.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.694.1">Build success</span></strong><span class="koboSpan" id="kobo.695.1">: Indications that Gradle has successfully built </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">your application</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.697.1">Application starting</span></strong><span class="koboSpan" id="kobo.698.1">: Messages related to your application context, beans, and embedded server </span><span class="No-Break"><span class="koboSpan" id="kobo.699.1">starting up</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.700.1">Running application</span></strong><span class="koboSpan" id="kobo.701.1">: A log entry similar to “Started application in </span><em class="italic"><span class="koboSpan" id="kobo.702.1">X</span></em><span class="koboSpan" id="kobo.703.1"> seconds” signifies that your application is up </span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">and running</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.705.1">By default, your application will be accessible at </span><strong class="source-inline"><span class="koboSpan" id="kobo.706.1">http://localhost:8080</span></strong><span class="koboSpan" id="kobo.707.1">. </span><span class="koboSpan" id="kobo.707.2">This can be changed in your </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">application.prop</span><a id="_idTextAnchor122"/><a id="_idTextAnchor123"/><span class="koboSpan" id="kobo.709.1">erties</span></strong><span class="koboSpan" id="kobo.710.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.711.1">application.yml</span></strong><span class="koboSpan" id="kobo.712.1"> file if a different port or context path </span><span class="No-Break"><span class="koboSpan" id="kobo.713.1">is preferred.</span></span></p>
<p><span class="koboSpan" id="kobo.714.1">Now that our application is up and running, it’s important to test its functionality. </span><span class="koboSpan" id="kobo.714.2">Interact with some of the endpoints in your API using cURL commands or whichever other tool you would use to make API calls. </span><span class="koboSpan" id="kobo.714.3">This interaction will validate whether your application is working (i.e., processing requests from the users and responding </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">as required).</span></span></p>
<p><span class="koboSpan" id="kobo.716.1">Now, our application is running on our local machine. </span><span class="koboSpan" id="kobo.716.2">We can create, list, and delete users in our embedded database. </span><span class="koboSpan" id="kobo.716.3">Also, we can test the </span><span class="No-Break"><span class="koboSpan" id="kobo.717.1">reactive abilities.</span></span></p>
<p><span class="koboSpan" id="kobo.718.1">In the next section, we will test its capabilities and see how the reactive approach can help us under </span><span class="No-Break"><span class="koboSpan" id="kobo.719.1">concurrent requests.</span></span></p>
<p><span class="koboSpan" id="kobo.720.1">Testing is an indispensable part of application development. </span><span class="koboSpan" id="kobo.720.2">We need to ensure that every component functions as expected and that the entire system operates seamlessly. </span><span class="koboSpan" id="kobo.720.3">We will cover the unit test part in </span><a href="B18400_06.xhtml#_idTextAnchor192"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.721.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.722.1">. </span><span class="koboSpan" id="kobo.722.2">However, unit tests are not the only way to test our application. </span><span class="koboSpan" id="kobo.722.3">We can manually test the endpoints of your reactive R</span><a id="_idTextAnchor124"/><a id="_idTextAnchor125"/><span class="koboSpan" id="kobo.723.1">EST API to verify its functionality. </span><span class="koboSpan" id="kobo.723.2">We will see how to do this in </span><span class="No-Break"><span class="koboSpan" id="kobo.724.1">this section.</span></span></p>
<p><span class="koboSpan" id="kobo.725.1">cURL is a versatile command-line tool used for transferring data with URLs. </span><span class="koboSpan" id="kobo.725.2">It’s an excellent choice for manually testing HTTP endpoints. </span><span class="koboSpan" id="kobo.725.3">By executing cURL commands, you can simulate client requests to your application and observe the responses, ensuring that each part of your application reacts </span><span class="No-Break"><span class="koboSpan" id="kobo.726.1">as expected.</span></span></p>
<p><span class="koboSpan" id="kobo.727.1">Here are cURL </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.728.1">scripts and their expected outputs for</span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.729.1"> testing the various endpoints of your user management service, including the scenario of an email </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">uniqueness violation:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.731.1">Create user (</span></strong><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">POST /users</span></strong><strong class="bold"><span class="koboSpan" id="kobo.733.1">)</span></strong><span class="koboSpan" id="kobo.734.1">: These are the steps for creating a </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">new user:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.736.1">Creating a new user</span></strong><span class="koboSpan" id="kobo.737.1">: We will create a single user with this </span><span class="No-Break"><span class="koboSpan" id="kobo.738.1">cURL command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.739.1">     curl -X POST -H "Content-Type: application/json" -d "{\"name\": \"John Doe\", \"email\": \"john@example.com\"}" http://localhost:8080/users</span></strong></pre></li></ul><p class="list-inset"><span class="koboSpan" id="kobo.740.1">This expected output is a successful creation that returns the details of the </span><span class="No-Break"><span class="koboSpan" id="kobo.741.1">new user.</span></span></p><ul><li><strong class="bold"><span class="koboSpan" id="kobo.742.1">Testing email uniqueness</span></strong><span class="koboSpan" id="kobo.743.1">: With this cURL command, we are attempting to create a new user with the same </span><span class="No-Break"><span class="koboSpan" id="kobo.744.1">email address:</span></span><pre class="source-code"><strong class="bold"><span class="koboSpan" id="kobo.745.1">     curl -X POST -H "Content-Type: application/json" -d "{\"name\": \"Jane Doe\", \"email\": \"john@example.com\"}" http://localhost:8080/users</span></strong></pre></li></ul><p class="list-inset"><span class="koboSpan" id="kobo.746.1">The expected output is an error message indicating that the email already exists, with an HTTP status code of </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.747.1">409</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.748.1"> (conflict).</span></span></p></li> <li><strong class="bold"><span class="koboSpan" id="kobo.749.1">Get all users (</span></strong><strong class="source-inline"><span class="koboSpan" id="kobo.750.1">GET /users</span></strong><strong class="bold"><span class="koboSpan" id="kobo.751.1">)</span></strong><span class="koboSpan" id="kobo.752.1">: This command will list all the users in </span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">the system:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.754.1">   curl http://localhost:8080/users</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.755.1">The expected output is a list of all users in </span><span class="No-Break"><span class="koboSpan" id="kobo.756.1">the system.</span></span></p></li> <li><strong class="bold"><span class="koboSpan" id="kobo.757.1">Get user by ID (</span></strong><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">GET /users/{id}</span></strong><strong class="bold"><span class="koboSpan" id="kobo.759.1">)</span></strong><span class="koboSpan" id="kobo.760.1">: This command will gather just </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">one user:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.762.1">   curl http://localhost:8080/users/1</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.763.1">The expected output is the details of the user with the </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">specified ID.</span></span></p></li> <li><strong class="bold"><span class="koboSpan" id="kobo.765.1">Delete user (</span></strong><strong class="source-inline"><span class="koboSpan" id="kobo.766.1">DELETE /users/{id}</span></strong><strong class="bold"><span class="koboSpan" id="kobo.767.1">)</span></strong><span class="koboSpan" id="kobo.768.1">: We will delete the user with </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">ID </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.770.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.771.1">:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.772.1">   curl -X DELETE http://localhost:8080/users/1</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.773.1">The expected</span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.774.1"> output is no con</span><a id="_idTextAnchor126"/><span class="koboSpan" id="kobo.775.1">tent, with</span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.776.1"> an HTTP status code of </span><strong class="source-inline"><span class="koboSpan" id="kobo.777.1">204</span></strong><span class="koboSpan" id="kobo.778.1"> (no content), indicating </span><span class="No-Break"><span class="koboSpan" id="kobo.779.1">successful deletion.</span></span></p></li> </ul>
<p><span class="koboSpan" id="kobo.780.1">By these manual tests, we ensure that the app is working and acting as exp</span><a id="_idTextAnchor127"/><span class="koboSpan" id="kobo.781.1">ected in various scenarios. </span><span class="koboSpan" id="kobo.781.2">Also, we could test the edge case for </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">email uniqueness.</span></span></p>
<h2 id="_idParaDest-82"><a id="_idTextAnchor128"/><span class="koboSpan" id="kobo.783.1">Conclusion</span></h2>
<p><span class="koboSpan" id="kobo.784.1">As we’ve come to the end of the section, let’s take a step back and look at our journey. </span><span class="koboSpan" id="kobo.784.2">We learned how to build a reactive REST API with Spring Boot 3.0 – and it’s not all about coding; it’s choosing a modern way of making apps. </span><span class="koboSpan" id="kobo.784.3">So, in learning reactive programming, you learned how to make quicker, tougher services and the capacity to handle a larger load. </span><span class="koboSpan" id="kobo.784.4">You went through setting up, making a data model, creating a place to store the data reactively, and making a REST controller that can do a lot. </span><span class="koboSpan" id="kobo.784.5">Finally, we worked on a reactive </span><span class="No-Break"><span class="koboSpan" id="kobo.785.1">API example.</span></span></p>
<p><span class="koboSpan" id="kobo.786.1">Reactive programming is a big shift. </span><span class="koboSpan" id="kobo.786.2">In it, the focus is on data that never stops and is asynchronous. </span><span class="koboSpan" id="kobo.786.3">If you learn this, you’re ready for modern software needs. </span><span class="koboSpan" id="kobo.786.4">These are quick reactions, good performance, and great user experiences. </span><span class="koboSpan" id="kobo.786.5">Reactive programming makes a system work better under pressure, using resources well, and also becoming more naturally manageable to handle many tasks </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">at once.</span></span></p>
<p><span class="koboSpan" id="kobo.788.1">Keep applying what you have learned about reactive principles and techniques. </span><span class="koboSpan" id="kobo.788.2">It may be challenging at first, but it will certainly be worth it. </span><span class="koboSpan" id="kobo.788.3">Embrace the reactive way, and you will create systems that are not only strong but also efficient </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">and robust.</span></span></p>
<p><span class="koboSpan" id="kobo.790.1">But that’s not all. </span><span class="koboSpan" id="kobo.790.2">In the next section, you’ll learn all about asynchronous systems and backpressure. </span><span class="koboSpan" id="kobo.790.3">We’ll look at how to keep lots of data manageable so your app remains stable and quick. </span><span class="koboSpan" id="kobo.790.4">Understanding back pressure is key in our high-data world with expectations for speed and reliability </span><span class="No-Break"><span class="koboSpan" id="kobo.791.1">as well.</span></span></p>
<p><span class="koboSpan" id="kobo.792.1">Don’t forget to use the finalized project to get first-hand experience. </span><span class="koboSpan" id="kobo.792.2">Check out the GitHub repository to get the full code, see how the full system works, and start your work from </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">there on.</span></span></p>
<h1 id="_idParaDest-83"><a id="_idTextAnchor129"/><span class="koboSpan" id="kobo.794.1">Asynchronous systems and backpressure</span></h1>
<p><span class="koboSpan" id="kobo.795.1">In the competitive world, asynchronous </span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.796.1">communication has become a key element in modern web applications because it promises efficiency and scalability. </span><span class="koboSpan" id="kobo.796.2">When we use the term “asynchronous,” reactive systems come to mind. </span><span class="koboSpan" id="kobo.796.3">As we already know, the need for an asynchronous system comes from the requirement to handle lots of data streams. </span><span class="koboSpan" id="kobo.796.4">So, the system should handle these streams and protect itself from exhaustion. </span><span class="koboSpan" id="kobo.796.5">At this point, the role of </span><span class="No-Break"><span class="koboSpan" id="kobo.797.1">backpressure arises.</span></span></p>
<p><span class="koboSpan" id="kobo.798.1">In this section, we will dis</span><a id="_idTextAnchor130"/><span class="koboSpan" id="kobo.799.1">cover what backpressure is and how we can implement it in our current </span><span class="No-Break"><span class="koboSpan" id="kobo.800.1">sample project.</span></span></p>
<h2 id="_idParaDest-84"><a id="_idTextAnchor131"/><span class="koboSpan" id="kobo.801.1">Diving into backpressure</span></h2>
<p><span class="koboSpan" id="kobo.802.1">We were told that </span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.803.1">backpressure is a lifesaver mechanism, but we need to clarify this. </span><span class="koboSpan" id="kobo.803.2">In this section, we are goi</span><a id="_idTextAnchor132"/><span class="koboSpan" id="kobo.804.1">ng to discuss what bac</span><a id="_idTextAnchor133"/><span class="koboSpan" id="kobo.805.1">kpressure is, why we need it, and how it protects </span><span class="No-Break"><span class="koboSpan" id="kobo.806.1">our systems.</span></span></p>
<h3><span class="koboSpan" id="kobo.807.1">What is backpressure?</span></h3>
<p><span class="koboSpan" id="kobo.808.1">Imagine a </span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.809.1">situation where there is a high-speed conveyor belt delivering products to a packer. </span><span class="koboSpan" id="kobo.809.2">If the packer can’t keep up with the speed, the products will pile up, and the products will get damaged or lost. </span><span class="koboSpan" id="kobo.809.3">Backpressure is a method to control the flow of products based on the packer’s capacity. </span><span class="koboSpan" id="kobo.809.4">It’s like giving the packer a “stop” button to prevent </span><span class="No-Break"><span class="koboSpan" id="kobo.810.1">overwhelming scenarios.</span></span></p>
<p><span class="koboSpan" id="kobo.811.1">In reactive streams, backpressure</span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.812.1"> is a crucial concept. </span><span class="koboSpan" id="kobo.812.2">It allows a data consumer (subscriber) to communicate with the data producer (publisher) about the amount of data it can handle at a time. </span><span class="koboSpan" id="kobo.812.3">This prevents overwhelming scenarios and ensures a smooth and manageable </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">data flow.</span></span></p>
<h3><span class="koboSpan" id="kobo.814.1">Why is backpressure necessary?</span></h3>
<p><span class="koboSpan" id="kobo.815.1">We define </span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.816.1">it as a “stop” button, so you can imagine the disaster that may cause if we don’t have it. </span><span class="koboSpan" id="kobo.816.2">So, without backpressure, systems can run into some of the following </span><span class="No-Break"><span class="koboSpan" id="kobo.817.1">critical issues:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.818.1">Memory overruns</span></strong><span class="koboSpan" id="kobo.819.1">: When the incoming data stream is faster than the application can process, the server may run out </span><span class="No-Break"><span class="koboSpan" id="kobo.820.1">of memory</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.821.1">Poor performance</span></strong><span class="koboSpan" id="kobo.822.1">: As the system struggles to manage the irregular flow, overall performance can decrease, causing slower response times and a poor </span><span class="No-Break"><span class="koboSpan" id="kobo.823.1">user experience</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.824.1">System crashes</span></strong><span class="koboSpan" id="kobo.825.1">: In extreme cases, such as unexpected high demand occurs on our application, the system </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">may crash</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.827.1">Backpressure is not just a nice-to-have feature. </span><span class="koboSpan" id="kobo.827.2">It’s an inevitable requirement for systems if we need to manage unpredicted d</span><a id="_idTextAnchor134"/><span class="koboSpan" id="kobo.828.1">ata streams. </span><span class="koboSpan" id="kobo.828.2">In the next section, we will discuss how we can use it in the </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">Spring world.</span></span></p>
<h3><span class="koboSpan" id="kobo.830.1">Backpressure in Project Reactor</span></h3>
<p><span class="koboSpan" id="kobo.831.1">Project Reactor is</span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.832.1"> a foundational library for reactive programming in the Spring ecosystem. </span><span class="koboSpan" id="kobo.832.2">It implements backpressure using the reactive streams specification. </span><span class="koboSpan" id="kobo.832.3">This would mean ensuring</span><a id="_idIndexMarker243"/><span class="koboSpan" id="kobo.833.1"> the parts of a program that send out </span><a id="_idIndexMarker244"/><span class="koboSpan" id="kobo.834.1">data do it in a controlled way based on what the parts that receive the data can </span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">deal with.</span></span></p>
<p><span class="koboSpan" id="kobo.836.1">In Reactor, as a Flux or Mono typically sends data (data sequences), it doesn’t just send all the data at once. </span><span class="koboSpan" id="kobo.836.2">Within this pattern, instead, the part that receives the data (the subscriber) asks for only as much of that data as it can deal with at one time. </span><span class="koboSpan" id="kobo.836.3">This asking is done through a method called request(n). </span><span class="koboSpan" id="kobo.836.4">Here’s how </span><span class="No-Break"><span class="koboSpan" id="kobo.837.1">it works:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.838.1">Request(n)</span></strong><span class="koboSpan" id="kobo.839.1">The subscriber can request a specific number of items. </span><span class="koboSpan" id="kobo.839.2">In this way, the subscriber informs the producer about its </span><span class="No-Break"><span class="koboSpan" id="kobo.840.1">current capacity.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.841.1">Dynamic adjustment</span></strong><span class="koboSpan" id="kobo.842.1">: As the subscriber processes data, it can dynamically adjust its requests based on current load, processing speed, and </span><span class="No-Break"><span class="koboSpan" id="kobo.843.1">other factors.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.844.1">Propagated backpressure</span></strong><span class="koboSpan" id="kobo.845.1">: Backpressure is not just between one producer and one consumer, but is used in entire systems to keep </span><span class="No-Break"><span class="koboSpan" id="kobo.846.1">a balance.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.847.1">Using Project Reactor, developers can build reliable and stable applications in which data will be processed in an optimal manner and not overload the system. </span><span class="koboSpan" id="kobo.847.2">Each component only processes a set of data it can work with, therefore contributing to a </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">balanced system.</span></span></p>
<p><span class="koboSpan" id="kobo.849.1">As we’ll be working </span><a id="_idIndexMarker245"/><span class="koboSpan" id="kobo.850.1">on the project, we will see how these ideas become </span><a id="_idIndexMarker246"/><span class="koboSpan" id="kobo.851.1">translated into code and what they boil down to when you bring them </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">to practice.</span></span></p>
<p><span class="koboSpan" id="kobo.853.1">We are going to go through different strategies, take a look at logs and data, and observe backpressure, which keeps the system balanced. </span><span class="koboSpan" id="kobo.853.2">Remember, understa</span><a id="_idTextAnchor135"/><span class="koboSpan" id="kobo.854.1">nding backpressure is about making system</span><a id="_idTextAnchor136"/><span class="koboSpan" id="kobo.855.1">s that can handle data well and stay steady </span><span class="No-Break"><span class="koboSpan" id="kobo.856.1">and fast.</span></span></p>
<h2 id="_idParaDest-85"><a id="_idTextAnchor137"/><span class="koboSpan" id="kobo.857.1">Implementing backpressure in the project</span></h2>
<p><span class="koboSpan" id="kobo.858.1">Backpressure </span><a id="_idIndexMarker247"/><span class="koboSpan" id="kobo.859.1">is like a dance between data senders and receivers. </span><span class="koboSpan" id="kobo.859.2">It makes sure data doesn’t come too fast or slow. </span><span class="koboSpan" id="kobo.859.3">Our goal is to keep the flow of data smooth and prevent too much data from causing problems. </span><span class="koboSpan" id="kobo.859.4">Let’s look at how we can tell when receivers get too much data, what we can do about it, and see how </span><span class="No-Break"><span class="koboSpan" id="kobo.860.1">it works.</span></span></p>
<h3><span class="koboSpan" id="kobo.861.1">Detecting overwhelmed consumers</span></h3>
<p><span class="koboSpan" id="kobo.862.1">In a perfect situation, data moves </span><a id="_idIndexMarker248"/><span class="koboSpan" id="kobo.863.1">smoothly from senders to receivers. </span><span class="koboSpan" id="kobo.863.2">But sometimes, receivers get more than they can handle. </span><span class="koboSpan" id="kobo.863.3">We should detect such cases and implement solutions accordingly. </span><span class="koboSpan" id="kobo.863.4">There are a few signals, as shown here, that we can smell while we monitor the </span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">application performance:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.865.1">Observing latency and throughput</span></strong><span class="koboSpan" id="kobo.866.1">: We can tell something is wrong if it takes longer for data to process or if less data is processed </span><span class="No-Break"><span class="koboSpan" id="kobo.867.1">over time</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.868.1">Error rates and patterns</span></strong><span class="koboSpan" id="kobo.869.1">: A lot of </span><a id="_idTextAnchor138"/><span class="koboSpan" id="kobo.870.1">errors or certain types of errors can also show that there’s too </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">much data</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.872.1">Resource utilization</span></strong><span class="koboSpan" id="kobo.873.1">: If the consumer is using too much computer power or memory, it might be getting too </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">much data</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.875.1">Now that we know how to detect whether we need backpressure, in the next section, we will explore strategies for </span><span class="No-Break"><span class="koboSpan" id="kobo.876.1">handling it.</span></span></p>
<h3><span class="koboSpan" id="kobo.877.1">Strategies for handling backpressure</span></h3>
<p><span class="koboSpan" id="kobo.878.1">Once we know our consumer is struggling, how do we handle it? </span><span class="koboSpan" id="kobo.878.2">We can introduce some of the different approaches</span><a id="_idIndexMarker249"/> <span class="No-Break"><span class="koboSpan" id="kobo.879.1">mentioned here:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.880.1">Buffering</span></strong><span class="koboSpan" id="kobo.881.1">: Temporarily </span><a id="_idIndexMarker250"/><span class="koboSpan" id="kobo.882.1">holding data until the consumer is ready. </span><span class="koboSpan" id="kobo.882.2">This strategy works well if the overload is short-lived </span><span class="No-Break"><span class="koboSpan" id="kobo.883.1">or intermittent.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.884.1">Dropping data</span></strong><span class="koboSpan" id="kobo.885.1">: In some</span><a id="_idIndexMarker251"/><span class="koboSpan" id="kobo.886.1"> cases, particularly with real-time data, it might be acceptable to drop some data to keep up with </span><span class="No-Break"><span class="koboSpan" id="kobo.887.1">the flow.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.888.1">Batching</span></strong><span class="koboSpan" id="kobo.889.1">: Accumulating</span><a id="_idIndexMarker252"/><span class="koboSpan" id="kobo.890.1"> data into larger, less frequent batches can reduce overhead and allow consumers to </span><span class="No-Break"><span class="koboSpan" id="kobo.891.1">catch up.</span></span><a id="_idTextAnchor139"/></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.892.1">Rate limiting</span></strong><span class="koboSpan" id="kobo.893.1">: Limiting the</span><a id="_idIndexMarker253"/><span class="koboSpan" id="kobo.894.1"> rate at which the producer</span><a id="_idIndexMarker254"/><span class="koboSpan" id="kobo.895.1"> sends data to match the </span><span class="No-Break"><span class="koboSpan" id="kobo.896.1">consumer’s capacity.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.897.1">After learning the strategies for handling backpressure, we will implement backpressure in our application in the </span><span class="No-Break"><span class="koboSpan" id="kobo.898.1">following section.</span></span></p>
<h3><span class="koboSpan" id="kobo.899.1">Implementing backpressure in the project</span></h3>
<p><span class="koboSpan" id="kobo.900.1">Now, let’s</span><a id="_idIndexMarker255"/><span class="koboSpan" id="kobo.901.1"> enhance our Spring Boot project to include backpressure handling. </span><span class="koboSpan" id="kobo.901.2">We’ll focus on a typical scenario: a RESTful service where the consumer is a client application requesting a large stream of data. </span><span class="koboSpan" id="kobo.901.3">Let’s see how to implement it step </span><span class="No-Break"><span class="koboSpan" id="kobo.902.1">by step:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.903.1">Define a logger</span></strong><span class="koboSpan" id="kobo.904.1">: Set up a logging instance to observe how backpressure is affecting the </span><span class="No-Break"><span class="koboSpan" id="kobo.905.1">data flow:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.906.1">
    private static final Logger log = LoggerFactory.getLogger(UserController.class);</span></pre></li> <li><strong class="bold"><span class="koboSpan" id="kobo.907.1">Modify the endpoint</span></strong><span class="koboSpan" id="kobo.908.1">: Implement a version of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.909.1">getAllUsers</span></strong><span class="koboSpan" id="kobo.910.1"> endpoint that logs with </span><span class="No-Break"><span class="koboSpan" id="kobo.911.1">more detail:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.912.1">
@GetMapping
    public Flux&lt;User&gt; getAllUsers() {
        long start = System.currentTimeMillis();
        return userRepository.findAll()
                .doOnSubscribe(subscription -&gt; log.debug("Subscribed to User stream!"))
                .doOnNext(user -&gt; log.debug("Processed User: {} in {} ms", user.name(), System.currentTimeMillis() - start))
                .doOnComplete(() -&gt; log.info("Finished streaming users for getAllUsers in {} ms", System.currentTimeMillis() - start));
    }</span></pre></li> <li><strong class="bold"><span class="koboSpan" id="kobo.913.1">Introduce a new </span></strong><strong class="source-inline"><span class="koboSpan" id="kobo.914.1">/stream</span></strong><strong class="bold"><span class="koboSpan" id="kobo.915.1"> endpoint</span></strong><span class="koboSpan" id="kobo.916.1">: Implement a new endpoint that introduces</span><a id="_idIndexMarker256"/><span class="koboSpan" id="kobo.917.1"> backpressure through Project Reactor’s </span><span class="No-Break"><span class="koboSpan" id="kobo.918.1">built-in mechanisms:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.919.1">
   @GetMapping("/stream")
    public Flux&lt;User&gt; streamUsers() {
        long start = System.currentTimeMillis();
        return userRepository.findAll()
                .onBackpressureBuffer()  // Buffer strategy for back-pressure
                .doOnNext(user -&gt; log.debug("Processed User: {} in {} ms", user.name(), System.currentTimeMillis() - start))
                .doOnError(error -&gt; log.error("Error streaming users", error))
                .doOnComplete(() -&gt; log.info("Finished streaming users for streamUsers in {} ms", System.currentTimeMillis() - start));
    }</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.920.1">After introducing these changes in our project, we can do a small </span><span class="No-Break"><span class="koboSpan" id="kobo.921.1">load test.</span></span></p></li> <li><span class="koboSpan" id="kobo.922.1">First off, I have </span><a id="_idIndexMarker257"/><span class="koboSpan" id="kobo.923.1">used this bash script to create a load on </span><span class="No-Break"><span class="koboSpan" id="kobo.924.1">the system:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.925.1">
#!/bin/bash
# A simple script to create load by sending multiple concurrent requests to the server.
</span><span class="koboSpan" id="kobo.925.2"># Define the number of requests
REQUESTS=300
# The endpoint to test
URL="http://localhost:8080/users/stream"
for i in $(seq 1 $REQUESTS)
do
   curl "$URL" &amp;  # The ampersand at the end sends the request in the background, allowing for concurrency
done
wait # Wait for all background jobs to finish
echo "All requests sent."</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.926.1">This bash script will create 300 concurrent requests to the URL mentioned in the script. </span><span class="koboSpan" id="kobo.926.2">We can also use the same script for </span><strong class="source-inline"><span class="koboSpan" id="kobo.927.1">URL="http://localhost:8080/users"</span></strong><span class="koboSpan" id="kobo.928.1"> and make a comparison between response time and </span><span class="No-Break"><span class="koboSpan" id="kobo.929.1">system load.</span></span></p></li> </ol>
<p><span class="koboSpan" id="kobo.930.1">The logs from </span><a id="_idIndexMarker258"/><span class="koboSpan" id="kobo.931.1">using the cURL command to create a load on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.932.1">/getAllUsers</span></strong><span class="koboSpan" id="kobo.933.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.934.1">/streamUsers</span></strong><span class="koboSpan" id="kobo.935.1"> endpoints illustrate how the system performs under stress and give insights into how backpre</span><a id="_idTextAnchor140"/><span class="koboSpan" id="kobo.936.1">ssure and asynchronous processing are working. </span><span class="koboSpan" id="kobo.936.2">Let’s analyze the differences and what they </span><span class="No-Break"><span class="koboSpan" id="kobo.937.1">might indicate.</span></span></p>
<h4><span class="koboSpan" id="kobo.938.1">getAllUsers endpoint logs</span></h4>
<p><span class="koboSpan" id="kobo.939.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.940.1">/getAllUsers</span></strong><span class="koboSpan" id="kobo.941.1"> endpoint</span><a id="_idIndexMarker259"/><span class="koboSpan" id="kobo.942.1"> sends all user data very fast and doesn’t control the flow of data. </span><span class="koboSpan" id="kobo.942.2">At first, it’s quick (around 226 ms for each request). </span><span class="koboSpan" id="kobo.942.3">But when more people use it, each request takes longer – even twice as long. </span><span class="koboSpan" id="kobo.942.4">This happens when systems are very busy and don’t control incoming requests. </span><span class="koboSpan" id="kobo.942.5">Th</span><a id="_idTextAnchor141"/><span class="koboSpan" id="kobo.943.1">ey keep taking in more wor</span><a id="_idTextAnchor142"/><span class="koboSpan" id="kobo.944.1">k, but as they get busier, each task takes longer because the system is </span><span class="No-Break"><span class="koboSpan" id="kobo.945.1">too busy.</span></span></p>
<h4><span class="koboSpan" id="kobo.946.1">streamUsers endpoint logs</span></h4>
<p><span class="koboSpan" id="kobo.947.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.948.1">/streamUsers</span></strong><span class="koboSpan" id="kobo.949.1"> endpoint has a</span><a id="_idIndexMarker260"/><span class="koboSpan" id="kobo.950.1"> way to manage data called backpressure, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">.onBackpressureBuffer()</span></strong><span class="koboSpan" id="kobo.952.1">. </span><span class="koboSpan" id="kobo.952.2">At the start, it handles requests steadily. </span><span class="koboSpan" id="kobo.952.3">As it gets busier, the time for each request goes up – slower than the </span><strong class="source-inline"><span class="koboSpan" id="kobo.953.1">/getAllUsers</span></strong><span class="koboSpan" id="kobo.954.1"> endpoint, but it still increases. </span><span class="koboSpan" id="kobo.954.2">This slower increase is a sign that the system is controlling the data flow. </span><span class="koboSpan" id="kobo.954.3">It’s adjusting to handle what it can without getting </span><span class="No-Break"><span class="koboSpan" id="kobo.955.1">too overwhelmed.</span></span></p>
<h2 id="_idParaDest-86"><a id="_idTextAnchor143"/><span class="koboSpan" id="kobo.956.1">Observations and conclusions</span></h2>
<p><span class="koboSpan" id="kobo.957.1">Our local test tells us information even without performance monitoring tools. </span><span class="koboSpan" id="kobo.957.2">You can see the logs in your local server </span><a id="_idIndexMarker261"/><span class="koboSpan" id="kobo.958.1">for both endpoints. </span><span class="koboSpan" id="kobo.958.2">These are the observations of </span><span class="No-Break"><span class="koboSpan" id="kobo.959.1">the logs:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.960.1">Initial performance</span></strong><span class="koboSpan" id="kobo.961.1">: Both endpoints start with similar processing times for streaming users. </span><span class="koboSpan" id="kobo.961.2">This shows us both endpoints work pretty much the same under </span><span class="No-Break"><span class="koboSpan" id="kobo.962.1">normal conditions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.963.1">Performance under load</span></strong><span class="koboSpan" id="kobo.964.1">: When the load increases, the response time to finish streaming all users increases in both cases. </span><span class="koboSpan" id="kobo.964.2">However, the increase in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.965.1">/getAllUsers</span></strong><span class="koboSpan" id="kobo.966.1"> endpoint is more rapid. </span><span class="koboSpan" id="kobo.966.2">This shows as it becomes overwhelmed more quickly. </span><span class="koboSpan" id="kobo.966.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.967.1">/streamUsers</span></strong><span class="koboSpan" id="kobo.968.1"> endpoint shows a more gradual increase in time, suggesting the backpressure is allowing the system to handle the load </span><span class="No-Break"><span class="koboSpan" id="kobo.969.1">more gracefully.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.970.1">System stress</span></strong><span class="koboSpan" id="kobo.971.1">: This is </span><a id="_idIndexMarker262"/><span class="koboSpan" id="kobo.972.1">when we see the response times increasing under load. </span><span class="koboSpan" id="kobo.972.2">In real-world scenarios, this is an absolute signal that we need to apply performance optimizations such as improving database access, increasing server resources, or further refining </span><span class="No-Break"><span class="koboSpan" id="kobo.973.1">backpressure strategies.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.974.1">The logs give us a good idea of how the system works under a lot of stress and suggests backpressure helps in </span><strong class="source-inline"><span class="koboSpan" id="kobo.975.1">/streamUsers</span></strong><span class="koboSpan" id="kobo.976.1">. </span><span class="koboSpan" id="kobo.976.2">However, to really understand and improve the system, you’d need more detailed information. </span><span class="koboSpan" id="kobo.976.3">The slow increase in response times when busy is a common sign the system is struggling. </span><span class="koboSpan" id="kobo.976.4">This is when you might need to make big changes or fine-tune </span><span class="No-Break"><span class="koboSpan" id="kobo.977.1">the system.</span></span></p>
<p><span class="koboSpan" id="kobo.978.1">By carefully using and watching backpressure, we’ve made our project more stable and efficient. </span><span class="koboSpan" id="kobo.978.2">We’ve learned a lot about how data moves and is controlled. </span><span class="koboSpan" id="kobo.978.3">Remember, backpressure isn’t a simple fix. </span><span class="koboSpan" id="kobo.978.4">It needs careful thought and adjustments to meet the changing needs of applications. </span><span class="koboSpan" id="kobo.978.5">But with what we’ve learned, we’re ready to make sure your applications can handle </span><span class="No-Break"><span class="koboSpan" id="kobo.979.1">data well.</span></span></p>
<h1 id="_idParaDest-87"><a id="_idTextAnchor144"/><span class="koboSpan" id="kobo.980.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.981.1">In </span><a href="B18400_03.xhtml#_idTextAnchor064"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.982.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.983.1">, we have dived into the paradigm shift towards reactive programming with Spring Boot 3.0. </span><span class="koboSpan" id="kobo.983.2">From developing a fundamental understanding of the heart and core of reactive programming in moving ahead to prove the importance of these paradigms to make applications more responsive, efficient, </span><span class="No-Break"><span class="koboSpan" id="kobo.984.1">and robust.</span></span></p>
<p><span class="koboSpan" id="kobo.985.1">Here is what we </span><span class="No-Break"><span class="koboSpan" id="kobo.986.1">have covered:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.987.1">Transitioning to reactive programming</span></strong><span class="koboSpan" id="kobo.988.1">: We contrasted reactive and traditional programming by shifting to a non-blocking model that solves asynchronously for faster and more </span><span class="No-Break"><span class="koboSpan" id="kobo.989.1">responsive applications.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.990.1">Building reactive REST APIs</span></strong><span class="koboSpan" id="kobo.991.1">: We have covered the essentials of building a reactive REST API, understanding asynchronous systems, and the concept of backpressure for executing data </span><span class="No-Break"><span class="koboSpan" id="kobo.992.1">flow effectively.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.993.1">Setting up for success</span></strong><span class="koboSpan" id="kobo.994.1">: The chapter gave a detailed outline of how to set up your development environment, from the installation of Java 17 and IntelliJ IDEA all the way through to how to create the reactive data model, how to implement the repository layer, and how to build a reactive REST controller using Spring </span><span class="No-Break"><span class="koboSpan" id="kobo.995.1">Boot 3.0.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.996.1">Further down the line in </span><a href="B18400_04.xhtml#_idTextAnchor146"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.997.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.998.1">, we’ll manage data with Spring Data, where I will explore both SQL as well as NoSQL databases. </span><span class="koboSpan" id="kobo.998.2">We also go into migration as well as consistency of the data, ensuring your applications are still hardy and running smoothly. </span><span class="koboSpan" id="kobo.998.3">The following chapter will include the </span><em class="italic"><span class="koboSpan" id="kobo.999.1">Using Spring Data with SQL databases</span></em><span class="koboSpan" id="kobo.1000.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1001.1">NoSQL databases in Spring Boot</span></em><span class="koboSpan" id="kobo.1002.1">, and </span><em class="italic"><span class="koboSpan" id="kobo.1003.1">Data migration and consistency</span></em><span class="koboSpan" id="kobo.1004.1"> sections. </span><span class="koboSpan" id="kobo.1004.2">The next chapter will dive deeper into issues concerning data management inside of the Spring ecosystem and prepare you for the challenges of </span><span class="No-Break"><span class="koboSpan" id="kobo.1005.1">various databases.</span></span></p>
<p><span class="koboSpan" id="kobo.1006.1">As we transition from just understanding any reactive paradigm in the development of software to actually mastering data management with the power of Spring Boot 3.0 simplifying and enhancing these processes, do keep what you have learned in this chapter in mind. </span><span class="koboSpan" id="kobo.1006.2">Stay tuned for more insightful discussions and practical guides as laid out in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1">next chapter.</span></span></p>
</div>


<div class="Content" id="_idContainer033">
<h1 id="_idParaDest-88" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor145"/><span class="koboSpan" id="kobo.1.1">Part 3: Data Management, Testing, and Security</span></h1>
<p><span class="koboSpan" id="kobo.2.1">This part addresses critical components of software development: data management, testing, and security. </span><span class="koboSpan" id="kobo.2.2">Starting with </span><a href="B18400_04.xhtml#_idTextAnchor146"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.3.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.4.1">, you’ll get to grips with Spring Data, exploring SQL, NoSQL, and caching techniques. </span><a href="B18400_05.xhtml#_idTextAnchor179"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.5.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.6.1"> focuses on securing your Spring Boot applications, ensuring they are robust against unauthorized access. </span><span class="koboSpan" id="kobo.6.2">Finally, </span><a href="B18400_06.xhtml#_idTextAnchor192"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.7.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.8.1"> introduces advanced testing strategies that help validate and improve the reliability of your software. </span><span class="koboSpan" id="kobo.8.2">This part is crucial for creating well-rounded, secure, and efficiently </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">managed applications.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">following chapters:</span></span></p>
<ul>
<li><a href="B18400_04.xhtml#_idTextAnchor146"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 4</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Spring Data: SQL, NoSQL, Cache Abstraction, and Batch Processing</span></em></li>
<li><a href="B18400_05.xhtml#_idTextAnchor179"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Securing Your Spring Boot Applications</span></em></li>
<li><a href="B18400_06.xhtml#_idTextAnchor192"><em class="italic"><span class="koboSpan" id="kobo.18.1">Chapter 6</span></em></a><span class="koboSpan" id="kobo.19.1">, </span><em class="italic"><span class="koboSpan" id="kobo.20.1">Advanced Testing Strategies</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer034">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer035">
</div>
</div>
</body></html>