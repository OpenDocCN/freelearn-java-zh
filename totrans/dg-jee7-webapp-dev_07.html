<html><head></head><body><div class="book" title="Chapter&#xA0;7.&#xA0;Progressive JavaScript Frameworks and Modules"><div class="book" id="aid-1VSLM2"><div class="book"><div class="book"><h1 class="title"><a id="ch07" class="calibre1"/>Chapter 7. Progressive JavaScript Frameworks and Modules</h1></div></div></div><div class="blockquote"><table border="0" cellspacing="0" cellpadding="0" class="blockquote1" summary="Block quote"><tr class="calibre12"><td valign="top" class="calibre13"> </td><td valign="top" class="calibre13"><p class="calibre14"><span><em class="calibre15">"If you're a runner and you run in a race, you might lose. If you don't run, you're guaranteed to lose."</em></span></p></td><td valign="top" class="calibre13"> </td></tr><tr class="calibre12"><td valign="top" class="calibre13"> </td><td colspan="2" valign="top" class="calibre16">--<span><span><em class="calibre15">Reverend Jesse Jackson</em></span></span></td></tr></table></div><p class="calibre7">In the contemporary way of building a website, there is no escape from the language of JavaScript because it is a de facto standard of modern web browsers. JavaScript is either a pleasure or major inconvenience for developers. If you write or intend to build digital web applications for a customer, there is almost no escape from the knowledge of HTML5, CSS, and JavaScript. Fortunately, you do not need to be an expert in JavaScript in order to be productive because there are many frameworks that help you and you can leverage these ideas. Essentially, where JavaScript is concerned, you need to know and catch up with the modern digital best practices.</p><p class="calibre7">While JavaScript is a very relevant topic for the digital websites, this chapter cannot teach you everything that you need to know. Instead, I will endeavor to point you in the correct direction and provide you with an oversight, and you should definitely extend your knowledge with further resources.</p><p class="calibre7">We will start with the fundamental JavaScript programming and an idea of the language. We will then dive straight into programming with the JavaScript objects. Afterwards, we will look at a few of the major frameworks in the world of JavaScript.</p><div class="book" title="JavaScript essentials"><div class="book"><div class="book"><div class="book"><h1 class="title"><a id="ch07lvl1sec60" class="calibre1"/>JavaScript essentials</h1></div></div></div><p class="calibre7">JavaScript<a id="id744" class="calibre1"/> is a respected programming language by itself. It has a standard called <a id="id745" class="calibre1"/>ECMAScript (<a class="calibre1" href="http://www.ecmascript.org/">http://www.ecmascript.org/</a>) and is accepted as a ratified standard by the W3C. The language is a part of the trinity of the fundamental standard web technologies: HTML5, CSS, and JavaScript. That said, what is JavaScript? It is a prototype dynamically typed scripting language with object types and enclosed scoped function blocks. In JavaScript, every type is strictly an object. The JavaScript support functions as a first-class citizen and rules on a and supports the declaration of functions that are assigned to an associated lexically scoped variable, property, or entity. JavaScript has a support for strings, integers, floating point numbers, and prototypes. JavaScript is essentially a property and prototypical language. It has a lexical support of object-based programming through scopes and closures. The widespread use of the language does not explicitly have reserved keywords and it structures out of the support object-oriented inheritance. Through clever<a id="id746" class="calibre1"/> programming and prototypes, developers can replicate the object class inheritance.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip30" class="calibre1"/>Tip</h3><p class="calibre7">
<span class="strong"><strong class="calibre8">What is the base level standard JavaScript that I should learn?</strong></span>
</p><p class="calibre7">This chapter looks at JavaScript 1.5, which is ECMA Script Edition 3. This version of the language works in all the major web browsers: Firefox, Chrome, Safari, and Internet Explorer. The upcoming <a id="id747" class="calibre1"/>JavaScript ECMA 6 will have support for object-oriented programming (<a class="calibre1" href="http://es6-features.org/">http://es6-features.org/</a>).</p></div><p class="calibre7">JavaScript is a popular language on the client side of a normal Java web application. You should be aware that JavaScript can also operate on the server side through an implementation such as Node.js or Nashorn. These topics are, however, out of the scope for this chapter.</p><div class="book" title="Creating objects"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec74" class="calibre1"/>Creating objects</h2></div></div></div><p class="calibre7">Let's wade into <a id="id748" class="calibre1"/>JavaScript on the client side. What is JavaScript programming with an object that you, as a digital developer, can write? Here is one answer—an HTML5 web page with an embedded script that creates a contact detail, as follows:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;body&gt;
    &lt;script&gt; 
      var contact = new Object();
      contact.gender = 'female';
      contact.firstName = 'Anne';
      contact.lastName = 'Jackson';
      contact.age = 28;
      contact.occupation = 'Software Developer'
      contact.getFullName = function() { 
        return contact.firstName + " " + contact.lastName;
      }
      console.log(contact); 
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></div><p class="calibre7">This simple program creates a contact detail with properties. The JavaScript properties may be integer, numerical numbers: number, or Boolean or String types. A JavaScript object may also define the methods as in the case of <code class="email">getFullName()</code>. For a stock blue-collar Classic Java developer, this syntax of defining a property from a function looks peculiar; however, the functions are first-class citizens of many languages. The JavaScript functions that define an object are called methods.</p><p class="calibre7">In the modern<a id="id749" class="calibre1"/> JavaScript writing practices, you will learn to recognize the functions written similarly in this vein, which is the reverse of the Java notation. Here is a third order polynomial function from mathematics in JavaScript:</p><div class="informalexample"><pre class="programlisting">var polynomial = function(x1,x2,x3) {
   return (2 * x1 * x1 * x1) - ( 3 * x2 * x2 )
       + 4 * x3 + 5;
}

console.log("The answer is: " + polynomial(1.5,2.0,3.75) );</pre></div><p class="calibre7">This variable defines a JavaScript function called <code class="email">polynomial()</code>, which accepts three number type arguments. It also returns a Number type. JavaScript is a dynamically typed language and thus, there is no static typing.</p><div class="book" title="The console log"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch07lvl3sec36" class="calibre1"/>The console log</h3></div></div></div><p class="calibre7">The console log<a id="id750" class="calibre1"/> is a standard object that is a part of the modern web browsers: Firefox, Chrome, Opera, Safari, and Internet Explorer. It is usually available from the menu that is reserved for the debugging. Formerly, the console object was not completely supported for browsers.</p><p class="calibre7">Thankfully, we will not be writing the following conditional code in 2016:</p><div class="informalexample"><pre class="programlisting">if ( window.console &amp;&amp; window.console.log ) {
  // console is available
}</pre></div><p class="calibre7">Let's move to the object constructors. Allow me to provide a final note of advice about writing a console log: use it only in the development code. Developers have been forgotten to remove the console log output from production code, which eventually led to crash in a certain web browser, ruining the digital customer's journey. Take advantage of a JavaScript framework such as jQuery, RequireJS, or Dojo, which abstracts away the console log in a library function.</p><p class="calibre7">If you haven't eventually done so, I strongly recommend that you download the Chrome Developer and Web Developer tools for either the Google Chrome or Firefox web browsers.</p></div></div><div class="book" title="Writing JavaScript object constructors"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec75" class="calibre1"/>Writing JavaScript object constructors</h2></div></div></div><p class="calibre7">The JavaScript language <a id="id751" class="calibre1"/>consists of a limited variety of primitive types<a id="id752" class="calibre1"/> in comparison. Loosely, these primitives are String, Number, Boolean, Array, and Object. These can be created using native JavaScript object constructors: <code class="email">String()</code>, <code class="email">Number()</code>, <code class="email">Boolean()</code>, <code class="email">Array()</code>, and <code class="email">Object()</code>.</p><p class="calibre7">Here is an illustration of how to use these native constructors:</p><div class="informalexample"><pre class="programlisting">var message = new String('Digital');
var statusFlag = new Boolean(true);
var itemPrice= new Number(1199.95);
var names = new Array();
names[0] = 'Emkala';
names[1] = 'Sharon';
names[2] = 'Timothy';
console.log(message);  // Digital
console.log(statusFlag); // true
console.log(itemPrice); // 1199.95
console.log(names); // Object (Surprise ;-)</pre></div><p class="calibre7">Obviously, it is rare to assign the String, Boolean, and Number types from the native constructors. However, note the use of the Array native constructor. In JavaScript, arrays are treated as objects. They are enumerated from the index zero like most computer languages. To find the size of the array, invoke the implicit length property (<code class="email">name.length</code>).</p><p class="calibre7">To establish the JavaScript essentials, we can finesse the earlier example and take advantage of the ability of the functions to introduce their own scope, as follows:</p><div class="informalexample"><pre class="programlisting">var ContactDetail = function(
  gender, firstName, lastName, age, occupation ) 
{
  this.gender = gender;
  this.firstName = firstName;
  this.lastName = lastName;
  this.age = age;
  this.occupation = occupation
  this.getFullName = function() { 
    return contact.firstName + " " + contact.lastName;
  }
   return this;
}

var anne = new ContactDetail(
  'female', 'Anne', 'Jackson', 28, 'Software Developer');

console.log(anne.female); 
console.log(anne.firstName);
console.log(anne.lastName);</pre></div><p class="calibre7">There are a few things<a id="id753" class="calibre1"/> going on with this second example. First, we <a id="id754" class="calibre1"/>will assign a function type to the <code class="email">ContactDetail</code> variable. This function is actually a constructor for a new object type named by the variable name. In this constructor, there is a special <code class="email">this</code> reference variable that is associated with the function scope at this level. When the reference is returned, it becomes the object instance. In the function, we are allowed to define the other functions that are associated with the object, such as <code class="email">getFullName()</code>. This is how object-based programming works in modern JavaScript.</p><p class="calibre7">We will use this new object type constructor to declare a contact detail in the variable called <code class="email">anne</code>. For Java regular programmers, this syntax might look very weird at first, but this JavaScript is completely different to Java and is seriously accepted as a programming language in its own right. A scope has practical uses in defining the object modules, which I showed in the first chapter of this book.</p></div><div class="book" title="The JavaScript property notations"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec76" class="calibre1"/>The JavaScript property notations</h2></div></div></div><p class="calibre7">There are two fundamental<a id="id755" class="calibre1"/> ways to access the JavaScript properties in a type. The<a id="id756" class="calibre1"/> first way is pretty familiar to all Java programmers. It is the dot notation. The second way is called the bracket notation, which looks like a map or dictionary association in the languages other than Java. The bracket notation is equivalent to the dot notation and has its uses.</p><p class="calibre7">Examine the following code, which demonstrates another way to create a JavaScript object. Remember that JavaScript is a dynamically typed language.</p><div class="informalexample"><pre class="programlisting">var product = { 
  'title': 'Java EE Developer Handbook', 
  'price': 38.75,
  'author': 'Peter A. Pilgrim'
};

console.log( product.name );
console.log( product['name']);

product.price = 34.50;
product['price'] = 34.50;

product.subject = 'Enterprise Java';
console.log(product['price']);

product.pi = function() { return 3.14159; };
console.log(product.pi());</pre></div><p class="calibre7">Did you spot the introduction of a new property to the object called subject and also a method function? Of course, I am promoting the title of my first technical book here, but that is beside the<a id="id757" class="calibre1"/> point. JavaScript allows programmers to be<a id="id758" class="calibre1"/> quite flexible with object internals and properties. The declaration of the object product should ring some bells because it is remarkable how similar this declaration is to the de facto <a id="id759" class="calibre1"/>
<span class="strong"><strong class="calibre8">JavaScript Object Notation</strong></span> (<span class="strong"><strong class="calibre8">JSON</strong></span>) standard. The open curly bracket notation is a way to define an object with the property key and values.</p></div><div class="book" title="Dealing with a null and undefined reference pointer"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec77" class="calibre1"/>Dealing with a null and undefined reference pointer</h2></div></div></div><p class="calibre7">Professor Charles Antony Richard Hoare (Tony Hoare) developed the classic computer science algorithm called <a id="id760" class="calibre1"/>
<span class="strong"><strong class="calibre8">QuickSort</strong></span>, but he also regretted when he said that it was also the <a id="id761" class="calibre1"/>invention of a billion dollar mistake: the <a id="id762" class="calibre1"/>dreaded null reference pointer. Personally, I would have thought that someone else would have stumbled on such an obvious workaround and quick fit for a general problem.</p><p class="calibre7">JavaScript deals with a null reference as a sentinel and also features undefined. The following JavaScript extract attempts to print the null reference in a <code class="email">test</code> object:</p><div class="informalexample"><pre class="programlisting">var testObject = { item: null };
console.log(testObject.item);   // prints out 'null'.</pre></div><p class="calibre7">The null value tells you that the object type thing is defined but is not yet available. The undefined value informs the developer that something is missing. Remember that JavaScript is a dynamic language and therefore, it is entirely possible to navigate across the object graph and not find the object type that your team thought was placed there.</p><p class="calibre7">In JavaScript, if you need to test for a null value, you must use the triple equal operator (<code class="email">===</code>), as follows:</p><div class="informalexample"><pre class="programlisting">var testbject = null;
console.log(testObject == null);   // Wrong!
console.log(testObject === null);  // Correct.</pre></div><p class="calibre7">Writing about equivalence, how do we know when two objects are equivalent in JavaScript?</p></div><div class="book" title="The JavaScript truth"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec78" class="calibre1"/>The JavaScript truth</h2></div></div></div><p class="calibre7">In JavaScript, the conditional <a id="id763" class="calibre1"/>expression is false, if it matches one of the Set of<a id="id764" class="calibre1"/> Empty Values: <code class="email">false</code>, <code class="email">0</code>, <code class="email">-0</code>, <code class="email">null</code>, empty string (<code class="email">''</code>), <code class="email">NaN</code>, or <code class="email">undefined</code>. A value evaluates to the JavaScript truth in a conditional expression, if and only if the value does not match any of the elements in the Empty Values set. Every other value that does match any of the elements is an empty value set that evaluates to JavaScript true.</p><p class="calibre7">The following JavaScript all evaluates to false:</p><div class="informalexample"><pre class="programlisting">console.log(Boolean(0)); 
console.log(Boolean(-0)); 
console.log(Boolean('')); 
console.log(Boolean(null)); 
console.log(Boolean(false)); 
console.log(Boolean(undefined)); 
console.log(Boolean(Number.NAN));</pre></div><p class="calibre7">Here, we use the <code class="email">Boolean</code> constructor with the new keyword to instantiate a type directly. These statements evaluate to true:</p><div class="informalexample"><pre class="programlisting">console.log(Boolean(1)); 
console.log(Boolean(-1)); 
console.log(Boolean('runner')); 
console.log(Boolean(true)); 
console.log(Boolean(1234567); 
console.log(Boolean(new Array()); </pre></div></div><div class="book" title="Runtime type information"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec79" class="calibre1"/>Runtime type information</h2></div></div></div><p class="calibre7">In order to find out the<a id="id765" class="calibre1"/> runtime information of the JavaScript values, you<a id="id766" class="calibre1"/> can apply the <code class="email">typeof</code> operator. This permits the programmer to write a specialist code in order to check the arguments to a function. Here is an example of the <code class="email">typeof</code> interrogation:</p><div class="informalexample"><pre class="programlisting">console.log(typeof true); // Prints 'boolean'.
console.log(typeof 'magic'); // Prints 'string'. 
console.log(typeof 3.141596527); // Prints 'number'. </pre></div><p class="calibre7">JavaScript has some other quirks, if you use the native constructors:</p><div class="informalexample"><pre class="programlisting">console.log(typeof new Boolean(true)); // Prints 'object'.
console.log(typeof new String('MAGIC')); // Prints 'object'. 
console.log(typeof new Number(3.141596527)); // Prints 'object'. </pre></div><p class="calibre7">This is surprising! Here is the evidence where you can see why digital web developers are driven mad because of the inconsistency in the language, standards, and implementations of these standards.</p></div><div class="book" title="The JavaScript functions"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec80" class="calibre1"/>The JavaScript functions</h2></div></div></div><p class="calibre7">In modern JavaScript, you will see a<a id="id767" class="calibre1"/> lot of quasi-functional programming in comparison to Classic<a id="id768" class="calibre1"/> Java (Java before version 8 and Lambda expressions). The functions are the first-class citizens. You can supply functions as parameters to the functions. You can also return a function type from a function. How does passing a function as a parameter to a method help? In JavaScript, you can write anonymous functions without a name. You can take advantage of passing around the blocks of code to the library functions. This style is the basis of functional programming. Instead of coding imperatively, we can write concise code and inline, which is almost declarative.</p><p class="calibre7">Here is an anonymous function example:</p><div class="informalexample"><pre class="programlisting">var outside = function (yourIn) {
  yourIn(); // Invokes the supplied function.
}

outside( function () { 
  console.log('inside'); 
});</pre></div><p class="calibre7">The <code class="email">outside()</code> function accepts an anonymous <code class="email">yourIn()</code> function, as a single argument. Now inside the <code class="email">outside()</code> function, it immediately invokes the argument <code class="email">yourIn</code>, which is the supplied anonymously defined function. This is a powerful technique.</p><p class="calibre7">JavaScript has one other trick that lends itself to the declaration of modules, especially when it is combined with the functional object scopes. It is possible to define a function and invoke it inline and directly. Consider this example:</p><div class="informalexample"><pre class="programlisting">var initializeGui = function() { 
  console.log("start up the client side GUI...");
} ();</pre></div><p class="calibre7">In the preceding code, we defined a variable called <code class="email">initializeGui</code> and assigned it an anonymous function. The key to the definition is the final round brackets at the end of the method statement. JavaScript immediately invokes the function at the precise location where the definition is parsed. Here, we are pretending to initialize a client side GUI by writing to the console.</p><p class="calibre7">You can also pass the parameters to an inlined function, as follows:</p><div class="informalexample"><pre class="programlisting">var initializeGui2 = function(msg,value) { 
  console.log("start up GUI..."+msg+","+value);
} ( 'Spirits in the Sky', 1973 );</pre></div><p class="calibre7">This preceding code demonstrates that the parameters are passed from the outside global scope to the invoked function.</p><p class="calibre7">In fact, we can get rid of the variable <code class="email">initializeGui2</code> and create a self-invocation anonymous function:</p><div class="informalexample"><pre class="programlisting">(function(msg,value) { 
  console.log("start up GUI..."+msg+","+value);
})( 'Spirits in the Sky', 1973 );</pre></div><p class="calibre7">This kind of code is fairly typical and seen in the popular JavaScript frameworks and applications.</p><p class="calibre7">In the function definition, we will take advantage of the JavaScript scope. See <a class="calibre1" title="Chapter 1. Digital Java EE 7" href="part0015.xhtml#aid-E9OE1">Chapter 1</a>, <span class="strong"><em class="calibre9">Digital Java EE 7</em></span> for an earlier explanation on the module namespace technique.</p><p class="calibre7">I think I will stop here. There is <a id="id769" class="calibre1"/>a tremendous variety and a deeper knowledge track to the modern <a id="id770" class="calibre1"/>JavaScript programming than I can write about here. I recommend that you invest in other introductory programming books such as Douglas Crockford's excellent <span class="strong"><em class="calibre9">JavaScript: The Good Parts</em></span> and also Packt Publishing's <span class="strong"><em class="calibre9">Object-Oriented JavaScript</em></span> by authors <span class="strong"><em class="calibre9">Stoyan Stefanov</em></span> and <span class="strong"><em class="calibre9">Kumar Chetan Sharma</em></span>.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip31" class="calibre1"/>Tip</h3><p class="calibre7">Steve Kwan has written an excellent example of the Module Pattern in JavaScript; you might want to investigate his best practices<a id="id771" class="calibre1"/> at <a class="calibre1" href="https://github.com/stevekwan/best-practices/blob/master/javascript/best-practices.md">https://github.com/stevekwan/best-practices/blob/master/javascript/best-practices.md</a>.</p></div><p class="calibre7">Let's look at a very important programming framework for JavaScript, jQuery.</p></div></div></div>
<div class="book" title="Introducing the jQuery framework" id="aid-20R681"><div class="book"><div class="book"><div class="book"><h1 class="title"><a id="ch07lvl1sec61" class="calibre1"/>Introducing the jQuery framework</h1></div></div></div><p class="calibre7">jQuery (<a class="calibre1" href="http://learn.jquery.com/">http://learn.jquery.com/</a>) is <a id="id772" class="calibre1"/>a cross-platform JavaScript framework for client-side web application development. It is a survivor from the original AJAX craze from 2004 and 2005, where it was and still is competing with <a id="id773" class="calibre1"/>Prototype (<a class="calibre1" href="http://prototypejs.org/">http://prototypejs.org/</a>) and <a id="id774" class="calibre1"/>Scriptaculous (<a class="calibre1" href="http://script.aculo.us/">http://script.aculo.us/</a>). jQuery has been called the equivalent of what the Java Collections framework did for the Java programming language. According to Wikipedia, jQuery is 70 percent of the 10,000 most visited websites in the world. In other words, it is the first JavaScript framework that really caught the attention of the developers and caused them to rethink the furthest capabilities of the underlying language. jQuery is free and provided under the MIT open source license.</p><p class="calibre7">jQuery was built to make the manipulation of the<a id="id775" class="calibre1"/> <span class="strong"><strong class="calibre8">Document Object Model</strong></span> (<span class="strong"><strong class="calibre8">DOM</strong></span>) easier and apply CSS to the HTML elements. In jQuery, there is a secret sauce called Sizzle, which is a selector engine that traverses over the DOM. The engine combines the flexibility of selection, a respect for functional programming, and callback to allow an engineer to comfortably write JavaScript that leverages the underlying HTML and CSS elements in a web page.</p><div class="book" title="Including jQuery in a JSF application"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec81" class="calibre1"/>Including jQuery in a JSF application</h2></div></div></div><p class="calibre7">You can include the <a id="id776" class="calibre1"/>jQuery JavaScript library in your page view. In JSF, the<a id="id777" class="calibre1"/> folder would be under the <code class="email">src/main/webapp/resources/</code> folder:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html ... &gt;
  ...
  &lt;script src="#{request.contextPath}
    /resources/javascripts/jquery-2.1.0.min.js"&gt;&lt;/script&gt;
  &lt;script src="#{request.contextPath}
    /resources/app/main.js"&gt;&lt;/script&gt;
  ...
&lt;/html&gt;</pre></div><p class="calibre7">We will use the expression language, <code class="email">#{request.contextPath}</code>, in order to provide location independence. Good digital developers will use the minified JavaScript for performance and to improve their business SEO chances!</p></div><div class="book" title="jQuery ready function callbacks"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec82" class="calibre1"/>jQuery ready function callbacks</h2></div></div></div><p class="calibre7">The jQuery framework<a id="id778" class="calibre1"/> repurposes the <code class="email">$</code> symbol in the global head scope <a id="id779" class="calibre1"/>exclusively for our use. (The dollar symbol is an alias for the jQuery object instance and it is obviously short.) Through clever programming, which is out of the scope of this book, jQuery accepts a parameter that represents an HTML DOM object. A jQuery entry point is the <code class="email">ready()</code> method, which accepts a function object type argument.</p><p class="calibre7">This argument can be an anonymous or a named function as we will demonstrate here to initialize a fictional website:</p><div class="informalexample"><pre class="programlisting">$( document ).ready(function() {
    // Write your code here.
    console.log("this page view is starting up!");
   MyNamespace.MyModule1.init(); 
   MyNamespace.MyModule2.init(); 
});</pre></div><p class="calibre7">When jQuery invokes the anonymous function, the framework can make certain guarantees that the browser has been initialized, the images have all been downloaded, the event stack is set to go, and the other proprietary features of certain web clients have been finished. In the preceding example, we will initialize the other JavaScript libraries in the module pattern and log to the console:</p><div class="informalexample"><pre class="programlisting">console.log( $ === jQuery );  // true</pre></div><p class="calibre7">The <code class="email">$( document )</code> expression can be generalized to the following:</p><div class="informalexample"><pre class="programlisting">$( &lt;expression-selector&gt; )</pre></div><p class="calibre7">The expression-selector stanza can be a CSS selector expression or an HTML DOM element. Here are some example selectors:</p><div class="informalexample"><pre class="programlisting">var divs1 = $('div');
var divs2 = jQuery('div');
var win1  = $( window );

var redBtn  = $( "#redButton" );
var offerSubmitBtn = $( "#offerSubmitBtn" );

var navigationControl  = $( ".navControls" );
var footerArea = $( ".footerArea  div" );</pre></div><p class="calibre7">The element selectors that start with a hash character (<code class="email">#</code>) are equivalent to the DOM HTML API call, <code class="email">getElementById()</code>, which means that they might return the element or not. The <code class="email">#offerSubmitBtn</code> selector retrieves an element that is specified with the ID attribute:</p><div class="informalexample"><pre class="programlisting">&lt;h:commandButton value="Apply Now!"
   id="offerSubmitButton"
   action="#{longTermProvider.applyForCredit}"/&gt;</pre></div><p class="calibre7">jQuery offers very<a id="id780" class="calibre1"/> powerful class selectors, which retrieve a collection <a id="id781" class="calibre1"/>of the HTML elements. The <code class="email">$('div')</code> selector retrieves all of the HTML <code class="email">div</code> elements in the document and page views. Likewise, the <code class="email">$('div')</code> class selector retrieves all the HTML anchor elements. As some might say, knowledge is power! We can combine the CSS class selectors to turn down and fine tune the elements that we want to manipulate. The <code class="email">$( ".footerArea  div" )</code> selector restricts the HTML <code class="email">div</code> elements in the footer area.</p></div><div class="book" title="Acting on the jQuery selectors"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec83" class="calibre1"/>Acting on the jQuery selectors</h2></div></div></div><p class="calibre7">jQuery allows a digital<a id="id782" class="calibre1"/> developer to access the HTML DOM elements on the web page. So how do you act on these powerful selectors? The API features many callback methods that accept a function type parameter. Let's take a look at such a method called <code class="email">click()</code>, which fires an event when the particular HTML element is pressed and depressed.</p><p class="calibre7">Here is the code for the red button that we saw earlier:</p><div class="informalexample"><pre class="programlisting">$( document ).ready(function() { 
  $( "#redButton" ).click(function( event ) {
      alert( "You pressed the red button!" );
  });
});</pre></div><p class="calibre7">When the user clicks on the red button, jQuery handles the DOM event and invokes the anonymous function that is associated to the jQuery matched selector. The user sees the alert dialog. It does not stop there. Here is some code to make the red button fade out of the view:</p><div class="informalexample"><pre class="programlisting">$( document ).ready(function() { 
  $( "#redButton" ).click(function( event ) {
    $( "#redButton").animate(
      {
        'opacity':'0.0'
      }, 250);
  });
}</pre></div><p class="calibre7">This is an example of the <a id="id783" class="calibre1"/>jQuery animation capability. The <code class="email">animate()</code> method accepts two arguments: the key and value for the animation properties and a duration time. Here we will specify the opacity of the button but we can set other properties such as the width or height of the element, and even three-dimensional transformations of your target web clients will be served against the CSS3 confirmed web browsers only. The duration time is measured in milliseconds.</p><p class="calibre7">If this was a code that is designed to be reused and I wanted a clean modular code for a team of interface developers, here is how I would tidy up the code and avoid embarrassment:</p><div class="informalexample"><pre class="programlisting">var DigitalJavaEE7 = DigitalJavaEE7 || {};

DigitalJavaEE7.RedModule = function($) {
  var init = function() {
    $( document ).ready(function() { 
      var redButton = $( "#redButton" )
      redButton.click(function( event ) {
        redButton.animate({'opacity':'0.0'}, 250);
      });
    }
  };

  var performOtherOWork = function() {
    console.log("other animation stuff.")
    /* ... */
  };

  var oPublic = {
      init: init,
      performOtherWork: performOtherWork
  };

  return oPublic;
}(jQuery);</pre></div><p class="calibre7">Using the popular module<a id="id784" class="calibre1"/> pattern, I pushed the initialized code for jQuery into a <code class="email">RedModule</code> module with the <code class="email">DigitalJavaEE7</code> namespace. In the <code class="email">init()</code> function of this module, I optimized the CSS selector in one call to a <code class="email">redButton</code> variable. It turns out that jQuery works hard at interpreting the CSS selector to a group of potential HTML DOM elements. So, we will avoid asking the framework to do this search of the DOM twice. Code is essentially the same, but more concise and still comprehensible.</p><div class="book" title="Manipulating the DOM elements"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch07lvl3sec37" class="calibre1"/>Manipulating the DOM elements</h3></div></div></div><p class="calibre7">In the previous section, you<a id="id785" class="calibre1"/> learned how to select the DOM elements with jQuery. Group elements can be retrieved with the jQuery selectors. Using the manipulation part of the API, we will add and remove the class styles to the elements, insert the elements before and after a component, and replace the content of the elements. There are lots of calls to learn; we will review a small set here.</p><p class="calibre7">In order to demonstrate how we can manipulate the DOM elements, let's define two HTML button elements. We will apply a style of the red color and the other will be blue. Here is the code:</p><div class="informalexample"><pre class="programlisting">$( document ).ready(function() { 
  var redButton = $( "#redButton" )
  var blueButton = $( "#blueButton" )
  var textArea = $( "#messageArea" )
  redButton.click(function( event ) {
    textArea.addClass('.text-danger');
    textArea.html('Danger Will, watch out!');
  });

  blueButton.click(function( event ) {
    textArea.removeClass('.text-danger');
    textArea.html('Everthing is fine now.');
  });
}</pre></div><p class="calibre7">We will set up the anonymous functions to add a Bootstrap class, text-danger, to <code class="email">messageArea</code>, which you can rightly assume is a reserved <code class="email">div</code> element for a textual output. The <code class="email">addClass()</code> method appends a style class to the matching elements. We will add the style to the text area with the callback for the <code class="email">redButton</code> element. The second anonymous function for <code class="email">blueButton</code> deletes the class from the element. Both the functions will change the message in the display area.</p><p class="calibre7">The <code class="email">html()</code> method is<a id="id786" class="calibre1"/> dual purpose. It is overloaded in the jQuery framework. When <code class="email">html()</code> is called with a single argument, it replaces the contents of the element. We will use the <code class="email">html()</code> method to change the text in the message area. If the method is called with no arguments, it returns the element's content. There are several API methods in jQuery that have this duality such as <code class="email">attr()</code> and <code class="email">val()</code>. They are described as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The <code class="email">attr()</code> method either retrieves or manipulates the attributes for the DOM elements.</li><li class="listitem">The <code class="email">val()</code> method retrieves the current value of the first element in the set of matched elements or it sets the value of every matched element. The <code class="email">val()</code> method is particularly useful to access the name and values in a set of HTML select option elements.</li></ul></div></div><div class="book" title="Animation"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch07lvl3sec38" class="calibre1"/>Animation</h3></div></div></div><p class="calibre7">The most sophisticated digital applications on a website incorporate smart animations and hints (obviously approved by the Head of UX) to guide the user on their digital journey. Usually, it is just enough to provide subtle hints on how the user can achieve the best experience with a website and this can make a huge difference in the overall satisfaction. jQuery has a base level animation feature such as sliding up and down the <code class="email">div</code> layers and popups, shrinking and expanding the layers, and opacity tricks that can lend a hand.</p><p class="calibre7">To see the<a id="id787" class="calibre1"/> animation, let's examine how to use jQuery to animate a scroll-to-the-top arrow when the user scrolls down a page for a certain distance. This is a common user interface design pattern. We will not put in a module pattern for obvious space reasons.</p><p class="calibre7">Let's assume we have a simple HTML content on our JSF page view:</p><div class="informalexample"><pre class="programlisting">&lt;div id="scrollBackTopArrow"&gt;
  &lt;img src="#{request.contextPath}/scroll-back-top-arrow.jpg" &gt;
&lt;/div&gt;</pre></div><p class="calibre7">First, we will need to write a function handler that listens to scroll events when the user is scrolling up or down the page view. In the DOM, there is a standard method, <code class="email">scroll()</code>, on the global Window object that accepts a function object as a callback.</p><p class="calibre7">With an entry point, we will write a handler function, as follows:</p><div class="informalexample"><pre class="programlisting">$(window).scroll( function(){
  var epsilon    = 0.25;
  var scrollingCount = 0;
     var minOpacity = 0.0, maxOpacity = 0.85;
  var scrollArrow=$('#scrollBackTopArrow');
  scrollArrow.each( function(i) {
    var windowHeight = $(window).height();
    var windowScroll = $(window).scrollTop();
    var opacity = scrollArrow.css("opacity")

    var upper = windowHeight * 0.525;
    var lower = windowHeight * 0.315;

    if( windowScroll &gt; upper ){
      if ( opacity &lt;= (maxOpacity - epsilon )) {
        if ( scrollingCount == 0 ) {
            scrollArrow.animate({'opacity':'0.75'}, 100);
            scrollingCount = 15;
        }
      }
    }

    if( windowScroll &lt; lower ){
      if ( opacity &gt;= (minOpacity + epsilon)) {
        if ( scrollingCount == 0 ) {
            scrollArrow.animate({'opacity':'0.0'}, 100);
            scrollingCount = 15;
        }
      }
    }

    if ( scrollingCount &gt; 0 ) {
      scrollingCount = scrollingCount - 1;
    }
  }); 
}); // end of the scroll function</pre></div><p class="calibre7">Don't be afraid<a id="id788" class="calibre1"/> of the length of this JavaScript function because all will be revealed now. It turns out that attaching a callback as a scroll listener means that the web browser potentially invokes the callback for perhaps 10 or perhaps scores of times per second depending on the user's device. Therefore, we have introduced a dampening factor, <code class="email">scrollingCount</code>, as a countdown variable, which prevents the animation being hyper triggered. The <code class="email">epsilon</code> variable also controls the sensitivity of the animation when it is activated. We can use set minimum and maximum opacity values to bound the animation activations.</p><p class="calibre7">As the jQuery selector API, <code class="email">$('#scrollBackTopArrow')</code>, may retrieve zero or more DOM elements, we will invoke the <code class="email">each()</code> method to effectively iterate through the elements. We do so with the anonymous function, which takes a single argument of the element. In this case, we know the selector will only ever return one DOM element, if it exists at all.</p><p class="calibre7">We will capture the current window height, <code class="email">$(window).height()</code>, in a variable in the function. Using the <code class="email">windowHeight</code> variable, we will derive some vertical limits where the arrow should fade in and out: lower and upper. The origin coordinate <code class="email">(0,0)</code> sits on the top left-hand corner of the device window. The function call <code class="email">${window).scrollTop()</code> retrieves an integer position that represents the current scroll position of the page.</p><p class="calibre7">Now we will <a id="id789" class="calibre1"/>explain the tricky parts. The two conditional statements check if the page view scroll position is above the lowest or highest bounds. If the scroll position exceeds the upper bound, then we will fade in the arrow from view. If the scroll position is less than the lower bound, then we will fade out the arrow from view. We will set up a countdown timer in order to prevent the retriggering of the animation. Note that JavaScript supports access to a lexical scope for the variables that are declared outside the function definition, also known as closures. The <code class="email">minOpacity</code>, <code class="email">maxOpacity</code>, <code class="email">epsilon</code>, and <code class="email">scrollingCount</code> variables are the closure variables.</p><p class="calibre7">Here is another example of jQuery that uses the CSS3 three-dimensional transformations to achieve the expanding buttons or icons. This effect is borrowed from the older Mac OS X style user interface where the application icons expand and contract in the dock application bar, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">var selector = $("expando-btn");

selector.mouseenter( function() {
  $(this).each( function(i) {
    css({
        'transition': 'all 0.5s',
        '-webkit-transform': 'scale(1.667)',
        '-moz-transform': 'scale(1.667)',
        '-o-transform': 'scale(1.667)',
        'transform': 'scale(1.667)',
    });
  });
});

selector.mouseexit( function() {
  $(this).each( function(i) {
    css({
        'transition': 'all 0.5s',
        '-webkit-transform': 'scale(1.0)',
        '-moz-transform': 'scale(1.0)',
        '-o-transform': 'scale(1.0)',
        'transform': 'scale(1.0)',
    });
  });
});</pre></div><p class="calibre7">We will use the <code class="email">mouseenter()</code> and <code class="email">mouseexit()</code> methods in order to build the effect. These methods respectively capture the desktop mouse entering and leaving the button, if it is displayed and <a id="id790" class="calibre1"/>can be seen. The anonymous functions set up the CSS in motion. CSS 3 already has the animation class styles. The transition class declares the length of the total animation, which is 0.5 milliseconds, and we also declare a 2D transform that scales the element up or down. To expand the button element, we will set the scale-factor to <code class="email">1.667</code> of the default button size. To contract the button element, we will reset the scale-factor to the default rendering size of <code class="email">1.0</code>. Note that we still have to declare the proprietary browser classes such as—webkit-transform for the WebKit browsers such as Apple's Safari and the previous editions of Google Chrome. Ultimately, this example is unhelpful for the touch screen devices because there are no devices available (yet) that can detect fingers hovering very close over a screen! (See the exercise at the end of this chapter.)</p><p class="calibre7">Working with HTML, JavaScript, and CSS can be quite involved, and it is a job of an interface developer to figure out the requirements and build frontends. However, a Java developer should also appreciate the work. I hope you see some results.</p></div></div></div>
<div class="book" title="The RequireJS framework"><div class="book" id="aid-21PMQ2"><div class="book"><div class="book"><h1 class="title"><a id="ch07lvl1sec62" class="calibre1"/>The RequireJS framework</h1></div></div></div><p class="calibre7">If you are serious about <a id="id791" class="calibre1"/>the organization of lots of JavaScript files and components, then you will be happy that ideas from dependency injection frameworks such as CDI and Spring have also made it in the world. Some professional organizations already rely on a small framework called<a id="id792" class="calibre1"/> RequireJS (<a class="calibre1" href="http://requirejs.org/">http://requirejs.org/</a>). The RequireJS framework is a JavaScript file and module loader. The framework has a built-in module script loader, which will improve the speed and quality of your code.</p><p class="calibre7">RequireJS implements the <span class="strong"><strong class="calibre8">Asychronous Module Definition</strong></span> (<span class="strong"><strong class="calibre8">AMD</strong></span>)<a id="id793" class="calibre1"/> specification for JavaScript (<a class="calibre1" href="https://github.com/amdjs/amdjs-api/wiki/AMD">https://github.com/amdjs/amdjs-api/wiki/AMD</a>). This specification defines a mechanism that in turn defines the modules and dependencies between modules and how they can be asynchronously loaded.</p><p class="calibre7">The AMD specification solves the critical issues where you have many JavaScript modules and define the multiple HTML script elements so as to load them, but then you find that each module had a dependency order.</p><p class="calibre7">Let's suppose that we have a JavaScript module A that has a dependency on a module B, then module B has a dependency on modules C and D. You might forget to include the dependency for the module D. Worse, you might get the order of the dependencies wrong:</p><div class="informalexample"><pre class="programlisting">&lt;script src="js/module-b.js" &gt;&lt;/script&gt;
&lt;!-- Code failure: we forgot to load the module C --&gt;
&lt;script src="js/module-d.js" &gt;&lt;/script&gt;
&lt;!-- Oops: module B has a dependency on module D --&gt;
&lt;script src="js/module-a.js" &gt;&lt;/script&gt;</pre></div><p class="calibre7">RequireJS helps with these transient dependencies. First, we must understand how RequireJS loads the JavaScript files. The framework has a best practice folder layout.</p><p class="calibre7">In terms of a Java web application, let's define some files in a project, as follows:</p><p class="calibre7">
<code class="email">src/main/webapp/</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/index.xhtml</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/  </code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/app.js</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/app/</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/app/easel.js</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/app/nested/sub.js</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/lib/</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/lib/jquery-2.1.1.js</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/lib/bootstrap-3.2.0.js</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/require.js</code>
</p><p class="calibre7">
<code class="email">src/main/webapp/resources/js/require-setup.js</code>
</p><p class="calibre7">In a JSF <a id="id794" class="calibre1"/>application, we will place the JavaScript modules in the <code class="email">resources</code> folder. This reads differently to the standard JavaScript descriptions because of the indirection required for JSF. The application files are usually saved in the <code class="email">/js/app</code> folder. The JavaScript libraries are stored in the <code class="email">/js/lib</code> folder. The <code class="email">/js/require.js</code> file is the JavaScript file for a RequireJS framework module.</p><p class="calibre7">With an HTML5 application, you will first include a reference to the RequireJS file:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;h:html&gt;
  &lt;h:head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Digital Java EE 7 :: Require JS &lt;/title&gt;
    &lt;link href="styles/bootstrap.css" rel="stylesheet" /&gt;
    &lt;script 
      src="#{request.contextPath}/js/lib/require-setup.js" &gt;
      &lt;/script&gt;
    &lt;script 
      src="#{request.contextPath}/js/lib/require.js" 
      data-main="#{request.contextPath}js/app/app"&gt;&lt;/script&gt;
    &lt;script 
      src="#{request.contextPath}/js/app/main.js" &gt;&lt;/script&gt;
  &lt;/h:head&gt;

  &lt;h:body&gt;
    &lt;header&gt;RequireJS Application&lt;/header&gt;
    &lt;!-- ... --&gt;
  &lt;/h:body&gt;
&lt;/h:html&gt;</pre></div><p class="calibre7">The <a id="id795" class="calibre1"/>preceding code is a practical use of RequireJS because we are using Bootstrap and jQuery in an application. The most important HTML script element is the second one because it loads RequireJS (require.js). The first script tag is important as it configures the RequireJS framework. We will see this in a moment. The third script tag loads an application JavaScript module.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note09" class="calibre1"/>Note</h3><p class="calibre7">Many commercial websites place tags at the bottom of the page content for a best practice convention use and to ease the performance. However, because RequireJS is designed for AMD, then this practice may defeat the purpose to load and execute the scripts asynchronously while the page continues to load. In other words, your mileage may vary and you need to test this out in development work.</p></div><div class="book" title="A RequireJS configuration"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec84" class="calibre1"/>A RequireJS configuration</h2></div></div></div><p class="calibre7">Let's look in reverse <a id="id796" class="calibre1"/>order at the loaded JavaScript files, so this is <code class="email">/js/app/app.js</code>. This is the target of the reference data-main attribute in the <code class="email">&lt;script&gt;</code> tag element that includes the RequireJS library:</p><div class="informalexample"><pre class="programlisting">requirejs.config({
  baseUrl: 'js/lib',

  paths: {
      app: '../app'
  }
});</pre></div><p class="calibre7">This file configures how RequireJS searches and loads the JavaScript files as modules. The <code class="email">requirejs</code> is JavaScript Object type variable that the library defines in a global head scope. The reference object has a method called <code class="email">config()</code> that accepts a JavaScript property object. The <code class="email">baseUrl</code> property defines the default location to load the files. The paths property is a nested property, which lists a collection of the paths that are exceptions to the default loading rule.</p><p class="calibre7">By default the previous RequireJS configuration loads any module by ID from the folder <code class="email">js/lib</code>. However if the module ID start with the prefix <code class="email">app</code>, then it is loaded from the <code class="email">js/app</code> directory as specified by the path key.</p><p class="calibre7">The paths property configuration is relative to <code class="email">baseUrl</code> and never includes a <code class="email">.js</code> suffix extension as the paths property could stand for a directory folder.</p><p class="calibre7">As we will load jQuery and <a id="id797" class="calibre1"/>Bootstrap for this example, we will need to shove a square peg in a round hole. In the JavaScript programming world, in order to avoid conflicts with many popular libraries, the authors have adopted the idea of shims.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip32" class="calibre1"/>Tip</h3><p class="calibre7">
<span class="strong"><strong class="calibre8">What is a shim?</strong></span>
</p><p class="calibre7">A <a id="id798" class="calibre1"/>shim is the idea of a colloquial expression in the JavaScript parlance to force the different frameworks to work together. It is also a term for monkey-patching a JavaScript context to contain all of the EmcaScript 5 methods.</p></div><p class="calibre7">In RequireJS, we must set this up in the first loaded file (<code class="email">require-setup.js</code>):</p><div class="informalexample"><pre class="programlisting">// require-setup.js
var require = {
  shim: {
    "bootstrap" : { "deps" :['jquery'] },
   "jquery": { exports: '$' }
  },
  paths: {
    "jquery" : "jquery-2.1.3",
    "bootstrap" : "bootstrap-3.2.0"  
  }
};</pre></div><p class="calibre7">It is helpful to re-examine the folder layout for our JavaScript files. The require-setup file simply sets up a special named variable called <code class="email">require</code> in the global head scope with an object definition. The nest object referenced by the property name shim defines two changes. First, that a module called <code class="email">bootstrap</code> has a dependency on a module called <code class="email">jquery</code>. Second, the <code class="email">jquery</code> module exports the symbol (<code class="email">$</code>).</p><p class="calibre7">The second property key called paths in the configuration defines an association object for the module names. Each module name is mapped to its true name. So, the <code class="email">jquery</code> module is actually associated with a file called <code class="email">jquery-2.1.3</code>. There is a bonus feature with the indirection because now we have an easy way of upgrading the library versions. It's a one line change!</p></div><div class="book" title="An application module"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec85" class="calibre1"/>An application module</h2></div></div></div><p class="calibre7">With the configuration of <a id="id799" class="calibre1"/>RequireJS completed, we can now write the <a id="id800" class="calibre1"/>default application module for our application, as follows:</p><div class="informalexample"><pre class="programlisting">requirejs(['jquery', 'bootstrap', 'easel', 'nested/sub'],
  function ($, bootstrap, easel, sub) {
    // jquery, easel and the nested/sub module are all
    // loaded and can be used here now.
    console.log("start it up now!");

    var e = new easel();
    console.log("module 1 name = "+e.getName() );

    var s = new sub();
    console.log("module 2 name = "+s.getName() );
    console.log("other name = "+s.getCanvasName() );

    // DOM ready
    $(function(){
      // Programmatically add class to toggles
      $('.btn.danger').button('toggle').addClass('fat');

      console.log("set it off!");

      alert("set it off!");
    });
  }
);</pre></div><p class="calibre7">The preceding <code class="email">/js/app/main.js</code> script is the common file for our simple client-side application. The global <code class="email">requirejs()</code> function is the pathway to the library's feature of a dependency injection. The following is the format of this function:</p><div class="informalexample"><pre class="programlisting">requirejs( &lt;MODULE-ARRAY-LIST&gt;, &lt;CALLBACK&gt; )</pre></div><p class="calibre7">Here, <code class="email">&lt; MODULE-ARRAY-LIST&gt;</code> is the list collection of the module name dependencies and <code class="email">&lt;CALLBACK&gt;</code> is the single function argument.</p><p class="calibre7">Therefore, the code example asks RequireJS to initialize the modules: <code class="email">jquery</code>, <code class="email">bootstrap</code>, <code class="email">easel</code>, and <code class="email">nested/sub</code>. Pay particular attention to the last module because <code class="email">sub.js</code> is in a subdirectory of the <code class="email">app</code> folder; therefore, the name uses the path separator. Remember, with RequireJS, you do not need to add the suffix (<code class="email">.js</code>).</p><p class="calibre7">By the time RequireJS invokes the callback function, the modules are loaded. Hence, we will write to the console log, and if we are using jQuery, we will make another anonymous function declaration in order to do some fancy selector manipulation on the toggle buttons. It should start to make sense as to why we will explicitly export the dollar symbol in the preceding shim configuration. Also note that we are able to access the reference dependencies through the function arguments.</p><p class="calibre7">So, how will we <a id="id801" class="calibre1"/>define the module patterns with RequireJS? Read the <a id="id802" class="calibre1"/>next section.</p></div><div class="book" title="Defining modules"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec86" class="calibre1"/>Defining modules</h2></div></div></div><p class="calibre7">In order to define our own<a id="id803" class="calibre1"/> custom modules with RequireJS, we will make <a id="id804" class="calibre1"/>use of another global scope method from the framework. Following the AMD specification, the framework provides a method called <code class="email">define()</code>. The format for this method is as follows:</p><div class="informalexample"><pre class="programlisting">define( &lt;MODULE-ARRAY-LIST&gt;, &lt;FUNCTION-OBJECT&gt; )</pre></div><p class="calibre7">This is almost the same as the <code class="email">requirejs()</code> call. The <code class="email">define()</code> method accepts a list of the module names as a dependency. The <code class="email">&lt;FUNCTION-OBJECT&gt;</code> second argument means that the function must explicitly return a JavaScript object. In other words, it can't return a void or nothing result.</p><p class="calibre7">Let's look at the definition for the canvas module:</p><div class="informalexample"><pre class="programlisting">// js/app/easel.js
define([], function () {
  console.log("initializing the `easel' module");
  var returnedModule = function () {
    var _name = 'easel';
    this.getName = function () {
      return _name;
    }
  };

  return returnedModule; 
});</pre></div><p class="calibre7">The module list can be an empty array, which means that the module has no required dependencies. The file path is <code class="email">/js/app/easel.js</code>. In the anonymous function, we will instantiate our JavaScript constructor object with methods and properties and then return it to RequireJS. The module just defines a method called <code class="email">getName()</code>, which returns the value of a private accessible variable. Following the module pattern in JavaScript, it is possible to declare the private scope variables and functions such as <code class="email">_name</code> in the example, which are not accessible outside of the function definition.</p><p class="calibre7">Here is the listing of the other module with a file path of <code class="email">/js/app/nested/sub.js</code>, which has a dependency on the easel module:</p><div class="informalexample"><pre class="programlisting">// js/app/nested/sub.js
define(['easel'], function (easel) {
  var easel = new easel();
  console.log("initializing the `nested' module");
  var returnedModule = function () {
    this.getCanvasName = function () {
      return easel.getName();
    }
    this.getName = function () {
      return "sub";
    }
  };

  return returnedModule;
});</pre></div><p class="calibre7">The <code class="email">nested/sub module</code> defines a function <a id="id805" class="calibre1"/>object that contains two <a id="id806" class="calibre1"/>methods: <code class="email">getName()</code> and <code class="email">getCanvasName()</code>. We will create an object variable called <code class="email">easel</code>. RequireJS supplies the module reference as an argument during the invocation of the function. The <code class="email">getCanvasName()</code> method uses this private reference to invoke the <code class="email">getName()</code> method on the dependent module, <code class="email">easel</code>.</p><p class="calibre7">Here is a screenshot of RequireJS in action, loading the modules. The Chrome Developer Tools has a network view that allows us to inspect the JavaScript files being loaded over the wire:</p><div class="mediaobject"><img src="../Images/image00417.jpeg" alt="Defining modules" class="calibre10"/><div class="caption"><p class="calibre24">A screenshot of the RequireJS example application</p></div></div><p class="calibre11"> </p><p class="calibre7">If you find this<a id="id807" class="calibre1"/> terse at first, please bear in mind that it takes a<a id="id808" class="calibre1"/> little while to get your head around the functions and object scopes. The advantages are clear to the professional interface developers to get around the severe drawbacks of JavaScript's original design. We covered enough of RequireJS for the digital development to continue far and wide. We will move on to another framework.</p></div></div>
<div class="book" title="UnderscoreJS"><div class="book" id="aid-22O7C2"><div class="book"><div class="book"><h1 class="title"><a id="ch07lvl1sec63" class="calibre1"/>UnderscoreJS</h1></div></div></div><p class="calibre7">I will introduce you to one <a id="id809" class="calibre1"/>more JavaScript framework that can be helpful in development. UnderscoreJS (<a class="calibre1" href="http://underscorejs.org/">http://underscorejs.org/</a>) is <a id="id810" class="calibre1"/>a framework that brings functional programming constructs and techniques to the language. The library contains over 100 methods that add functional support to JavaScript.</p><p class="calibre7">UnderscoreJS is a single JavaScript file downloaded just like jQuery and RequireJS. If you add the requisite versioned <code class="email">underscore.js</code> file to the <code class="email">/js/lib</code> folder, then you already have the means to inject it into your application. Here is the additional configuration in the file, <code class="email">require-setup.js</code>:</p><div class="informalexample"><pre class="programlisting">var require = {
  shim: {
    "bootstrap" : { "deps" :['jquery'] },
    "jquery": { exports: '$' },
    "underscore": { exports: '_'}
  },
  paths: {
    "jquery" : "jquery-2.1.3",
    "bootstrap" : "bootstrap-3.2.0",  
    "underscore" : "underscore-1.8.2"
  }
};</pre></div><p class="calibre7">UnderscoreJS <a id="id811" class="calibre1"/>exports the symbol underscore (<code class="email">_</code>) for its library to a developer and its function methods are accessible through the symbol. We will review a small subset of these methods.</p><p class="calibre7">Functional programmers tend to be interested in the following five primary concerns:</p><div class="book"><ul class="itemizedlist"><li class="listitem">How to internally iterate through a collection of elements?</li><li class="listitem">How to filter the elements in a collection?</li><li class="listitem">How to map the elements in a collection from one type to another?</li><li class="listitem">How to flatten a collection of elements into just a collection?</li><li class="listitem">Finally, how to collect or reduce the elements in a collection to a single element or value?</li></ul></div><p class="calibre7">You may recognize these concerns as standard ideas in the alternative programming languages in JVM such as Scala, Clojure, or even Java 8 with Lambdas.</p><div class="book" title="The for-each operations"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec87" class="calibre1"/>The for-each operations</h2></div></div></div><p class="calibre7">In UnderscoreJS, we can<a id="id812" class="calibre1"/> take an <a id="id813" class="calibre1"/>array object and simply iterate over it.</p><p class="calibre7">The <code class="email">each()</code> function allows you to iterate over the list collections, as follows:</p><div class="informalexample"><pre class="programlisting">// /js/app/underscore-demo.js
requirejs(['underscore'],
  function (_) {
    console.log("inside underscore-demo module");

    _.each( [1, 2, 3], function(n) { console.log(n); });
  }
);</pre></div><p class="calibre7">Here, we used RequireJS as an<a id="id814" class="calibre1"/> AMD loader in a module called <code class="email">underscore-demo.js</code>. The <code class="email">each()</code> function iterates over the elements of the array object and invokes the supplied function, which is called the <span class="strong"><strong class="calibre8">iteratee</strong></span>
<a id="id815" class="calibre1"/> with the element as a single argument. The <code class="email">each()</code> function replaces the typically <code class="email">foreach</code> or <code class="email">for-do</code> compound statements in imperative<a id="id816" class="calibre1"/> programming languages.</p></div><div class="book" title="The filter operations"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec88" class="calibre1"/>The filter operations</h2></div></div></div><p class="calibre7">Filtering can be achieved in <a id="id817" class="calibre1"/>several ways. Let's take a basic example of<a id="id818" class="calibre1"/> filtering a list:</p><div class="informalexample"><pre class="programlisting">var r1 = _.filter(['Anne','Mike','Pauline','Steve'],
  function(name){ return name.startsWith('P'); });
console.log(r1);    // ['Pauline']</pre></div><p class="calibre7">This code searches through each value in the list, returning an array of all the values that pass a truth test (predicate). The second argument to <code class="email">filter()</code> is known as the predicate, which is a function callback that returns a Boolean value if the element that is supplied meets the condition test or not. Here, we are filtering the names in the list if they begin with the letter <code class="email">P</code>.</p><p class="calibre7">UnderscoreJS also provides a more sophisticated filtering method. The <code class="email">where()</code> method searches a list and returns an array of all the values that contain all of the key-value pairs listed in the properties:</p><div class="informalexample"><pre class="programlisting">var contacts = [ 
  new ContactDetail( 'F', 'Anne', 'Jackson', 28, 'Developer' ),
  new ContactDetail( 'M', 'William', 'Benson', 29, 'Developer' ),
  new ContactDetail( 'M', 'Micheal', 'Philips', 33, 'Tester' ),
  new ContactDetail( 'M', 'Ian', 'Charles', 45, 'Sales' ),
  new ContactDetail( 'F', 'Sarah', 'Hart', 55, 'CEO' ),
];

var r2 = _.where(contacts, {occupation: 'Developer', age: 28 });
console.log(r2);</pre></div><p class="calibre7">The preceding code uses the <code class="email">ContactDetail</code> JavaScript object that we defined earlier in this chapter. We will invoke the <code class="email">where()</code> method with the list of contacts and supplied key-value objects with the properties that we want to filter. The result is <code class="email">ContactDetail</code> that matches Anne Jackson because she has a matching occupation (software developer) and age (28).</p></div><div class="book" title="The map operations"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec89" class="calibre1"/>The map operations</h2></div></div></div><p class="calibre7">The <code class="email">map()</code> function produces a <a id="id819" class="calibre1"/>new array object by mapping each element in the list, with<a id="id820" class="calibre1"/> the user supplied function:</p><div class="informalexample"><pre class="programlisting">console.log( 
  _.map( [1, 2, 3], 
   function(n){ return n * 3; } )  
);
// [3, 6, 9]

console.log(
  _.map( [ 1, 2, 3, 4], function(x){ return x * x; } )
);
// [1, 4. 9, 16]

console.log(
  _.map( [ 1, 2, 3, 4], 
    function(x){ return "A" + x; } )
);
// [ 'A1', 'A2', 'A3', 'A4']</pre></div><p class="calibre7">The user-supplied function accepts the current element parameter and is responsible for returning the new element type. In these examples, we will create a new array list of triples of the number element, and next, we will create a new array list of the squares of the number element. Finally, we will create an array list of the string elements.</p></div><div class="book" title="The flatten operations"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec90" class="calibre1"/>The flatten operations</h2></div></div></div><p class="calibre7">Now that we know how to<a id="id821" class="calibre1"/> iterate, filter, and map a collection with UnderscoreJS, we <a id="id822" class="calibre1"/>should also learn how to flatten the collections of elements. There is a method called <code class="email">flatten()</code> that accepts a collection of elements and flattens it if one or more of these elements is itself a collection.</p><p class="calibre7">Let's examine the following two examples:</p><div class="informalexample"><pre class="programlisting">var Sector = function( name, value ) {
  this.name = name;
  this.value = value;
};

var salesSectorData = [ 
  [
    [ 
      new Sector("New York", 3724.23),
      new Sector("Boston", 8091.79)
    ],
    [
      new Sector("Houston", 9631.54)
    ],
  ],
  [
    new Sector("London", 2745.23),
    new Sector("Glasgow", 4286.36)
  ]
];

var f3 = _.flatten(salesSectorData);
console.log("f3 = "+f3);
// [Sector, Sector, Sector, Sector, Sector ]
var f4 = _.flatten(salesSectorData, true );
console.log("f4 = "+f4);
// [ [Sector, Sector], [Sector], Sector, Sector ]</pre></div><p class="calibre7">Here, we defined an object called <code class="email">Sector</code> that represents, say, the sales and marketing data. We created a nested collection, <code class="email">salesSectorData</code>, which is actually an array of two elements but each element is a further collection. In short, <code class="email">salesSectorData</code> is a level two ordered data structure.</p><p class="calibre7">The first <code class="email">flatten()</code> call<a id="id823" class="calibre1"/> completely flattens the data structure in an array list. So <a id="id824" class="calibre1"/>we will end up with an array of five items. We will pass a second argument to the second <code class="email">flatten()</code> call, which is a boolean argument that specifies whether the flatten operation should operate also on the elements of the collection or not. The result of <code class="email">f4</code> is an array of four items. The first element is an array list of two items, the second element is an array list of one item, and then the remaining elements will follow.</p><p class="calibre7">It should be clear why a JavaScript interface developer raves about UnderscoreJS. We will move on to the final operation in this firebrand review.</p></div><div class="book" title="The reduction operations"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="ch07lvl2sec91" class="calibre1"/>The reduction operations</h2></div></div></div><p class="calibre7">What good are all of <a id="id825" class="calibre1"/>these functional operations if we cannot reduce them to a <a id="id826" class="calibre1"/>single scalar value or object? Thankfully, RequireJS provides us with several varieties of methods such as <code class="email">reduce()</code>, <code class="email">reduceRight()</code>, <code class="email">min()</code>, and <code class="email">max()</code>.</p><p class="calibre7">We will just look at the <code class="email">reduce()</code> operation for now. If we wanted to discover the total sale value for all of the previous sector objects, how will we do it? Here is the answer:</p><div class="informalexample"><pre class="programlisting">var totalValue=  _.reduce(
  f3, 
  function(acc, sector) {
    return acc + sector.value;
  }, 
  0 );
console.log("totalValue = " + totalValue)</pre></div><p class="calibre7">The <code class="email">reduce()</code> operation accepts three arguments: the collection, an iteratee function, and initial value. In order to reduce the collection to a single scalar value, the <code class="email">reduce()</code> operation calls the iteratee on each<a id="id827" class="calibre1"/> element. The iteratee function accepts the scalar <a id="id828" class="calibre1"/>value argument and element. The anonymous function adds the sale sector value to the accumulator.</p><p class="calibre7">The <code class="email">reduce()</code> operator is left-associative in respect to the collection, whereas <code class="email">reduceRight()</code> is right-associative. This completes our journey in UnderscoreJS. A more interested reader can delve further into this framework online and through other resources of information.</p></div></div>
<div class="book" title="GruntJS"><div class="book" id="aid-23MNU2"><div class="book"><div class="book"><h1 class="title"><a id="ch07lvl1sec64" class="calibre1"/>GruntJS</h1></div></div></div><p class="calibre7">Before we conclude <a id="id829" class="calibre1"/>this chapter on progressive JavaScript programming, we will quickly take a look at a tool to launch actions. This tool is GruntJS (<a class="calibre1" href="http://gruntjs.com/">http://gruntjs.com/</a>), and <a id="id830" class="calibre1"/>the people behind it describe it as the JavaScript task runner. GruntJS is a Node.js tool and works in this ecosystem. Therefore, developers must install Node.js before they can work with GruntJS.</p><p class="calibre7">The tool is currently a favorite with many in the digital community. The following are some of the reasons why<a id="id831" class="calibre1"/> GruntJS is seen as a bonus:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The configuration is in one place and can be shared among other developers, testers, and operators across your digital team.</li><li class="listitem">GruntJS is built with a plugin system.</li><li class="listitem">The tool compresses your CSS and minimizes your JavaScript files for performance and delivery to the product site.</li><li class="listitem">GruntJS allows teams of dedicated interface developers to work separately or together on the client-side bits of a website. The tools then concatenate their JavaScript and CSS components together for a production delivery.</li><li class="listitem">It can optimize your images to reduce the overall file size and yet still retain the quality, which is perfect to deliver the massive <span class="strong"><em class="calibre9">hero</em></span> style retina display graphics and also create mobile-friendly images.</li><li class="listitem">Developers can take advantage of Sass and Less for CSS authoring.</li></ul></div><p class="calibre7">There are GruntJS<a id="id832" class="calibre1"/> plugins for Less, Sass, RequireJS, CoffeeScript, and others.</p><p class="calibre7">Node.js<a id="id833" class="calibre1"/> is a <a id="id834" class="calibre1"/>JavaScript runtime platform and therefore, it is absolutely different from the Java platform. If you happen to use Gradle, there are two open source plugins available that help to bridge the gap between them. They are called<a id="id835" class="calibre1"/> Gradle-GruntJS Plugin (<a class="calibre1" href="https://github.com/srs/gradle-grunt-plugin">https://github.com/srs/gradle-grunt-plugin</a>) and Gradle-Node Plugin<a id="id836" class="calibre1"/> (<a class="calibre1" href="https://github.com/srs/gradle-node-plugin">https://github.com/srs/gradle-node-plugin</a>). Node.js also has its own package manager called<a id="id837" class="calibre1"/> npm, which handles the installation, updating, and removing of the libraries. Npm permits the Node.js and JavaScript open source libraries to be shared with the community.</p><p class="calibre7">Every GruntJS project requires the following two files in the root folder:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">package.json</code>: This <a id="id838" class="calibre1"/>file specifies the metadata for an npm project and contains JavaScript tool and library dependencies that your project requires, including GruntJS.</li><li class="listitem"><code class="email">gruntfile.js</code>: This<a id="id839" class="calibre1"/> file configures and defines the build tasks for your project. It is the file where you can also add dependencies for the GruntJS plugins.</li></ul></div><p class="calibre7">For a JSF project, you will place <code class="email">package.json</code> in the project root folder. Here is a code for the file:</p><div class="informalexample"><pre class="programlisting">{
  "name": "my-digital-project",
  "version": "1.0-SNAPSHOT",
  "devDependencies": {
    "grunt": "~0.4.5"
  }
}</pre></div><p class="calibre7">You will notice that the file looks almost like a JSON file. The critical <code class="email">devDependencies</code> property declares a set of npm tools and frameworks. We want to definitely load GruntJS from version 0.4.5 or better.</p><p class="calibre7">Now, we will dive straight into a real-world case of GruntJS. In a digital project, we want to optimize the performance and ensure our SEO ranking with the search engines. We are required to merge together the third-party JavaScript libraries and minimize the JavaScript files. The interface developers prefer to keep using the Sass tool for the flexibility management of the CSS files. We have an agreement with our management to keep the developed JavaScript files untouched for now.</p><p class="calibre7">Here is the <code class="email">gruntfile.js</code> file that achieves this ambition:</p><div class="informalexample"><pre class="programlisting">module.exports = function(grunt) {              
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),

    concat: {  /* ... */ }

    uglify: { /* ... */ }

    sass: { /* ... */ } 
  });

  grunt.loadNpmTasks('grunt-contrib-concat');
  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-sass');
  grunt.registerTask('default', ['concat', 'uglify', 'sass']);
};</pre></div><p class="calibre7">The <a id="id840" class="calibre1"/>preceding <code class="email">gruntfile.js</code> file defines a single module in the Node.js system. It sounds confusing to have a module system in another module; however, all we have to know is that modules are a form of encapsulation that permits sharing through reuse. The <code class="email">module.exports</code> definition allows grunt to participate in the Node.js system. Therefore, it is possible to share this grunt module with the other node modules.</p><p class="calibre7">The <code class="email">grunt.initConfig()</code> stanza is <a id="id841" class="calibre1"/>required to initialize the GruntJS tool. The most important part specifies the name of the metadata file, <code class="email">package.json</code>. Afterwards, we have an area reserved for the plugin configuration. Each GruntJS plugin has a separate configuration of properties. There are three plugins: <code class="email">grunt-contrib-concat</code>, <code class="email">grunt-contrib-uglify</code>, and <code class="email">grunt-contrib-sass</code>. Each plugin declares a configuration property name: <code class="email">concat</code>, <code class="email">uglify</code>, and <code class="email">sass</code>.</p><p class="calibre7">To configure the concatenation plugin, we have the following stanza:</p><div class="informalexample"><pre class="programlisting">concat: {   
  dist: {
    src: [
      'src/main/webapp/resources/js/libs/*.js', 
      'src/main/webapp/resources/js/global.js'  
    ],
    dest: 'build/webapp/js/build/thirdparty.js',
  }
}</pre></div><p class="calibre7">The <code class="email">grunt-contrib-concat</code> plugin requires a source of files and a destination file. It takes whatever JavaScript library files that are there and then generates a single file called <code class="email">thirdparty.js</code>. In our Gradle (or Maven project), let's assume that we have a WAR task that will eventually bundle the final destination file.</p><p class="calibre7">We must be aware of the de facto Gradle and Maven directory layout configuration for the web projects. Therefore, we will add <code class="email">src/main/webapp</code> to the file paths.</p><p class="calibre7">To configure the minimization plugin, we will execute the following code:</p><div class="informalexample"><pre class="programlisting">uglify: {
  build: {
    src: 'src/main/webapp/thirdparty.js',
    dest: 'src/main/webapp/thirdparty.min.js'
  }
}</pre></div><p class="calibre7">This configuration is very easy to understand; we will just point the <code class="email">grunt-uglify-contrib</code> plugin to a source and target the file path.</p><p class="calibre7">Finally, we will configure the Sass CSS build plugin as follows:</p><div class="informalexample"><pre class="programlisting">sass: {
  dist: {
    options: {
      style: 'compressed'
    },
    files: {
      'src/main/webapp/resources/js/styles/build/mysite.css': 
      'build/webapp/resources/styles/mysite.scss'
    }
  }
}</pre></div><p class="calibre7">We will need slightly more instructions for the <code class="email">grunt-contrib-sass</code> plugin. This plugin requires the key-value properties of files. The target file is the key property and the SASS source file is the value.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip33" class="calibre1"/>Tip</h3><p class="calibre7">Installing SASS additionally requires the installation of a valid Ruby installation and the corresponding RubyGem.</p></div><p class="calibre7">GruntJS is an exciting and <a id="id842" class="calibre1"/>powerful tool for the client-side digital developers. There is no doubt about this. The plugin system is still quite immature and I recommend that you check the documentation for the configuration changes.</p></div>
<div class="book" title="Summary" id="aid-24L8G1"><div class="book"><div class="book"><div class="book"><h1 class="title"><a id="ch07lvl1sec65" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">This chapter was a whirlwind tour of the modern digital JavaScript programming. If you have not worked with the JavaScript language at all or left it far behind for several years, then I do hope that you have been invigorated to learn this essential skill. We looked at the programming of the JavaScript objects. We saw how to construct the objects. We learned about the property notations and dealt with the JavaScript truth.</p><p class="calibre7">We paid a particular respectable visit to jQuery—the grandmother or granddaddy of the JavaScript programming. If you learned nothing else, then you can now understand jQuery. We saw how the selectors can search HTML DOM for the elements, which can then be manipulated for effect. We made a brief foray into animation, which opened the door to the creation of more sophisticated experiences for the customers and business owners.</p><p class="calibre7">We ventured into dependency management of the modules with RequireJS. We learned how this framework can help a digital developer to organize the modules and leave the order of retrieving them to the framework.</p><p class="calibre7">At the end of the chapter, we crossed the bridge to a non-Java platform called Node.js and, in particular, learned the basic details about GruntJS. We studied an example of a GruntJS definition that bundled the JavaScript library files together, generated CSS from Sass, and optimized the size of the JavaScript files.</p><p class="calibre7">In the next chapters, we will look at AngularJS and the up-and-coming Java EE MVC framework.</p></div>
<div class="book" title="Exercises" id="aid-25JP21"><div class="book"><div class="book"><div class="book"><h1 class="title"><a id="ch07lvl1sec66" class="calibre1"/>Exercises</h1></div></div></div><p class="calibre7">The following are the exercises and questions for this chapter:</p><div class="book"><ol class="orderedlist"><li class="listitem">What does the following JavaScript code define? What else is similar to it?<div class="informalexample"><pre class="programlisting">var hospital = {
  name: "St Stephen's Hospital",
  location: "Kensington &amp; Chelsea",
  patients: 1250,
  doctors: ['Patel', 'Radeksky', 'Brown', 'Shockley']
};</pre></div></li><li class="listitem">From the preceding code, explain what is the main difference between the <code class="email">hospital.patients</code> and <code class="email">hospital['patients']</code> property accessors?</li><li class="listitem">Write a JavaScript object that constructs a participant to a Java User Group member. Let's say you call your object <code class="email">JUGParticipant</code>. You will need to capture their first and last names, their telephone contact numbers, their e-mail addresses (optional), and also their specific interests (optional).</li><li class="listitem">Modify <code class="email">JUGParticipant</code> to accept the interests as another object. Write a JavaScript Tag object so that you build an array of skills such as Java EE, Android, or HTML. Demonstrate that you can build this object graph of the <code class="email">JUGParticipants</code> and Tag objects.</li><li class="listitem">Adapt your JavaScript object graph by creating a <code class="email">JUGEvent</code> meeting object. Your object will need to hold properties such as the event title, its description, location, presentation speaker (optional), and willing <code class="email">JUGParticipants</code>.</li><li class="listitem">Find out the nine native object constructors in JavaScript 1.5 (or ECMAScript edition 3). To start you off, here are four: <code class="email">Number()</code>, <code class="email">String()</code>, <code class="email">Boolean()</code>, and <code class="email">Object()</code>.</li><li class="listitem">With the following HTML, use jQuery to change the background color of the <code class="email">div</code> element, <code class="email">messageArea</code>. There are three buttons in the code to denote the convention of a traffic light. (You are allowed to make the content pretty!)<div class="informalexample"><pre class="programlisting">&lt;div class="traffic-light"&gt;
  &lt;div id="messageArea" class="message-area"&gt;
    &lt;p class="lead"&gt;
      This is it!
    &lt;/p&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;a id="#redBtn" href="#" class="button" &gt;Red&lt;/a&gt;
    &lt;a id="#yellowBtn" href="#" class="button" &gt;Yellow&lt;/a&gt;
    &lt;a id="#greenBtn" href="#" class="button" &gt;Green&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div></li><li class="listitem">Explain the difference between the following two jQuery statements:<div class="informalexample"><pre class="programlisting">$('hero-image').attr('alt');
$('hero-image').attr('alt', 'Voted best by Carworld 2015!');</pre></div></li><li class="listitem">With the following HTML5 code, which displays a Bootstrap alert box, we want the user to make the warning disappear when they click on the close icon. Write JavaScript and jQuery to animate the critical notice, fade it out, and then remove the content from HTML.<div class="informalexample"><pre class="programlisting">&lt;div&gt;
  &lt;p class="lead"&gt;
    Here is something I desperately want you
    to know right here, right now.
  &lt;/p

  &lt;div class="critical-notice  alert-danger"&gt;
    &lt;button type="button" class="close  pull-right" 
      aria-label="Close"&gt;
      &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
    &lt;/button&gt;

    &lt;span class="glyphicon glyphicon-warning-sign" 
      aria-hidden="true" id="closeNotch" &gt;&lt;/span&gt;
    &lt;strong&gt;Danger!&lt;/strong&gt; I'm very annoyed.
  &lt;/div&gt;
&lt;/div&gt;</pre></div></li><li class="listitem">Look at the book's source code and get started with RequireJS. Study the code. Your task is to modify the code and add your module, which you may call <code class="email">/js/app/oxygen.js</code>. You will need to use the AMD specification <code class="email">define()</code> method call.</li><li class="listitem">Now that you have written the new RequireJS module, <code class="email">oxygen.js</code>, how do you know that it works as expected? Did you write a test web page? You will probably need to write a <code class="email">/js/app/oxygendemo.js</code> JavaScript file.</li><li class="listitem">Define two modules called <code class="email">/js/app/hydrogen.js</code> and <code class="email">/js/app/water.js</code>. Set up the water module such that it depends on the other two modules: hydrogen and oxygen.</li><li class="listitem">Working with UnderscoreJS and assuming that you have set up the dependencies, exercise the following JavaScript example:<div class="informalexample"><pre class="programlisting">var arr = [1, 2, 3, 4, 5];
var newArr = _.map(arr, function (x) {
  return (x + 3) * (x - 2) * (x + 1);
});</pre></div></li><li class="listitem">Look at the following JavaScript code, which defines a percentage and an array of product prices. Using UnderscoreJS, calculate the grand total price and also the grand total price when each price is increased by the percentage:<div class="informalexample"><pre class="programlisting">var Product = function(name, price, type ) {
  this.name = name;
  this.price = price;
  this.type = type;
}

var percentage = 3.25,
var productPrices = [
  new Product("Secutars", 27.99, "Garden"), 
  new Product("Chair", 99.99, "Home" ), 
  new Product("Luxury Red Wines", 79.99, "Food" ),
  new Product("Microwave", 49.99, "Home" ),
  new Product("Mower", 169.99, "Garden" )
];</pre></div></li><li class="listitem">Note that we have different types of products. Using UnderscoreJS, work out the grand total of the original prices and then work out the grand total with an increase of 5.35 percent.</li></ol><div class="calibre25"/></div></div></body></html>