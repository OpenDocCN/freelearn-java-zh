- en: Deep Diving into Spring Security
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 深入探索 Spring Security
- en: This is a hands-on book, but our first chapter was theoretical (as it should
    be) because it was an introductory chapter.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一本实践性很强的书，但我们的第一章是理论性的（正如它应该的那样），因为这是一章介绍性的章节。
- en: In this chapter, we will dive deeply into the technical capabilities of Spring
    Security, specifically authentication and authorization, using code. However,
    before we get into the coding, we will give a brief explanation of the theory.
    We are doing this because it is important to understand the concepts before diving
    into coding.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将深入探讨 Spring Security 的技术能力，特别是认证和授权，通过代码来实现。然而，在我们开始编码之前，我们将简要解释一下理论。我们这样做是因为在深入编码之前理解这些概念是很重要的。
- en: 'The two most important aspects of security are as follows:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 安全的两个最重要的方面如下：
- en: Find the identity of the user
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 找到用户身份
- en: Find what resources this user has access to
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 找出此用户可以访问哪些资源
- en: 'authentication is the mechanism by which you find out who a user is, and authorization
    is the mechanism that allows an application to find out what the user can do with
    the application:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 认证是确定用户身份的机制，而授权是允许应用程序确定用户可以使用应用程序做什么的机制：
- en: '![](img/ac322b64-46ba-4e10-8764-c3449f298df3.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ac322b64-46ba-4e10-8764-c3449f298df3.png)'
- en: 'Figure 01: Fundamental aspects of security—Authentication and Authorization'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图 01：安全的基本方面——认证和授权
- en: 'In this chapter we will cover the following:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下内容：
- en: Authentication
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 认证
- en: Authentication mechanisms
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 认证机制
- en: Authorization
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 授权
- en: Authentication
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 认证
- en: One of the fundamental ways to secure a resource is to make sure that the caller
    is who they claim to be. This process of checking credentials and making sure
    that they are genuine is called **authentication**.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 确保调用者是其所声称的人是保护资源的基本方式之一。这个过程是检查凭证并确保它们是真实的，称为**认证**。
- en: 'The following diagram shows the fundamental process Spring Security uses to
    address this core security requirement. The figure is generic and can be used
    to explain all the various authentication methods that the framework supports:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图显示了 Spring Security 用于解决这一核心安全需求的基本流程。该图是通用的，可以用来解释框架支持的所有的各种认证方法：
- en: '![](img/35829f9b-bc45-453d-b3c9-8d3f78cf8f3c.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](img/35829f9b-bc45-453d-b3c9-8d3f78cf8f3c.png)'
- en: 'Figure 02: Authentication architecture'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图 02：认证架构
- en: As detailed in [Chapter 1](bb1f1c6e-a9a4-4a14-aff4-3510fbfa7d14.xhtml), *Overview
    of Spring 5 and Spring Security 5* (in the *Working of Spring Security* section),
    Spring Security has a series of servlet filters (a filter chain). When a request
    reaches the server, it is intercepted by this series of filters (*Step 1* in the
    preceding diagram).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如[第 1 章](bb1f1c6e-a9a4-4a14-aff4-3510fbfa7d14.xhtml)中详细说明的，*Spring 5 和 Spring
    Security 5 概述*（在 *Spring Security 的工作原理*部分），Spring Security 有一系列的 servlet 过滤器（一个过滤器链）。当请求到达服务器时，它会被这一系列过滤器拦截（前图中
    *步骤 1*）。
- en: In the reactive world (with the new Spring WebFlux web application framework),
    filters are written quite differently than traditional filters (such as those
    used in the Spring MVC web application framework). Having said that, the fundamental
    mechanism remains the same for both. We have a dedicated chapter explaining how
    to convert a Spring Security application to Spring MVC and Spring WebFlux where
    we will cover these aspects in a bit more detail.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在反应式世界中（使用新的 Spring WebFlux 网络应用程序框架），过滤器与传统过滤器（如 Spring MVC 网络应用程序框架中使用的过滤器）的编写方式有很大不同。话虽如此，这两种情况的基本机制仍然是相同的。我们有一个专门的章节解释如何将
    Spring Security 应用程序转换为 Spring MVC 和 Spring WebFlux，我们将更详细地介绍这些方面。
- en: 'The Servlet filter code execution in the filter chain keeps skipping until
    the right filter is reached. Once it reaches the right authentication filter based
    on the authentication mechanism used, it extracts the supplied credentials (most
    commonly a username and password) from the caller. Using the supplied values (here,
    we have a username and password), the filter (`UsernamePasswordAuthenticationFilter`)
    creates an `Authentication` object (in the preceding diagram, `UsernamePasswordAuthenticationToken`
    is created using the username and password supplied in *Step 2*). The `Authentication`
    object created in *Step 2* is then used to call the `authenticate` method in the`AuthenticationManager`
    interface:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 过滤器链中的Servlet过滤器代码执行会一直跳过，直到到达正确的过滤器。一旦根据所使用的认证机制到达正确的认证过滤器，它就会从调用者中提取提供的凭据（最常见的是用户名和密码）。使用提供的值（这里，我们有用户名和密码），过滤器（`UsernamePasswordAuthenticationFilter`）创建一个`Authentication`对象（在前面的图中，使用*步骤2*中提供的用户名和密码创建了`UsernamePasswordAuthenticationToken`）。在*步骤2*中创建的`Authentication`对象随后用于调用`AuthenticationManager`接口中的`authenticate`方法：
- en: '[PRE0]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The actual implementation is provided by *ProviderManager*, which has a list
    of configured `AuthenticationProvider`.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 实际实现由*ProviderManager*提供，它有一个配置的`AuthenticationProvider`列表。
- en: '[PRE1]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The request passes through various providers and, in due course, tries to authenticate
    the request. There are a number of `AuthenticationProvider` as part of Spring
    Security.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 请求通过各种提供者，并在适当的时候尝试验证请求。Spring Security中包含多个`AuthenticationProvider`。
- en: 'In the diagram at the start of the chapter, `AuthenticationProvider` requires
    user details (some providers require this, but some don''t), which are provided
    in `UserDetailsService`:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章开头的图中，`AuthenticationProvider`需要用户详情（一些提供者需要这样做，但有些不需要），这些详情由`UserDetailsService`提供：
- en: '[PRE2]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '`UserDetailsService` retrieves `UserDetails` (and implements the `User` interface)
    using the supplied username.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '`UserDetailsService`使用提供的用户名检索`UserDetails`（并实现`User`接口）。'
- en: 'If all goes well, Spring Security creates a fully populated `Authentication`
    object (authenticate: true, granted authority list and username), which will contain
    various necessary details. The `Authentication` object is stored in the `SecurityContext`
    object by the filter for future use.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切顺利，Spring Security将创建一个完全填充的`Authentication`对象（认证：true，授权列表和用户名），其中将包含各种必要详情。`Authentication`对象由过滤器存储在`SecurityContext`对象中，以供将来使用。
- en: 'The `authenticate` method in `AuthenticationManager` can return the following:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '`AuthenticationManager`中的`authenticate`方法可以返回以下内容：'
- en: An `Authentication` object with `authenticated=true`, if Spring Security can
    validate the supplied user credentials
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果Spring Security可以验证提供的用户凭据，则返回一个`authenticated=true`的`Authentication`对象
- en: An `AuthenticationException`, if Spring Security finds that the supplied user
    credentials are invalid
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果Spring Security发现提供的用户凭据无效，将抛出`AuthenticationException`
- en: '`null`, if Spring Security cannot decide whether it is true or false (confused
    state)'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`null`，如果Spring Security无法决定它是真还是假（混淆状态）'
- en: Setting up AuthenticationManager
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置AuthenticationManager
- en: There are number of built-in `AuthenticationManager` in Spring Security that
    can be easily used in your application. Spring Security also has a number of helper
    classes, using which you can set up `AuthenticationManager`. One helper class
    is `AuthenticationManagerBuilder`. Using this class, its quite easy to set up
    `UserDetailsService` against a database, in memory, in LDAP, and so on. If the
    need arises, you could also have your own custom `UserDetailsService` (maybe a
    custom single sign-on solution is already there in your organization).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security中内置了多个`AuthenticationManager`，可以轻松地在您的应用程序中使用。Spring Security还提供了一些辅助类，使用这些类可以设置`AuthenticationManager`。其中一个辅助类是`AuthenticationManagerBuilder`。使用此类，可以非常容易地针对数据库、内存、LDAP等设置`UserDetailsService`。如果需要，您也可以拥有自己的自定义`UserDetailsService`（也许在您的组织中已经存在一个自定义的单点登录解决方案）。
- en: 'You can make an `AuthenticationManager` global, so it will be accessible by
    your entire application. It will be available for method security and other `WebSecurityConfigurerAdapter`
    instances. `WebSecurityConfigurerAdapter` is a class that is extended by your
    Spring configuration file, making it quite easy to bring Spring Security into
    your Spring application. This is how you set up a global `AuthenticationManager`
    using the `@Autowired` annotation:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将 `AuthenticationManager` 设置为全局的，这样它就可以被您的整个应用程序访问。它将可用于方法安全和其他 `WebSecurityConfigurerAdapter`
    实例。`WebSecurityConfigurerAdapter` 是一个由您的 Spring 配置文件扩展的类，这使得将 Spring Security
    带入 Spring 应用程序变得非常容易。这是使用 `@Autowired` 注解设置全局 `AuthenticationManager` 的方法：
- en: '[PRE3]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You can also create local `AuthenticationManager`, which is only available
    for this particular `WebSecurityConfigurerAdapter`, by overriding the `configure`
    method, as shown in the following code:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过覆盖 `configure` 方法创建局部 `AuthenticationManager`，它仅适用于此特定的 `WebSecurityConfigurerAdapter`，如下面的代码所示：
- en: '[PRE4]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Another option is to expose the `AuthenticationManager` bean by overriding
    `authenticationManagerBean` method, as shown here:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选项是通过覆盖 `authenticationManagerBean` 方法来暴露 `AuthenticationManager` bean，如下所示：
- en: '[PRE5]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: You can also expose various `AuthenticationManager`, `AuthenticationProvider`,
    or `UserDetailsService` as beans which will override the default ones.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以将各种 `AuthenticationManager`、`AuthenticationProvider` 或 `UserDetailsService`
    作为 beans 暴露出来，这将覆盖默认的设置。
- en: In the preceding code examples we have used `AuthenticationManagerBuilder` to
    configure in-memory authentication. More mechanisms of the `AuthenticationManagerBuilder`
    class will be used in the subsequent examples in this chapter.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的代码示例中，我们使用了 `AuthenticationManagerBuilder` 来配置内存中的身份验证。在本书的后续示例中，我们将使用 `AuthenticationManagerBuilder`
    类的更多机制。
- en: AuthenticationProvider
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AuthenticationProvider
- en: '`AuthenticationProvider` provides a mechanism for getting user details, with
    which authentication can be performed. Spring Security provides a number of `AuthenticationProvider`
    implementations, as shown in the following diagram:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '`AuthenticationProvider` 提供了一种获取用户详情的机制，通过该机制可以进行身份验证。Spring Security 提供了多个
    `AuthenticationProvider` 实现，如下面的图所示：'
- en: '![](img/c68b876c-9e2c-4329-b76d-63ebe1a3b376.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c68b876c-9e2c-4329-b76d-63ebe1a3b376.png)'
- en: 'Figure 03: Spring Security built-in AuthenticationProvider'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图 03：Spring Security 内置 AuthenticationProvider
- en: In subsequent chapters, we will go through each of these in detail with more
    code samples.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在后续章节中，我们将详细讲解这些内容，并附上更多的代码示例。
- en: Custom AuthenticationProvider
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自定义 AuthenticationProvider
- en: 'If needs be, we can write a custom `AuthenticationProvider` by implementing
    the `AuthenticationProvider` interface. We will have to implement two methods,
    namely authenticate (`Authentication`) and `supports(Class<?> aClass)`:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，我们可以通过实现 `AuthenticationProvider` 接口来编写自定义的 `AuthenticationProvider`。我们不得不实现两个方法，即
    authenticate (`Authentication`) 和 `supports(Class<?> aClass)`：
- en: '[PRE6]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Our `authenticate` method is quite simple. We just compare the username and
    password with a static value. We can write any logic here and authenticate the
    user. If there is an error, it throws an exception, `AuthenticationException`.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的 `authenticate` 方法相当简单。我们只是将用户名和密码与静态值进行比较。我们可以在任何地方编写任何逻辑并验证用户。如果发生错误，它将抛出异常，`AuthenticationException`。
- en: On the book's GitHub page, navigate to the `jetty-in-memory-basic-custom-authentication`
    project to see the full source code of this class.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的 GitHub 页面上，导航到 `jetty-in-memory-basic-custom-authentication` 项目，以查看此类的完整源代码。
- en: Multiple AuthenticationProvider
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多重 AuthenticationProvider
- en: Spring Security allows you to declare multiple `AuthenticationProvider` in your
    application. They are executed according to the order in which they are declared
    in the configuration.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security 允许您在应用程序中声明多个 `AuthenticationProvider`。它们将根据在配置中声明的顺序执行。
- en: 'The `jetty-in-memory-basic-custom-authentication` project is modified further,
    and we have used the newly created `CustomAuthenticationProvider` as an `AuthenticationProvider`
    (`Order 1`) and the existing `inMemoryAuthentication` as our second `AuthenticationProvider`
    (`Order 2`):'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '`jetty-in-memory-basic-custom-authentication` 项目进一步修改，我们已使用新创建的 `CustomAuthenticationProvider`
    作为 `AuthenticationProvider` (`Order 1`)，以及现有的 `inMemoryAuthentication` 作为我们的第二个
    `AuthenticationProvider` (`Order 2`)：'
- en: '[PRE7]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Whenever the `authenticate` method executes without error, the controls return and
    thereafter configured `AuthenticationProvider`'s doesn't get executed.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 当 `authenticate` 方法执行无误时，控制权返回，之后配置的 `AuthenticationProvider` 不会执行。
- en: Sample application
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 示例应用程序
- en: Let's gets our hands dirty by doing some coding. We will start off with the
    most common authentication mechanisms and then get into other authentication mechanisms
    that can be used with Spring Security.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过一些编码来动手实践。我们将从最常用的认证机制开始，然后深入了解Spring Security可以使用的其他认证机制。
- en: Base project setup
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基础项目设置
- en: Apart from the actual authentication mechanism, many aspects of the application
    are quite similar. In this section, we will set up the example and then cover
    the specific authentication mechanism in detail.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 除了实际的认证机制外，应用程序的许多方面相当相似。在本节中，我们将设置示例，然后详细说明特定的认证机制。
- en: We will be using the default Spring Security DB schema against which we will
    authenticate the user. We will create a fully fledged Spring MVC web application,
    with each component being created from scratch. Creating a sample Spring Security
    application using Spring MVC with the help of Spring Boot is very easy. The application
    will function through many things that are hidden away from developers. But in
    this case, we will be creating this application component by component so that
    you can see the actual code with which a web application that is built on Spring
    MVC can be secured.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用默认的Spring Security数据库模式进行用户认证。我们将创建一个完整的Spring MVC Web应用程序，每个组件都是从头创建的。使用Spring
    Boot的帮助创建一个使用Spring MVC的示例Spring Security应用程序非常简单。应用程序将通过许多隐藏在开发者视线之外的事物来运行。但在这个案例中，我们将逐个组件地创建这个应用程序，以便你可以看到构建在Spring
    MVC之上的Web应用程序是如何被安全化的。
- en: 'The default DB schema used by Spring Security is shown in the following diagram.
    However, you can customize it the way you think it is suitable for your application.
    We will be using the **Users** and **Authorities** tables for our setup here:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security使用的默认数据库模式如下所示。然而，你可以根据你认为适合你应用程序的方式自定义它。在这里，我们将使用**用户**和**权限**表进行我们的设置：
- en: '![](img/16b57543-4f52-4af7-96a2-95087c1b51c6.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/16b57543-4f52-4af7-96a2-95087c1b51c6.png)'
- en: 'Figure 04: Spring Security default database schema'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图04：Spring Security默认数据库模式
- en: Let's now start developing our sample application.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们开始开发我们的示例应用程序。
- en: Step 1—Create a Maven project in IntelliJ IDEA
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 步骤1—在IntelliJ IDEA中创建Maven项目
- en: 'In IntelliJ, select File | New | Project. This will open up the New Project
    wizard, as shown in the following screenshot. Now select Maven and click the Next
    button:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在IntelliJ中，选择文件 | 新建 | 项目。这将打开新建项目向导，如下截图所示。现在选择Maven并点击下一步按钮：
- en: '![](img/32266a6a-98b5-4f72-a76d-702c307cbdd1.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/32266a6a-98b5-4f72-a76d-702c307cbdd1.png)'
- en: 'Figure 05: New Maven project in IntelliJ'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图05：IntelliJ中的新Maven项目
- en: 'On the next screen in the New Project wizard (*Step 2*), enter the GroupId,
    ArtifactId, and Version, as shown in the following screenshot:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在新建项目向导的下一屏幕（*步骤2*），输入组ID、工件ID和版本，如下截图所示：
- en: '![](img/2b886993-a053-4200-8076-bb7cf3e78c26.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2b886993-a053-4200-8076-bb7cf3e78c26.png)'
- en: 'Figure 06: Maven project setup in IntelliJ—Input GroupId, ArtifactId and Version'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图06：IntelliJ中的Maven项目设置—输入组ID、工件ID和版本
- en: 'On the next screen in the New Project wizard (*Step 3*), enter the Project
    name and Project location, as shown in the following screenshot:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在新建项目向导的下一屏幕（*步骤3*），输入项目名称和项目位置，如下截图所示：
- en: '![](img/9eb9f732-38b0-4d9d-8be6-be901b714012.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9eb9f732-38b0-4d9d-8be6-be901b714012.png)'
- en: 'Figure 07: Maven project setup—Setting Project name and Project location'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图07：Maven项目设置—设置项目名称和项目位置
- en: 'IntelliJ will prompt you with instructions, as shown in the following screenshot.
    To automatically import projects whenever you make any changes in `pom.xml`, click
    on the Enable Auto-Import link:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: IntelliJ将提示你以下说明，如下截图所示。要自动导入项目，每次你在`pom.xml`中做出任何更改时，请点击启用自动导入链接：
- en: '![](img/0ea8decb-8174-4daa-88b2-1dcd853587df.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0ea8decb-8174-4daa-88b2-1dcd853587df.png)'
- en: 'Figure 08: Enabling Auto-Import in IntelliJ'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图08：在IntelliJ中启用自动导入
- en: Step 2—pom.xml changes
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 步骤2—`pom.xml`更改
- en: 'Open the `pom.xml` file and add the following code within the project tag (`<project></project>`):'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 打开`pom.xml`文件，在项目标签（`<project></project>`）内添加以下代码：
- en: '[PRE8]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Build a setup on `pom.xml` in which we will be using jetty to run the application
    created.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在`pom.xml`文件中构建一个设置，我们将使用jetty来运行创建的应用程序。
- en: '[PRE9]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Step 3—MySQL database schema setup
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 步骤3—MySQL数据库模式设置
- en: 'Create a default database schema using the following scripts, and insert some
    users:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下脚本创建默认数据库模式，并插入一些用户：
- en: '[PRE10]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Insert data into the preceding tables using the following scripts:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下脚本将数据插入到前面的表中：
- en: '[PRE11]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The `password` is one-way hashed using online tool [http://www.devglan.com/online-tools/bcrypt-hash-generator](http://www.devglan.com/online-tools/bcrypt-hash-generator).
    To compare the `password` we will use `PasswordEncoder` (`Bcrypt`).
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '`password` 使用在线工具 [http://www.devglan.com/online-tools/bcrypt-hash-generator](http://www.devglan.com/online-tools/bcrypt-hash-generator)
    进行单向哈希。为了比较 `password`，我们将使用 `PasswordEncoder` (`Bcrypt`)。'
- en: 'Credentials are as follows:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 凭据如下：
- en: User = `admin` and password = `admin@password`
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户 = `admin`，密码 = `admin@password`
- en: User = `user` and password = `user@password`
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户 = `user`，密码 = `user@password`
- en: It's important to note that, even though the role is named `ROLE_ADMIN`, the
    actual name is `ADMIN`, and this is what our code will be using while passing.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要注意，尽管角色名为 `ROLE_ADMIN`，但实际名称是 `ADMIN`，这是我们代码在传递时将使用的名称。
- en: Step 4—Setting up MySQL database properties in your project
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 4 步—在您的项目中设置 MySQL 数据库属性
- en: 'Create a file named `mysqldb.properties` in the `src/main/resources` folder
    with the following content:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `src/main/resources` 文件夹中创建一个名为 `mysqldb.properties` 的文件，内容如下：
- en: '[PRE12]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Step 5—Spring application configuration
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 5 步—Spring 应用程序配置
- en: 'Create a Java class named `ApplicationConfig` with the following code in the `com.packtpub.book.ch02.springsecurity.config`
    package:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `com.packtpub.book.ch02.springsecurity.config` 包中创建一个名为 `ApplicationConfig`
    的 Java 类，并使用以下代码：
- en: '[PRE13]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Step 6—Web application configuration
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 6 步—Web 应用程序配置
- en: 'In this example, we are going to use Spring MVC as our web application framework.
    Let''s create the web application configuration file:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们将使用 Spring MVC 作为我们的 Web 应用程序框架。让我们创建 Web 应用程序配置文件：
- en: '[PRE14]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The `@EnableWebMvc` annotation makes sure that your application is based on
    Spring MVC.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '`@EnableWebMvc` 注解确保您的应用程序基于 Spring MVC。'
- en: Step 7—Spring MVC setup
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 7 步—Spring MVC 设置
- en: 'In Spring MVC, the request lands on `DispatcherServlet`. `DispatcherServlet`
    can be declared in `web.xml` or as a Java configuration if your servlet container
    is 3.0+. Please create a dummy `SpringSecurityConfig.java` file. We will be constructing
    this class when we explain the first authentication mechanism, namely, basic authentication:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Spring MVC 中，请求落在 `DispatcherServlet` 上。如果您的 Servlet 容器是 3.0+，则可以在 `web.xml`
    中声明 `DispatcherServlet` 或作为 Java 配置。请创建一个名为 `SpringSecurityConfig.java` 的虚拟文件。当我们解释第一个认证机制，即基本认证时，我们将构建这个类：
- en: '[PRE15]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Step 8—Controller setup
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 8 步—控制器设置
- en: 'Let''s create a base controller (`HomeController`) for the secured JSP page
    (`home.jsp`). Please note that the return of the mapping method should be a string,
    and it should map to the actual name of the JSP file. In our case, it is `home.jsp`,
    a secured resource that the caller navigates when they log in:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们为受保护的 JSP 页面 (`home.jsp`) 创建一个基本控制器 (`HomeController`)。请注意，映射方法的返回值应该是一个字符串，并且它应该映射到实际的
    JSP 文件名。在我们的例子中，它是 `home.jsp`，这是一个受保护的资源，当调用者登录时将导航到该资源：
- en: '[PRE16]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Step 9—JSP creation
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 9 步—创建 JSP
- en: 'Our home page is a very simple JSP file, as shown in the following code snippet.
    This JSP just displays a message that we have constructed in our `HomeController`
    class:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的主页是一个非常简单的 JSP 文件，如下面的代码片段所示。这个 JSP 只显示我们在 `HomeController` 类中构建的消息：
- en: '[PRE17]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: This is now the base Spring MVC application, and with this we will try to set
    up various authentication mechanisms.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这现在是一个基本的 Spring MVC 应用程序，我们将尝试设置各种认证机制。
- en: Spring Security setup
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Spring Security 配置
- en: To explain Spring Security, we will implement basic authentication on the Spring
    MVC project that we created earlier. In [Chapter 3](69913c59-1186-44b2-8707-dceca721e206.xhtml), *Authentication
    Using SAML, LDAP, and OAuth/OIDC*, we will look at implementing other authentication
    mechanisms using Spring Security. To accomplish basic authentication in your application,
    let's perform the additional steps outlined in this section.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解释 Spring Security，我们将在我们之前创建的 Spring MVC 项目上实现基本认证。在第 3 章 [使用 SAML、LDAP 和
    OAuth/OIDC 进行认证](69913c59-1186-44b2-8707-dceca721e206.xhtml)中，我们将探讨使用 Spring Security
    实现其他认证机制。为了在您的应用程序中实现基本认证，让我们执行本节中概述的附加步骤。
- en: Step 1—Spring Security configuration setup
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 1 步—Spring Security 配置设置
- en: 'We will now create the all-important Spring Security configuration class and
    make sure that the default filter chain for Spring Security is set up to secure
    all the resources:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将创建至关重要的 Spring Security 配置类，并确保 Spring Security 的默认过滤器链已设置以保护所有资源：
- en: '[PRE18]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: In Spring Security configuration, the first thing that we do is tell Spring
    Security that you will have to authenticate the user against a database by using
    a defined user query and checking the user's authority using the defined authority
    query.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在Spring Security配置中，我们首先告诉Spring Security，你将必须通过使用定义的用户查询和检查用户权限使用定义的权限查询来对用户进行认证。
- en: We then set up the authentication mechanism to retrieve the user's credentials.
    Here we are using basic authentication as the mechanism to capture user credentials.
    Please note that the role names being used to check doesn't have the prefix `ROLE_`.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 我们随后设置了认证机制以检索用户的凭证。在这里，我们使用基本认证作为捕获用户凭证的机制。请注意，用于检查的角色名称没有前缀`ROLE_`。
- en: Step 2—Spring Security setup for a web application
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2步——为Web应用程序设置Spring Security
- en: 'We know that we have to instruct the application to start using Spring Security.
    One easy way is to declare the Spring Security filter in `web.xml`. If you want
    to avoid using XML and perform the actions using Java instead, then create a class
    that extends `AbstractSecurityWebApplicationInitializer`; this will do the trick
    of initializing the filter and setting Spring Security for your application:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道我们必须指导应用程序开始使用Spring Security。一种简单的方法是在`web.xml`中声明Spring Security过滤器。如果你想要避免使用XML，而是使用Java来执行操作，那么创建一个扩展`AbstractSecurityWebApplicationInitializer`的类；这将初始化过滤器并为你应用程序设置Spring
    Security：
- en: '[PRE19]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: With this, we have completed all the setup required to see basic authentication
    in action.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这样，我们已经完成了查看基本认证所需的所有设置。
- en: Running the application
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行应用程序
- en: 'Run the project by executing the `mvn jetty:run` command. Once you see the
    log shown in the following screenshot, open a browser and go to `http://localhost:8080`:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 通过执行`mvn jetty:run`命令来运行项目。一旦看到以下截图所示的日志，打开浏览器并转到`http://localhost:8080`：
- en: '![](img/0a210e9d-0372-4afc-9680-cc9b8c35ba93.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0a210e9d-0372-4afc-9680-cc9b8c35ba93.png)'
- en: 'Figure 09: Jetty Server running - console log'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图09：Jetty服务器运行 - 控制台日志
- en: 'Once you access the URL, the browser prompts with a default basic authentication
    dialog, as shown in the following screenshot. Enter the Username and Password as `admin`/`admin@password` and
    click on Log In:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦访问URL，浏览器会弹出默认的基本认证对话框，如下截图所示。输入用户名和密码为`admin`/`admin@password`，然后点击登录：
- en: '![](img/855b76d0-f0f3-4dbe-967e-d928a2405f89.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/855b76d0-f0f3-4dbe-967e-d928a2405f89.png)'
- en: 'Figure 10: Basic authentication dialog in the browser'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图10：浏览器中的基本认证对话框
- en: 'If your credentials are correct and if the user has either the `ADMIN` or `USER` role,
    you should see the home page as follows:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的凭证正确，并且用户拥有`ADMIN`或`USER`角色，你应该看到如下主页：
- en: '![](img/e9c599ce-0360-4309-a0a5-a535d7d27a09.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e9c599ce-0360-4309-a0a5-a535d7d27a09.png)'
- en: 'Figure 11: The home page after successful login'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图11：成功登录后的主页
- en: The full project code is available on the book's GitHub page ([https://github.com/PacktPublishing/Hands-On-Spring-Security-5-for-Reactive-Applications](https://github.com/PacktPublishing/Hands-On-Spring-Security-5-for-Reactive-Applications))
    within the `jetty-db-basic-authentication`project.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 完整的项目代码可以在本书的GitHub页面（[https://github.com/PacktPublishing/Hands-On-Spring-Security-5-for-Reactive-Applications](https://github.com/PacktPublishing/Hands-On-Spring-Security-5-for-Reactive-Applications)）中的`jetty-db-basic-authentication`项目中找到。
- en: In-memory user storage
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内存用户存储
- en: 'As mentioned earlier, for various testing purposes, it''s better to store the
    user credentials and then authenticate in memory than to use a proper database,
    such as MySQL. For this, just change the Spring Security configuration file (`SpringSecurityConfig.java`)
    by adding the following method:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，出于各种测试目的，最好是存储用户凭证并在内存中进行认证，而不是使用像MySQL这样的数据库。为此，只需通过添加以下方法来更改Spring Security配置文件（`SpringSecurityConfig.java`）：
- en: '[PRE20]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: It's important to note that the password has a prefix, `{noop}`, attached to
    it. This ensures that when the password is validated, no encoding is carried out.
    This is one way to avoid having password encoding errors when you run the project.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要注意，密码前面有一个前缀`{noop}`。这确保了当密码被验证时，不会进行编码。这是避免在运行项目时出现密码编码错误的一种方法。
- en: The full source code, as a fully fledged project, can be found on this book's
    GitHub page in the `jetty-in-memory-basic-authentication` project.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 作为完整项目的完整源代码可以在本书的GitHub页面上的`jetty-in-memory-basic-authentication`项目中找到。
- en: Run as Spring Boot
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 以Spring Boot运行
- en: The preceding example can be easily converted to a Spring Boot application by
    following the ensuing additional steps. This process won't cover many of the trivial
    steps that we have done previously. You need to have one more configuration file, `SpringSecurityConfig.java`*,*
    the details of which are as follows.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例可以很容易地通过遵循以下附加步骤转换为Spring Boot应用程序。这个过程不会涵盖我们之前所做的许多琐碎步骤。您需要有一个额外的配置文件`SpringSecurityConfig.java`，其详细信息如下。
- en: 'You can create a new file, usually named `Run.java`, with the following code:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以创建一个新的文件，通常命名为`Run.java`，包含以下代码：
- en: '[PRE21]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'It''s a very simple file with an important annotation in it, `@SpringBootApplication`.
    We took away the Spring MVC configuration class and put the following properties
    in the `application.properties` file. This is just another way to avoid creating
    a new Spring MVC configuration file and instead use the properties file:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个非常简单的文件，其中包含一个重要的注解`@SpringBootApplication`。我们移除了Spring MVC配置类，并在`application.properties`文件中放置了以下属性。这只是避免创建新的Spring
    MVC配置文件并使用属性文件的一种方式：
- en: '[PRE22]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: As earlier, everything else is kept intact. For the full project, refer to the
    book's GitHub page in the `spring-boot-in-memory-basic-authentication` project.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，其他所有内容都保持不变。对于完整的项目，请参考书中GitHub页面的`spring-boot-in-memory-basic-authentication`项目。
- en: 'Open a command prompt and enter the following command:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 打开命令提示符并输入以下命令：
- en: '[PRE23]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Open the browser and navigate to `http://localhost:8080`, and you should be
    provided with a basic authentication dialog. After successful login, you should
    be taken to the user home page, as shown earlier.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 打开浏览器并导航到`http://localhost:8080`，你应该会看到一个基本的认证对话框。登录成功后，你应该被带到用户主页，如前所述。
- en: Authorization
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 授权
- en: Once the user is validated in terms of who they claim to be, the next aspect,
    what the user has access to, needs to be ascertained. This process of making sure
    what the user is allowed to do within the application is called authorization.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦用户在声称是谁的方面得到验证，下一个方面，即用户可以访问什么，需要得到确认。确保用户在应用程序中可以做什么的过程称为授权。
- en: 'In line with authentication architecture, as seen earlier, authorization also
    has a manager, `AccessDecisionManager`. Spring Security has three built-in implementations
    for this: `AffirmativeBased`, `ConsensusBased`, and `UnanimousBased`. `AccessDecisionManager` works
    by delegating to a chain of `AccessDecisionVoter`. Authorization-related Spring
    Security classes/interfaces are shown in the following diagram:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 与认证架构一致，如前所述，授权也有一个管理器，`AccessDecisionManager`。Spring Security为此提供了三个内置实现：`AffirmativeBased`、`ConsensusBased`和`UnanimousBased`。`AccessDecisionManager`通过委托给一系列的`AccessDecisionVoter`来工作。与授权相关的Spring
    Security类/接口在以下图中展示：
- en: '![](img/ed1850b0-950f-4d1c-ae8f-7bb3d3143455.png)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ed1850b0-950f-4d1c-ae8f-7bb3d3143455.png)'
- en: 'Figure 12: Spring Security Authorization classes/interfaces'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图12：Spring Security授权类/接口
- en: 'In Spring Security, authorization to a secured resource is granted by invoking
    voters and then tallying the votes received. The three built-in implementations
    tally the votes received in different manners:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在Spring Security中，授权给受保护资源是通过调用投票者并统计收到的投票来实现的。三个内置实现以不同的方式统计收到的投票：
- en: '**AffirmativeBased**: If at least one voter votes, the user is given access
    to the secured resource'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AffirmativeBased**：如果至少有一个投票者投票，则用户将被授予访问受保护资源的权限'
- en: '**ConsensusBased**: If a clear consensus is reached between the voters and
    their votes, then the user is given access to the secured resource'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ConsensusBased**：如果投票者及其投票之间达成明确的共识，则用户将被授予访问受保护资源的权限'
- en: '**UnanimousBased**: If all the voters vote, then the user is given access to the
    secured resource'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**UnanimousBased**：如果所有投票者都投票，则用户将被授予访问受保护资源的权限'
- en: 'Spring Security provides two authorization approaches:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security提供了两种授权方法：
- en: '**Web URL**: Incoming URL (specific URL or regular expression)-based authorization'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Web URL**：基于传入URL（特定URL或正则表达式）的授权'
- en: '**Method**: Method signature based on which access is controlled'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**方法**：基于方法签名进行访问控制'
- en: If your serving layer exposes only RESTful endpoints and the data in your application
    is properly categorized as resources (complying with REST principles), using a
    Web URL approach can be considered. If your application just exposes endpoints
    (REST-based, I would call) not really complying with REST principles, you can
    consider using method-based authorization.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的服务层仅公开RESTful端点，并且你的应用程序中的数据被适当地分类为资源（符合REST原则），则可以考虑使用Web URL方法。如果你的应用程序仅公开端点（基于REST的，我会称之为），并不真正符合REST原则，你可以考虑使用基于方法授权。
- en: Web URL
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Web URL
- en: 'Spring Security can be used to set up URL-based authorization. HTTP Security
    configured can be used with Spring Security configuration to achieve the desired
    authorization. In many examples that we have gone through so far, we have seen
    pattern matching authorization. Here is one such example:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security可以用来设置基于URL的授权。配置的HTTP安全可以与Spring Security配置一起使用，以实现所需的授权。在我们已经讨论过的许多示例中，我们已经看到了模式匹配授权。以下是一个这样的示例：
- en: '`AntPathRequestMatcher`: Uses an Ant-style pattern for URL matching:'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`AntPathRequestMatcher`：使用Ant风格的模式进行URL匹配：'
- en: '[PRE24]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: In the preceding code snippet, the `/rest` URL's basic authentication is disabled,
    and for other URLs (`/rest/movie`, `/rest/ticket` and `/index`), users with the
    `USER` role have access. The snippet also shows single match (using `antMatcher`)
    and multiple matches (using `antMatchers`).
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的代码片段中，禁用了`/rest` URL的基本认证，而对于其他URL（`/rest/movie`、`/rest/ticket`和`/index`），具有`USER`角色的用户可以访问。该片段还显示了单匹配（使用`antMatcher`）和多匹配（使用`antMatchers`）。
- en: '`MvcRequestMatcher`: This uses Spring MVC to match the path and then extracts
    variables. The matching is relative to the servlet path.'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MvcRequestMatcher`：这使用Spring MVC来匹配路径，然后提取变量。匹配相对于servlet路径。'
- en: '`RegexRequestMatcher`: This uses a regular expression to match the URL. It
    can also be used to match the HTTP method, if needed. The matching is case-sensitive
    and takes the form (`servletPath` + `pathInfo` + `queryString`):'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RegexRequestMatcher`：这使用正则表达式来匹配URL。如果需要，它也可以用来匹配HTTP方法。匹配是区分大小写的，形式为（`servletPath`
    + `pathInfo` + `queryString`）：'
- en: '[PRE25]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Method invocation
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 方法调用
- en: Spring Security allows users to access-control method execution using **aspect-oriented
    programming** (**AOP**) in the background. This can be done using XML configuration
    or using Java configuration. Since we have been following Java configuration throughout
    this book, we will cover Java configuration and annotations here to explain method
    security. The best practice is to choose a particular method invocation authorization
    approach and stick to it for consistency across your application. Choose whichever
    approach is apt for your application, as there isn't anything particular documented
    on when to choose what.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security允许用户在后台使用**面向切面编程**（**AOP**）来控制方法执行。这可以通过XML配置或使用Java配置来实现。由于我们一直在遵循Java配置，因此我们将在这里介绍Java配置和注释来解释方法安全。最佳实践是选择特定的方法调用授权方法，并在整个应用程序中保持一致性。选择适合你应用程序的方法，因为没有特别记录何时选择什么。
- en: 'If you would like to enable method security in your application, firstly annotate
    the class with `@EnableMethodSecurity`. There are three types of annotation with
    which you can annotate the methods and authorize them. The types are as follows:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想在你的应用程序中启用方法安全，首先使用`@EnableMethodSecurity`注释类。你可以使用三种类型的注释来注释方法和授权它们。这些类型如下：
- en: '**Voting-based** **ann****otations**: the most commonly used annotations in
    Spring Security. Spring Security''s `@Secured` annotation falls into this category.
    To use these annotations, they first have to be enabled, as shown in the following
    code snippet:'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于投票的** **ann****otations**：Spring Security中最常用的注释。Spring Security的`@Secured`注释属于此类。要使用这些注释，首先必须启用它们，如下面的代码片段所示：'
- en: '[PRE26]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Once the usage of annotation is enabled, the `@Secured` annotation can be used,
    as shown in the following code snippet:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦启用了注释的使用，就可以使用`@Secured`注释，如下面的代码片段所示：
- en: '[PRE27]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '**JSR-250 security annotations**: This is also called the **Enterprise JavaBeans
    3.0** (**EJB** **3**) security annotation. Again, before using these annotations,
    they have to be enabled using `@EnableGlobalMethodSecurity(jsr250Enabled = true)`.
    The following snippet shows the JSR-250 security annotation in action:'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**JSR-250安全注释**：这也被称为**企业JavaBeans 3.0**（**EJB** **3**）安全注释。同样，在使用这些注释之前，必须使用`@EnableGlobalMethodSecurity(jsr250Enabled
    = true)`启用它们。以下代码片段显示了JSR-250安全注释的实际应用：'
- en: '[PRE28]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '**Expression-based annotation**: Annotations based on `@Pre` and `@Post` fall
    into this category. They are enabled using `@EnableGlobalMethodSecurity(prePostEnabled
    = true)`:'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于表达式的注解**：基于 `@Pre` 和 `@Post` 的注解属于此类。它们通过使用 `@EnableGlobalMethodSecurity(prePostEnabled
    = true)` 启用：'
- en: '[PRE29]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: In the preceding example, `hasAnyAuthority` is called **Spring Expression Language**
    (**SpEL**). Similar to the example shown, there are many such predefined expressions
    that can be used for security.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的示例中，`hasAnyAuthority` 被称为 **Spring 表达式语言**（**SpEL**）。类似于所显示的示例，有许多这样的预定义表达式可以用于安全性。
- en: Domain instance
  id: totrans-185
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 域实例
- en: 'Spring Security provides ways to access control various permissions attached
    to any object. Spring Security **Access Control List** (**ACL**) stores a list
    of permissions associated with a domain object. It also grants these permissions
    to various entities that need to perform different operations on the domain object.
    For Spring Security to work, you need to set up four database tables, as shown
    in the following diagram:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security 提供了访问控制任何对象附加的各种权限的方法。Spring Security **访问控制列表**（**ACL**）存储与域对象关联的权限列表。它还授予这些权限给需要在域对象上执行不同操作的各个实体。为了让
    Spring Security 正常工作，你需要设置四个数据库表，如下面的图所示：
- en: '![](img/d2edbf2b-2268-4cf9-9414-d68a1a2d93df.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d2edbf2b-2268-4cf9-9414-d68a1a2d93df.png)'
- en: 'Figure 13: Spring Security ACL database schema'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13：Spring Security ACL 数据库模式
- en: 'Here is a small explanation of the tables in the preceding diagram:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是对前面图中表格的简要说明：
- en: '`ACL_CLASS` table: As the name suggests, it stores the domain object''s class
    name.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ACL_CLASS` 表：正如其名所示，它存储域对象的类名。'
- en: '`ACL_SID` table: **Security Identity** (**SID**) stores either a username (`testuser`)
    or role name (`ROLE_ADMIN`). The `PRINCIPAL` column stores either 0 or 1, 0 if
    the SID is a username and 1 if it is a role name.'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ACL_SID` 表：**安全身份**（**SID**）存储用户名（`testuser`）或角色名（`ROLE_ADMIN`）。`PRINCIPAL`
    列存储 0 或 1，0 表示 SID 是用户名，1 表示角色名。'
- en: '`ACL_OBJECT_IDENTITY` table: It is entrusted to store object-related information
    and links other tables.'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ACL_OBJECT_IDENTITY` 表：它被委托用于存储对象相关信息并链接其他表。'
- en: '`ACL_ENTRY` table: It stores permission granted to each SID for each `OBJECT_IDENTITY`.'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ACL_ENTRY` 表：它存储为每个 `OBJECT_IDENTITY` 授予的每个 SID 的权限。'
- en: In order for Spring Security ACL to work, it also requires a cache. One of the
    easiest ones to integrate with Spring is EhCache.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使 Spring Security ACL 工作，它还需要一个缓存。最容易与 Spring 集成的之一是 EhCache。
- en: 'Spring Security ACL supports the following permissions:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security ACL 支持以下权限：
- en: '`READ`'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`READ`'
- en: '`WRITE`'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`WRITE`'
- en: '`CREATE`'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CREATE`'
- en: '`DELETE`'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DELETE`'
- en: '`ADMINISTRATION`'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ADMINISTRATION`'
- en: 'To make it work, we have to enable it using `@EnableGlobalMethodSecurity(prePostEnabled
    = true, securedEnabled = true)`. We are now ready to put annotations in place
    to start access controlling domain objects. A code snippet in which Spring ACL
    is used is as follows:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使其工作，我们必须使用 `@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled
    = true)` 启用它。我们现在已经准备好放置注解以开始访问控制域对象。以下是一个使用 Spring ACL 的代码片段：
- en: '[PRE30]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'After querying for records (post-filtering), the result (a list) is scrutinized,
    and filtering takes place to only return the object to which the user has `READ`
    permission. We can also use `@PostAuthorize` as follows:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 在查询记录（后过滤）后，结果（一个列表）被仔细检查，并且过滤只返回用户有 `READ` 权限的对象。我们还可以使用 `@PostAuthorize` 如下：
- en: '[PRE31]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'After execution of the method (`@Post`), if the user has `READ` access on the
    object, it is returned. Otherwise, it throws an `AccessDeniedException` exception:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 在方法执行后（`@Post`），如果用户对对象有 `READ` 访问权限，则返回。否则，它抛出 `AccessDeniedException` 异常：
- en: '[PRE32]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Before the method is fired (`@Pre`), it checks whether the user has the `WRITE`
    permission on the object. Here, we use the parameter being passed into the method
    to check for user permission. If the user has permission to `WRITE`, it executes
    the method. Otherwise, it throws an exception.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在方法被触发之前（`@Pre`），它检查用户是否对对象有 `WRITE` 权限。在这里，我们使用传递给方法的参数来检查用户权限。如果用户有 `WRITE`
    权限，则执行方法。否则，它抛出异常。
- en: We can have a fully fledged example of this, but we are already stretched by
    the number of topics that this book can cover. So I will leave it just here, and
    I am sure you now have enough information to make a complete implementation.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以有一个完整的示例，但由于这本书可以涵盖的主题数量已经很多，所以我们已经扩展了。因此，我将在这里停止，我相信你现在已经有了足够的信息来完成完整的实现。
- en: 'Some of the common built-in Spring expressions regarding security are as follows:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 关于安全性的常见内置 Spring 表达式如下：
- en: '| **Expression** | **Description** |'
  id: totrans-210
  prefs: []
  type: TYPE_TB
  zh: '| **表达式** | **描述** |'
- en: '| `hasRole([role_name])` | If the current user has `role_name`, it returns
    `true` |'
  id: totrans-211
  prefs: []
  type: TYPE_TB
  zh: '| `hasRole([role_name])` | 如果当前用户有 `role_name`，则返回 `true` |'
- en: '| `hasAnyRole([role_name1, role_name2])` | If the current user has any of the
    role names in the list, it returns `true` |'
  id: totrans-212
  prefs: []
  type: TYPE_TB
  zh: '| `hasAnyRole([role_name1, role_name2])` | 如果当前用户具有列表中的任何角色名称，则返回 `true` |'
- en: '| `hasAuthority([authority])` | If the current user has specified authority,
    it returns `true` |'
  id: totrans-213
  prefs: []
  type: TYPE_TB
  zh: '| `hasAuthority([authority])` | 如果当前用户具有指定的权限，则返回 `true` |'
- en: '| `hasAnyAuthority([authority1, authority2])` | If the current user has any
    of the authorities in the specified list, it returns `true` |'
  id: totrans-214
  prefs: []
  type: TYPE_TB
  zh: '| `hasAnyAuthority([authority1, authority2])` | 如果当前用户具有指定列表中的任何权限，则返回 `true`
    |'
- en: '| `permitAll` | Always equates to `true` |'
  id: totrans-215
  prefs: []
  type: TYPE_TB
  zh: '| `permitAll` | 总是等于 `true` |'
- en: '| `denyAll` | Always equates to `false` |'
  id: totrans-216
  prefs: []
  type: TYPE_TB
  zh: '| `denyAll` | 总是等于 `false` |'
- en: '| `isAnonymous()` | If the current user is anonymous, it returns `true` |'
  id: totrans-217
  prefs: []
  type: TYPE_TB
  zh: '| `isAnonymous()` | 如果当前用户是匿名用户，则返回 `true` |'
- en: '| `isRememberMe()` | If the current user has set remember-me, it returns `true`
    |'
  id: totrans-218
  prefs: []
  type: TYPE_TB
  zh: '| `isRememberMe()` | 如果当前用户设置了记住我，则返回 `true` |'
- en: '| `isAuthenticated()` | If the current user is not anonymous, it returns `true`
    |'
  id: totrans-219
  prefs: []
  type: TYPE_TB
  zh: '| `isAuthenticated()` | 如果当前用户不是匿名用户，则返回 `true` |'
- en: '| `isFullyAuthenticated()` | If the current user is not anonymous or remember-me
    user, it returns `true` |'
  id: totrans-220
  prefs: []
  type: TYPE_TB
  zh: '| `isFullyAuthenticated()` | 如果当前用户不是匿名用户或记住我用户，则返回 `true` |'
- en: '| `hasPermission(Object target, Object permission)` | If the current user has
    permission to target object, it returns `true` |'
  id: totrans-221
  prefs: []
  type: TYPE_TB
  zh: '| `hasPermission(Object target, Object permission)` | 如果当前用户有权限访问目标对象，则返回 `true`
    |'
- en: '| `hasPermission(Object targetId, Object targetType, Object permission)` |
    If the current user has permission to target object, it returns `true` |'
  id: totrans-222
  prefs: []
  type: TYPE_TB
  zh: '| `hasPermission(Object targetId, Object targetType, Object permission)` |
    如果当前用户有权限访问目标对象，则返回 `true` |'
- en: Other Spring Security capabilities
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他 Spring Security 功能
- en: 'Spring Security has a number of capabilities apart from core security features,
    authentication and authorization. Some of the most important ones are listed here.
    In [Chapter 7](8fd292f5-44c6-4cfb-b9cb-9a1bdb677624.xhtml), *Spring Security Add-Ons*,
    we will go through each of these in more detail using hands-on coding. We will
    build on the example that we have created in this chapter and explain each of
    these very important Spring Security capabilities:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: Spring Security 除了核心安全特性、认证和授权之外，还有许多功能。其中一些最重要的功能在此列出。在[第7章](8fd292f5-44c6-4cfb-b9cb-9a1bdb677624.xhtml)，*Spring
    Security 扩展组件*中，我们将通过实际编码对这些功能进行更详细的介绍。我们将基于本章创建的示例，并解释这些非常重要的 Spring Security
    功能：
- en: '**Remember-me authentication**: This is also known as persistent-login, and
    it allows websites to remember a user''s identity in between multiple sessions.
    Spring Security provides a couple of implementations (hashed-token-based and persistent-token-based)
    that make this easy.'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**记住我认证**：这也被称为持久登录，允许网站在多个会话之间记住用户的身份。Spring Security 提供了几种实现（基于散列令牌和基于持久令牌），使这变得简单。'
- en: '**Cross Site Request Forgery** (**CSRF**): This is a very common security exploit
    employed by hackers to do unethical operations, whereby unauthorized commands
    are sent on behalf of the user. Spring Security allows us to fix this exploit
    easily with configurations.'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**跨站请求伪造** (**CSRF**)：这是一种黑客常用的非常常见的安全漏洞，黑客通过代表用户发送未经授权的命令来进行不道德的操作。Spring
    Security 允许我们通过配置轻松修复这个漏洞。'
- en: '**Cross-Origin Resource Sharing** (**CORS**): This is a mechanism by which
    a web application running on a particular domain can access resources exposed
    in another domain by adding additional HTTP headers. This is one of the security
    mechanisms employed to make sure that only legitimate code can have access to
    resources exposed by a domain.'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**跨域资源共享** (**CORS**)：这是一种机制，允许运行在特定域上的 Web 应用程序通过添加额外的 HTTP 头部来访问另一个域中暴露的资源。这是确保只有合法代码可以访问由域暴露的资源所采用的安全机制之一。'
- en: '**Session management**: Proper user session management is key to any application''s
    security. Here are some of the important session-related functions that Spring
    Security takes care of easily:'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**会话管理**：适当的用户会话管理是任何应用程序安全性的关键。以下是 Spring Security 轻松处理的几个重要会话相关功能：'
- en: '**Session timeout**: This makes sure that user sessions time out at the configured
    value, and this cannot be hacked.'
  id: totrans-229
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**会话超时**：这确保用户会话在配置的值上超时，并且这不能被黑客破解。'
- en: '**Concurrent session**: This prevents users from having multiple (configured
    value) sessions active within the server.'
  id: totrans-230
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**并发会话**：这可以防止用户在服务器内拥有多个（配置值）活动会话。'
- en: '**Session fixation**: This is a security attack that allows the attacker to
    hijack a valid user''s session and then start using it for unethical operations.'
  id: totrans-231
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**会话固定攻击**：这是一种安全攻击，允许攻击者劫持一个有效用户的会话，然后开始使用它进行不道德的操作。'
- en: These are some of the important features that Spring Security brings to the
    table. We will thoroughly explore them after covering additional topics that are
    relevant to Spring Security.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是Spring Security带来的重要特性之一。在覆盖与Spring Security相关的其他主题之后，我们将彻底探讨它们。
- en: Summary
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter aimed at introducing two important security concepts, namely authentication
    and authorization, and how they are supported by Spring Security.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 本章旨在介绍两个重要的安全概念，即身份验证和授权，以及它们如何由Spring Security支持。
- en: We started by explaining these concepts in detail and then dived into them with
    the help of a sample application. We have used Spring MVC application as a base
    to help you understand Spring Security concepts. [Chapter 4](5bccc5ce-c067-46ee-a91c-02ee11dd9fc7.xhtml),
    *Authentication Using CAS and JAAS*, is aimed at explaining reactive web application
    framework, Spring WebFlux.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先详细解释了这些概念，然后通过一个示例应用程序深入探讨了它们。我们使用Spring MVC应用程序作为基础，帮助您理解Spring Security概念。[第4章](5bccc5ce-c067-46ee-a91c-02ee11dd9fc7.xhtml)，*使用CAS和JAAS进行身份验证*，旨在解释反应式Web应用程序框架Spring
    WebFlux。
- en: In the next chapter, we will go through other authentication mechanisms supported
    by Spring Security by extending the example that we have built in this chapter.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将通过扩展本章构建的示例，介绍Spring Security支持的其他身份验证机制。
