<html><head></head><body>
		<div id="_idContainer074">
			<h1 id="_idParaDest-232" class="chapter-number"><a id="_idTextAnchor254"/>13</h1>
			<h1 id="_idParaDest-233"><a id="_idTextAnchor255"/>Desktop Graphical User Interface Coding with Swing and JavaFX</h1>
			<p>This chapter will introduce a simple but complete application for providing three common financial calculations. These are loan payments, the future value of money, and a savings goal. We will look at two versions of this application, one written using the Swing library and the second using the JavaFX library. The server-side coding for this application will be covered in <a href="B19088_15.xhtml#_idTextAnchor301"><span class="No-Break"><em class="italic">Chapter 15</em></span></a>, <em class="italic">Jakarta </em><span class="No-Break"><em class="italic">Faces Application</em></span><span class="No-Break">.</span></p>
			<p>We will cover the following in <span class="No-Break">this chapter:</span></p>
			<ul>
				<li>A brief history of <span class="No-Break">Java GUIs</span></li>
				<li><a id="_idTextAnchor256"/>A financial calculator <span class="No-Break">program design</span></li>
				<li>Using the Swing <span class="No-Break">GUI framework</span></li>
				<li>Using the JavaFX <span class="No-Break">GUI framework</span></li>
				<li>Which should <span class="No-Break">I use?</span></li>
			</ul>
			<p>By the end of this chapter, you will understand the basics of GUI coding using the two most widely <span class="No-Break">used frameworks.</span></p>
			<h1 id="_idParaDest-234"><a id="_idTextAnchor257"/>Technical requirements</h1>
			<p>Here are the tools required to run the examples in <span class="No-Break">this chapter:</span></p>
			<ul>
				<li><span class="No-Break">Java 17</span></li>
				<li>A <span class="No-Break">text editor</span></li>
				<li>Maven 3.8.6 or a newer <span class="No-Break">version installed</span></li>
			</ul>
			<p>The sample code for this chapter is available <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Transitioning-to-Java/tree/chapter13"><span class="No-Break">https://github.com/PacktPublishing/Transitioning-to-Java/tree/chapter13</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-235"><a id="_idTextAnchor258"/>A brief history of Java GUIs</h1>
			<p>The first user interfaces in <a id="_idIndexMarker844"/>personal computers mimicked the terminals of mainframes or minicomputers. Apple introduced the Mac in 1984 and Microsoft introduced Windows a year later. Yet, most personal computers sold in the 1980s had terminal interfaces. What changed everything was the general availability of the internet and the creation of the technology behind the World Wide Web by Tim Berners-Lee, starting in 1989. By the end of the 20th century, we expected the computers we used to have a GUI. In <a href="B19088_15.xhtml#_idTextAnchor301"><span class="No-Break"><em class="italic">Chapter 15</em></span></a>, <em class="italic">Jakarta Faces Application</em>, we will look at web programming in Java, while in this chapter, we will look at desktop <span class="No-Break">GUI programming.</span></p>
			<p>When Java was introduced in 1995, its original purpose was the creation of applets, small programs that run from web pages inside a web browser. These pages delivered compiled applets that ran in the JVM rather than in the browser. JavaScript, also developed around the same time, ran inside the browser. This led to the first GUI library, which is still included in Java today, called the <strong class="bold">Abstract Window Toolkit </strong>(<strong class="bold">AWT</strong>), still usable for <a id="_idIndexMarker845"/>desktop apps. Applets are no more, having <span class="No-Break">been deprecated.</span></p>
			<p>The AWT depends on the underlying operating system for rendering a GUI. An AWT program running on an Apple Mac had a look and feel like a native Mac app. If you ran the same code on a Windows PC, its look and feel were like a native Windows app. As Java became popular in the application rather than web space, an enhanced GUI library, Swing – first introduced in 1996 – gained traction. Unlike AWT, Swing could render its own controls. Now, it was possible <a id="_idIndexMarker846"/>to develop a user interface that looked nearly identical on Windows, Mac, and Linux. In the <em class="italic">Further reading</em> list is a link to a Swing look-and-feel library called <strong class="bold">Napkin</strong>. It is an extreme example of how you could style Swing applications. Swing <a id="_idIndexMarker847"/>remains in wide use today. It is a standard library, included with all distributions of Java. It is maintained with bug fixes and <span class="No-Break">minor enhancements.</span></p>
			<p>In 2008, JavaFX 1.0, an alternative to Swing, was introduced. The version we will be looking at began as JavaFX 2.0 in 2011. The original purpose of JavaFX was to have a common platform for GUI apps on the desktop, the web, and mobile devices. Like Swing, it took care of its own rendering. It also introduced a declarative approach to defining a user interface, based on the XML language FXML. In this chapter, we will look at the imperative <a id="_idIndexMarker848"/>or coding approach to defining <span class="No-Break">an interface.</span></p>
			<p>Now, let us look at the application we <span class="No-Break">will construct.</span></p>
			<h1 id="_idParaDest-236"><a id="_idTextAnchor259"/>Financial calculator program design</h1>
			<p>In the previous <a id="_idIndexMarker849"/>chapter, we took the loan calculation that used doubles and changed it to use <strong class="source-inline">BigDecimal</strong>. We will continue to use this calculation plus two additional ones. One is a savings goal, whereby you indicate how much you wish to save, what the expected interest rate will be, and the number of months in which you wish to reach your goal. The second is the future value, whereby you can determine the amount of money you will have after saving the same amount for a specific number of months at an expected <span class="No-Break">interest rate.</span></p>
			<p>We will use the same data class and business class from the previous chapter. To the business class, we will add the two new calculations. We will not go over the new calculations in this chapter, as you can see them in the chapter’s source code. For now, we will consider <span class="No-Break">the GUI.</span></p>
			<p>The application will present the user with three choices for the calculation. We want a single form into which we can enter the three values each calculation requires and where the result will appear. Finally, we want a button to signal that the calculation can be carried out. I usually work out the actual design on paper or a whiteboard, such as <span class="No-Break">this figure:</span></p>
			<div>
				<div id="_idContainer067" class="IMG---Figure">
					<img src="image/B19088_13_01.jpg" alt="Figure 13.1 – A ﻿﻿hand-drawn design"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.1 – A hand-drawn design</p>
			<p>When we finish, it will look like this when doing <span class="No-Break">a calculation:</span></p>
			<div>
				<div id="_idContainer068" class="IMG---Figure">
					<img src="image/B19088_13_02.jpg" alt="Figure 13.2 – The Swing version"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.2 – The Swing version</p>
			<p>The choice of calculation is determined by a group of three radio buttons. These are controls that are either selected or not, and you can only select one. When the user selects a calculation, the <a id="_idIndexMarker850"/>description of the title that follows the radio buttons will change, all fields will become zero, the first input field description will change, and pressing the <strong class="bold">Calculate</strong> button will use the calculation that matches the radio <span class="No-Break">button selected.</span></p>
			<div>
				<div id="_idContainer069" class="IMG---Figure">
					<img src="image/B19088_13_03.jpg" alt="Figure 13.3 – The future value and savings goal screens"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.3 – The future value and savings goal screens</p>
			<p>As you already know, users cannot always be trusted to enter valid information. There is always a user who will enter <strong class="source-inline">Bob</strong> for a loan amount. We could throw up message boxes informing the user of their error. In certain situations, this does make sense. In this user interface, we can recognize that the only allowable input in the first three fields must be a number and only allow a single decimal point. You just cannot enter <strong class="source-inline">Bob</strong>. A field that is blank will be <a id="_idIndexMarker851"/>changed to contain a zero. The last field is not editable, as it displays <span class="No-Break">the result.</span></p>
			<h2 id="_idParaDest-237"><a id="_idTextAnchor260"/>Internationalization – i18n</h2>
			<p>One last element <a id="_idIndexMarker852"/>of the design is internationalization, commonly <a id="_idIndexMarker853"/>referred to as i18n. This means that this program can present itself in multiple languages. I live in Canada, where we have two official languages – English and French. This means that anything that has written text in the interface must have a version in each language. Here it is <span class="No-Break">in French:</span></p>
			<div>
				<div id="_idContainer070" class="IMG---Figure">
					<img src="image/B19088_13_04.jpg" alt="Figure 13.4 – The French version"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.4 – The French version</p>
			<p>We accomplish i18n by placing all text that will appear in the GUI into a properties file, one for each language you plan to support. Here is the English <span class="No-Break">properties file:</span></p>
			<pre class="source-code">
loan_amount=Loan Amount
savings_amount=Savings Amount
goal_amount=Goal Amount
interest_rate=Interest Rate
term_in_months=Term In Months
result=Result
calculate=Calculate
calc_error=Arithmetic Exception
calc_msg=You may not have a zero in any input field.
title=Calculations - Swing
loan_title=Loan Calculation
savings_title=Future Value of Savings Calculation
goal_title=Savings Goal Calculation
loan_radio=Loan
savings_radio=Savings
goal_radio=Goal
alert_a=The value &gt;%s&lt; cannot \nbe converted to a number.
format_error=Number Format Error</pre>
			<p>You can see the French <a id="_idIndexMarker854"/>version in the project. These properties files are commonly called <strong class="bold">message bundles</strong>. The appropriate file is loaded when the program starts. All text that must be displayed is referenced by the key value in the properties file. The names of the <a id="_idIndexMarker855"/>keys are the same in bundles. Only the value associated <a id="_idIndexMarker856"/>with the key is in whatever language this bundle represents. This will be the same in the JavaFX version of this program. To employ <strong class="source-inline">ResourceBundle</strong>, you must first load the <span class="No-Break">properties file.</span></p>
			<p>Use the <span class="No-Break">default </span><span class="No-Break"><strong class="source-inline">Locale</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
var form = ResourceBundle.getBundle("MessagesBundle");</pre>
			<p>Set <strong class="source-inline">Locale</strong> in the code, which can be quite useful <span class="No-Break">for testing:</span></p>
			<pre class="source-code">
Locale locale = new Locale("en", "CA");
var form = ResourceBundle.getBundle(
                         "MessagesBundle", locale);</pre>
			<p>Internationalization works the same in JavaFX. Let us look at how this application is coded <span class="No-Break">in Swing.</span></p>
			<h1 id="_idParaDest-238"><a id="_idTextAnchor261"/>Using the Swing GUI framework</h1>
			<p>With the GUI library <a id="_idIndexMarker857"/>chosen, we can now decide what classes this application will need and how they will be <a id="_idTextAnchor262"/>packaged. Here is the finished <span class="No-Break">project layout:</span></p>
			<div>
				<div id="_idContainer071" class="IMG---Figure">
					<img src="image/B19088_13_05.jpg" alt="Figure 13.5 – The Swing project layout"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.5 – The Swing project layout</p>
			<p>The source code on GitHub is extremely commented, and I encourage you to download it while reading this. Let us begin by looking at the basic components and controls of a Swing application. We begin <span class="No-Break">with </span><span class="No-Break"><strong class="source-inline">JFrame</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-239"><a id="_idTextAnchor263"/>JFrame</h2>
			<p>Every Swing application needs a main or top-level container. There are four classes for this purpose, but <a id="_idIndexMarker858"/>one is now deprecated for removal. They <a id="_idIndexMarker859"/>are <strong class="source-inline">JFrame</strong>, <strong class="source-inline">JDialog</strong>, <strong class="source-inline">JWindow</strong>, and the deprecated <strong class="source-inline">JApplet</strong>. The <strong class="source-inline">JWindow</strong> class is ideal for splash screens, as they have no decorations, such as a border, title bar, or window controls. You commonly use <strong class="source-inline">JDialog</strong> as part of an application to interact with a user over details you do not want in the top-level container you are using. It can also be used for simple applications that require minimal interaction with the user and so can also be used as a top-level container. <strong class="source-inline">JApplet</strong> brought Swing to the web browser, but it is now headed to the dustbin of history. Let us talk <span class="No-Break">about </span><span class="No-Break"><strong class="source-inline">JFrame</strong></span><span class="No-Break">.</span></p>
			<p>The <strong class="source-inline">JFrame</strong> class is a decorated container, meaning it has a border and title bar. It supports <strong class="source-inline">JMenuBar</strong> should you want a menu. It can be resizable or a fixed size. Into <strong class="source-inline">JFrame</strong> goes all <a id="_idIndexMarker860"/>other components and controls. In my sample code, I have used inheritance <a id="_idIndexMarker861"/>to extend <strong class="source-inline">JFrame</strong> in the <strong class="source-inline">FinanceCalculatorMain</strong> class. This simplifies <span class="No-Break">the coding.</span></p>
			<p>Here is the code that sets up the frame. You will see an additional step in the <span class="No-Break"><em class="italic">JPanel</em></span><span class="No-Break"> section:</span></p>
			<pre class="source-code">
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setTitle(form.getString("title"));
setSize(620, 450);
setVisible(true);</pre>
			<h2 id="_idParaDest-240"><a id="_idTextAnchor264"/>JPanel</h2>
			<p>The <strong class="source-inline">JPanel</strong> class is <a id="_idIndexMarker862"/>a container for other components and controls. While the <strong class="source-inline">JFrame</strong> class <a id="_idIndexMarker863"/>already has the <strong class="source-inline">JPanel</strong> class, which is commonly referred to as the content pane, we rarely use it for anything more than adding a user-designed <strong class="source-inline">JPanel</strong>. This is exactly what my sample does. There is a second class called <strong class="source-inline">FinanceCalculatorUI</strong> that <span class="No-Break">extends </span><span class="No-Break"><strong class="source-inline">JPanel</strong></span><span class="No-Break">.</span></p>
			<p>To add controls such as buttons, text fields, or other JPanels to a <strong class="source-inline">JPanel</strong> class, we must first decide on a <strong class="source-inline">LayoutManager</strong> class. These are objects that are responsible for the placement of items in <strong class="source-inline">JPanel</strong>. The main panel in the app is <strong class="source-inline">FinancialCalculatorUI</strong>, which extends <strong class="source-inline">JPanel</strong>. In its constructor, we write <span class="No-Break">the following:</span></p>
			<pre class="source-code">
super(new BorderLayout());</pre>
			<p>Later in the code, another <strong class="source-inline">JPanel</strong> is created that does not extend another class. We can pass the layout manager through the <span class="No-Break"><strong class="source-inline">JPanel</strong></span><span class="No-Break"> constructor:</span></p>
			<pre class="source-code">
var innerForm = new JPanel(new BorderLayout());</pre>
			<p>It is quite common to create a user interface with multiple panels. The following diagram shows all the <span class="No-Break">panels used:</span></p>
			<div>
				<div id="_idContainer072" class="IMG---Figure">
					<img src="image/B19088_13_06.jpg" alt="Figure 13.6 – The J﻿Panel layout"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.6 – The JPanel layout</p>
			<p>The first <strong class="source-inline">JPanel</strong>, <strong class="source-inline">FinancialCalculatorUI</strong>, is assigned to the content pane of <strong class="source-inline">JFrame</strong>. It will have a <strong class="source-inline">BorderLayout</strong> that has north, south, east, west, and center zones. In each zone <a id="_idIndexMarker864"/>of a layout, you can add another panel or <a id="_idIndexMarker865"/>control. Anything you place in this layout will fill the zone. In the north, we placed a panel with <strong class="source-inline">JRadioButtons</strong>. In the center, we placed another <strong class="source-inline">JPanel</strong> with <strong class="source-inline">BorderLayout</strong>. In the north of this panel, we place a panel that contains the title. In the south, there is a panel with the calculate button. In the center, we place another panel with <strong class="source-inline">GridBagLayout</strong> that allows us to treat the panel as rows and columns, which is ideal <span class="No-Break">for forms.</span></p>
			<h2 id="_idParaDest-241"><a id="_idTextAnchor265"/>Event handlers</h2>
			<p>Any component <a id="_idIndexMarker866"/>that can accept user input from either the keyboard or mouse can generate an event. You can choose to ignore an event, or you can register an event handler you have written. Here is the code that registers a method in the same class as <span class="No-Break">the handler:</span></p>
			<pre class="source-code">
calculate.addActionListener(this::calculateButtonHandler);</pre>
			<p>The <strong class="source-inline">calculateButtonHandler</strong> method accepts an <strong class="source-inline">ActionEvent</strong> object. The object contains information on the event, but in this case, we do not need it. The method validates that the fields can be <strong class="source-inline">BigDecimal</strong>, assigns them to <strong class="source-inline">FinanceBean</strong>, and, if all is well, calls on the <strong class="source-inline">FinanceCalculations</strong> object to do <span class="No-Break">the calculation.</span></p>
			<h2 id="_idParaDest-242"><a id="_idTextAnchor266"/>Document filter</h2>
			<p>In our design, we decided to only allow the end user to enter a number. This number can only have one decimal <a id="_idIndexMarker867"/>point and without a sign, because all values must be positive. In Swing, <strong class="source-inline">JTextField</strong> has inside it an object of type <strong class="source-inline">Document</strong>, and from this, we can access and replace the <strong class="source-inline">DocumentFilter</strong> object. In the filter, there is a method called <strong class="source-inline">replace</strong> that is called with every keystroke. We will install our own filter that <span class="No-Break">inherits/extends </span><span class="No-Break"><strong class="source-inline">DocumentFilter</strong></span><span class="No-Break">.</span></p>
			<p>The <strong class="source-inline">replace</strong> method receives the string that you entered and the location where in the current text field <a id="_idIndexMarker868"/>this string is inserted. It is called before the text is entered in the document; we have access to the contents of the text field before it is changed. This means that should the user input turn out to be invalid, we can restore what was in the text field prior to the new string <span class="No-Break">we entered.</span></p>
			<h2 id="_idParaDest-243"><a id="_idTextAnchor267"/>Pattern matching with regular expressions</h2>
			<p>A <em class="italic">regular expression</em> or <em class="italic">regex</em> is a description of what may or may not be allowed in a string. Pattern <a id="_idIndexMarker869"/>matching <a id="_idIndexMarker870"/>employs a regex to determine whether a string that a pattern is being applied to meets the requirements of the regex. These expressions define a pattern that will be applied to the user <span class="No-Break">input string:</span></p>
			<pre class="source-code">
private final Pattern numberPattern =
            Pattern.compile("^[\\d]*[\\.]?[\\d]*$");
private final Matcher numberMatch =
            numberPattern.matcher("");</pre>
			<p>The first line takes a regular expression and compiles it. Regular expressions are compiled every time you use them, if not compiled in advance. This is the role of creating a <span class="No-Break"><strong class="source-inline">Pattern</strong></span><span class="No-Break"> object.</span></p>
			<p>The second line creates a <strong class="source-inline">Matcher</strong> object. Here, we create a <strong class="source-inline">Matcher</strong> object built from the <strong class="source-inline">Pattern</strong> object that can evaluate the string in the parenthesis and return <strong class="source-inline">true</strong> or <strong class="source-inline">false</strong>. In the <strong class="source-inline">Matcher</strong> declaration, it might seem strange to search in an empty string, but as we will see, you can change the string that you want to search for after you create the <span class="No-Break"><strong class="source-inline">Matcher</strong></span><span class="No-Break"> object:</span></p>
			<pre class="source-code">
if (numberMatch.reset(newText).matches()) {
    super.replace(fb, offset, length, string, attrs);
}</pre>
			<p>The <strong class="source-inline">reset</strong> method of <strong class="source-inline">Matcher</strong> is what allows us to change a string to search through. The <strong class="source-inline">newText</strong> object is the string after the new characters are added to the original string. If the match <a id="_idIndexMarker871"/>fails, then the string already in the text field is unchanged. The approach taken here will work if the <a id="_idIndexMarker872"/>user is pasting strings into the <span class="No-Break">text field.</span></p>
			<p>There are many developers who believe that pattern matching is costly, meaning it uses a lot of CPU time. Exceptions are also costly. If they are both costly, then the simpler exception approach will have the edge for most users. However, a simple test comparing the performance <a id="_idIndexMarker873"/>of pattern matching versus exception throwing, using the Java <strong class="bold">Microbenchmark Harness</strong> library, showed that pattern matching can be between 8 and 10 times faster than using <span class="No-Break">an exception.</span></p>
			<h2 id="_idParaDest-244"><a id="_idTextAnchor268"/>Controls and panels</h2>
			<p>Let us look at two <a id="_idIndexMarker874"/>controls that are placed in a panel with <strong class="source-inline">GridBagLayout</strong>. We begin with <strong class="source-inline">JLabel</strong>. We provide the text to display in its constructor. The actual text is coming from the appropriate <strong class="source-inline">ResourceBundle</strong> that the <strong class="source-inline">form</strong> object represents. We set the font next. This font is used in more than one place, so it has already been defined as <strong class="source-inline">labelFont</strong>. Finally, we add <strong class="source-inline">JLabel</strong> to the panel. To do this, we need an object of type <strong class="source-inline">GridBagConstraints</strong>. There are five details about how this control is added. The number <strong class="source-inline">0</strong> represents the column and the number <strong class="source-inline">2</strong> represents the row. The next two numbers represent how many columns and rows this control will use in the grid. Finally, we indicate the alignment of the control in <span class="No-Break">the grid:</span></p>
			<pre class="source-code">
inputLabel = new JLabel(form.getString("loan_amount"));
inputLabel.setFont(labelFont);
panelForm.add(inputLabel,
     getConstraints(0, 2, 1, 1, GridBagConstraints.WEST));</pre>
			<p>The <strong class="source-inline">JTextField</strong> control has added settings for horizontal alignment and the width of the field measured <span class="No-Break">in columns:</span></p>
			<pre class="source-code">
inputValue = new JTextField("0");
inputValue.setFont(textFont);
inputValue.setHorizontalAlignment(SwingConstants.RIGHT);
inputValue.setColumns(15);</pre>
			<p>Here, we <a id="_idIndexMarker875"/>extract the control’s <strong class="source-inline">Document</strong> and use this reference to install <span class="No-Break">our filter:</span></p>
			<pre class="source-code">
var inputDocument =
    (AbstractDocument) inputValue.getDocument();
inputDocument.setDocumentFilter(filter);</pre>
			<p>Finally, we add <strong class="source-inline">JTextField</strong> to <span class="No-Break">the grid:</span></p>
			<pre class="source-code">
panelForm.add(inputValue,
     getConstraints(1, 2, 1, 1, GridBagConstraints.WEST));</pre>
			<p>You will find more details on this Swing version in the source code. Now, let us look at the <span class="No-Break">JavaFX version.</span></p>
			<h1 id="_idParaDest-245"><a id="_idTextAnchor269"/>Using the JavaFX GUI framework</h1>
			<p>This version of the program <a id="_idIndexMarker876"/>is like the Swing version. The design of the user interface is identical in that it employs panes in panes. Here is the finished <span class="No-Break">project layout:</span></p>
			<div>
				<div id="_idContainer073" class="IMG---Figure">
					<img src="image/B19088_13_07.jpg" alt="Figure 13.7 – The JavaFX program layout"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.7 – The JavaFX program layout</p>
			<p>Let us now look at <a id="_idIndexMarker877"/>the classes from the JavaFX framework that we will need for <span class="No-Break">our program.</span></p>
			<h2 id="_idParaDest-246"><a id="_idTextAnchor270"/>Application</h2>
			<p>A JavaFX program <a id="_idIndexMarker878"/>must contain a class that extends <strong class="source-inline">Application</strong>. Within this class, we can construct the user interface or delegate this work to another class. A class that extends <strong class="source-inline">Application</strong> must implement a method called <strong class="source-inline">start</strong> and, optionally, a method called <strong class="source-inline">init</strong>. What you rarely have is a constructor. The JavaFX framework is not available to a constructor of a class that extends <strong class="source-inline">Application</strong>. This is where <strong class="source-inline">init</strong> comes in. It plays the role of the constructor but in an environment where JavaFX is up and running. You do not call <strong class="source-inline">init</strong>; <span class="No-Break">JavaFX will.</span></p>
			<p>The <strong class="source-inline">start</strong> method is where the creation of the GUI commences. The method is called by JavaFX right <span class="No-Break">after </span><span class="No-Break"><strong class="source-inline">init</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-247"><a id="_idTextAnchor271"/>PrimaryStage</h2>
			<p>The <strong class="source-inline">PrimaryStage</strong> object is akin to <strong class="source-inline">JFrame</strong>. You do not create an instance of it. The <strong class="source-inline">Application</strong> class <a id="_idIndexMarker879"/>you are extending creates a <strong class="source-inline">PrimaryStage</strong> object and passes it on <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">start</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
    @Override
    public void start(Stage primaryStage) {</pre>
			<h2 id="_idParaDest-248"><a id="_idTextAnchor272"/>Pane</h2>
			<p>Unlike Swing, where <a id="_idIndexMarker880"/>you define a panel and assign a layout manager to it, FX uses panes that include the layout. The first pane that we are creating is <strong class="source-inline">BorderPane</strong>, which has top, bottom, left, right, and center zones. We are adding to it a pane that contains the radio buttons at the top and another pane in <span class="No-Break">the center:</span></p>
			<pre class="source-code">
        var root = new BorderPane();
        root.setTop(gui.buildRadioButtonsBox());
        root.setCenter(gui.buildForm());</pre>
			<h2 id="_idParaDest-249"><a id="_idTextAnchor273"/>Scene</h2>
			<p>The story goes that the <a id="_idIndexMarker881"/>original developer of JavaFX was a performing arts aficionado, and this led him to use theater names for parts of the framework. A <strong class="source-inline">Stage</strong> object must contain a <strong class="source-inline">Scene</strong> object that, in turn, contains a pane object. You can create multiple scenes and switch between them if required. For me, one of the <a id="_idIndexMarker882"/>most noteworthy features of JavaFX is its use of <strong class="bold">Cascading Style Sheet</strong> (<strong class="bold">CSS</strong>), and the second line will <span class="No-Break">load it.</span></p>
			<pre class="source-code">
        var scene = new Scene(root, 620, 450);
        scene.getStylesheets().add("styles/Styles.css");</pre>
			<p>The next four lines should be self-explanatory. The last line calls the show method to get the <span class="No-Break">program going.</span></p>
			<pre class="source-code">
        primaryStage.setTitle(form.getString("title"));
        primaryStage.setScene(scene);
        primaryStage.centerOnScreen();
        primaryStage.show();
    }</pre>
			<h2 id="_idParaDest-250"><a id="_idTextAnchor274"/>CSS style sheets</h2>
			<p>You style <a id="_idIndexMarker883"/>components using CSS. This is similar but not identical <a id="_idIndexMarker884"/>to CSS used in web development. In the <em class="italic">Further reading</em> section, there is a link to the CSS reference document. Here is the style sheet used in this application. Class names beginning with a period are predefined. Class names beginning with an octothorpe are the ones that <span class="No-Break">you assign:</span></p>
			<pre class="source-code">
#prompt_label {
    -fx-font-size:14pt;
    -fx-font-weight:bold;
    -fx-font-family:Verdana, sans-serif;
}
#input_field {
    -fx-font-size:14pt;
    -fx-font-weight:normal;
    -fx-font-family:Verdana, sans-serif;
}
#title {
    -fx-font-size:18pt;
    -fx-font-weight:bold;
    -fx-font-family:Verdana, sans-serif
}
.button {
    -fx-font-family:Verdana, sans-serif;
    -fx-font-weight:bold;
    -fx-font-size:14pt;
}
.radio-button {
    -fx-font-family:Verdana, sans-serif;
    -fx-font-weight:bold;
    -fx-font-size:14pt;
}</pre>
			<p>You can assign a custom class name for a control by using the control’s <span class="No-Break"><strong class="source-inline">setId</strong></span><span class="No-Break"> method:</span></p>
			<pre class="source-code">
resultLabel.setId("prompt_label");</pre>
			<p>You can also <a id="_idIndexMarker885"/>enter the CSS styling directly in the source code. CSS <a id="_idIndexMarker886"/>entered this way will override what is in the external <span class="No-Break">style sheet:</span></p>
			<pre class="source-code">
resultLabel.setStyle("-fx-font-size:18pt; "
     + "-fx-font-weight:bold; "
     + "-fx-font-family:Verdana, sans-serif;");</pre>
			<h2 id="_idParaDest-251"><a id="_idTextAnchor275"/>JavaFX bean</h2>
			<p>A JavaFX bean is <a id="_idIndexMarker887"/>designed to support binding a field in the bean with a control. Any change to the control is written to the bean, and anything written to the bean will update the control. This is commonly called the observer pattern. To accomplish this, we must wrap all the data types into a family of objects called properties. A JavaFX bean can be used where a JavaBean is expected. This means that there is no need to alter the <strong class="source-inline">FinancialCalculations</strong> class, as it will work with the JavaFX bean without any changes to its code. Here is our <strong class="source-inline">FinanceFXBean</strong> class as a <span class="No-Break">JavaFX bean:</span></p>
			<pre class="source-code">
public class FinanceFXBean {</pre>
			<p>Rather than declare primitive or class types directly, they must be wrapped into an appropriate <strong class="source-inline">Property</strong> class. There are such classes for all the primitive data types, such as <strong class="source-inline">DoubleProperty</strong> or <strong class="source-inline">StringProperty</strong>. In our example, we are using <strong class="source-inline">BigDecimal</strong>, for which there is no property. This is where the <strong class="source-inline">ObjectProperty</strong> class comes in. This allows you to use any class as <span class="No-Break">a property:</span></p>
			<pre class="source-code">
private ObjectProperty&lt;BigDecimal&gt; inputValue;
private ObjectProperty&lt;BigDecimal&gt; rate;
private ObjectProperty&lt;BigDecimal&gt; term;
private ObjectProperty&lt;BigDecimal&gt; result;</pre>
			<p>There are two constructors. The first is a default constructor that calls upon the <span class="No-Break">non-default constructor:</span></p>
			<pre class="source-code">
public FinanceFXBean() {
   this(BigDecimal.ZERO, BigDecimal.ZERO, BigDecimal.ZERO);
}</pre>
			<p>The non-default <a id="_idIndexMarker888"/>constructor must instantiate each of the <strong class="source-inline">Property</strong> objects and initialize them, with <strong class="source-inline">BigDecimal</strong> passed to it. There is a simple property for each of the defined properties. <strong class="source-inline">SimpleObjectProperty</strong> is used when there is not a named property, such <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">SimpleDoubleProperty</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
public FinanceFXBean(BigDecimal inputValue,
                BigDecimal rate, BigDecimal term) {
    this.inputValue =
            new SimpleObjectProperty&lt;&gt;(inputValue);
    this.rate =
            new SimpleObjectProperty&lt;&gt;(rate);
    this.term =
            new SimpleObjectProperty&lt;&gt;(term);
    this.result =
            new SimpleObjectProperty&lt;&gt;(BigDecimal.ZERO);
}</pre>
			<p>Unlike a JavaBean, there are three methods for each property. The first two, the getter and setter, retrieve the value from inside the property or change the value in the property. This is <a id="_idIndexMarker889"/>how a JavaFX bean can replace a Java bean, as the getter and setters are named the same and return or receive the same <span class="No-Break">data types:</span></p>
			<pre class="source-code">
public BigDecimal getInputValue() {
    return inputValue.get();
}
public void setInputValue(BigDecimal inputValue) {
    this.inputValue.set(inputValue);
}</pre>
			<p>The last of the three methods returns the property. This is used to implement binding and the <span class="No-Break">observable pattern:</span></p>
			<pre class="source-code">
public ObjectProperty&lt;BigDecimal&gt; inputValueProperty() {
    return inputValue;
}</pre>
			<h2 id="_idParaDest-252"><a id="_idTextAnchor276"/>BigDecimalTextField</h2>
			<p>This is a class <a id="_idIndexMarker890"/>that extends the JavaFX <strong class="source-inline">TextField</strong>. Unlike Swing’s <strong class="source-inline">JTextField</strong>, there is no <strong class="source-inline">Document</strong>. Pressing a key will invoke a method in <strong class="source-inline">TextField</strong> that we override to meet our needs. These methods use regular expressions for pattern matching. There is now a second regular expression that is used to modify the string by removing <span class="No-Break">leading zeros.</span></p>
			<p>There are two methods that we override. The first is <strong class="source-inline">replaceText</strong> for handling keyboard input. The second is <strong class="source-inline">replaceSelection</strong> for handling changes that arise from selecting text and then replacing it, either from the keyboard or <span class="No-Break">by pasting.</span></p>
			<h2 id="_idParaDest-253"><a id="_idTextAnchor277"/>Controls</h2>
			<p>There is a similarity <a id="_idIndexMarker891"/>in how we create controls and add them to a pane. You create <strong class="source-inline">GridPane</strong> to hold <span class="No-Break">the form:</span></p>
			<pre class="source-code">
var loanGrid = new GridPane();</pre>
			<p><strong class="source-inline">inputLabel</strong> is instantiated using <strong class="source-inline">ResourceBundle</strong>. A custom CSS-style <strong class="source-inline">id</strong> is assigned next. Finally, we add the label to the <strong class="source-inline">financeGrid</strong> pane, indicating the column <span class="No-Break">and row:</span></p>
			<pre class="source-code">
inputLabel = new Label(form.getString("loan_amount"));
inputLabel.setId("prompt_label");
financeGrid.add(inputLabel, 0, 0);</pre>
			<p><strong class="source-inline">inputValue</strong> is constructed from our custom <strong class="source-inline">BigDecimalTextField</strong>. We assign it a custom CSS <strong class="source-inline">id</strong>, change its alignment, and add it <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">financeGrid</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
inputValue = new BigDecimalTextField();
inputValue.setId("input_field");
inputValue.setAlignment(Pos.CENTER_RIGHT);
financeGrid.add(inputValue, 1, 0);</pre>
			<h2 id="_idParaDest-254"><a id="_idTextAnchor278"/>Binding</h2>
			<p>Binding a primitive data <a id="_idIndexMarker892"/>type to a field in a JavaFX bean requires a <a id="_idIndexMarker893"/>converter. There are some standard converters, one of which is for <strong class="source-inline">BigDecimal</strong> to convert from a string to a BigDecimal. Here is the <span class="No-Break">binding method:</span></p>
			<pre class="source-code">
private void doBinding() {</pre>
			<p>We are creating a <strong class="source-inline">BigDecimalStringConverter</strong> object that we can reuse in each of <span class="No-Break">the bindings:</span></p>
			<pre class="source-code">
    var convert = new BigDecimalStringConverter();</pre>
			<p>For each binding, we pass <strong class="source-inline">textProperty</strong> of each <strong class="source-inline">TextField</strong>, the property for each field in the <strong class="source-inline">FinanceFXBean</strong>, and <span class="No-Break">our converter:</span></p>
			<pre class="source-code">
    Bindings.bindBidirectional(inputValue.textProperty(),
        financeData.inputValueProperty(), convert);
    Bindings.bindBidirectional(rateValue.textProperty(),
        financeData.rateProperty(), convert);
    Bindings.bindBidirectional(termValue.textProperty(),
        financeData.termProperty(), convert);
    Bindings.bindBidirectional(resultValue.textProperty(),
        financeData.resultProperty(), convert);
}</pre>
			<p>Which should <a id="_idIndexMarker894"/>you use? Read the following summary <span class="No-Break">to decide.</span></p>
			<h1 id="_idParaDest-255"><a id="_idTextAnchor279"/>Summary</h1>
			<p>Swing is a mature GUI framework that is maintained as part of the Java distribution. Having been around for so long, there has been much written on how to use it. Choosing Swing for your GUI project is a <span class="No-Break">good choice.</span></p>
			<p>JavaFX is the new kid on the block, so to speak. The two most significant differences are binding and CSS style sheets. Although not covered here, JavaFX also has much better graphics support. In JavaFX graphics, primitives such as a line or a rectangle are on par with controls. JavaFX has an <strong class="source-inline">Animation</strong> class that simplifies creating moving graphics. There is a also chart library to create line charts, pie charts, and <span class="No-Break">so on.</span></p>
			<p>Users today expect a GUI in the software they use. Swing projects do not need to be rewritten using JavaFX, and new projects using Swing continue to be written. So, which should you use? In my opinion, new projects should use JavaFX. Swing is, for the most part, in maintenance mode to ensure that it works, taking advantage of changes in the core language. JavaFX, on the other hand, is actively maintained as an open source project, with both maintenance and new features added to <span class="No-Break">each release.</span></p>
			<p>In our next chapter, we will look at how Java is used to write software for the World Wide Web that runs in a container called an <span class="No-Break">application server.</span></p>
			<h1 id="_idParaDest-256"><a id="_idTextAnchor280"/>Further reading</h1>
			<ul>
				<li>Napkin look and <span class="No-Break">feel: </span><a href="https://napkinlaf.sourceforge.net/&#13;"><span class="No-Break">https://napkinlaf.sourceforge.net/</span></a></li>
				<li>Java Microbenchmark <span class="No-Break">Harness: </span><a href="https://medium.com/javarevisited/understanding-java-microbenchmark-harness-or-jmh-tool-5b9b90ccbe8d&#13;"><span class="No-Break">https://medium.com/javarevisited/understanding-java-microbenchmark-harness-or-jmh-tool-5b9b90ccbe8d</span></a></li>
				<li>Pattern <span class="No-Break">matching: </span><a href="https://xperti.io/blogs/pattern-matching-java-feature-spotlight/&#13;"><span class="No-Break">https://xperti.io/blogs/pattern-matching-java-feature-spotlight/</span></a></li>
				<li><em class="italic">JavaFX CSS Reference </em><span class="No-Break"><em class="italic">Guide</em></span><span class="No-Break">: </span><a href="https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/doc-files/cssref.html"><span class="No-Break">https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/doc-files/cssref.html</span></a></li>
			</ul>
		</div>
		<div>
			<div id="_idContainer075" class="IMG---Figure">
			</div>
		</div>
	</body></html>