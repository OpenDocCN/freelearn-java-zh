<html><head></head><body>
<div id="sbo-rt-content" class="calibre1"><div id="_idContainer005" class="calibre2">
<h1 id="_idParaDest-5" lang="en-GB" class="calibre5"><a id="_idTextAnchor004" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Preface</h1>
<p lang="en-GB" class="calibre4">Understanding how Java memory works can be of great benefit to your Java coding and application management. It makes it easier to visualize what is going on with object composition and what happens with object allocation and deallocation, combined with object composition. As you are probably aware, object composition is where objects contain other objects. For example, a <strong class="source-inline" lang="">Person</strong> class specifies a property of type <strong class="source-inline" lang="">Address</strong>, which also happens to be a class. Knowing how this all works in memory makes it easier to know what steps to take to get to a certain <span lang="">data field.</span></p>
<p lang="en-GB" class="calibre4">Also, the concept of <strong class="source-inline" lang="">static</strong> and accessing the instance using the <strong class="source-inline" lang="">this</strong> keyword will be so much easier to visualize and understand completely when you understand how the memory of Java works. Without understanding how Java memory works, it is impossible to truly grasp the concepts of <strong class="source-inline" lang="">static</strong> <span lang="">and </span><span lang=""><strong class="source-inline" lang="">this</strong></span><span lang="">.</span></p>
<p lang="en-GB" class="calibre4">Another advantage of understanding Java memory well is that the difference between using a primitive or a class reference as an argument makes a lot more sense all of a sudden. This also helps with understanding the immutability and mutability <span lang="">of objects.</span></p>
<p lang="en-GB" class="calibre4">More complex topics will make more sense too, such as <strong class="bold" lang="">concurrency</strong>, one of my personal favorites. This is when multiple things are happening at the same time in your application (multithreading). It’s possible that you haven’t worked with it yet, but as a Java developer, you’ll have to one day. Understanding Java memory makes it easier to understand certain aspects of concurrency, especially data access. Another complex topic that will be easier to understand is garbage collection. This is of crucial importance for performance since it’s a very expensive process, and you want to need it as little as possible and optimize it as much <span lang="">as possible.</span></p>
<p lang="en-GB" class="calibre4">Everything that you are probably using on a daily basis already will become clearer when you understand better how Java <span lang="">memory works.</span></p>
<div class="calibre9"/><h1 id="_idParaDest-6" lang="en-GB" class="calibre5"><a id="_idTextAnchor005" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Who this book is for</h1>
<p lang="en-GB" class="calibre4">This book is for all sorts of Java professionals. It doesn’t really matter whether you’re a junior or senior developer, a DevOps engineer, a tester, or the system admin of a Java application. If you currently do not have an in-depth knowledge of Java memory, garbage collection, and/or JVM tuning, this book will help you to take your Java skills to the <span lang="">next level.</span></p>
<div class="calibre9"/><h1 id="_idParaDest-7" lang="en-GB" class="calibre5"><a id="_idTextAnchor006" class="pcalibre pcalibre2 pcalibre1 calibre6"/>What this book covers</h1>
<p lang="en-GB" class="calibre4"><a href="B18762_01.xhtml#_idTextAnchor014" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang=""><em class="italic" lang="">Chapter 1</em></span></a>, <em class="italic" lang="">Different Parts of Java Memory</em>, covers the different parts of Java memory: the stack, the heap, and the Metaspace. We’ll start with the stack memory and how variables are stored on the stack. We’ll then move on to deal with objects and how these are stored on the heap. Next, we’ll briefly discuss accessing primitives and objects. Finally, we’ll describe the Metaspace and what it’s <span lang="">used for.</span></p>
<p lang="en-GB" class="calibre4"><a href="B18762_02.xhtml#_idTextAnchor038" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang=""><em class="italic" lang="">Chapter 2</em></span></a>, <em class="italic" lang="">Primitives and Objects in Java Memory</em>, zooms in on primitives and objects in Java memory. We’ll be dealing with the heap and stack in more detail here. With the use of visualization, we’ll show what happens during the execution of a Java program with the stack and the heap memory. Once the basics of memory management are clear, we’ll deal with object references in more detail. We explain how Java’s call-by-value mechanism, when applied to references, can lead to a security issue known as <strong class="bold" lang="">escaping references</strong>. We discuss how to solve <span lang="">this issue.</span></p>
<p lang="en-GB" class="calibre4"><a href="B18762_03.xhtml#_idTextAnchor049" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang=""><em class="italic" lang="">Chapter 3</em></span></a>, <em class="italic" lang="">Zooming in on the Heap Space</em>, focuses on the different parts of the heap space. It has two main areas: the young generation space and the tenured space. The young generation space contains two separate areas: the eden space and the survivor space. We won’t dive into the garbage collection process in this chapter, but we’ll briefly mention it and what it is to explain how objects are promoted between spaces. Visualization of the heap and the different areas will be added to provide clarity regarding the heap space’s details. The content of this chapter is necessary to understand the garbage collection algorithms that will be discussed in the <span lang="">next chapter.</span></p>
<p lang="en-GB" class="calibre4"><a href="B18762_04.xhtml#_idTextAnchor057" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang=""><em class="italic" lang="">Chapter 4</em></span></a>, <em class="italic" lang="">Freeing the Memory with Garbage Collection</em>, dives into the deallocation of the objects on the heap. Deallocation of the memory is necessary in order for an application to keep running. Without the ability to free memory, we could allocate it only once and eventually we’d run out of memory. In this chapter, we are dealing with when objects on the heap space are eligible for garbage collection and what phases the garbage collector goes through. We’ll end with a discussion on the different implementations of the garbage collector. We’ll make this as visual as possible to <span lang="">increase understanding.</span></p>
<p lang="en-GB" class="calibre4"><a href="B18762_05.xhtml#_idTextAnchor077" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang=""><em class="italic" lang="">Chapter 5</em></span></a>, <em class="italic" lang="">Zooming in on the Metaspace</em>, touches upon the Metaspace, which is used by the JVM for class metadata and for example static variables. This metadata gets stored when the classes are loaded. We’ll describe the class loading process and how memory is allocated. The releasing of Metaspace memory is a bit different from the releasing of heap memory. This process will be described here <span lang="">as well.</span></p>
<p lang="en-GB" class="calibre4"><a href="B18762_06.xhtml#_idTextAnchor086" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang=""><em class="italic" lang="">Chapter 6</em></span></a>, <em class="italic" lang="">Configuring and Monitoring the Memory Management of the JVM</em>, explains how to get started with JVM tuning. First, we’ll describe what JVM tuning is and who needs it. There are several metrics that are relevant for the tuning of the JVM when it comes to memory management. We’ll examine these metrics and how to obtain them. We’ll end with the actual tuning and adjusting of the configuration of the JVM and how to use profiling to get insights into the effects of <span lang="">the tuning.</span></p>
<p lang="en-GB" class="calibre4"><a href="B18762_07.xhtml#_idTextAnchor102" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang=""><em class="italic" lang="">Chapter 7</em></span></a>, <em class="italic" lang="">Avoiding Memory Leaks</em>, deals with how to use the memory well and how to spot and solve memory leaks. Whenever objects are held in memory that are no longer needed, we get memory leaks. In the beginning, this can seem harmless, but over time it will slow down an application and the application will require a restart in order to function properly again. In this chapter, we’re going to make sure that the reader understands memory leaks and knows how to spot them. We’ll end with very common mistakes that lead to memory leaks and how to <span lang="">avoid them.</span></p>
<h1 id="_idParaDest-8" lang="en-GB" class="calibre5"><a id="_idTextAnchor007" class="pcalibre pcalibre2 pcalibre1 calibre6"/>To get the most out of this book</h1>
<p lang="en-GB" class="calibre4">This book assumes Java 8 or later. A particular operating system or IDE is not mandatory. If you plan to run the examples yourself, then VisualVM, the visual tool for monitoring Java applications in memory, would <span lang="">be useful.</span></p>
<p lang="en-GB" class="calibre4">If you currently have nothing installed on your system, the following setup <span lang="">will suffice:</span></p>
<ul class="calibre10">
<li lang="en-GB" class="calibre11">JDK 8 or later (Oracle’s JDK or OpenJDK)</li>
<li lang="en-GB" class="calibre11">IntelliJ IDEA(community edition is good enough) or Eclipse</li>
<li lang="en-GB" class="calibre11">VisualVM</li>
</ul>
<table class="no-table-style" id="table001">
<colgroup class="calibre12">
<col class="calibre13"/>
<col class="calibre13"/>
</colgroup>
<tbody class="calibre14">
<tr class="no-table-style1">
<td class="no-table-style2">
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">Software/hardware covered in </strong><span lang=""><strong class="bold" lang="">the book</strong></span></p>
</td>
<td class="no-table-style2">
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">Operating </strong><span lang=""><strong class="bold" lang="">system requirements</strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p lang="en-GB" class="calibre4"><span lang="">Java 8+</span></p>
</td>
<td class="no-table-style2">
<p lang="en-GB" class="calibre4">Windows, macOS, <span lang="">or Linux</span></p>
</td>
</tr>
</tbody>
</table>
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). Doing so will help you avoid any potential errors related to the copying and pasting </strong><span lang=""><strong class="bold" lang="">of code.</strong></span></p>
<h1 id="_idParaDest-9" lang="en-GB" class="calibre5"><a id="_idTextAnchor008" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Download the example code files</h1>
<p lang="en-GB" class="calibre4">You can download the example code files for this book from GitHub at <a href="https://github.com/PacktPublishing/B18762_Java-Memory-Management" class="pcalibre pcalibre2 pcalibre1 calibre6">https://github.com/PacktPublishing/B18762_Java-Memory-Management</a>. If there’s an update to the code, it will be updated in the <span lang="">GitHub repository.</span></p>
<p lang="en-GB" class="calibre4">We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/" class="pcalibre pcalibre2 pcalibre1 calibre6">https://github.com/PacktPublishing/</a>. Check <span lang="">them out!</span></p>
<h1 id="_idParaDest-10" lang="en-GB" class="calibre5"><a id="_idTextAnchor009" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Download the color images</h1>
<p lang="en-GB" class="calibre4">We also provide a PDF file that has color images of the screenshots and diagrams used in this book. You can download it <span lang="">here: </span><a href="https://packt.link/OeQqF" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang="">https://packt.link/OeQqF</span></a><span lang="">.</span></p>
<h1 id="_idParaDest-11" lang="en-GB" class="calibre5"><a id="_idTextAnchor010" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Conventions used</h1>
<p lang="en-GB" class="calibre4">There are a number of text conventions used throughout <span lang="">this book.</span></p>
<p lang="en-GB" class="calibre4"><strong class="source-inline" lang="">Code in text</strong>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “For example, <strong class="source-inline" lang="">int x;</strong> defines (creates) a primitive variable <strong class="source-inline" lang="">x</strong> which is of (the primitive) <span lang="">type </span><span lang=""><strong class="source-inline" lang="">int</strong></span><span lang="">.”</span></p>
<p lang="en-GB" class="calibre4">A block of code is set <span lang="">as follows:</span></p>
<pre class="source-code" lang="en-GB">Object o = new Object();</pre>
<pre class="source-code" lang="en-GB">System.out.println(o);</pre>
<pre class="source-code" lang="en-GB">o = null;</pre>
<p lang="en-GB" class="calibre4">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set <span lang="">in bold:</span></p>
<pre class="source-code" lang="en-GB">Object o = new Object();</pre>
<pre class="source-code" lang="en-GB"><strong class="bold" lang="">System.out.println</strong>(o);</pre>
<pre class="source-code" lang="en-GB">o = null;</pre>
<p lang="en-GB" class="calibre4">Any command-line input or output is written <span lang="">as follows:</span></p>
<p class="source-code1" lang="en-GB">java.lang.Object@4617c264</p>
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">Bold</strong>: Indicates a new term, an important word, or words that you see on screen. For instance, words in menus or dialog boxes appear in <strong class="bold" lang="">bold</strong>. Here is an example: “There is a <strong class="bold" lang="">Create another</strong> option beside the <span lang=""><strong class="bold" lang="">Create</strong></span><span lang=""> button.”</span></p>
<p class="callout-heading" lang="en-GB">Tips or important notes</p>
<p class="callout" lang="en-GB">Appear like this.</p>
<h1 id="_idParaDest-12" lang="en-GB" class="calibre5"><a id="_idTextAnchor011" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Get in touch</h1>
<p lang="en-GB" class="calibre4">Feedback from our readers is <span lang="">always welcome.</span></p>
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">General feedback</strong>: If you have questions about any aspect of this book, email us at <a href="mailto:customercare@packtpub.com" class="pcalibre pcalibre2 pcalibre1 calibre6">customercare@packtpub.com</a> and mention the book title in the subject of <span lang="">your message.</span></p>
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/support/errata" class="pcalibre pcalibre2 pcalibre1 calibre6">www.packtpub.com/support/errata</a> and fill in <span lang="">the form.</span></p>
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <a href="mailto:copyright@packt.com" class="pcalibre pcalibre2 pcalibre1 calibre6">copyright@packt.com</a> with a link to <span lang="">the material.</span></p>
<p lang="en-GB" class="calibre4"><strong class="bold" lang="">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please <span lang="">visit </span><a href="http://authors.packtpub.com" class="pcalibre pcalibre2 pcalibre1 calibre6"><span lang="">authors.packtpub.com</span></a><span lang="">.</span></p>
<h1 id="_idParaDest-13" lang="en-GB" class="calibre5"><a id="_idTextAnchor012" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Share Your Thoughts</h1>
<p lang="en-GB" class="calibre4">Once you’ve read Java Memory Management, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1801812853" class="pcalibre pcalibre2 pcalibre1 calibre6">click here to go straight to the Amazon review page</a> for this book and share <span lang="">your feedback.</span></p>
<p lang="en-GB" class="calibre4">Your review is important to us and the tech community and will help us make sure we’re delivering excellent <span lang="">quality content.</span></p>
<h1 id="_idParaDest-14" lang="en-GB" class="calibre5"><a id="_idTextAnchor013" class="pcalibre pcalibre2 pcalibre1 calibre6"/>Download a Free PDF copy of this book</h1>
<p lang="en-GB" class="calibre4">Thanks for purchasing <span lang="">this book!</span></p>
<p lang="en-GB" class="calibre4">Do you like to read on the go but are unable to carry your print <span lang="">books everywhere?</span></p>
<p lang="en-GB" class="calibre4">Is your eBook purchase not compatible with the device of <span lang="">your choice?</span></p>
<p lang="en-GB" class="calibre4">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at <span lang="">no cost.</span></p>
<p lang="en-GB" class="calibre4">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application. </p>
<p lang="en-GB" class="calibre4">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your <span lang="">inbox daily</span></p>
<p lang="en-GB" class="calibre4">Follow these simple steps to get <span lang="">the benefits:</span></p>
<ol class="calibre15">
<li lang="en-GB" class="calibre11">Scan the QR code or visit the link below</li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer004">
<img alt="" src="image/B18762_QR_Free_PDF.jpg" class="calibre16"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><a href="" class="pcalibre pcalibre2 calibre17 pcalibre1">https://packt.link/free-ebook/9781801812856</a></p>
<ol class="calibre15">
<li lang="en-GB" value="2" class="calibre11">Submit your proof of purchase</li>
<li lang="en-GB" class="calibre11">That’s it! We’ll send your free PDF and other benefits to your email directly</li>
</ol>
</div>
</div></body></html>