<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Running Your First Gradle Task"><div class="book" id="E9OE2-e78ecbb3ac0544f19c59f96d594821c0"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Running Your First Gradle Task</h1></div></div></div><p class="calibre8">We are embarking on a fast-paced ride to learn the <span class="strong"><em class="calibre10">Gradle Essentials</em></span>. To take a gentle start, we will first install Gradle. Then, we will get friendly with the Gradle's command-line interface by looking at the usage of the <code class="literal">gradle</code> command. Also, by the end of this chapter, we would have run our first Gradle build script.</p><p class="calibre8">Building a software artifact is a complex process involving various activities such as compiling source code, running automated tests, packaging distributable files, and so on. These activities are further split into many steps, often dependent on the execution order, fetching dependent artifacts, resolving configuration variables, and so on. Executing all these activities manually is cumbersome and often error-prone. A good build automation tool helps us reduce the effort and time it takes to build correct artifacts in a repeatable manner.</p><p class="calibre8">Gradle <a id="id0" class="calibre1"/>is an advanced build automation tool that brings the best from various proven build tools and innovates on top of them. Gradle can be used to produce artifacts such as web applications, application libraries, documentation, static sites, mobile apps, command lines, and desktop applications. Gradle can be used to build projects based on various languages and technology stacks such as Java, C/C++, Android, Scala, Groovy, Play, Grails, and many more. As <a id="id1" class="calibre1"/>
<span class="strong"><strong class="calibre9">Java Virtual Machine</strong></span> (<span class="strong"><strong class="calibre9">JVM</strong></span>) happens to be one of the first class supported platforms by Gradle, the examples in this book will mostly focus on building Java-based projects.</p><p class="calibre8">Gradle gives us full control over build just like Ant but without ever needing to repeat ourselves by providing intelligent defaults in the form of conventions. Gradle truly works by conventions over configuration, just like Maven. However, it never gets in our way when we need to deviate. Also this puts it in complete contrast with Maven. Gradle attempts to maintain the right balance between conventions and configurability.</p><p class="calibre8">The previous generation of build tools, such as Ant and Maven, chose XML to represent the build logic. While XML is human-readable, it is more of a machine-friendly format (easier to be read/written by programs). It is great for representing and exchanging hierarchical data, but when it comes to writing any logic, even the simplest logic can easily take hundreds of lines. On the other hand, a Gradle build can be configured using very human-friendly Groovy DSL. Groovy is a powerful, expressive, and low ceremony dynamic language and is a perfect fit for build scripts.</p><p class="calibre8">Gradle itself is a <span class="strong"><strong class="calibre9">JVM</strong></span> application written in Java and Groovy. Since Gradle runs on the JVM, it runs the same way on Windows, Mac OS X and Linux. Gradle also boasts an advanced dependency resolution system and can resolve dependencies from the existing Maven and Ivy repositories or even a file system.</p><p class="calibre8">Over the years Gradle has matured into a very stable open source project with active contributors and commercial backing. The rich plugin ecosystem and vibrant community makes Gradle an excellent choice for a variety of projects. Gradle already has an impressive list of adopters, which includes tech giants such as Google Android, LinkedIn, Unity 3D, Netflix and many more. Open source libraries and frameworks such as Spring, Hibernate, and Grails are using Gradle to power their builds.</p></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Running Your First Gradle Task">
<div class="book" title="Installing Gradle"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>Installing Gradle</h1></div></div></div><p class="calibre8">Before we <a id="id2" class="calibre1"/>move forward with running Gradle, we must have it installed on our machine. There are multiple ways through which Gradle can be installed and updated. We will first see a more manual way to install Gradle and then take a quick look at installing it via some commonly used package managers. We can choose any one method that fits the bill. Irrespective of the way we install Gradle, we must meet the following prerequisite.</p><p class="calibre8">Gradle needs <a id="id3" class="calibre1"/>
<span class="strong"><strong class="calibre9">Java Runtime Environment</strong></span> (<span class="strong"><strong class="calibre9">JRE</strong></span>) 6 or <a id="id4" class="calibre1"/>
<span class="strong"><strong class="calibre9">Java Development Kit</strong></span> (<span class="strong"><strong class="calibre9">JDK</strong></span>) 1.6 or higher. There is no other dependency. We recommend having JDK installed. To verify this, on the command line, we can check the Java version with the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ java -version </strong></span>
<span class="strong"><strong class="calibre9">java version "1.8.0"</strong></span>
<span class="strong"><strong class="calibre9">Java(TM) SE Runtime Environment (build 1.8.0-b132)</strong></span>
<span class="strong"><strong class="calibre9">Java HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)</strong></span>
</pre></div><p class="calibre8">If we don't see the output more or less like the one shown in the preceding command, there is problem with our JDK installation.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre8">The latest JDK can be downloaded from the following URL:</p><p class="calibre8">
<a class="calibre1" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>
</p></div></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Running Your First Gradle Task">
<div class="book" title="Installing Gradle">
<div class="book" title="Installing manually"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec07" class="calibre1"/>Installing manually</h2></div></div></div><p class="calibre8">If we <a id="id5" class="calibre1"/>want a <a id="id6" class="calibre1"/>finer control over the installation then this is a suitable route. This could be the case, when we cannot use the package managers, want very specific binaries to be downloaded and installed, or behind corporate firewalls where automatic downloading by package managers is not allowed. We need to download the Gradle binaries and make them available for use on the command line.</p><p class="calibre8">The latest <a id="id7" class="calibre1"/>Gradle distribution can be downloaded from <a class="calibre1" href="http://www.gradle.org/downloads">http://www.gradle.org/downloads</a>. As of writing the latest version is 2.9.</p><p class="calibre8">Gradle binary distribution comes in two flavors as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="literal">gradle-2.9-all.zip</code>: This contains binaries, sources, and documentation</li><li class="listitem"><code class="literal">gradle-2.9-bin.zip</code>: This contains binaries only</li></ul></div><p class="calibre8">We can download any of the above depending on what we need. Also, this is an OS-independent zip so the same zip can be extracted on Mac OS X, Windows, and Linux. The next section makes the Gradle command available on the command line. This section is dependent on the OS we use.</p><div class="book" title="Installing on Mac OS X and Linux"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec01" class="calibre1"/>Installing on Mac OS X and Linux</h3></div></div></div><p class="calibre8">Let's say <a id="id8" class="calibre1"/>we extracted the downloaded zip as <code class="literal">~/gradle-2.9/</code>. Now, we just need to add the following two lines at the end of <code class="literal">.bashrc</code>/, <code class="literal">.bash_profile</code>/, or <code class="literal">.zshrc</code>, depending on the OS and the shell that we use:</p><div class="informalexample"><pre class="programlisting">export GRADLE_HOME=~/gradle-2.9
export PATH=$PATH:$GRADLE_HOME/bin</pre></div><p class="calibre8">Restart the<a id="id9" class="calibre1"/> terminal or source the modified file to have the change take effect.</p></div><div class="book" title="Installing on Windows"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec02" class="calibre1"/>Installing on Windows</h3></div></div></div><p class="calibre8">Let's say we <a id="id10" class="calibre1"/>extracted the zip as <code class="literal">C:\gradle-2.9</code>, then perform the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Open the Start menu, right click on <span class="strong"><strong class="calibre9">Computer</strong></span> and select <span class="strong"><strong class="calibre9">Properties</strong></span>.</li><li class="listitem" value="2">On <span class="strong"><strong class="calibre9">Advanced system settings</strong></span>, select the <span class="strong"><strong class="calibre9">Advanced</strong></span> tab, and then select <span class="strong"><strong class="calibre9">Environment Variables...</strong></span>.<div class="mediaobject"><img src="../images/00002.jpeg" alt="Installing on Windows" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Click <a id="id11" class="calibre1"/>on <span class="strong"><strong class="calibre9">New</strong></span>.</li><li class="listitem" value="4">Create a <code class="literal">GRADLE_HOME</code> environment variable with the value <code class="literal">C:\gradle-2.9</code>.<div class="note" title="Note"><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre8">
<span class="strong"><strong class="calibre9">Downloading the example code </strong></span>
</p><p class="calibre8">You can download the example code files from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><div class="mediaobject"><img src="../images/00003.jpeg" alt="Installing on Windows" class="calibre11"/></div><p class="calibre14"> </p><div class="note" title="Note"><h3 class="title2"><a id="tip04" class="calibre1"/>Tip</h3><p class="calibre8">In future when we download the later version of Gradle, we would need to change on this value to point to the correct folder.</p></div></li><li class="listitem" value="5">Edit (or add if not already there) the <code class="literal">PATH</code> environment <a id="id12" class="calibre1"/>variable. At the end of its value, append <code class="literal">;%GRADLE_HOME%\bin</code> (add a semicolon if multiple path entries exist).</li></ol><div class="calibre15"/></div></div></div></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Running Your First Gradle Task">
<div class="book" title="Installing Gradle">
<div class="book" title="Alternate methods of installing Gradle"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec08" class="calibre1"/>Alternate methods of installing Gradle</h2></div></div></div><p class="calibre8">Although<a id="id13" class="calibre1"/> the manual installation gives absolute control over the installation process, various tasks such as downloading and extracting the right version, upgrading to the latest versions, uninstalling, and editing environment variables quickly become cumbersome and error-prone. That is why many people prefer package managers to control the whole process.</p><div class="book" title="Installing via OS-specific package managers"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec03" class="calibre1"/>Installing via OS-specific package managers</h3></div></div></div><p class="calibre8">While<a id="id14" class="calibre1"/> installing manually, as mentioned in the previous section, is very easy, we can make it super-easy by using a package manager.</p><p class="calibre8">Some<a id="id15" class="calibre1"/> Linux distributions like Ubuntu ship with their package manager, Mac OS X, Windows don't have any package manager installed by default. However, luckily, there are multiple package managers available for both platforms. We will see the example of Homebrew on Mac and Chocolatey on Windows.</p><div class="book" title="Mac OS X"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch01lvl4sec01" class="calibre1"/>Mac OS X</h4></div></div></div><p class="calibre8">Make sure<a id="id16" class="calibre1"/> we have Homebrew installed. If it is, installing Gradle is only a matter of using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ brew install gradle</strong></span>
</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre8">More details on Homebrew can be found at <a class="calibre1" href="http://brew.sh">http://brew.sh</a>.</p></div></div><div class="book" title="Linux (Ubuntu)"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch01lvl4sec02" class="calibre1"/>Linux (Ubuntu)</h4></div></div></div><p class="calibre8">Using<a id="id17" class="calibre1"/> the built in package manager on Ubuntu, which is called <span class="strong"><strong class="calibre9">Advanced Packaging Tool</strong></span> (<span class="strong"><strong class="calibre9">APT</strong></span>), we can install Gradle with the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ sudo apt-get install gradle</strong></span>
</pre></div></div><div class="book" title="Windows"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch01lvl4sec03" class="calibre1"/>Windows</h4></div></div></div><p class="calibre8">If we have <a id="id18" class="calibre1"/>Chocolatey installed, installing Gradle is just a command away:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">c:\&gt; cinst gradle</strong></span>
</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note04" class="calibre1"/>Note</h3><p class="calibre8">More details on Chocolatey can be found at <a class="calibre1" href="https://chocolatey.org">https://chocolatey.org</a>.</p></div></div></div><div class="book" title="Installing via SDKMAN"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec04" class="calibre1"/>Installing via SDKMAN</h3></div></div></div><p class="calibre8">
<span class="strong"><strong class="calibre9">SDKMAN</strong></span> stands for <span class="strong"><strong class="calibre9">the Software Development Kit Manager</strong></span>. In its own words, the website describes it as: <span class="strong"><em class="calibre10">SDKMAN! is a tool for managing parallel versions of multiple Software Development Kits on most Unix based systems.</em></span>
</p><p class="calibre8">The advantage SDKMAN has over other package managers is that we can have multiple Gradle versions installed on a system and select a different version for a given project. If we have it installed, all we need to do is run following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ sdk install gradle</strong></span>
</pre></div><p class="calibre8">SDKMAN can be installed from <a class="calibre1" href="http://sdkman.io/">http://sdkman.io/</a>.</p></div></div></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Running Your First Gradle Task">
<div class="book" title="Installing Gradle">
<div class="book" title="Verifying the installation"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec09" class="calibre1"/>Verifying the installation</h2></div></div></div><p class="calibre8">In <a id="id19" class="calibre1"/>whichever way we choose to install Gradle, it's a good idea to verify that if it's working before we move ahead. We can do this by simply checking for Gradle's version on the command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle --version</strong></span>
<span class="strong"><strong class="calibre9">------------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre9">Gradle 2.9</strong></span>
<span class="strong"><strong class="calibre9">------------------------------------------------------------</strong></span>

<span class="strong"><strong class="calibre9">Build time:   2015-11-17 07:02:17 UTC</strong></span>
<span class="strong"><strong class="calibre9">Build number: none</strong></span>
<span class="strong"><strong class="calibre9">Revision:     b463d7980c40d44c4657dc80025275b84a29e31f</strong></span>

<span class="strong"><strong class="calibre9">Groovy:       2.4.4</strong></span>
<span class="strong"><strong class="calibre9">Ant:          Apache Ant(TM) version 1.9.3 compiled on December 23 2013</strong></span>
<span class="strong"><strong class="calibre9">JVM:          1.8.0_25 (Oracle Corporation 25.25-b02)</strong></span>
<span class="strong"><strong class="calibre9">OS:           Mac OS X 10.10.5 x86_64</strong></span>
</pre></div><p class="calibre8">If we see output similar to the above, we have Gradle installed correctly on our machine.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip05" class="calibre1"/>Tip</h3><p class="calibre8">We can use <code class="literal">-v</code> instead <code class="literal">--version</code> to get the same result.</p></div></div></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Running Your First Gradle Task">
<div class="book" title="Installing Gradle">
<div class="book" title="Setting JVM options"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec10" class="calibre1"/>Setting JVM options</h2></div></div></div><p class="calibre8">Although it's not <a id="id20" class="calibre1"/>required most of the time, but if in case we need to set some global options for the JVM that Gradle will use, Gradle provides us a convenient way to do that. We can set the <code class="literal">GRADLE_OPTS</code> environment variable with acceptable flags to tune the JVM.</p><p class="calibre8">Gradle also honors the <code class="literal">JAVA_OPTS</code> environment variable. However, we need to be careful when setting it, as this affects the setting for all the Java programs on a machine. Setting that we want to keep common for all the Java apps should be done via this variable and those that only need to be applied to Gradle should be set via <code class="literal">GRADLE_OPTS</code>.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip06" class="calibre1"/>Tip</h3><p class="calibre8">Some commonly used options are <code class="literal">-Xms</code> and <code class="literal">-Xmx</code>, which set the minimum and maximum heap size of the JVM.</p></div></div></div></div>
<div class="book" title="The Gradle command-line interface"><div class="book" id="F8902-e78ecbb3ac0544f19c59f96d594821c0"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>The Gradle command-line interface</h1></div></div></div><p class="calibre8">Gradle, just <a id="id21" class="calibre1"/>like other build tools, is primarily run from a command line. That's why it is worth spending some time to get familiar with its <a id="id22" class="calibre1"/>command-line interface. Typically, a <code class="literal">gradle</code> command is issued from the root of a project directory with some tasks to be executed. Let's say we are in the <code class="literal">hello-gradle</code> directory, which is currently empty.</p><p class="calibre8">Gradle provides a very simple <span class="strong"><strong class="calibre9">command-line interface</strong></span> (<span class="strong"><strong class="calibre9">CLI</strong></span>), which takes the following form:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">gradle [options…] [tasks…]</strong></span>
</pre></div><p class="calibre8">As we can see, apart from the <code class="literal">gradle</code> command itself, everything else is optional. The <code class="literal">options</code> tweak the execution of the Gradle whereas <code class="literal">tasks</code>, which we will see in detail later, are the basic units of work. Options are common across all projects and are specific to Gradle but tasks may vary depending on the project in which the <code class="literal">gradle</code> command is being run.</p><p class="calibre8">There are some tasks that are available on all projects. One such task is <code class="literal">help</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle help</strong></span>
<span class="strong"><strong class="calibre9">:help</strong></span>

<span class="strong"><strong class="calibre9">Welcome to Gradle 2.9.</strong></span>

<span class="strong"><strong class="calibre9">To run a build, run gradle &lt;task&gt; ...</strong></span>

<span class="strong"><strong class="calibre9">To see a list of available tasks, run gradle tasks</strong></span>

<span class="strong"><strong class="calibre9">To see a list of command-line options, run gradle --help</strong></span>

<span class="strong"><strong class="calibre9">To see more detail about a task, run gradle help --task &lt;task&gt;</strong></span>

<span class="strong"><strong class="calibre9">BUILD SUCCESSFUL</strong></span>

<span class="strong"><strong class="calibre9">Total time: 0.639 secs</strong></span>
</pre></div><p class="calibre8">Gradle is <a id="id23" class="calibre1"/>helping us out by telling us how to find all the <a id="id24" class="calibre1"/>available tasks and list all command-line options. Let's first check what other tasks are currently available on our project. Remember we are still in the empty directory <code class="literal">hello-gradle</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle tasks</strong></span>
<span class="strong"><strong class="calibre9">:tasks</strong></span>

<span class="strong"><strong class="calibre9">------------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre9">All tasks runnable from root project</strong></span>
<span class="strong"><strong class="calibre9">------------------------------------------------------------</strong></span>

<span class="strong"><strong class="calibre9">Build Setup tasks</strong></span>
<span class="strong"><strong class="calibre9">-----------------</strong></span>
<span class="strong"><strong class="calibre9">init - Initializes a new Gradle build. [incubating]</strong></span>
<span class="strong"><strong class="calibre9">wrapper - Generates Gradle wrapper files. [incubating]</strong></span>

<span class="strong"><strong class="calibre9">Help tasks</strong></span>
<span class="strong"><strong class="calibre9">----------</strong></span>
<span class="strong"><strong class="calibre9">components - Displays the components produced by root project 'hello-gradle'. [incubating]</strong></span>
<span class="strong"><strong class="calibre9">dependencies - Displays all dependencies declared in root project 'hello-gradle'.</strong></span>
<span class="strong"><strong class="calibre9">dependencyInsight - Displays the insight into a specific dependency in root project 'hello-gradle'.</strong></span>
<span class="strong"><strong class="calibre9">help - Displays a help message.</strong></span>
<span class="strong"><strong class="calibre9">model - Displays the configuration model of root project 'hello-gradle'. [incubating]</strong></span>
<span class="strong"><strong class="calibre9">projects - Displays the sub-projects of root project 'hello-gradle'.</strong></span>
<span class="strong"><strong class="calibre9">properties - Displays the properties of root project 'hello-gradle'.</strong></span>
<span class="strong"><strong class="calibre9">tasks - Displays the tasks runnable from root project 'hello-gradle'.</strong></span>

<span class="strong"><strong class="calibre9">To see all tasks and more detail, run gradle tasks --all</strong></span>

<span class="strong"><strong class="calibre9">To see more detail about a task, run gradle help --task &lt;task&gt;</strong></span>

<span class="strong"><strong class="calibre9">BUILD SUCCESSFUL</strong></span>

<span class="strong"><strong class="calibre9">Total time: 0.652 secs</strong></span>
</pre></div><p class="calibre8">This shows <a id="id25" class="calibre1"/>us some generic tasks that are available <a id="id26" class="calibre1"/>even without us adding any task to our project. We can try running all these tasks and see the output. We will see these tasks in details in the upcoming chapters.</p><p class="calibre8">The other useful command <code class="literal">gradle help</code> suggested us to check all the available options with the <code class="literal">--help</code> option.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip07" class="calibre1"/>Tip</h3><p class="calibre8">The <code class="literal">help</code> task is not the same as the <code class="literal">--help</code> option.</p></div><p class="calibre8">When we run the <code class="literal">gradle --help</code> command, we get the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle --help</strong></span>

<span class="strong"><strong class="calibre9">USAGE: gradle [option...] [task...]</strong></span>

<span class="strong"><strong class="calibre9">-?, -h, --help          Shows this help message.</strong></span>
<span class="strong"><strong class="calibre9">-a, --no-rebuild        Do not rebuild project dependencies.</strong></span>
<span class="strong"><strong class="calibre9">-b, --build-file        Specifies the build file.</strong></span>
<span class="strong"><strong class="calibre9">…..</strong></span>
</pre></div><p class="calibre8">(The output is truncated for brevity.)</p><p class="calibre8">The option has a long form such as <code class="literal">--help</code> and may have a short from such as <code class="literal">-h</code>. We have already used one option before, that is <code class="literal">--version</code> or <code class="literal">-v</code>, which prints information about the Gradle version. The following are some commonly used options; there are many more options, which can be seen using the <code class="literal">gradle --help</code> command:</p><div class="informalexample"><table border="1" class="calibre16"><colgroup class="calibre17"><col class="calibre18"/><col class="calibre18"/></colgroup><thead class="calibre19"><tr class="calibre20"><th valign="bottom" class="calibre21">
<p class="calibre22">Options</p>
</th><th valign="bottom" class="calibre21">
<p class="calibre22">Description</p>
</th></tr></thead><tbody class="calibre23"><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-b</code>, <code class="literal1">--build-file</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This specifies a build file (default: <code class="literal1">build.gradle</code>)</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">--continue</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This continues task execution even after a task failure</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-D</code>, <code class="literal1">--system-prop</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This sets the system property of the JVM</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-d</code>, <code class="literal1">--debug</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This prints debug level logs</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">--gui</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This starts Gradle GUI</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-i</code>, <code class="literal1">--info</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This prints info level logs</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-P</code>, <code class="literal1">--project-prop</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This adds a property to the project</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-q</code>, <code class="literal1">--quiet</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This logs only errors</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-s</code>, <code class="literal1">--stacktrace</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This prints stack traces for exceptions</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">
<code class="literal1">-x</code>, <code class="literal1">--exclude-task</code>
</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">This excludes a specific task</p>
</td></tr></tbody></table></div></div>

<div id="page" style="height:0pt"/><div class="book" title="The first Gradle build script" id="G6PI1-e78ecbb3ac0544f19c59f96d594821c0"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>The first Gradle build script</h1></div></div></div><p class="calibre8">So we <a id="id27" class="calibre1"/>are now ready to get our feet wet and see our first Gradle script in action. Let's create a file called <code class="literal">build.gradle</code> in the <code class="literal">hello-gradle</code> directory. Unless <a id="id28" class="calibre1"/>the build file path is provided using the <code class="literal">--build-file</code> option, Gradle treats the current directory as a project root and tries to find the <code class="literal">build.gradle</code> file there. If we have used Ant or Maven earlier, we can relate this file with <code class="literal">build.xml</code> or <code class="literal">pom.xml</code>, respectively.</p><p class="calibre8">Now, open the <code class="literal">build.gradle</code> file and let's declare a task by adding the following line:</p><div class="informalexample"><pre class="programlisting">task helloWorld</pre></div><p class="calibre8">We should be able to see this task on the command line as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle tasks</strong></span>
<span class="strong"><strong class="calibre9">...</strong></span>
<span class="strong"><strong class="calibre9">Other tasks</strong></span>
<span class="strong"><strong class="calibre9">-----------</strong></span>
<span class="strong"><strong class="calibre9">helloWorld</strong></span>
<span class="strong"><strong class="calibre9">...</strong></span>
</pre></div><p class="calibre8">Here, we have successfully created a task object called <code class="literal">helloWorld</code>. Tasks are first-class objects in Gradle, which means they have properties and methods on them. This gives us tremendous flexibility in terms of customizability and programmability of build.</p><p class="calibre8">However, this task actually does not do anything yet. So let's add some meaningful action to this task:</p><div class="informalexample"><pre class="programlisting">task helloWorld &lt;&lt; {
  println "Hello, World!"
}</pre></div><p class="calibre8">Now from<a id="id29" class="calibre1"/> the command line, we can execute this task by issuing the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle -q helloWorld</strong></span>
<span class="strong"><strong class="calibre9">Hello, World!</strong></span>
</pre></div><p class="calibre8">Notice that <a id="id30" class="calibre1"/>we used the <code class="literal">–q</code> flag to reduce the verbosity in the output. When this task is run, we see the output that our task generates but nothing from Gradle unless it's an error.</p><p class="calibre8">Now, let's try to briefly understand the <code class="literal">build.gradle</code> file. The first line declares the tasks and starts the body of a code block that will be executed at the end. The left shift operator (<code class="literal">&lt;&lt;</code>) might feel oddly placed, but it is very important in this context. We will see in the later chapters what it exactly means. The second line is a Groovy statement that prints the given string to the console. Also, the third line ends the code block.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip08" class="calibre1"/>Tip</h3><p class="calibre8">Groovy's <code class="literal">println "Hello, World!"</code> is equivalent to <code class="literal">System.out.println("Hello, World!")</code> in Java.</p></div></div>

<div class="book" title="The first Gradle build script" id="G6PI1-e78ecbb3ac0544f19c59f96d594821c0">
<div class="book" title="Task name abbreviation"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec11" class="calibre1"/>Task name abbreviation</h2></div></div></div><p class="calibre8">While calling a gradle task from a command line, we can save a few keystrokes by typing only the characters that are enough to uniquely identify the task name. For example, the task <code class="literal">helloWorld</code> can be called using <code class="literal">gradle hW</code>. We can also use <code class="literal">helloW</code>, <code class="literal">hWorld</code>, or even <code class="literal">heWo</code>. However, if we just call <code class="literal">gradle h</code>, then the <code class="literal">help</code> task will be called.</p><p class="calibre8">This comes very handy when we need to frequently call long Gradle task names. For example, a task named <code class="literal">deployToProductionServer</code> can be invoked just by calling <code class="literal">gradle dTPS</code>, provided that this does not match any other task name abbreviation. </p></div></div>

<div class="book" title="The first Gradle build script" id="G6PI1-e78ecbb3ac0544f19c59f96d594821c0">
<div class="book" title="Gradle Daemon"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec12" class="calibre1"/>Gradle Daemon</h2></div></div></div><p class="calibre8">While we are talking about frequently calling Gradle, it is a good time to know about a recommended technique to boost the performance of our builds. Gradle Daemon, a process that keeps running in the background, can speed up the builds significantly. </p><p class="calibre8">For a given gradle command invocation, we can specify the <code class="literal">--daemon</code> flag to enable the Daemon process. However, we should keep in mind that when we start the daemon, only the subsequent builds will be faster, but not the current one. For example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle helloWorld --daemon</strong></span>
<span class="strong"><strong class="calibre9">Starting a new Gradle Daemon for this build (subsequent builds will be faster).</strong></span>
<span class="strong"><strong class="calibre9">:helloWorld</strong></span>
<span class="strong"><strong class="calibre9">Hello, World!</strong></span>

<span class="strong"><strong class="calibre9">BUILD SUCCESSFUL</strong></span>

<span class="strong"><strong class="calibre9">Total time: 2.899 secs</strong></span>


<span class="strong"><strong class="calibre9">$ gradle helloWorld</strong></span>
<span class="strong"><strong class="calibre9">:helloWorld</strong></span>
<span class="strong"><strong class="calibre9">Hello, World!</strong></span>

<span class="strong"><strong class="calibre9">BUILD SUCCESSFUL</strong></span>

<span class="strong"><strong class="calibre9">Total time: 0.6 secs</strong></span>
</pre></div><p class="calibre8">In the preceding example, if we notice the time taken by two runs, the second one completed much faster, thanks to the Gradle Daemon. </p><p class="calibre8">We can also prevent a specific build invocation from utilizing a Daemon process by passing the <code class="literal">--no-daemon</code> flag.</p><p class="calibre8">There are various ways to enable or disable Gradle Daemon, which are documented at <a class="calibre1" href="https://docs.gradle.org/current/userguide/gradle_daemon.html">https://docs.gradle.org/current/userguide/gradle_daemon.html</a>
</p></div></div>

<div class="book" title="The first Gradle build script" id="G6PI1-e78ecbb3ac0544f19c59f96d594821c0">
<div class="book" title="Gradle Wrapper"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec13" class="calibre1"/>Gradle Wrapper</h2></div></div></div><p class="calibre8">A Gradle Wrapper consists of a <code class="literal">gradlew</code> shell script for Linux/Mac OS X, a <code class="literal">gradlew.bat</code> batch script for Windows, and a few helper files. These files can be generated by running a gradle <code class="literal">wrapper</code> task and should be checked into the version control system (VCS) along with project sources. Instead of using the system-wide <code class="literal">gradle</code> command, we can run the builds via the wrapper script.</p><p class="calibre8">Some of the advantages of running builds via a wrapper script are as follows:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">We don’t need to download and install Gradle manually. The wrapper script takes care of this.</li><li class="listitem" value="2">It uses a specific version of Gradle that the project needs. This reduces the risk of breaking a project’s build because of incompatible Gradle versions. We can safely upgrade (or downgrade) the system-wide Gradle installation without affecting our projects.</li><li class="listitem" value="3">It transparently enforces the same Gradle version for our project across all developers’ machines in the team.</li><li class="listitem" value="4">This is extremely useful in Continuous Integration build environments, as we do not need to install/update Gradle on the servers.</li></ol><div class="calibre15"/></div><div class="book" title="Generating wrapper files"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec05" class="calibre1"/>Generating wrapper files</h3></div></div></div><p class="calibre8">The Gradle <code class="literal">wrapper</code> task is already available to all Gradle projects. To generate the wrapper scripts and supporting files, just execute the following code from the command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle wrapper </strong></span>
</pre></div><p class="calibre8">While generating <code class="literal">wrapper</code>, we can specify the exact Gradle version as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradle wrapper --gradle-version 2.9</strong></span>
</pre></div><p class="calibre8">In this example, we are specifying the Gradle version to be used is 2.9. After running this command, we should check-in the generated files into VCS. We can customize the <code class="literal">wrapper</code> task to use a configured Gradle version, produce wrapper scripts with different names, change their locations, and so on. </p></div><div class="book" title="Running a build via wrapper"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec06" class="calibre1"/>Running a build via wrapper</h3></div></div></div><p class="calibre8">For availing the benefits of a wrapper script, instead of using the gradle command, we need to call the wrapper script based on our OS.</p><p class="calibre8">On Mac OS X/Linux:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ ./gradlew taskName</strong></span>
</pre></div><p class="calibre8">On Windows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">$ gradlew taskName</strong></span>
</pre></div><p class="calibre8">We can use the arguments and flags exactly in the same way as we pass to the <code class="literal">gradle</code> command.</p></div></div></div>
<div class="book" title="Summary" id="H5A41-e78ecbb3ac0544f19c59f96d594821c0"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we started with a brief introduction to Gradle. Then, we looked at manual installation and also installation via package managers. We also learned about Gradle's command-line interface. Also, finally, we wrote our first Gradle build script.</p><p class="calibre8">If you have followed the chapter until this point, you are all set to check out any Gradle-based project on your machine and execute builds. Also, you are equipped with the knowledge to write a very basic Gradle build script. Going forward, we will look at building Java-based projects with Gradle.</p></div></body></html>