<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Creating a Spring Application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Creating a Spring Application</h1></div></div></div><p>In this chapter, we will cover the following recipes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Installing Java, Maven, Tomcat, and Eclipse on Mac OS</li><li class="listitem" style="list-style-type: disc">Installing Java, Maven, Tomcat, and Eclipse on Ubuntu</li><li class="listitem" style="list-style-type: disc">Installing Java, Maven, Tomcat, and Eclipse on Windows</li><li class="listitem" style="list-style-type: disc">Creating a Spring web application</li><li class="listitem" style="list-style-type: disc">Running a Spring web application</li><li class="listitem" style="list-style-type: disc">Using Spring in a standard Java application</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Introduction</h1></div></div></div><p>In this chapter, we will first cover the installation of some of the tools for Spring development:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Java</strong></span>: Spring <a id="id0" class="indexterm"/>is <a id="id1" class="indexterm"/>a Java framework.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Maven</strong></span>: This<a id="id2" class="indexterm"/> is a build tool similar to <a id="id3" class="indexterm"/>Ant. It makes it easy to add Spring libraries to a project. Gradle is another option as a build tool.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Tomcat</strong></span>: This is<a id="id4" class="indexterm"/> a web server for Java <a id="id5" class="indexterm"/>web applications. You can also use JBoss, Jetty, GlassFish, or WebSphere.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Eclipse</strong></span>: This <a id="id6" class="indexterm"/>is an IDE. You can also use <a id="id7" class="indexterm"/>NetBeans, IntelliJ IDEA, and so on.</li></ul></div><p>Then, we will build a Spring web application and run it with Tomcat.</p><p>Finally, we'll see how Spring can also be used in a standard Java application (not a web application).</p></div></div>
<div class="section" title="Installing Java, Maven, Tomcat, and Eclipse on Mac OS"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Installing Java, Maven, Tomcat, and Eclipse on Mac OS</h1></div></div></div><p>We will first install Java 8 because it's not installed by default on Mac OS 10.9 or higher version. Then, we will install Maven 3, a build tool similar to Ant, to manage the external Java libraries that we will use (Spring, Hibernate, and so on). Maven 3 also compiles source files and generates JAR and WAR files. We will also install Tomcat 8, a popular web server for Java web applications, which we will use throughout this book. JBoss, Jetty, GlassFish, or WebSphere could be used instead. Finally, we will install the Eclipse IDE, but you could also use NetBeans, IntelliJ IDEA, and so on.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>How to do it…</h2></div></div></div><p>Install Java <a id="id8" class="indexterm"/>first, then Maven, Tomcat, and Eclipse.</p><div class="section" title="Installing Java"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec01"/>Installing Java</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download<a id="id9" class="indexterm"/> Java from the Oracle website <a class="ulink" href="http://oracle.com">http://oracle.com</a>. In <a id="id10" class="indexterm"/>the Java SE downloads section, choose the Java SE 8 SDK. Select <span class="strong"><strong>Accept the License Agreement</strong></span> and download the <span class="strong"><strong>Mac OS X x64</strong></span> package. The direct link to the page is <a class="ulink" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>.<div class="mediaobject"><img src="graphics/5807OS_01_01.jpg" alt="Installing Java"/></div></li><li class="listitem">Open the downloaded file, launch it, and complete the installation.</li><li class="listitem">In your <code class="literal">~/.bash_profile</code> file, set the <code class="literal">JAVA_HOME</code> environment variable. Change <code class="literal">jdk1.8.0_40.jdk</code> to the actual folder name on your system (this depends on<a id="id11" class="indexterm"/> the version of Java you are using, which is updated regularly):<div class="informalexample"><pre class="programlisting">export JAVA_HOME="/Library/Java/JavaVirtualMachines/ jdk1.8.0_40.jdk/Contents/Home"</pre></div></li><li class="listitem">Open a new<a id="id12" class="indexterm"/> terminal and test whether it's working:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ java -version</strong></span>
<span class="strong"><strong>java version "1.8.0_40"</strong></span>
<span class="strong"><strong>Java(TM) SE Runtime Environment (build 1.8.0_40-b26)</strong></span>
<span class="strong"><strong>Java HotSpot(TM) 64-Bit Server VM (build 25.40-b25, mixed mode)</strong></span>
</pre></div></li></ol></div></div><div class="section" title="Installing Maven"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec02"/>Installing Maven</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id13" class="indexterm"/>Maven from the Apache website<a id="id14" class="indexterm"/> <a class="ulink" href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a>. Choose the<span class="strong"><strong> Binary zip</strong></span> file <a id="id15" class="indexterm"/>of the current stable version:<div class="mediaobject"><img src="graphics/5807OS_01_02.jpg" alt="Installing Maven"/></div></li><li class="listitem">Uncompress the downloaded file and move the extracted folder to a convenient location (for example, <code class="literal">~/bin</code>).</li><li class="listitem">In your <code class="literal">~/.bash_profile</code> file, add a <code class="literal">MAVEN HOME</code> environment variable pointing to that folder. For example:<div class="informalexample"><pre class="programlisting">export MAVEN_HOME=~/bin/apache-maven-3.3.1</pre></div></li><li class="listitem">Add the <code class="literal">bin</code> subfolder to your <code class="literal">PATH</code> environment variable:<div class="informalexample"><pre class="programlisting">export PATH=$PATH:$MAVEN_HOME/bin</pre></div></li><li class="listitem">Open a <a id="id16" class="indexterm"/>new<a id="id17" class="indexterm"/> terminal and test whether it's working:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn –v</strong></span>
<span class="strong"><strong>Apache Maven 3.3.1 (12a6b3...</strong></span>
<span class="strong"><strong>Maven home: /Users/jerome/bin/apache-maven-3.3.1</strong></span>
<span class="strong"><strong>Java version: 1.8.0_40, vendor: Oracle Corporation</strong></span>
<span class="strong"><strong>Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_...</strong></span>
<span class="strong"><strong>Default locale: en_US, platform encoding: UTF-8</strong></span>
<span class="strong"><strong>OS name: "mac os x", version: "10.9.5", arch... …</strong></span>
</pre></div></li></ol></div></div><div class="section" title="Installing Tomcat"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec03"/>Installing Tomcat</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id18" class="indexterm"/>Tomcat from the Apache website <a id="id19" class="indexterm"/><a class="ulink" href="http://tomcat.apache.org/download-80.cgi">http://tomcat.apache.org/download-80.cgi</a> and choose the <span class="strong"><strong>Core</strong></span> binary<a id="id20" class="indexterm"/> distribution.<div class="mediaobject"><img src="graphics/5807OS_01_03.jpg" alt="Installing Tomcat"/></div></li><li class="listitem">Uncompress the downloaded file and move the extracted folder to a convenient location (for example, <code class="literal">~/bin</code>).</li><li class="listitem">Make the scripts in the <code class="literal">bin</code> subfolder executable:<div class="informalexample"><pre class="programlisting">chmod +x bin/*.sh</pre></div></li><li class="listitem">Launch Tomcat using the <code class="literal">catalina.sh</code> script:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ bin/catalina.sh run</strong></span>
<span class="strong"><strong>Using CATALINA_BASE:   /Users/jerome/bin/apache-tomcat-7.0.54</strong></span>
<span class="strong"><strong>...</strong></span>
<span class="strong"><strong>INFO: Server startup in 852 ms</strong></span>
</pre></div></li><li class="listitem">Tomcat<a id="id21" class="indexterm"/> runs on the <code class="literal">8080</code> port by default. In <a id="id22" class="indexterm"/>a web browser, go to <code class="literal">http://localhost:8080/</code> to check whether it's working.</li></ol></div></div><div class="section" title="Installing Eclipse"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec04"/>Installing Eclipse</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id23" class="indexterm"/>Eclipse from <a class="ulink" href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>. Choose the <span class="strong"><strong>Mac OS X 64 Bit</strong></span> <a id="id24" class="indexterm"/>version <a id="id25" class="indexterm"/>of <span class="strong"><strong>Eclipse IDE for Java EE Developers</strong></span>.<div class="mediaobject"><img src="graphics/5807OS_01_04.jpg" alt="Installing Eclipse"/></div></li><li class="listitem">Uncompress the downloaded file and move the extracted folder to a convenient location (for example, <code class="literal">~/bin</code>).</li><li class="listitem">Launch Eclipse by executing the <code class="literal">eclipse</code> binary:<div class="informalexample"><pre class="programlisting">./eclipse</pre></div></li></ol></div></div></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>There's more…</h2></div></div></div><p>Tomcat can be run <a id="id26" class="indexterm"/>as a background process using these two scripts:</p><div class="informalexample"><pre class="programlisting">bin/startup.sh
bin/shutdown.sh</pre></div><p>On a development machine, it's convenient to put Tomcat's folder somewhere in the home directory (for example, <code class="literal">~/bin</code>) so that its contents can be updated without root privileges.</p></div></div>
<div class="section" title="Installing Java, Maven, Tomcat, and Eclipse on Ubuntu"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Installing Java, Maven, Tomcat, and Eclipse on Ubuntu</h1></div></div></div><p>We will first install Java 8. Then, we will install Maven 3, a build tool similar to Ant, to manage the external Java libraries that we will use (Spring, Hibernate, so on). Maven 3 also compiles source files and generates JAR and WAR files. We will also install Tomcat 8, a popular web server for Java web applications, which we will use throughout this book. JBoss, Jetty, GlassFish, or WebSphere could be used instead. Finally, we will install the Eclipse IDE, but you could also use NetBeans, IntelliJ IDEA, and so on.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>How to do it…</h2></div></div></div><p>Install Java first, then Maven, Tomcat, and Eclipse.</p><div class="section" title="Installing Java"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec05"/>Installing Java</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Add<a id="id27" class="indexterm"/> this <a id="id28" class="indexterm"/><span class="strong"><strong>PPA</strong></span> (<span class="strong"><strong>Personal Package Archive</strong></span>):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo add-apt-repository -y ppa:webupd8team/java</strong></span>
</pre></div></li><li class="listitem">Refresh the <a id="id29" class="indexterm"/>list of the available packages:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get update</strong></span>
</pre></div></li><li class="listitem">Download and install Java 8:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get install –y oracle-java8-installer</strong></span>
</pre></div></li><li class="listitem">Test whether it's working:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ java -version</strong></span>
<span class="strong"><strong>java version "1.8.0_40"</strong></span>
<span class="strong"><strong>Java(TM) SE Runtime Environment (build 1.8.0_40-b25)</strong></span>
<span class="strong"><strong>Java HotSpot(TM) 64-Bit Server VM (build 25.40-b25…</strong></span>
</pre></div></li></ol></div></div><div class="section" title="Installing Maven"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec06"/>Installing Maven</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id30" class="indexterm"/>Maven from the Apache website<a id="id31" class="indexterm"/> <a class="ulink" href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a>. Choose the<span class="strong"><strong> Binary zip</strong></span> file<a id="id32" class="indexterm"/> of the current stable version:<div class="mediaobject"><img src="graphics/5807OS_01_02.jpg" alt="Installing Maven"/></div></li><li class="listitem">Uncompress<a id="id33" class="indexterm"/> the downloaded file and move the<a id="id34" class="indexterm"/> resulting folder to a convenient location (for example, <code class="literal">~/bin</code>).</li><li class="listitem">In your <code class="literal">~/.bash_profile</code> file, add a <code class="literal">MAVEN HOME</code> environment variable pointing to that folder. For example:<div class="informalexample"><pre class="programlisting">export MAVEN_HOME=~/bin/apache-maven-3.3.1</pre></div></li><li class="listitem">Add the <code class="literal">bin</code> subfolder to your <code class="literal">PATH</code> environment variable:<div class="informalexample"><pre class="programlisting">export PATH=$PATH:$MAVEN_HOME/bin</pre></div></li><li class="listitem">Open a new terminal and test whether it's working:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn –v</strong></span>
<span class="strong"><strong>Apache Maven 3.3.1 (12a6b3...</strong></span>
<span class="strong"><strong>Maven home: /home/jerome/bin/apache-maven-3.3.1</strong></span>
<span class="strong"><strong>Java version: 1.8.0_40, vendor: Oracle Corporation</strong></span>
<span class="strong"><strong>…</strong></span>
</pre></div></li></ol></div></div><div class="section" title="Installing Tomcat"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec07"/>Installing Tomcat</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id35" class="indexterm"/>Tomcat from the Apache website<a id="id36" class="indexterm"/> <a class="ulink" href="http://tomcat.apache.org/download-80.cgi">http://tomcat.apache.org/download-80.cgi</a> and choose the <span class="strong"><strong>Core</strong></span> binary <a id="id37" class="indexterm"/>distribution.<div class="mediaobject"><img src="graphics/5807OS_01_03.jpg" alt="Installing Tomcat"/></div></li><li class="listitem">Uncompress<a id="id38" class="indexterm"/> the downloaded file and move the<a id="id39" class="indexterm"/> extracted folder to a convenient location (for example, <code class="literal">~/bin</code>).</li><li class="listitem">Make the scripts in the <code class="literal">bin</code> subfolder executable:<div class="informalexample"><pre class="programlisting">chmod +x bin/*.sh</pre></div></li><li class="listitem">Launch Tomcat using the <code class="literal">catalina.sh</code> script:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ bin/catalina.sh run</strong></span>
<span class="strong"><strong>Using CATALINA_BASE:   /Users/jerome/bin/apache-tomcat-7.0.54</strong></span>
<span class="strong"><strong>...</strong></span>
<span class="strong"><strong>INFO: Server startup in 852 ms</strong></span>
</pre></div></li><li class="listitem">Tomcat runs on the 8080 port by default. Go to <code class="literal">http://localhost:8080/</code> to check whether it's working.</li></ol></div></div><div class="section" title="Installing Eclipse"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec08"/>Installing Eclipse</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id40" class="indexterm"/>Eclipse from <a class="ulink" href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>. Choose the <span class="strong"><strong>Linux 64 Bit</strong></span> version <a id="id41" class="indexterm"/>of <a id="id42" class="indexterm"/><span class="strong"><strong>Eclipse IDE for Java EE Developers</strong></span>.<div class="mediaobject"><img src="graphics/5807OS_01_05.jpg" alt="Installing Eclipse"/></div></li><li class="listitem">Uncompress the downloaded file and move the extracted folder to a convenient<a id="id43" class="indexterm"/> location (for example, <code class="literal">~/bin</code>).</li><li class="listitem">Launch <a id="id44" class="indexterm"/>Eclipse by executing the <code class="literal">eclipse</code> binary:<div class="informalexample"><pre class="programlisting">./eclipse</pre></div></li></ol></div></div></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>There's more…</h2></div></div></div><p>Tomcat<a id="id45" class="indexterm"/> can be run as a background process using these two scripts:</p><div class="informalexample"><pre class="programlisting">bin/startup.sh
bin/shutdown.sh</pre></div><p>On a development machine, it's convenient to put Tomcat's folder somewhere in the home directory (for example, <code class="literal">~/bin</code>) so that its contents can be updated without root privileges.</p></div></div>
<div class="section" title="Installing Java, Maven, Tomcat, and Eclipse on Windows"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Installing Java, Maven, Tomcat, and Eclipse on Windows</h1></div></div></div><p>We will first install Java 8. Then, we will install Maven 3, a build tool similar to Ant, to manage the external Java libraries that we will use (Spring, Hibernate, and so on). Maven 3 also compiles source files and generates JAR and WAR files. We will also install Tomcat 8, a popular web server for Java web applications, which we will use throughout this book. JBoss, Jetty, GlassFish, or WebSphere could be used instead. Finally, we will install<a id="id46" class="indexterm"/> the Eclipse IDE, but you could also use NetBeans, IntelliJ IDEA, and so on.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>How to do it…</h2></div></div></div><p>Install Java <a id="id47" class="indexterm"/>first, then Maven, Tomcat, and Eclipse.</p><div class="section" title="Installing Java"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec09"/>Installing Java</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id48" class="indexterm"/>Java from the Oracle website <a class="ulink" href="http://oracle.com">http://oracle.com</a>. In the Java SE downloads section, choose the Java <a id="id49" class="indexterm"/>SE 8 SDK. Select <span class="strong"><strong>Accept the License Agreement</strong></span> and <a id="id50" class="indexterm"/>download the <span class="strong"><strong>Windows x64</strong></span> package. The direct link to the page is <a class="ulink" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>.<div class="mediaobject"><img src="graphics/5807OS_01_06.jpg" alt="Installing Java"/></div></li><li class="listitem">Open the downloaded file, launch it, and complete the installation.</li><li class="listitem">Navigate to <span class="strong"><strong>Control Panel</strong></span> | <span class="strong"><strong>System and Security</strong></span> | <span class="strong"><strong>System</strong></span> | <span class="strong"><strong>Advanced system settings</strong></span> | <span class="strong"><strong>Environment Variables…</strong></span>.</li><li class="listitem">Add a <code class="literal">JAVA_HOME</code> system variable with the <code class="literal">C:\Program Files\Java\jdk1.8.0_40</code> value. Change <code class="literal">jdk1.8.0_40</code> to the actual folder name on your system (this depends on the version of Java, which is updated regularly).<div class="mediaobject"><img src="graphics/5807OS_01_07.jpg" alt="Installing Java"/></div></li><li class="listitem">Test <a id="id51" class="indexterm"/>whether it's working by opening Command <a id="id52" class="indexterm"/>Prompt and entering <code class="literal">java –version</code>.<div class="mediaobject"><img src="graphics/5807OS_01_08.jpg" alt="Installing Java"/></div></li></ol></div></div><div class="section" title="Installing Maven"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec10"/>Installing Maven</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id53" class="indexterm"/>Maven from the Apache website<a id="id54" class="indexterm"/> <a class="ulink" href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a>. Choose the<span class="strong"><strong> Binary zip</strong></span> file <a id="id55" class="indexterm"/>of the current stable version:<div class="mediaobject"><img src="graphics/5807OS_01_02.jpg" alt="Installing Maven"/></div></li><li class="listitem">Uncompress<a id="id56" class="indexterm"/> the downloaded file.</li><li class="listitem">Create<a id="id57" class="indexterm"/> a <code class="literal">Programs</code> folder in your user folder.</li><li class="listitem">Move the extracted folder to it.</li><li class="listitem">Navigate to <span class="strong"><strong>Control Panel</strong></span> | <span class="strong"><strong>System and Security</strong></span> | <span class="strong"><strong>System</strong></span> | <span class="strong"><strong>Advanced system settings</strong></span> | <span class="strong"><strong>Environment Variables…</strong></span>.</li><li class="listitem">Add a <code class="literal">MAVEN_HOME</code> system variable with the path to the Maven folder. For example, <code class="literal">C:\Users\jerome\Programs\apache-maven-3.2.1</code>.</li><li class="listitem">Open the <code class="literal">Path</code> system variable.</li><li class="listitem">Append<code class="literal"> ;%MAVEN_HOME%\bin </code>to it.<div class="mediaobject"><img src="graphics/5807OS_01_09.jpg" alt="Installing Maven"/></div></li><li class="listitem">Test<a id="id58" class="indexterm"/> whether it's working by opening a <a id="id59" class="indexterm"/>Command Prompt and entering <code class="literal">mvn –v</code>.<div class="mediaobject"><img src="graphics/5807OS_01_10.jpg" alt="Installing Maven"/></div></li></ol></div></div><div class="section" title="Installing Tomcat"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec11"/>Installing Tomcat</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download<a id="id60" class="indexterm"/> Tomcat from the Apache website <a id="id61" class="indexterm"/><a class="ulink" href="http://tomcat.apache.org/download-80.cgi">http://tomcat.apache.org/download-80.cgi</a> and choose the <span class="strong"><strong>32-bit/64-bit </strong></span><a id="id62" class="indexterm"/><span class="strong"><strong>Windows Service Installer </strong></span>binary distribution.<div class="mediaobject"><img src="graphics/5807OS_01_11.jpg" alt="Installing Tomcat"/></div></li><li class="listitem">Launch <a id="id63" class="indexterm"/>and complete the installation.</li><li class="listitem">Tomcat <a id="id64" class="indexterm"/>runs on the 8080 port by default. Go to <code class="literal">http://localhost:8080/</code> to check whether it's working.</li></ol></div></div><div class="section" title="Installing Eclipse"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec12"/>Installing Eclipse</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download <a id="id65" class="indexterm"/>Eclipse <a id="id66" class="indexterm"/>from <a class="ulink" href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>. Choose the <span class="strong"><strong>Windows 64 Bit</strong></span> version <a id="id67" class="indexterm"/>of <span class="strong"><strong>Eclipse IDE for Java EE Developers</strong></span>.<div class="mediaobject"><img src="graphics/5807OS_01_12.jpg" alt="Installing Eclipse"/></div></li><li class="listitem">Uncompress the downloaded file.</li><li class="listitem">Launch the <code class="literal">eclipse </code>program.</li></ol></div></div></div></div>
<div class="section" title="Creating a Spring web application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Creating a Spring web application</h1></div></div></div><p>In this recipe, we <a id="id68" class="indexterm"/>will build a simple Spring web application with Eclipse. We will:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create a new Maven project</li><li class="listitem" style="list-style-type: disc">Add Spring to it</li><li class="listitem" style="list-style-type: disc">Add two Java classes to configure Spring</li><li class="listitem" style="list-style-type: disc">Create a "Hello World" web page</li></ul></div><p>In the <a id="id69" class="indexterm"/>next recipe, we will compile and run this web application.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>How to do it…</h2></div></div></div><p>In this section, we will create a Spring web application in Eclipse.</p><div class="section" title="Creating a new Maven project in Eclipse"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec13"/>Creating a new Maven project in Eclipse</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In <a id="id70" class="indexterm"/>Eclipse, in the <span class="strong"><strong>File</strong></span> menu, select <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Project…</strong></span>.</li><li class="listitem">Under <span class="strong"><strong>Maven</strong></span>, select <span class="strong"><strong>Maven Project</strong></span> and click on <span class="strong"><strong>Next &gt;</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Create a simple project (skip archetype selection)</strong></span> checkbox and click on <span class="strong"><strong>Next &gt;</strong></span>.</li><li class="listitem">For the <span class="strong"><strong>Group Id</strong></span> field, enter <code class="literal">com.springcookbook</code>. For the <span class="strong"><strong>Artifact Id</strong></span> field, enter <code class="literal">springwebapp</code>. For <span class="strong"><strong>Packaging</strong></span>, select <code class="literal">war</code> and click on <span class="strong"><strong>Finish</strong></span>.</li></ol></div></div><div class="section" title="Adding Spring to the project using Maven"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec14"/>Adding Spring to the project using Maven</h3></div></div></div><p>Open <a id="id71" class="indexterm"/>Maven's <code class="literal">pom.xml</code> configuration file at the root of the project. Select the <span class="strong"><strong>pom.xml</strong></span> tab to edit the XML source code directly. Under the <code class="literal">project</code> XML node, define the versions for Java and Spring. Also add the Servlet API, Spring Core, and Spring MVC dependencies:</p><div class="informalexample"><pre class="programlisting">&lt;properties&gt;
  &lt;java.version&gt;1.8&lt;/java.version&gt;
  &lt;spring.version&gt;4.1.5.RELEASE&lt;/spring.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
  &lt;!-- Servlet API --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
    &lt;version&gt;3.1.0&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependency&gt;

  &lt;!-- Spring Core --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;${spring.version}&lt;/version&gt;
  &lt;/dependency&gt;

  &lt;!-- Spring MVC --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
    &lt;version&gt;${spring.version}&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div></div><div class="section" title="Creating the configuration classes for Spring"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec15"/>Creating the configuration classes for Spring</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create <a id="id72" class="indexterm"/>the Java packages <code class="literal">com.springcookbook.config</code> and <code class="literal">com.springcookbook.controller</code>; in the left-hand side pane <span class="strong"><strong>Package Explorer</strong></span>, right-click on the project folder and select <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Package…</strong></span>.</li><li class="listitem">In the <code class="literal">com.springcookbook.config</code> package, create the <code class="literal">AppConfig</code> class. In the <span class="strong"><strong>Source</strong></span> menu, select <span class="strong"><strong>Organize Imports</strong></span> to add the needed import declarations:<div class="informalexample"><pre class="programlisting">package com.springcookbook.config;
@Configuration
@EnableWebMvc
@ComponentScan (basePackages = {"com.springcookbook.controller"})
public class AppConfig {  
}</pre></div></li><li class="listitem">Still in the <code class="literal">com.springcookbook.config</code> package, create the <code class="literal">ServletInitializer</code> class. Add the needed import declarations similarly:<div class="informalexample"><pre class="programlisting">package com.springcookbook.config;

public class ServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {
    @Override
    protected Class&lt;?&gt;[] getRootConfigClasses() {
        return new Class&lt;?&gt;[0];
    }
    
    @Override
    protected Class&lt;?&gt;[] getServletConfigClasses() {
        return new Class&lt;?&gt;[]{AppConfig.class};
    }

    @Override
    protected String[] getServletMappings() {
        return new String[]{"/"};
    }
}</pre></div></li></ol></div></div><div class="section" title="Creating a &quot;Hello World&quot; web page"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec16"/>Creating a "Hello World" web page</h3></div></div></div><p>In the <code class="literal">com.springcookbook.controller</code> package, create the <code class="literal">HelloController</code> class and <a id="id73" class="indexterm"/>its <code class="literal">hi()</code> method:</p><div class="informalexample"><pre class="programlisting">@Controller
public class HelloController {
  @RequestMapping("hi")
  @ResponseBody
  public String hi() {
      return "Hello, world.";
  }
}</pre></div></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>How it works…</h2></div></div></div><p>This section will give more you details of what happened at every step.</p><div class="section" title="Creating a new Maven project in Eclipse"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec17"/>Creating a new Maven project in Eclipse</h3></div></div></div><p>The <a id="id74" class="indexterm"/>generated Maven project is a <code class="literal">pom.xml</code> configuration file along with a hierarchy of empty directories:</p><div class="informalexample"><pre class="programlisting">pom.xml
src
 |- main
    |- java
    |- resources
    |- webapp
 |- test
    |- java
    |- resources</pre></div></div><div class="section" title="Adding Spring to the project using Maven"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec18"/>Adding Spring to the project using Maven</h3></div></div></div><p>The <a id="id75" class="indexterm"/>declared Maven libraries and their dependencies are automatically downloaded in the background by Eclipse. They are listed under <span class="strong"><strong>Maven Dependencies</strong></span> in the left-hand side pane <span class="strong"><strong>Package Explorer</strong></span>.</p><p>Tomcat provides the <code class="literal">Servlet API</code> dependency, but we still declared it because our code needs it to compile. Maven will not include it in the generated <code class="literal">.war</code> file because of the <code class="literal">&lt;scope&gt;provided&lt;/scope&gt;</code> declaration.</p></div><div class="section" title="Creating the configuration classes for Spring"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec19"/>Creating the configuration classes for Spring</h3></div></div></div><p><code class="literal">AppConfig</code> is a <a id="id76" class="indexterm"/>Spring configuration class. It is <a id="id77" class="indexterm"/>a standard Java class annotated<a id="id78" class="indexterm"/> with:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">@Configuration</code>: This declares it as a Spring configuration class</li><li class="listitem" style="list-style-type: disc"><code class="literal">@EnableWebMvc</code>: This enables Spring's ability to receive and process web requests</li><li class="listitem" style="list-style-type: disc"><code class="literal">@ComponentScan(basePackages = {"com.springcookbook.controller"})</code>: This scans the <code class="literal">com.springcookbook.controller</code> package for Spring components</li></ul></div><p><code class="literal">ServletInitializer</code> is a configuration class for Spring's servlet; it replaces the standard <code class="literal">web.xml</code> file. It will be detected automatically by <code class="literal">SpringServletContainerInitializer</code>, which is automatically called by any Servlet 3. <code class="literal">ServletInitializer</code> extends the <code class="literal">AbstractAnnotationConfigDispatcherServletInitializer</code> abstract class and implements the required methods:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">getServletMappings()</code>: This declares the servlet root URI.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getServletConfigClasses()</code>: This declares the Spring configuration classes. Here, we declared the <code class="literal">AppConfig</code> class that was previously defined.</li></ul></div></div><div class="section" title="Creating a &quot;Hello World&quot; web page"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec20"/>Creating a "Hello World" web page</h3></div></div></div><p>We <a id="id79" class="indexterm"/>created a controller class in the <code class="literal">com.springcookbook.controller</code> package, which we declared in <code class="literal">AppConfig</code>. When navigating to <code class="literal">http://localhost:8080/hi</code>, the <code class="literal">hi()</code>method will be called and <span class="strong"><strong>Hello, world.</strong></span> will be displayed in the browser. This will be explained further in <a class="link" href="ch03.html" title="Chapter 3. Using Controllers and Views">Chapter 3</a>, <span class="emphasis"><em>Using Controllers and Views</em></span>.</p></div></div></div>
<div class="section" title="Running a Spring web application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Running a Spring web application</h1></div></div></div><p>In this recipe, we will use the Spring web application from the previous recipe. We will compile it with Maven and run it with Tomcat.</p><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>How to do it…</h2></div></div></div><p>Here are <a id="id80" class="indexterm"/>the steps to compile and run a Spring web application:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In <code class="literal">pom.xml</code>, add this boilerplate code under the <code class="literal">project</code> XML node. It will allow Maven to generate <code class="literal">.war</code> files without requiring a <code class="literal">web.xml</code> file:<div class="informalexample"><pre class="programlisting">&lt;build&gt;
    &lt;finalName&gt;springwebapp&lt;/finalName&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.5&lt;/version&gt;
      &lt;configuration&gt;
        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre></div></li><li class="listitem">In Eclipse, in the left-hand side pane <span class="strong"><strong>Package Explorer</strong></span>, select the <code class="literal">springwebapp</code> project folder. In the <span class="strong"><strong>Run</strong></span> menu, select <span class="strong"><strong>Run</strong></span> and choose <span class="strong"><strong>Maven install</strong></span> or you can execute <code class="literal">mvn clean install</code> in a terminal at the root of the project folder. In both cases, a <code class="literal">target</code> folder will be generated with the <code class="literal">springwebapp.war</code> file in it.</li><li class="listitem">Copy the <code class="literal">target/springwebapp.war</code> file to Tomcat's <code class="literal">webapps</code> folder.</li><li class="listitem">Launch Tomcat.</li><li class="listitem">In a web browser, go to <code class="literal">http://localhost:8080/springwebapp/hi</code> to check whether it's working.<div class="mediaobject"><img src="graphics/5807OS_01_13.jpg" alt="How to do it…"/></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>How it works…</h2></div></div></div><p>In <code class="literal">pom.xml</code> the boilerplate code prevents Maven from throwing an error because there's no <code class="literal">web.xml</code> file. A <code class="literal">web.xml</code> file was required in Java web applications; however, since <a id="id81" class="indexterm"/>Servlet specification 3.0 (implemented in Tomcat 7 and higher versions), it's not required anymore.</p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>There's more…</h2></div></div></div><p>On Mac OS and Linux, you can create a symbolic link in Tomcat's <code class="literal">webapps</code> folder pointing to the <code class="literal">.war</code> file in your project folder. For example:</p><div class="informalexample"><pre class="programlisting">ln -s ~/eclipse_workspace/spring_webapp/target/springwebapp.war ~/bin/apache-tomcat/webapps/springwebapp.war</pre></div><p>So, when the<code class="literal">.war</code> file is updated in your project folder, Tomcat will detect that it has been modified and will reload the application automatically.</p></div></div>
<div class="section" title="Using Spring in a standard Java application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Using Spring in a standard Java application</h1></div></div></div><p>In this recipe, we will build a standard Java application (not a web application) using Spring. We <a id="id82" class="indexterm"/>will:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create <a id="id83" class="indexterm"/>a new Maven project</li><li class="listitem" style="list-style-type: disc">Add Spring to it</li><li class="listitem" style="list-style-type: disc">Add a class to configure Spring</li><li class="listitem" style="list-style-type: disc">Add a <code class="literal">User</code> class</li><li class="listitem" style="list-style-type: disc">Define a <code class="literal">User</code> singleton in the Spring configuration class</li><li class="listitem" style="list-style-type: disc">Use the <code class="literal">User</code> singleton in the <code class="literal">main()</code> method</li></ul></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>How to do it…</h2></div></div></div><p>In this section, we will cover the steps to use Spring in a standard (not web) Java application.</p><div class="section" title="Creating a new Maven project in Eclipse"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec21"/>Creating a new Maven project in Eclipse</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In <a id="id84" class="indexterm"/>Eclipse, in the <span class="strong"><strong>File</strong></span> menu, select <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Project...</strong></span>.</li><li class="listitem">Under <span class="strong"><strong>Maven</strong></span>, select <span class="strong"><strong>Maven Project</strong></span> and click on <span class="strong"><strong>Next &gt;</strong></span>.</li><li class="listitem">Select the <span class="strong"><strong>Create a simple project (skip archetype selection)</strong></span> checkbox and click on <span class="strong"><strong>Next &gt;</strong></span>.</li><li class="listitem">For<a id="id85" class="indexterm"/> the <span class="strong"><strong>Group Id</strong></span> field, enter <code class="literal">com.springcookbook</code>. For the <span class="strong"><strong>Artifact Id</strong></span> field, enter <code class="literal">springapp</code>. Click on <span class="strong"><strong>Finish</strong></span>.</li></ol></div></div><div class="section" title="Adding Spring to the project using Maven"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec22"/>Adding Spring to the project using Maven</h3></div></div></div><p>Open <a id="id86" class="indexterm"/>Maven's <code class="literal">pom.xml</code> configuration file at the root of the project. Select the <span class="strong"><strong>pom.xml</strong></span> tab to edit the XML source <a id="id87" class="indexterm"/>code directly. Under the <code class="literal">project</code> XML <a id="id88" class="indexterm"/>node, define the Java and Spring versions and add the Spring Core dependency:</p><div class="informalexample"><pre class="programlisting">&lt;properties&gt;
  &lt;java.version&gt;1.8&lt;/java.version&gt;
  &lt;spring.version&gt;4.1.5.RELEASE&lt;/spring.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
  &lt;!-- Spring Core --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;${spring.version}&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div></div><div class="section" title="Creating a configuration class for Spring"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec23"/>Creating a configuration class for Spring</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create the <code class="literal">com.springcookbook.config</code> Java package; in the left-hand side <a id="id89" class="indexterm"/>pane <span class="strong"><strong>Package Explorer</strong></span>, right-click on the project and select <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Package…</strong></span>.</li><li class="listitem">In the <code class="literal">com.springcookbook.config</code> package, create the <code class="literal">AppConfig</code> class. In the <span class="strong"><strong>Source</strong></span> menu, select <span class="strong"><strong>Organize Imports</strong></span> to add the needed import declarations:<div class="informalexample"><pre class="programlisting">@Configuration
public class AppConfig {
}</pre></div></li></ol></div></div><div class="section" title="Creating the User class"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec24"/>Creating the User class</h3></div></div></div><p>Create <a id="id90" class="indexterm"/>a <code class="literal">User</code> Java class with two <code class="literal">String</code> fields:</p><div class="informalexample"><pre class="programlisting">public class User {
  private String name;
  private String skill;
  
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
  public String getSkill() {
    return skill;
  }
  public void setSkill(String skill) {
    this.skill = skill;
  }
}</pre></div></div><div class="section" title="Defining a User singleton in the Spring configuration class"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec25"/>Defining a User singleton in the Spring configuration class</h3></div></div></div><p>In<a id="id91" class="indexterm"/> the<a id="id92" class="indexterm"/> <code class="literal">AppConfig</code> class, define a <code class="literal">User</code> bean:</p><div class="informalexample"><pre class="programlisting">  @Bean
  public User admin(){
    User u = new User();
    u.setName("Merlin");
    u.setSkill("Magic");
    return u;
  }</pre></div></div><div class="section" title="Using the User singleton in the main() method"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec26"/>Using the User singleton in the main() method</h3></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create <a id="id93" class="indexterm"/>the <code class="literal">com.springcookbook.main</code> package <a id="id94" class="indexterm"/>with the <code class="literal">Main</code> class containing the <code class="literal">main()</code> method:<div class="informalexample"><pre class="programlisting">package com.springcookbook.main;
public class Main {
  public static void main(String[] args) {
}
}</pre></div></li><li class="listitem">In the <code class="literal">main()</code> method, retrieve the User singleton and print its properties:<div class="informalexample"><pre class="programlisting">AnnotationConfigApplicationContext springContext = new AnnotationConfigApplicationContext(AppConfig.class);

User admin = (User) springContext.getBean("admin");

System.out.println("admin name: " + admin.getName());
System.out.println("admin skill: " + admin.getSkill());

springContext.close();</pre></div></li><li class="listitem">Test <a id="id95" class="indexterm"/>whether it's working; in the <span class="strong"><strong>Run</strong></span> menu, select <span class="strong"><strong>Run</strong></span>.<div class="mediaobject"><img src="graphics/5807OS_01_14.jpg" alt="Using the User singleton in the main() method"/></div></li></ol></div></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>How it works...</h2></div></div></div><p>We created <a id="id96" class="indexterm"/>a Java project to which we <a id="id97" class="indexterm"/>added Spring. We defined a <code class="literal">User</code> bean called <code class="literal">admin</code> (the bean name is by default the bean method name). Spring beans are explained in the next chapter.</p><p>In the <code class="literal">Main</code> class, we created a Spring context object from the <code class="literal">AppConfig</code> class and retrieved the <code class="literal">admin</code> bean from it. We used the bean and finally, closed the Spring context.</p></div></div></body></html>