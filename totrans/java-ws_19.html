<html><head></head><body>
		<div>
			<div class="Content" id="_idContainer127">
			</div>
		</div>
		<div class="Content" id="_idContainer128">
			<h1 id="_idParaDest-350"><a id="_idTextAnchor363"/>Appendix</h1>
		</div>
		<div id="_idContainer129">
			<h2>About</h2>
			<p>This section is included to assist the students to perform the activities present in the book. It includes detailed steps that are to be performed by the students to complete and achieve the objectives of the book.</p>
		</div>
		<div class="Content" id="_idContainer132">
			<h1 id="_idParaDest-351"><a id="_idTextAnchor364"/>1. Getting Started</h1>
			<h2 id="_idParaDest-352"><a id="_idTextAnchor365"/>Activity 1: Obtaining the Minimum of Two Numbers</h2>
			<p><strong class="bold">Solution </strong></p>
			<ol>
				<li>Declare <strong class="source-inline">3</strong> double variables: <strong class="source-inline">a</strong>, <strong class="source-inline">b</strong>, and <strong class="source-inline">m</strong>. Initialize them with the values <strong class="source-inline">3</strong>, <strong class="source-inline">4</strong> and <strong class="source-inline">0</strong> respectively<p class="source-code">double a = 3;</p><p class="source-code">double b = 4;</p><p class="source-code">double m = 0; // variable for the minimum</p></li>
				<li>Create a <strong class="source-inline">String</strong> variable <strong class="source-inline">r</strong>, it should contain the output message to be printed.<p class="source-code">// string to be printed</p><p class="source-code">String r = "The minimum of numbers: " + a + " and " + b + " is ";</p></li>
				<li>Use the <strong class="source-inline">min()</strong> method to obtain the minimum of the two numbers and store the value in <strong class="source-inline">m</strong>.<p class="source-code">// mathematical operation</p><p class="source-code">m = Math.min(a,b);</p></li>
				<li>Print the results.<p class="source-code">System.out.println(r + m); // print out the results</p><p class="callout-heading">Note</p><p class="callout">The complete code for this activity can be found here: <a href="https://packt.live/2MFtRNM">https://packt.live/2MFtRNM</a></p></li>
			</ol>
			<h1 id="_idParaDest-353"><a id="_idTextAnchor366"/>2. Learning the Basics</h1>
			<h2 id="_idParaDest-354"><a id="_idTextAnchor367"/>Activity 1: Taking Input and Comparing Ranges</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">In <strong class="source-inline">main()</strong>, introduce an <strong class="source-inline">if</strong> statement to check if the arguments entered are of the right length:<p class="source-code">public class Activity1 {</p><p class="source-code">    public static void main(String[] args) {</p><p class="source-code">        if (args.length &lt; 2) {</p><p class="source-code">            System.err.println("Error. Usage is:");</p><p class="source-code">            System.err.println("Activity1 systolic diastolic");</p><p class="source-code">            System.exit(-1);</p><p class="source-code">        }</p></li>
				<li>Parse these arguments as <strong class="source-inline">int</strong> values and save them in variables: <p class="source-code">        int systolic  = Integer.parseInt(args[0]);</p><p class="source-code">        int diastolic = Integer.parseInt(args[1]);</p></li>
				<li>Check the different values entered to see whether the blood pressure is in the desired range using the following code:<p class="source-code">        System.out.print(systolic + "/" + diastolic + " is ");</p><p class="source-code">        if ((systolic &lt;= 90) || (diastolic &lt;= 60)) {</p><p class="source-code">            System.out.println("low blood pressure.");</p><p class="source-code">        } else if ((systolic &gt;= 140) || (diastolic &gt;= 90)) {</p><p class="source-code">            System.out.println("high blood pressure.");</p><p class="source-code">        } else if ((systolic &gt;= 120) || (diastolic &gt;= 80)) {</p><p class="source-code">            System.out.println("pre-high blood pressure.");</p><p class="source-code">        } else {</p><p class="source-code">            System.out.println("ideal blood pressure.");</p><p class="source-code">        }</p><p class="source-code">    }</p><p class="source-code">}</p></li>
			</ol>
			<h1 id="_idParaDest-355"><a id="_idTextAnchor368"/>3. Object-Oriented Programming</h1>
			<h2 id="_idParaDest-356"><a id="_idTextAnchor369"/>Activity 1: Adding the Frequency-of-Symbol Calculation to WordTool</h2>
			<p><strong class="bold">Solution</strong></p>
			<p>Add a method to the previously created <strong class="source-inline">WordTool</strong> class to calculate the frequency of a certain symbol. To do so, perform the following steps:</p>
			<ol>
				<li value="1">Add a method to count the number of words in a string.<p class="source-code">public int wordCount ( String s ) {</p><p class="source-code">    int count = 0;  // variable to count words</p><p class="source-code">    // if the entry is empty or is null, count is zero</p><p class="source-code">    // therefore we evaluate it only otherwise</p><p class="source-code">    if ( !(s == null || s.isEmpty()) ) {</p><p class="source-code">        // use the split method from the String class to</p><p class="source-code">        // separate the words having the whitespace as separator</p><p class="source-code">        String[] w = s.split("\\s+");</p><p class="source-code">        count = w.length;</p><p class="source-code">    }</p><p class="source-code">    return count;</p><p class="source-code">}</p></li>
				<li>Add a method to count the number of letters in a string and add the possibility of separating the case of having whitespaces or not.<p class="source-code">public int symbolCount ( String s, boolean withSpaces ) {</p><p class="source-code">    int count = 0;  // variable to count symbols</p><p class="source-code">    // if the entry is empty or is null, count is zero</p><p class="source-code">    // therefore we evaluate it only otherwise</p><p class="source-code">    if ( !(s == null || s.isEmpty()) ) {</p><p class="source-code">        if (withSpaces) {</p><p class="source-code">            // with whitespaces return the full length</p><p class="source-code">            count = s.length();</p><p class="source-code">        } else {</p><p class="source-code">            // without whitespaces, eliminate whitespaces</p><p class="source-code">            // and get the length on the fly</p><p class="source-code">            count = s.replace(" ", "").length();</p><p class="source-code">        }</p><p class="source-code">    }</p><p class="source-code">    return count;</p><p class="source-code">}</p></li>
				<li>Add a method to calculate the frequency of a certain symbol.<p class="source-code">public int getFrequency ( String s, char c ) {</p><p class="source-code">    int count = 0;</p><p class="source-code">    // if the entry is empty or is null, count is zero</p><p class="source-code">    // therefore we evaluate it only otherwise</p><p class="source-code">    if ( !(s == null || s.isEmpty()) ) {</p><p class="source-code">        count = s.length() - s.replace(Character.toString(c), "").length();</p><p class="source-code">    }</p><p class="source-code">    return count;</p><p class="source-code">}</p></li>
				<li>In the main class, create an object of the <strong class="source-inline">WordTool</strong> class and add a string variable containing a line of text of your choice.<p class="source-code">WordTool wt = new WordTool();</p><p class="source-code">String text = "The river carried the memories from her childhood.";</p></li>
				<li>Add a variable to contain the symbol to look for in the text, and choose a symbol, in this case '<strong class="source-inline">e</strong>'. As it is a character, use single quotes to delimit it.<p class="source-code">char search = 'e';</p></li>
				<li>Add code inside the main method to print out the calculations made by <strong class="source-inline">WordTool</strong>.<p class="source-code">System.out.println( "Analyzing the text: \n" + text );</p><p class="source-code">System.out.println( "Total words: " + wt.wordCount(text) );</p><p class="source-code">System.out.println( "Total symbols (w. spaces): " + wt.symbolCount(text, true) );</p><p class="source-code">System.out.println( "Total symbols (wo. spaces): " + wt.symbolCount(text, false) );</p><p class="source-code">System.out.println( "Total amount of " + search + ": " + wt.getFrequency(text, search) );</p></li>
			</ol>
			<h2 id="_idParaDest-357"><a id="_idTextAnchor370"/>Activity 2: Adding Documentation to WordTool</h2>
			<p><strong class="bold">Solution</strong></p>
			<p>Make sure you document each one of the examples and add enough metadata for people to know how to handle the different methods.</p>
			<ol>
				<li value="1">Include an introduction comment to the class, you should at least include a short text, the <strong class="source-inline">@author</strong>, <strong class="source-inline">@version</strong>, and <strong class="source-inline">@since</strong> parameters.<p class="source-code">/**</p><p class="source-code">  * &lt;H1&gt;WordTool&lt;/H1&gt;</p><p class="source-code">  * A class to perform calculations about text.</p><p class="source-code">  *</p><p class="source-code">  * @author Joe Smith</p><p class="source-code">  * @version 0.1</p><p class="source-code">  * @since 20190305</p><p class="source-code">  */</p></li>
				<li>Add an explanation to the <strong class="source-inline">wordCount</strong> method, remember including the parameters and the expected outcome to the method as <strong class="source-inline">@param</strong> and <strong class="source-inline">@return</strong>.<p class="source-code">/**</p><p class="source-code">  * &lt;h2&gt;wordCount&lt;/h2&gt;</p><p class="source-code">  * returns the amount of words in a text, takes a string as parameter</p><p class="source-code">  *</p><p class="source-code">  * @param s</p><p class="source-code">  * @return int</p><p class="source-code">  */</p><p class="source-code">public int wordCount ( String s ) { [...]</p></li>
				<li>Do the same for <strong class="source-inline">symbolCount</strong>.<p class="source-code">/**</p><p class="source-code">  * &lt;h2&gt;symbolCount&lt;/h2&gt;</p><p class="source-code">  * returns the amount of symbols in a string with or without counting spaces</p><p class="source-code">  *</p><p class="source-code">  * @param s</p><p class="source-code">  * @param withSpaces</p><p class="source-code">  * @return int</p><p class="source-code">  */</p><p class="source-code">public int symbolCount ( String s, boolean withSpaces ) { [...]</p></li>
				<li>Do not forget the last method in the class, <strong class="source-inline">getFrequency</strong>.<p class="source-code">/**</p><p class="source-code">  * &lt;h2&gt;getFrequency&lt;/h2&gt;</p><p class="source-code">  * returns the amount of occurrences of a symbol in a string</p><p class="source-code">  *</p><p class="source-code">  * @param s</p><p class="source-code">  * @param c</p><p class="source-code">  * @return int</p><p class="source-code">  */</p><p class="source-code">public int getFrequency ( String s, char c ) { [...]</p></li>
				<li>You are now ready to export the documentation file from this example.<p>The documentation site resulting from this activity should look like the one displayed in the following screenshot:</p></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer130">
					<img alt="Figure 3.12: Documentation Site&#13;&#10;" src="image/C13927_03_12.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.12: Documentation Site</p>
			<h1 id="_idParaDest-358"><a id="_idTextAnchor371"/>4. Collections, List, and Java's Built-In APIs</h1>
			<h2 id="_idParaDest-359"><a id="_idTextAnchor372"/>Activity 1: Searching for Multiple Occurrences in an Array</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Create the <strong class="source-inline">text</strong> array.<p class="source-code">String[] text = {"So", "many", "books", "so", "little", "time"};</p></li>
				<li>Create the variable that contains the word to be searched for: so<p class="source-code">String searchQuery = "so";</p></li>
				<li>Initialize the variable occurrence to <strong class="source-inline">-1</strong>.<p class="source-code">int occurrence = -1;</p></li>
				<li>Create a <strong class="source-inline">for</strong> loop to iterate through the array to check for the occurrence.<p class="source-code">for(int i = 0; i &lt; text.length; i++) {</p><p class="source-code">    occurrence = text[i].compareToIgnoreCase(searchQuery);</p><p class="source-code">    if (occurrence == 0) {</p><p class="source-code">        System.out.println("Found query at: " + i);</p><p class="source-code">    }</p><p class="source-code">}</p><p class="callout-heading">Note</p><p class="callout">The complete code for this activity can be found here: <a href="https://packt.live/35RQ9Ud">https://packt.live/35RQ9Ud</a></p></li>
			</ol>
			<h2 id="_idParaDest-360"><a id="_idTextAnchor373"/>Activity 2: Iterating through Large Lists</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">To start, you should create a randomly sized list containing random numbers. Create the list that you will use to contain the numbers later. You will store numbers of the type <strong class="source-inline">Double</strong>.<p class="source-code">List &lt;Double&gt; numbers = new ArrayList &lt;Double&gt; ();</p></li>
				<li>Define next the size of the list using a variable that we name <strong class="source-inline">numNodes</strong>. Make the variable of type <strong class="source-inline">long</strong>. Since the random method does NOT generate that type, you need to cast the outcome.<p class="source-code">long numNodes = (long) Math.round(Math.random() * 10000);</p></li>
				<li>Use a <strong class="source-inline">for</strong> loop to iterate through the list and create each one of the elements in it.<p class="source-code">for (int i = 0; i &lt; numNodes; i++) {</p><p class="source-code">    numbers.add(Math.random() * 100);</p><p class="source-code">}</p></li>
				<li>To compute the average, you could create an iterator that will go through the list of values and add the weighted value corresponding to each element.<p class="source-code">Iterator iterator = numbers.iterator();</p></li>
				<li>The value coming from the <strong class="source-inline">iterator.next()</strong> method must be cast into a <strong class="source-inline">Double</strong> before it can be weighed against the total number of elements.<p class="source-code">Double average = 0.0;</p><p class="source-code">while(iterator.hasNext()) {</p><p class="source-code">    average += (Double) iterator.next() / numNodes;</p><p class="source-code">}</p></li>
				<li>Do not forget to print out the results.<p class="source-code">System.out.println("Average: " + average);</p><p class="callout-heading">Note</p><p class="callout">The complete code for this activity can be found here: <a href="https://packt.live/35Yvo9m">https://packt.live/35Yvo9m</a></p></li>
			</ol>
			<h1 id="_idParaDest-361"><a id="_idTextAnchor374"/>5. Exceptions</h1>
			<h2 id="_idParaDest-362"><a id="_idTextAnchor375"/>Activity 1: Designing an Exception Class Logging Data</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Import the relevant classes needed for this program to work: <strong class="source-inline">NoSuchFileException</strong> and <strong class="source-inline">logging</strong>.<p class="source-code">import java.nio.file.NoSuchFileException;</p><p class="source-code">import java.util.logging.*;</p></li>
				<li>Make your own methods for issuing exceptions, start by creating one for the <strong class="source-inline">NullPointerException</strong> case.<p class="source-code">public static void issuePointerException() throws NullPointerException {</p><p class="source-code">    throw new NullPointerException("Exception: file not found");</p><p class="source-code">}</p></li>
				<li>You will also need a method for the case the file is not found: <strong class="source-inline">NoSuchFileException</strong>.<p class="source-code">public static void issueFileException() throws NoSuchFileException {</p><p class="source-code">    throw new NoSuchFileException("Exception: file not found");</p><p class="source-code">}</p></li>
				<li>Back to the <strong class="source-inline">Main</strong> method, create the <strong class="source-inline">logger</strong> object that will be reporting the exceptions and their severity level.<p class="source-code">Logger logger = Logger.getAnonymousLogger();</p></li>
				<li>Capture the argument passed to the script via the CLI and store it in a variable.<p class="source-code">int exceptionNum = Integer.valueOf(args[0]);</p></li>
				<li>Discriminate among the possible exceptions to log using a switch-case statement. Remember catching the exceptions with try-catch.</li>
			</ol>
			<p class="source-code-heading">Activity01.java</p>
			<p class="source-code">1  switch (exceptionNum) {</p>
			<p class="source-code">2      case 1:</p>
			<p class="source-code">3          try {</p>
			<p class="source-code">4            issuePointerException();</p>
			<p class="source-code">5          } catch (NullPointerException ne) {</p>
			<p class="source-code">6            logger.log(Level.SEVERE, "Exception happened", ne);</p>
			<p class="source-code">7          }</p>
			<p class="source-code">8          break;</p>
			<p class="source-code">9      case 2:</p>
			<p class="source-code">10         try {</p>
			<p class="source-code">11           issueFileException();</p>
			<p class="source-code">12         } catch (NoSuchFileException ne) {</p>
			<p class="source-code">13           logger.log(Level.WARNING, "Exception happened", ne);</p>
			<p class="source-code">14         }</p>
			<p class="source-code">15         break;</p>
			<p class="source-code-link"><a href="https://packt.live/33SEL8B">https://packt.live/33SEL8B</a></p>
			<h1 id="_idParaDest-363"><a id="_idTextAnchor376"/>6. Libraries, Packages, and Modules</h1>
			<h2 id="_idParaDest-364"><a id="_idTextAnchor377"/>Activity 1: Tracking Summer High Temperatures</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Create an IntelliJ Gradle project. Modify <strong class="source-inline">settings.gradle</strong> as follows:<p class="source-code">rootProject.name = 'temps'</p></li>
				<li>Modify <strong class="source-inline">build.gradle</strong> as follows: <p class="source-code-heading">build.gradle</p><p class="source-code">1  buildscript {</p><p class="source-code">2      repositories {</p><p class="source-code">3          jcenter()</p><p class="source-code">4      }</p><p class="source-code">5      dependencies {</p><p class="source-code">6          classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.1'</p><p class="source-code">7      }</p><p class="source-code">8  }</p><p class="source-code-link"><a href="https://packt.live/2pJJJFY">https://packt.live/2pJJJFY</a></p></li>
				<li>Create a <strong class="source-inline">class</strong> named <strong class="source-inline">City</strong>. Add the following fields and constructor:<p class="source-code">package com.packtpub.temps;</p><p class="source-code">public class City {</p><p class="source-code">    private String name;</p><p class="source-code">    private String country;</p><p class="source-code">    double summertimeHigh;      // In degrees C</p><p class="source-code">    public City(String name, String country, double summertimeHigh) {</p><p class="source-code">        this.name = name;</p><p class="source-code">        this.country = country;</p><p class="source-code">        this.summertimeHigh = summertimeHigh;</p><p class="source-code">    }</p><p class="source-code">}</p></li>
				<li>Right-click inside the class. Choose <strong class="source-inline">Generate</strong>, and then <strong class="source-inline">Getter and Setter</strong>. Select all the fields and click <strong class="source-inline">OK</strong>. This will generate the getter and setter methods:<p class="source-code">public String getName() {</p><p class="source-code">    return name;</p><p class="source-code">}</p><p class="source-code">public void setName(String name) {</p><p class="source-code">    this.name = name;</p><p class="source-code">}</p><p class="source-code">public String getCountry() {</p><p class="source-code">    return country;</p><p class="source-code">}</p><p class="source-code">public void setCountry(String country) {</p><p class="source-code">    this.country = country;</p><p class="source-code">}</p><p class="source-code">public double getSummertimeHigh() {</p><p class="source-code">    return summertimeHigh;</p><p class="source-code">}</p><p class="source-code">public void setSummertimeHigh(double summertimeHigh) {</p><p class="source-code">    this.summertimeHigh = summertimeHigh;</p><p class="source-code">}</p></li>
				<li>Add a method to convert degrees to Fahrenheit. This method uses the <strong class="source-inline">TempConverter</strong> class:<p class="source-code">public String format(boolean fahrenheit) {</p><p class="source-code">    String degrees = summertimeHigh + " C";</p><p class="source-code">    if (fahrenheit) {</p><p class="source-code">        degrees = TempConverter.convertToF(summertimeHigh) + " F";</p><p class="source-code">    }</p><p class="source-code">    return name + ", " + country + " " + degrees;</p><p class="source-code">}</p></li>
				<li>Create a <strong class="source-inline">class</strong> named <strong class="source-inline">SummerHigh</strong> to hold the city information for summer high temperatures. Enter the following properties and constructor:<p class="source-code">package com.packtpub.temps;</p><p class="source-code">public class SummerHigh {</p><p class="source-code">    private City base;</p><p class="source-code">    private City moderateCuts;</p><p class="source-code">    private City noCuts;</p><p class="source-code">    public SummerHigh(City base, City moderateCuts, City noCuts) {</p><p class="source-code">        this.base = base;</p><p class="source-code">        this.moderateCuts = moderateCuts;</p><p class="source-code">        this.noCuts = noCuts;</p><p class="source-code">    }</p><p class="source-code">}</p></li>
				<li>Right-click inside the class. Choose <strong class="source-inline">Generate</strong>, and then <strong class="source-inline">Getter and Setter</strong>. Select all the fields and click <strong class="source-inline">OK</strong>. This will generate the getter and setter methods:<p class="source-code">public City getBase() {</p><p class="source-code">    return base;</p><p class="source-code">}</p><p class="source-code">public void setBase(City base) {</p><p class="source-code">    this.base = base;</p><p class="source-code">}</p><p class="source-code">public City getModerateCuts() {</p><p class="source-code">    return moderateCuts;</p><p class="source-code">}</p><p class="source-code">public void setModerateCuts(City moderateCuts) {</p><p class="source-code">    this.moderateCuts = moderateCuts;</p><p class="source-code">}</p><p class="source-code">public City getNoCuts() {</p><p class="source-code">    return noCuts;</p><p class="source-code">}</p><p class="source-code">public void setNoCuts(City noCuts) {</p><p class="source-code">    this.noCuts = noCuts;</p><p class="source-code">}</p></li>
				<li>Enter a format method in order to render the output readable:<p class="source-code">public String format(boolean fahrenheit) {</p><p class="source-code">    StringBuilder builder = new StringBuilder();</p><p class="source-code">    builder.append("In 2100, ");</p><p class="source-code">    builder.append(base.format(fahrenheit));</p><p class="source-code">    builder.append(" will be like\n   ");</p><p class="source-code">    builder.append(noCuts.format(fahrenheit));</p><p class="source-code">    builder.append(" with no emissions cuts,");</p><p class="source-code">    builder.append("\n   ");</p><p class="source-code">    builder.append(moderateCuts.format(fahrenheit));</p><p class="source-code">    builder.append(" with moderate emissions cuts");</p><p class="source-code">    return builder.toString();</p><p class="source-code">}</p><p>This code makes use of the <strong class="source-inline">City</strong> <strong class="source-inline">class</strong> <strong class="source-inline">format()</strong> method. </p></li>
				<li>Create a class called <strong class="source-inline">SummerHighs</strong>. This class holds a table of <strong class="source-inline">SummerHigh</strong> objects. Enter the following field and constructor to initialize the table:<p class="source-code">package com.packtpub.temps;</p><p class="source-code">import com.google.common.collect.HashBasedTable;</p><p class="source-code">import com.google.common.collect.Table;</p><p class="source-code">import java.util.Map;</p><p class="source-code">public class SummerHighs {</p><p class="source-code">    private Table&lt;String, String, SummerHigh&gt; data;</p><p class="source-code">    public SummerHighs() {</p><p class="source-code">        data = HashBasedTable.create();</p><p class="source-code">    }</p><p class="source-code">}</p></li>
				<li>Enter a method to get summer high temperature information by <strong class="source-inline">city</strong>:<p class="source-code">public SummerHigh getByCity(String city) {</p><p class="source-code">    Map&lt;String, SummerHigh&gt; row = data.row(city.toLowerCase());</p><p class="source-code">    SummerHigh summerHigh = null;</p><p class="source-code">    for ( String key : row.keySet()) {</p><p class="source-code">        summerHigh = row.get(key);</p><p class="source-code">    }</p><p class="source-code">    return summerHigh;</p><p class="source-code">}</p><p>This method uses the <strong class="source-inline">Guava</strong> library Table class.</p></li>
				<li>Enter a method to get summer high temperature information by <strong class="source-inline">country</strong>:<p class="source-code">public SummerHigh getByCountry(String country) {</p><p class="source-code">    Map&lt;String, SummerHigh&gt; column = data.column(country.toLowerCase());</p><p class="source-code">    SummerHigh summerHigh = null;</p><p class="source-code">    for ( String key : column.keySet()) {</p><p class="source-code">        summerHigh = column.get(key);</p><p class="source-code">    }</p><p class="source-code">    return summerHigh;</p><p class="source-code">}</p><p>This method also uses the <strong class="source-inline">Guava</strong> library's Table class.</p></li>
				<li>Now create a number of convenience methods to make adding cities easier:<p class="source-code">// Convenience methods to help initialize data.</p><p class="source-code">public void addSummerHigh(SummerHigh summerHigh) {</p><p class="source-code">    City baseCity = summerHigh.getBase();</p><p class="source-code">    data.put(baseCity.getName().toLowerCase(),</p><p class="source-code">            baseCity.getCountry().toLowerCase(), summerHigh);</p><p class="source-code">}</p><p class="source-code">public SummerHigh createSummerHigh(City base, City moderateCuts,</p><p class="source-code">                                   City noCuts) {</p><p class="source-code">    return new SummerHigh(base, moderateCuts, noCuts);</p><p class="source-code">}</p><p class="source-code">public City createCity(String name, String country, double summertimeHigh) {</p><p class="source-code">    return new City(name, country, summertimeHigh);</p><p class="source-code">}</p></li>
				<li>Then, create a method to initialize the summer high temperature data described previously:<p class="source-code-heading">SummerHighs.java</p><p class="source-code">67     addSummerHigh(</p><p class="source-code">68         createSummerHigh(</p><p class="source-code">69             createCity("Tokyo", "Japan", 26.2),</p><p class="source-code">70             createCity("Beijing", "China", 29.0),</p><p class="source-code">71             createCity("Wuhan", "China", 31.2)</p><p class="source-code">72         )</p><p class="source-code">73     );</p><p class="source-code-link"><a href="https://packt.live/2qELV2d">https://packt.live/2qELV2d</a></p></li>
				<li>Create a class named <strong class="source-inline">Main</strong> to run our program. Then, create a <strong class="source-inline">main()</strong> method as follows:<p class="source-code-heading">Main.java</p><p class="source-code">6          SummerHighs summerHighs = new SummerHighs();</p><p class="source-code">7          summerHighs.initialize();</p><p class="source-code">8  </p><p class="source-code">9          boolean fahrenheit = false;</p><p class="source-code">10         // Handle inputs</p><p class="source-code">11         if (args.length &lt; 2) {</p><p class="source-code">12             System.err.println("Error: usage is:");</p><p class="source-code">13             System.err.println(" -city London");</p><p class="source-code">14             System.err.println(" -country United Kingdom");</p><p class="source-code">15         }</p><p class="source-code">16</p><p class="source-code">17         String searchBy = args[0];</p><p class="source-code">18         String name = args[1];</p><p class="source-code">19         SummerHigh high = null;</p><p class="source-code">20         if ("-city".equals(searchBy)) {</p><p class="source-code">21             high = summerHighs.getByCity(name);</p><p class="source-code">22         } else if ("-country".equals(searchBy)) {</p><p class="source-code">23             high = summerHighs.getByCountry(name);</p><p class="source-code">24         }</p><p class="source-code-link"><a href="https://packt.live/2BBF2AO">https://packt.live/2BBF2AO</a></p></li>
				<li>Finally, create a class named <strong class="source-inline">TempConverter</strong> to convert from degrees Celsius to degrees Fahrenheit:<p class="source-code">package com.packtpub.temps;</p><p class="source-code">public class TempConverter {</p><p class="source-code">    public static double convertToF(double degreesC) {</p><p class="source-code">        double degreesF = (degreesC * 9/5) + 32;</p><p class="source-code">        // Round to make nicer output.</p><p class="source-code">        return Math.round(degreesF * 10.0) / 10.0;</p><p class="source-code">    }</p><p class="source-code">}</p></li>
			</ol>
			<h1 id="_idParaDest-365"><a id="_idTextAnchor378"/>7. Databases and JDBC</h1>
			<h2 id="_idParaDest-366"><a id="_idTextAnchor379"/>Activity 1: Track Your Progress</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">The <strong class="source-inline">student</strong> table holds information on the <strong class="source-inline">student</strong>:<p class="source-code">CREATE TABLE IF NOT EXISTS student</p><p class="source-code">(</p><p class="source-code">STUDENT_ID long,</p><p class="source-code">FIRST_NAME varchar(255),</p><p class="source-code">LAST_NAME varchar(255),</p><p class="source-code">PRIMARY KEY (STUDENT_ID)</p><p class="source-code">);</p></li>
				<li>The <strong class="source-inline">chapter</strong> table has a <strong class="source-inline">chapter number</strong> and a <strong class="source-inline">name</strong>:<p class="source-code">CREATE TABLE IF NOT EXISTS chapter</p><p class="source-code">(</p><p class="source-code">CHAPTER_ID long,</p><p class="source-code">CHAPTER_NAME varchar(255),</p><p class="source-code">PRIMARY KEY (CHAPTER_ID)</p><p class="source-code">);</p><p>Note that the <strong class="source-inline">chapter ID</strong> is the <strong class="source-inline">chapter number</strong>.</p></li>
				<li>The <strong class="source-inline">student_progress</strong> table maps a <strong class="source-inline">student ID</strong> to a <strong class="source-inline">chapter ID</strong>, indicating that a particular student completed a particular chapter:<p class="source-code">CREATE TABLE IF NOT EXISTS student_progress</p><p class="source-code">(</p><p class="source-code">STUDENT_ID long,</p><p class="source-code">CHAPTER_ID long,</p><p class="source-code">COMPLETED date,</p><p class="source-code">PRIMARY KEY (STUDENT_ID, CHAPTER_ID)</p><p class="source-code">);</p><p>Note that by using both <strong class="source-inline">student ID</strong> and <strong class="source-inline">chapter ID</strong> as the composite <strong class="source-inline">primary key</strong>, each student can complete each chapter just once. There are no do-overs.</p></li>
				<li>Here is a hypothetical student:<p class="source-code">INSERT INTO student</p><p class="source-code">(STUDENT_ID, FIRST_NAME, LAST_NAME)</p><p class="source-code">VALUES (1, 'BOB', 'MARLEY');</p><p>Note that in order to make it easier to match the names, we insert all of them in uppercase.</p></li>
				<li>The following <strong class="source-inline">INSERT</strong> statements provide data for the first seven chapters:<p class="source-code">INSERT INTO chapter</p><p class="source-code">(CHAPTER_ID, CHAPTER_NAME)</p><p class="source-code">VALUES (1, 'Getting Started');</p><p class="source-code">INSERT INTO chapter</p><p class="source-code">(CHAPTER_ID, CHAPTER_NAME)</p><p class="source-code">VALUES (2, 'Learning the Basics');</p><p class="source-code">INSERT INTO chapter</p><p class="source-code">(CHAPTER_ID, CHAPTER_NAME)</p><p class="source-code">VALUES (3, 'Object-Oriented Programming: Classes and Methods');</p><p class="source-code">INSERT INTO chapter</p><p class="source-code">(CHAPTER_ID, CHAPTER_NAME)</p><p class="source-code">VALUES (4, 'Collections, Lists, and Java's Built-In APIs');</p><p class="source-code">INSERT INTO chapter</p><p class="source-code">(CHAPTER_ID, CHAPTER_NAME)</p><p class="source-code">VALUES (5, 'Exceptions');</p><p class="source-code">INSERT INTO chapter</p><p class="source-code">(CHAPTER_ID, CHAPTER_NAME)</p><p class="source-code">VALUES (6, 'Modules, Packages, and Libraries');</p><p class="source-code">INSERT INTO chapter</p><p class="source-code">(CHAPTER_ID, CHAPTER_NAME)</p><p class="source-code">VALUES (7, 'Databases and JDBC');</p><p>Note the two single quotes used to insert text with a quote.</p></li>
				<li>To add a record of <strong class="source-inline">student_progress</strong>, generate an <strong class="source-inline">INSERT</strong> statement like the following:<p class="source-code">INSERT INTO student_progress</p><p class="source-code">(STUDENT_ID, CHAPTER_ID, COMPLETED)</p><p class="source-code">VALUES (1, 2, '2019-08-28');</p><p>This should be done within a Java program using a <strong class="source-inline">PreparedStatement</strong>.</p></li>
				<li>To query for a student's progress, use a query such as the following:<p class="source-code">SELECT first_name, last_name, chapter.chapter_id, chapter_name, completed</p><p class="source-code">FROM student, chapter, student_progress</p><p class="source-code">WHERE first_name = 'BOB'</p><p class="source-code">AND last_name = 'MARLEY'</p><p class="source-code">AND student.student_id = student_progress.student_id</p><p class="source-code">AND chapter.chapter_id = student_progress.chapter_id</p><p class="source-code">ORDER BY chapter_id;</p><p>Note that the <strong class="source-inline">first name</strong> and <strong class="source-inline">last name</strong> will be input by the user. This should be placed in <strong class="source-inline">PreparedStatement</strong>.</p><p>The <strong class="source-inline">ORDER BY</strong> clause ensures that the output will appear in chapter order.</p></li>
				<li>The <strong class="source-inline">ShowProgress</strong> program outputs the chapters a given student has completed:<p class="source-code-heading">ShowProgress.java</p><p class="source-code">1  package com.packtpub.db;</p><p class="source-code">2  import java.sql.*;</p><p class="source-code">3  public class ShowProgress {</p><p class="source-code">4      public static void main(String[] args) {</p><p class="source-code">5          if (args.length &lt; 2) {</p><p class="source-code">6             System.err.println("Error: please enter the first and last               name.");</p><p class="source-code">7              System.exit(-1);</p><p class="source-code">8          }</p><p class="source-code">9          // Get student first and last name as inputs.</p><p class="source-code">10         String firstName = args[0].toUpperCase();</p><p class="source-code">11         String lastName = args[1].toUpperCase();</p><p class="source-code-link"><a href="https://packt.live/31EPNg4">https://packt.live/31EPNg4</a></p><p>Note how the input first and last names are forced to uppercase prior to searching the database. Also, note that we do not allow two students to have the same name. This is not realistic.</p><p>After querying, the program outputs the student's name and then one line for each chapter completed. </p></li>
				<li>To run this program, build the <strong class="source-inline">shadowJar</strong> task in Gradle, and then run a command such as the following in the IntelliJ <strong class="bold">Terminal</strong> window:<p class="source-code">java -cp customers-1.0-all.jar com.packtpub.db.ShowProgress bob marley</p><p>The jar file is located in the <strong class="source-inline">libs</strong> subdirectory of the build directory.</p><p>The output will appear as follows:</p><p class="source-code">BOB MARLEY</p><p class="source-code">2019-03-01  2 Learning the Basics</p><p class="source-code">2019-03-01  3 Object-Oriented Programming: Classes and Methods</p><p class="source-code">2019-03-01  7 Databases and JDBC</p></li>
				<li>The <strong class="source-inline">RecordProgress</strong> program adds a <strong class="source-inline">student_progress</strong> record:<p class="source-code-heading">RecordProgress.java</p><p class="source-code">1  package com.packtpub.db;</p><p class="source-code">2  </p><p class="source-code">3  import java.sql.*;</p><p class="source-code">4  </p><p class="source-code">5  public class RecordProgress {</p><p class="source-code">6      public static void main(String[] args) {</p><p class="source-code">7  </p><p class="source-code">8          // Get input</p><p class="source-code">9          if (args.length &lt; 3) {</p><p class="source-code">10             System.err.println("Error: please enter first last chapter.");</p><p class="source-code">11             System.exit(-1);</p><p class="source-code">12         }</p><p class="source-code">13 </p><p class="source-code">14         // Get student first and last name and chapter number.</p><p class="source-code">15         String firstName = args[0].toUpperCase();</p><p class="source-code-link"><a href="https://packt.live/362QaF1">https://packt.live/362QaF1</a></p></li>
				<li>To run this program, use a command such as the following:<p class="source-code">java -cp customers-1.0-all.jar com.packtpub.db.RecordProgress bob marley 4</p><p>You will see output like the following:</p><p class="source-code">Number rows added: 1</p><p>As before, the input names are forced to uppercase prior to searching the database.</p></li>
			</ol>
			<h1 id="_idParaDest-367"><a id="_idTextAnchor380"/>8. Sockets, Files, and Streams</h1>
			<h2 id="_idParaDest-368"><a id="_idTextAnchor381"/>Activity 1: Writing the Directory Structure to a File</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Import the relevant classes to get this example to work. Basically you will be working with collections, files, and the associated exceptions.<p class="source-code">import java.io.IOException;</p><p class="source-code">import java.nio.file.*;</p><p class="source-code">import java.nio.file.attribute.BasicFileAttributes;</p><p class="source-code">import java.util.Collections;</p></li>
				<li>Determine the folder you will start looking for directories from. Let's assume you start from <strong class="source-inline">user.home</strong>. Declare a Path object linking to that folder.<p class="source-code">Path path = Paths.get(System.getProperty("user.home"));</p></li>
				<li>Next you will call <strong class="source-inline">File.walkFileTree</strong>, which will allow you iterate through a folder structure up to a certain depth. In this case, you can set whatever depth you want, for example <strong class="source-inline">10</strong>. This means the program will dig up to <strong class="source-inline">10</strong> levels of directories looking for files.<p class="source-code">Files.walkFileTree(path, Collections.emptySet(), 10, new SimpleFileVisitor&lt;Path&gt;() { [...]</p></li>
				<li>The approach in this case consists in overriding a couple of methods from <strong class="source-inline">SimpleFileVisitor</strong> to extract the path information and return it as a string making the file structure easy to read. The first method to override is <strong class="source-inline">preVisitDirectory</strong>, that is triggered in the class when an item in a directory happens to be a nested directory.<p class="source-code">@Override</p><p class="source-code">public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) {</p></li>
				<li>Inside <strong class="source-inline">preVisitDirectory</strong>, there is a couple of operations you will need to perform. First you need to calculate how deep you are in the directory structure, as you will need that to print blank spaces as a way to format the program's output. <strong class="source-inline">preVisitDirectory</strong> will get the current path as a parameter named <strong class="source-inline">dir</strong>. But it will also use the global path parameter (remember we start from <strong class="source-inline">user.home</strong>). Declare a variable called <strong class="source-inline">depthInit</strong> to store the how far you are in the directory structure when at path.<p class="source-code">String [] pathArray = path.toString().split("/");</p><p class="source-code">int depthInit = pathArray.length;</p></li>
				<li>Repeat the operation but this time with the current directory, store the outcome in a variable called <strong class="source-inline">depthCurrent</strong>.<p class="source-code">String [] fileArray = dir.toString().split("/");</p><p class="source-code">int depthCurrent = fileArray.length;</p></li>
				<li>Use a <strong class="source-inline">for</strong> loop to print a bunch of blank spaces in front of the current folder name.<p class="source-code">for (int i = depthInit; i &lt; depthCurrent; i++) {</p><p class="source-code">    System.out.print("    ");</p><p class="source-code">}</p></li>
				<li>Finally, print out the name of the folder/file, and exit the method.<p class="source-code">System.out.println(fileArray[fileArray.length - 1]);</p><p class="source-code">return FileVisitResult.CONTINUE;</p></li>
				<li>The second method to override within <strong class="source-inline">SimpleFileVisitor</strong> is <strong class="source-inline">visitFileFailed</strong>. This method is handling the exception that would be triggered when reading a path to which the user has no permission to enter, or similar. The full method looks like follows.<p class="source-code">@Override</p><p class="source-code">public FileVisitResult visitFileFailed(Path file, IOException exc) throws IOException {</p><p class="source-code">    System.out.println("visitFileFailed: " + file);</p><p class="source-code">    return FileVisitResult.CONTINUE;</p><p class="source-code">}</p></li>
				<li>Try now how the program works. You will get to see the listing of the directories at your home folder in a similar fashion as the following one where each block of four blank spaces represents deepening one more level in the folder structure.<p class="source-code">topeka</p><p class="source-code">    snap</p><p class="source-code">        gnome-calculator</p><p class="source-code">        gnome-system-monitor</p><p class="source-code">        libreoffice</p><p class="source-code">    Downloads</p><p class="source-code">[...]</p></li>
				<li>It is now a trivial exercise making the outcome be stored in a file instead of being simply printed out to the CLI. First you will need to declare a file name, in this case let's make one that will end up at the same folder where the Main class is to be found.<p class="source-code">String fileName = "temp.txt";</p><p class="source-code">Path pathFile = Paths.get(fileName);</p></li>
				<li>Next you should check whether the logfile already exists in the folder, that will help deciding whether you create it or if you will simply append data to it instead.<p class="source-code">if(!Files.exists(pathFile))  {</p><p class="source-code">    try {</p><p class="source-code">        // Create the file</p><p class="source-code">        Files.createFile(pathFile);</p><p class="source-code">        System.out.println("New file created at: " + pathFile);</p><p class="source-code">    } catch (IOException ioe) {</p><p class="source-code">        System.out.println("EXCEPTION when creating file: " + ioe.getMessage());</p><p class="source-code">    }</p><p class="source-code">}</p></li>
				<li>You will have to modify the overridden <strong class="source-inline">preVisitDirectory</strong> to include the possibility of writing to the file you just created.<p class="source-code-heading">Activity01.java</p><p class="source-code">27 public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes      attrs) {</p><p class="source-code">28  </p><p class="source-code">29     String toFile = "";</p><p class="source-code">30  </p><p class="source-code">31     String [] pathArray = path.toString().split("/");</p><p class="source-code">32     int depthInit = pathArray.length;</p><p class="source-code">33     String [] fileArray = dir.toString().split("/");</p><p class="source-code">34     int depthCurrent = fileArray.length;</p><p class="source-code">35     for (int i = depthInit; i &lt; depthCurrent; i++) {</p><p class="source-code">36         toFile += "    ";</p><p class="source-code">37     }</p><p class="source-code">38     toFile += fileArray[fileArray.length - 1];</p><p class="source-code">39  </p><p class="source-code">40     if(Files.exists(pathFile))</p><p class="source-code-link"><a href="https://packt.live/35Ye4kR">https://packt.live/35Ye4kR</a></p></li>
				<li>Executing the code will now give as a result a file located in the same folder you are executing it from.<p class="source-code">user@computer:~/[...]/Activity0801/out/production/Activity0801$ ls</p><p class="source-code">'Main$1.class'   Main.class   temp.txt</p></li>
			</ol>
			<h2 id="_idParaDest-369"><a id="_idTextAnchor382"/>Activity 2: Improving the EchoServer and EchoClient Programs</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">The expected results will require you to modify both the server and the client in a very similar way. On the client-side, you will have to do something like the following:<p class="source-code-heading">Client.java</p><p class="source-code">1  import java.io.*;</p><p class="source-code">2  import java.net.*;</p><p class="source-code">3  </p><p class="source-code">4  public class Client {</p><p class="source-code">5      public static void main(String[] args) throws IOException {</p><p class="source-code">6          if (args.length != 2) {</p><p class="source-code">7              System.err.println(</p><p class="source-code">8                      "Usage: java EchoClient &lt;host name&gt; &lt;port number&gt;");</p><p class="source-code">9              System.exit(1);</p><p class="source-code">10         }</p><p class="source-code">11 </p><p class="source-code">12         String hostName = args[0];</p><p class="source-code">13         int portNumber = Integer.parseInt(args[1]);</p><p class="source-code">14 </p><p class="source-code-link"><a href="https://packt.live/2MEFg0w">https://packt.live/2MEFg0w</a></p></li>
				<li>On the server, the modifications should look like the following:</li>
			</ol>
			<p class="source-code-heading">Server.java</p>
			<p class="source-code">1  import java.net.*;</p>
			<p class="source-code">2  import java.io.*;</p>
			<p class="source-code">3  </p>
			<p class="source-code">4  public class Server {</p>
			<p class="source-code">5      public static void main(String[] args) throws IOException {</p>
			<p class="source-code">6  </p>
			<p class="source-code">7          if (args.length != 1) {</p>
			<p class="source-code">8              System.err.println("Usage: java EchoServer &lt;port number&gt;");</p>
			<p class="source-code">9              System.exit(1);</p>
			<p class="source-code">10         }</p>
			<p class="source-code">11 </p>
			<p class="source-code">12         int portNumber = Integer.parseInt(args[0]);</p>
			<p class="source-code">13 </p>
			<p class="source-code">14         try (</p>
			<p class="source-code">15                 ServerSocket serverSocket =</p>
			<p class="source-code-link"><a href="https://packt.live/2WbxAWv">https://packt.live/2WbxAWv</a></p>
			<p>The expected interaction between the server and the client should be as follows:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer131">
					<img alt="Figure 8:2: Interaction between server and client&#13;&#10;" src="image/C13927_08_02.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8:2: Interaction between server and client</p>
			<h1 id="_idParaDest-370"><a id="_idTextAnchor383"/>9. Working with HTTP</h1>
			<h2 id="_idParaDest-371"><a id="_idTextAnchor384"/>Activity 1: Using the jsoup Library to Download Files from the Web</h2>
			<p><strong class="bold">Solution</strong></p>
			<p>The program is relatively short. The main task is to figure out the CSS query for the <strong class="source-inline">select()</strong> method call:</p>
			<ol>
				<li value="1">Create a class named <strong class="source-inline">Activity1</strong>.</li>
				<li>In <strong class="source-inline">main()</strong>, start a <strong class="source-inline">try-catch</strong> block<p class="source-code">        try {</p><p class="source-code">            </p><p class="source-code">        } catch (IOException e) {</p><p class="source-code">            e.printStackTrace();</p><p class="source-code">        }</p></li>
				<li>Inside the <strong class="source-inline">try</strong> block, use the <strong class="source-inline">Jsoup</strong> library to download the contents of the remote Web page located at <a href="https://packt.live/2BqZbtq">https://packt.live/2BqZbtq</a>. This will result in the Web page contents stored in a <strong class="source-inline">Document</strong> object.<p class="source-code">        String url = "http://hc.apache.org/";</p><p class="source-code">            Document doc =</p><p class="source-code">                    Jsoup.connect(url).get();</p></li>
				<li>Next, query the document for all elements of type <strong class="source-inline">DIV</strong> with a CSS class of <strong class="source-inline">section</strong>.<p class="source-code">Elements sections = doc.select("div.section");</p></li>
				<li>You will need to iterate over each of these <strong class="source-inline">DIV</strong> elements.<p class="source-code">            for (Element div : sections) {</p><p class="source-code">                for (Element child : div.children()) {</p><p class="source-code">                }</p><p class="source-code">            }</p></li>
				<li>Inside the inner for loop, look for <strong class="source-inline">H3</strong> headline tags.<p class="source-code">                    String tag = child.tagName();</p><p class="source-code">                    if (tag.equalsIgnoreCase("h3")) {</p><p class="source-code">                    }</p></li>
				<li>Finally, inside the <strong class="source-inline">if</strong> statement that detects if the tag is an H3 element, find all anchor (A) tags used for HTML links and print out the link text for each.<p class="source-code">                        Elements links = child.getElementsByTag("a");</p><p class="source-code">                        for (Element link : links) {</p><p class="source-code">                            System.out.println(link.text());</p><p class="source-code">                        }</p><p class="callout-heading">Note</p><p class="callout">The complete code for this activity can be found here: <a href="https://packt.live/33SEhPP">https://packt.live/33SEhPP</a></p></li>
			</ol>
			<h1 id="_idParaDest-372"><a id="_idTextAnchor385"/>11. Processes</h1>
			<h2 id="_idParaDest-373"><a id="_idTextAnchor386"/>Activity 1: Making a Parent Process to Launch a Child Process</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">The child should have an algorithm that looks like the following:<p class="source-code-heading">Child.java</p><p class="source-code">9     public static void main(String[] args) throws java.io.IOException,       InterruptedException {</p><p class="source-code">10        int ch;</p><p class="source-code">11        System.out.print ("Let's echo: ");</p><p class="source-code">12        while ((ch = System.in.read ()) != '\n')</p><p class="source-code">13            System.out.print ((char) ch);</p><p class="source-code">14        BufferedWriter bw=new BufferedWriter(</p><p class="source-code">15                new FileWriter(new File("mycal2022.txt")));</p><p class="source-code">16            int cont = 0;</p><p class="source-code">17            while(cont &lt;= 50) {</p><p class="source-code">18                System.out.println(cont++);</p><p class="source-code">19                cont %= 50;</p><p class="source-code">20                bw.write(cont + "\n");</p><p class="source-code-link"><a href="https://packt.live/32I5Afu">https://packt.live/32I5Afu</a></p><p>Here, there is a call to <strong class="source-inline">System.in.available()</strong> to check whether there is any data in the output buffer from the child program.</p></li>
				<li>On the other hand, the parent program should consider including something along the lines of:</li>
			</ol>
			<p class="source-code-heading">Parent.java</p>
			<p class="source-code">18         try {</p>
			<p class="source-code">19             process.waitFor(5, TimeUnit.SECONDS);</p>
			<p class="source-code">20         } catch (InterruptedException ie) {</p>
			<p class="source-code">21             System.out.println("WARNING: interrupted exception fired");</p>
			<p class="source-code">22         }</p>
			<p class="source-code">23</p>
			<p class="source-code">24         System.out.println("trying to write");</p>
			<p class="source-code">25         OutputStream out = process.getOutputStream();</p>
			<p class="source-code">26         Writer writer = new OutputStreamWriter(out);</p>
			<p class="source-code">27         writer.write("This is how we roll!\n");</p>
			<p class="source-code">28         writer.flush();</p>
			<p class="source-code">29</p>
			<p class="source-code">30         File file = new File("data.log");</p>
			<p class="source-code">31         FileWriter fileWriter = new FileWriter(file);</p>
			<p class="source-code">32         BufferedWriter bufferedWriter = new BufferedWriter(fileWriter);</p>
			<p class="source-code">33</p>
			<p class="source-code">34         System.out.println("trying to read");</p>
			<p class="source-code">35         InputStream in = process.getInputStream();</p>
			<p class="source-code">36         Reader reader = new InputStreamReader(in);</p>
			<p class="source-code">37         BufferedReader bufferedReader = new BufferedReader(reader);</p>
			<p class="source-code">38         String line = bufferedReader.readLine();</p>
			<p class="source-code">39</p>
			<p class="source-code">40         // send to screen</p>
			<p class="source-code">41         System.out.println(line);</p>
			<p class="source-code-link"><a href="https://packt.live/2MEBlR9">https://packt.live/2MEBlR9</a></p>
			<h1 id="_idParaDest-374"><a id="_idTextAnchor387"/>12. Regular Expressions</h1>
			<h2 id="_idParaDest-375"><a id="_idTextAnchor388"/>Activity 1: Regular Expressions to Check If the Entrance is Entered in the Desired Format</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Visit <a href="https://packt.live/2MYzyFq">https://packt.live/2MYzyFq</a>.</li>
				<li>To the already exisiting regular expression from Exercise 1, add the rule to allow an optional alphabet after the number: <p class="source-code">[a-zA-Z]{2,}\s{1}\d+[a-zA-Z]{1}</p></li>
				<li>Check if the RE works for <em class="italic">Strandvagen 1a</em> and <em class="italic">Ringvagen 2b</em>.</li>
			</ol>
			<h1 id="_idParaDest-376"><a id="_idTextAnchor389"/>13. Functional Programming with Lambda Expressions</h1>
			<h2 id="_idParaDest-377"><a id="_idTextAnchor390"/>Activity 1: Modifying Immutable Lists</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Write an application which modifies the ShoppingCart class found in Exercise 2 to allow for removing items from the cart.<p class="source-code">        public ShoppingCart removeItem(ShoppingItem item) {</p><p class="source-code">           Map&lt;String, Integer&gt; newList = new HashMap&lt;&gt;(mShoppingList);</p><p class="source-code">            int value = 0;</p><p class="source-code">            if (newList.containsKey(item.name)) {</p><p class="source-code">                value = newList.get(item.name);</p><p class="source-code">            }</p><p class="source-code">            if (value &gt; 0) {</p><p class="source-code">                newList.put(item.name, --value);</p><p class="source-code">            }</p><p class="source-code">            return new ShoppingCart(newList);</p><p class="source-code">        }</p></li>
				<li>Add a new feature to the ShoppingCart class that allows users to add multiple items to the cart in a single invocation.<p class="source-code">public ShoppingCart addItems(ShoppingItem... items) {</p><p class="source-code">            Map&lt;String, Integer&gt; newList = new HashMap&lt;&gt;(mShoppingList);</p><p class="source-code">            ShoppingCart newCart = null;</p><p class="source-code">            for (ShoppingItem item : items) {</p><p class="source-code">                newCart = addItem(item);</p><p class="source-code">            }</p></li>
				<li>Prove that the new features work as intended by modifying the code in the main application file to show how the features are used. <p class="source-code">public class Activity1 {</p><p class="source-code">    public static void main(String[] args) {</p><p class="source-code">        ShoppingCart myFirstCart = new ShoppingCart(new HashMap&lt;&gt;());</p><p class="source-code">        ShoppingCart mySecondCart = myFirstCart.addItem(new           ShoppingItem("Chair", 150));</p><p class="source-code">        ShoppingCart myThirdCart = mySecondCart.addItem(new           ShoppingItem("Table", 350));</p></li>
			</ol>
			<p>You can find the entire code for this activity at: <a href="https://packt.live/2q045er">https://packt.live/2q045er</a></p>
			<h1 id="_idParaDest-378"><a id="_idTextAnchor391"/>14. Recursion</h1>
			<h2 id="_idParaDest-379"><a id="_idTextAnchor392"/>Activity 1: Calculating the Fibonacci Sequence</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Create a class named <strong class="source-inline">Fibonacci</strong>.</li>
				<li>Create a static method called <strong class="source-inline">fibonacci</strong> to calculate the Fibonacci sequence for a given number. If the input number is greater than <strong class="source-inline">1</strong>, this method will call itself.<p class="source-code">    public static int fibonacci(int number) {</p><p class="source-code">        if (number == 0) {</p><p class="source-code">            return number;</p><p class="source-code">        } else if (number == 1) {</p><p class="source-code">            return 1;</p><p class="source-code">        } else {</p><p class="source-code">            return (fibonacci(number - 1) + fibonacci(number - 2));</p><p class="source-code">        }</p><p class="source-code">    }</p><p>If the input number is <strong class="source-inline">0</strong> or <strong class="source-inline">1</strong>, this method returns the input number (<strong class="source-inline">0</strong> or <strong class="source-inline">1</strong>, respectively).</p></li>
				<li>Create a <strong class="source-inline">main()</strong> method that calls the <strong class="source-inline">fibonacci</strong> method with inputs going from 0 to 16 (or to a value less than 17 as shown here).<p class="source-code">    public static void main(String[] args) {</p><p class="source-code">        for (int i = 0; i &lt; 17; i++) {</p><p class="source-code">            System.out.println( fibonacci(i) );</p><p class="source-code">        }</p><p class="source-code">    }</p><p class="callout-heading">Note</p><p class="callout">The complete code for this activity can be found here: <a href="https://packt.live/32DtjNT">https://packt.live/32DtjNT</a>.</p></li>
			</ol>
			<h1 id="_idParaDest-380"><a id="_idTextAnchor393"/>15. Processing Data with Streams</h1>
			<h2 id="_idParaDest-381"><a id="_idTextAnchor394"/>Activity 1: Applying Discount on the Items</h2>
			<p><strong class="bold">Solution</strong></p>
			<p class="source-code-heading">Activity1.java</p>
			<p class="source-code">30         double sum = calculatePrice(fruitCart, vegetableCart, meatAndFishCart);</p>
			<p class="source-code">31         System.out.println(String.format("Sum: %.2f", sum));</p>
			<p class="source-code">32</p>
			<p class="source-code">33         Map&lt;String, Double&gt; discounts = Map.of("Cod", 0.2, "Salad", 0.5);</p>
			<p class="source-code">34</p>
			<p class="source-code">35         double sumDiscount = calculatePriceWithDiscounts(discounts, fruitCart, vegetableCart,            meatAndFishCart);</p>
			<p class="source-code">36         System.out.println(String.format("Discount sum: %.2f", sumDiscount));</p>
			<p class="source-code">37     }</p>
			<p class="source-code">38</p>
			<p class="source-code">39     private static double calculatePrice(ShoppingCart... carts) {</p>
			<p class="source-code">40         return Stream.of(carts)</p>
			<p class="source-code">41                 .flatMap((cart) -&gt; { return cart.mArticles.stream(); })</p>
			<p class="source-code">42                 .mapToDouble((item) -&gt; { return item.price; })</p>
			<p class="source-code">43                 .sum();</p>
			<p class="source-code">44     }</p>
			<p class="source-code-link"><a href="https://packt.live/35Zm5Gj">https://packt.live/35Zm5Gj</a></p>
			<h2 id="_idParaDest-382"><a id="_idTextAnchor395"/>Activity 2: Searching for Specifics</h2>
			<p><strong class="bold">Solution</strong></p>
			<p class="source-code-heading">Activity2.java</p>
			<p class="source-code">61         private ShoppingArticle(String name, String category, double price, String unit) {</p>
			<p class="source-code">62             this.name = name;</p>
			<p class="source-code">63             this.category = category;</p>
			<p class="source-code">64             this.price = price;</p>
			<p class="source-code">65             this.unit = unit;</p>
			<p class="source-code">66         }</p>
			<p class="source-code">67</p>
			<p class="source-code">68         @Override</p>
			<p class="source-code">69         public String toString() {</p>
			<p class="source-code">70             return name + " (" + category + ")";</p>
			<p class="source-code">71         }</p>
			<p class="source-code">72     }</p>
			<p class="source-code">73</p>
			<p class="source-code">74     private static ShoppingArticle findCheapestFruit (List&lt;ShoppingArticle&gt; articles) {</p>
			<p class="source-code">75         return articles.stream()</p>
			<p class="source-code">76                 .filter((article) -&gt; article.category.equals("Fruits"))</p>
			<p class="source-code">77                 .min(Comparator.comparingDouble(article -&gt; article.price))</p>
			<p class="source-code">78                 .orElse(null);</p>
			<p class="source-code">79     }</p>
			<p class="source-code">80</p>
			<p class="source-code">81     private static ShoppingArticle findMostExpensiveVegetable (List&lt;ShoppingArticle&gt; articles) {</p>
			<p class="source-code">82         return articles.stream()</p>
			<p class="source-code">83                 .filter((article) -&gt; article.category.equals("Vegetables"))</p>
			<p class="source-code">84                 .max(Comparator.comparingDouble(article -&gt; article.price))</p>
			<p class="source-code">85                 .orElse(null);</p>
			<p class="source-code">86     }</p>
			<p class="source-code-link"><a href="https://packt.live/32EnOid">https://packt.live/32EnOid</a></p>
			<h1 id="_idParaDest-383"><a id="_idTextAnchor396"/>16. Predicates and Other Functional Interfaces</h1>
			<h2 id="_idParaDest-384"><a id="_idTextAnchor397"/>Activity 1: Toggling the Sensor States</h2>
			<p><strong class="bold">Solution</strong></p>
			<p class="source-code-heading">Activity1.java</p>
			<p class="source-code">52         for (Sensor sensor : sensors) {</p>
			<p class="source-code">53             if (hasAlarmOrWarning.test(sensor)) {</p>
			<p class="source-code">54                 alarmOrWarning = true;</p>
			<p class="source-code">55             }</p>
			<p class="source-code">56         }</p>
			<p class="source-code">57</p>
			<p class="source-code">58         if (alarmOrWarning) {</p>
			<p class="source-code">59             System.out.println("Alarm, or warning, was triggered!");</p>
			<p class="source-code">60</p>
			<p class="source-code">61</p>
			<p class="source-code">62             for (Sensor sensor : sensors) {</p>
			<p class="source-code">63                 System.out.println(sensor.batteryHealth() + ", " + sensor.triggered());</p>
			<p class="source-code">64             }</p>
			<p class="source-code">65         }</p>
			<p class="source-code">66     }</p>
			<p class="source-code">67</p>
			<p class="source-code">68 }</p>
			<p class="source-code-link"><a href="https://packt.live/33Vnc7X">https://packt.live/33Vnc7X</a></p>
			<h2 id="_idParaDest-385"><a id="_idTextAnchor398"/>Activity 2: Using a Recursive Function</h2>
			<p><strong class="bold">Solution</strong></p>
			<p class="source-code-heading">Activity2.java</p>
			<p class="source-code">36     private static double loopedAverageHealth(Integer[] batteryHealths) {</p>
			<p class="source-code">37         double average = 0;</p>
			<p class="source-code">38         for (int i = 0; i &lt; batteryHealths.length; i++) {</p>
			<p class="source-code">39             average += batteryHealths[i];</p>
			<p class="source-code">40         }</p>
			<p class="source-code">41         average = average / batteryHealths.length;</p>
			<p class="source-code">42         return average;</p>
			<p class="source-code">43     }</p>
			<p class="source-code">44</p>
			<p class="source-code">45     private static double streamedAverageHealth(Integer[] batteryHealths) {</p>
			<p class="source-code">46         return Stream.of(batteryHealths)</p>
			<p class="source-code">47                 .mapToDouble(Integer::intValue)</p>
			<p class="source-code">48                 .average()</p>
			<p class="source-code">49                 .orElse(0);</p>
			<p class="source-code">50     }</p>
			<p class="source-code">51</p>
			<p class="source-code">52     private static double recursiveAverageHealth(Integer[] batteryHealths, int index) {</p>
			<p class="source-code">53         double average = batteryHealths[index] / (double) batteryHealths.length;</p>
			<p class="source-code">54         if (index == 0) {</p>
			<p class="source-code">55             return average;</p>
			<p class="source-code">56         } else {</p>
			<p class="source-code">57             return average + recursiveAverageHealth(batteryHealths, index - 1);</p>
			<p class="source-code">58         }</p>
			<p class="source-code">59     }</p>
			<p class="source-code">60 }</p>
			<p class="source-code-link"><a href="https://packt.live/32EnJep">https://packt.live/32EnJep</a></p>
			<h2 id="_idParaDest-386"><a id="_idTextAnchor399"/>Activity 3: Using a Lambda Function</h2>
			<p><strong class="bold">Solution</strong></p>
			<p class="source-code-heading">Activity3.java</p>
			<p class="source-code">37     private static double loopedAverageHealth(Integer[] batteryHealths) {</p>
			<p class="source-code">38         double average = 0;</p>
			<p class="source-code">39         for (int i = 0; i &lt; batteryHealths.length; i++) {</p>
			<p class="source-code">40             average += batteryHealths[i];</p>
			<p class="source-code">41         }</p>
			<p class="source-code">42         average = average / batteryHealths.length;</p>
			<p class="source-code">43         return average;</p>
			<p class="source-code">44     }</p>
			<p class="source-code">45</p>
			<p class="source-code">46     private static double streamedAverageHealth(Integer[] batteryHealths) {</p>
			<p class="source-code">47         return Stream.of(batteryHealths)</p>
			<p class="source-code">48                 .mapToDouble(Integer::intValue)</p>
			<p class="source-code">49                 .average()</p>
			<p class="source-code">50                 .orElse(0);</p>
			<p class="source-code">51     }</p>
			<p class="source-code">52</p>
			<p class="source-code">53     private static double recursiveAverageHealth(Integer[] batteryHealths, int index) {</p>
			<p class="source-code">54         double average = batteryHealths[index] / (double) batteryHealths.length;</p>
			<p class="source-code">55         if (index == 0) {</p>
			<p class="source-code">56             return average;</p>
			<p class="source-code">57         } else {</p>
			<p class="source-code">58             return average + recursiveAverageHealth(batteryHealths, index - 1);</p>
			<p class="source-code">59         }</p>
			<p class="source-code">60     }</p>
			<p class="source-code">61 }</p>
			<p class="source-code-link"><a href="https://packt.live/2BxaoIK">https://packt.live/2BxaoIK</a></p>
			<h1 id="_idParaDest-387"><a id="_idTextAnchor400"/>17. Reactive Programming with Java Flow</h1>
			<h2 id="_idParaDest-388"><a id="_idTextAnchor401"/>Activity 1: Let NumberProcessor Format Values as Integers</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Change the processors published item type to Integer. Make the necessary changes in the implementation to match the new type:<p class="source-code-heading">Ac<a id="_idTextAnchor402"/>tivity1.java</p><p class="source-code">53             @Override</p><p class="source-code">54             public void onComplete() {</p><p class="source-code">55                 System.out.println("onComplete()");</p><p class="source-code">56             }</p><p class="source-code">57         });</p><p class="source-code">58     }</p><p class="source-code">59</p><p class="source-code">60</p><p class="source-code">61     private static String[] getStrings() {</p><p class="source-code">62         String filePath = "res/numbers.txt";</p><p class="source-code">63         try (Stream&lt;String&gt; words = Files.lines(Paths.get(filePath))) {</p><p class="source-code">64             return words.flatMap((line) -&gt; Arrays.stream(line.split("[\\s\\n]+")))</p><p class="source-code">65                     .filter((word) -&gt; word.length() &gt; 0)</p><p class="source-code">66                     .toArray(String[]::new);</p><p class="source-code">67         } catch (IOException e) {</p><p class="source-code">68             e.printStackTrace();</p><p class="source-code">69         }</p><p class="source-code">70         return null;</p><p class="source-code">71     }</p><p class="source-code">72 }</p><p class="source-code-link"><a href="https://packt.live/32GPq6b">https://packt.live/32GPq6b</a></p></li>
				<li>Change the subscriber for the processor, it should accept only Integer values in the <strong class="source-inline">onNext</strong> method: <p class="source-code">  @Override</p><p class="source-code">            public void onSubscribe(Flow.Subscription subscription) {</p><p class="source-code">                this.subscription = subscription;</p><p class="source-code">                subscription.request(1);</p><p class="source-code">            }</p></li>
			</ol>
			<h1 id="_idParaDest-389"><a id="_idTextAnchor403"/>18. Unit Testing</h1>
			<h2 id="_idParaDest-390"><a id="_idTextAnchor404"/>Activity 1: Counting the Words in the String</h2>
			<p><strong class="bold">Solution</strong></p>
			<ol>
				<li value="1">Create a class named <strong class="source-inline">WordCount</strong>.</li>
				<li>Define a method named <strong class="source-inline">countWords()</strong> that takes as input a <strong class="source-inline">String</strong>. The method will count the words in the <strong class="source-inline">String</strong>.<p class="source-code">    public int countWords(String text) {</p><p class="source-code">        int count = 0;</p><p class="source-code">        return count;</p><p class="source-code">    }</p></li>
				<li>In <strong class="source-inline">countWords()</strong>, check if the input String is null. If not, trim any spaces at the beginning and end of the text. Then, split the <strong class="source-inline">String</strong> into words.<p class="source-code">        if (text != null) {</p><p class="source-code">            String trimmed = text.trim();</p><p class="source-code">            if (trimmed.length() &gt; 0) {</p><p class="source-code">                String[] words = trimmed.split("\\s+");</p><p class="source-code">                count = words.length;</p><p class="source-code">            }</p><p class="source-code">        }</p><p>Note the use of a regular expression, <strong class="source-inline">\s+</strong>, that gets passed to the <strong class="source-inline">split()</strong> method. This will split the <strong class="source-inline">String</strong> into words. Also note that the leading backslash character needs to be escaped.</p><p class="callout-heading">Note</p><p class="callout">The complete code for WordCount.java file can be found here: <a href="https://packt.live/32DtjNT">https://packt.live/32DtjNT</a>.</p></li>
			</ol>
			<p>Next, write a parameterized test as follows.</p>
			<ol>
				<li value="1">Create a class named <strong class="source-inline">WordCountTest</strong> in the <strong class="source-inline">src/test</strong> directory (not <strong class="source-inline">src/main</strong>).</li>
				<li>Use the <strong class="source-inline">ParameterizedTest</strong> annotation and define a <strong class="source-inline">CsvSource</strong> with data for the test.<p class="source-code">    @ParameterizedTest</p><p class="source-code">    @CsvSource({</p><p class="source-code">        "'A man, a plan, a canal. Panama',  7",</p><p class="source-code">        "'Able was I ere I saw Elba',  7",</p><p class="source-code">        ", 0",</p><p class="source-code">        "'', 0",</p><p class="source-code">        "'   ', 0",</p><p class="source-code">        "' A cat in the hat with spaces   ', 7"</p><p class="source-code">    })</p><p>The test data takes in two values, a text string to check and then the word count. Note the placement of punctuation and spaces to see if the <strong class="source-inline">WordCount</strong> class works correctly.</p></li>
				<li>Create the <strong class="source-inline">test</strong> method to use the input parameters and validate that the reported word count matches the expected word count.<p class="source-code">    public void testWordCounts(String text, int expected) {</p><p class="source-code">        WordCount wordCount = new WordCount();</p><p class="source-code">        int count = wordCount.countWords(text);</p><p class="source-code">        Assertions.assertEquals(expected, count,</p><p class="source-code">                "Expected " + expected + " for input[" + text + "]");</p><p class="source-code">    }</p><p class="callout-heading">Note</p><p class="callout">The complete code for WordCountTest.java file can be found here: <a href="https://packt.live/2oafOq9">https://packt.live/2oafOq9</a>.</p></li>
			</ol>
		</div>
	</body></html>