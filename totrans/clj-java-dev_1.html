<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with Clojure" id="DB7S1-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Getting Started with Clojure</h1></div></div></div><p class="calibre7">Welcome to the world of Clojure! If you are here, you probably know a little about Lisp or Clojure, but you don't really have an idea of how things work in this world.</p><p class="calibre7">We will get to know Clojure by comparing each feature to what you already know from Java. You will see that there are lists, maps and sets just like in Java, but they are immutable. To work with these kinds of collections, you need a different approach; a different paradigm.</p><p class="calibre7">This is what we will try to accomplish in this book, to give you a different way to approach problems. We hope you end up using Clojure in your every day life, but if you don't, we hope you use a new approach toward problem solving.</p><p class="calibre7">In this chapter, we will cover the following topics:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Getting to know Clojure</li><li class="listitem">Installing Leiningen</li><li class="listitem">Using a <span class="strong"><strong class="calibre8">Read Eval Print Loop</strong></span> (<span class="strong"><strong class="calibre8">REPL</strong></span>)</li><li class="listitem">Installing and using Cursive Clojure</li><li class="listitem">Clojure's simple syntax</li><li class="listitem">Clojure's data types and their relationship to the JVM's data types</li><li class="listitem">Special syntax for functions</li></ul></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with Clojure" id="DB7S1-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Getting to know Clojure"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>Getting to know Clojure</h1></div></div></div><p class="calibre7">Before getting started<a id="id0" class="calibre1"/> with Clojure, you should know some of its features and what it shares with Java.</p><p class="calibre7">Clojure is a programming language that inherits a lot of characteristics from Lisp. You might think of Lisp as that weird programming language with all the parentheses. You need to keep in mind that Clojure chooses to embrace functional programming. This makes it very different from current mainstream programming languages. You will get to know about immutable data structures and how to write programs without changing variable values.</p><p class="calibre7">You will also <a id="id1" class="calibre1"/>find that Clojure is a dynamic programming language, which makes it a little easier and faster to write programs than using statically typed languages. There is also the concept of using a REPL, a tool that allows you to connect to a program running environment and change code dynamically. It is a very powerful tool.</p><p class="calibre7">At last, you will find out that you can convert Clojure to anything you like. You can create or use a statically typed system and bend the language to become what you like. A good example of this is the <code class="email">core.typed</code> library, which allows you to specify the type information without adding support to the compiler.</p></div></div>
<div class="book" title="Installing Leiningen" id="E9OE1-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>Installing Leiningen</h1></div></div></div><p class="calibre7">We are <a id="id2" class="calibre1"/>used to having certain tools to help us build our code, such as Ant, Maven, and Gradle.</p><p class="calibre7">In the Clojure ecosystem, the de facto standard for dependency and build management is Leiningen (affectionately named after the short story "Leiningen versus the Ants", which I <a id="id3" class="calibre1"/>recommend reading at <a class="calibre1" href="http://en.wikipedia.org/wiki/Leiningen_Versus_the_Ants">http://en.wikipedia.org/wiki/Leiningen_Versus_the_Ants</a>); Leiningen strives to be a familiar to Java developers, it gets the best ideas from Maven, like: convention over configuration. It also gets ideas from Ant like custom scripting and plugins.</p><p class="calibre7">Installing it is very simple, let's check how to do it on Mac OS X (installing on Linux should be the same) using bash as your default shell.</p><p class="calibre7">You should also have Java 7 or 8 already installed and configured in your path.</p><p class="calibre7">You can check the detailed instructions on the <a id="id4" class="calibre1"/>Leiningen project page <a class="calibre1" href="http://leiningen.org/">http://leiningen.org/</a>. If you want to get a Leiningen installation up and running, this is what you would have to do:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre8">curl -O https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein</strong></span>
<span class="strong"><strong class="calibre8"># The next step just set up the lein script in your path, you can do it any way you wish</strong></span>
<span class="strong"><strong class="calibre8">mv lein ~/bin</strong></span>
<span class="strong"><strong class="calibre8">echo "export PATH=$PATH:~/bin/"&gt;&gt; ~/.bashrc</strong></span>
<span class="strong"><strong class="calibre8">source ~/.bashrc</strong></span>
<span class="strong"><strong class="calibre8"># Everything should be running now, let's test it</strong></span>
<span class="strong"><strong class="calibre8">lein help</strong></span>
</pre></div><p class="calibre7">The first time you run the <code class="email">lein</code> command, it downloads everything needed from the internet. This makes it very easy to distribute your code, you can even include the <code class="email">lein</code> script with your own projects and make it easier for other developers to get up and running, the only real requirement is the JDK.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Using a REPL" id="F8901-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Using a REPL</h1></div></div></div><p class="calibre7">One of the main advantages of Clojure (and Lisp) is interactive development, the REPL is the base of what can be achieved with interactive programming, it allows you to connect to a running VM running Clojure and execute or modify code on the fly.</p><p class="calibre7">There<a id="id5" class="calibre1"/> is a <a id="id6" class="calibre1"/>story about how NASA was able to debug and correct a bug on a $100 million piece of hardware that was 100 million miles away (<a class="calibre1" href="http://www.flownet.com/gat/jpl-lisp.html">http://www.flownet.com/gat/jpl-lisp.html</a>).</p><p class="calibre7">We have that same power with Clojure and Leiningen and invoking it is very simple, you just need a single command:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre8">lein repl</strong></span>
</pre></div><p class="calibre7">This is what you'll get after running the preceding command:</p><div class="mediaobject"><img src="../images/00002.jpeg" alt="Using a REPL" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Let's go into a bit more detail, as we can see we are running with the following programs:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Java 8</li><li class="listitem">Clojure 1.6.0</li></ul></div><p class="calibre7">We can also get some nice suggestions on how to see documentation, <code class="email">source</code>, <code class="email">Javadoc</code>, and previous errors.</p></div>

<div class="book" title="Using a REPL" id="F8901-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="The nREPL protocol"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec06" class="calibre1"/>The nREPL protocol</h2></div></div></div><p class="calibre7">One <a id="id7" class="calibre1"/>particular thing that is important to note is the nREPL protocol; Someday it might grant us the power to go into a machine running 100 million miles away.</p><p class="calibre7">When you fire up your REPL, the first thing you see is:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre8">nREPL server started on port 55995 on host 127.0.0.1 - nrepl://127.0.0.1:55995</strong></span>
<span class="strong"><strong class="calibre8">REPL-y 0.3.5, nREPL 0.2.6</strong></span>
</pre></div><p class="calibre7">What it is saying is that there's a Clojure process running an nREPL server on port <code class="email">55995</code>. We have connected to it using a very simple client that allows us to interact with the Clojure process.</p><p class="calibre7">The really interesting bit is that you can connect to a remote host just as easily; let's try attaching an REPL to the same process by simply typing the following command:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre8">lein repl :connect localhost:55995</strong></span>
</pre></div><p class="calibre7">Most IDEs have a good integration with Clojure and most of them use this exact mechanism, as clients that work a little more intelligently.</p></div></div>

<div class="book" title="Using a REPL" id="F8901-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Hello world"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec07" class="calibre1"/>Hello world</h2></div></div></div><p class="calibre7">Now<a id="id8" class="calibre1"/> that we are inside the REPL, (any of the two) let's try writing our first expression, go on and type:</p><div class="informalexample"><pre class="programlisting">"Hello world"</pre></div><p class="calibre7">You should get back a value from the REPL saying <code class="email">Hello world</code>, this is not really a program, and it is the <code class="email">Hello world</code> value printed back by the print phase of the REPL.</p><p class="calibre7">Let's now try to write our first Lisp form:</p><div class="informalexample"><pre class="programlisting">(println "Hello world")</pre></div><p class="calibre7">This first expression looks different from what we are used to, it is called an S-expression and it is the standard Lisp way.</p><p class="calibre7">There are a couple of things to remember with S-expressions:</p><div class="book"><ul class="itemizedlist"><li class="listitem">They are lists (hence, the name, Lisp)</li><li class="listitem">The first element of the list is the action that we want to execute, the rest are the parameters of that action (one two three).</li></ul></div><p class="calibre7">So we are asking <a id="id9" class="calibre1"/>for the string <code class="email">Hello world</code> to be printed, but if we look a bit closer at the output, as shown in the following screenshot, there is a <code class="email">nil</code> that we weren't expecting:</p><div class="mediaobject"><img src="../images/00003.jpeg" alt="Hello world" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">The reason for this is that the <code class="email">println</code> function returns the value <code class="email">nil</code> (Clojure's equivalent for null) after printing <code class="email">Hello world</code>.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre7">In Clojure, everything has a value and the REPL will always print it back for you.</p></div></div></div>

<div class="book" title="Using a REPL" id="F8901-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="REPL utilities and conventions"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec08" class="calibre1"/>REPL utilities and conventions</h2></div></div></div><p class="calibre7">As we <a id="id10" class="calibre1"/>saw, the Leiningen nREPL client prints help text; but how does that work? Let's explore some of the other utilities that we have.</p><p class="calibre7">Try each of them to get a feeling of what it does with the help of the following table:</p><div class="informalexample"><table border="1" class="calibre13"><colgroup class="calibre14"><col class="calibre15"/><col class="calibre15"/><col class="calibre15"/></colgroup><thead class="calibre16"><tr class="calibre17"><th valign="bottom" class="calibre18">
<p class="calibre19">Function</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Description</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Sample</p>
</th></tr></thead><tbody class="calibre20"><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">doc</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Prints out a function's <code class="literal">docstring</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">(<code class="literal">doc println</code>)</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">source</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Prints a function's source code, it must be written in Clojure</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">(<code class="literal">source println</code>)</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">javadoc</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Open the <code class="literal">javadoc</code> for a class in the browser</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">(<code class="literal">javadoc java.lang.Integer</code>)</p>
</td></tr></tbody></table></div><p class="calibre7">Let's check how these functions work:</p><div class="informalexample"><pre class="programlisting">user=&gt; (javadoc java.util.List)
;; Should open the javadoc for java.util.List

user=&gt; (doc doc)
-------------------------
clojure.repl/doc
([name])
Macro
  Prints documentation for a var or special form given its name
nil

user=&gt; (source doc)
(defmacro doc
"Prints documentation for a var or special form given its name"
  {:added "1.0"}
  [name]
  (if-let [special-name ('{&amp; fn catch try finally try} name)]
    (#'print-doc (#'special-doc special-name))
    (cond
      (special-doc-map name) `(#'print-doc (#'special-doc '~name))
      (find-ns name) `(#'print-doc (#'namespace-doc (find-ns '~name)))
      (resolve name) `(#'print-doc (meta (var ~name))))))
nil</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre7">
<span class="strong"><strong class="calibre8">Downloading the example code</strong></span>
</p><p class="calibre7">You can download the example code files from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p class="calibre7">What you are <a id="id11" class="calibre1"/>seeing here is metadata pertaining to the <code class="email">doc</code> function; Clojure has the ability to store metadata about every function or <code class="email">var</code> you use. Most of the Clojure core functions include a doc string and the source of the function and this is something that will become very handy in your day to day work.</p><p class="calibre7">Besides these functions, we also get easy access to the latest three values and the latest exceptions that happened in the REPL, let's check this out:</p><div class="informalexample"><pre class="programlisting">user=&gt; 2
2
user=&gt; 3
3
user=&gt; 4
4
user=&gt; (* *1 *2 *3) ;; We are multiplying over here the last three values
24 ;;We get 24!
user=&gt; (/ 1 0) ;; Let's try dividing by zero
ArithmeticException Divide by zero clojure.lang.Numbers.divide (Numbers.java:156)
user=&gt; *e
#&lt;ArithmeticException java.lang.ArithmeticException: Divide by zero&gt;

user=&gt; (.getMessage *e)
"Divide by zero"</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre7">
<code class="email">*e</code> gives you access to the actual plain old Java exception object, so you can analyze and introspect it at runtime.</p></div><p class="calibre7">You can imagine the possibilities of being able to execute and introspect code with this, but what about the tools that we are already used to? How can we use this with an IDE?</p><p class="calibre7">Let's check now how to create a new Clojure project, we'll use Leiningen from the command line to understand what is happening. </p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating a new project" id="G6PI1-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Creating a new project</h1></div></div></div><p class="calibre7">Leiningen can help us create a new project using templates, there is a wide variety of templates available and you can build and distribute your own in Maven.</p><p class="calibre7">Some of the most common types of templates are:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Creating a <code class="email">jar</code> library (the default template)</li><li class="listitem">Creating a command-line app</li><li class="listitem">Creating a Clojure web app</li></ul></div><p class="calibre7">Let's create a new <a id="id12" class="calibre1"/>Clojure command-line app and run it:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre8">lein new app getting-started</strong></span>
<span class="strong"><strong class="calibre8">cd getting-started</strong></span>
<span class="strong"><strong class="calibre8">lein run</strong></span>
<span class="strong"><strong class="calibre8"># Hello, world!</strong></span>
</pre></div></div>

<div class="book" title="Creating a new project" id="G6PI1-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Project structure"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec09" class="calibre1"/>Project structure</h2></div></div></div><p class="calibre7">Leiningen<a id="id13" class="calibre1"/> is similar to other Java development tools; it uses a similar convention and allows for heavy customizations in the <code class="email">project.clj</code> file.</p><p class="calibre7">If you are familiar with Maven or Gradle, you can think of it as <code class="email">pom.xml</code> or <code class="email">build.gradle</code> respectively.</p><p class="calibre7">The following screenshot is the project structure:</p><div class="mediaobject"><img src="../images/00004.jpeg" alt="Project structure" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">As you can<a id="id14" class="calibre1"/> see in the preceding screenshot, there are four main folders:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">resources</code>: It <a id="id15" class="calibre1"/>holds everything that should be in the class path, such as files, images, configuration files, properties files, and other resources needed at runtime.</li><li class="listitem"><code class="email">src</code>: Your<a id="id16" class="calibre1"/> Clojure source files; they are ordered in a very similar fashion to the <code class="email">classpath</code>.</li><li class="listitem"><code class="email">dev-resources</code>: Everything<a id="id17" class="calibre1"/> that should be in the <code class="email">classpath</code> in development (when you are running Leiningen). You can override your "production" files here and add files that are needed for tests to run.</li><li class="listitem"><code class="email">test</code>: Your <a id="id18" class="calibre1"/>tests; this code doesn't get packaged but it is run every time you execute the Leiningen test.</li></ul></div></div></div>

<div class="book" title="Creating a new project" id="G6PI1-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Creating a standalone app"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec10" class="calibre1"/>Creating a standalone app</h2></div></div></div><p class="calibre7">Once <a id="id19" class="calibre1"/>your<a id="id20" class="calibre1"/> project is created, you can build and run a Java standalone command-line app quite easily, let's try it now:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre8">lein uberjar</strong></span>
<span class="strong"><strong class="calibre8">java -jar target/uberjar/getting-started-0.1.0-SNAPSHOT-standalone.jar</strong></span>
<span class="strong"><strong class="calibre8"># Hello, World!</strong></span>
</pre></div><p class="calibre7">As you can see, it is quite easy to create a standalone app and it is very similar to using Maven or Gradle.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Using Cursive Clojure" id="H5A41-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec12" class="calibre1"/>Using Cursive Clojure</h1></div></div></div><p class="calibre7">Java already<a id="id21" class="calibre1"/> has some great tools to help us be more productive and write higher quality code and we don't need to forget about those tools. There are several plugins<a id="id22" class="calibre1"/> for Clojure depending on what your IDE is. Have a look at them from the following table:</p><div class="informalexample"><table border="1" class="calibre13"><colgroup class="calibre14"><col class="calibre15"/><col class="calibre15"/></colgroup><thead class="calibre16"><tr class="calibre17"><th valign="bottom" class="calibre18">
<p class="calibre19">IDE</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Plugins</p>
</th></tr></thead><tbody class="calibre20"><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">IntelliJ</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Cursive Clojure, La Clojure</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">NetBeans</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">NetBeans Clojure (works with NetBeans 7.4)</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Eclipse</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">CounterClockwise</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Emacs</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Cider</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">VIM</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">vim-fireplace, vim-leiningen</p>
</td></tr></tbody></table></div><p class="calibre7">A lot of people writing real Clojure code use Emacs and I actually like using vim as my main development tool, but don't worry, our main IDE will be IntelliJ + Cursive Clojure throughout the book.</p></div>

<div class="book" title="Using Cursive Clojure" id="H5A41-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Installing Cursive Clojure"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec11" class="calibre1"/>Installing Cursive Clojure</h2></div></div></div><p class="calibre7">You can<a id="id23" class="calibre1"/> check the full documentation for Cursive at their website (<a class="calibre1" href="https://cursiveclojure.com/">https://cursiveclojure.com/</a>), it is still under development but it is quite stable and a great aid when writing Clojure code.</p><p class="calibre7">We are going to use the latest IntelliJ Community Edition release, which at the time of this writing is version 14.</p><p class="calibre7">You can download <a id="id24" class="calibre1"/>IntelliJ from here <a class="calibre1" href="https://www.jetbrains.com/idea/download/">https://www.jetbrains.com/idea/download/</a>.</p><p class="calibre7">Installing <a id="id25" class="calibre1"/>Cursive Clojure is very simple, you need to add a repository for IntelliJ. You'll find the instructions to your specific IntelliJ version here: <a class="calibre1" href="https://cursiveclojure.com/userguide/">https://cursiveclojure.com/userguide/</a>.</p><p class="calibre7">After you have installed Cursive Clojure, we are ready to go.</p><p class="calibre7">Now, we are ready to import our getting started project into Cursive Clojure.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note04" class="calibre1"/>Note</h3><p class="calibre7">Cursive Clojure doesn't currently have support to create Leiningen projects from within the IDE; however, support is great in order to import them.</p></div><p class="calibre7">Here is how you will do it:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Click on <span class="strong"><strong class="calibre8">File</strong></span>.</li><li class="listitem" value="2">Import project.</li><li class="listitem" value="3">Look for your project.</li><li class="listitem" value="4">Open the folder or the <code class="email">project.clj</code> file.</li><li class="listitem" value="5">Follow the <span class="strong"><strong class="calibre8">Next</strong></span> steps in the IDE.</li></ol><div class="calibre22"/></div><p class="calibre7">Now, we are ready to go, you can use the Cursive Clojure as your main development tool. There are a few more things to do with your IDE but I recommend you to look for them; they are important and will come in handy:</p><div class="book"><ul class="itemizedlist"><li class="listitem">To know how to execute the project</li><li class="listitem">To know how to execute the tests</li><li class="listitem">To open an REPL connected to some project.</li><li class="listitem">The key binding to execute some given piece of code (run form before cursor in REPL)</li><li class="listitem">The key binding to execute a given file (load file in REPL)</li></ul></div><p class="calibre7">One important part of Clojure programming is that it can modify and reevaluate code in runtime. Check the manual of your current version of Clojure and check for the structural editing section (<a class="calibre1" href="https://cursiveclojure.com/userguide/paredit.html">https://cursiveclojure.com/userguide/paredit.html</a>). It is one of the most useful functionalities of Clojure IDEs and a direct consequence of the Clojure syntax.</p><p class="calibre7">I recommend you to check other functionalities from the manual. I really recommend checking the Cursive Clojure manual, it includes animations of how each functionality works.</p><p class="calibre7">You will use the <a id="id26" class="calibre1"/>last two key bindings quite a lot, so it is important to set them up correctly. There is more information about keybindings at <a class="calibre1" href="https://cursiveclojure.com/userguide/keybindings.html">https://cursiveclojure.com/userguide/keybindings.html</a>.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Getting started with Clojure code and data" id="I3QM1-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec13" class="calibre1"/>Getting started with Clojure code and data</h1></div></div></div><p class="calibre7">Let's take a<a id="id27" class="calibre1"/> deep dive into Clojure's syntax now, it is pretty different from other languages but it is actually much simpler. Lisps have a very regular syntax, with few special rules. As we said earlier, Clojure code is made of S-expressions and S-expressions are just lists. Let's <a id="id28" class="calibre1"/>look at some examples of lists to become familiar with lists in Lisp.</p><div class="informalexample"><pre class="programlisting">(1 2 3 4)
(println "Hello world")
(one two three)
("one" two three)</pre></div><p class="calibre7">All of the above are lists, but not all of them are valid code. Remember, only lists where the first element is a function can be considered valid expressions. So, here only the following could be valid expressions:</p><div class="informalexample"><pre class="programlisting">(println "Hello world")
(one two three)</pre></div><p class="calibre7">If <code class="email">println</code> and <code class="email">one</code> are defined as functions.</p><p class="calibre7">Let's see a piece of Clojure code, to finally explain how everything works.</p><div class="informalexample"><pre class="programlisting">(defn some-function [times parameter]
"Prints a string certain number of times"
  (dotimes [x times]
    (println parameter)))</pre></div></div>

<div class="book" title="Getting started with Clojure code and data" id="I3QM1-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Lists in Clojure"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec12" class="calibre1"/>Lists in Clojure</h2></div></div></div><p class="calibre7">Clojure is<a id="id29" class="calibre1"/> based <a id="id30" class="calibre1"/>around "forms" or lists. In Clojure, same as every Lisp, the way to denote a list is with parentheses, so here are some examples of lists in the last code:</p><div class="informalexample"><pre class="programlisting">(println parameter)
(dotimes [x times] (println parameter))
(defn some-function [times parameter] (dotimes [x times] (println parameter)))</pre></div><p class="calibre7">Lists are one data type in Clojure and they are also the way to express code; you will learn later about all the benefits of expressing code as data. The first one is that it is really simple, anything you can do must be expressed as a list! Let's look at some other examples of executable code:</p><div class="informalexample"><pre class="programlisting">(* 1 2 3)
(+ 5 9 7)
(/ 4 5)
(- 2 3 4)
(map inc [1 2 3 4 5 6])</pre></div><p class="calibre7">I encourage you<a id="id31" class="calibre1"/> to write everything into the REPL, so you get a good notion of what's happening.</p></div></div>

<div class="book" title="Getting started with Clojure code and data" id="I3QM1-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Operations in Clojure"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec13" class="calibre1"/>Operations in Clojure</h2></div></div></div><p class="calibre7">In <a id="id32" class="calibre1"/>Clojure, <code class="email">MOST</code> <a id="id33" class="calibre1"/>of the executable forms have this structure:</p><div class="informalexample"><pre class="programlisting">(<span class="strong"><strong class="calibre8">op </strong></span>parameter-1parameter-2 ….)</pre></div><p class="calibre7">
<code class="email">op</code> is the operation to be executed followed by all the parameters it needs, let's analyze each of our previous forms in this new light:</p><div class="informalexample"><pre class="programlisting">(+ 1 2 3)</pre></div><p class="calibre7">We are asking to execute the <code class="email">+</code> (addition) operation with the parameters <code class="email">1</code>, <code class="email">2</code>, and <code class="email">3</code>. The expected result is <code class="email">6</code>.</p><p class="calibre7">Let's analyze something a bit more complicated:</p><div class="informalexample"><pre class="programlisting">(<span class="strong"><strong class="calibre8">map</strong></span> inc [1 2 3 4 5 6])</pre></div><p class="calibre7">In this, we are asking to execute the <code class="email">clojure.core/map</code> function with two parameters:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">inc</code> is a function name, it takes a number and increments it</li><li class="listitem"><code class="email">[1 2 3 4 5 6]</code> is a collection of numbers</li></ul></div><p class="calibre7">Map applies the <code class="email">inc</code> function to each member of the passed collection and returns a new collection, what we expect is a collection containing <code class="email">[2 3 4 5 6 7]</code>.</p></div></div>

<div class="book" title="Getting started with Clojure code and data" id="I3QM1-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Functions in Clojure"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec14" class="calibre1"/>Functions in Clojure</h2></div></div></div><p class="calibre7">Now <a id="id34" class="calibre1"/>let's check <a id="id35" class="calibre1"/>how a function definition is essentially the same as the previous two forms:</p><div class="informalexample"><pre class="programlisting">(defn some-function [times parameter]
"Prints a string certain number of times"
  (dotimes [x times]
    (println parameter)))</pre></div><p class="calibre7">The <code class="email">defn</code> is the operation that we are asking for. It has several parameters, such as:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">some-function</code> is the name of the function that we are defining</li><li class="listitem"><code class="email">[times parameter]</code> is a collection of parameters</li><li class="listitem"><code class="email">"Prints a string certain number of times"</code> is the docstring, it is actually an optional parameter</li><li class="listitem"><code class="email">(dotimes [x times] (println parameter))</code> is the body of the function that gets executed when you call <code class="email">some-function</code></li></ul></div><p class="calibre7">The <code class="email">defn</code> calls <a id="id36" class="calibre1"/>a function<a id="id37" class="calibre1"/> into existence. After this piece of code is executed, <code class="email">some-function</code> exists in the current namespace and you can use it with the defined parameters.</p><p class="calibre7">The <code class="email">defn</code> is actually written in Clojure and supports a few nice things. Let's now define a <code class="email">multi-arity</code> function:</p><div class="informalexample"><pre class="programlisting">(defn hello
  ([] (hello "Clojure"))
  ([name] (str "Hello " name)))</pre></div><p class="calibre7">Over here we are defining a function with two bodies, one of them has no arguments and the other one has one argument. It is actually pretty simple to understand what's happening.</p><p class="calibre7">Try changing the source in your project's <code class="email">core.clj</code> file similar to the following example:</p><div class="informalexample"><pre class="programlisting">(ns getting-started.core
  (:gen-class))

(defn hello
  ([] (hello "Clojure"))
  ([name] (str "Hello " name)))

(defn -main
"I don't do a whole lot ... yet."
  [&amp; args]
  (println "Hello, World!")
  (println (hello))
  (println (hello "Edu")))</pre></div><p class="calibre7">Now run it, you'll get three different Hello outputs.</p><p class="calibre7">As you can see, Clojure has a very regular syntax and even if it's a little strange for newcomers, it is actually quite simple.</p><p class="calibre7">Here, we have used a few data types that we haven't properly introduced; in the next section we'll take a look at them.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Clojure's data types" id="J2B81-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec14" class="calibre1"/>Clojure's data types</h1></div></div></div><p class="calibre7">Now is <a id="id38" class="calibre1"/>when <a id="id39" class="calibre1"/>everything you know about Java pays off; even the list forms that you saw earlier implement the <code class="email">java.util.List</code> interface. Clojure was designed to be embeddable and to have a great integration with the host platform, so it's only natural that you can use everything you already know about Java types and objects.</p><p class="calibre7">There are two data types in Clojure: scalars and collections.</p></div>

<div class="book" title="Clojure's data types" id="J2B81-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Scalars"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec15" class="calibre1"/>Scalars</h2></div></div></div><p class="calibre7">In every language <a id="id40" class="calibre1"/>you need primitive types; you use them in everyday life as they represent numbers, strings, and Booleans. These primitive types are called scalars in the Clojure world.</p><p class="calibre7">Clojure has a couple of very interesting types like ratios and keywords. In the following table, you get to know the different types of scalars, how they compare to Java and a simple example of how to use each of them.</p><div class="informalexample"><table border="1" class="calibre13"><colgroup class="calibre14"><col class="calibre15"/><col class="calibre15"/><col class="calibre15"/><col class="calibre15"/></colgroup><thead class="calibre16"><tr class="calibre17"><th valign="bottom" class="calibre18">
<p class="calibre19">Clojure data type</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Java data type</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Sample</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Description</p>
</th></tr></thead><tbody class="calibre20"><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">String</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">String</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">"This is a string"</p>
<p class="calibre19">"This is a multiline string"</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">A string of characters; in Clojure you can use multiline strings without a problem</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Boolean</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Boolean</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">true</p>
<p class="calibre19">false</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Literal Boolean values</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Character</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Character</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">\c</code>
</p>
<p class="calibre19">
<code class="literal">\u0045 ;; Unicode char 45 E</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Character values, they are <code class="literal">java.lang.Character</code> instances, you can define Unicode characters</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Keywords</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Doesn't exist in java</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">:key</code>
</p>
<p class="calibre19">
<code class="literal">:sample</code>
</p>
<p class="calibre19">
<code class="literal">:some-keyword</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">They evaluate themselves and they are often used as keys. They are also functions that look for themselves in a map.</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Number</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Numbers are automatically handled as <code class="literal">BigDecimal</code>, <code class="literal">BigInteger</code> or lower precision depending on what's necessary</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">42N ;;Big Integer</code>
</p>
<p class="calibre19">
<code class="literal">42 ;;long</code>
</p>
<p class="calibre19">
<code class="literal">0.1M ;;BigDecimal</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">It is important to remember the trade-offs of Java numbers, if precision is important, you should always use big decimals and <code class="literal">bigintegers</code>.</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Ratio</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Doesn't exist</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">22/7</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Clojure provides great numerical precision; if necessary it can retain the ration and execute exact operation. The tradeoff when using ratios is speed.</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Symbol</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Doesn't exist</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">some-name</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Symbols are identifiers in Clojure, very similar to a variable name in Java.</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">nil</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">null</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">nil</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">The null value</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">Regular expressions</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">java.util.regex.Pattern</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">#"\d"</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">Regular expressions, in Clojure you get free syntax to define regular expressions, but in the end it is a plain old Java reggae Pattern</p>
</td></tr></tbody></table></div></div></div>

<div class="book" title="Clojure's data types" id="J2B81-f3eee9b8c89a4c399520b72f8d890ddc">
<div class="book" title="Collection data types"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec16" class="calibre1"/>Collection data types</h2></div></div></div><p class="calibre7">In Clojure <a id="id41" class="calibre1"/>there are two types of collections: sequential and associative collections. Sequential are things you can iterate, such as lists. Associative collections are maps, sets, and things you can access by a certain index. Clojure's collections are fully compatible with Java and it can even implement the <code class="email">java.util</code> interfaces, such as <code class="email">java.util.List</code> and <code class="email">java.util.Map</code>.</p><p class="calibre7">One of the main characteristics of collections in Clojure is that they are immutable; it has a lot of benefits that we'll see later.</p><p class="calibre7">Let's have a look at the characteristics of each collection data type available in Clojure and compare them with Java with the help of a sample (in Clojure) and its description.</p><div class="informalexample"><table border="1" class="calibre13"><colgroup class="calibre14"><col class="calibre15"/><col class="calibre15"/><col class="calibre15"/><col class="calibre15"/></colgroup><thead class="calibre16"><tr class="calibre17"><th valign="bottom" class="calibre18">
<p class="calibre19">Clojure data type</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Java data type</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Sample</p>
</th><th valign="bottom" class="calibre18">
<p class="calibre19">Description</p>
</th></tr></thead><tbody class="calibre20"><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">List</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">List</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">(1 2 3 4 5)</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">A simple list, notice the quote character before the list, if you don't specify it Clojure will try to evaluate the form as an instruction</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">Vector</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">Array</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">[1 2 3 4 5]</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">It is the main workhorse in Clojure, it is similar to an array because you can access elements in a random order</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">Set</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">HashSet</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">#{1 2 3 4}</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">A normal Java hash set</p>
</td></tr><tr class="calibre17"><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">Map</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">HashMap</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">
<code class="literal">{:key 5 :key-2 "red"}</code>
</p>
</td><td valign="top" class="calibre21">
<p class="calibre19">A Clojure map</p>
</td></tr></tbody></table></div></div></div>
<div class="book" title="Summary" id="K0RQ1-f3eee9b8c89a4c399520b72f8d890ddc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec15" class="calibre1"/>Summary</h1></div></div></div><p class="calibre7">As you can see, Clojure has a mature development environment that is always evolving. You can set up command-line tools and your IDE in a very similar fashion to the way you will do in a normal Java development.</p><p class="calibre7">We also learned a little about Clojure's regular syntax, its data types and how they relate to Java's own data types.</p><p class="calibre7">Overall, you should now be comfortable with:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Lisp syntax</li><li class="listitem">Creating a Leiningen project from scratch</li><li class="listitem">Running and packaging your code</li><li class="listitem">Importing a Leiningen project into IntelliJ</li><li class="listitem">Using the REPL</li><li class="listitem">Knowing the relationship between Clojure types and Java types</li></ul></div><p class="calibre7">In the next chapter, we will get an idea of how to organize our code and how that organization takes advantage of Java packages.</p></div></body></html>