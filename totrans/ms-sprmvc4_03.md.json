["```java\n<!DOCTYPE html>\n<html \n\n      layout:decorator=\"layout/default\">\n<head lang=\"en\">\n    <title>Your profile</title>\n</head>\n<body>\n<div class=\"row\" layout:fragment=\"content\">\n\n    <h2 class=\"indigo-text center\">Personal info</h2>\n\n    <form th:action=\"@{/profile}\" method=\"post\" class=\"col m8 s12 offset-m2\">\n\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input id=\"twitterHandle\" type=\"text\"/>\n                <label for=\"twitterHandle\">Last Name</label>\n            </div>\n            <div class=\"input-field col s6\">\n                <input id=\"email\" type=\"text\"/>\n                <label for=\"email\">Email</label>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input id=\"birthDate\" type=\"text\"/>\n                <label for=\"birthDate\">Birth Date</label>\n            </div>\n        </div>\n        <div class=\"row s12\">\n            <button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"save\">Submit\n                <i class=\"mdi-content-send right\"></i>\n            </button>\n        </div>\n    </form>\n</div>\n</body>\n</html>\n```", "```java\npackage masterspringmvc4.profile;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class ProfileController {\n\n    @RequestMapping(\"/profile\")\n    public String displayProfile() {\n        return \"profile/profilePage\";\n    }\n}\n```", "```java\npackage masterSpringMvc.profile;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ProfileForm {\n    private String twitterHandle;\n    private String email;\n    private LocalDate birthDate;\n    private List<String> tastes = new ArrayList<>();\n\n    // getters and setters\n}\n```", "```java\n<!DOCTYPE html>\n<html \n\n      layout:decorator=\"layout/default\">\n<head lang=\"en\">\n    <title>Your profile</title>\n</head>\n<body>\n<div class=\"row\" layout:fragment=\"content\">\n\n    <h2 class=\"indigo-text center\">Personal info</h2>\n\n    <form th:action=\"@{/profile}\" th:object=\"${profileForm}\" method=\"post\" class=\"col m8 s12 offset-m2\">\n\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.twitterHandle}\" id=\"twitterHandle\" type=\"text\"/>\n                <label for=\"twitterHandle\">Last Name</label>\n            </div>\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.email}\" id=\"email\" type=\"text\"/>\n                <label for=\"email\">Email</label>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.birthDate}\" id=\"birthDate\" type=\"text\"/>\n                <label for=\"birthDate\">Birth Date</label>\n            </div>\n        </div>\n        <div class=\"row s12\">\n            <button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"save\">Submit\n                <i class=\"mdi-content-send right\"></i>\n            </button>\n        </div>\n    </form>\n</div>\n</body>\n</html>\n```", "```java\n@Controller\npublic class ProfileController {\n\n    @RequestMapping(\"/profile\")\n    public String displayProfile(ProfileForm profileForm) {\n        return \"profile/profilePage\";\n    }\n\n    @RequestMapping(value = \"/profile\", method = RequestMethod.POST)\n    public String saveProfile(ProfileForm profileForm) {\n        System.out.println(\"save ok\" + profileForm);\n        return \"redirect:/profile\";\n    }\n}\n```", "```java\nlogging.level.org.springframework.web=DEBUG\n```", "```java\nField error in object 'profileForm' on field 'birthDate': rejected value [10/10/1980]; codes [typeMismatch.profileForm.birthDate,typeMismatch.birthDate,typeMismatch.java.time.LocalDate,typeMismatch]; â€¦ nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type java.lang.String to type java.time.LocalDate for value '10/10/1980'; nested exception is java.time.format.DateTimeParseException: Text '10/10/1980' could not be parsed, unparsed text found at index 8]\n```", "```java\npublic class USLocalDateFormatter implements Formatter<LocalDate> {\n    public static final String US_PATTERN = \"MM/dd/yyyy\";\n    public static final String NORMAL_PATTERN = \"dd/MM/yyyy\";\n\n    @Override public LocalDate parse(String text, Locale locale) throws ParseException {\n        return LocalDate.parse(text, DateTimeFormatter.ofPattern(getPattern(locale)));\n    }\n\n    @Override public String print(LocalDate object, Locale locale) {\n        return DateTimeFormatter.ofPattern(getPattern(locale)).format(object);\n    }\n\n    public static String getPattern(Locale locale) {\n        return isUnitedStates(locale) ? US_PATTERN : NORMAL_PATTERN;\n    }\n\n    private static boolean isUnitedStates(Locale locale) {\n        return Locale.US.getCountry().equals(locale.getCountry());\n    }\n}\n```", "```java\npackage masterSpringMvc.config;\n\nimport masterSpringMvc.dates.USLocalDateFormatter;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.format.FormatterRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;\n\nimport java.time.LocalDate;\n\n@Configuration\npublic class WebConfiguration extends WebMvcConfigurerAdapter {\n\n    @Override public void addFormatters(FormatterRegistry registry) {\n        registry.addFormatterForFieldType(LocalDate.class, new USLocalDateFormatter());\n    }\n}\n```", "```java\n@ModelAttribute(\"dateFormat\")\npublic String localeFormat(Locale locale) {\n    return USLocalDateFormatter.getPattern(locale);\n}\n```", "```java\n<div class=\"row\">\n    <div class=\"input-field col s6\">\n        <input th:field=\"${profileForm.birthDate}\" id=\"birthDate\" type=\"text\" th:placeholder=\"${dateFormat}\"/>\n        <label for=\"birthDate\">Birth Date</label>\n    </div>\n</div>\n```", "```java\npackage masterspringmvc4.profile;\n\nimport org.hibernate.validator.constraints.Email;\nimport org.hibernate.validator.constraints.NotEmpty;\n\nimport javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Past;\nimport javax.validation.constraints.Size;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.List;\n\npublic class ProfileForm {\n    @Size(min = 2)\n    private String twitterHandle;\n\n    @Email\n    @NotEmpty\n    private String email;\n\n   @NotNull\n    private Date birthDate;\n\n    @NotEmpty\n    private List<String> tastes = new ArrayList<>();\n}\n```", "```java\n@RequestMapping(value = \"/profile\", method = RequestMethod.POST)\npublic String saveProfile(@Valid ProfileForm profileForm, BindingResult bindingResult) {\n    if (bindingResult.hasErrors()) {\n        return \"profile/profilePage\";\n    }\n\n    System.out.println(\"save ok\" + profileForm);\n    return \"redirect:/profile\";\n}\n```", "```java\n<ul th:if=\"${#fields.hasErrors('*')}\" class=\"errorlist\">\n    <li th:each=\"err : ${#fields.errors('*')}\" th:text=\"${err}\">Input is incorrect</li>\n</ul>\n```", "```java\n<!DOCTYPE html>\n<html \n\n      layout:decorator=\"layout/default\">\n<head lang=\"en\">\n    <title>Your Profile</title>\n</head>\n<body>\n<div class=\"row\" layout:fragment=\"content\">\n\n    <h2 class=\"indigo-text center\">Personal info</h2>\n\n    <form th:action=\"@{/profile}\" th:object=\"${profileForm}\" method=\"post\" class=\"col m8 s12 offset-m2\">\n\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.twitterHandle}\" id=\"twitterHandle\" type=\"text\" th:errorclass=\"invalid\"/>\n                <label for=\"twitterHandle\">Twitter handle</label>\n\n                <div th:errors=\"*{twitterHandle}\" class=\"red-text\">Error</div>\n            </div>\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.email}\" id=\"email\" type=\"text\" th:errorclass=\"invalid\"/>\n                <label for=\"email\">Email</label>\n\n                <div th:errors=\"*{email}\" class=\"red-text\">Error</div>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.birthDate}\" id=\"birthDate\" type=\"text\" th:errorclass=\"invalid\" th:placeholder=\"${dateFormat}\"/>\n                <label for=\"birthDate\">Birth Date</label>\n\n                <div th:errors=\"*{birthDate}\" class=\"red-text\">Error</div>\n            </div>\n        </div>\n        <div class=\"row s12\">\n            <button class=\"btn indigo waves-effect waves-light\" type=\"submit\" name=\"save\">Submit\n                <i class=\"mdi-content-send right\"></i>\n            </button>\n        </div>\n    </form>\n</div>\n</body>\n</html>\n```", "```java\nSize.profileForm.twitterHandle=Please type in your twitter user name\nEmail.profileForm.email=Please specify a valid email address\nNotEmpty.profileForm.email=Please specify your email address\nPastLocalDate.profileForm.birthDate=Please specify a real birth date\nNotNull.profileForm.birthDate=Please specify your birth date\n\ntypeMismatch.birthDate = Invalid birth date format.\n```", "```java\nSize=the {0} field must be between {2} and {1} characters long\ntypeMismatch.java.util.Date = Invalid date format.\n```", "```java\n@Size(min = 2, message = \"Please specify a valid twitter handle\")\nprivate String twitterHandle;\n```", "```java\npackage masterSpringMvc.date;\n\nimport javax.validation.Constraint;\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\nimport javax.validation.Payload;\nimport java.lang.annotation.*;\nimport java.time.LocalDate;\n\n@Target({ElementType.FIELD})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = PastLocalDate.PastValidator.class)\n@Documented\npublic @interface PastLocalDate {\n    String message() default \"{javax.validation.constraints.Past.message}\";\n\n    Class<?>[] groups() default {};\n\n    Class<? extends Payload>[] payload() default {};\n\n    class PastValidator implements ConstraintValidator<PastLocalDate, LocalDate> {\n        public void initialize(PastLocalDate past) {\n        }\n\n        public boolean isValid(LocalDate localDate, ConstraintValidatorContext context) {\n            return localDate == null || localDate.isBefore(LocalDate.now());\n        }\n    }\n}\n```", "```java\n@NotNull\n@PastLocalDate\nprivate LocalDate birthDate;\n```", "```java\nSize.profileForm.twitterHandle=Veuillez entrer votre identifiant Twitter\nEmail.profileForm.email=Veuillez spÃ©cifier une adresse mail valide\nNotEmpty.profileForm.email=Veuillez spÃ©cifier votre adresse mail\nPastLocalDate.profileForm.birthDate=Veuillez donner votre vraie date de naissance\nNotNull.profileForm.birthDate=Veuillez spÃ©cifier votre date de naissance\n\ntypeMismatch.birthDate = Date de naissance invalide.\n```", "```java\npublic interface LocaleResolver {\n\n    Locale resolveLocale(HttpServletRequest request);\n\n    void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale);\n}\n```", "```java\nspring.mvc.locale=fr\n```", "```java\npackage masterSpringMvc.config;\n\nimport masterSpringMvc.date.USLocalDateFormatter;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.format.FormatterRegistry;\nimport org.springframework.web.servlet.LocaleResolver;\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;\nimport org.springframework.web.servlet.i18n.LocaleChangeInterceptor;\nimport org.springframework.web.servlet.i18n.SessionLocaleResolver;\n\nimport java.time.LocalDate;\n\n@Configuration\npublic class WebConfiguration extends WebMvcConfigurerAdapter {\n\n    @Override\n    public void addFormatters(FormatterRegistry registry) {\n        registry.addFormatterForFieldType(LocalDate.class, new USLocalDateFormatter());\n    }\n\n    @Bean\n    public LocaleResolver localeResolver() {\n        return new SessionLocaleResolver();\n    }\n\n    @Bean\n    public LocaleChangeInterceptor localeChangeInterceptor() {\n        LocaleChangeInterceptor localeChangeInterceptor = new LocaleChangeInterceptor();\n        localeChangeInterceptor.setParamName(\"lang\");\n        return localeChangeInterceptor;\n    }\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(localeChangeInterceptor());\n    }\n}\n```", "```java\n<!DOCTYPE html>\n<html \n      >\n<head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no\"/>\n    <title>Default title</title>\n\n    <link href=\"/webjars/materializecss/0.96.0/css/materialize.css\" type=\"text/css\" rel=\"stylesheet\" media=\"screen,projection\"/>\n</head>\n<body>\n\n<ul id=\"lang-dropdown\" class=\"dropdown-content\">\n    <li><a href=\"?lang=en_US\">English</a></li>\n    <li><a href=\"?lang=fr\">French</a></li>\n</ul>\n<nav>\n    <div class=\"nav-wrapper indigo\">\n        <ul class=\"right\">\n            <li><a class=\"dropdown-button\" href=\"#!\" data-activates=\"lang-dropdown\"><i class=\"mdi-action-language right\"></i> Lang</a></li>\n        </ul>\n    </div>\n</nav>\n\n<section layout:fragment=\"content\">\n    <p>Page content goes here</p>\n</section>\n\n<script src=\"img/jquery.js\"></script>\n<script src=\"img/materialize.js\"></script>\n<script type=\"text/javascript\">\n    $(\".dropdown-button\").dropdown();\n</script>\n</body>\n</html>\n```", "```java\n<!DOCTYPE html>\n<html \n\n      layout:decorator=\"layout/default\">\n<head lang=\"en\">\n    <title>Your profile</title>\n</head>\n<body>\n<div class=\"row\" layout:fragment=\"content\">\n\n    <h2 class=\"indigo-text center\" th:text=\"#{profile.title}\">Personal info</h2>\n\n    <form th:action=\"@{/profile}\" th:object=\"${profileForm}\" method=\"post\" class=\"col m8 s12 offset-m2\">\n\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.twitterHandle}\" id=\"twitterHandle\" type=\"text\" th:errorclass=\"invalid\"/>\n                <label for=\"twitterHandle\" th:text=\"#{twitter.handle}\">Twitter handle</label>\n\n                <div th:errors=\"*{twitterHandle}\" class=\"red-text\">Error</div>\n            </div>\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.email}\" id=\"email\" type=\"text\" th:errorclass=\"invalid\"/>\n                <label for=\"email\" th:text=\"#{email}\">Email</label>\n\n                <div th:errors=\"*{email}\" class=\"red-text\">Error</div>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"input-field col s6\">\n                <input th:field=\"${profileForm.birthDate}\" id=\"birthDate\" type=\"text\" th:errorclass=\"invalid\"/>\n                <label for=\"birthDate\" th:text=\"#{birthdate}\" th:placeholder=\"${dateFormat}\">Birth Date</label>\n\n                <div th:errors=\"*{birthDate}\" class=\"red-text\">Error</div>\n            </div>\n        </div>\n        <div class=\"row s12 center\">\n            <button class=\"btn indigo waves-effect waves-light\" type=\"submit\" name=\"save\" th:text=\"#{submit}\">Submit\n                <i class=\"mdi-content-send right\"></i>\n            </button>\n        </div>\n    </form>\n</div>\n</body>\n</html>\n```", "```java\nNotEmpty.profileForm.tastes=Please enter at least one thing\nprofile.title=Your profile\ntwitter.handle=Twitter handle\nemail=Email\nbirthdate=Birth Date\ntastes.legend=What do you like?\nremove=Remove\ntaste.placeholder=Enter a keyword\nadd.taste=Add taste\nsubmit=Submit\n```", "```java\nNotEmpty.profileForm.tastes=Veuillez saisir au moins une chose\nprofile.title=Votre profil\ntwitter.handle=Pseudo twitter\nemail=Email\nbirthdate=Date de naissance\ntastes.legend=Quels sont vos goÃ»ts ?\nremove=Supprimer\ntaste.placeholder=Entrez un mot-clÃ©\nadd.taste=Ajouter un centre d'intÃ©rÃªt\nsubmit=Envoyer\n```", "```java\n<fieldset class=\"row\">\n    <legend th:text=\"#{tastes.legend}\">What do you like?</legend>\n    <button class=\"btn teal\" type=\"submit\" name=\"addTaste\" th:text=\"#{add.taste}\">Add taste\n        <i class=\"mdi-content-add left\"></i>\n    </button>\n\n    <div th:errors=\"*{tastes}\" class=\"red-text\">Error</div>\n\n    <div class=\"row\" th:each=\"row,rowStat : *{tastes}\">\n        <div class=\"col s6\">\n            <input type=\"text\" th:field=\"*{tastes[__${rowStat.index}__]}\" th:placeholder=\"#{taste.placeholder}\"/>\n        </div>\n\n        <div class=\"col s6\">\n            <button class=\"btn red\" type=\"submit\" name=\"removeTaste\" th:value=\"${rowStat.index}\" th:text=\"#{remove}\">Remove\n                <i class=\"mdi-action-delete right waves-effect\"></i>\n            </button>\n        </div>\n    </div>\n</fieldset>\n```", "```java\nth:field=\"*{tastes[__${rowStat.index}__]}\"\n```", "```java\nth:field=\"*{tastes[rowStat.index]}\"\n```", "```java\n@Controller\npublic class ProfileController {\n\n    @ModelAttribute(\"dateFormat\")\n    public String localeFormat(Locale locale) {\n        return USLocalDateFormatter.getPattern(locale);\n    }\n\n    @RequestMapping(\"/profile\")\n    public String displayProfile(ProfileForm profileForm) {\n        return \"profile/profilePage\";\n    }\n\n    @RequestMapping(value = \"/profile\", params = {\"save\"}, method = RequestMethod.POST)\n    public String saveProfile(@Valid ProfileForm profileForm, BindingResult bindingResult) {\n        if (bindingResult.hasErrors()) {\n            return \"profile/profilePage\";\n        }\n        System.out.println(\"save ok\" + profileForm);\n        return \"redirect:/profile\";\n    }\n\n    @RequestMapping(value = \"/profile\", params = {\"addTaste\"})\n    public String addRow(ProfileForm profileForm) {\n        profileForm.getTastes().add(null);\n        return \"profile/profilePage\";\n    }\n\n    @RequestMapping(value = \"/profile\", params = {\"removeTaste\"})\n    public String removeRow(ProfileForm profileForm, HttpServletRequest req) {\n        Integer rowId = Integer.valueOf(req.getParameter(\"removeTaste\"));\n        profileForm.getTastes().remove(rowId.intValue());\n        return \"profile/profilePage\";\n    }\n}\n```", "```java\nInteger rowId = Integer.valueOf(req.getParameter(\"removeTaste\"));\n```", "```java\n<input th:field=\"${profileForm.twitterHandle}\" id=\"twitterHandle\" type=\"text\" th:errorclass=\"invalid\"/>\n<input th:field=\"${profileForm.email}\" id=\"email\" type=\"text\" th:errorclass=\"invalid\"/>\n<input th:field=\"${profileForm.birthDate}\" id=\"birthDate\" type=\"text\" th:errorclass=\"invalid\"/>\n<input type=\"text\" th:field=\"*{tastes[__${rowStat.index}__]}\" th:placeholder=\"#{taste.placeholder}\"/>\n```", "```java\n<input th:field=\"${profileForm.twitterHandle}\" id=\"twitterHandle\" type=\"text\" required=\"required\" th:errorclass=\"invalid\"/>\n<input th:field=\"${profileForm.email}\" id=\"email\" type=\"email\" required=\"required\" th:errorclass=\"invalid\"/>\n<input th:field=\"${profileForm.birthDate}\" id=\"birthDate\" type=\"text\" required=\"required\" th:errorclass=\"invalid\"/>\n<input type=\"text\" required=\"required\" th:field=\"*{tastes[__${rowStat.index}__]}\" th:placeholder=\"#{taste.placeholder}\"/>\n```", "```java\n<script type=\"text/javascript\" layout:fragment=\"script\">\n</script>\n```", "```java\n<script layout:fragment=\"script\">\n    $('button').bind('click', function(e) {\n        if (e.currentTarget.name === 'save') {\n            $(e.currentTarget.form).removeAttr('novalidate');\n        } else {\n            $(e.currentTarget.form).attr('novalidate', 'novalidate');\n        }\n    });\n</script>\n```"]