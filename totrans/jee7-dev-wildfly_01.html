<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with WildFly"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Getting Started with WildFly</h1></div></div></div><p class="calibre8">Java Enterprise Edition provides a standard to develop enterprise software, but allows the developers to choose its specific implementation. For every technology that is included in the Java EE (Enterprise Edition) specification, there is a reference implementation; an open source library or component that fulfills all of the requirements. Companies and organizations can create their own versions of the components, which means that there is no central Java EE platform that everybody uses. In place of that, we get multiple approaches on the implemented specification, with improvements and optimizations for specific cases. At the time of writing this, there are about 20 certified (full) implementations of Java EE 6 and three implementations of Java EE 7.</p><p class="calibre8">An application server<a id="id0" class="calibre1"/> is a runtime environment that provides applications with all the Java EE components. Glassfish is the reference implementation sponsored by Oracle, but beginning from Version 4 (created for Java EE 7), there is no longer commercial support for it. In this book, you will learn how to develop applications on the WildFly Application Server, previously known<a id="id1" class="calibre1"/> as the JBoss Application Server.</p><p class="calibre8">JBoss is a division of Red Hat, which seeks to provide a developer-friendly open source ecosystem for enterprise development. Currently, the company supports multiple projects (around 100), and some of them are implementations of Java EE specifications. The enterprise elements are combined in JBoss's own application server, WildFly.</p><p class="calibre8">It is worth noting that the name change from JBoss AS to WildFly was made to separate the application server from the company and other subprojects. The name was chosen in a public vote (more information <a id="id2" class="calibre1"/>on this is available at <a class="calibre1" href="http://jbossas.jboss.org/rename/vote">http://jbossas.jboss.org/rename/vote</a>).</p><p class="calibre8">The new release features a scalable and high performing web server called Undertow, which supports the HTTP upgrade mechanism and WebSocket protocol. What's more, the new version of the container is even faster than JBoss Application Server 7, and offers a unified configuration mechanism. However, the main essence of the latest release is the Java EE 7 compliance, which allows developers to use technologies from the newest version of the Java EE specification.</p><p class="calibre8">The focus of this book is on application development; therefore, we will first need to gather all resources required to deliver our applications. In this chapter, we will cover the following topics in detail:</p><div class="book"><ul class="itemizedlist"><li class="listitem">An overview of Java EE and WildFly</li><li class="listitem">Preparing your environment for the installation of software</li><li class="listitem">Downloading and installing WildFly</li><li class="listitem">Verifying the WildFly installation</li><li class="listitem">Installing other resources needed for development</li></ul></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with WildFly">
<div class="book" title="An overview of Java EE and WildFly"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>An overview of Java EE and WildFly</h1></div></div></div><p class="calibre8">Java EE (formerly called J2EE) is an umbrella specification embracing a standard set of technologies for server-side Java development. Java EE technologies include Java Servlet, <span class="strong"><strong class="calibre9">JavaServer</strong></span><a id="id3" class="calibre1"/>
<span class="strong"><strong class="calibre9"> Pages</strong></span> (<span class="strong"><strong class="calibre9">JSPs</strong></span>), <span class="strong"><strong class="calibre9">JavaServer </strong></span><a id="id4" class="calibre1"/>
<span class="strong"><strong class="calibre9">Faces</strong></span> (<span class="strong"><strong class="calibre9">JSFs</strong></span>), <span class="strong"><strong class="calibre9">Enterprise</strong></span><a id="id5" class="calibre1"/>
<span class="strong"><strong class="calibre9"> JavaBeans</strong></span> (<span class="strong"><strong class="calibre9">EJB</strong></span>), <span class="strong"><strong class="calibre9">Contexts and </strong></span><a id="id6" class="calibre1"/>
<span class="strong"><strong class="calibre9">Dependency Injection</strong></span> (<span class="strong"><strong class="calibre9">CDI</strong></span>), <span class="strong"><strong class="calibre9">Java Messaging </strong></span><a id="id7" class="calibre1"/>
<span class="strong"><strong class="calibre9">Service</strong></span> (<span class="strong"><strong class="calibre9">JMS</strong></span>), <span class="strong"><strong class="calibre9">Java </strong></span><a id="id8" class="calibre1"/>
<span class="strong"><strong class="calibre9">Persistence API</strong></span> (<span class="strong"><strong class="calibre9">JPA</strong></span>), <span class="strong"><strong class="calibre9">Java API for XML </strong></span><a id="id9" class="calibre1"/>
<span class="strong"><strong class="calibre9">Web Services</strong></span> (<span class="strong"><strong class="calibre9">JAX-WS</strong></span>), and <span class="strong"><strong class="calibre9">Java API</strong></span><a id="id10" class="calibre1"/>
<span class="strong"><strong class="calibre9"> for RESTful Web Services</strong></span> (<span class="strong"><strong class="calibre9">JAX-RS</strong></span>), among others. The newest version of Java EE extends the range of available technologies even further by providing support for Batch Applications, Concurrency Utilities, <span class="strong"><strong class="calibre9">JSON Processing</strong></span> (<span class="strong"><strong class="calibre9">JSON-P</strong></span>) and WebSocket. Several commercial and <a id="id11" class="calibre1"/>open source application servers exist, which allow developers to run applications compliant with Java EE; WildFly (formerly known as JBoss AS) is the leading open source solution adopted by developers and, although this is difficult to<a id="id12" class="calibre1"/> measure in exact terms, it is likely to be the most widely used application server in the market.</p><p class="calibre8">As with all application servers compliant with Java EE, WildFly ships with all the required libraries to allow us to develop and deploy Java applications that are built on the Java EE platform.</p></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with WildFly">
<div class="book" title="An overview of Java EE and WildFly">
<div class="book" title="WildFly and Enterprise Application Platform"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec10" class="calibre1"/>WildFly and Enterprise Application Platform</h2></div></div></div><p class="calibre8">WildFly and previous JBoss Application Servers were freely available for the community in the form of downloadable binary packages (for major releases) or buildable source code (for bug fixing releases). These versions are called community releases and are free to use for<a id="id13" class="calibre1"/> development and production.</p><p class="calibre8">JBoss also releases more stable and hardened versions of software of the community builds, which are called <span class="strong"><strong class="calibre9">Enterprise Application Platform</strong></span> (<span class="strong"><strong class="calibre9">EAP</strong></span>), a commercial product with support service from Red Hat. Red Hat calls this kind of relationship between projects as upstream/downstream. The community builds <a id="id14" class="calibre1"/>are the source of changes and innovations for the downstream, the code is downstream. The commercial version numeration differed from the community line, but it was an extended variant of the community releases (for example, EAP 6.1.0 was built on JBoss 7.2.0, which<a id="id15" class="calibre1"/> was available only on GitHub in the form of buildable source code; the same goes for EAP 6.2.0 and JBoss 7.3.0). EAP builds have a more complex licensing system; the usage terms depend on the maturity of the build and are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">EAP Alpha</strong></span> is free for the developers and production use, as they are an equivalent of the standard<a id="id16" class="calibre1"/> community version with optional fixes included. The corresponding community binaries may not be available for download, as they would be similar to the EAP Alpha version.</li><li class="listitem"><span class="strong"><strong class="calibre9">EAP Beta</strong></span> is available to<a id="id17" class="calibre1"/> developers for free (after registration to a subscription program), but cannot be used in production.</li><li class="listitem"><span class="strong"><strong class="calibre9">EAP Final</strong></span> is also<a id="id18" class="calibre1"/> available to developers for free, but additionally, new security patches are available only in the paid subscription.</li></ul></div><p class="calibre8">The distribution model proposed by JBoss allows the developers to work for free on the same version as the one used in production. This is a huge benefit, especially since the competitive solution from Oracle (Glassfish: the reference implementation of a Java EE compliant server) no longer has a version with commercial support.</p></div></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with WildFly">
<div class="book" title="An overview of Java EE and WildFly">
<div class="book" title="Welcome to Java EE 7"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec11" class="calibre1"/>Welcome to Java EE 7</h2></div></div></div><p class="calibre8">Java EE 7 includes<a id="id19" class="calibre1"/> several improvements and additions to the existing version. The new version is focused on three themes: developer productivity, HTML5, and providing new features required by enterprise applications. The following sections list the major improvements to the specifications that are of interest to enterprise application developers.</p><p class="calibre8">If you are starting your adventure with Java EE, feel free to skip this section. The technologies described in the following sections will be covered in future chapters in more detail.</p><div class="book" title="JavaServer Faces 2.2 – JSR 344"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec02" class="calibre1"/>JavaServer Faces 2.2 – JSR 344</h3></div></div></div><p class="calibre8">Java EE 7 includes a new version of the JSF specification, which is not so revolutionary as 2.0, but still provides<a id="id20" class="calibre1"/> some appealing additions for developers. The key features delivered by JSF 2.2 are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The HTML5 markup is<a id="id21" class="calibre1"/> now supported by the usage of pass-through elements and attributes. Earlier, custom attributes would have to be supported by an extended renderer for every component. The new constructs allow the developer to pass additional HTML attributes to the markup generated by JSF components.</li><li class="listitem">The flow scope has been introduced with <code class="email">@FlowScoped</code>, which makes the creation of wizards (dialogs with multiple steps) easier.</li><li class="listitem">The Ajax-based file upload is now supported out of the box.</li><li class="listitem">Also, stateless views have been presented as a way to improve performance.</li></ul></div></div><div class="book" title="Enterprise JavaBeans 3.2 – JSR 345"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec03" class="calibre1"/>Enterprise JavaBeans 3.2 – JSR 345</h3></div></div></div><p class="calibre8">Compared to EJB 3.1, the Version 3.2 is a minor update of the existing version. It concentrates mainly on<a id="id22" class="calibre1"/> marking some older features as obsolete (they are now optional, which means that not every Java EE 7-compliant application server will support them). The optional features are connected with persistence to web services based on EJB 2.1 and JAX-RPC. The main enhancements provided <a id="id23" class="calibre1"/>by the new specification are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Life cycle methods for stateful session beans can now be transactional.</li><li class="listitem">The Timer Service API, now allows you to access all active timers in the current EJB module.</li><li class="listitem">A new container provided role (<code class="email">**</code>) has been introduced. It can be used to indicate any authenticated user (without taking his or her actual roles into account).</li><li class="listitem">Passivation of stateful session beans can now be disabled.</li></ul></div><p class="calibre8">Transactional parts of the EJB specification have been extracted and reused in other parts of the Java EE platform (the transaction support has been placed in the JTA 1.2 specification). For instance, the transactional behavior can now be used in CDI beans, thanks to the introduction of the <code class="email">@Transactional</code> annotation.</p></div><div class="book" title="Java Persistence API 2.1 – JSR 338"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec04" class="calibre1"/>Java Persistence API 2.1 – JSR 338</h3></div></div></div><p class="calibre8">JPA was introduced as a standard part of Java EE in Version 5 of the specification. JPA was intended to replace entity beans as the default object-relational mapping framework for Java EE. JPA adopted ideas from third-party object-relational frameworks, such as Hibernate and JDO, <a id="id24" class="calibre1"/>and made them a part of the standard version.</p><p class="calibre8">JPA 2.1 is an improvement over JPA 2.0 as it provides several facilities for developers, which are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">It provides<a id="id25" class="calibre1"/> a standardized schema generation mechanism, thanks to an extended set of annotations and <code class="email">persistence.xml</code> properties</li><li class="listitem">It adds support for type conversion, by the introduction of the <code class="email">@Converter</code> annotation</li><li class="listitem">Stored procedures are now supported by the Entity Manager API, so that the use of the SQL query mechanism for them is no longer required</li><li class="listitem">Criteria API has been extended by bulk updates and deletes</li><li class="listitem">Injection is possible into entity listener classes along with the usage of life cycle callback methods</li><li class="listitem">Named queries can now be created during runtime</li><li class="listitem">The <span class="strong"><strong class="calibre9">JPA Query Language</strong></span> (<span class="strong"><strong class="calibre9">JPQL</strong></span>) has been extended with new database functions</li></ul></div><p class="calibre8">Additionally, Java EE 7-compliant <a id="id26" class="calibre1"/>containers must now support preconfigured data sources (along with other resources), which can be instantly used by JPA entities.</p><p class="calibre8">WildFly uses Hibernate as its JPA provider and is shipped with a ready-to-use H2 in-memory database. The default data source points to the H2 instance hosted inside of the application server.</p></div><div class="book" title="Contexts and Dependency Injection for Java EE 1.1 – JSR 346"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec05" class="calibre1"/>Contexts and Dependency Injection for Java EE 1.1 – JSR 346</h3></div></div></div><p class="calibre8">Version 1.1 of <span class="strong"><strong class="calibre9">Contexts and Dependency Injection</strong></span> (<span class="strong"><strong class="calibre9">CDI</strong></span>) provides improvements for the<a id="id27" class="calibre1"/> issues identified in CDI after its<a id="id28" class="calibre1"/> introduction in Java EE 6. The process<a id="id29" class="calibre1"/> of simplifying the programming model started in Version 1.0 and is now being continued. The areas covered by the update are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">CDI is now enabled by default (without the need to add the <code class="email">bean.xml</code> file to the deployment), with the possibility to specify the desired component scanning mode.</li><li class="listitem">More fine-grained control over the bean discovery mechanism is now available for the developer, thanks to the use of the <code class="email">@Vetoed</code> annotation and class or packages<a id="id30" class="calibre1"/> filters in <code class="email">beans.xml</code>. Interceptors, decorators, and alternatives can now be globally enabled for the whole application using the <code class="email">@Priority</code> annotation, instead of enabling every module.</li><li class="listitem">Event<a id="id31" class="calibre1"/> metadata can now be examined when a CDI event is handled.</li><li class="listitem">Interceptors have been enhanced with the possibility to be executed around constructor invocation.</li><li class="listitem">Finally, the new version contains a significant number of enhancements for the development of portable extensions.</li></ul></div><p class="calibre8">Weld is the CDI implementation internally used in WildFly.</p></div><div class="book" title="Java Servlet API 3.1 – JSR 340"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec06" class="calibre1"/>Java Servlet API 3.1 – JSR 340</h3></div></div></div><p class="calibre8">The new version of the<a id="id32" class="calibre1"/> Java Servlet API has a clear focus on new features. The most important of them is the HTTP upgrade mechanism, which allows the client and server to start a conversation in HTTP 1.1, and negotiate another<a id="id33" class="calibre1"/> protocol for subsequent requests. This feature was used to implement the WebSockets mechanism in Java EE 7. Other features of the new version of specification are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Non-blocking I/O API for Servlets has been provided to improve scalability of web applications</li><li class="listitem">Multiple security improvements have been introduced; the most notable of them is the possibility to set the default security semantics for all HTTP methods</li></ul></div></div><div class="book" title="JAX-RS, the Java API for RESTful Web Services 2.0 – JSR 339"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec07" class="calibre1"/>JAX-RS, the Java API for RESTful Web Services 2.0 – JSR 339</h3></div></div></div><p class="calibre8">In Java EE 7, the JAX-RS specification has been enriched with some long-awaited features. The version has changed from 1.1 to 2.0 because<a id="id34" class="calibre1"/> of the major impact of<a id="id35" class="calibre1"/> the improvements that came with the new specification. The most important features are listed as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The client API is now part of the specification, so the usage of third-party libraries is no longer needed. The implementation of the specification is required to provide a REST client that conforms to the common API.</li><li class="listitem">Asynchronous requests are now supported so that the client does not have to passively wait for the completion of the task.</li><li class="listitem">Filters and handlers<a id="id36" class="calibre1"/> have been introduced as a common mechanism to provide extension points for the developer. They can be used for<a id="id37" class="calibre1"/> cross-cutting concerns, such as auditing and security.</li><li class="listitem">Bean Validation has been integrated into JAX-RS, making constraint annotations usable for request parameters.</li></ul></div><p class="calibre8">WildFly comes bundled with RESTEasy, an implementation of JAX-RS 2.0.</p></div><div class="book" title="Java Message Service 2.0 – JSR 343"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec08" class="calibre1"/>Java Message Service 2.0 – JSR 343</h3></div></div></div><p class="calibre8">The JSR 343 is the first update for the JMS specification in over a decade. Once more, the main theme of<a id="id38" class="calibre1"/> the update is the simplification of the API. The new API dramatically decreases the amount of boilerplate code that has to be<a id="id39" class="calibre1"/> written by the programmer while still maintaining backwards compatibility. Other new features are listed as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Asynchronous message sending is now supported, so the application does not have to be blocked until an acknowledgment from the server is received</li><li class="listitem">Messages can now be sent with a scheduled delay for the delivery</li></ul></div><p class="calibre8">HornetQ is the JMS provider used and developed by JBoss. It is possible to use it outside of WildFly as a standalone message broker.</p></div><div class="book" title="Bean Validation 1.1 – JSR 349"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec09" class="calibre1"/>Bean Validation 1.1 – JSR 349</h3></div></div></div><p class="calibre8">The process of updating the Bean<a id="id40" class="calibre1"/> Validation in Java EE 7 concentrates on two main features:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Methods validation, which<a id="id41" class="calibre1"/> allows the developer to validate parameters and return values</li><li class="listitem">Tighter CDI integration, which changes the life cycle of the elements of the validation framework, allowing the developer to use dependency injection in his or her own <code class="email">ConstraintValidator</code> implementations</li></ul></div></div><div class="book" title="Concurrency utilities for Java EE 1.0 – JSR 236"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec10" class="calibre1"/>Concurrency utilities for Java EE 1.0 – JSR 236</h3></div></div></div><p class="calibre8">Concurrency utilities is a new feature pack to use multithreading in Java EE application components. The new specification<a id="id42" class="calibre1"/> provides <code class="email">ManagedExecutorService</code> (a container-aware version of <code class="email">ExecutorService</code> known from Java SE), which can be used to delegate the execution of tasks to a separate thread. These managed tasks could use most of the features that are available for application<a id="id43" class="calibre1"/> components (such as EJBs or Servlets). It is also possible to schedule cyclic or delayed tasks using new <code class="email">ManagedScheduledExecutorService</code>. These new additions to the platform are filling a functional gap for Java EE, which was very hard to overcome within its architecture earlier on.</p></div><div class="book" title="Batch applications for the Java Platform 1.0 – JSR 352"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec11" class="calibre1"/>Batch applications for the Java Platform 1.0 – JSR 352</h3></div></div></div><p class="calibre8">Batch jobs were another area of enterprise application development, which was not covered by earlier versions of Java EE. The new batch processing framework is used to provide a common solution to<a id="id44" class="calibre1"/> run tasks that are executed without user interaction. Java EE provides the developer with the<a id="id45" class="calibre1"/> following options:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Batch runtime for the execution of jobs</li><li class="listitem">A job description language (based on XML)</li><li class="listitem">The Java API for the implementation of the business logic for the batch tasks</li><li class="listitem">jBeret, which is the batching framework used in WildFly</li></ul></div></div><div class="book" title="Java API for JSON Processing 1.0 – JSR 353"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec12" class="calibre1"/>Java API for JSON Processing 1.0 – JSR 353</h3></div></div></div><p class="calibre8">Java EE 7 now comes<a id="id46" class="calibre1"/> with out-of-the-box JSON processing, so the developer is no longer forced to use external libraries for this<a id="id47" class="calibre1"/> task. The new API allows JSON processing to use two approaches: object model (DOM based) and streaming (event-based).</p></div><div class="book" title="Java API for WebSocket 1.0 – JSR 356"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec13" class="calibre1"/>Java API for WebSocket 1.0 – JSR 356</h3></div></div></div><p class="calibre8">To fully support the<a id="id48" class="calibre1"/> development of applications based on HTML5, Java EE 7 requires a standardized technology for two-way communication between the server and the user's browser. The WebSocket API <a id="id49" class="calibre1"/>allows the developer to define server-side endpoints, which will maintain a TCP connection for every client that will connect to them (using, for instance, a JavaScript API). Before the new specification, developers had to use vendor-specific libraries and not portable solutions to achieve the same goal.</p></div></div></div></div>
<div class="book" title="New features in WildFly"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>New features in WildFly</h1></div></div></div><p class="calibre8">The eighth release of WildFly is based on modular architecture introduced in the previous release named JBoss AS 7. It has improved on several key points, including areas of performance and management. The most important change for the developers is that this release implements<a id="id50" class="calibre1"/> the Java EE 7 standard completely. Some of the most notable improvements include the following:</p><div class="book"><ul class="itemizedlist"><li class="listitem">WildFly 8 implements all <a id="id51" class="calibre1"/>standards presented by Java EE 7 specifications, which are also described in this chapter.</li><li class="listitem">The web server module was completely rewritten under the name Undertow. It supports both blocking and non-blocking operations. Early performance tests (for example, <a class="calibre1" href="http://www.techempower.com/benchmarks/#section=data-r6&amp;hw=i7&amp;test=plaintext">http://www.techempower.com/benchmarks/#section=data-r6&amp;hw=i7&amp;test=plaintext</a>) show major performance improvements in HTTP request handling. Undertow is also available as a separate project and is possible to be used without WildFly.</li><li class="listitem">The final WildFly release has reduced the number of used ports. Now, it uses only two of them, one (<code class="email">9990</code>) for management, JMX, and web administration, and the second one (<code class="email">8080</code>) for standard services, including HTTP, WebSockets, remote JNDI, and EJB invocations.</li><li class="listitem">Now, it is possible to limit a user's management permissions using the Management <a id="id52" class="calibre1"/><span class="strong"><strong class="calibre9">role based access control</strong></span> (<span class="strong"><strong class="calibre9">RBAC</strong></span>). All configuration changes can be tracked using the audit log.</li><li class="listitem">For previous releases, any upgrade operation requires a completely new server installation. WildFly brings the patching feature, allowing to install and rollback modules using management protocols.</li></ul></div><p class="calibre8">In the next section, we will describe all the required steps to install and start a new application server.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Installing the server and client components"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Installing the server and client components</h1></div></div></div><p class="calibre8">The first step in learning about the application server will be to install all the necessary components on your machine in order to run it. The application server itself requires just a JDK environment to be installed.</p><p class="calibre8">As far as hardware<a id="id53" class="calibre1"/> requirements are concerned, you should be aware that the server<a id="id54" class="calibre1"/> distribution, at the time of writing this, requires about 130 MB of hard disk space, and allocates a minimum of 64 MB and a maximum of 512 MB for a standalone server.</p><p class="calibre8">In order to get started, we will need to go over this checklist:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Install JDK where WildFly will run</li><li class="listitem">Install WildFly</li><li class="listitem">Install the Eclipse development environment</li><li class="listitem">Install the Maven build management tool</li></ul></div><p class="calibre8">At the end of this chapter, you will have all the instruments to get started with the application server.</p></div>

<div class="book" title="Installing the server and client components">
<div class="book" title="Installing Java SE"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec12" class="calibre1"/>Installing Java SE</h2></div></div></div><p class="calibre8">The first<a id="id55" class="calibre1"/> mandatory requirement<a id="id56" class="calibre1"/> is to install a JDK 8 environment. The Java<a id="id57" class="calibre1"/> SE download site can be found at <a class="calibre1" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>.</p><p class="calibre8">Choose the latest version of Java SE 8 and install it. If you don't know how to install it, please take a look at <a class="calibre1" href="http://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html">http://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html</a>.</p><div class="book" title="Testing the installation"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec14" class="calibre1"/>Testing the installation</h3></div></div></div><p class="calibre8">Once you have <a id="id58" class="calibre1"/>completed your installation, run the <code class="email">java -version</code> command from a command prompt to verify that it is correctly installed. Here is the expected output from a Windows machine:</p><div class="informalexample"><pre class="programlisting">C:\&gt;java –version
java version "1.8.0_11"
Java(TM) SE Runtime Environment (build 1.8.0_11-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.11-b03, mixed mode)</pre></div></div><div class="book" title="Installing WildFly"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec15" class="calibre1"/>Installing WildFly</h3></div></div></div><p class="calibre8">The JBoss WildFly<a id="id59" class="calibre1"/> application server can be downloaded for<a id="id60" class="calibre1"/> free from <a class="calibre1" href="http://wildfly.org/downloads/">http://wildfly.org/downloads/</a>.</p><p class="calibre8">As you can see<a id="id61" class="calibre1"/> in the following screenshot, at the moment of writing this book, the latest stable release of WildFly is 8.1.0.Final, which features a Certified Java EE 7 full profile:</p><div class="mediaobject"><img src="../images/00002.jpeg" alt="Installing WildFly" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Once you have chosen the appropriate server distribution, you will then be warned that this download is part of a community release and, as such, is not supported.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre8">If you need Enterprise support for your applications, you can opt for the Red Hat Enterprise Application Platform.</p><p class="calibre8">Compared to the community version, the EAP has gone through different quality tests and might be different in terms of features/packaging. More information about the differences between EAP and the community version can be found at the beginning of this chapter. However, at the time of writing this book, EAP does not yet support Java EE 7, and no road map is publicly available.</p></div><p class="calibre8">Installing WildFly is a piece of cake; it does not require anything else besides unpacking the <code class="email">wildfly-8.1.0.Final.zip</code> archive.</p><p class="calibre8">Windows users <a id="id62" class="calibre1"/>can simply use any uncompressing utility, such<a id="id63" class="calibre1"/> as built-in compressed folders (in newer Windows releases), WinZip, WinRAR, or 7-Zip taking care to choose a folder name that does not contain empty spaces and white spaces. Unix/Linux should use the <code class="email">$ unzip wildfly-8.1.0.Final.zip</code> unzip shell command to explode the archive.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre8"><span class="strong"><strong class="calibre9">Security warning</strong></span></p><p class="calibre8">Unix/Linux users should be aware that WildFly does not require root privileges, as none of the default ports used by WildFly are below the privileged port range of <code class="email">1024</code>. To reduce the risk of users gaining root privileges through WildFly, install and run WildFly as a non-root user.</p></div></div><div class="book" title="Starting WildFly"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec16" class="calibre1"/>Starting WildFly</h3></div></div></div><p class="calibre8">After you have installed WildFly, it is <a id="id64" class="calibre1"/>wise to perform a simple start up test to validate that there are no major problems with your Java VM / operating<a id="id65" class="calibre1"/> system combination. To test your installation, move to the <code class="email">bin</code> directory of your <code class="email">JBOSS_HOME</code> (the path to which you have unzipped your application server) directory and issue the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">standalone.bat    # Windows users</strong></span>
<span class="strong"><strong class="calibre9">$ ./standalone.sh   # Linux/Unix users</strong></span>
</pre></div><p class="calibre8">The following is a screenshot of a sample WildFly start-up console:</p><div class="mediaobject"><img src="../images/00003.jpeg" alt="Starting WildFly" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">The preceding command starts up a WildFly standalone instance, which is equivalent to starting the application<a id="id66" class="calibre1"/> server with the <code class="email">run.bat/run.sh</code> script used by earlier JBoss AS releases. You will notice how amazingly fast the new release of the application server is; this is due to the modular architecture introduced in Version 7 of JBoss AS, which only starts up necessary parts of the application server<a id="id67" class="calibre1"/> container needed by the loaded applications.</p><p class="calibre8">If you need to customize the start-up properties of your application server, open the <code class="email">standalone.conf</code> file (or <code class="email">standalone.conf.bat</code> for Windows users), where the memory requirements of Wildfly have been declared. Here is the Linux core section of this file:</p><div class="informalexample"><pre class="programlisting">if [ "x$JAVA_OPTS" = "x" ]; then
    JAVA_OPTS="-Xms64m -Xmx512m -XX:MaxPermSize=256m
       -Djava.net.preferIPv4Stack=true"
    JAVA_OPTS="$JAVA_OPTS
        -Djboss.modules.system.pkgs=$JBOSS_MODULES_SYSTEM_PKGS
        -Djava.awt.headless=true"
else
    echo "JAVA_OPTS already set in environment; overriding default settings with values: $JAVA_OPTS"</pre></div><p class="calibre8">So, by default, the application server starts with a minimum memory requirement of 64 MB of heap space and a maximum of 512 MB. This will be just enough to get started; however, if you need to run more robust Java EE applications on it, you will likely require at least 1 GB of heap space or 2 GB or more, depending on your application type. Generally speaking, 32-bit machines<a id="id68" class="calibre1"/> cannot execute a process whose space exceeds 2 GB; however, on 64-bit machines, there is essentially no<a id="id69" class="calibre1"/> limit to the process size.</p><p class="calibre8">You can verify that the server is reachable from the network by simply pointing your browser to the application server's welcome page, which can be accessed from the well-known address, <code class="email">http://localhost:8080</code>. The welcome page of WildFly is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00004.jpeg" alt="Starting WildFly" class="calibre11"/></div><p class="calibre12"> </p></div><div class="book" title="Connecting to the server with the command-line interface"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec17" class="calibre1"/>Connecting to the server with the command-line interface</h3></div></div></div><p class="calibre8">If you have been using <a id="id70" class="calibre1"/>previous releases of the application <a id="id71" class="calibre1"/>server, you might have heard about the twiddle command-line utility that queried MBeans installed on the application server. This utility has been replaced by a more sophisticated interface<a id="id72" class="calibre1"/> named the command-line interface<span class="strong"><strong class="calibre9"> </strong></span>(<span class="strong"><strong class="calibre9">CLI</strong></span>); it can be found in <code class="email">JBOSS_HOME/bin</code>.</p><p class="calibre8">Just launch the <code class="email">jboss-cli.bat</code> script (or <code class="email">jboss-cli.sh</code> for Linux users), and you will be able to manage<a id="id73" class="calibre1"/> the<a id="id74" class="calibre1"/> application server via a shell interface. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00005.jpeg" alt="Connecting to the server with the command-line interface" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">We started an interactive shell session that can also use the command-line completion (by pressing the <span class="strong"><em class="calibre10">Tab</em></span> key) to match partly typed command names. No more searches are needed to find the exact syntax of commands!</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note04" class="calibre1"/>Note</h3><p class="calibre8">In the previous screenshot, we connected to the server using the <code class="email">connect</code> command; it uses the loopback server address and plugs into port <code class="email">9990</code> by default.</p></div><p class="calibre8">The command-line interface is discussed in depth in <a class="calibre1" title="Chapter 9. Managing the Application Server" href="part0048_split_000.html#page">Chapter 9</a>, <span class="strong"><em class="calibre10">Managing the Application Server</em></span>, which is all about server management interfaces; we will, however, get an initial taste of its basic functionalities in the next sections to get you accustomed to this powerful tool.</p></div><div class="book" title="Stopping WildFly"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec18" class="calibre1"/>Stopping WildFly</h3></div></div></div><p class="calibre8">The easiest way to stop<a id="id75" class="calibre1"/> WildFly is by sending an interrupt signal with <span class="strong"><em class="calibre10">Ctrl</em></span> + <span class="strong"><em class="calibre10">C</em></span>.</p><p class="calibre8">However, if your WildFly <a id="id76" class="calibre1"/>process was launched in the background or, rather, is running on another machine, you can use the CLI interface to issue an immediate shutdown command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[disconnected /] connect</strong></span>
<span class="strong"><strong class="calibre9">Connected to localhost:9990</strong></span>
<span class="strong"><strong class="calibre9">[standalone@localhost:9990 /] :shutdown</strong></span>
</pre></div><div class="book" title="Locating the shutdown script"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch01lvl4sec02" class="calibre1"/>Locating the shutdown script</h4></div></div></div><p class="calibre8">There is actually one more option to shut down the application server that is pretty useful, if you need to shut down the server from within <a id="id77" class="calibre1"/>a script. This option consists of passing the <code class="email">--</code> connect option to the admin shell, thereby switching off the interactive mode as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">jboss-cli.bat --connect command=:shutdown      # Windows</strong></span>
<span class="strong"><strong class="calibre9">./jboss-cli.sh --connect command=:shutdown       # Unix / Linux</strong></span>
</pre></div></div><div class="book" title="Stopping WildFly on a remote machine"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch01lvl4sec03" class="calibre1"/>Stopping WildFly on a remote machine</h4></div></div></div><p class="calibre8">Shutting down the application server that is running on a remote machine is just a matter of providing the server's remote address to the CLI, and for security reasons, a username and password, as shown<a id="id78" class="calibre1"/> in the following code snippet (see the next chapter to learn more about user creation):</p><div class="informalexample"><pre class="programlisting">[disconnected /] connect 192.168.1.10
Authenticating against security realm: ManagementRealm
Username: admin1234
Password:
Connected to 192.168.1.10:9990
[standalone@192.168.1.10:9990 / ] :shutdown</pre></div><p class="calibre8">However, you have to remember that you need access to a given port because often, it may be blocked by a firewall.</p></div></div><div class="book" title="Restarting WildFly"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec19" class="calibre1"/>Restarting WildFly</h3></div></div></div><p class="calibre8">The command-line interface<a id="id79" class="calibre1"/> contains many useful commands. One of the most interesting options is the ability to reload the AS configuration or<a id="id80" class="calibre1"/> parts of it using the <code class="email">reload</code> command.</p><p class="calibre8">When issued on the root node path of the AS server, the <code class="email">reload</code> command can reload the services' configuration:</p><div class="informalexample"><pre class="programlisting">[disconnected /] connect
Connected to localhost:9990
[standalone@localhost:9990 /] :reload</pre></div></div></div></div>

<div class="book" title="Installing the server and client components">
<div class="book" title="Installing the Eclipse environment"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec13" class="calibre1"/>Installing the Eclipse environment</h2></div></div></div><p class="calibre8">The development <a id="id81" class="calibre1"/>environment used in this book is Eclipse, which is known by Java developers worldwide, and it contains a huge set of plugins to expand its<a id="id82" class="calibre1"/> functionalities. Besides this, Eclipse is<a id="id83" class="calibre1"/> the first IDE that is compatible with the new application server.</p><p class="calibre8">So, let's move to the download <a id="id84" class="calibre1"/>page of Eclipse, which is located at <a class="calibre1" href="http://www.eclipse.org">http://www.eclipse.org</a>.</p><p class="calibre8">From here, download<a id="id85" class="calibre1"/> the latest Enterprise Edition (at the time of writing this book, it is Version 4.4 and is also known as Luna). The compressed package contains all the Java EE plugins already installed. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00006.jpeg" alt="Installing the Eclipse environment" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Once you have unzipped the previously downloaded file, you will see a folder named <code class="email">eclipse</code>. In this folder, you will find the Eclipse application (a big blue dot). It is recommended that you create a shortcut on the desktop to simplify the launching of Eclipse. Note that, just as with WildFly, Eclipse does not have an installation process. Once you have unzipped the file, you are done!</p><div class="book" title="Installing JBoss Tools"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec20" class="calibre1"/>Installing JBoss Tools</h3></div></div></div><p class="calibre8">The next step will be<a id="id86" class="calibre1"/> installing the JBoss AS <a id="id87" class="calibre1"/>plugin that is a part of the suite of plugins named JBoss Tools. Installing new plugins in Eclipse is pretty simple; just follow these steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">From the menu, navigate to <span class="strong"><strong class="calibre9">Help</strong></span> | <span class="strong"><strong class="calibre9">Install New Software</strong></span>.</li><li class="listitem" value="2">Then, click on<a id="id88" class="calibre1"/> the <span class="strong"><strong class="calibre9">Add</strong></span> button, where you will enter JBoss Tools' download URL (along with a description), <a class="calibre1" href="http://download.jboss.org/jbosstools/updates/development/luna/">http://download.jboss.org/jbosstools/updates/development/luna/</a>. This is shown in the following screenshot:<div class="mediaobject"><img src="../images/00007.jpeg" alt="Installing JBoss Tools" class="calibre11"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">As you can <a id="id89" class="calibre1"/>see in the preceding screenshot, you need to check the <span class="strong"><strong class="calibre9">JBossAS Tools</strong></span> plugin and move<a id="id90" class="calibre1"/> forward to the next option to complete the installation process.<div class="note" title="Note"><h3 class="title2"><a id="note05" class="calibre1"/>Note</h3><p class="calibre8">Enter <code class="email">JBossAS</code> into the filter field to quickly find the JBoss AS Tools plugin among the large set of JBoss Tools.</p></div></li><li class="listitem" value="4">Once done, restart the process when prompted.<div class="note" title="Note"><h3 class="title2"><a id="note06" class="calibre1"/>Note</h3><p class="calibre8">You can also download JBoss Tools as<a id="id91" class="calibre1"/> individual zip files for an offline installation. See JBoss Tools Downloads at <a class="calibre1" href="http://tools.jboss.org/downloads/">http://tools.jboss.org/downloads/</a>.</p></div></li><li class="listitem" value="5">Now, you should be<a id="id92" class="calibre1"/> able to see WildFly listed as a server by navigating to <span class="strong"><strong class="calibre9">New</strong></span> | <span class="strong"><strong class="calibre9">Server</strong></span> from the upper<a id="id93" class="calibre1"/> menu and expanding the <span class="strong"><strong class="calibre9">JBoss Community</strong></span> option, as shown in the following screenshot:<p class="calibre15"> </p><div class="mediaobject"><img src="../images/00008.jpeg" alt="Installing JBoss Tools" class="calibre11"/></div><p class="calibre14"> </p></li></ol><div class="calibre16"/></div><p class="calibre8">Completing the<a id="id94" class="calibre1"/> server installation in Eclipse is quite straightforward as it just requires pointing to the folder where your<a id="id95" class="calibre1"/> server distribution is; we will therefore leave this to you to implement as a practical exercise.</p></div></div></div>

<div class="book" title="Installing the server and client components">
<div class="book" title="Alternative development environments"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec14" class="calibre1"/>Alternative development environments</h2></div></div></div><p class="calibre8">Since this book is all about development, we should also account for some other alternatives that might<a id="id96" class="calibre1"/> suit your programming<a id="id97" class="calibre1"/> style or your company standards better. So, another valid alternative is IntelliJ IDEA, which<a id="id98" class="calibre1"/> is available at <a class="calibre1" href="http://www.jetbrains.com/idea/index.html">http://www.jetbrains.com/idea/index.html</a>.</p><p class="calibre8">IntelliJ IDEA is a code-centric IDE focused on developer productivity. The editor exhibits a nice<a id="id99" class="calibre1"/> understanding of your code and makes great suggestions right when you need them and is always ready to help you shape your code.</p><p class="calibre8">Two versions of this product exist—Community edition and Ultimate edition—that require a license. In order to use Java EE and the WildFly plugin, you need to download the ultimate edition from <a class="calibre1" href="http://www.jetbrains.com/idea/download/index.html">http://www.jetbrains.com/idea/download/index.html</a> and then simply install it using the installation wizard.</p><p class="calibre8">Once you have installed the Ultimate edition, you will be able to get started with developing applications with WildFly by going to <span class="strong"><strong class="calibre9">File</strong></span> | <span class="strong"><strong class="calibre9">Settings</strong></span> and choosing the <span class="strong"><strong class="calibre9">IDE Settings</strong></span> option. Here, you can choose to add new application server environments. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00009.jpeg" alt="Alternative development environments" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Another development option that is quite popular among<a id="id100" class="calibre1"/> developers is NetBeans (<a class="calibre1" href="http://netbeans.org">http://netbeans.org</a>), which has support for WildFly in its<a id="id101" class="calibre1"/> releases 7.4 and 8.0, but requires installation of additional plugins available in the NetBeans plugins registry.</p></div></div>

<div class="book" title="Installing the server and client components">
<div class="book" title="Installing Maven"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec15" class="calibre1"/>Installing Maven</h2></div></div></div><p class="calibre8">Besides graphical tools, you<a id="id102" class="calibre1"/> are strongly encouraged to learn about Maven, the popular<a id="id103" class="calibre1"/> build and release management tool. By using <a id="id104" class="calibre1"/>Maven, you will enjoy the following things:</p><div class="book"><ul class="itemizedlist"><li class="listitem">A standard structure for all your projects</li><li class="listitem">A centralized and automatic management of dependencies</li></ul></div><p class="calibre8">Maven is distributed in<a id="id105" class="calibre1"/> several formats, for your convenience, and can be downloaded from <a class="calibre1" href="http://maven.apache.org/download.html">http://maven.apache.org/download.html</a>.</p><p class="calibre8">Once the download is complete, unzip the distribution archive (for example, <code class="email">apache-maven-3.1.1-bin.zip</code> for Windows) to the directory in which you wish to install Maven 3.1.0 (or the latest available version), for example, <code class="email">C:\\Programs\apache-maven-3.1.1</code>. Some operating systems such as Linux or OS X offer Maven packages in their application repositories.</p><p class="calibre8">Once done, add the <code class="email">M2_HOME</code> environment variable to your system so that it will point to the folder where Maven has been unpacked.</p><p class="calibre8">Next, update the <code class="email">PATH</code> environment variable by adding the Maven binaries to your system path. For example, on the Windows platform, you should include <code class="email">%M2_HOME%/bin</code> in order<a id="id106" class="calibre1"/> to make Maven available on the command line.</p><p class="calibre8">Some additional <a id="id107" class="calibre1"/>Maven learning materials are available on the Sonatype website in the form of free books; refer to <a class="calibre1" href="http://www.sonatype.com/resources/books">http://www.sonatype.com/resources/books</a>.</p><div class="book" title="Testing the installation"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch01lvl3sec21" class="calibre1"/>Testing the installation</h3></div></div></div><p class="calibre8">Once you have completed<a id="id108" class="calibre1"/> your installation, run the <code class="email">mvn</code> version to verify that Maven has been correctly installed. Refer to the following code snippet to verify the correct installation:</p><div class="informalexample"><pre class="programlisting">&gt; mvn –version
Apache Maven 3.1.1 (0728685237757ffbf44136acec0402957f723d9a; 2013-09-17 17:22:22+0200)
Maven home: C:\Programs\Dev\apache-maven-3.1.1
Java version: 1.8.0_11, vendor: Oracle Corporation
Java home: C:\Programs\Java\jdk1.8.0\jre
Default locale: en_US, platform encoding: Cp1250
OS name: "windows 8.1", version: "6.3", arch: "amd64", family: "dos"</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note07" class="calibre1"/>Note</h3><p class="calibre8"><span class="strong"><strong class="calibre9">Downloading the example code</strong></span></p><p class="calibre8">You can download the example code files for all Packt books you have purchased from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div></div></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we ran our first mile on the track to application server development. We introduced the new features of the application server and had an overview of the Java Platform Enterprise Edition in Version 7, also known as Java EE 7.</p><p class="calibre8">Next, we discussed the installation of the WildFly AS and all the core components that include JDK and a set of development tools, such as Eclipse and Maven, which will be your companions on this journey.</p><p class="calibre8">In the next chapter, we will summarize all the application server features with a special focus on the components and commands needed to deliver an application, which is the main aim of this book.</p></div></body></html>