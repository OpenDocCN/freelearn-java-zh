<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Deploying a Spigot Server" id="DB7S1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Deploying a Spigot Server</h1></div></div></div><p class="calibre8">The first step<a id="id0" class="calibre1"/> to modifying Minecraft with the Bukkit API is to install a <span class="strong"><strong class="calibre2">multiplayer server</strong></span> on your Windows PC. A <span class="strong"><strong class="calibre2">multiplayer server</strong></span> is essentially the same as the single-player Minecraft server, but it allows for more customization <a id="id1" class="calibre1"/>and is not limited to the people in your home network. <span class="strong"><strong class="calibre2">Spigot</strong></span> is a modified version of a Minecraft server, which will be used to load the <span class="strong"><strong class="calibre2">plugins</strong></span> that you create. A <span class="strong"><strong class="calibre2">plugin</strong></span> is a piece of software that hooks or plugs into another<a id="id2" class="calibre1"/> piece of software. The code that you will develop in this book will be in the form of plugins. These plugins will hook into the Minecraft code and change how Minecraft operates. We will set up a Spigot server and use it to test the plugins that you will write. By the end of this chapter, all of your friends will be able to log on to your modified Minecraft server and play together. By working through the following segments of this chapter, we will deploy a Spigot server, which will be modified in the later chapters:</p><div class="book"><ul class="itemizedlist"><li class="listitem">An introduction to Spigot</li><li class="listitem">Installing a Spigot server</li><li class="listitem">Understanding and modifying the server's settings</li><li class="listitem">Using the console and in-game Minecraft and Bukkit server commands</li><li class="listitem">Port forwarding</li></ul></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Deploying a Spigot Server" id="DB7S1-b66e70deee6e4ed481db4b113e303f23">
<div class="book" title="Introduction to Spigot"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>Introduction to Spigot</h1></div></div></div><p class="calibre8">As <a id="id3" class="calibre1"/>you set up your own server and begin to create plugins, you will<a id="id4" class="calibre1"/> encounter <a id="id5" class="calibre1"/>a few terms that may be new to you. The terms are <span class="strong"><strong class="calibre2">Vanilla</strong></span>, <span class="strong"><strong class="calibre2">Bukkit</strong></span>, <span class="strong"><strong class="calibre2">CraftBukkit</strong></span>, and <span class="strong"><strong class="calibre2">Spigot</strong></span>.</p><p class="calibre8">
<span class="strong"><strong class="calibre2">Vanilla</strong></span> refers<a id="id6" class="calibre1"/> to the normal Minecraft game developed by Mojang/Microsoft. The Vanilla Server is the official version of the game. It can be downloaded<a id="id7" class="calibre1"/> from <a class="calibre1" href="http://minecraft.net">minecraft.net</a> and is typically named <code class="email">minecraft_server.jar</code> or <code class="email">minecraft_server.exe</code>. The vanilla server currently does not support any sort of mods or plugins. This is where Bukkit comes in.</p><p class="calibre8">
<span class="strong"><strong class="calibre2">Bukkit</strong></span> is <a id="id8" class="calibre1"/>an API that helps us to develop plugins. We will discuss this in detail in <a class="calibre1" title="Chapter 2. Learning the Bukkit API" href="part0020_split_000.html#J2B81-b66e70deee6e4ed481db4b113e303f23">Chapter 2</a>, <span class="strong"><em class="calibre9">Learning the Bukkit API</em></span>. Until then, it is sufficient to know that when you hear the phrase <span class="strong"><em class="calibre9">bukkit plugins</em></span>, it is referring to the plugins that are built against the Bukkit API.</p><p class="calibre8">The Bukkit API <a id="id9" class="calibre1"/>was originally developed by the <span class="strong"><strong class="calibre2">CraftBukkit</strong></span> team. This <a id="id10" class="calibre1"/>brings us to the next term. <span class="strong"><strong class="calibre2">CraftBukkit</strong></span> is a modified Minecraft server that replaces the vanilla server. CraftBukkit and vanilla Minecraft provide us with essentially the same game. The difference is that CraftBukkit has the ability to load Bukkit plugins and execute the code within the game. CraftBukkit translates the Bukkit methods and variables into Minecraft code, which was developed by Mojang. CraftBukkit also includes additional code to aid plugin developers with completing certain tasks, such as saving/loading data, listening for server events, and scheduling the code that needs to be executed. We will not mention CraftBukkit much in this book, because it has been replaced with a project named <span class="strong"><strong class="calibre2">Spigot</strong></span>.</p><p class="calibre8">
<span class="strong"><strong class="calibre2">Spigot</strong></span> completely<a id="id11" class="calibre1"/> replaces the vanilla Minecraft server, just as CraftBukkit does. Spigot was built on top of the CraftBukkit project. Therefore, they share a lot of the same code. However, Spigot is more configurable via its settings; in many ways, it is much faster. The Spigot team now maintains all three of the projects, namely Bukkit, CraftBukkit, and Spigot. You will be able to use either CraftBukkit or Spigot to run a server, since the Spigot team has been kind enough to provide us with both. I recommend running the Spigot server for the reasons mentioned earlier.</p></div></div>
<div class="book" title="Installing a new Spigot server"><div class="book" id="E9OE2-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>Installing a new Spigot server</h1></div></div></div><p class="calibre8">We will <a id="id12" class="calibre1"/>start from scratch to set up this new server. If you wish to use a preexisting world, you will be able to do so after creating a new Spigot server. To start, let's create a new empty folder named <code class="email">Bukkit Server</code>. We will run the Spigot server from this newly created folder.</p><p class="calibre8">The main file that you will need to start a new server is <code class="email">spigot.jar</code>. A <span class="strong"><strong class="calibre2">JAR</strong></span> file is an executable Java file. Minecraft, Spigot, and every plugin that we will create are all written in Java and therefore are run from a <code class="email">JAR </code>file. The Spigot team updates the <code class="email">spigot.jar</code> file as Mojang releases new versions of Minecraft. Typically, when connecting to a Minecraft server, you must be playing on the same version. In case you are unsure of your Minecraft version, it is displayed in the bottom-left corner of the Minecraft <span class="strong"><strong class="calibre2">client</strong></span>. A <span class="strong"><strong class="calibre2">client</strong></span> is <a id="id13" class="calibre1"/>the program that you use to play Minecraft, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00002.jpeg" alt="Installing a new Spigot server" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">You<a id="id14" class="calibre1"/> can choose the version of Minecraft that you want to play by creating a new profile in the Minecraft launcher, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00003.jpeg" alt="Installing a new Spigot server" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">For legal <a id="id15" class="calibre1"/>reasons, the Spigot team is not allowed to let you download <code class="email">spigot.jar</code>. However, it does provide you with tools and instructions so that you <a id="id16" class="calibre1"/>can build the <code class="email">JAR</code> file yourself. The Spigot team continues to improve this process by providing the latest instructions as well as a troubleshooting guide at <a class="calibre1" href="https://www.spigotmc.org/threads/buildtools-updates-information.42865/">https://www.spigotmc.org/threads/buildtools-updates-information.42865/</a>. This chapter includes simplified instructions on how to obtain the needed <code class="email">JAR</code> file. However, in case you run into problems while building these <code class="email">jar</code> files, refer to the instructions provided on <a class="calibre1" href="http://spigotmc.org">spigotmc.org</a>.</p><p class="calibre8">You will<a id="id17" class="calibre1"/> need Git for Windows in order to run the build tools. You can download it from <a class="calibre1" href="http://msysgit.github.io/">http://msysgit.github.io/</a>. When installing Git for Windows, the default installation settings will be fine. You will also need to download <a id="id18" class="calibre1"/>the build tools <code class="email">JAR</code> file, which can be found at <a class="calibre1" href="https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar">https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar</a>. Create a new folder to place <code class="email">BuildTools.jar</code> in. Name this folder <code class="email">Spigot Build Tools</code>. Also create a new text file within the same folder. Name this text file <code class="email">update.txt</code>. Open the <code class="email">text</code> file and write the following line of code in it:</p><div class="informalexample"><pre class="programlisting">"&lt;java bin path&gt;\java.exe" -jar BuildTools.jar</pre></div><p class="calibre8">
<code class="email">&lt;java bin path&gt;</code> should be replaced with the location of the Java installation. The java path depends on the version of Java that you have on your computer. Look for the <code class="email">Java </code>folder inside the <code class="email">Program Files</code> or <code class="email">Program Files (x86)</code> directory. The <code class="email">Program Files</code> directory can be found at the root of the main hard drive, which is typically <code class="email">C:\</code>. If you do not <a id="id19" class="calibre1"/>see the Java folder, then you will have to install Java. You can download it at <a class="calibre1" href="https://java.com/download/">https://java.com/download/</a>.</p><p class="calibre8">Once you<a id="id20" class="calibre1"/> are in the <code class="email">Java</code> folder, you will see one or more java installation folders, such as <code class="email">jre7 </code>or <code class="email">jre8</code>. Open the installation folder. In case you see more than one, open the one with the higher version number. Within the java installation folder, open the <code class="email">bin</code> directory. Here you should see <code class="email">java.exe</code>, though it may be displayed as simply <span class="strong"><strong class="calibre2">java</strong></span>. Copy the path from the top of the explorer window; this is the java bin path, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00004.jpeg" alt="Installing a new Spigot server" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">If you have Java 8, then the line of code in the update file will be similar to the following code:</p><div class="informalexample"><pre class="programlisting">"C:\Program Files (x86)\Java\jre1.8.0_45\bin\java.exe" -jar BuildTools.jar</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre8">On most PCs, you can reference the java variable in place of the java.exe path. Therefore the line of code in the update file will be as follows: <code class="email">java -jar BuildTools.jar</code>
</p></div><p class="calibre8">Save the file and then rename it from <code class="email">update.txt</code> to <code class="email">update.sh</code>. If you don't see the <code class="email">.txt</code> extension on the file, then you will have to adjust your folder options by performing the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Open the <span class="strong"><strong class="calibre2">View</strong></span> tab to the upper left</li><li class="listitem" value="2">Select <span class="strong"><strong class="calibre2">Folder and search options</strong></span></li><li class="listitem" value="3">Uncheck <span class="strong"><strong class="calibre2">Hide extensions for known file types</strong></span></li><li class="listitem" value="4">Click on <span class="strong"><strong class="calibre2">OK</strong></span></li></ol><div class="calibre13"/></div><p class="calibre8">Now, you can rename <code class="email">update.txt</code> to <code class="email">update.sh</code>. Run <code class="email">update.sh</code> by double-clicking on it. This will execute the build tools, downloading all the code and applying changes until it is up to date. It will take several minutes to complete. Once it's complete, you will have <code class="email">spigot.jar</code>, <code class="email">craftbukkit.jar</code>, and <code class="email">bukkit.jar</code>. The two server jars, namely spigot and craftbukkit, will be found in the <code class="email">Spigot Build Tools</code> directory, where you placed <code class="email">BuildTools.jar</code>. The <code class="email">bukkit.jar file</code> is located in the <code class="email">Bukkit/target </code>directory in the same folder. Each file will have a version number appended to it, such as <code class="email">spigot-1.8.8.jar</code> and <code class="email">bukkit-1.8.8-R0.1-SNAPSHOT.jar</code>. Note the location of these files, as you will need them within this chapter as well as throughout the book.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre8">It is recommended to run update.sh once a week so that you have the latest version of Spigot.</p></div><p class="calibre8">Copy<a id="id21" class="calibre1"/> the <code class="email">spigot.jar</code> file and place it in the <code class="email">Bukkit Server</code> folder that was created by you at the beginning of this segment. For simplicity, we will remove the version number and rename the file <code class="email">spigot.jar</code>.</p><p class="calibre8">Now, we will create a batch file that we can double-click on every time we wish to start the server. In a new text document, type the following two lines:</p><div class="informalexample"><pre class="programlisting">java -Xms1024M -Xmx1024M -jar spigot.jar
PAUSE</pre></div><p class="calibre8">
<code class="email">1024</code> tells how much of the computer's RAM the server will be allowed to use. You can change this number if you want the server to use more or less RAM. <code class="email">spigot.jar</code> is the name of the <code class="email">spigot.jar</code> file. This must match the name of your file. We renamed the file to exclude the version number so that we will not need to edit this batch file every time we update the Spigot server to the latest version. <code class="email">java</code> indicates that we are using Java to run the server. In case the server does not start during the following step, you may need to replace <code class="email">java</code> with the full java path that you copied earlier. The rest of the code in the batch file should not concern you, and it should remain unchanged.</p><p class="calibre8">Save the text document as <code class="email">Start Server.bat</code> and ensure that it is in the same folder as that of <code class="email">spigot.jar</code>. Now, you will be able to run the server. Double-click on the batch file that you just created. It will open the command prompt and start creating server files. It will look like the following screenshot and should display the Minecraft server version that you are using:</p><div class="mediaobject"><img src="../images/00005.jpeg" alt="Installing a new Spigot server" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">If you<a id="id22" class="calibre1"/> do not see the <span class="strong"><strong class="calibre2">Starting minecraft server</strong></span> message, then there may be something wrong with the batch file. If a window similar to what's shown in the previous screenshot does not appear, then make sure that the batch file is named <code class="email">Start Server.bat</code> and not <code class="email">Start Server.bat.txt</code>. When you first start the server, you will see a few warnings. Most of them shouldn't worry you as they are expected. However, you may see a message that explains that <span class="strong"><strong class="calibre2">you need to agree to the EULA in order to run the server</strong></span>. If you look in the <code class="email">Bukkit Server</code> folder, you will now see a new file named <code class="email">eula.txt</code>. Open this file, set <code class="email">eula=true</code>, and save it to agree to<a id="id23" class="calibre1"/> the terms, which are outlined by Mojang at <a class="calibre1" href="https://account.mojang.com/documents/minecraft_eula">https://account.mojang.com/documents/minecraft_eula</a>. Once you do so, you can start the <a id="id24" class="calibre1"/>server again. This time, you will see the server loading and generating a new world.</p></div>
<div class="book" title="Setting up a new server"><div class="book" id="F8902-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Setting up a new server</h1></div></div></div><p class="calibre8">You will<a id="id25" class="calibre1"/> see the server folder populated with several files and folders. The purpose of some of these are explained in this section, but most of the files should not concern you at present:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">plugins</code>: This folder is where you will place all the Bukkit plugins that you wish to use on the server.</li><li class="listitem"><code class="email">world</code>: The folders that begin with <code class="email">world</code>, such as <code class="email">world</code>, <code class="email">world_nether</code>, and so on, include all the information for the new world of the server. If you already have a Minecraft world that you wish to use, then replace these new folders with the old world folders. Do not attempt to do this while the server is running as it will cause problems.</li><li class="listitem"><code class="email">server.properties</code>: This file holds several options that allow you to change how a Minecraft server operates. You can open it with a text editor. There are many settings, and most of them are pretty self-explanatory. I will go over a few settings in the following list that you may want to modify. For a full list<a id="id26" class="calibre1"/> of property explanations, you can visit <a class="calibre1" href="http://www.minecraftwiki.net/wiki/Server.properties">www.minecraftwiki.net/wiki/Server.properties</a>. Changing any of these settings will require you to restart the server.<div class="book"><ul class="itemizedlist1"><li class="listitem"><code class="email">pvp=true</code>: The <code class="email">pvp</code> property can be set to a <code class="email">boolean</code> value. <span class="strong"><strong class="calibre2">PvP</strong></span>  (short for <span class="strong"><strong class="calibre2">Player versus Player</strong></span>) determines whether players can attack and harm each <a id="id27" class="calibre1"/>other. You will want to set this to <code class="email">true</code> or <code class="email">false</code>, depending on whether you want PvP to be on or off<span class="strong"><em class="calibre9"> </em></span>respectively.</li><li class="listitem"><code class="email">difficulty=1</code>: The difficulty property can be set to a number from <code class="email">0</code> to <code class="email">3</code>, where <code class="email">0</code> means <span class="strong"><em class="calibre9">Peaceful</em></span>, <code class="email">1</code> means <span class="strong"><em class="calibre9">Easy</em></span>, <code class="email">2</code> means <span class="strong"><em class="calibre9">Normal</em></span>, and <code class="email">3</code> means <span class="strong"><em class="calibre9">Hard</em></span>. Everyone on the server will play at this difficulty level.</li><li class="listitem"><code class="email">gamemode=0</code>: This property determines which game mode players will start in, where <code class="email">0</code> means <span class="strong"><em class="calibre9">Survival</em></span>, <code class="email">1</code> means <span class="strong"><em class="calibre9">Creative</em></span>, and <code class="email">2</code> means <span class="strong"><em class="calibre9">Adventure</em></span>.</li><li class="listitem"><code class="email">motd=A Minecraft Server</code>: <span class="strong"><strong class="calibre2">MOTD</strong></span> (short for <span class="strong"><strong class="calibre2">Message Of The Day</strong></span>. This message<a id="id28" class="calibre1"/> will be displayed when viewing your server in the Minecraft multiplayer server list, as shown in the following screenshot. It is a good idea to set this to a short description of your server. An example of this is <code class="email">Bukkit plugin testing</code>.<div class="mediaobject"><img src="../images/00006.jpeg" alt="Setting up a new server" class="calibre10"/></div><p class="calibre11"> </p></li><li class="listitem"><code class="email">online-mode=true</code>: This can be set to <code class="email">false</code> to allow players to connect to the server when in the offline mode. This is useful in case <a class="calibre1" href="http://minecraft.net/">http://minecraft.net/</a> is unavailable or your computer is not connected to the <a id="id29" class="calibre1"/>Internet. Running your server in the offline <a id="id30" class="calibre1"/>mode can cause security issues, such as other players logging in to your account.</li></ul></div></li><li class="listitem"><code class="email">bukkit.yml</code>: This file contains many server options. These are the options that a vanilla server does not offer and are only available when you run a modified server. Note that this file is a YMAL (<code class="email">.yml</code>) file and not a PROPERTIES (<code class="email">.properties</code>) file. When you open it, you will see how the two file types are formatted differently. The first difference that you will see is that certain lines are indented. You do not need to fully understand the YMAL formatting, as it will be explained further as we progress through creating Bukkit plugins. There are a few settings in this file that I will bring to your attention, as shown in the following list. For a full list of these Bukkit settings, you<a id="id31" class="calibre1"/> can visit <a class="calibre1" href="http://wiki.bukkit.org/Bukkit.yml">wiki.bukkit.org/Bukkit.yml</a>. Like <code class="email">server.properties</code>, changing any of these settings will require you to restart the server.<div class="book"><ul class="itemizedlist1"><li class="listitem"><code class="email">allow-end: true</code>: A vanilla Minecraft server allows you to disable the nether world from functioning. A Bukkit server allows you to disable the end world as well. Set this to <code class="email">false</code> to prevent players from traveling to the end.</li><li class="listitem"><code class="email">use-exact-login-location: false</code>: Vanilla Minecraft contains a feature that will prevent players from spawning inside a block. The player will instead be spawned above the block so that they will not be stuck when they join the server. This can be easily exploited to climb onto blocks that a player could normally not reach. Bukkit can prevent this from occurring by spawning the player exactly where they logged out. Set this property to <code class="email">true</code> if you wish to prevent this.</li><li class="listitem"><code class="email">spawn-limits</code>: Bukkit allows a server admin to modify the number of monsters and animals that are allowed to spawn within a given <span class="strong"><strong class="calibre2">chunk</strong></span>. If you are unfamiliar <a id="id32" class="calibre1"/>with the term <span class="strong"><strong class="calibre2">chunk</strong></span>, it is a group of <code class="email">16 x 16</code> blocks from bedrock to the highest point of the sky. The following is a picture of a single chunk in Minecraft; if you feel that there are too many (or too few) mobs, then you will want to adjust these values accordingly:<div class="mediaobject"><img src="../images/00007.jpeg" alt="Setting up a new server" class="calibre10"/></div><p class="calibre11"> </p></li><li class="listitem"><code class="email">ticks-per: autosave: 0</code>: Unlike vanilla Minecraft, a Bukkit server will not <a id="id33" class="calibre1"/>periodically save your player/world data. Automatically saving data may prevent the server from losing the changes that were made in the game in case it crashes or shuts down for some reason, such as the computer losing power. Vanilla has set this to <code class="email">6000</code> by default. This value is <a id="id34" class="calibre1"/>provided in <span class="strong"><strong class="calibre2">ticks</strong></span>. There are 20 <span class="strong"><strong class="calibre2">ticks</strong></span> every second. We can determine how long 6,000 ticks is with this math: 6000 ticks / 20 ticks/second = 300 seconds and 300 seconds / 60 seconds/minute = 5 minutes. From this calculation, you should be able to calculate an appropriate time period after which you want your server to autosave your progress. If your server lags whenever it saves your changes, then you may want to increase this number. A setting of <code class="email">72000</code> will cause a lag only once every hour. However, if the server crashes right before it saves, you may lose any progress that you made in the past hour.</li></ul></div></li><li class="listitem"><code class="email">spigot.yml:</code> This file is similar to <code class="email">bukkit.yml</code>. It has many settings and configurations that<a id="id35" class="calibre1"/> are only available when running a Spigot server. If you wish to configure any of these options, refer to the documentation at the top of the file.</li></ul></div></div>
<div class="book" title="Minecraft/Bukkit server commands"><div class="book" id="G6PI2-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Minecraft/Bukkit server commands</h1></div></div></div><p class="calibre8">We<a id="id36" class="calibre1"/> now have all the custom options set. Next, let's log on to the server and take a look at the in-game server commands.</p><p class="calibre8">To log in to your server, you will need to know the IP address of your computer. Later in this chapter, we will work through finding this essential information. However, I will assume that for now, you will be playing Minecraft on the same machine on which you are running your server. In this case, for the IP of the server, simply type <code class="email">localhost</code>. Once you are connected to the server, you will see that the Spigot server is essentially the same as the vanilla server because you do not have any plugins installed yet. The first indication that the server is running Bukkit is that you will have a few extra commands at your disposal.</p><p class="calibre8">Bukkit inherits all the Minecraft server commands. If you have ever played on a Minecraft server, then you have probably already used some of these commands. In case you have not, I will explain some of the useful ones. These commands can be typed into the <span class="strong"><strong class="calibre2">console</strong></span> or an in-game console. By "console", I am referring to the command prompt that is <a id="id37" class="calibre1"/>running your server. Bukkit has a built-in permissions system that limits players from using specific commands. </p><p class="calibre8">They cannot use a command if they do not have the necessary permissions. We will discuss this in detail in a later chapter, but for now, we will make your player an <span class="strong"><strong class="calibre2">operator</strong></span>, or <span class="strong"><strong class="calibre2">op</strong></span> for short. An <span class="strong"><strong class="calibre2">operator</strong></span> automatically<a id="id38" class="calibre1"/> has all the permissions and will be able to execute all the commands that will be presented. To make yourself an operator, issue the <code class="email">op</code> command to the console, as follows:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre2">&gt;op &lt;player&gt;</strong></span>
</pre></div><p class="calibre8">Replace <code class="email">&lt;player&gt;</code> with your player name. See the highlighted command in the following screenshot for an example:</p><div class="mediaobject"><img src="../images/00008.jpeg" alt="Minecraft/Bukkit server commands" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Once you<a id="id39" class="calibre1"/> have been <span class="strong"><em class="calibre9">Opped</em></span>, you are ready to test some of the in-game server commands. In order to understand how to use commands properly, you must understand the command syntax. Let's look at the <code class="email">gamemode</code> command as an example:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre2">gamemode &lt;0 | 1 | 2 | 3&gt; [player]</strong></span>
</pre></div><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">&lt; &gt;</code> indicates that it is a required argument.</li><li class="listitem"><code class="email">[ ]</code> indicates that it is an optional parameter. For this command, if the player parameter is not included, then the game mode of your own player will be set.</li><li class="listitem"><code class="email">|</code> is a known symbol for the word <span class="strong"><em class="calibre9">or</em></span>. So, <code class="email">&lt;0 | 1 | 2 | 3&gt;</code> indicates that 0, 1, 2, or 3 can be entered. They represent <span class="strong"><em class="calibre9">Survival</em></span>, <span class="strong"><em class="calibre9">Creative</em></span>, <span class="strong"><em class="calibre9">Adventure</em></span>, and <span class="strong"><em class="calibre9">Spectator</em></span> respectively.</li><li class="listitem">Parameters must always be typed in the same order in which they are displayed. Usually, if you enter an incorrect command, a help message will appear, reminding you of how to use the command properly.</li></ul></div><p class="calibre8">Note that when you issue an in-game command, you must start with <code class="email">/</code>, but when issuing a command from the console, <code class="email">/</code> must be left out. A proper use of the <code class="email">gamemode</code> command will be <code class="email">/gamemode 1</code>, which will set your game mode to <span class="strong"><strong class="calibre2">Creative</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00009.jpeg" alt="Minecraft/Bukkit server commands" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Another <a id="id40" class="calibre1"/>example of this command is <code class="email">/gamemode 2 Steve</code>, which will find the player whose username is <code class="email">Steve</code> and change his game mode to <span class="strong"><em class="calibre9">Adventure</em></span>.</p><p class="calibre8">Now that you understand the basic syntax for commands, you can learn how to use some other useful server commands from the following list. Most of these commands are also present in vanilla Minecraft. Only a few of them are specific to Bukkit servers:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">gamerule &lt;rule&gt; [true | false]</code><p class="calibre14">An example of this is <code class="email">/gamerule mobGriefing false</code>.</p><p class="calibre14">The rule parameter can be set to any of the following:</p><div class="book"><ul class="itemizedlist1"><li class="listitem"><code class="email">doMobSpawning</code>: This determines whether mobs will naturally spawn</li><li class="listitem"><code class="email">keepInventory</code>: This determines whether players will keep their items if they die</li><li class="listitem"><code class="email">mobGriefing</code>: This determines whether mobs, such as creepers, can destroy blocks</li><li class="listitem"><code class="email">doFireTick</code>: This determines whether fire should be spread</li><li class="listitem"><code class="email">doMobLoot</code>: This determines whether mobs should drop items</li><li class="listitem"><code class="email">doDaylightCycle</code>: This determines whether the day/night cycle is in effect</li></ul></div></li><li class="listitem"><code class="email">give &lt;player&gt; &lt;item&gt; [amount [data]]</code><div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/give Codisimus wool 3 14</code> gives Codisimus 3 red wool.</li></ul></div></li><li class="listitem"><code class="email">plugins </code>(applicable only in Bukkit)<div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/plugin</code>s or /<code class="email">pl</code> displays a list of all the plugins that are installed on the server.</li></ul></div></li><li class="listitem"><code class="email">reload </code>(applicable only in Bukkit)<div class="book"><ul class="itemizedlist1"><li class="listitem">For <a id="id41" class="calibre1"/>example, <code class="email">/reload</code> or <code class="email">/rl</code> disables all the plugins and re-enables them. This command is used to load new settings for a plugin without shutting down the entire server.</li></ul></div></li><li class="listitem"><code class="email">spawnpoint [player] [x y z]</code><div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/spawnpoint</code> allows you to spawn where you are standing when you die.</li></ul></div></li><li class="listitem"><code class="email">stop</code><div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/stop</code> saves your progress and shuts down the server. This is how you should stop the server to ensure that data is saved. You will lose data if you simply close the command prompt by clicking on <span class="strong"><strong class="calibre2">X.</strong></span></li></ul></div></li><li class="listitem"><code class="email">tell &lt;player&gt; &lt;message&gt;</code><div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/tell Steve my secret base is behind the waterfall</code> sends a message that only Steve will be able to see. Note that these messages will also be printed to the console.</li></ul></div></li><li class="listitem"><code class="email">time set &lt;day | night&gt;</code><div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/time set day</code> sets the time of the server to <code class="email">0</code> (daytime).</li></ul></div></li><li class="listitem"><code class="email">toggledownfall</code><div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/toggledownfall</code> stops or starts rain/snowfall.</li></ul></div></li><li class="listitem"><code class="email">tp [player] &lt;targetplayer&gt;</code><div class="book"><ul class="itemizedlist1"><li class="listitem">For example, <code class="email">/tp Steve Codisimus</code> teleports Steve to the location of Codisimus.</li></ul></div></li></ul></div><p class="calibre8">For more information regarding these and other commands, visit <a class="calibre1" href="http://minecraft.gamepedia.com/Commands">minecraft.gamepedia.com/Commands</a> and <a class="calibre1" href="http://wiki.bukkit.org/CraftBukkit_commands">wiki.bukkit.org/CraftBukkit_commands</a>. The commands and property files mentioned<a id="id42" class="calibre1"/> earlier give you a lot of control over <a id="id43" class="calibre1"/>how the server functions.</p></div>
<div class="book" title="Port forwarding" id="H5A41-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec12" class="calibre1"/>Port forwarding</h1></div></div></div><p class="calibre8">Where's the <a id="id44" class="calibre1"/>fun in running your own Minecraft server when no one else can log on to it? I will now explain how to allow your friends to connect to your server so that they can play with you. In order to do this, we must first find your IP address. Just like your place of residence has a street address, your computer has an address on the Internet. This is what your friends will type into their Minecraft client to find your server. To find the IP address, simply search <code class="email">IP</code> on Google. At the top of the results will be a line that states, "<span class="strong"><strong class="calibre2">Your public IP address is XX.XX.XXX.XX"</strong></span> (the X signs will be replaced by numbers, and its overall length may be different). You can also <a id="id45" class="calibre1"/>visit <a class="calibre1" href="http://www.whatismyip.com">www.whatismyip.com</a> to find out your IP address.</p><p class="calibre8">Once you have your IP address, try using it to connect to your server rather than using <code class="email">localhost</code>. If you are able to connect, then your friends will be able to do so too. If not, you will have to take additional steps to allow other players to connect to your server. This will be the case if your computer is attached to a router. We must let the router know that it should point other Minecraft players towards your computer, which is running the server. This <a id="id46" class="calibre1"/>process is called <span class="strong"><strong class="calibre2">port forwarding.</strong></span> To do so, we will first need some additional information.</p><p class="calibre8">We need to know the IP address of your computer on your local network. This IP address will be different from the address that we obtained earlier. We will also need to know the IP address of your router. To find out this information, open a new command prompt window. The command prompt can be found at the following path:</p><p class="calibre8">
<code class="email">Start Menu/All Programs/Accessories/Command Prompt</code>
</p><p class="calibre8">You can also search for <code class="email">cmd.exe</code> to find it. Once the command prompt is open, type in the following command:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong class="calibre2">&gt;ipconfig</strong></span>
</pre></div><p class="calibre8">Then, press the <span class="strong"><em class="calibre9">Enter</em></span> key. A screen will be displayed, which will be similar to the one shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00010.jpeg" alt="Port forwarding" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">In the <a id="id47" class="calibre1"/>previous image, the two IP addresses that you were looking for have been highlighted. The numbers will most likely be very similar to these sample numbers. <span class="strong"><strong class="calibre2">IPv4 Address</strong></span> is the address of your computer, and <span class="strong"><strong class="calibre2">Default Gateway</strong></span> is the address of your router. Make a note of both of these IPs.</p><p class="calibre8">Next, we will log in to your router. In a web browser, type the IP address of the router, which is <span class="strong"><strong class="calibre2">192.168.1.1</strong></span> in our example. If you do this correctly, then you will be prompted with a login form asking for a username and password. If you do not know this information, you can try to input <code class="email">admin</code> for both the fields. If this is unsuccessful, you will have to find the default username and password, which can be found in the paperwork that was provided with your router. This information can usually be found online as well by searching for the name of your router along with the term <code class="email">default login.</code>
</p><p class="calibre8">Once we are logged in to the router, we must find the area that includes the settings for port forwarding. There exist many brands and models of routers in the world, and all of them present this option differently. Therefore, I cannot provide a specific walkthrough of how this page is found. However, you will want to look for a tab that says something that includes the terms <span class="strong"><strong class="calibre2">Forwarding</strong></span>, <span class="strong"><strong class="calibre2">Port Forward</strong></span>, or <span class="strong"><strong class="calibre2">Applications &amp; Gaming</strong></span>. If you do not see any of these, then expand your search by exploring the advanced settings. Once you find the correct page, you will most likely see a table that looks like the following one:</p><div class="informalexample"><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Application Name</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">External Port</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Internal Port</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Protocol</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">IP Address</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">Bukkit Server</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">25565</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">25565</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">TCP and UDP</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">192.168.1.100</p>
</td></tr></tbody></table></div><p class="calibre8">Fill in the fields, as shown in the previous table. The layout and formatting will of course differ depending on your router, but the important details are that you forward port <code class="email">25565</code> to the IP address that you found earlier, which is <span class="strong"><strong class="calibre2">192.168.1.100</strong></span> in our example. Ensure that you<a id="id48" class="calibre1"/> save these new settings. If you have done this correctly, then you should now be able to connect to the server by using your public IP address.</p></div>
<div class="book" title="Summary" id="I3QM1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec13" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">You now have a Spigot server running on your PC. You can inform your friends of your IP address so that they can play on your new server with you. In this chapter, you became familiar with in-game commands and how to use them, and your server is ready to have Bukkit plugins installed onto it as soon as we program them. To prepare ourselves for programming these plugins, we will first become familiar with the Bukkit API and how it can be used.</p></div></body></html>