<html><head></head><body><div class="appendix" title="Appendix&#xA0;A.&#xA0;CLI References"><div class="titlepage"><div><div><h1 class="title"><a id="appA"/>Appendix A. CLI References</h1></div></div></div><p>To help keep things simple, here's a quick reference for the most common commands and operations used to manage the application server via the CLI. For the sake of brevity, only the <code class="literal">jboss-cli.sh</code> script (in the Linux environment) is mentioned. Windows users should just replace this file with the equivalent <code class="literal">jboss-cli.bat</code> file.</p><div class="section" title="Startup options"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec70"/>Startup options</h1></div></div></div><p>The <a id="id1417" class="indexterm"/>following commands can be used to start the CLI in a noninteractive way:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Pass script commands to the <code class="literal">jboss-cli</code> shell:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>./jboss-cli.sh --connect command=:shutdown</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Execute a CLI shell contained in a file:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>./jboss-cli.sh --file=test.cli</strong></span>
</pre></div></li></ul></div></div></div>
<div class="section" title="General commands"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec71"/>General commands</h1></div></div></div><p>The <a id="id1418" class="indexterm"/>following commands can be used to gather system information and set specific server properties:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Show environment information:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>version</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show the JNDI context:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=naming:jndi-view</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show the XML server configuration:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>:read-config-as-xml</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show the services registered in the container and their statuses:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/core-service=service-container:dump-services</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Set a system property:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/system-property=property1:add(value="value")</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show a system property:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/system-property=property1:read-resource</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show all system properties:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/core-service=platform-mbean/type=runtime:read-attribute(name=system-properties)</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Remove a system property:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/system-property=property1:remove</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Change<a id="id1419" class="indexterm"/> a socket binding port (for example, the <code class="literal">http</code> port):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/socket-binding-group=standard-sockets/socket-binding=http:write-attribute(name="port", value="8090")</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show the IP address of the public interface:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/interface=public:read-attribute(name=resolved-address)</strong></span>
</pre></div></li></ul></div></div>
<div class="section" title="The domain-mode commands"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec72"/>The domain-mode commands</h1></div></div></div><p>Prefix the <a id="id1420" class="indexterm"/>host name (and, if required, the server name) to indicate which host (or server name) you are issuing the command to. Examples:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Show the XML configuration from the host master:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/host=master:read-config-as-xml</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show the IP address of the public interface for the <code class="literal">server-one</code> server running on the host <code class="literal">master</code>:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/host=master/server=server-one/interface=public:read-attribute(name=resolved-address)</strong></span>
</pre></div></li></ul></div></div>
<div class="section" title="Commands related to application deployment"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec73"/>Commands related to application deployment</h1></div></div></div><p>The CLI can <a id="id1421" class="indexterm"/>also be used to deploy applications. The CLI assumes that the <code class="literal">MyApp.war</code> file is in the working directory outside of the <code class="literal">jboss-cli</code>. Here's a quick reference to the deploy commands:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">List of deployed applications:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>deploy</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Deploy an application on a standalone server:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>deploy MyApp.war</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Redeploy an application on a standalone server:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>deploy -f MyApp.war</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Undeploy an application:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>undeploy MyApp.war</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Deploy an application on all server groups:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>deploy MyApp.war --all-server-groups</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Deploy<a id="id1422" class="indexterm"/> an application on one or more server groups (separated by a comma):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>deploy application.ear --server-groups=main-server-group</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Undeploy an application from all server groups:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>undeploy application.ear --all-relevant-server-groups</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Undeploy an application from one or more server groups:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>undeploy as7project.war --server-groups=main-server-group</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Undeploy an application without deleting the content:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>undeploy application.ear --server-groups=main-server-group --keep-content</strong></span>
</pre></div></li></ul></div></div>
<div class="section" title="JMS"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec74"/>JMS</h1></div></div></div><p>Here, you can find the<a id="id1423" class="indexterm"/> JMS commands that can be used to create/remove JMS destinations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add a JMS queue:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-queue add –-queue-address=queue1 --entries=queues/queue1</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Remove a JMS queue:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-queue remove --queue-address=queue1</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Add a JMS topic:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-topic add –-topic-address=topic1 --entries=topics/topic1</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Remove a JMS topic:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-topic remove --topic-address=topic1</strong></span>
</pre></div></li></ul></div></div>
<div class="section" title="Datasources"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec75"/>Datasources</h1></div></div></div><p>This is a list of handy datasource commands<a id="id1424" class="indexterm"/> that can be issued using the datasource alias:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add a datasource:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>data-source add --jndi-name=java:/MySqlDS --name=MySQLPool --connection-url=jdbc:mysql://localhost:3306/MyDB --driver-name=mysql-connector-java-5.1.16-bin.jar --user-name=myuser --password=password –max-pool-size=30</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Remove <a id="id1425" class="indexterm"/>a datasource:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>data-source remove --name=java:/MySqlDS</strong></span>
</pre></div></li></ul></div><div class="section" title="Datasources (using operations on resources)"><div class="titlepage"><div><div><h2 class="title"><a id="ch11lvl2sec135"/>Datasources (using operations on resources)</h2></div></div></div><p>You can also <a id="id1426" class="indexterm"/>operate on a datasource using operations on the data sources subsystem:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">List the installed drivers:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=datasources:installed-drivers-list</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Add a datasource:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>data-source add --jndi-name=java:/MySqlDS --name=MySQLPool --connection-url=jdbc:mysql://localhost:3306/MyDB --driver-name=mysql-connector-java-5.1.30-bin.jar --user-name=myuser --password=password --max-pool-size=30</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Add an XA datasource (using an operation):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>xa-data-source add --name=MySQLPoolXA --jndi-name=java:/MySqlDSXA --driver-name=mysql-connector-java-5.1.30-bin.jar -xa-datasource-properties=[{ServerName=localhost}{PortNumber=3306}]</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Remove a datasource (using an operation):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=datasources/data-source=testDS:remove</strong></span>
</pre></div></li></ul></div></div></div>
<div class="section" title="Mod_cluster"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec76"/>Mod_cluster</h1></div></div></div><p>Mod_cluster management can be <a id="id1427" class="indexterm"/>carried out using the following CLI operations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">List the connected proxies:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=modcluster:list-proxies</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Show proxies' information:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=modcluster:read-proxies-info</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Add a proxy to the cluster:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=modcluster:add-proxy(host= CP15-022, port=9999)</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Remove a proxy:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=modcluster:remove-proxy(host=CP15-022, port=9999)</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Add a web context:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=modcluster:enable-context(context=/myapp, virtualhost=default-host)</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Disable a web context:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=modcluster:disable-context(context=/myapp, virtualhost=default-host)</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Stop a <a id="id1428" class="indexterm"/>web context:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>/subsystem=modcluster:stop-context(context=/myapp, virtualhost=default-host, waittime=50)</strong></span>
</pre></div></li></ul></div></div>
<div class="section" title="Batch"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec77"/>Batch</h1></div></div></div><p>Here's how<a id="id1429" class="indexterm"/> to handle batch processing with the CLI:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Start batching:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>batch</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Pause batching:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>holdback-batch</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Continue batching after a pause:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>batch</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">List of commands on the current batch stack:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>list-batch</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Clear the batch session of commands:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>clear-batch</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Execute batch commands on a stack:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>run-batch</strong></span>
</pre></div></li></ul></div></div>
<div class="section" title="Snapshots"><div class="titlepage"><div><div><h1 class="title"><a id="ch11lvl1sec78"/>Snapshots</h1></div></div></div><p>Snapshots <a id="id1430" class="indexterm"/>allow the storage and retrieval of the server configuration:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Take a snapshot of the configuration:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>:take-snapshot</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">List the available snapshots:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>:list-snapshots</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">Delete a snapshot:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>:delete-snapshot(name="20140814-234725965standalone-full-ha.xml")</strong></span>
</pre></div></li></ul></div></div></body></html>