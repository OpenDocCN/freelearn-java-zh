<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Apache Maven Quick Start"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Apache Maven Quick Start</h1></div></div></div><p>Apache Maven<a id="id0" class="indexterm"/> is popular as a build tool. However, in reality, it goes beyond being just a build tool. It provides a comprehensive build management platform. Prior to Maven, developers had to spend a lot of time in building a build system. There was no common interface. It differed from project to project, and each time a developer moved from one project to another, there was a learning curve. Maven filled this gap by introducing a common interface. It merely ended the era of the build engineer.</p><p>In this chapter, we will talk about the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Installing and configuring Maven on Ubuntu, Mac OS X, and Microsoft Windows</li><li class="listitem" style="list-style-type: disc">IDE integration</li><li class="listitem" style="list-style-type: disc">Tips and tricks for using Maven effectively</li></ul></div><div class="section" title="Installing Apache Maven"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>Installing Apache Maven</h1></div></div></div><p>Installing Maven <a id="id1" class="indexterm"/>on any platform is <a id="id2" class="indexterm"/>more than a straightforward task. At the time of writing this book, the latest version was 3.3.3, which is available <a id="id3" class="indexterm"/>for download at <a class="ulink" href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a>. This version requires JDK 1.7.0 or above.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>You should keep a note on the Java requirement for version 3.3.3, if you are planning to upgrade from versions 3.0.*, 3.1.*, or 3.2.*. Prior to Maven 3.3.x, the only requirement was JDK 1.5.0. or JDK 1.6.0 (for 3.2.*).</p></div></div><p>Apache Maven is an extremely lightweight distribution. It does not have any hard requirements on memory, disk space, or CPU. Maven itself is built on top of Java, and it would work on any operating system that runs <a id="id4" class="indexterm"/>
<span class="strong"><strong>Java virtual machine</strong></span> (<span class="strong"><strong>JVM</strong></span>).</p><div class="section" title="Installing Apache Maven on Ubuntu"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec07"/>Installing Apache Maven on Ubuntu</h2></div></div></div><p>Installing <a id="id5" class="indexterm"/>Maven on Ubuntu is a single line command. Proceed <a id="id6" class="indexterm"/>with the<a id="id7" class="indexterm"/> following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Run the following <code class="literal">apt-get</code> command in the command prompt. You need to have the <code class="literal">sudo</code> privileges to execute this:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ sudo apt-get install maven</strong></span>
</pre></div></li><li class="listitem">This takes a few minutes to complete. Upon the completion of the installation, you can run the following command to verify the installation:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn -version</strong></span>
</pre></div></li><li class="listitem">You should get an output similar to the following, if Apache Maven has been installed successfully:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn -version</strong></span>
<span class="strong"><strong>Apache Maven 3.3.3</strong></span>
<span class="strong"><strong>Maven home: /usr/share/maven</strong></span>
<span class="strong"><strong>Java version: 1.7.0_60, vendor: Oracle Corporation</strong></span>
<span class="strong"><strong>Java home: /usr/lib/jvm/java-7-oracle/jre</strong></span>
<span class="strong"><strong>Default locale: en_US, platform encoding: UTF-8</strong></span>
<span class="strong"><strong>OS name: "linux", version: "3.13.0-24-generic", arch: "amd64", family: "unix"</strong></span>
</pre></div></li><li class="listitem">Maven is installed under the <code class="literal">/usr/share/maven</code> directory. To check the directory structure behind the Maven installation directory, use the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ls /usr/share/maven</strong></span>
<span class="strong"><strong>bin  boot  conf  lib  man</strong></span>
</pre></div></li><li class="listitem">Maven configuration files can be found at <code class="literal">/etc/maven</code>, which can be listed using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ ls /etc/maven</strong></span>
<span class="strong"><strong>m2.conf  settings.xml</strong></span>
</pre></div></li></ol></div><p>If you don't want to work with the <code class="literal">apt-get</code> command, there is another way of installing Maven under any Unix-based operating system. We will discuss this in the next section. Since Mac OS X has a <a id="id8" class="indexterm"/>kernel built at the top of the Unix kernel, installing<a id="id9" class="indexterm"/> Maven on Mac OS X would be the same as<a id="id10" class="indexterm"/> installing it on any Unix-based operating system.</p></div><div class="section" title="Installing Apache Maven on Mac OS X"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>Installing Apache Maven on Mac OS X</h2></div></div></div><p>Most of the OS X distributions <a id="id11" class="indexterm"/>prior to OS X Mavericks had Apache<a id="id12" class="indexterm"/> Maven preinstalled. To verify that you've<a id="id13" class="indexterm"/> got Maven installed in your system, try out the following command. If it does not result in a version, then it means you do not have it installed:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn –version</strong></span>
</pre></div><p>The following steps will guide you through the Maven installation process on Max OS X Yosemite:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, we need to download the latest version of Maven. Throughout this book, we will use Maven 3.3.3, which was the latest version at the time of writing this book. Maven 3.3.3 ZIP distribution<a id="id14" class="indexterm"/> can be downloaded from <a class="ulink" href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a>.</li><li class="listitem">Unzip the downloaded ZIP file into <code class="literal">/usr/share/java</code>. You need to have the <code class="literal">sudo</code> privileges to execute this:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ sudo unzip  apache-maven-3.3.3-bin.zip -d /usr/share/java/</strong></span>
</pre></div></li><li class="listitem">In case you already have Maven installed in your system, use the following command to unlink. <code class="literal">/usr/share/maven</code> is only a symlink to the directory where Maven is installed:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ sudo unlink /usr/share/maven</strong></span>
</pre></div></li><li class="listitem">Use the following command to create a symlink to the latest Maven distribution that you just unzipped. You need to have the <code class="literal">sudo</code> privileges to execute this:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ sudo ln -s /usr/share/java/apache-maven-3.3.3  /usr/share/maven</strong></span>
</pre></div></li><li class="listitem">Use the following command to update the value of the <code class="literal">PATH</code> environment variable:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ export PATH=$PATH:/usr/share/maven/bin</strong></span>
</pre></div></li><li class="listitem">Use the following command to update (or set) the value of the <code class="literal">M2_HOME</code> environment variable:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ export M2_HOME=/usr/share/maven</strong></span>
</pre></div></li><li class="listitem">Verify the Maven installation with the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn -version</strong></span>
<span class="strong"><strong>  Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06;   2015-04-22T04:57:37-07:00)</strong></span>
<span class="strong"><strong>  Maven home: /usr/share/maven</strong></span>
<span class="strong"><strong>  Java version: 1.7.0_75, vendor: Oracle Corporation</strong></span>
<span class="strong"><strong>  Java home:   /Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Hom  e/jre</strong></span>
<span class="strong"><strong>  Default locale: en_US, platform encoding: UTF-8</strong></span>
<span class="strong"><strong>  OS name: "mac os x", version: "10.10.2", arch: "x86_64",   family: "mac"</strong></span>
</pre></div></li><li class="listitem">If you get the<a id="id15" class="indexterm"/> following error while<a id="id16" class="indexterm"/> running the preceding command, it <a id="id17" class="indexterm"/>means you have another version of Maven running in your system, and the <code class="literal">PATH</code> system variable includes the path to its <code class="literal">bin</code> directory. If that is the case, you need to clean out the value of the <code class="literal">PATH</code> system variable by removing the path to the old Maven installation:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>  -Dmaven.multiModuleProjectDirectory system property is not   set. Check $M2_HOME environment variable and mvn script match.</strong></span>
</pre></div></li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>Maven can also be installed on Mac OS X with Homebrew. This video explains the installation process <a id="id18" class="indexterm"/>in detail—</p><p>
<a class="ulink" href="https://www.youtube.com/watch?v=xTzLGcqUf8k">https://www.youtube.com/watch?v=xTzLGcqUf8k</a>
</p></div></div></div><div class="section" title="Installing Apache Maven on Microsoft Windows"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>Installing Apache Maven on Microsoft Windows</h2></div></div></div><p>First, we<a id="id19" class="indexterm"/> need <a id="id20" class="indexterm"/>to<a id="id21" class="indexterm"/> download the latest version of Maven. Apache Maven 3.3.3 ZIP distribution<a id="id22" class="indexterm"/> can be downloaded from <a class="ulink" href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a>. Then, we need to perform the following <a id="id23" class="indexterm"/>steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Unzip the<a id="id24" class="indexterm"/> downloaded ZIP file into the <code class="literal">C:\Program Files\ASF</code> directory.</li><li class="listitem">Set the <code class="literal">M2_HOME</code> environment variable and point it to <code class="literal">C:\Program Files\ASF\apache-maven-3.3.3</code>.</li><li class="listitem">Verify the Maven installation with the following command on the command prompt:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mvn –version</strong></span>
</pre></div></li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>To know more about how to set the <a id="id25" class="indexterm"/>environment variables on Microsoft Windows, refer to <a class="ulink" href="http://www.computerhope.com/issues/ch000549.htm">http://www.computerhope.com/issues/ch000549.htm</a>.</p></div></div></div></div></div>
<div class="section" title="Configuring the heap size"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Configuring the heap size</h1></div></div></div><p>Once you have Maven <a id="id26" class="indexterm"/>installed in your system, the very next step is to fine-tune it for an optimal performance. By default, the maximum heap allocation is 512 MB, which starts from 256 MB (<code class="literal">-Xms256m</code> to <code class="literal">-Xmx512m</code>). This default limit is not good enough to build a large, complex Java project, and it is recommended that you have at least 1024 MB of the maximum heap.</p><p>If you encounter <code class="literal">java.lang.OutOfMemoryError</code> at any point during a Maven build, then it is mostly due to a lack of memory. You can use the <code class="literal">MAVEN_OPTS</code> environment variable to set the maximum allowed heap size for Maven at a global level. The following command will set the heap size in any Unix-based operating system, including Linux and Mac OS X. Make sure that the value set as the maximum heap size does not exceed your system memory of the machine, which runs Maven:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ export MAVEN_OPTS="-Xmx1024m -XX:MaxPermSize=128m"</strong></span>
</pre></div><p>If you are on Microsoft Windows, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ set MAVEN_OPTS=-Xmx1024m -XX:MaxPermSize=128m</strong></span>
</pre></div><p>Here, <code class="literal">-Xmx</code> takes the maximum heap size and <code class="literal">-XX:MaxPermSize</code> takes the maximum <span class="strong"><strong>Permanent Generation</strong></span> (<span class="strong"><strong>PermGen</strong></span>)<a id="id27" class="indexterm"/> size.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>Maven runs as a<a id="id28" class="indexterm"/> Java process on JVM. As it proceeds with a build, it keeps on creating Java objects. These objects are stored in the memory allocated to Maven. This area of memory where Java objects are stored is known as heap. Heap is created at the JVM start and it increases as more and more objects are created up to the defined maximum limit. The <code class="literal">-Xms</code> JVM flag is used to instruct JVM about the minimum value that it should set at the time of creating the heap. The <code class="literal">-Xmx</code> JVM flag sets the maximum heap size.</p><p>PermGen is an area of memory managed by JVM, which stores the internal representations of Java classes. The maximum size of PermGen can be set by the <code class="literal">-XX:MaxPermSize</code> JVM flag.</p><p>When the Java virtual machine cannot allocate enough memory to Maven, it could result in an <code class="literal">OutOfMemoryError</code>. To know more<a id="id29" class="indexterm"/> about the Maven <code class="literal">OutOfMemoryError</code>, refer to <a class="ulink" href="https://cwiki.apache.org/confluence/display/MAVEN/OutOfMemoryError">https://cwiki.apache.org/confluence/display/MAVEN/OutOfMemoryError</a>.</p></div></div></div>
<div class="section" title="Hello Maven!"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Hello Maven!</h1></div></div></div><p>The easiest way to get started with a<a id="id30" class="indexterm"/> Maven project is to use the <code class="literal">generate</code> goal of the <code class="literal">archetype</code> plugin to generate a simple Maven project. Maven archetypes are discussed in detail in <a class="link" href="ch03.html" title="Chapter 3. Maven Archetypes">Chapter 3</a>, <span class="emphasis"><em>Maven Archetypes, </em></span>and plugins are covered in <a class="link" href="ch04.html" title="Chapter 4. Maven Plugins">Chapter 4</a>, <span class="emphasis"><em>Maven Plugins</em></span>.</p><p>Let's start with a simple example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn archetype:generate </strong></span>
<span class="strong"><strong>            -DgroupId=com.packt.samples  </strong></span>
<span class="strong"><strong>            -DartifactId=com.packt.samples.archetype </strong></span>
<span class="strong"><strong>            -Dversion=1.0.0 </strong></span>
<span class="strong"><strong>            -DinteractiveMode=false</strong></span>
</pre></div><p>This command will invoke the <code class="literal">generate</code> goal of the Maven <code class="literal">archetype</code> plugin to create a simple Java project. You will see that the following project structure is created with a sample <code class="literal">POM</code> file. The name of the root or the base directory is derived from the value of the <code class="literal">artifactId</code> parameter:</p><div class="informalexample"><pre class="programlisting">com.packt.samples.archetype 
               |-pom.xml
               |-src
               |-main/java/com/packt/samples/App.java
               |-test/java/com/packt/samples/AppTest.java    </pre></div><p>The sample <code class="literal">POM</code> file will only have a dependency to the <code class="literal">junit</code> JAR file with <code class="literal">test</code> as the scope:</p><div class="informalexample"><pre class="programlisting">&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.packt.samples&lt;/groupId&gt;
  &lt;artifactId&gt;com.packt.samples.archetype&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;
  &lt;name&gt;com.packt.samples.archetype&lt;/name&gt;
  &lt;url&gt;http://maven.apache.org&lt;/url&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;</pre></div><p>The generated <code class="literal">App.java</code> class<a id="id31" class="indexterm"/> will have the following template code. The name of the package is derived from the provided <code class="literal">groupId</code> parameter. If you want to have a different value as the package name, then you need to pass this value in the command itself as <code class="literal">-Dpackage=com.packt.samples.application</code>:</p><div class="informalexample"><pre class="programlisting">package com.packt.samples;

/**
 * Hello world!
 *
 */
public class App 
{
    public static void main( String[] args )
    {
        System.out.println( "Hello World!" );
    }
}</pre></div><p>To build the sample <a id="id32" class="indexterm"/>project, run the following command from the <code class="literal">com.packt.samples.archetype</code> directory, where the <code class="literal">pom.xml</code> file exists:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn clean install</strong></span>
</pre></div></div>
<div class="section" title="Convention over configuration"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Convention over configuration</h1></div></div></div><p>Convention <a id="id33" class="indexterm"/>over configuration <a id="id34" class="indexterm"/>is one of the main design philosophies behind Apache Maven. Let's go through a few examples.</p><p>A complete Maven project can be created using the following configuration file (<code class="literal">pom.xml</code>):</p><div class="informalexample"><pre class="programlisting">&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.packt&lt;/groupId&gt;
  &lt;artifactId&gt;sample-one&lt;/artifactId&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;
&lt;/project&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>The Maven <code class="literal">POM</code> file starts with the &lt;<code class="literal">project&gt;</code> element. Always define the <code class="literal">&lt;project&gt;</code> element with the schema. Some tools can't validate the file without it:</p><div class="informalexample"><pre class="programlisting">&lt;project xmlns=http://maven.apache.org/POM/4.0.0
         xmlns:xsi=………
         xsi:schemaLocation="…"&gt;</pre></div></div></div><p>The <code class="literal">pom.xml</code> file is the heart of any Maven project and is discussed in detail in <a class="link" href="ch02.html" title="Chapter 2. Understanding the Project Object Model (POM)">Chapter 2</a>, <span class="emphasis"><em>Understanding the Project Object Model (POM)</em></span>. Copy the previous configuration element and create a <code class="literal">pom.xml</code> file out of it. Then, place it in a directory called <code class="literal">chapter-01</code>, and then create the following child directories under it:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">chapter-01/src/main/java</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">chapter-01/src/test/java</code></li></ul></div><p>Now, you can place your Java code under <code class="literal">chapter-01/src/main/java</code> and test cases under <code class="literal">chapter-01/src/test/java</code>. Use the following command to run the Maven build from where the <code class="literal">pom.xml</code> is:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn clean install</strong></span>
</pre></div><p>This little configuration that you found in the sample <code class="literal">pom.xml</code> file is tied up with many conventions:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Java source code is available at <code class="literal">{base-dir}/src/main/java</code></li><li class="listitem" style="list-style-type: disc">Test cases are available at <code class="literal">{base-dir}/src/test/java</code></li><li class="listitem" style="list-style-type: disc">The type of the artifact produced is a JAR file</li><li class="listitem" style="list-style-type: disc">Compiled class files are copied to <code class="literal">{base-dir}/target/classes</code></li><li class="listitem" style="list-style-type: disc">The final artifact is copied to <code class="literal">{base-dir}/target</code></li><li class="listitem" style="list-style-type: disc"><a id="id35" class="indexterm"/><a class="ulink" href="http://repo.maven.apache.org/maven2">http://repo.maven.apache.org/maven2</a>, is used as the repository URL.</li></ul></div><p>If someone needs to <a id="id36" class="indexterm"/>override the default, conventional behavior<a id="id37" class="indexterm"/> of Maven, then it is possible too. The following sample <code class="literal">pom.xml</code> file shows how to override some of the preceding default values:</p><div class="informalexample"><pre class="programlisting">&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.packt&lt;/groupId&gt;
  &lt;artifactId&gt;sample-one&lt;/artifactId&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;

  &lt;build&gt;    
    &lt;sourceDirectory&gt;${basedir}/src/main/java&lt;/sourceDirectory&gt;              
    &lt;testSourceDirectory&gt;${basedir}/src/test/java               
                                         &lt;/testSourceDirectory&gt;     
    &lt;outputDirectory&gt;${basedir}/target/classes
                                             &lt;/outputDirectory&gt;     
  &lt;/build&gt;
&lt;/project&gt;</pre></div></div>
<div class="section" title="Maven repositories"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Maven repositories</h1></div></div></div><p>The magic behind <a id="id38" class="indexterm"/>how Maven finds and loads dependent jars for a given Maven project is Maven repositories. In the corresponding <code class="literal">pom.xml</code> file of your Maven project, under the <code class="literal">&lt;dependencies&gt;</code> element, you can define references to all the dependent jar files required to build your project successfully. Each dependency defined in the <code class="literal">pom.xml</code> file is identified uniquely using Maven coordinates. Maven coordinates uniquely identify a project, a dependency, or a plugin defined in a POM. Each entity is uniquely identified by the combination of a group identifier, an artifact identifier, and version (and, of course, with the packaging and the classifier). Maven coordinates are discussed in detail in <a class="link" href="ch02.html" title="Chapter 2. Understanding the Project Object Model (POM)">Chapter 2</a>, <span class="emphasis"><em>Understanding the Project Object Model (POM)</em></span>. Once Maven finds out all the required dependencies for a given project, it loads them to the local file system of Maven repositories, and adds them to the project classpath.</p><p>By convention, Maven<a id="id39" class="indexterm"/> uses <a class="ulink" href="http://repo.maven.apache.org/maven2">http://repo.maven.apache.org/maven2</a> as the repository. If all the artifacts required to build the project are present in this repository, then those will be loaded into the local file system or the local Maven repository, which is, by default, at <code class="literal">USER_HOME/.m2/repository</code>. You can add custom repositories at the project level under the <code class="literal">&lt;repositories&gt;</code> element of the <code class="literal">pom.xml</code> file or at the global level under the <code class="literal">MAVEN_HOME/conf/settings.xml</code> file.</p></div>
<div class="section" title="IDE integration"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>IDE integration</h1></div></div></div><p>Most of the hardcore<a id="id40" class="indexterm"/> developers never want to leave their IDE. Not just for coding, but for building, deploying, testing, and for everything if possible - they would happily do these from the IDE itself. Most of the popular IDEs support Maven integration, and they have developed their own plugins to support Maven.</p><div class="section" title="NetBeans integration"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>NetBeans integration</h2></div></div></div><p>NetBeans 6.7 or newer ships with<a id="id41" class="indexterm"/> in-built Maven integration, while <a id="id42" class="indexterm"/>NetBeans 7.0 has newer versions that bundle a complete copy of Maven 3 and runs it for builds just like you would from the command line. For version 6.9 or older, you have to download a Maven build and configure the IDE to run this. More information corresponding to<a id="id43" class="indexterm"/> Maven and NetBeans integration is available at <a class="ulink" href="http://wiki.netbeans.org/MavenBestPractices">http://wiki.netbeans.org/MavenBestPractices</a>.</p></div><div class="section" title="IntelliJ IDEA integration"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>IntelliJ IDEA integration</h2></div></div></div><p>IntelliJ IDEA<a id="id44" class="indexterm"/> has inbuilt <a id="id45" class="indexterm"/>support for Maven; hence, you don't need to perform any additional steps to install it. More information corresponding to Maven and IntelliJ IDEA integration<a id="id46" class="indexterm"/> is available at <a class="ulink" href="http://wiki.jetbrains.net/intellij/Creating_and_importing_Maven_projects">http://wiki.jetbrains.net/intellij/Creating_and_importing_Maven_projects</a>.</p></div><div class="section" title="Eclipse integration"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>Eclipse integration</h2></div></div></div><p>The M2Eclipse project <a id="id47" class="indexterm"/>provides first class Maven support through the <a id="id48" class="indexterm"/>Eclipse IDE. More information corresponding to Maven and the Eclipse integration <a id="id49" class="indexterm"/>is available at <a class="ulink" href="https://www.eclipse.org/m2e/">https://www.eclipse.org/m2e/</a>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>The book <span class="emphasis"><em>Maven for Eclipse</em></span>, published by <span class="emphasis"><em>Packt Publishing</em></span>, discusses in detail Maven and Eclipse integration at <a class="ulink" href="https://www.packtpub.com/application-development/maven-eclipse">https://www.packtpub.com/application-development/maven-eclipse</a>.</p></div></div></div></div>
<div class="section" title="Troubleshooting"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Troubleshooting</h1></div></div></div><p>If everything works fine, we should <a id="id50" class="indexterm"/>never have to worry about troubleshooting. However, most of the time this is not the case. A Maven build can fail for many reasons, some of which are under your control and also out of your control. Knowing proper troubleshooting tips helps you to pinpoint the exact problem. The following section lists some of the most used troubleshooting tips. We will expand the list as we proceed in this book.</p><div class="section" title="Enabling Maven debug level logs"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>Enabling Maven debug level logs</h2></div></div></div><p>Once the Maven debug level <a id="id51" class="indexterm"/>logging is enabled, it will print all the actions that it takes during the build process. To enable debug level logging, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn clean install –X</strong></span>
</pre></div></div><div class="section" title="Building a dependency tree"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>Building a dependency tree</h2></div></div></div><p>If you find any issue with any<a id="id52" class="indexterm"/> dependency in your Maven project, the first step is to build a dependency tree. This shows where each dependency comes from. To build the dependency tree, run the following command against your project <code class="literal">POM</code> file:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn dependency:tree</strong></span>
</pre></div><p>The following <a id="id53" class="indexterm"/>shows the truncated output of the previous command executed against the Apache Rampart project:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[INFO] --------------------------------------------------------------</strong></span>
<span class="strong"><strong>[INFO] Building Rampart - Trust 1.6.1-wso2v12</strong></span>
<span class="strong"><strong>[INFO] --------------------------------------------------------------</strong></span>
<span class="strong"><strong>[INFO] </strong></span>
<span class="strong"><strong>[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ rampart-trust ---</strong></span>
<span class="strong"><strong>[INFO] org.apache.rampart:rampart-trust:jar:1.6.1-wso2v12</strong></span>
<span class="strong"><strong>[INFO] +- org.apache.rampart:rampart-policy:jar:1.6.1-wso2v12:compile</strong></span>
<span class="strong"><strong>[INFO] +- org.apache.axis2:axis2-kernel:jar:1.6.1-wso2v10:compile</strong></span>
<span class="strong"><strong>[INFO] |  +- org.apache.ws.commons.axiom:axiom-api:jar:1.2.11-wso2v4:compile (version managed from 1.2.11)</strong></span>
<span class="strong"><strong>[INFO] |  |  \- jaxen:jaxen:jar:1.1.1:compile</strong></span>
<span class="strong"><strong>[INFO] |  +- org.apache.ws.commons.axiom:axiom-impl:jar:1.2.11-wso2v4:compile (version managed from 1.2.11)</strong></span>
<span class="strong"><strong>[INFO] |  +- org.apache.geronimo.specs:geronimo-ws-metadata_2.0_spec:jar:1.1.2:compile</strong></span>
<span class="strong"><strong>[INFO] |  +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1:compile</strong></span>
<span class="strong"><strong>[INFO] |  +- javax.servlet:servlet-api:jar:2.3:compile</strong></span>
<span class="strong"><strong>[INFO] |  +- commons-httpclient:commons-httpclient:jar:3.1:compile</strong></span>
<span class="strong"><strong>[INFO] |  |  \- commons-codec:commons-codec:jar:1.2:compile</strong></span>
<span class="strong"><strong>[INFO] |  +- commons-fileupload:commons-fileupload:jar:1.2:compile</strong></span>
</pre></div></div><div class="section" title="Viewing all the environment variables and system properties"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>Viewing all the environment variables and system properties</h2></div></div></div><p>If you have<a id="id54" class="indexterm"/> multiple JDKs installed in <a id="id55" class="indexterm"/>your system, you may wonder what is being used by Maven. The following command will display all the environment variables and system properties set for a given Maven project:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn help:system</strong></span>
</pre></div><p>The following is the truncated output of the previous command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>======================Platform Properties Details====================

=====================================================================
System Properties
=====================================================================

java.runtime.name=Java(TM) SE Runtime Environment
sun.boot.library.path= /Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home/jre/lib
java.vm.version= 24.75-b04
awt.nativeDoubleBuffering=true
gopherProxySet=false
mrj.build=11M4609
java.vm.vendor=Apple Inc.
java.vendor.url=http://www.apple.com/
guice.disable.misplaced.annotation.check=true
path.separator=:
java.vm.name=Java HotSpot(TM) 64-Bit Server VM
file.encoding.pkg=sun.io
sun.java.launcher=SUN_STANDARD
user.country=US
sun.os.patch.level=unknown

========================================================
Environment Variables
========================================================

JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home
HOME=/Users/prabath
TERM_SESSION_ID=C2CEFB58-4705-4C67-BE1F-9E4179F96391
M2_HOME=/usr/share/maven/maven-3.3.3/
COMMAND_MODE=unix2003
Apple_PubSub_Socket_Render=/tmp/launch-w7NZbG/Render
LOGNAME=prabath
USER=prabath
</strong></span>
</pre></div></div><div class="section" title="Viewing the effective POM file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>Viewing the effective POM file</h2></div></div></div><p>Maven uses default<a id="id56" class="indexterm"/> values for configuration parameters when they are not overridden in the configuration. This is exactly what we discussed under the <span class="emphasis"><em>Convention over configuration</em></span> section. If we take the same sample <code class="literal">POM</code> file that we used before in this chapter, we can see how the effective <code class="literal">POM</code> file would look using the following command. This is also the best way to see what default values are being used by Maven:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn help:effective-pom</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>More details about the <code class="literal">effective-pom</code> command are discussed in <a class="link" href="ch02.html" title="Chapter 2. Understanding the Project Object Model (POM)">Chapter 2</a>, <span class="emphasis"><em>Understanding the Project Object Model (POM)</em></span>.</p></div></div></div><div class="section" title="Viewing the dependency classpath"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>Viewing the dependency classpath</h2></div></div></div><p>The following <a id="id57" class="indexterm"/>command will list all the JAR files and directories in the build <code class="literal">classpath</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ mvn dependency:build-classpath</strong></span>
</pre></div><p>The following shows the truncated output of the previous command executed against the Apache Rampart project:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[INFO] --------------------------------------------------------------
[INFO] Building Rampart - Trust 1.6.1-wso2v12
[INFO] --------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:build-classpath (default-cli) @ rampart-trust ---
[INFO] Dependencies classpath:
/Users/prabath/.m2/repository/bouncycastle/bcprov-jdk14/140/bcprov-jdk14-140.jar:/Users/prabath/.m2/repository/commons-cli/commons-cli/1.0/commons-cli-1.0.jar:/Users/prabath/.m2/repository/commons-codec/commons-codec/1.2/commons-codec-1.2.jar:/Users/prabath/.m2/repository/commons-collections/commons-collections/3.1/commons-collections-3.1.jar
</strong></span>
</pre></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Summary</h1></div></div></div><p>This chapter focused on building a basic foundation around Maven to bring all the readers into a common ground. It started with explaining the basic steps to install and configure Maven under Ubuntu, Mac OS X, and Microsoft Windows operating systems. The latter part of the chapter covered some of the common useful Maven tips and tricks. As we proceed with the book, some of the concepts touched in this chapter will be discussed in detail.</p><p>In the next chapter, we will discuss <span class="strong"><strong>Maven Project Object Model</strong></span> (<span class="strong"><strong>POM</strong></span>) in detail.</p></div></body></html>