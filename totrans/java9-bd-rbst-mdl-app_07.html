<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Experimenting with the Java Shell</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In the previous chapter, we explored how to migrate pre-Java 9 applications to the new Java platform. We examined several issues that might cause your current applications to have problems running on Java 9. We started with a review of Project Jigsaw and then looked at how modules fit into the new Java platform. We provided you with insights and processes to get your Java 8 code working with Java 9. Specifically, we <span class="calibre7">provided tips for</span> migration <span class="calibre7">planning, shared advice from</span> Oracle <span class="calibre7">regarding migration, and shared tools that you can use to help you as you get started with Java 9.</span></p>
<p class="mce-root">In this chapter, we will take our first look at the new command line, <strong class="calibre8">read-eval-print loop</strong> (also referred to as <strong class="calibre8">REPL</strong>) tool in Java 9, the <strong class="calibre8">Java Shell</strong> (<strong class="calibre8">JShell</strong>). We will start with introductory information regarding the tool, the read-eval-print loop concept, and move into the commands and command-line options for use with JShell. We will take a practitioner's approach to our review of the Java Shell and include examples you can try on your own.</p>
<p class="mce-root">The following topics are covered in this chapter:</p>
<ul class="calibre13">
<li class="calibre14">What is JShell?</li>
<li class="calibre14">Getting started with JShell</li>
<li class="calibre14">Practical uses of JShell</li>
<li class="calibre14">Working with scripts</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">What is JShell?</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JShell is a new tool introduced with Java 9. It is an interactive read-eval-print loop tool that is used to evaluate the following Java programming language components--declarations, statements, and expressions. It has its own API so that it can be used by external applications.</p>
<div class="packt_infobox">Read-Eval-Print Loop is often referred to as REPL, taking the first letter from each word in the phrase. It is also knows language shell or interactive top-level.</div>
<p class="mce-root">The introduction of JShell was a result of <strong class="calibre8">Java Enhancement Program</strong> (<strong class="calibre8">JEP</strong>) 222. Here are the stated goals of this JEP in regards to the Java Shell command-line tool:</p>
<ul class="calibre13">
<li class="calibre14">Facilitate rapid investigation</li>
<li class="calibre14">Facilitate rapid coding</li>
<li class="calibre14">Provide an edit history</li>
</ul>
<p class="mce-root">The rapid investigation and coding listed previously includes statements and expressions. Impressively, these statements and expressions do not need to be part of a method. Furthermore, variables and methods are not required to be part of a class, making this tool especially dynamic.</p>
<p class="mce-root">In addition, the following listed features were included to make JShell much easier to use and to make your time using JShell as time-efficient as possible:</p>
<ul class="calibre13">
<li class="calibre14">Tab-completion</li>
<li class="calibre14">Auto-completion for end-of-statement semicolons</li>
<li class="calibre14">Auto-completion for imports</li>
<li class="calibre14">Auto-completion for definitions</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting Started with JShell</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JShell is a command-line tool that is located in the <kbd class="calibre16">/bin</kbd> folder. The syntax for this tool is <kbd class="calibre16">jshell &lt;options&gt; &lt;load files&gt;</kbd>. As you can see here, there are several options that can be used with this tool:</p>
<div class="mce-root1"><img src="Images/b2ef8526-1897-4cef-9f78-50c6ccfcdedb.png" width="670" height="498" class="calibre85"/></div>
<p class="mce-root">You have already seen the <kbd class="calibre16">-h</kbd> option, that we executed with <kbd class="calibre16">jshell -h</kbd>. This provided the listing of JShell options.</p>
<p class="mce-root">To log into your JShell, you simply use the <kbd class="calibre16">jshell</kbd> command. You will see that the prompt in the command window changes accordingly:</p>
<div class="mce-root1"><img src="Images/7f5ddaac-4a99-48a4-98f4-a51c35d46e2d.png" width="415" height="132" class="calibre86"/></div>
<p class="mce-root">Exiting the shell is as easy as entering <kbd class="calibre16">/exit</kbd>. Once inside the JShell, you can enter any of the following commands:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Command</strong></td>
<td class="calibre33"><strong class="calibre3">Functionality</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/drop</kbd></td>
<td class="calibre33">
<p class="mce-root3">Use this command to delete a source entry that is referenced by <kbd class="calibre16">name</kbd> or <kbd class="calibre16">id</kbd>. Here is the syntax:</p>
<pre class="mce-root4">    /drop &lt;name or id&gt;</pre></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/edit</kbd></td>
<td class="calibre33">
<p class="mce-root3">With this command, you can edit a source entry using a <kbd class="calibre16">name</kbd> or <kbd class="calibre16"><span class="calibre5">id</span></kbd> reference. Here is the syntax:</p>
<pre class="mce-root4">    /edit &lt;name or id&gt;</pre></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/env</kbd></td>
<td class="calibre33">
<p class="mce-root3">This powerful command allows you to view or change the evaluation context. Here is the syntax:</p>
<pre class="mce-root4">    /env [-class-path &lt;path&gt;] [-module-path &lt;path&gt;]<br class="calibre2"/>     [-add-modules &lt;modules]</pre></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/exit</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command is used to exit the JShell. The syntax is simply <kbd class="calibre16">/exit</kbd> without any options or parameters available.</p>
</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/history</kbd></td>
<td class="calibre33">
<p class="mce-root3">The history command provides a history of what you have typed. The syntax is simply <kbd class="calibre16">/history</kbd> without any options or parameters available.</p>
</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/&lt;id&gt;</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command is used to rerun a previous snippet by referencing the <kbd class="calibre16">id</kbd>. Here is the syntax: <kbd class="calibre16">/&lt;id&gt;</kbd></p>
<div class="packt_tip">You can also run a specific snippet by referencing the <em class="calibre22">n</em><sup class="calibre87">th</sup> previous snippet with <kbd class="calibre39">/-&lt;n&gt;</kbd>.</div>
</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/imports</kbd></td>
<td class="calibre33">
<p class="mce-root3">You can use this command to list the imported items. The syntax is <kbd class="calibre16">/imports</kbd> and it does not accept any options or parameters.</p>
</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/list</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command will list the source you typed. Here is the syntax:</p>
<pre class="mce-root4">    /list [&lt;name or id&gt; | -all | -start]</pre></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/methods</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command lists all declared methods as well as their signatures. Here is the syntax:</p>
<pre class="mce-root4">    /methods [&lt;name or id&gt; | -all | -start]</pre></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/open</kbd></td>
<td class="calibre33">
<p class="mce-root3">Using this command, you can open a file as source input. Here is the syntax:</p>
<pre class="mce-root4">    /open &lt;file&gt;</pre></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/reload</kbd></td>
<td class="calibre33">
<p class="mce-root3">The reload command gives you the ability to reset and replay relevant history. Here is the syntax:</p>
<pre class="mce-root4">    /reload [-restore] [-quiet]  [-class-path <br class="calibre2"/>     &lt;path&gt;] [-module-path &lt;path&gt;]</pre></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/reset</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command resets the JShell. Here is the syntax:</p>
<pre class="mce-root4">    /reset [-class-path &lt;path&gt;] [-module-path <br class="calibre2"/>     &lt;path&gt;] [-add-modules &lt;modules]</pre></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/save</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command saves the snippet source to a file specified by you. Here is the syntax:</p>
<pre class="mce-root4">    /save [-all | -history | -start] &lt;file&gt;</pre></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/set</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command is used to set the JShell configuration information. Here is the syntax:</p>
<pre class="mce-root4">    /set editor | start | feedback | mode | prompt | <br class="calibre2"/>     truncation | format</pre></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">/types</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command simply lists declared types. Here is the syntax:</p>
<pre class="mce-root4">    /types [&lt;name or id&gt; | -all | -start]</pre></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">/vars</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command lists all declared variables as well as their values. Here is the syntax:</p>
<pre class="mce-root4">    /vars [&lt;name or id&gt; | -all | -start]</pre></td>
</tr>
<tr class="calibre35">
<td class="calibre33"><kbd class="calibre16">/!</kbd></td>
<td class="calibre33">
<p class="mce-root3">This command will rerun the last snippet. The syntax is simply <kbd class="calibre16">/!</kbd></p>
</td>
</tr>
</tbody>
</table>
<div class="packt_infobox">Several of the previously listed commands use the term <strong class="calibre3">snippet</strong>. In the context of Java 9 and JShell, a snippet is one of the following:<br class="calibre2"/>
- ClassDeclaration<br class="calibre2"/>
- Expression<br class="calibre2"/>
- FieldDeclaration<br class="calibre2"/>
- ImportDeclaration<br class="calibre2"/>
- InterfaceDeclaration<br class="calibre2"/>
- MethodDeclaration</div>
<p class="mce-root">Entering the <kbd class="calibre16">/help</kbd> or <kbd class="calibre16">/?</kbd> command in the JShell provides a complete list of commands and syntax that can be used in the shell. That list is provided as follows:</p>
<div class="mce-root1"><img src="Images/084a5b98-bc86-4a0c-b134-a3fd11b3dc3e.png" width="823" height="983" class="calibre88"/></div>
<p class="mce-root">The <kbd class="calibre16">/help</kbd> command can be especially helpful if you are still new to JShell. As you can see in the following screenshot, we can obtain an introduction to JShell by simply entering the <kbd class="calibre16">/help intro</kbd> command:</p>
<div class="mce-root1"><img src="Images/07e9a5bb-32ba-4f1d-82b9-18e618f74b78.png" width="823" height="308" class="calibre89"/></div>
<p class="mce-root">If you find yourself using JShell often you might benefit from one or more of the following listed shortcuts. These can be listed at any time from within JShell by using the <kbd class="calibre16">/help shortcuts</kbd> command:</p>
<div class="mce-root1"><img src="Images/98e2d38a-2dad-4a29-9d67-e22558cb2864.png" width="823" height="432" class="calibre90"/></div>
<p class="mce-root">Additional help can be obtained from within the JShell by using the <kbd class="calibre16">/help</kbd> command followed by the command you want additional help on. For example, entering <kbd class="calibre16">/help reload</kbd> provides detailed information regarding the <kbd class="calibre16">/reload</kbd> command. That information is provided as follows:</p>
<div class="mce-root1"><img src="Images/18cb33e6-5645-4714-8ffc-5c51852194f8.png" width="823" height="561" class="calibre91"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Practical uses of JShell</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Whether you are a new or seasoned developer or just new to Java, you are bound to find the JShell very useful. In this section, we will look at some practical uses of JShell. Specifically, we will cover:</p>
<ul class="calibre13">
<li class="calibre14">Feedback modes</li>
<li class="calibre14">Listing your assets</li>
<li class="calibre14">Editing in the JShell</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Feedback modes</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Command-line tools usually provide relatively sparse feedback in an effort to not overcrowd the screen or otherwise become a nuisance to developers. JShell has several feedback modes in addition to giving developers the ability to create their own custom modes.</p>
<p class="mce-root">As you can see from the following screenshot, there are four feedback modes--<kbd class="calibre16">concise</kbd>, <kbd class="calibre16">normal</kbd>, <kbd class="calibre16">silent</kbd>, and <kbd class="calibre16">verbose</kbd>. Here, we entered the <kbd class="calibre16">/set feedback</kbd> command without any parameters to list the feedback modes as well as to identify what the current feedback mode is. The first line of output displays the command-line command and argument set that would be used to set the mode to the currently set mode. So, in the following screenshot, the current feedback mode is set to <kbd class="calibre16">verbose</kbd> and the other three modes are listed:</p>
<div class="mce-root1"><img src="Images/e7db45aa-8043-4224-b6a2-ea6d0f3d5854.png" width="505" height="211" class="calibre92"/></div>
<p class="mce-root">We can dictate which mode we want to enter when we first enter JShell by including an option when we launch JShell. Here are the command-line options:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Command-line command and option</strong></td>
<td class="calibre33"><strong class="calibre3">Feedback mode</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">jshell -q</kbd></td>
<td class="calibre33"><kbd class="calibre16">concise</kbd></td>
</tr>
<tr class="calibre32">
<td class="calibre33"><kbd class="calibre16">jshell -n</kbd></td>
<td class="calibre33"><kbd class="calibre16">normal</kbd></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><kbd class="calibre16">jshell -s</kbd></td>
<td class="calibre33"><kbd class="calibre16">silent</kbd></td>
</tr>
<tr class="calibre41">
<td class="calibre33"><kbd class="calibre16">jshell -v</kbd></td>
<td class="calibre33"><kbd class="calibre16">verbose</kbd></td>
</tr>
</tbody>
</table>
<p class="mce-root">Â </p>
<p class="mce-root">You will notice that we use <kbd class="calibre16">-q</kbd> for <kbd class="calibre16">concise</kbd> mode instead of <kbd class="calibre16">-c</kbd>. The <kbd class="calibre16">-c</kbd> option has the <kbd class="calibre16">-c&lt;flag&gt;</kbd> syntax and is used to pass <kbd class="calibre16">&lt;flag&gt;</kbd> to the compiler.</p>
<p class="mce-root">The best way to review the differences between the feedback modes is to use examples. Starting with the <kbd class="calibre16">normal</kbd> mode, we will execute command-line commands to accomplish the following ordered feedback demonstration:</p>
<ol class="calibre18">
<li class="chapter">Create a variable.</li>
<li class="chapter">Update the variable's value.</li>
<li class="chapter">Create a method.</li>
<li class="chapter">Update the method.</li>
<li class="chapter">Run the method.</li>
</ol>
<p class="mce-root">To start our first test, we will execute the <kbd class="calibre16">/set feedback normal</kbd> command at the <kbd class="calibre16">jshell&gt;</kbd> prompt, which sets the JShell feedback mode to <kbd class="calibre16">normal</kbd>. After entering the <kbd class="calibre16">normal</kbd> feedback mode, we will enter the necessary commands to run our demonstration:</p>
<div class="mce-root1"><img src="Images/63d1ae8e-71dc-4ada-a927-c924370ca0d4.png" width="766" height="425" class="calibre93"/></div>
<p class="mce-root">After entering <kbd class="calibre16">normal</kbd> feedback mode, we entered <kbd class="calibre16">int myVar = 3</kbd> to and received <kbd class="calibre16">myVar ==&gt; 3</kbd> as feedback. In our next command, we changed the value of the same variable and received the same output with the new value. Our next statement, <kbd class="calibre16">void quickMath() {System.out.println("Your result is " + (x*30 + 19));}</kbd>, used a variable that was not declared and you see the resulting two-part feedback--one part indicating that the method was created and the other to inform that the method cannot be invoked until the undeclared variable is declared. Next, we changed our method to include the <kbd class="calibre16">myVar</kbd> variable and the feedback reported that the method was modified. Our last step was to run the method using <kbd class="calibre16">quickMath();</kbd> and the results are as we expected.</p>
<p class="mce-root">Let's try this same feedback demonstration in <kbd class="calibre16">concise</kbd> mode:</p>
<div class="mce-root1"><img src="Images/b8385029-96cc-422b-a751-d946f375d386.png" width="766" height="283" class="calibre94"/></div>
<p class="mce-root">As you can see from the preceding screenshot, the <kbd class="calibre16">concise</kbd> feedback mode provides us with much less feedback. We created and modified the variables and received no feedback. When we created the method with an undeclared variable, we received the same feedback that we did in <kbd class="calibre16">normal</kbd> mode. We updated the method without confirmation or other feedback.</p>
<p class="mce-root">Our next use of the feedback demonstration will be in <kbd class="calibre16">silent</kbd> mode:</p>
<div class="mce-root1"><img src="Images/a4ba1e21-1332-49e1-89f4-6a9e7f9d72d4.png" width="766" height="258" class="calibre95"/></div>
<p class="mce-root">When we entered <kbd class="calibre16">silent</kbd> feedback mode, as you can see in the preceding screenshot, the JShell prompt changed from <kbd class="calibre16">jshell&gt;</kbd> to <kbd class="calibre16">-&gt;</kbd>. There was no feedback provided when we created the <kbd class="calibre16">myVar</kbd> variable, modified the <kbd class="calibre16">myVar</kbd> variable, or created the <kbd class="calibre16">quickMath()</kbd> method. We intentionally created the <kbd class="calibre16">quickMath()</kbd> method to use an undeclared variable. Because we were in <kbd class="calibre16">silent</kbd> feedback mode, we were not informed that the method had an undeclared variable. Based on this lack of feedback, we ran the method and were not provided any output or feedback. Next, we updated the method to include the <kbd class="calibre16">myVar</kbd> declared variable and then ran the method.</p>
<div class="packt_infobox">The <kbd class="calibre39">silent</kbd> feedback mode might seem pointless as no feedback is provided, but there is a great utility with this mode. Using the <kbd class="calibre39">silent</kbd> mode might be appropriate for pipelining or simply when you want to minimize the amount of terminal output. You can include specific, conditional, outputs with implicit <kbd class="calibre39">System.out.println</kbd> commands, as an example.</div>
<p class="mce-root">Our last use of the feedback demonstration is in <kbd class="calibre16">verbose</kbd> feedback mode. This feedback mode, as you would assume from its name, provides the most amount of feedback. Here are our test results:</p>
<div class="mce-root1"><img src="Images/7cea66a2-3673-40a7-8b2c-1482387f1eed.png" width="766" height="485" class="calibre96"/></div>
<p class="mce-root">In our feedback demonstration, using <kbd class="calibre16">verbose</kbd> feedback mode, we receive a bit more feedback as well as a nicer format for the feedback.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Creating a custom feedback mode</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">While the internal feedback modes (<kbd class="calibre16">normal</kbd>, <kbd class="calibre16">concise</kbd>, <kbd class="calibre16">silent</kbd>, and <kbd class="calibre16">verbose</kbd>) cannot be modified, you can create your own custom feedback mode. The first step in this process is to copy an existing mode. The following example demonstrates how to copy the <kbd class="calibre16">verbose</kbd> mode to a <kbd class="calibre16">myCustom</kbd> mode with the <kbd class="calibre16">/set mode myCustom verbose -command</kbd> command string:</p>
<div class="mce-root1"><img src="Images/43b7b0fb-3b5e-441b-b7e8-4897f1028fbc.png" width="529" height="124" class="calibre97"/></div>
<p class="mce-root">We used the <kbd class="calibre16">-command</kbd> option to ensure we would receive the command feedback. You can make various changes to your feedback mode using the <kbd class="calibre16">/set</kbd> command along with one of the options listed in the following screenshot:</p>
<div class="mce-root1"><img src="Images/4f11b5e1-9160-49b2-8c0a-91474807a6ca.png" width="835" height="572" class="calibre98"/></div>
<p class="mce-root">As an example, let's walk through the truncation setting that mandates how many characters are displayed on each output line. Using the <kbd class="calibre16">/set truncation</kbd> command, as illustrated in the following screenshot, shows the current truncation settings:</p>
<div class="mce-root1"><img src="Images/e851d262-f81a-4394-bb30-20218c03d913.png" width="835" height="266" class="calibre99"/></div>
<p class="mce-root">As you can see, our <kbd class="calibre16">myCustom</kbd> feedback mode has a truncation of <kbd class="calibre16">80</kbd>. We will change that to <kbd class="calibre16">60</kbd> with the <kbd class="calibre16">/set truncation myCustom 60</kbd> command and then use the <kbd class="calibre16">/set truncation</kbd> command for verification:</p>
<div class="mce-root1"><img src="Images/a8610c05-d29c-4789-86d4-4b862961182d.png" width="835" height="284" class="calibre100"/></div>
<p class="mce-root">As you can see in the previous screenshot, the truncation for our <kbd class="calibre16">myCustom</kbd> feedback mode was successfully changed from the <kbd class="calibre16">80</kbd> inherited from the <kbd class="calibre16">verbose</kbd> mode to <kbd class="calibre16">60</kbd>, based on our use of the <kbd class="calibre16">/set truncation myCustom 60</kbd> JShell command.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Listing your assets</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There are a few JShell commands that are convenient for listing assets that you have created. Using the feedback demonstration from the previous section, we executed the <kbd class="calibre16">/vars,</kbd> <kbd class="calibre16">/methods</kbd>, and <kbd class="calibre16">/list</kbd> commands to provide a list of variables, methods, and all sources respectively:</p>
<div class="mce-root1"><img src="Images/f8a80042-6a71-4988-b95d-d9c05939793c.png" width="766" height="262" class="calibre101"/></div>
<p class="mce-root">We can also use the <kbd class="calibre16">/list -all</kbd> command and option combination to see what packages the JShell imported. As you can see in the following screenshot, JShell imported several packages that make our work within the shell more convenient, saving us time from having to import these standard packages in our methods:</p>
<div class="mce-root1"><img src="Images/1b2e25b3-844d-41a2-9a39-d86ca5e76349.png" width="766" height="354" class="calibre102"/></div>
<p class="mce-root">If you just want to list the startup imports, you can use the <kbd class="calibre16">/list -start</kbd> command and option combination. As you can see in the following screenshot, each start up import has an "<kbd class="calibre16">s</kbd>" prefix and is numerically ordered:</p>
<div class="mce-root1"><img src="Images/aa2f8675-72c2-4d22-a98c-cb42c9afb393.png" width="766" height="274" class="calibre103"/></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Editing in the JShell</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JShell is not a full-featured text editor, but there are several things you can do within the shell. This section provides you with the editing techniques grouped into modifying text, basic navigation, historical navigation, and advanced editing commands.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Modifying text</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The default text edit/entry mode is that the text you type will appear at the current cursor position. You have several options available to you when you want to delete text. Here is a complete list:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Delete action</strong></td>
<td class="calibre33"><strong class="calibre3">PC keyboard combination</strong></td>
<td class="calibre33"><strong class="calibre3">Mac keyboard combination</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33">Delete the character at the current cursor location</td>
<td class="calibre33"><em class="calibre22">Delete</em></td>
<td class="calibre33"><em class="calibre22">Delete</em></td>
</tr>
<tr class="calibre32">
<td class="calibre33">Delete the character to the left of the cursor</td>
<td class="calibre33"><em class="calibre22">Backspace</em></td>
<td class="calibre33"><em class="calibre22">Backspace</em></td>
</tr>
<tr class="calibre34">
<td class="calibre33">Delete the text from the cursor location to the end of the line</td>
<td class="calibre33"><em class="calibre22">Ctrl</em> + <em class="calibre22">K</em></td>
<td class="calibre33"><em class="calibre22">Cmd</em> + <em class="calibre22">K</em></td>
</tr>
<tr class="calibre32">
<td class="calibre33">Delete the text from the cursor location to the end of the current word</td>
<td class="calibre33"><em class="calibre22">Alt</em> + <em class="calibre22">D</em></td>
<td class="calibre33"><em class="calibre22">Alt</em>/<em class="calibre22">Opt</em> + <em class="calibre22">D</em></td>
</tr>
<tr class="calibre34">
<td class="calibre33">Delete from the cursor location to the previous white space</td>
<td class="calibre33"><em class="calibre22">Ctrl</em> + <em class="calibre22">W</em></td>
<td class="calibre33"><em class="calibre22">Cmd</em> + <em class="calibre22">W</em></td>
</tr>
<tr class="calibre32">
<td class="calibre33">Paste the most recently deleted text at the cursor location</td>
<td class="calibre33"><em class="calibre22">Ctrl</em> + <em class="calibre22">Y</em></td>
<td class="calibre33"><em class="calibre22">Cmd</em> + <em class="calibre22">Y</em></td>
</tr>
<tr class="calibre35">
<td class="calibre33">When the <em class="calibre22">Ctrl</em> + <em class="calibre22">Y</em> (or <em class="calibre22">Cmd</em> + <em class="calibre22">Y</em> on Mac) is used, you will be able to use the <em class="calibre22">Alt</em> + <em class="calibre22">Y</em> keyboard combination to cycle through previously deleted text</td>
<td class="calibre33"><em class="calibre22">Alt</em> + <em class="calibre22">Y</em></td>
<td class="calibre33"><em class="calibre22">Alt</em>/<em class="calibre22">Opt</em> + <em class="calibre22">Y</em></td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Basic navigation</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">While navigational control inside the JShell is similar to most command-line editors, it is helpful to have a list of basic navigational controls:</p>
<table class="calibre30">
<tbody class="calibre31">
<tr class="calibre32">
<td class="calibre33"><strong class="calibre3">Key/Key combination</strong></td>
<td class="calibre33"><strong class="calibre3">Navigation action</strong></td>
</tr>
<tr class="calibre34">
<td class="calibre33"><em class="calibre22">Left arrow</em></td>
<td class="calibre33">Move backward one character</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><em class="calibre22">Right arrow</em></td>
<td class="calibre33">Move forward one character</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><em class="calibre22">Up arrow</em></td>
<td class="calibre33">Move up one line through history</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><em class="calibre22">Down arrow</em></td>
<td class="calibre33">Move down one line forward through history</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><em class="calibre22">Return</em></td>
<td class="calibre33">Enter (submit) the current line</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><em class="calibre22">Ctrl</em> + <em class="calibre22">A</em> (c<em class="calibre22">md</em> - <em class="calibre22">A</em> on Mac)</td>
<td class="calibre33">Jump to the beginning of the current line</td>
</tr>
<tr class="calibre34">
<td class="calibre33"><em class="calibre22">Ctrl</em> + <em class="calibre22">E</em> (c<em class="calibre22">md</em> - <em class="calibre22">E</em> on Mac)</td>
<td class="calibre33">Jump to the end of the current line</td>
</tr>
<tr class="calibre32">
<td class="calibre33"><em class="calibre22">Alt</em> + <em class="calibre22">B</em></td>
<td class="calibre33">Jump back one word</td>
</tr>
<tr class="calibre35">
<td class="calibre33"><em class="calibre22">Alt</em> + <em class="calibre22">F</em></td>
<td class="calibre33">Jump forward one word</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Historical navigation</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">JShell remembers the snippets and commands that you enter. It maintains this history so that you can reuse snippets and commands you already entered. To cycle through snippets and commands, you can hold down the <em class="calibre20">Ctrl</em> key (c<em class="calibre20">md</em> on Mac) and then use the up and down arrow keys until you see the snippet or command you want.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Advanced editing commands</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There are several more editing options to include search functionality, macros creation and use, and more. JShell's editor is based on JLine2, a Java library for parsing console input and editing. You can learn more about JLine2 at this URL: <a href="https://github.com/jline/jline2/wiki/JLine-2.x-Wiki" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://github.com/jline/jline2/wiki/JLine-2.x-Wiki</a>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Working with scripts</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Up to this point, you have entered data directly into JShell from the keyboard. You also have the ability to work with JShell scripts which are a sequence of JShell commands and snippets. The format is the same as other scripting formats with one command per line.</p>
<p class="mce-root">In this section, we will look at start up scripts, examine how to load scripts, how to save scripts, and then end with a look at advanced scripting with JShell.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Start up scripts</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Each time the JShell is launched, the start up scripts are loaded. This also occurs each time the <kbd class="calibre16">/reset</kbd>, <kbd class="calibre16">/reload</kbd>, and <kbd class="calibre16">/env</kbd> commands are used.</p>
<p class="mce-root">By default, the DEFAULT start up script is used by JShell. If you want to use a different start up script, you merely need to use the <kbd class="calibre16">/set start &lt;script&gt;</kbd> command. Here is an example--<kbd class="calibre16">/set start MyStartupScript.jsh</kbd>. Alternatively, you can use the <kbd class="calibre16">jshell --start MyStartupScript.jsh</kbd> command at the Command Prompt to launch JShell and load the <kbd class="calibre16">MyStartupScript.jsh</kbd> JShell start up script.</p>
<p class="mce-root">When you use the <kbd class="calibre16">/set start &lt;script&gt;</kbd> command with the <kbd class="calibre16">-retain</kbd> option, you are telling JShell to use the new start up script the next time you launch JShell.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Loading scripts</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Loading scripts in the JShell can be accomplished with one of the following methods:</p>
<ul class="calibre13">
<li class="calibre14">You can use the <kbd class="calibre16">/open</kbd> command along with the name of the script as a parameter. For example, if our script name is <kbd class="calibre16">MyScript</kbd>, we would use <kbd class="calibre16">/open MyScript</kbd>.</li>
<li class="calibre14">A second option for loading scripts is to use the <kbd class="calibre16">jshell MyScript.jsh</kbd> at the Command Prompt. This will launch JShell and load the <kbd class="calibre16">MyScript.jsh</kbd> JShell script.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Saving scripts</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In addition to creating JShell scripts in external editors, we can create them within the JShell environment as well. When taking this approach, you will need to use the <kbd class="calibre16">/save</kbd> command to save your scripts. As you can see in the following screenshot, the <kbd class="calibre16">/save</kbd> command requires, at a minimum, a file name argument:</p>
<div class="mce-root1"><img src="Images/3199707f-7588-4c98-8b49-35dc0acba62b.png" width="876" height="379" class="calibre104"/></div>
<p class="mce-root">There are three options available to you with the <kbd class="calibre16">/save</kbd> command:</p>
<ul class="calibre13">
<li class="calibre14">The <kbd class="calibre16">-all</kbd> option can be used to save the source of all snippets to the specified file.</li>
<li class="calibre14">The <kbd class="calibre16">-history</kbd> option saves a sequential history of all commands and snippets you entered since JShell was launched. JShell's ability to perform this operation informs you that it maintains a history of everything you enter.</li>
<li class="calibre14">The <kbd class="calibre16">-start</kbd> option saves the current start up definitions to the specified file.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Advanced scripting with JShell</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">What are the limits of JShell? There is so much you can do with this tool, and you are virtually only limited by your imagination and programming abilities.</p>
<p class="mce-root">Let's look at an advanced code base that can be used to compile and run Java programs from a JShell script:</p>
<pre class="calibre21">    import java.util.concurrent.*<br class="calibre2"/>    import java.util.concurrent.*<br class="calibre2"/>    import java.util.stream.*<br class="calibre2"/>    import java.util.*<br class="calibre2"/><br class="calibre2"/>    void print2Console(String thetext) <br class="calibre2"/>    { <br class="calibre2"/>      System.out.println(thetext); <br class="calibre2"/>      System.out.println("");<br class="calibre2"/>    }<br class="calibre2"/><br class="calibre2"/>    void runSomeProcess(String... args) throws Exception <br class="calibre2"/>    { <br class="calibre2"/>      String theProcess = <br class="calibre2"/>        Arrays.asList(args).stream().collect(<br class="calibre2"/>         Collectors.joining(" ")); <br class="calibre2"/>        print2Console("You asked me to run: '"+theProcess+"'"); <br class="calibre2"/>        print2Console(""); <br class="calibre2"/>        ProcessBuilder compileBuilder = new <br class="calibre2"/>          ProcessBuilder(args).inheritIO(); <br class="calibre2"/>        Process compileProc = compileBuilder.start(); <br class="calibre2"/>        CompletableFuture&lt;Process&gt; compileTask =<br class="calibre2"/>         compileProc.onExit(); <br class="calibre2"/>        compileTask.get();<br class="calibre2"/>    }<br class="calibre2"/><br class="calibre2"/>    print2Console("JShell session launched.")<br class="calibre2"/>    print2Console("Preparing to compile Sample.java. . . ")<br class="calibre2"/><br class="calibre2"/>    // run the Java Compiler to complete Sample.java<br class="calibre2"/>    runSomeProcess("javac", "Sample.java")<br class="calibre2"/>    print2Console("Compilation complete.")<br class="calibre2"/>    print2Console("Preparing to run Sample.class...")<br class="calibre2"/><br class="calibre2"/>    // run the Sample.class file<br class="calibre2"/>    runSomeProcess("java", "Sample")<br class="calibre2"/>    print2Console("Run Cycle compete.")<br class="calibre2"/><br class="calibre2"/>    // exit JShell<br class="calibre2"/>    print2Console("JShell Termination in progress...)<br class="calibre2"/>    print2Console("Session ended.")<br class="calibre2"/><br class="calibre2"/>    /exit</pre>
<p class="mce-root">As you can see with this script, we created a <kbd class="calibre16">runSomeProcess()</kbd> method and can use it to explicitly compile and run external Java files.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this chapter, we examined JShell, Java 9's new read-eval-print loop command-line tool. We started with introductory information regarding the tool and looked closely at the read-eval-print loop concept. We spent considerable time reviewing JShell commands and command-line options. Our coverage included practical guides to feedback modes, asset listing, and editing in the shell. We also gained experience working with scripts.</p>
<p class="mce-root">In the next chapter, we will look at Java 9's new default garbage collector. Specifically, we will look at the default garbage collection, depreciated garbage collection combinations, and examine garbage collection logging.</p>


            </article>

            
        </section>
    </div>



  </body></html>