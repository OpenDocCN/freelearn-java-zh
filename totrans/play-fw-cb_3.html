<html><head></head><body><h1 id="e-DUbr">Chapter 3. Leveraging Modules</h1>
<p id="e-CSIu">In this chapter, we will cover the following recipes:</p>
<ul id="e-DuyJ">
<li id="e-haF6">Dependency injection with Spring</li>
<li id="e-TB98">Dependency injection using Guice</li>
<li id="e-nKbX">Utilizing MongoDB</li>
<li id="e-QauX">Utilizing MongoDB and GridFS</li>
<li id="e-Bf8y">Utilizing Redis</li>
<li id="e-k69Z">Integrating Play application with Amazon S3</li>
<li id="e-VBmg">Integrating Play application with Typesafe Slick</li>
<li id="e-gmnW">Utilizing play-mailer</li>
<li id="e-egW6">Integrating Bootstrap and WebJars</li>
</ul>
<h1 id="e-Yofh">Introduction</h1>
<p id="e-Zc5w">In this chapter, we will look at utilizing Play and other third-party modules to address commonly required functionalities of modern web applications. As web applications and web application frameworks mature and evolve, the need for a modular and extensible system as part of the core web application framework becomes increasingly important. This is achievable and straightforward with Play Framework 2.0.</p>

<h1 id="e-JQQq">Dependency injection with Spring</h1>
<p id="e-GVg7">For this recipe, we will explore how to integrate the popular Spring Framework with a Play application. We will use Spring for bean instantiation and injection using Play controllers and service classes.</p>
<h2 id="e-Iy9g">How to do it…</h2>
<p id="e-fvJY">For Java, we need to take the following steps:</p>
<ol id="e-ZZs9">
<li id="e-xRNk">Run the <code>foo_java</code> application with Hot-Reloading enabled:<pre id="e-Ii6l">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-kwdL">Declare Spring as a project dependency in <code>build.sbt</code>:<pre id="e-gb1r">"org.springframework" % "spring-context" % "3.2.2.RELEASE",
    "org.springframework" % "spring-aop" % "3.2.2.RELEASE",
    "org.springframework" % "spring-expression" % "3.2.2.RELEASE"</pre>
</li>
<li id="e-hqQN">Create a new admin controller in <code>foo_java/app/controllers/AdminController.java</code> with the following code:<pre id="e-y4Oj">package controllers;
     import play.*;
    import play.mvc.*;
    import org.springframework.beans.factory.annotation.Autowired;
    import services.AdminService;
     @org.springframework.stereotype.Controller
    public class AdminController {
       @Autowired
      private AdminService adminService;
       public Result index() {
        return play.mvc.Controller.ok("This is an admin-only resource: " + adminService.getFoo());
      }
    }</pre>
</li>
<li id="e-nOdR">Create an admin service interface class in <code>foo_java/app/services/AdminServices.java</code> and a mock admin service implementation class in <code>foo_java/app/services/AdminServicesImpl.java</code> with the following content:<pre id="e-jDcp">// AdminService.java
    package services;
     public interface AdminService {
      String getFoo();
    }
     // AdminServiceImpl.java
    package services;
     import org.springframework.stereotype.Service;
     @Service
    public class AdminServiceImpl implements AdminService {
      @Override
      public String getFoo() {
        return "foo";
      }
    }</pre>
</li>
<li id="e-tAET">Add a new routes entry for the newly added action to <code>foo_java/conf/routes</code>:<pre id="e-wHBN">GET     /admins     @controllers.AdminController.index</pre>
</li>
<li id="e-Zumt">Add a <code>Global</code> settings class to the <code>foo_java/app/Global.java</code> file with the following content:<pre id="e-DeSw">import org.springframework.context.ApplicationContext;
    import org.springframework.context.annotation.AnnotationConfigApplicationContext;
    import play.Application;
    import play.GlobalSettings;
       public class Global extends GlobalSettings {
      private ApplicationContext ctx;
       @Override
      public void onStart(Application app) {
        ctx = new AnnotationConfigApplicationContext(SpringConfig.class);
      }
       @Override
      public &amp;lt;A&amp;gt; A getControllerInstance(Class&amp;lt;A&amp;gt; clazz) {
        return ctx.getBean(clazz);
      }
    }</pre>
</li>
<li id="e-WV9J">Add the Spring configuration class to <code>foo_java/app/SpringConfig.java</code> with the following content:<pre id="e-BQyw">import org.springframework.context.annotation.ComponentScan;
    import org.springframework.context.annotation.Configuration;
     @Configuration
    @ComponentScan({"controllers", "services"})
    public class SpringConfig {
    }</pre>
</li>
<li id="e-NVFh">Request our new route and examine the response body to confirm:<pre id="e-MFrm">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/admins&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /admins HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 35&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    This is an admin-only resource: foo%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<p id="e-igSe">For Scala, we need to take the following steps:</p>
<ol id="e-tALB">
<li id="e-ZWxY">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-GoZh">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-XehB">Declare Spring as a project dependency in <code>build.sbt</code>:<pre id="e-lbNd">"org.springframework" % "spring-context" % "3.2.2.RELEASE"</pre>
</li>
<li id="e-as48">Create a new admin controller in <code>foo_scala/app/controllers/AdminController.scala</code> with the following content:<pre id="e-vbst">package controllers
        import play.api.mvc.{Action, Controller}
       import services.AdminService
        class AdminController(implicit adminService: AdminService) extends Controller {
         def index = Action {
           Ok("This is an admin-only resource: %s".format(adminService.foo))
         }
       }</pre>
</li>
<li id="e-SJNt">Create an admin service class in <code>foo_scala/app/services/AdminServices.scala</code> with the following content:<pre id="e-Zm3Z">package services
     class AdminService {
      def foo = "foo"
    }</pre>
</li>
<li id="e-MajH">Add a new routes entry for the newly added action to <code>foo_scala/conf/routes</code>:<pre id="e-BLaP">GET     /admins                    @controllers.AdminController.index</pre>
</li>
<li id="e-LfsX">Add a <code>Global</code> settings class to the <code>foo_scala/app/Global.scala</code> with the following content:<pre id="e-XDut">import org.springframework.context.ApplicationContext
    import org.springframework.context.annotation.AnnotationConfigApplicationContext
     object Global extends play.api.GlobalSettings {
       private val ctx: ApplicationContext = new AnnotationConfigApplicationContext(classOf[SpringConfig])
       override def getControllerInstance[A](clazz: Class[A]): A = {
        return ctx.getBean(clazz)
      }
    }</pre>
</li>
<li id="e-QzJj">Add the Spring configuration class to <code>foo_scala/app/SpringConfig.scala</code> with the following content:<pre id="e-i7ED">import org.springframework.context.annotation.Configuration
    import org.springframework.context.annotation.Bean
    import controllers._
    import services._
     @Configuration
    class SpringConfig {
      @Bean
      implicit def adminService: AdminService = new AdminService
       @Bean
      def adminController: AdminController = new AdminController
    }</pre>
</li>
<li id="e-l6HW">Request our new route and examine the response body to confirm:<pre id="e-ZDOy">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://0.0.0.0:9000/admins&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying 0.0.0.0...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to 0.0.0.0 (127.0.0.1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /admins HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: 0.0.0.0:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 35&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host 0.0.0.0 left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    This is an admin-only resource: foo%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<h2 id="e-ojiz">How it works…</h2>
<p id="e-dBCw">In this recipe, we configured our Play application to utilize Dependency injection in our controllers and service classes using Spring. We configured Spring in the <code>Global</code> settings file and loaded the <code>SpringConfig</code> class, which will contain our Spring-specific configurations.</p>

<h1 id="e-IfWS">Dependency injection using Guice</h1>
<p id="e-FDm8">For this recipe, we will explore how to integrate Google Guice with a Play application. We will use Guice for bean instantiation and injection using Play controllers and service classes.</p>
<h2 id="e-m9Xp">How to do it…</h2>
<p id="e-SMoK">For Java, we need to take the following steps:</p>
<ol id="e-syT1">
<li id="e-aWMh">Run the <code>foo_java</code> application with Hot-Reloading enabled:<pre id="e-kWWt">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-H1ch">Declare the <code>guice</code> module as a project dependency in <code>build.sbt</code>:<pre id="e-plh1">"com.google.inject" % "guice" % "3.0"</pre>
</li>
<li id="e-naQ1">Configure Guice by modifying the contents of the <code>Global</code> settings class:<pre id="e-ZIKI">import com.google.inject.AbstractModule;
    import com.google.inject.Guice;
    import com.google.inject.Injector;
    import com.google.inject.Singleton;
    import play.GlobalSettings;
    import services.*;
     public class Global extends GlobalSettings {
      private Injector injector = Guice.createInjector(new AbstractModule() {
        @Override
        protected void configure() {
           bind(CategoryService.class).to(
      CategoryServiceImpl.class).in(Singleton.class);
        }
      });
       @Override
      public &amp;lt;T&amp;gt; T getControllerInstance(Class&amp;lt;T&amp;gt; clazz) {
        return injector.getInstance(clazz);
      }
   }</pre>
</li>
<li id="e-NSvU">Create a category controller in <code>foo_java/app/controllers/CategoryController.java</code> by adding the following content:<pre id="e-PepR">package controllers;
     import com.google.inject.Inject;
    import play.libs.Json;
    import play.mvc.Controller;
    import play.mvc.Result;
    import services.CategoryService;
     public class CategoryController extends Controller {
      @Inject
      private CategoryService categoryService;
       public Result index() {
        return ok(Json.toJson(categoryService.list()));
      }
    }</pre>
</li>
<li id="e-QAh8">Create a category service interface in <code>foo_java/app/services/CategoryService.java</code> by adding the following content:<pre id="e-UhJi">package services;
     import java.util.List;
     public interface CategoryService {
      List&amp;lt;String&amp;gt; list();
    }</pre>
</li>
<li id="e-fVGm">Create a category service implementation class in <code>foo_java/app/services/CategoryServicesImpl.java</code> by adding the following content:<pre id="e-Ek3A">package services;
     import java.util.Arrays;
    import java.util.List;
     public class CategoryServiceImpl implements CategoryService {
      @Override
      public List&amp;lt;String&amp;gt; list() {
        return Arrays.asList(new String[] {"Manager", "Employee", "Contractor"});
      }
    }</pre>
</li>
<li id="e-OJPD">Add a new routes entry for the newly added action to <code>foo_java/conf/routes</code>:<pre id="e-UWGy">GET  /categories    @controllers.CategoryController.index</pre>
</li>
<li id="e-zU1v">Request our new route and examine the response headers to confirm our modifications to the HTTP response header:<pre id="e-eC2S">$ curl -v http://localhost:9000/categories
    * Hostname was NOT found in DNS cache
    *   Trying ::1...
    * Connected to localhost (::1) port 9000 (#0)
    &amp;gt; GET /categories HTTP/1.1
    &amp;gt; User-Agent: curl/7.37.1
    &amp;gt; Host: localhost:9000
    &amp;gt; Accept: */*
    &amp;gt;
    &amp;lt; HTTP/1.1 200 OK
    &amp;lt; Content-Type: application/json; charset=utf-8
    &amp;lt; Content-Length: 35
    &amp;lt;
    * Connection #0 to host localhost left intact
    ["Manager","Employee","Contractor"]%</pre>
</li>
</ol>
<p id="e-UQ2a">For Scala, we need to take the following steps:</p>
<ol id="e-fctU">
<li id="e-M0C0">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-Zfdd">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-jeh2">Declare the <code>securesocial</code> module as a project dependency in <code>build.sbt</code>:<pre id="e-uXe1">"com.google.inject" % "guice" % "3.0"</pre>
</li>
<li id="e-Ydub">Configure Guice by modifying the contents of the <code>Global</code> settings class:<pre id="e-OFd7">import com.google.inject.{Guice, AbstractModule}
    import play.api.GlobalSettings
    import services._
     object Global extends GlobalSettings {
      val injector = Guice.createInjector(new AbstractModule {
        protected def configure() {
          bind(classOf[CategoryService]).to(classOf[CategoryServiceImpl])
        }
      })
       override def getControllerInstance[A](controllerClass: Class[A]): A = {
        injector.getInstance(controllerClass)
      }
    }</pre>
</li>
<li id="e-Q96C">Create a category controller in <code>foo_scala/app/controllers/CategoryController.scala</code> by adding the following content:<pre id="e-sCkC">package controllers
        import play.api.mvc._
       import play.api.libs.json.Json._
       import com.google.inject._
       import services._
        @Singleton
       class CategoryController @Inject()(categoryService: CategoryService) 
      extends Controller {
       def index = Action {
    Ok(toJson(categoryService.list))
      }
       }</pre>
</li>
<li id="e-td0Z">Create a category service in <code>foo_scala/app/services/CategoryService.scala</code> by adding the following content:<pre id="e-YanP">package services
     trait CategoryService {
   def list: Seq[String]
    }
     class CategoryServiceImpl extends CategoryService {
   override def list: Seq[String] = Seq("Manager", "Employee", "Contractor")
    }</pre>
</li>
<li id="e-mFnV">Add a new routes entry for the newly added action to <code>foo_scala/conf/routes</code>:<pre id="e-UzAs">GET  /categories    @controllers.CategoryController.index</pre>
</li>
<li id="e-LTXL">Request our new route and examine the response headers to confirm our modifications to the HTTP response header:<pre id="e-DYhr">$ curl -v http://localhost:9000/categories
    * Hostname was NOT found in DNS cache
    *   Trying ::1...
    * Connected to localhost (::1) port 9000 (#0)
    &amp;gt; GET /categories HTTP/1.1
    &amp;gt; User-Agent: curl/7.37.1
    &amp;gt; Host: localhost:9000
    &amp;gt; Accept: */*
    &amp;gt;
    &amp;lt; HTTP/1.1 200 OK
    &amp;lt; Content-Type: application/json; charset=utf-8
    &amp;lt; Content-Length: 35
    &amp;lt;
    * Connection #0 to host localhost left intact
    ["Manager","Employee","Contractor"]%</pre>
</li>
</ol>
<h2 id="e-KirA">How it works…</h2>
<p id="e-gWmH">In this recipe, we configured our Play application to utilize Dependency injection in our controllers and service classes using Google Guice. We configured Guice in the <code>Global</code> settings file, which will contain our Guice-specific configurations.</p>

<h1 id="e-QpuD">Utilizing MongoDB</h1>
<p id="e-au6L">For this recipe, we will explore how to utilize MongoDB, the popular NoSQL library, within a Play application. MongoDB is one of the most widely-used NoSQL databases, and it most certainly has been a viable option as a datastore for many modern web applications. We will be using the Scala module, play-plugins-salat, which is an Object relation mapping tool that uses the official MongoDB Scala driver Casbah. This will be a Scala-only recipe.</p>
<p id="e-OiCC">For more information about Casbah, please refer to <a href="https://github.com/mongodb/casbah">https://github.com/mongodb/casbah</a>.</p>
<h2 id="e-TF54">How to do it…</h2>
<p id="e-SKxO">Let's take the following steps:</p>
<ol id="e-ewtc">
<li id="e-EPj6">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-yqeD">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-fhCD">Declare play-plugins-salat as a project dependency in <code>build.sbt</code>:<pre id="e-VQnd">"se.radley" %% "play-plugins-salat" % "1.5.0"</pre>
</li>
<li id="e-qjHZ">Add additional salat and MongoDB directives to <code>build.sbt</code>:<pre id="e-LX4D">import play.PlayImport.PlayKeys._
    import play.twirl.sbt.Import.TwirlKeys
     routesImport += "se.radley.plugin.salat.Binders._"
    TwirlKeys.templateImports += "org.bson.types.ObjectId"</pre>
</li>
<li id="e-sVtf">Declare the salat plugin in <code>foo_scala/conf/play.plugins</code>:<pre id="e-d97R">500:se.radley.plugin.salat.SalatPlugin</pre>
</li>
<li id="e-FHVn">Declare the MongoDB instance information in <code>foo_scala/conf/application.conf</code>:<pre id="e-lH4t">mongodb.default.db = "cookbookdb"</pre>
</li>
<li id="e-c8a6">Modify <code>foo_scala/app/controllers/WarehouseController.scala</code> by adding the following content:<pre id="e-aq1T">package controllers
     import models._
    import play.api.libs.json._
    import play.api.mvc.{BodyParsers, Action, Controller}
    import se.radley.plugin.salat.Binders.ObjectId
     object WarehouseController extends Controller {
      implicit val objectIdReads = se.radley.plugin.salat.Binders.objectIdReads
      implicit val objectIdWrites = se.radley.plugin.salat.Binders.objectIdWrites
      implicit val warehouseWrites = Json.writes[Warehouse]
      implicit val warehouseReads = Json.reads[Warehouse]
       def index = Action {
        val list = Warehouse.list
        Ok(Json.toJson(list))
      }
       def create = Action(BodyParsers.parse.json) { implicit request =&amp;gt;
        val post = request.body.validate[Warehouse]
        post.fold(
          errors =&amp;gt; {
            BadRequest(Json.obj("status" -&amp;gt;"error", "message" -&amp;gt; JsError.toFlatJson(errors)))
          },
          warehouse =&amp;gt; {
            Warehouse.create(warehouse)
            Created(Json.toJson(warehouse))
          }
        )
      }
    }</pre>
</li>
<li id="e-Ocac">Add new routes for the newly added action to <code>foo_scala/conf/routes</code>:<pre id="e-kwXv">GET     /warehouses  controllers.WarehouseController.index
    POST    /warehouses      controllers.WarehouseController.create</pre>
</li>
<li id="e-NvFW">Add the collection mapping for the warehouse model to <code>foo_scala/app/models/Warehouse.scala</code>:<pre id="e-dLVB">package models
     import play.api.Play.current
    import com.mongodb.casbah.commons.MongoDBObject
    import com.novus.salat.dao._
    import se.radley.plugin.salat._
    import se.radley.plugin.salat.Binders._
    import mongoContext._
     case class Warehouse(id: Option[ObjectId] = Some(new ObjectId), name: String, location: String)
     object Warehouse extends ModelCompanion[Warehouse, ObjectId] {
      val dao = new SalatDAO[Warehouse, ObjectId](collection = mongoCollection("warehouses")) {}
       def list = dao.find(ref = MongoDBObject()).toList
      def create(w: Warehouse) = dao.save(w)
    }</pre>
</li>
<li id="e-RhDN">Add the Mongo context to <code>foo_scala/app/models/mongoContext.scala</code>:<pre id="e-R6Pl">package models
     import com.novus.salat.dao._
    import com.novus.salat.annotations._
    import com.mongodb.casbah.Imports._
     import play.api.Play
    import play.api.Play.current
     package object mongoContext {
      implicit val context = {
        val context = new Context {
          val name = "global"
          override val typeHintStrategy = StringTypeHintStrategy(when = TypeHintFrequency.WhenNecessary, typeHint = "_t")
        }
        context.registerGlobalKeyOverride(remapThis = "id", toThisInstead = "_id")
        context.registerClassLoader(Play.classloader)
        context
      }
    }</pre>
</li>
<li id="e-krj1">Add a new warehouse record by accessing the warehouse post endpoint using <code>curl</code>:<pre id="e-KymE">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v -X POST http://localhost:9000/warehouses --header "Content-type: application/json" --data '{"name":"Warehouse A", "location":"Springfield"}'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; POST /warehouses HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Content-type: application/json&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Content-Length: 48&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * upload completely sent off: 48 out of 48 bytes&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 201 Created&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: application/json; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 47&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    {"name":"Warehouse A","location":"Springfield"}&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-gaqF">View all warehouse records by accessing the warehouse index endpoint using <code>curl</code>:<pre id="e-aKqo">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/warehouses&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /warehouses HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: application/json; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 241&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [{"id":"5490fde9e0820cf6df38584c","name":"Warehouse A","location":"Springfield"}]%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<h2 id="e-nym2">How it works…</h2>
<p id="e-aJnp">In this recipe, we created a new URL route and action that will insert and retrieve warehouse records from a MongoDB instance. We used the Play module play-plugins-salat and configured the connection in <code>foo_scala/conf/application.conf</code>. We then mapped our Mongo collection in the warehouse model class:</p>
<pre id="e-iPUx">case class Warehouse(id: Option[ObjectId] = Some(new ObjectId), name: String, location: String)</pre>
<p id="e-HD3T">Next, we invoked the appropriate warehouse companion object methods from the warehouse controller:</p>
<pre id="e-sFR4">val list = Warehouse.list
    Warehouse.create(warehouse)</pre>
<p id="e-QLYf">We also declared our JSON binders for the warehouse model and MongoDB's <code>ObjectId</code> in the warehouse controller:</p>
<pre id="e-XJmZ">implicit val objectIdReads = se.radley.plugin.salat.Binders.objectIdReads
    implicit val objectIdWrites = se.radley.plugin.salat.Binders.objectIdWrites
    implicit val warehouseWrites = Json.writes[Warehouse]
    implicit val warehouseReads = Json.reads[Warehouse]</pre>

<h1 id="e-Jr5R">Utilizing MongoDB and GridFS</h1>
<p id="e-HQdt">For this recipe, we will explore how to store and deliver files with Play applications by using MongoDB and GridFS. We will continue by adding to the previous recipe. As with the previous recipe, this recipe will be Scala only.</p>
<h2 id="e-Jn04">How to do it…</h2>
<p id="e-cEFz">Let's take the following steps:</p>
<ol id="e-r8MO">
<li id="e-yype">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-tmzo">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-M5d7">Modify <code>foo_scala/app/controllers/WarehouseController.scala</code> by adding the following content:<pre id="e-e8W1">import java.text.SimpleDateFormat
    import play.api.libs.iteratee.Enumerator
     def upload = Action(parse.multipartFormData) { request =&amp;gt;
        request.body.file("asset") match {
          case Some(asset) =&amp;gt; {
            val gridFs = Warehouse.assets
            val uploadedAsset = gridFs.createFile(asset.ref.file)
            uploadedAsset.filename = asset.filename
            uploadedAsset.save()
             Ok("Asset is available at http://localhost:9000/warehouses/assets/%s".format(uploadedAsset.id))
          }
          case None =&amp;gt; {
            BadRequest
          }
        }
      }
       def retrieveFile(id: ObjectId) = Action {
        import com.mongodb.casbah.Implicits._
        import play.api.libs.concurrent.Execution.Implicits._
         val gridFs = Warehouse.assets
         gridFs.findOne(Map("_id" -&amp;gt; id)) match {
          case Some(f) =&amp;gt; Result(
            ResponseHeader(OK, Map(
              CONTENT_LENGTH -&amp;gt; f.length.toString,
              CONTENT_TYPE -&amp;gt; f.contentType.getOrElse(BINARY),
              DATE -&amp;gt; new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss 'GMT'", java.util.Locale.US).format(f.uploadDate)
            )),
            Enumerator.fromStream(f.inputStream)
          )
           case None =&amp;gt; NotFound
        }
      }</pre>
</li>
<li id="e-OUC4">Add new routes for the newly added action to <code>foo_scala/conf/routes</code>:<pre id="e-PcTs">POST /warehouses/assets/upload controllers.WarehouseController.upload
   GET  /warehouses/assets/:id controllers.WarehouseController.retrieveFile(id: ObjectId)</pre>
</li>
<li id="e-GrT9">Modify the collection mapping for the warehouse model in <code>foo_scala/app/models/Warehouse.scala</code>:<pre id="e-pkId">val assets = gridFS("assets")
     def upload(asset: File) = {
      assets.createFile(asset)
    }
     def retrieve(filename: String) = {
      assets.find(filename)
    }</pre>
</li>
<li id="e-oIWb">Upload a new warehouse asset file by accessing the warehouse upload endpoint using <code>curl</code>:<pre id="e-Kz8m">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/warehouses/assets/upload -F "asset=@/tmp/1.jpg"&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; POST /warehouses/assets/upload HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Content-Length: 13583&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Expect: 100-continue&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Content-Type: multipart/form-data; boundary=------------------------4a001bdeff39c089&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 100 Continue&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 86&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Asset is available at http://localhost:9000/warehouses/assets/549121fbe082fc374fa6cb63%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-fpHT">Verify that our file delivery URL route is working by accessing the URL in a web browser that is part of the output of the previous step:<pre id="e-xWXf">&lt;code class="literal"&gt;http://localhost:9000/warehouses/assets/549121fbe082fc374fa6cb63&lt;/code&gt;</pre>
</li>
</ol>
<h2 id="e-YxGG">How it works…</h2>
<p id="e-UTkZ">In this recipe, we created new URL routes and actions that will be used to upload and retrieve warehouse asset files in a MongoDB instance using GridFS. We added the GridFS reference to our collection mapping file in <code>foo_scala/app/models/Warehouse.scala</code>:</p>
<pre id="e-AcoN">val assets = gridFS("assets")</pre>
<p id="e-HKsS">We then added the respective methods for file upload and retrieval:</p>
<pre id="e-W74X">def upload(asset: File) = {
      assets.createFile(asset)
    }
     def retrieve(filename: String) = {
      assets.find(filename)
    }</pre>
<p id="e-Hjj9">Next, we created the actions in <code>foo_scala/app/controllers/WarehouseController.scala</code>, which will handle the actual file upload and retrieval requests.</p>

<h1 id="e-queP">Utilizing Redis</h1>
<p id="e-YDs8">For this recipe, we will explore how Play applications integrate with Redis using Play cache. Redis is a widely used key-value database, usually utilized as an intermediary object cache for modern web applications. This recipe requires a running Redis instance that our Play 2 web application can interface with.</p>
<h2 id="e-t2Sc">How to do it…</h2>
<p id="e-JLWo">For Java, we need to take the following steps:</p>
<ol id="e-ZEGC">
<li id="e-oAwJ">Run the <code>foo_java</code> application with Hot-Reloading enabled:<pre id="e-ODhG">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-afJj">Declare Redis as a project dependency in <code>build.sbt</code>:<pre id="e-vjLh">"com.typesafe.play.plugins" %% "play-plugins-redis" % "2.3.1"</pre>
</li>
<li id="e-RMIr">Declare the repository hosting Sedis, a library dependency of play-plugins-redis in <code>build.sbt</code>:<pre id="e-f6O9">resolvers += "Sedis repository" at "http://pk11-scratch.googlecode.com/svn/trunk/"</pre>
</li>
<li id="e-KkcC">Enable the play-mailer plugin by declaring it in <code>foo_java/conf/play.plugins</code>:<pre id="e-x7l2">550:com.typesafe.plugin.RedisPlugin</pre>
</li>
<li id="e-bY2N">Specify your Redis host information in <code>foo_java/conf/application.conf</code>:<pre id="e-KKff">ehcacheplugin=disabled
    redis.uri="redis://127.0.0.1:6379"</pre>
</li>
<li id="e-gc5P">Modify <code>foo_java/app/controllers/Application.java</code> by adding the following code:<pre id="e-e5sU">import play.cache.*;
      
     public static Result displayFromCache() {
         final String key = "myKey";
         String value = (String) Cache.get(key);
          if (value != null &amp;amp;&amp;amp; value.trim().length() &amp;gt; 0) {
           return ok("Retrieved from Cache: " + value);
         } else {
           Cache.set(key, "Let's Play with Redis!");
           return ok("Setting key value in the cache");
         } 
       }</pre>
</li>
<li id="e-ytnR">Add a new routes entry for the newly added action to <code>foo_java/conf/routes</code>:<pre id="e-rSCj">GET     /cache  controllers.Application.displayFromCache</pre>
</li>
<li id="e-kgiP">Request our new route and examine the response body to confirm that our <code>displayFromCache</code> action is setting the key value for the first time:<pre id="e-KET9">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying 127.0.0.1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (127.0.0.1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /cache HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 30&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Setting key value in the cache%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-XDpj">Request the <code>/cache</code> route again to be able to view the value of the cache key:<pre id="e-B1tM">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying 127.0.0.1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (127.0.0.1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /cache HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 43&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Retrieved from Cache: Let's Play with Redis!%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<p id="e-Wz4A">For Scala, we need to take the following steps:</p>
<ol id="e-KZkJ">
<li id="e-NpOR">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-Ie8E">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-ZqUA">Declare Redis as a project dependency in <code>build.sbt</code>:<pre id="e-db7C">"com.typesafe.play.plugins" %% "play-plugins-redis" % "2.3.1"</pre>
</li>
<li id="e-ngLy">Declare the repository hosting Sedis, a library dependency of play-plugins-redis, in <code>build.sbt</code>:<pre id="e-YrAV">resolvers += "Sedis repository" at "http://pk11-scratch.googlecode.com/svn/trunk/"</pre>
</li>
<li id="e-KwWX">Enable the play-mailer plugin by declaring it in <code>foo_scala/conf/play.plugins</code>:<pre id="e-QBjc">550:com.typesafe.plugin.RedisPlugin</pre>
</li>
<li id="e-seri">Specify your Redis host information in <code>foo_scala/conf/application.conf</code>:<pre id="e-LN96">ehcacheplugin=disabled
    redis.uri="redis://127.0.0.1:6379"</pre>
</li>
<li id="e-WArm">Modify <code>foo_scala/app/controllers/Application.scala</code> by adding the following code:<pre id="e-z7w1">import scala.util.Random
       import play.api.cache._
       import play.api.Play.current
     def displayFromCache = Action {
         val key = "myKey"
         Cache.getAs[String](key) match {
           case Some(myKey) =&amp;gt; {
             Ok("Retrieved from Cache: %s".format(myKey))
           }
           case None =&amp;gt; {
             Cache.set(key, "Let's Play with Redis!")
             Ok("Setting key value in the cache")
           }
         }
       }</pre>
</li>
<li id="e-jiQu">Add a new routes entry for the newly added <code>action</code> to <code>foo_scala/conf/routes</code>:<pre id="e-RXPz">GET     /cache  controllers.Application.displayFromCache</pre>
</li>
<li id="e-Mn3g">Request our new route and examine the response body to confirm that our <code>displayFromCache</code> action is setting the key value for the first time:<pre id="e-QHj1">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /cache HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 30&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Setting key value in the cache%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-T3fv">Request the <code>/cache</code> route again to be able to view the value of the cache key:<pre id="e-kpt5">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying 127.0.0.1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (127.0.0.1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /cache HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 43&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Retrieved from Cache: Let's Play with Redis!%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<h2 id="e-jHpt">How it works…</h2>
<p id="e-rwkV">In this recipe, we created a new URL route and action that will interact with our Redis instance. To follow on with this recipe, you will need the following running Redis instance to connect to:</p>
<pre id="e-Y2NS">&lt;span class="strong"&gt;&lt;strong&gt;$ redis-server /usr/local/etc/redis.conf&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;[2407] 14 Apr 12:44:20.623 * Increased maximum number of open files to 10032 (it was originally set to 2560).&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;                _._&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;           _.-''__ ''-._&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      _.-''    '.  '_.  ''-._           Redis 2.8.17 (00000000/0) 64 bit&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;  .-'' .-'''.  '''\/    _.,_ ''-._&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt; (    '      ,       .-'  | ',    )     Running in stand alone mode&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt; |'-._'-...-' __...-.''-._|'' _.-'|     Port: 6379&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt; |    '-._   '._    /     _.-'    |     PID: 2407&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;  '-._    '-._  '-./  _.-'    _.-'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt; |'-._'-._    '-.__.-'    _.-'_.-'|&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt; |    '-._'-._        _.-'_.-'    |           http://redis.io&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;  '-._    '-._'-.__.-'_.-'    _.-'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt; |'-._'-._    '-.__.-'    _.-'_.-'|&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt; |    '-._'-._        _.-'_.-'    |&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;  '-._    '-._'-.__.-'_.-'    _.-'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      '-._    '-.__.-'    _.-'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;          '-._        _.-'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;              '-.__.-'&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;[2407] 14 Apr 12:44:20.631 # Server started, Redis version 2.8.17&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;[2407] 14 Apr 12:44:20.632 * DB loaded from disk: 0.001 seconds&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;[2407] 14 Apr 12:44:20.632 * The server is now ready to accept connections on port 6379&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-c6cp">For more information about installing and running a Redis server, please refer to <a href="http://redis.io/topics/quickstart">http://redis.io/topics/quickstart</a>.</p>
<p id="e-jf7v">We configured the Play Redis module by declaring the necessary dependencies and repository settings in <code>build.sbt</code>. We then configured the connection to the Redis instance in <code>conf/application.conf</code>. Finally, we loaded the Redis play-plugin in <code>conf/play.plugins</code>:</p>
<pre id="e-rue2">550:com.typesafe.plugin.RedisPlugin</pre>
<p id="e-X1ue">The <code>displayFromCache</code> action, when invoked, has two distinct functions. First, it attempts to retrieve a value from the cache. If it is able to retrieve a value from the Redis cache, it prints the contents of the value in the response body. If it is unable to retrieve a value from the Redis cache, it sets a random string value to the key and prints a status message in the response body.</p>
<p id="e-MAry">We then used <code>curl</code> to test out this new route and accessed the route twice; the action printed out two different messages in the response body.</p>

<h1 id="e-gjiQ">Integrating Play application with Amazon S3</h1>
<p id="e-ClYm">For this recipe, we will explore how Play applications can upload files directly to <strong>Amazon Web Services</strong> (<strong>AWS</strong>) S3, a popular cloud storage solution.</p>
<p id="e-zmTo">For more information about S3, please refer to <a href="http://aws.amazon.com/s3/">http://aws.amazon.com/s3/</a>.</p>
<h2 id="e-KP5a">How to do it…</h2>
<p id="e-K8eN">For Java, we need to take the following steps:</p>
<ol id="e-FCyr">
<li id="e-A6GJ">Run the <code>foo_java</code> application with Hot-Reloading enabled:<pre id="e-YWhw">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-zaP7">Declare play-s3 as a project dependency in <code>build.sbt</code>:<pre id="e-aALZ">"com.amazonaws" % "aws-java-sdk" % "1.3.11"</pre>
</li>
<li id="e-Zv4C">Specify your AWS credentials in <code>foo_java/conf/application.conf</code>:<pre id="e-WrFr">aws.accessKeyId="YOUR S3 ACCESS KEY"
    aws.secretKey="YOUR S3 SECRET KEY"
     fooscala.s3.bucketName="YOUR S3 BUCKET NAME"</pre>
</li>
<li id="e-Bxhy">Modify <code>foo_java/app/controllers/Application.java</code> by adding the following code:<pre id="e-SNGh">import com.amazonaws.auth.*;
       import com.amazonaws.services.s3.*;
       import com.amazonaws.services.s3.model.*;
        public static Result s3Upload() {
         return ok(views.html.s3.render());
       }
        public static Result submitS3Upload() {
         Http.MultipartFormData body = request().body().asMultipartFormData();
         Http.MultipartFormData.FilePart profileImage = body.getFile("profile");
          if (profileImage != null) {
            try {
                File file = profileImage.getFile();
                String filename = profileImage.getFilename();
                 String accessKey = Play.application().configuration().getString("aws.accessKeyId");
                String secret = Play.application().configuration().getString("aws.secretKey");
                String bucketName = Play.application().configuration().getString("fooscala.s3.bucketName");
                 try {
                    AWSCredentials awsCredentials = new BasicAWSCredentials(accessKey, secret);
                    AmazonS3 s3Client = new AmazonS3Client(awsCredentials);
                    AccessControlList acl = new AccessControlList();
                    acl.grantPermission(GroupGrantee.AllUsers, Permission.Read);
                    s3Client.createBucket(bucketName);
                    s3Client.putObject(new PutObjectRequest(bucketName, filename, file).withAccessControlList(acl));
                     String img = "http://" + bucketName+ ".s3.amazonaws.com/" + filename;
                    return ok("Image uploaded: " + img);
                } catch (Exception e) {
                    e.printStackTrace();
                    return ok("Image was not uploaded");
                }
             } catch(Exception e) {
                return internalServerError(e.getMessage());
            }
         } else {
            return badRequest();
         }
       }</pre>
</li>
<li id="e-DgHB">Add a new routes entry for the newly added action to <code>foo_java/conf/routes</code>:<pre id="e-GHac">GET     /s3_upload      controllers.Application.s3Upload
    POST    /s3_upload      controllers.Application.submitS3Upload</pre>
</li>
<li id="e-QqlA">Add the S3 file upload submission View template to <code>foo_java/app/views/s3.scala.html</code>:<pre id="e-uWFb">@helper.form(action = routes.Application.submitS3Upload, 'enctype -&amp;gt; "multipart/form-data") {
      &amp;lt;input type="file" name="profile"&amp;gt;
      &amp;lt;p&amp;gt;
        &amp;lt;input type="submit"&amp;gt;
      &amp;lt;/p&amp;gt;
    }</pre>
</li>
</ol>
<p id="e-Kwya">For Scala, we need to take the following steps:</p>
<ol id="e-rDmK">
<li id="e-V6un">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-UBCr">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-f70q">Declare play-s3 as a project dependency in <code>build.sbt</code>:<pre id="e-I92W">"nl.rhinofly" %% "play-s3" % "5.0.2",</pre>
</li>
<li id="e-Iaug">Declare the custom repository where the play-s3 module is hosted:<pre id="e-zIPR">resolvers += "Rhinofly Internal Repository" at "http://maven-   repository.rhinofly.net:8081/artifactory/libs-release-local"</pre>
</li>
<li id="e-CdKx">Specify your AWS credentials in <code>foo_scala/conf/application.conf</code>:<pre id="e-i9yo">aws.accessKeyId="YOUR S3 ACCESS KEY"
    aws.secretKey="YOUR S3 SECRET KEY"
     fooscala.s3.bucketName="YOUR S3 BUCKET NAME"</pre>
</li>
<li id="e-oNTk">Modify <code>foo_scala/app/controllers/Application.scala</code> by adding the following code:<pre id="e-DS1r">import play.api.Play.current
       import fly.play.s3._
       def s3Upload = Action {
         Ok(s3())
       }
        def submitS3Upload = Action(parse.multipartFormData) { request =&amp;gt;
         import play.api.Play
          request.body.file("profile") match {
           case Some(profileImage) =&amp;gt; {
             val bucketName = Play.current.configuration.getString("fooscala.s3.bucketName").get
             val bucket = S3(bucketName)
              val filename = profileImage.filename
             val contentType = profileImage.contentType
             val byteArray = Files.toByteArray(profileImage.ref.file)
              val result = bucket.add(BucketFile(filename, contentType.get, byteArray, Option(PUBLIC_READ), None))
             val future = Await.result(result, 10 seconds)
             Ok("Image uploaded to: http://%s.s3.amazonaws.com/%s".format(bucketName, filename))
          }
            case None =&amp;gt; {
              BadRequest
            }
          }
        }</pre>
</li>
<li id="e-PIQG">Add a new routes entry for the newly added action to <code>foo_scala/conf/routes</code>:<pre id="e-Rmqy">GET     /s3_upload      controllers.Application.s3Upload
    POST    /s3_upload      controllers.Application.submitS3Upload
 Add the s3 file upload submission view template in foo_scala/app/views/s3.scala.html:
    @helper.form(action = routes.Application.submitS3Upload, 'enctype -&amp;gt; "multipart/form-data") {
      &amp;lt;input type="file" name="profile"&amp;gt;
      &amp;lt;p&amp;gt;
        &amp;lt;input type="submit"&amp;gt;
      &amp;lt;/p&amp;gt;
    }</pre>
</li>
</ol>
<h2 id="e-FLQb">How it works…</h2>
<p id="e-elXe">In this recipe, we created a new URL route and action that received the uploaded file. We then pushed this file to Amazon S3 using the RhinoFly S3 module by supplying the S3 access and secret keys in <code>conf/application.conf</code>. We also specified our S3 bucket name in <code>conf/application.conf</code> for future use. We are able to retrieve this value by using Play's configuration API:</p>
<pre id="e-XX1N">val bucketName = Play.current.configuration.getString("fooscala.s3.bucketName").get</pre>
<p id="e-O2dt">We then printed the location of the uploaded file to the response body for easy verification:</p>
<pre id="e-ic0O">Ok("Image uploaded to: http://%s.s3.amazonaws.com/%s".format(bucketName, filename))</pre>
<p id="e-bcqF">You should now see the response in the web browser with the following text:</p>
<pre id="e-pvwp">Image uploaded to: http://&amp;lt;YOUR_BUCKET_NAME&amp;gt;.s3.amazonaws.com/&amp;lt;FILENAME&amp;gt;</pre>
<p id="e-g8Vi">You can also use the AWS Management Console to verify the file upload in the S3 section:</p>
<img data-width="800" data-height="544" src="Vt98tzVB.jpg"/>
<h1 id="e-LFfS">Integrating with Play application Typesafe Slick</h1>
<p id="e-wzVt">In this recipe, we will explore how we can integrate Typesafe Slick with Play applications using the <code>play-slick</code> module. Typesafe Slick is a relational mapping tool built on Scala and is handy for managing database objects like native Scala types.</p>
<h2 id="e-tO9L">How to do it…</h2>
<p id="e-yWhk">We need to take the following steps:</p>
<ol id="e-BnG1">
<li id="e-cJlz">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-Lpkv">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-NDac">Declare play-slick as a project dependency in <code>build.sbt</code>:<pre id="e-ZFsW">"com.typesafe.play" %% "play-slick" % "0.8.1"</pre>
</li>
<li id="e-tWdb">Specify your database host information in <code>foo_scala/conf/application.conf</code>:<pre id="e-GlZk">db.default.driver=org.h2.Driver
    db.default.url="jdbc:h2:mem:play"
    db.default.user=sa
    db.default.password=""
    slick.default="models.*"</pre>
</li>
<li id="e-AtlF">Create the new supplier controller in <code>foo_scala/app/controllers/SupplierController.scala</code> with the following content:<pre id="e-RCWp">package controllers
        import play.api.mvc.{BodyParsers, Controller}
       import play.api.db.slick._
       import play.api.libs.json._
       import play.api.Play.current
       import models._
        object SupplierController extends Controller {
         implicit val supplierWrites = Json.writes[Supplier]
         implicit val supplierReads = Json.reads[Supplier]
          def index = DBAction { implicit rs =&amp;gt;
           Ok(Json.toJson(Suppliers.list))
         }
          def create = DBAction(BodyParsers.parse.json) { implicit rs =&amp;gt;
           val post = rs.request.body.validate[Supplier]
           post.fold(
             errors =&amp;gt; {
               BadRequest(Json.obj("status" -&amp;gt;"error", "message" -&amp;gt; JsError.toFlatJson(errors)))
             },
             supplier =&amp;gt; {
               Suppliers.create(supplier)
               Created(Json.toJson(supplier))
             }
           )
         }
       }</pre>
</li>
<li id="e-kble">Create a Slick mapping for suppliers in the <code>foo_scala/app/models/Suppliers.scala</code> file with the following content:<pre id="e-dMyl">package models
     import scala.slick.driver.H2Driver.simple._
    import scala.slick.lifted.Tag
     case class Supplier(id: Option[Int], name: String, contactNo: String)
     class Suppliers(tag: Tag) extends Table[Supplier](tag, "SUPPLIERS") {
      def id = column[Int]("ID", O.PrimaryKey, O.AutoInc)
      def name = column[String]("NAME")
      def contactNo = column[String]("CONTACT_NO")
       def * = (id.?, name, contactNo) &amp;lt;&amp;gt; (Supplier.tupled, Supplier.unapply)
    }
     object Suppliers {
      val suppliers = TableQuery[Suppliers]
       def list(implicit s: Session) = suppliers.sortBy(m =&amp;gt; m.name.asc).list
      def create(supplier: Supplier)(implicit s: Session) = suppliers.insert(supplier)
    }</pre>
</li>
<li id="e-scJP">Add the new routes for the <code>Supplier</code> controller in <code>foo_scala/conf/routes</code>:<pre id="e-Nphy">GET  /suppliers    controllers.SupplierController.index
    POST  /suppliers    controllers.SupplierController.create</pre>
</li>
<li id="e-Yb7z">Request the new <code>Post</code> route and examine the response headers and body to confirm that the record was inserted in the database:<pre id="e-Nvel">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v -X POST http://localhost:9000/suppliers --header "Content-type: application/json" --data '{"name":"Ned Flanders", "contactNo":"555-1234"}'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; POST /suppliers HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Content-type: application/json&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Content-Length: 47&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * upload completely sent off: 47 out of 47 bytes&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 201 Created&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: application/json; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 46&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    {"name":"Ned Flanders","contactNo":"555-1234"}%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-x9oZ">Request the listing route and verify that it is, in fact, returning records from the database:<pre id="e-wsI1">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://localhost:9000/suppliers&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /suppliers HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: application/json; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 110&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [{"id":1,"name":"Maud Flanders","contactNo":"555-1234"},{"id":2,"name":"Ned Flanders","contactNo":"712-1234"}]%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<h2 id="e-nzcR">How it works…</h2>
<p id="e-YTea">In this recipe, we created a new URL route and action that will create and retrieve suppliers from the <code>H2</code> database. We used Typesafe Slick as the relational mapping tool for creating queries and inserts. We started by declaring the required dependencies in <code>build.sbt</code>. Next, we defined the mapping properties for suppliers in <code>foo_scala/app/models/Supplier.scala</code>.</p>
<p id="e-JJwa">In the mapping file, we declared our case class supplier. We also declared our Slick table mapping class. Lastly, we added our suppliers object class that should ideally contain all the required functions for data insertion and querying. We added the appropriate routes to the <code>conf/routes</code> file and ran the database evolution. This allows Slick to automatically manage table creation and column syncing. To test our implementation, we used curl to request our <code>POST</code> and <code>GET</code> endpoints to be able to view the response headers and body.</p>

<h1 id="e-sW50">Utilizing play-mailer</h1>
<p id="e-mH6B">For this recipe, we will explore how Play applications can send e-mails. We will use the Play module play-mailer to achieve this. We will be utilizing Mandrill, a cloud e-mailer service, to send out e-mails. For more information about Mandrill, please refer to <a href="https://mandrill.com/">https://mandrill.com/</a>.</p>
<h2 id="e-zuSe">How to do it…</h2>
<p id="e-aSk5">For Java, we need to take the following steps:</p>
<ol id="e-kLmg">
<li id="e-jRCF">Run the <code>foo_java</code> application with Hot-Reloading enabled:<pre id="e-emm8">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-WI3b">Declare play-mailer as a project dependency in <code>build.sbt</code>:<pre id="e-acur">"com.typesafe.play.plugins" %% "play-plugins-mailer" % "2.3.1"</pre>
</li>
<li id="e-RZqz">Enable the play-mailer plugin by declaring it in <code>foo_java/conf/play.plugins</code>:<pre id="e-x2Qx">1500:com.typesafe.plugin.CommonsMailerPlugin</pre>
</li>
<li id="e-LMmP">Specify your <code>smtp</code> host information in <code>foo_java/conf/application.conf</code>:<pre id="e-zZbk">smtp.host=smtp.mandrillapp.com
    smtp.port=25
    smtp.user="YOUR OWN USER HERE"
    smtp.password="YOUR OWN PASSWORD HERE"
    smtp.mock=true</pre>
</li>
<li id="e-jd8d">Modify <code>foo_java/app/controllers/Application.java</code> by adding the following code:<pre id="e-lkEy">import play.libs.F;
    import play.libs.F.Function;
    import play.libs.F.Promise;
    import com.typesafe.plugin.*;
     public static Promise&amp;lt;Result&amp;gt; emailSender() {
        Promise&amp;lt;Boolean&amp;gt; emailResult = Promise.promise(
            new F.Function0&amp;lt;Boolean&amp;gt;() {
                @Override
                public Boolean apply() throws Throwable {
                    try {
                        MailerAPI mail = play.Play.application().plugin(MailerPlugin.class).email();
                        mail.setSubject("mailer");
                        mail.setRecipient("ginduc@dynamicobjx.com");
                        mail.setFrom("Play Cookbook &amp;lt;noreply@email.com&amp;gt;");
                        mail.send("text");
                         return true;
                    } catch (Exception e) {
                        e.printStackTrace();
                        return false;
                    }
                }
            }
        );
         return emailResult.map(
            new Function&amp;lt;Boolean, Result&amp;gt;() {
                @Override
                public Result apply(Boolean sent) throws Throwable {
                    if (sent) {
                        return ok("Email sent!");
                    } else {
                        return ok("Email was not sent!");
                    }
                }
            }
        );
    }</pre>
</li>
<li id="e-JJKJ">Add a new routes entry for the newly added action to <code>foo_java/conf/routes</code>:<pre id="e-TjmC">POST  /send_email    controllers.Application.emailSender</pre>
</li>
<li id="e-oktf">Request our new route and examine the response headers to confirm our modifications to the HTTP response header:<pre id="e-o1G8">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v -X POST http://localhost:9000/send_email&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; POST /send_email HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 11&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Email sent!%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<p id="e-JpSv">For Scala, we need to take the following steps:</p>
<ol id="e-kHXK">
<li id="e-qKZ6">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-uhhf">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-rCbn">Declare play-mailer as a project dependency in <code>build.sbt</code>:<pre id="e-TCXL">"com.typesafe.play.plugins" %% "play-plugins-mailer" % "2.3.1"</pre>
</li>
<li id="e-dR67">Enable the play-mailer plugin by declaring it in <code>foo_scala/conf/play.plugins</code>:<pre id="e-f8PP">1500:com.typesafe.plugin.CommonsMailerPlugin</pre>
</li>
<li id="e-tWyW">Specify your <code>smtp</code> host information in <code>foo_scala/conf/application.conf</code>:<pre id="e-kLK8">smtp.host=smtp.mandrillapp.com
    smtp.port=25
    smtp.user="YOUR OWN USER HERE"
    smtp.password="YOUR OWN PASSWORD HERE"
    smtp.mock=true</pre>
</li>
<li id="e-VSz4">Modify <code>foo_scala/app/controllers/Application.scala</code> by adding the following action:<pre id="e-zUsK">import scala.concurrent._
       import com.typesafe.plugin._
       import play.api.libs.concurrent.Execution.Implicits._
    import play.api.Play.current
     def emailSender = Action.async {
          sendEmail.map { messageId =&amp;gt; 
        Ok("Sent email with Message ID: " + messageId)
         }
       }
     def sendEmail = Future {  
      val mail = use[MailerPlugin].email
       mail.setSubject("Play mailer")
      mail.setRecipient("ginduc@dynamicobjx.com")
      mail.setFrom("Play Cookbook &amp;lt;noreply@email.com&amp;gt;")
      mail.send("text")
    }</pre>
</li>
<li id="e-lk3v">Add a new routes entry for the newly added action to <code>foo_scala/conf/routes</code>:<pre id="e-BtGm">POST  /send_email    controllers.Application.emailSender</pre>
</li>
<li id="e-WKRd">Request our new route and examine the response headers to confirm our modifications to the HTTP response header:<pre id="e-Wggy">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v -X POST http://localhost:9000/send_email&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying ::1...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to localhost (::1) port 9000 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; POST /send_email HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: localhost:9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/plain; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 30&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connection #0 to host localhost left intact&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Sent email with Message ID: ()%&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<h2 id="e-Js30">How it works…</h2>
<p id="e-SBG7">In this recipe, we created a new URL route and action that will invoke our newly added <code>sendMail</code> function. We declared the module dependency in <code>foo_scala/build.sbt</code> and specified our <code>smtp</code> server settings in <code>foo_scala/conf/application.conf</code>. After this, we invoked the URL route using <code>curl</code> in the terminal to test out our e-mail sender. You should now receive the e-mail in your e-mail client software.</p>

<h1 id="e-w9zn">Integrating Bootstrap and WebJars</h1>
<p id="e-FnAa">For this recipe, we will explore how we can integrate and utilize the popular frontend framework Bootstrap with a Play 2 web application. We will integrate Bootstrap using WebJars, which is a tool to package frontend libraries into JAR files that can then be easily managed (in our case, by <code>sbt</code>).</p>
<h2 id="e-vEks">How to do it…</h2>
<p id="e-AkcT">For Java, we need to take the following steps:</p>
<ol id="e-pNqs">
<li id="e-odRV">Run the <code>foo_java</code> application with Hot-Reloading enabled:<pre id="e-AMvH">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-ud3Q">Declare Bootstrap and WebJars as a project dependency in <code>build.sbt</code>:<pre id="e-Nqqa">"org.webjars" % "bootstrap" % "3.3.1",
    "org.webjars" %% "webjars-play" % "2.3.0"</pre>
</li>
<li id="e-d5A5">Modify <code>foo_java/app/controllers/Application.java</code> by adding the following code:<pre id="e-D4lW">public static Result bootstrapped() {
         return ok(views.html.bootstrapped.render());
       }</pre>
</li>
<li id="e-ASXv">Add the new route entries to <code>foo_java/conf/routes</code>:<pre id="e-rKwD">GET     /webjars/*file        controllers.WebJarAssets.at(file)
    GET     /bootstrapped         controllers.Application.bootstrapped</pre>
</li>
<li id="e-gdU5">Create the new layout View template in <code>foo_java/app/views/mainLayout.scala.html</code> with the following content:<pre id="e-TIkw">@(title: String)(content: Html)&amp;lt;!DOCTYPE html&amp;gt;
 &amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset="utf-8"&amp;gt;
    &amp;lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&amp;gt;
    &amp;lt;meta name="viewport" content="width=device-width, initial-scale=1"&amp;gt;
    &amp;lt;meta name="description" content=""&amp;gt;
    &amp;lt;meta name="author" content=""&amp;gt;
    &amp;lt;title&amp;gt;@title&amp;lt;/title&amp;gt;
    &amp;lt;link rel="shortcut icon" type="image/png" href='@routes.Assets.at("images/favicon.png")'&amp;gt;
    &amp;lt;link rel="stylesheet" media="screen" href='@routes.WebJarAssets.at(WebJarAssets.locate("css/bootstrap.min.css"))' /&amp;gt;
    &amp;lt;link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/app.css")'/&amp;gt;
    &amp;lt;style&amp;gt;
        body {
          padding-top: 50px;
        }
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;nav class="navbar navbar-inverse navbar-fixed-top" role="navigat   ion"&amp;gt;
    &amp;lt;div class="container-fluid"&amp;gt;
        &amp;lt;div class="navbar-header"&amp;gt;
            &amp;lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&amp;gt;
                &amp;lt;span class="sr-only"&amp;gt;Toggle navigation&amp;lt;/span&amp;gt;
                &amp;lt;span class="icon-bar"&amp;gt;&amp;lt;/span&amp;gt;
                &amp;lt;span class="icon-bar"&amp;gt;&amp;lt;/span&amp;gt;
                &amp;lt;span class="icon-bar"&amp;gt;&amp;lt;/span&amp;gt;
            &amp;lt;/button&amp;gt;
            &amp;lt;a class="navbar-brand" href="#"&amp;gt;Admin&amp;lt;/a&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div id="navbar" class="navbar-collapse collapse"&amp;gt;
            &amp;lt;ul class="nav navbar-nav navbar-right"&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Dashboard&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Settings&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Profile&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Help&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
        &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/nav&amp;gt;
 &amp;lt;div class="container-fluid"&amp;gt;
    &amp;lt;div class="row"&amp;gt;
        &amp;lt;div class="col-sm-3 col-md-2 sidebar"&amp;gt;
            &amp;lt;ul class="nav nav-sidebar"&amp;gt;
                &amp;lt;li class="active"&amp;gt;&amp;lt;a href="#"&amp;gt;Overview &amp;lt;span class="sr-only"&amp;gt;(current)&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Reports&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Analytics&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Export&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
            &amp;lt;ul class="nav nav-sidebar"&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href=""&amp;gt;Users&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href=""&amp;gt;Audit Log&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
            &amp;lt;ul class="nav nav-sidebar"&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href=""&amp;gt;Sign out&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"&amp;gt;
            @content
        &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
 &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;</pre>
</li>
<li id="e-UJkc">Create the Bootstrapped View template in <code>foo_java/app/views/bootstrapped.scala.html</code> with the following content:<pre id="e-pZEj">@mainLayout("Bootstrapped") {
&amp;lt;div class="hero-unit"&amp;gt;
    &amp;lt;h1&amp;gt;Hello, world!&amp;lt;/h1&amp;gt;
    &amp;lt;p&amp;gt;This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.&amp;lt;/p&amp;gt;
    &amp;lt;p&amp;gt;&amp;lt;a href="#" class="btn btn-primary btn-large"&amp;gt;Learn more &amp;amp;raquo;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
}</pre>
</li>
<li id="e-Ckim">Request our new Bootstrapped route (<code>http://localhost:9000/bootstrapped</code>) using a web browser and examine the rendered page using a Bootstrap template:<img data-width="800" data-height="637" src="TwofsdMh.jpg"/>
</li>
</ol>
<p id="e-CAWx">For Scala, we need to take the following steps:</p>
<ol id="e-XOWl">
<li id="e-G0V6">Run the <code>foo_scala</code> application with Hot-Reloading enabled:<pre id="e-X6Zp">&lt;span class="strong"&gt;&lt;strong&gt;    activator "~run"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-Zf1P">Declare Bootstrap and WebJars as a project dependency in <code>build.sbt</code>:<pre id="e-sUJI">"org.webjars" % "bootstrap" % "3.3.1",
    "org.webjars" %% "webjars-play" % "2.3.0"</pre>
</li>
<li id="e-ZEbK">Modify <code>foo_scala/app/controllers/Application.scala</code> by adding the following action:<pre id="e-n64l">def bootstrapped = Action {
         Ok(views.html.bootstrapped())
       }</pre>
</li>
<li id="e-QoXD">Add the new route entries to <code>foo_scala/conf/routes</code>:<pre id="e-FStZ">GET     /webjars/*file        controllers.WebJarAssets.at(file)
    GET     /bootstrapped         controllers.Application.bootstrapped</pre>
</li>
<li id="e-bTpq">Create the new layout view template in <code>foo_scala/app/views/mainLayout.scala.html</code> with the following content:<pre id="e-Gnwp">@(title: String)(content: Html)&amp;lt;!DOCTYPE html&amp;gt;
 &amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset="utf-8"&amp;gt;
    &amp;lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&amp;gt;
    &amp;lt;meta name="viewport" content="width=device-width, initial-scale=1"&amp;gt;
    &amp;lt;meta name="description" content=""&amp;gt;
    &amp;lt;meta name="author" content=""&amp;gt;
    &amp;lt;title&amp;gt;@title&amp;lt;/title&amp;gt;
    &amp;lt;link rel="shortcut icon" type="image/png" href='@routes.Assets.at("images/favicon.png")'&amp;gt;
    &amp;lt;link rel="stylesheet" media="screen" href='@routes.WebJarAssets.at(WebJarAssets.locate("css/bootstrap.min.css"))' /&amp;gt;
    &amp;lt;link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/app.css")'/&amp;gt;
    &amp;lt;style&amp;gt;
        body {
          padding-top: 50px;
        }
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;nav class="navbar navbar-inverse navbar-fixed-top" role="navigat   ion"&amp;gt;
    &amp;lt;div class="container-fluid"&amp;gt;
        &amp;lt;div class="navbar-header"&amp;gt;
            &amp;lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&amp;gt;
                &amp;lt;span class="sr-only"&amp;gt;Toggle navigation&amp;lt;/span&amp;gt;
                &amp;lt;span class="icon-bar"&amp;gt;&amp;lt;/span&amp;gt;
                &amp;lt;span class="icon-bar"&amp;gt;&amp;lt;/span&amp;gt;
                &amp;lt;span class="icon-bar"&amp;gt;&amp;lt;/span&amp;gt;
            &amp;lt;/button&amp;gt;
            &amp;lt;a class="navbar-brand" href="#"&amp;gt;Admin&amp;lt;/a&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div id="navbar" class="navbar-collapse collapse"&amp;gt;
            &amp;lt;ul class="nav navbar-nav navbar-right"&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Dashboard&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Settings&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Profile&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Help&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
        &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/nav&amp;gt;
 &amp;lt;div class="container-fluid"&amp;gt;
    &amp;lt;div class="row"&amp;gt;
        &amp;lt;div class="col-sm-3 col-md-2 sidebar"&amp;gt;
            &amp;lt;ul class="nav nav-sidebar"&amp;gt;
                &amp;lt;li class="active"&amp;gt;&amp;lt;a href="#"&amp;gt;Overview &amp;lt;span class="sr-only"&amp;gt;(current)&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Reports&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Analytics&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href="#"&amp;gt;Export&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
            &amp;lt;ul class="nav nav-sidebar"&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href=""&amp;gt;Users&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href=""&amp;gt;Audit Log&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
            &amp;lt;ul class="nav nav-sidebar"&amp;gt;
                &amp;lt;li&amp;gt;&amp;lt;a href=""&amp;gt;Sign out&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
            &amp;lt;/ul&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"&amp;gt;
            @content
        &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
 &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;</pre>
</li>
<li id="e-QQJD">Create the bootstrapped View template in <code>foo_scala/app/views/bootstrapped.scala.html</code> with the following content:<pre id="e-Q2C5">@mainLayout("Bootstrapped") {
&amp;lt;div class="hero-unit"&amp;gt;
    &amp;lt;h1&amp;gt;Hello, world!&amp;lt;/h1&amp;gt;
    &amp;lt;p&amp;gt;This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.&amp;lt;/p&amp;gt;
    &amp;lt;p&amp;gt;&amp;lt;a href="#" class="btn btn-primary btn-large"&amp;gt;Learn more &amp;amp;raquo;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
}</pre>
</li>
<li id="e-kxQm">Request our new bootstrapped route (<code>http://localhost:9000/bootstrapped</code>) using a web browser and examine the rendered page using a Bootstrap template:<img data-width="800" data-height="638" src="Zhuvkkee.jpg"/>
</li>
</ol>
<h2 id="e-Myct">How it works…</h2>
<p id="e-VRXu">In this recipe, instead of downloading Bootstrap separately and managing different versions manually, we used the Play module and WebJars, declaring Bootstrap as a frontend dependency in <code>build.sbt</code>. We created the new View templates containing the Bootstrap template. We then created a new URL route that will utilize these new Bootstrap-based views.</p>
</body></html>