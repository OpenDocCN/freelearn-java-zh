<html><head></head><body><h1 id="e-Sx9X">Chapter 7. Deploying Play 2 Web Apps</h1>
<p id="e-vdov">In this chapter, we will cover the following recipes:</p>
<ul id="e-A8gA">
<li id="e-b517">Deploying a Play application on Heroku</li>
<li id="e-UcJ8">Deploying a Play application on AWS Elastic Beanstalk</li>
<li id="e-sJla">Deploying a Play application with CoreOS and Docker</li>
<li id="e-NVye">Deploying a Play application with Dokku</li>
<li id="e-Tw4T">Deploying a Play application with Nginx</li>
</ul>
<h1 id="e-KHA8">Introduction</h1>
<p id="e-fKNw">In this chapter, we will explore various deployment options for a Play 2.0 web application. In the advent of numerous cloud-based services, such as <strong>Infrastructure as a Service</strong> (<strong>IaaS</strong>) and <strong>Platform as a Service</strong> (<strong>PaaS</strong>) service offerings, we are given multiple options on how we can deploy our Play 2.0 into different environments, be it for development, testing, integration, or production.</p>
<p id="e-EBgm">We explore this using popular developer services such as Heroku and Amazon web services. We will also look into using popular developer tools such as <strong>Docker</strong> and <strong>Dokku</strong> to deploy Play 2 web applications.</p>
<p id="e-JF4k">We will also use two different operating systems as our base operating system in <strong>CentOS</strong> and <strong>CoreOS</strong>.</p>
<p id="e-bEyq">In this chapter, we aim to show the contrast in the efforts required to deploy web apps with cloud services and manually deploying web apps with a raw virtual machine. We will also look at how modern tools allow developers to be more efficient by focusing more time on development instead of doing what to the infrastructure.</p>

<h1 id="e-b4ES">Deploying a Play application on Heroku</h1>
<p id="e-ZH5G">In this recipe, we will deploy a Play webapp on <strong>Heroku</strong>, specifically, the Heroku Cedar stack that supports the Play Framework. Deploying on Heroku requires some knowledge in Git, the popular source control management software.</p>
<h2 id="e-KXDf">How to do it...</h2>
<ol id="e-vBnf">
<li id="e-F5hm">First, sign up for a Heroku account by visiting the following link:<p id="e-YXGK"><a href="https://signup.heroku.com/">https://signup.heroku.com/</a></p>
</li>
<li id="e-LjNZ">Install the Heroku CLI tools (more information at <a href="https://devcenter.heroku.com/articles/heroku-command">https://devcenter.heroku.com/articles/heroku-command</a>). Once installed, you should now be able to login to Heroku using the CLI tools as follows:<pre id="e-oZg1">&lt;span class="strong"&gt;&lt;strong&gt;    $ heroku login&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Enter your Heroku credentials.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Email: &amp;lt;YOUR_HEROKU_USER&amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Password (typing will be hidden):&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Authentication successful.&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-Xbho">Create our Play webapp using the activator template, <code>computer-database-scala</code>:<pre id="e-PTSV">&lt;span class="strong"&gt;&lt;strong&gt;    activator new play2-heroku computer-database-scala&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-E62m">Once our webapp has been generated, change into the project root of <code>play2-heroku</code> and initialize Git on the project:<pre id="e-wHgQ">&lt;span class="strong"&gt;&lt;strong&gt;     cd play2-heroku&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;     git init&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-JUGh">Create a new <code>heroku</code> app. The default app name will be assigned by Heroku, for this recipe, <code>shielded-dusk-8715</code>:<pre id="e-wAHM">&lt;span class="strong"&gt;&lt;strong&gt;    $ heroku create --stack cedar-14&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Creating shielded-dusk-8715... done, stack is cedar-14&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    https://shielded-dusk-8715.herokuapp.com/ | https://git.heroku.com/shielded-dusk-8715.git&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Git remote heroku added&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-pmxo">Add Heroku-specific configs in the project root directory. Optionally, you can create the file, <code>system.properties</code>, with the following contents, to specify that we will require JDK version 8:<pre id="e-n8yP">&lt;span class="strong"&gt;&lt;strong&gt;    java.runtime.version=1.8&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-L1te">Create the Heroku file, <code>Procfile</code>, which is the standard Heroku text-based file to declare your apps and to run commands and other environment variables, in the project root with the following contents:<pre id="e-vk61">&lt;span class="strong"&gt;&lt;strong&gt;    web: target/universal/stage/bin/play2-heroku -Dhttp.port=${PORT} -DapplyEvolutions.default=true&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-Rh8X">Verify the location of our new Heroku git remote with the following command:<pre id="e-Brcj">&lt;span class="strong"&gt;&lt;strong&gt;    $ git remote show heroku&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * remote heroku&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      Fetch URL: https://git.heroku.com/shielded-dusk-8715.git&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      Push  URL: https://git.heroku.com/shielded-dusk-8715.git&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      HEAD branch: unknown&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      Remote branch:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;        master tracked&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      Local branch configured for 'git pull':&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;        master merges with remote master&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;      Local ref configured for 'git push':&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;        master pushes to master (up to date)&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-JKQO">Add and commit our webapp boilerplate code to git:<pre id="e-Snv8">&lt;span class="strong"&gt;&lt;strong&gt;    git add &amp;#x2013;-all &amp;amp;&amp;amp; git commit -am "Initial commit"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-KziY">Finally, let's deploy our webapp to Heroku by pushing our local repository to the git Heroku origin:<pre id="e-YPfM">&lt;span class="strong"&gt;&lt;strong&gt;    $ git push heroku master&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Counting objects: 40, done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Delta compression using up to 8 threads.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Compressing objects: 100% (35/35), done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Writing objects: 100% (40/40), 1.01 MiB | 0 bytes/s, done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Total 40 (delta 1), reused 0 (delta 0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: Compressing source files... done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: Building source:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: -----&amp;gt; Play 2.x - Scala app detected&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: -----&amp;gt; Installing OpenJDK 1.7... done&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: -----&amp;gt; Priming Ivy cache (Scala-2.11, Play-2.3)... done&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: -----&amp;gt; Running: sbt compile stage&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    ..&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    ..&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote:        Default types for Play 2.x - Scala -&amp;gt; web&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: -----&amp;gt; Compressing... done, 95.0MB&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: -----&amp;gt; Warning: This app's git repository is large.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote:        Large repositories can cause problems.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote:        See: https://devcenter.heroku.com/articles/git#repo-size&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: -----&amp;gt; Launching... done, v6&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote:        https://shielded-dusk-8715.herokuapp.com/ deployed to Heroku&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    remote: Verifying deploy.... done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    To https://git.heroku.com/shielded-dusk-8715.git&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-l57T">Using a web browser, we are now able to access the <code>computer-database-scala</code> webapp deployed in Heroku:<img data-width="800" data-height="533" src="F207fA9i.jpg"/>
</li>
<li id="e-fZKY">The actual Heroku URL will differ; ensure that you replace your Heroku-generated app name on the URL, but for this recipe it should be deployed at:<p id="e-XfxH"><a href="https://shielded-dusk-8715.herokuapp.com">https://shielded-dusk-8715.herokuapp.com</a></p>
</li>
</ol>
<h2 id="e-rNDg">How it works...</h2>
<p id="e-yOsm">In this recipe, we deployed a Play 2.0 web application in the popular PaaS, Heroku. Deploying to Heroku requires very minimal customization and configuration, which makes it very easy for developers to quickly deploy the Play 2.0 webapps in a solid platform such as Heroku's.</p>
<p id="e-KkOW">For this recipe, we used the activator template <code>computer-database-scala</code> and used this as our sample web application, which we in turn, deployed to Heroku's Cedar stack. After setting up our web application with the template boilerplate code, we added two files that serve as configuration files for Heroku:</p>
<h3 id="e-RWJJ">Procfile</h3>
<p id="e-mtXI">In <strong>Procfile</strong>, we specify the entry point for the web application, which Heroku uses to initialize and run the web app, in this recipe, <code>bin/play2-heroku</code>. We also specify here, the port number to be used by the web app, which is dictated by the Heroku runtime, specified in the environment variable, <code>${PORT}</code>:</p>
<pre id="e-tIqW">&lt;span class="strong"&gt;&lt;strong&gt;    web: target/universal/stage/bin/play2-heroku -Dhttp.port=${PORT} -DapplyEvolutions.default=true&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-Oz04">Finally, we set a jvm property used by Play to determine whether to execute database evolution scripts or not.</p>
<pre id="e-idTE">&lt;span class="strong"&gt;&lt;strong&gt;    -DapplyEvolutions.default=true&lt;/strong&gt;&lt;/span&gt;</pre>
<h3 id="e-IKec">system.properties</h3>
<pre id="e-FmZG">&lt;span class="strong"&gt;&lt;strong&gt;    java.runtime.version=1.8&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-csVE">As an optional step, in  <code>system.properties</code>, we simply specify the version of the JDK to utilize for our Play web application.</p>
<h2 id="e-HNNa">There's more...</h2>
<p id="e-qHLH">Refer to the official Git documentation for more information about Git and post-commit hooks:</p>
<ul id="e-tKLI">
<li id="e-PWCv"><a href="http://git-scm.com/documentation/">http://git-scm.com/documentation/</a></li>
<li id="e-Iok3"><a href="http://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">http://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks</a></li>
</ul>

<h1 id="e-nYhn">Deploying a Play application on AWS Elastic Beanstalk</h1>
<p id="e-YsL6">In this recipe, we will deploy a Play 2 web application on Amazon web services' Elastic Beanstalk. <strong>Elastic Beanstalk</strong> is Amazon's Platform-as-a-Service offering and allows developers to deploy web applications with the same ease as other PAAS offerings, such as Heroku.</p>
<p id="e-S1VW">We will package our Play 2 web application as a Docker image and upload it to Elastic Beanstalk as a ZIP package. We will mostly be interacting with the AWS management console using a web browser.</p>
<p id="e-WC30">Ensure that you have signed up for an account with AWS here:</p>
<p id="e-cWNd"><a href="http://aws.amazon.com">http://aws.amazon.com</a></p>
<h2 id="e-tLq5">How to do it...</h2>
<ol id="e-XNnB">
<li id="e-WW6x">Create our Play 2 web application using the activator template, <code>computer-database-scala</code>:<pre id="e-Djds">&lt;span class="strong"&gt;&lt;strong&gt;    activator new play2-deploy-72 computer-database-scala&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-s6pm">Edit <code>conf/application.conf</code> to enable automatic database evolutions:<pre id="e-h5lR">&lt;span class="strong"&gt;&lt;strong&gt;    applyEvolutions.default=true&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-Hg1v">Edit <code>build.sbt</code> to specify Docker settings for the web app, making note of the maintainer and <code>dockerExposedPorts</code> settings, using your own Docker Hub username and web app port, respectively:<pre id="e-yjc8">import NativePackagerKeys._
    import com.typesafe.sbt.SbtNativePackager._
     name := """play2-deploy-72"""
     version := "0.0.1-SNAPSHOT"
     scalaVersion := "2.11.4"
     maintainer := "ginduc"
     dockerExposedPorts in Docker := Seq(9000)
     libraryDependencies ++= Seq(
      jdbc,
      anorm,
      "org.webjars" % "jquery" % "2.1.1",
      "org.webjars" % "bootstrap" % "3.3.1"
    )     
     lazy val root = (project in file(".")).enablePlugins(PlayScala)</pre>
</li>
<li id="e-iEGS">Create a new JSON config file specific to Elastic Beanstalk and Docker apps in the project root, <code>Dockerrun.aws.json.template</code>, with the following contents:<pre id="e-OCeT">{
      "AWSEBDockerrunVersion": "1",
      "Ports": [
        {
          "ContainerPort": "9000"
        }
      ]
    }</pre>
</li>
<li id="e-fxRg">Generate a Docker image using <code>activator</code>:<pre id="e-WEkh">&lt;span class="strong"&gt;&lt;strong&gt;    $ activator clean docker:stage&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-CxhZ">Copy the <code>Dockerrun.aws.json.template</code> file to the Docker root in <code>target/docker</code>:<pre id="e-JsRE">&lt;span class="strong"&gt;&lt;strong&gt;    $ cp Dockerrun.aws.json.template target/docker/Dockerrun.aws.json&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-ZMoT">Zip the <code>target/docker</code> directory in preparation for uploading to Elastic Beanstalk. Make a note of the location of the output ZIP file:<pre id="e-pXla">&lt;span class="strong"&gt;&lt;strong&gt;    $ cd target/docker &amp;amp;&amp;amp;  zip -r ../play2-deploy-72.zip .&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-T2K5">Once the <code>docker</code> package is prepped up, head to the AWS management console and create an Elastic Beanstalk (EB) application, ensuring that we pick Docker as the platform:<img data-width="800" data-height="561" src="Qin8fjTn.jpg"/>
</li>
<li id="e-HYU8">Once the initial EB application has been initialized, we will need to navigate to the <strong>Configuration</strong> tab and click on the cogwheel icon next to <strong>instances</strong> to edit the environment and select a different EC2 instance type, selecting <strong>t2.medium</strong> instead of <strong>t2.micro</strong> (selecting an instance type other than <strong>t2.micro</strong> means that you will be using a non-free EC2 instance):<img data-width="800" data-height="562" src="csOFqb5O.jpg"/>
</li>
<li id="e-WvSD">Once this environment change has been applied, navigate back to the dashboard page so we can proceed to uploading the <code>docker</code> package that we built earlier:<img data-width="800" data-height="562" src="iceaPPVu.jpg"/>
</li>
<li id="e-XuoY">Click on <strong>Deploy</strong>.</li>
<li id="e-sAnx">Specify the version label and deployment limits; for our recipe, we will keep the defaults. It will take a few minutes to upload and initialize but once the Play 2 web app has been deployed, we can access it from a web browser using the link next to <strong>Default Environment</strong> under the dashboard tab:<img data-width="800" data-height="561" src="dU0SP7IB.jpg"/>
</li>
</ol>
<h2 id="e-d115">How it works...</h2>
<p id="e-TuTW">In this recipe, we deployed a Play 2 web application to AWS Elastic Beanstalk. We packaged our Play 2 web app as a Docker image and zipped it before uploading on the AWS Management Console using a web browser. More information regarding sbt and Docker integration can be found here:</p>
<p id="e-Kfmy"><a href="https://github.com/sbt/sbt-native-packager">https://github.com/sbt/sbt-native-packager</a></p>
<p id="e-gkut">We made very minimal modifications to the <code>build.sbt</code> to specify the Docker-specific settings required during the build phase:</p>
<pre id="e-yTG7">import NativePackagerKeys._
    import com.typesafe.sbt.SbtNativePackager._
    /* ... */
     maintainer := "ginduc"
     dockerExposedPorts in Docker := Seq(9000)</pre>
<p id="e-expS">We imported the necessary packages that contain the sbt and Docker integrations, and placed them at the top of the file, <code>build.sbt</code>. We then specified the maintainer and the port number to be used by the docker container, in this recipe, port number 9000.</p>
<p id="e-S90B">We added an Elastic Beanstalk-Docker configuration file in the project root, <code>Dockerrun.aws.json</code>, which specifies the run version and docker container port that we will be utilizing, in JSON format:</p>
<pre id="e-dE9D">{
      "AWSEBDockerrunVersion": "1",
      "Ports": [
        {
          "ContainerPort": "9000"
        }
      ]
    }</pre>
<p id="e-numZ">A final deployment configuration step worth noting is modifying the EC2 instance type set by default by Elastic Beanstalk from a <code>t2.micro</code> to a <code>t2.medium</code> instance type. A <code>t2.medium</code> instance is a non-free EC2 instance, which means you will incur costs for using this EC2 instance type. This is necessary as we may encounter JVM issues when using an instance type with less than 2 GB of RAM. Applying this environment change will require Elastic Beanstalk to reinitialize the environment and should take a few minutes to complete. We can then proceed to uploading and deploying our prepackaged Docker image using the AWS Management Console.</p>
<img data-width="800" data-height="579" src="pJPg4KCY.jpg"/><p id="e-IJom">Once deployment on the AWS Management Console is completed, we are able to access the <code>computer-database-scala</code> web application from its Elastic Beanstalk URL by using a web browser.</p>
<h2 id="e-KZuH">There's more...</h2>
<p id="e-ZXLy">Refer to the online documentation for more information about AWS Elastic Beanstalk:</p>
<p id="e-GSf8"><a href="http://aws.amazon.com/elasticbeanstalk/developer-resources/">http://aws.amazon.com/elasticbeanstalk/developer-resources/</a></p>

<h1 id="e-WTOP">Deploying a Play application on CoreOS and Docker</h1>
<p id="e-gMXq">In this recipe, we will deploy a Play 2 web application using CoreOS and Docker. <strong>CoreOS</strong> is a new, lightweight operating system ideal for modern application stacks. Together with Docker, a software container management system, this forms a formidable deployment environment for Play 2 web applications that boasts of simplified deployments, isolation of processes, ease in scalability, and so on.</p>
<p id="e-lypf">For this recipe, we will utilize the popular cloud IaaS, Digital Ocean. Ensure that you sign up for an account here:</p>
<p id="e-slXt"><a href="https://cloud.digitalocean.com/registrations/new">https://cloud.digitalocean.com/registrations/new</a></p>
<p id="e-V7KW">This recipe also requires Docker to be installed in the developer's machine. Refer to the official Docker documentation regarding installation:</p>
<p id="e-aBo3"><a href="https://docs.docker.com/installation/">https://docs.docker.com/installation/</a></p>
<h2 id="e-MFkW">How to do it...</h2>
<ol id="e-cZZ2">
<li id="e-uhfc">Create a new Digital Ocean droplet using CoreOS as the base operating system. Ensure that you use a droplet with at least 1 GB of RAM for the recipe to work. note that Digital Ocean does not have a free tier and are all paid instances:<img data-width="800" data-height="530" src="KOi8mtKo.jpg"/>
</li>
<li id="e-G4RN">Ensure that you select the appropriate droplet region:<img data-width="800" data-height="530" src="pga8Ku9w.jpg"/>
</li>
<li id="e-iHGq">Select <strong>CoreOS 607.0.0</strong> and specify a <strong>SSH key</strong> to use. Visit the following link if you need more information regarding SSH key generation:<p id="e-ElXe"><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2">https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2</a>:</p>
</li>
<li id="e-rjYq">Once the Droplet is created, make a special note of the Droplet's IP address which we will use to log in to the Droplet:<img data-width="800" data-height="530" src="BRPaz2bm.jpg"/>
</li>
<li id="e-WKTp">Next, create a <a href="http://Docker.com">Docker.com</a> account at <a href="https://hub.docker.com/account/signup/">https://hub.docker.com/account/signup/</a>
</li>
<li id="e-Fl4J">Create a new repository to house the <strong>play2-deploy-73</strong> docker image that we will use for deployment:<img data-width="800" data-height="575" src="Xt9p8c8H.jpg"/>
</li>
<li id="e-IKss">Create a new Play 2 webapp using the activator template, <code>computer-database-scala</code>, and change into the project root:<pre id="e-KjUB">&lt;span class="strong"&gt;&lt;strong&gt;    activator new play2-deploy-73 computer-database-scala &amp;amp;&amp;amp; cd  play2-deploy-73&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-EqYy">Edit <code>conf/application.conf</code> to enable automatic database evolutions:<pre id="e-skZP">applyEvolutions.default=true</pre>
</li>
<li id="e-GPul">Edit <code>build.sbt</code> to specify Docker settings for the web app:<pre id="e-mvDS">import NativePackagerKeys._
    import com.typesafe.sbt.SbtNativePackager._
     name := """play2-deploy-73"""
     version := "0.0.1-SNAPSHOT"
     scalaVersion := "2.11.4"
     maintainer := "&amp;lt;YOUR_DOCKERHUB_USERNAME HERE&amp;gt;"
     dockerExposedPorts in Docker := Seq(9000)
     dockerRepository := Some("YOUR_DOCKERHUB_USERNAME HERE ")
     libraryDependencies ++= Seq(
      jdbc,
      anorm,
      "org.webjars" % "jquery" % "2.1.1",
      "org.webjars" % "bootstrap" % "3.3.1"
    )     
     lazy val root = (project in file(".")).enablePlugins(PlayScala)</pre>
</li>
<li id="e-zKaM">Next, we build the Docker image and publish it to Docker Hub:<pre id="e-zOr9">&lt;span class="strong"&gt;&lt;strong&gt;    $ activator clean docker:stage docker:publish&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    ..&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 0 : FROM dockerfile/java&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; 68987d7b6df0&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 1 : MAINTAINER ginduc&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; Using cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; 9f856752af9e&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 2 : EXPOSE 9000&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; Using cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; 834eb5a7daec&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 3 : ADD files /&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; c3c67f0db512&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Removing intermediate container 3b8d9c18545e&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 4 : WORKDIR /opt/docker&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; Running in 1b150e98f4db&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; ae6716cd4643&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Removing intermediate container 1b150e98f4db&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 5 : RUN chown -R daemon .&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; Running in 9299421b321e&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; 8e15664b6012&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Removing intermediate container 9299421b321e&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 6 : USER daemon&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; Running in ea44f3cc8e11&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; 5fd0c8a22cc7&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Removing intermediate container ea44f3cc8e11&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 7 : ENTRYPOINT bin/play2-deploy-73&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; Running in 7905c6e2d155&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; 47fded583dd7&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Removing intermediate container 7905c6e2d155&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Step 8 : CMD&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; Running in b807e6360631&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info]  ---&amp;gt; c3e1999cfbfd&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Removing intermediate container b807e6360631&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Successfully built c3e1999cfbfd&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Built image ginduc/play2-deploy-73:0.0.2-SNAPSHOT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] The push refers to a repository [ginduc/play2-deploy-73] (len: 1)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Sending image list&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Pushing repository ginduc/play2-deploy-73 (1 tags)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Pushing tag for rev [c3e1999cfbfd] on {https://cdn-registry-1.docker.io/v1/repositories/ginduc/play2-deploy-73/tags/0.0.2-SNAPSHOT}&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Published image ginduc/play2-deploy-73:0.0.2-SNAPSHOT&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-NOX0">Once the Docker image has been published, log in to the Digital Ocean droplet using SSH to pull the uploaded docker image. You will need to use the <code>core</code> user for your CoreOS Droplet:<pre id="e-XgrC">&lt;span class="strong"&gt;&lt;strong&gt;    ssh core@&amp;lt;DROPLET_IP_ADDRESS HERE&amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    core@play2-deploy-73 ~ $ docker pull &amp;lt;YOUR_DOCKERHUB_USERNAME HERE&amp;gt;/play2-deploy-73:0.0.1-SNAPSHOT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Pulling repository ginduc/play2-deploy-73&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    6045dfea237d: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    511136ea3c5a: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    f3c84ac3a053: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    a1a958a24818: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    709d157e1738: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    d68e2305f8ed: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    b87155bee962: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    2097f889870b: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    5d2fb9a140e9: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    c5bdb4623fac: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    68987d7b6df0: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    9f856752af9e: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    834eb5a7daec: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    fae5f7dab7bb: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    ee5ccc9a9477: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    74b51b6dcfe7: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    41791a2546ab: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    8096c6beaae7: Download complete&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Status: Downloaded newer image for &amp;lt;YOUR_DOCKERHUB_USERNAME HERE&amp;gt;/play2-deploy-73:0.0.2-SNAPSHOT&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-kR0d">We are now ready to run our Docker image using the following <code>docker</code> command:<pre id="e-CHvp">&lt;span class="strong"&gt;&lt;strong&gt;    core@play2-deploy-73 ~ $ docker run -p 9000:9000 &amp;lt;YOUR_DOCKERHUB_USERNAME_HERE&amp;gt;/play2-deploy-73:0.0.1-SNAPSHOT&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-JojO">Using a web browser, access the computer-database webapp using the IP address we made note of in an earlier step of this recipe (<code>http://192.241.239.43:9000/computers</code>):<img data-width="800" data-height="575" src="yqvN3YPu.jpg"/>
</li>
</ol>
<h2 id="e-iRlM">How it works...</h2>
<p id="e-sbEq">In this recipe, we deployed a Play 2 web application by packaging it as a Docker image and then installing and running the same Docker image in a Digital Ocean Droplet. Firstly, we will need an account on <a href="http://DigitalOcean.com">DigitalOcean.com</a> and <a href="http://Docker.com">Docker.com</a>.</p>
<p id="e-R22T">Once our accounts are ready and verified, we create a CoreOS-based droplet. CoreOS has Docker installed by default, so all we need to install in the droplet is the Play 2 web app Docker image.</p>
<p id="e-iqgE">The Play 2 web app Docker image is based on the activator template, <code>computer-database-scala</code>, which we named <code>play2-deploy-73</code>.</p>
<p id="e-zLl3">We make two modifications to the boilerplate code. The first modification in <code>conf/application.conf</code>:</p>
<pre id="e-U6fa">applyEvolutions.default=true</pre>
<p id="e-MJZF">This setting enables database evolutions by default. The other modification is to be made in <code>build.sbt</code>. We import the required packages that contain the Docker-specific settings:</p>
<pre id="e-moyL">import NativePackagerKeys._
    import com.typesafe.sbt.SbtNativePackager._</pre>
<p id="e-nip2">The next settings are to specify the repository maintainer, the exposed Docker ports, and the Docker repository in <a href="http://Docker.com">Docker.com</a>; in this case,  supply your own Docker Hub username as the maintainer and Docker repository values:</p>
<pre id="e-bDV4">maintainer := "&amp;lt;YOUR DOCKERHUB_USERNAME&amp;gt;"
     dockerExposedPorts in Docker := Seq(9000)
     dockerRepository := Some("&amp;lt;YOUR_DOCKERHUB_USERNAME&amp;gt;")</pre>
<p id="e-cLtG">We can now build Docker images using the <code>activator</code> command, which will generate all the necessary files for building a Docker image:</p>
<pre id="e-qjGI">&lt;span class="strong"&gt;&lt;strong&gt;    activator clean docker:stage&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-k8sE">Now, we will use the activator docker command to upload and publish to your specified <a href="http://Docker.com">Docker.com</a> repository:</p>
<pre id="e-O4Z0">&lt;span class="strong"&gt;&lt;strong&gt;    activator clean docker:publish&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-wZEV">To install the Docker image in our Digital Ocean Droplet, we first log in to the droplet using the <code>core</code> user:</p>
<pre id="e-jWqq">&lt;span class="strong"&gt;&lt;strong&gt;    ssh core@&amp;lt;DROPLET_IP_ADDRESS&amp;gt;&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-b8JL">We then use the docker command, <code>docker pull</code>, to download the play2-deploy-73 image from <a href="http://Docker.com">Docker.com</a>, specifying the tag:</p>
<pre id="e-YWdR">&lt;span class="strong"&gt;&lt;strong&gt;    docker pull &amp;lt;YOUR_DOCKERHUB_USERNAME&amp;gt;/play2-deploy-73:0.0.1-SNAPSHOT&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-hMrz">Finally, we can run the Docker image using the <code>docker run</code> command, exposing the container port <code>9000</code>:</p>
<pre id="e-Y2JF">&lt;span class="strong"&gt;&lt;strong&gt;    docker run -p 9000:9000 &amp;lt;YOUR_DOCKERHUB_USERNAME&amp;gt;/play2-deploy-73:0.0.1-SNAPSHOT&lt;/strong&gt;&lt;/span&gt;</pre>
<h2 id="e-f7De">There's more...</h2>
<p id="e-ojMF">Refer to the following links for more information on Docker and Digital Ocean:</p>
<ul id="e-B09l">
<li id="e-Kz4W"><a href="https://www.docker.com/whatisdocker/">https://www.docker.com/whatisdocker/</a></li>
<li id="e-mc0z"><a href="https://www.digitalocean.com/community/tags/docker">https://www.digitalocean.com/community/tags/docker</a></li>
</ul>

<h1 id="e-VVvj">Deploying a Play application with Dokku</h1>
<p id="e-ANZf">In this recipe, we will use the Docker-based tool, Dokku, to manage our Play 2 web application deployment. <strong>Dokku</strong> provides a very straightforward deployment interface, quite similar to Heroku's deployment interface and allows developers to quickly deploy Play 2 web apps.</p>
<p id="e-CX0P">We will have Dokku running and will deploy our Play 2 web application in a Digital Ocean Droplet. We will need a Droplet with at least 2GB of RAM to run our sample webapp. Ensure that you sign up for a Digital Ocean account to follow this recipe:</p>
<p id="e-z07q"><a href="https://cloud.digitalocean.com/registrations/new">https://cloud.digitalocean.com/registrations/new</a></p>
<h2 id="e-jEiJ">How to do it...</h2>
<ol id="e-s58W">
<li id="e-Edoe">Prepare your deployment droplet by creating a new 2GB RAM Droplet with <strong>Dokku v0.3.15 on 14.04</strong> or higher application option pre-installed:<img data-width="800" data-height="530" src="SD7Arw3g.jpg"/>
</li>
<li id="e-Pv17">Once droplet creation is completed, you can verify the Droplet settings on the dashboard, ensuring that it is configured with 2GB of RAM and making note of the assigned IP address for the droplet:<img data-width="800" data-height="601" src="e6asnGU0.jpg"/>
</li>
<li id="e-bEf7">Next, we will need to complete the Dokku installation by accessing the web port of our newly created droplet; this can be done by accessing the Droplet's assigned IP address using a web browser to confirm the Dokku settings, such as your public key, hostname, and so on:<img data-width="800" data-height="600" src="xAfGBbSl.jpg"/>
</li>
<li id="e-QJMZ">Once our Droplet is set up, we need to prep our Play 2 web app using the activator template, <code>computer-database-scala</code>, in our local development machine and changing into the project root:<pre id="e-VErJ">&lt;span class="strong"&gt;&lt;strong&gt;    $ activator new play2-deploy-74 computer-database-scala &amp;amp;&amp;amp; cd  play2-deploy-74&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-LhX6">Edit <code>conf/application.conf</code> to enable automatic database evolutions:<pre id="e-L0RJ">applyEvolutions.default=true</pre>
</li>
<li id="e-DaX5">We will need to initialize git on the project root:<pre id="e-wAqf">&lt;span class="strong"&gt;&lt;strong&gt;    git init &amp;amp;&amp;amp; git add &amp;#x2013;-all &amp;amp;&amp;amp; git commit -am "initial"&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-TLye">We now add a new git remote to the codebase pointed at our Dokku Droplet:<pre id="e-tD2j">&lt;span class="strong"&gt;&lt;strong&gt;    git remote add dokku dokku@&amp;lt;YOUR_DOKKU_IP_ADDRESS&amp;gt;::play2-deploy-74&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-uoE5">As the last deployment step, we push our commit to our Dokku remote. Dokku will then automatically deploy the web app using git post-commit hooks:<pre id="e-D4jQ">&lt;span class="strong"&gt;&lt;strong&gt;    $ git push dokku master&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Counting objects: 5, done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Delta compression using up to 8 threads.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Compressing objects: 100% (3/3), done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Writing objects: 100% (3/3), 293 bytes | 0 bytes/s, done.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Total 3 (delta 2), reused 0 (delta 0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Cleaning up...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Building play2-deploy-74 from buildstep...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Adding BUILD_ENV to build environment...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Play 2.x - Scala app detected&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Installing OpenJDK 1.6...done&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Running: sbt compile stage&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    ..&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Dropping ivy cache from the slug&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Dropping compilation artifacts from the slug&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Discovering process types&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;       Default process types for Play 2.x - Scala -&amp;gt; web&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Releasing play2-deploy-74...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Deploying play2-deploy-74...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Running pre-flight checks&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;       check-deploy: /home/dokku/play2-deploy-74/CHECKS not found. attempting to retrieve it from container ...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;       CHECKS file not found in container. skipping checks.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Running post-deploy&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; NO_VHOST config detected&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Shutting down old container in 60 seconds&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    =====&amp;gt; Application deployed:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;       http://&amp;lt;YOUR_DOKKU_IP&amp;gt;:&amp;lt;YOUR_DOKKU_ASSIGNED PORT&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;    To dokku@192.241.239.43:play2-deploy-74&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;       77a951d..a007b6b  master -&amp;gt; master&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<p id="e-amiw">We can now use a web browser to access our Dokku-deployed Play 2 web application: <code>http://&amp;lt;YOUR_DOKKU_IP_ADDRESS&amp;gt;:&amp;lt;YOUR_DOKKU_PORT&amp;gt;</code></p>
<img data-width="800" data-height="600" src="bu8g5ACy.jpg"/><h2 id="e-MDUJ">How it works...</h2>
<p id="e-YTXT">In this recipe, we looked into using Dokku to deploy our Play 2 web app on a Digital Ocean Droplet. After some very straightforward initializations and configurations, we were able to deploy our Play 2 web app with minimal friction and with ease.</p>
<p id="e-xERU">Essential to this recipe is having a virtual machine pre-installed with Dokku. Dokku, the Docker-based deployment tool, provides developers with a very simple deployment process, which ultimately boils down to a <code>git push</code> command:</p>
<pre id="e-Qi2U">&lt;span class="strong"&gt;&lt;strong&gt;    $ git push dokku master&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-cgQa">Dokku has git post-commit hooks configured to detect commits to the codebase, and subsequently, runs a deployment script for every detected code commit.</p>
<pre id="e-gsyM">&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Discovering process types&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;           Default process types for Play 2.x - Scala -&amp;gt; web&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Releasing play2-deploy-74...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Deploying play2-deploy-74...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Running pre-flight checks&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;           check-deploy: /home/dokku/play2-deploy-74/CHECKS not found. attempting to retrieve it from container ...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;           CHECKS file not found in container. skipping checks.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Running post-deploy&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; NO_VHOST config detected&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    -----&amp;gt; Shutting down old container in 60 seconds&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    =====&amp;gt; Application deployed:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;           http://192.241.239.43:49154&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-mqCf">This ease of use allows developers and non-developers alike to spin up dev and test instances quickly.</p>
<p id="e-TyTv">However, to get to this point in the development lifecycle, we will need to follow some steps to initialize and configure our Dokku setup. For this recipe, we relied on Digital Ocean, a popular cloud-based virtual machine provider, and its predefined Dokku application instance to spin up a ready-to-use Dokku VM instance.</p>
<p id="e-mdZV">The next necessary steps would be configuring our Play 2 web app to be git-enabled by initializing the codebase, adding all codebase files to the git repository, and committing the initial state of the web app:</p>
<pre id="e-GxRW">&lt;span class="strong"&gt;&lt;strong&gt;    $ git init &amp;amp;&amp;amp; git add &amp;#x2013;all &amp;amp;&amp;amp; git commit -am "initial"&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-W68N">Also, add some necessary application configurations for our sample application, specifically the <code>conf/application.conf</code> file with the following settings:</p>
<pre id="e-rvr0">applyEvolutions.default=true</pre>
<p id="e-yPBl">We will need to commit this change to the local repo as well:</p>
<pre id="e-Uzbt">&lt;span class="strong"&gt;&lt;strong&gt;    $ git commit -am "enabled automatic db evolutions"&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-Xdne">The final step now will be to push our commits to the Dokku instance we just created, which should then trigger a deployment:</p>
<pre id="e-RgII">&lt;span class="strong"&gt;&lt;strong&gt;    $ git push dokku master&lt;/strong&gt;&lt;/span&gt;</pre>
<h2 id="e-FD9U">There's more...</h2>
<p id="e-kMUp">Refer to the following links for more information on Dokku:</p>
<ul id="e-vqG3">
<li id="e-wFce"><a href="http://progrium.viewdocs.io/dokku/index">http://progrium.viewdocs.io/dokku/index</a></li>
<li id="e-yxk0"><a href="https://www.digitalocean.com/community/tags/dokku">https://www.digitalocean.com/community/tags/dokku</a></li>
</ul>

<h1 id="e-OSJu">Deploying a Play application with Nginx</h1>
<p id="e-fZLs">In this recipe, we will manually deploy a Play 2 web application using a CentOS 6.5-based virtual machine with <strong>Nginx</strong> as the frontend server for our Play 2 web applications. We will be utilizing Digital Ocean; ensure that you sign up for an account here:</p>
<p id="e-PMb2"><a href="https://cloud.digitalocean.com/registrations/new">https://cloud.digitalocean.com/registrations/new</a></p>
<h2 id="e-hAIj">How to do it...</h2>
<ol id="e-D3jM">
<li id="e-Oa8b">Log in to Digital Ocean and create a new Droplet, selecting CentOS as the base operating system and with at least 2GB of RAM:<img data-width="800" data-height="546" src="DGd7ZWCp.jpg"/>
</li>
<li id="e-IE1W">Select <strong>CentOS 6.5 x64</strong> as the Droplet image and specify your <strong>SSH Key</strong>:<img data-width="800" data-height="571" src="ZNnshaYq.jpg"/>
</li>
<li id="e-fQiA">Once the Droplet has been created, make a special note of the VM's IP address:<img data-width="800" data-height="571" src="a2pjImIu.jpg"/>
</li>
<li id="e-KVg8">Log in to our newly created Centos-based Droplet using SSH:<pre id="e-hy7J">&lt;span class="strong"&gt;&lt;strong&gt;    ssh root@&amp;lt;YOUR_DROPLET_IP_ADDRESS&amp;gt;&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-T0cq">Create a non-root user using the <code>adduser</code> command, assigning it with a password using the <code>passwd</code> command, and finally adding our new user to the <code>sudoers</code> group, which is a list of users with special system privileges:<pre id="e-cB7Z">&lt;span class="strong"&gt;&lt;strong&gt;    $ adduser deploy&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    $ passwd deploy&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    $ echo "deploy ALL=(ALL) ALL" &amp;gt;&amp;gt; /etc/sudoers&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-AByK">Relog in to our Droplet using the non-root user:<pre id="e-B291">&lt;span class="strong"&gt;&lt;strong&gt;    ssh deploy@&amp;lt;YOUR_DROPLET_IP_ADDRESS&amp;gt;&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-yncC">Install the necessary tools using <code>Yum</code>, the CentOS Package Manager, to proceed with our VM setup:<pre id="e-QU2E">&lt;span class="strong"&gt;&lt;strong&gt;    sudo yum install -y yum-plugin-fastestmirror&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo yum install -y git unzip wget&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-me9K">Install a JDK using the following commands:<pre id="e-c05m">&lt;span class="strong"&gt;&lt;strong&gt;    curl -LO 'http://download.oracle.com/otn-pub/java/jdk/7u51-b13/jdk-7u51-linux-x64.rpm' -H 'Cookie: oraclelicense=accept-securebackup-cookie'&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo rpm -i jdk-7u51-linux-x64.rpm&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /usr/sbin/alternatives --install /usr/bin/java java /usr/java/default/bin/java 200000&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-rxBZ">Verify that we have the Oracle JDK installed and that it is accessible:<pre id="e-L83E">&lt;span class="strong"&gt;&lt;strong&gt;    # Verify installed jdk&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    $ java -version&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    java version "1.7.0_51"&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Java(TM) SE Runtime Environment (build 1.7.0_51-b13)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Java HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-p5Dz">Install <code>activator</code> using the following commands:<pre id="e-Iglh">&lt;span class="strong"&gt;&lt;strong&gt;    cd ~&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    wget http://downloads.typesafe.com/typesafe-activator/1.3.2/typesafe-activator-1.3.2-minimal.zip&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    unzip typesafe-activator-1.3.2-minimal.zip&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    chmod u+x ~/activator-1.3.2-minimal/activator&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    export PATH=$PATH:~/activator-1.3.2-minimal/&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
</ol>
<p id="e-okY2">Add the official Nginx yum repository with the following command:</p>
<pre id="e-Ckfq">&lt;span class="strong"&gt;&lt;strong&gt;    echo -e "[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/\$releasever/\$basearch/\ngpgcheck=0\nenabled=1" &amp;gt; /tmp/nginx.repo &amp;amp;&amp;amp; sudo mv /tmp/nginx.repo /etc/yum.repos.d/nginx.repo&lt;/strong&gt;&lt;/span&gt;</pre>
<ol id="e-tFIV">
<li id="e-d2Wc">Install Nginx using <code>yum</code>:<pre id="e-vv0s">&lt;span class="strong"&gt;&lt;strong&gt;    sudo yum install -y nginx&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-Oe43">Add the custom configuration file to <code>/etc/nginx/conf.d/computer-database-scala.conf</code> with the following content:<pre id="e-WqDI">upstream playapp1 {
      server 127.0.0.1:9000;
    }
     server {
      listen       80;
      server_name computer-database-scala.com;
      location / {
        proxy_pass http://playapp1;
      }
    }</pre>
</li>
<li id="e-kvhn">Restart Nginx to load our new configs:<pre id="e-QFrw">&lt;span class="strong"&gt;&lt;strong&gt;    sudo service nginx restart&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-VCrY">Configure <code>iptables</code> to allow access to a minimum set of ports only (port 22 and 80):<pre id="e-Scg0">&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -P INPUT ACCEPT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -F&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -A INPUT -i lo -j ACCEPT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -A INPUT -p tcp --dport 22 -j ACCEPT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -A INPUT -p tcp --dport 80 -j ACCEPT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -P INPUT DROP&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -P FORWARD DROP&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -P OUTPUT ACCEPT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/iptables -L -v&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/service iptables save&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/service iptables restart&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sudo /sbin/service iptables status&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-TC5b">Clone the <code>computer-database-scala</code> Play2 web application in the directory <code>~/apps</code>:<pre id="e-Tpx8">&lt;span class="strong"&gt;&lt;strong&gt;    $ mkdir ~/apps &amp;amp;&amp;amp; cd $_ &amp;amp;&amp;amp; git clone https://github.com/typesafehub/activator-computer-database-scala.git&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-PkUD">Edit <code>conf/application.conf</code> to enable automatic database evolutions:<pre id="e-WmOS">applyEvolutions.default=true</pre>
</li>
<li id="e-QHub">We can now start the web app using <code>activator</code>:<pre id="e-eqAf">&lt;span class="strong"&gt;&lt;strong&gt;    $ activator start&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Loading project definition from /home/deploy/apps/activator-computer-database-scala/project&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Set current project to computer-database-scala (in build file:/home/deploy/apps/activator-computer-database-scala/)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Packaging /home/deploy/apps/activator-computer-database-scala/target/scala-2.11/computer-database-scala_2.11-0.0.1-SNAPSHOT-sources.jar ...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Done packaging.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [warn] There may be incompatibilities among your library dependencies.&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [warn] Here are some of the libraries that were evicted:&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [warn]   * org.webjars:jquery:1.11.1 -&amp;gt; 2.1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [warn] Run 'evicted' to see detailed eviction warnings&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Wrote /home/deploy/apps/activator-computer-database-scala/target/scala-2.11/computer-database-scala_2.11-0.0.1-SNAPSHOT.pom&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Packaging /home/deploy/apps/activator-computer-database-scala/target/scala-2.11/computer-database-scala_2.11-0.0.1-SNAPSHOT.jar ...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] Done packaging.&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;    (Starting server. Type Ctrl+D to exit logs, the server will remain in background)&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;    Play server process ID is 3094&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] play - database [default] connected at jdbc:h2:mem:play&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] play - Application started (Prod)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] play - Listening for HTTP on /0:0:0:0:0:0:0:0:9000&lt;/strong&gt;&lt;/span&gt;</pre>
</li>
<li id="e-T9M8">Using a web browser, we will now be able to access the Play 2 web application using the droplet's IP address, in our case, <code>http://&amp;lt;YOUR_DROPLET_IP ADDRESS&amp;gt;/computers</code>:<img data-width="800" data-height="571" src="fPewBoU0.jpg"/>
</li>
</ol>
<p id="e-yGAi">We can verify that Nginx is indeed serving our HTTP requests using <code>curl</code> and verifying with the response headers:</p>
<pre id="e-SM8K">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://192.241.239.43/computers&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying 192.241.239.43...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Connected to 192.241.239.43 (192.241.239.43) port 80 (#0)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; GET /computers HTTP/1.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; User-Agent: curl/7.37.1&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Host: 192.241.239.43&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt; Accept: */*&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;gt;&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; HTTP/1.1 200 OK&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Server nginx/1.6.2 is not blacklisted&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Server: nginx/1.6.2&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Date: Tue, 24 Mar 2015 08:23:04 GMT&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Type: text/html; charset=utf-8&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Content-Length: 7371&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    &amp;lt; Connection: keep-alive&lt;/strong&gt;&lt;/span&gt;</pre>
<h2 id="e-IhZs">How it works...</h2>
<p id="e-tV0E">In this recipe, we manually deployed a Play 2 web application on a remote CentOS-based virtual machine, which we initialized using Digital Ocean. We then proceeded to install and configure various software components, such as the Java Development Kit, Nginx, IPTables, and so on:</p>
<pre id="e-LNRo">&lt;span class="strong"&gt;&lt;strong&gt;    $ java -version&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    java version "1.7.0_51"&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;    $ activator --version&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    sbt launcher version 0.13.8-M5&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;    $ nginx -v&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    nginx version: nginx/1.6.2&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;    $ iptables --version&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    iptables v1.4.7&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    $ curl --version&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    curl 7.19.7&lt;/strong&gt;&lt;/span&gt;
 &lt;span class="strong"&gt;&lt;strong&gt;    $ git --version&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    git version 1.9.5&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-IJfV">Once we have the necessary services installed and configured, we need to start our Play 2 web application:</p>
<pre id="e-Tno9">&lt;span class="strong"&gt;&lt;strong&gt;    $ cd apps/activator-computer-database-scala/ &amp;amp;&amp;amp; activator clean start&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    Play server process ID is 3917&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] play - database [default] connected at jdbc:h2:mem:play&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] play - Application started (Prod)&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    [info] play - Listening for HTTP on /0:0:0:0:0:0:0:0:9000&lt;/strong&gt;&lt;/span&gt;</pre>
<img data-width="800" data-height="634" src="q7gea01x.jpg"/><p id="e-vfaQ">We then successfully accessed our deployed Play 2 web application using a web browser and <code>curl</code> in the appropriate port, port 80. We can also verify that we can only access the Play 2 web app via Nginx by attempting to access port 9000 directly using <code>curl</code>:</p>
<pre id="e-D9Eb">&lt;span class="strong"&gt;&lt;strong&gt;    $ curl -v http://192.241.239.43:9000/computers&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Hostname was NOT found in DNS cache&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    *   Trying 192.241.239.43...&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * connect to 192.241.239.43 port 9000 failed: Operation timed out&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Failed to connect to 192.241.239.43 port 9000: Operation timed out&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    * Closing connection 0&lt;/strong&gt;&lt;/span&gt;
&lt;span class="strong"&gt;&lt;strong&gt;    curl: (7) Failed to connect to 192.241.239.43 port 9000: Operation timed out&lt;/strong&gt;&lt;/span&gt;</pre>
<p id="e-G0u2">In this chapter, we demonstrated how remarkably involved it is to manually deploy Play 2 applications, and, in contrast, how convenient and easy it is to use cloud services such as Heroku, AWS Beanstalk, and tools such as Docker and Dokku in deploying Play 2 applications in the cloud. While there could be merits to being able to deploy Play web applications manually, it is without question that Cloud PAAS services greatly boost a developer's productivity and efficiency, and allow developers to focus on actual software development.</p>
</body></html>