- en: Preparing the Environment and Running Code Samples
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备环境和运行代码示例
- en: The instructions in this chapter are based on our experience of installing JDK
    and SBT and running code samples in late 2018\. Installation instructions like
    this usually become outdated as soon as they are published because of the rapid
    pace at which the software is updated; please bear this in mind as you work through
    this chapter.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的说明基于我们在 2018 年晚些时候安装 JDK 和 SBT 以及运行代码示例的经验。由于软件更新速度很快，此类说明一旦发布通常会很快过时；请在阅读本章时牢记这一点。
- en: Installing software
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装软件
- en: The recommended way to install JDK, Scala, and SBT is by using the SDK manager
    available at [https://sdkman.io](https://sdkman.io). Please refer to the instructions
    on the web page to complete the installation.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 JDK、Scala 和 SBT 的推荐方法是使用在[https://sdkman.io](https://sdkman.io)可用的 SDK 管理器。请参考网页上的说明以完成安装。
- en: Further, we'll describe the process of manual installation for Java and SBT.
    For your convenience, we've packaged the commands represented in further screenshots
    as scripts for OS X and Linux and made them available in the `Appendix` folder
    in the GitHub repository at: [https://github.com/PacktPublishing/Learn-Scala-Programming/tree/master/Appendix](https://github.com/PacktPublishing/Learn-Scala-Programming/tree/master/Appendix)[.](https://github.com/PacktPublishing/Learn-Scala---Fundamentals-of-Scala-2.13/tree/master/appendix_a)
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们将描述手动安装 Java 和 SBT 的过程。为了您的方便，我们将进一步截图中的命令打包成脚本，为 OS X 和 Linux 提供，并在 GitHub
    仓库的“附录”文件夹中提供：[https://github.com/PacktPublishing/Learn-Scala-Programming/tree/master/Appendix](https://github.com/PacktPublishing/Learn-Scala-Programming/tree/master/Appendix)[.](https://github.com/PacktPublishing/Learn-Scala---Fundamentals-of-Scala-2.13/tree/master/appendix_a)
- en: Installing Java Virtual Machine (JVM)
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Java 虚拟机 (JVM)
- en: At the moment, as of writing this, the last available JDK version available
    at [http://jdk.java.net](http://jdk.java.net) was 11\. Scala 2.13 requires Java
    1.8+.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，在撰写本文时，在[http://jdk.java.net](http://jdk.java.net)上可用的最后一个 JDK 版本是 11。Scala
    2.13 需要 Java 1.8+。
- en: It is possible to install Java on Linux or macOS X platforms by using one of
    the existing tools, such as `apt` or `yum`, using the package manager for Linux
    or `brew` for an OS X environment. Please use the help pages and guides available
    for the respective tools if you intend to install the JDK this way.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用现有的工具之一，例如 `apt` 或 `yum`（用于 Linux 的包管理器）或 `brew`（用于 OS X 环境），在 Linux 或
    macOS X 平台上安装 Java。如果您打算以这种方式安装 JDK，请使用相应工具的帮助页面和指南。
- en: 'The manual installation of Java consists of three steps:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Java 的手动安装包括三个步骤：
- en: Downloading the package from the internet. The choice of distribution files
    for different platforms is offered at [http://jdk.java.net/11/](http://jdk.java.net/11/).
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从互联网下载软件包。不同平台上的分发文件选择可在[http://jdk.java.net/11/](http://jdk.java.net/11/)找到。
- en: Extracting the installation file.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压安装文件。
- en: Updating the environment.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新环境。
- en: 'With Linux or OS X, you can use the following sequence of shell commands to
    perform all these steps, as shown in the next two screenshots:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Linux 或 OS X，您可以使用以下一系列 shell 命令执行所有这些步骤，如下一两个截图所示：
- en: '![](img/d7d75094-6d8d-4804-893b-cba9b1cd1b99.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d7d75094-6d8d-4804-893b-cba9b1cd1b99.png)'
- en: Installing JDK 11 in OS X
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在 OS X 中安装 JDK 11
- en: 'The installation flow in Linux is so similar that we have even refrained from
    putting arrows into the screenshot:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Linux 中的安装流程如此相似，以至于我们甚至没有在截图中使用箭头：
- en: '![](img/33be544f-24d2-43a4-bd9d-1c845eefb4da.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](img/33be544f-24d2-43a4-bd9d-1c845eefb4da.png)'
- en: The same steps in Linux
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Linux 中的相同步骤
- en: On Windows, you'll need to use the web browser to download the installation
    package, the file navigator to unpack it, and system settings to update the path
    variable. Please be aware that Java 11 is only available as a 64-bit version,
    so if you have a 32-bit system you have to install one of the previous versions
    of the JVM.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 上，您需要使用网络浏览器下载安装程序包，使用文件导航器解压缩它，并使用系统设置更新路径变量。请注意，Java 11 仅提供 64 位版本，因此如果您有
    32 位系统，您必须安装 JVM 的早期版本。
- en: 'Please follow the steps outlined in the following screenshots to perform the
    setup:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 请按照以下截图中的步骤进行设置：
- en: 'First, download the installation file from the internet:'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，从互联网下载安装文件：
- en: '![](img/2a3b6cb3-0c6d-4315-9903-66869c3881d2.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2a3b6cb3-0c6d-4315-9903-66869c3881d2.png)'
- en: Step 1\. Downloading the installation with the web browser
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 第 1 步：使用网络浏览器下载安装程序
- en: 'Then, extract the Java runtime from the archive:'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，从存档中提取 Java 运行时：
- en: '![](img/4f666bc2-4403-4505-ae59-c70618c840ac.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4f666bc2-4403-4505-ae59-c70618c840ac.png)'
- en: Step 2\. Extracting binaries from the downloaded bundle
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 第 2 步：从下载的捆绑包中提取二进制文件
- en: 'Next, the system path needs to be extended by altering the corresponding property:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，需要通过修改相应的属性来扩展系统路径：
- en: '![](img/9c935e09-1a76-4775-a639-815347093c32.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9c935e09-1a76-4775-a639-815347093c32.png)'
- en: Step 3\. Five actions to update the environment
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 第 3 步：更新环境的五个动作
- en: 'Finally, the version of Java can be checked:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，可以检查 Java 的版本：
- en: '![](img/33ff7064-b738-4782-a3b6-37f6ff5547ac.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/33ff7064-b738-4782-a3b6-37f6ff5547ac.png)'
- en: Finishing the installation and checking the Java version
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 完成安装并检查 Java 版本
- en: The next step after installing Java is the installation of SBT. You are not
    required to have Scala installed separately to be able to work with the sample
    code for this book.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Java 后的下一步是安装 SBT。您不需要单独安装 Scala 就能使用本书的示例代码。
- en: Installing SBT
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 SBT
- en: 'For the SBT, the simple build tool, there are installation options: using tools
    such as `apt-get`, `brew`, or `macports`, or doing it manually. First, we''ll
    cover the manual setup.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 对于简单的构建工具 SBT，有几种安装选项：使用 `apt-get`、`brew` 或 `macports` 等工具，或者手动安装。首先，我们将介绍手动设置。
- en: 'For Linux and macOS, the procedure is the same as with JDK:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Linux 和 macOS，步骤与 JDK 相同：
- en: Obtain the installation package.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取安装包。
- en: Unzip the downloaded file.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压下载的文件。
- en: Update the environment.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新环境。
- en: The latest version of the SBT can be found on the respective website at [https://www.scala-sbt.org/download.html](https://www.scala-sbt.org/download.html).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: SBT 的最新版本可以在相应的网站上找到，网址为 [https://www.scala-sbt.org/download.html](https://www.scala-sbt.org/download.html)。
- en: 'On Linux or macOS, you can use the command line in a way shown in the next
    screenshot to perform these three installation steps:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Linux 或 macOS 上，您可以使用下一张截图所示的方式使用命令行来执行这三个安装步骤：
- en: '![](img/e5064e69-66a9-424d-ad6f-0a0dd058b6ba.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e5064e69-66a9-424d-ad6f-0a0dd058b6ba.png)'
- en: We have included an installation script in the `Appendix` folder in the GitHub
    repository to save you some typing.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在 GitHub 仓库的 `附录` 文件夹中包含了一个安装脚本，以节省您输入。
- en: 'On Windows, the installation is done a bit differently. The website will offer
    you an MSI package for download, which can be installed after downloading by double-clicking
    on it, as shown in the next screenshot:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 上，安装方式略有不同。网站将提供 MSI 安装包供下载，下载后可以通过双击它来安装，如下所示：
- en: '![](img/aab88dec-f2b8-467a-b4cf-8ef6bd8fa2bc.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/aab88dec-f2b8-467a-b4cf-8ef6bd8fa2bc.png)'
- en: Downloading an SBT installation package
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 下载 SBT 安装包
- en: 'After the SBT installer is downloaded, it can be executed:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 下载 SBT 安装程序后，可以执行：
- en: '![](img/251df549-2467-4479-9121-26e973347062.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/251df549-2467-4479-9121-26e973347062.png)'
- en: Steps to start the SBT installation
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 开始 SBT 安装的步骤
- en: After the installation has started, just follow the steps in the wizard to finish
    the setup.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 安装开始后，只需按照向导中的步骤完成设置即可。
- en: Working with the code
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用代码
- en: 'The code examples for this book can be found in the GitHub repository under
    the following URL: [https://github.com/PacktPublishing/Learn-Scala-Programming](https://github.com/PacktPublishing/Learn-Scala-Programming).'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的代码示例可以在以下 GitHub 仓库中找到：[https://github.com/PacktPublishing/Learn-Scala-Programming](https://github.com/PacktPublishing/Learn-Scala-Programming)。
- en: In this section, we will give you a short introduction to how to download and
    work with the source code using the SBT console and Scala REPL.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将简要介绍如何使用 SBT 控制台和 Scala REPL 下载和使用源代码。
- en: Getting the code
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取代码
- en: The recommended way to install the accompanying code is by cloning it using
    Git utilities. As we're updating and improving the code if needed, this will allow
    us to get future changes easily. Please refer to the installation instructions
    for the Git tools for your operating system.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐的安装配套代码的方式是使用 Git 工具进行克隆。由于我们可能需要更新和改进代码，这将使我们能够轻松获取未来的更改。请参考您操作系统的 Git 工具安装说明。
- en: 'In this case, there are no Git tools available; the source code can be downloaded
    using a web browser or other download tool. There is a Download ZIP button in
    the GitHub repository which will generate the proper URL to be used for the download,
    as shown next:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，没有可用的 Git 工具；可以使用网络浏览器或其他下载工具下载源代码。GitHub 仓库中有一个“下载 ZIP”按钮，可以生成用于下载的正确
    URL，如下所示：
- en: '![](img/e87e2fb8-4e2d-4446-a752-ca983d6a7bc8.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e87e2fb8-4e2d-4446-a752-ca983d6a7bc8.png)'
- en: 'The following screenshot demonstrates both approaches for cloning and downloading
    the source code:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图演示了克隆和下载源代码的两种方法：
- en: '![](img/45831d0b-4a67-4863-9770-afb7c37c08f7.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/45831d0b-4a67-4863-9770-afb7c37c08f7.png)'
- en: Cloning or downloading the source code concludes the first-time setup procedure.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 克隆或下载源代码完成首次设置过程。
- en: Working with the source code
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与源代码一起工作
- en: 'The source code is organized in such a way that each chapter has its own folder,
    named by convention as [Chapter 1](7bfb7bf2-2fc8-41a3-a34f-73d262e5c674.xhtml), *An
    Introduction to Scala 2.13*, to [Chapter 15](ae25231b-af47-4138-82a9-e14a94ace448.xhtml),
    *Project 2 - Building Microservices with Lagom*. You can experiment with examples
    by navigating to the appropriate folder and starting SBT. It is recommended to
    occasionally issue the `git pull` command for the cloned repository to get recent
    updates and bug fixes, shown as follows:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 源代码组织方式是，每个章节都有自己的文件夹，按照惯例命名为[第1章](7bfb7bf2-2fc8-41a3-a34f-73d262e5c674.xhtml)，*Scala
    2.13简介*到[第15章](ae25231b-af47-4138-82a9-e14a94ace448.xhtml)，*项目2 - 使用Lagom构建微服务*。您可以通过导航到相应的文件夹并启动SBT来实验示例。建议偶尔发出`git
    pull`命令以获取克隆存储库的最新更新和错误修复，如下所示：
- en: '![](img/ff2ea739-834a-4553-80f9-b63a09283cbb.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ff2ea739-834a-4553-80f9-b63a09283cbb.png)'
- en: Each chapter has its own configuration files, `project/build.properties` and `build.sbt`.
    The former configure the version of the SBT to be used, the latter the required
    version of Scala and other dependencies. The SBT will download and cache all configured
    versions as required. This is why we don't need a separate installation of Scala.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 每一章都有自己的配置文件，`project/build.properties`和`build.sbt`。前者配置要使用的SBT版本，后者配置所需的Scala版本和其他依赖项。SBT将根据需要下载和缓存所有配置的版本。这就是为什么我们不需要单独安装Scala。
- en: Using the SBT console
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SBT控制台
- en: 'After starting SBT, one lands in the interactive mode or SBT **shell**. The
    shell allows for the issuing of different commands to drive SBT to test, execute,
    or do something else with the source code. The most important for our purposes
    are the following commands:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 启动SBT后，用户将进入交互模式或SBT **shell**。shell允许发出不同的命令来驱动SBT进行测试、执行或对源代码进行其他操作。对我们来说最重要的是以下命令：
- en: '`exit`: Closes the SBT and exits into the Terminal shell'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exit`: 关闭SBT并退出到终端shell'
- en: '`test`: Runs all test suites in the current project (if there are any in the
    `src/test/scala` folder)'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`test`: 运行当前项目中的所有测试套件（如果`src/test/scala`文件夹中有）'
- en: 'The next screenshot shows how SBT compiles and runs tests for [Chapter 11](87c2e446-3730-49ae-b86b-fc8269678399.xhtml),
    *An Introduction to the Akka and Actor Models*:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 下一张截图显示了SBT如何编译和运行[第11章](87c2e446-3730-49ae-b86b-fc8269678399.xhtml)，*Akka和Actor模型简介*的测试：
- en: '![](img/f90c6086-2533-4ea2-8df0-9f52acc956d5.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f90c6086-2533-4ea2-8df0-9f52acc956d5.png)'
- en: '`run`: Runs the main class if there is a single main class in the project.
    This command will throw an exception in the case that it fails to detect the `main`
    class. If there are multiple main classes, the SBT will ask you to pick one of
    them to run. This behavior is represented by the following screenshot:'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`run`: 如果项目中只有一个主类，则运行主类。如果无法检测到`main`类，此命令将抛出异常。如果有多个主类，SBT将要求您从中选择一个来运行。此行为如以下截图所示：'
- en: '![](img/b3fc59b3-53e4-4aca-ac84-9dcbfea3195d.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b3fc59b3-53e4-4aca-ac84-9dcbfea3195d.png)'
- en: '`console`: Starts scala REPL'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`console`: 启动scala REPL'
- en: Using REPL
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用REPL
- en: 'REPL is a tool for evaluating expressions in Scala. It can be started from
    the command line by entering `scala` or directly from the SBT session. The nice
    thing about starting it from the SBT shell is that all of the dependencies configured
    for the project will be available, as shown in the next screenshot:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: REPL是用于评估Scala表达式的工具。可以通过在命令行中输入`scala`或直接从SBT会话中启动。从SBT shell启动它的好处是，所有为项目配置的依赖项都将可用，如下一张截图所示：
- en: '![](img/6fe5c0c2-d415-4ea9-a2c4-993ce82efe76.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6fe5c0c2-d415-4ea9-a2c4-993ce82efe76.png)'
- en: Please refer to the Scala documentation at [https://docs.scala-lang.org/overviews/repl/overview.html](https://docs.scala-lang.org/overviews/repl/overview.html)
    to learn how to use REPL efficiently.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考[https://docs.scala-lang.org/overviews/repl/overview.html](https://docs.scala-lang.org/overviews/repl/overview.html)中的Scala文档，了解如何高效地使用REPL。
- en: To exit REPL and return to the SBT shell, enter `:q`.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 要退出REPL并返回SBT shell，请输入 `:q`.
