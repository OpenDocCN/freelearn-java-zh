<html><head></head><body>
  <div id="_idContainer050">
   <h1 class="chapterNumber">
    <a id="_idTextAnchor096">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     4
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-90">
    <a id="_idTextAnchor097">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Generating Code with OpenAPI
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3.1">
     In this chapter, we will start the development of a completely new API called Order Management that will interact with the Product API developed in
    </span>
    <a href="B21843_02.xhtml#_idTextAnchor050">
     <em class="italic">
      <span class="koboSpan" id="kobo.4.1">
       Chapter 2
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.5.1">
     and evolved in
    </span>
    <a href="B21843_03.xhtml#_idTextAnchor076">
     <em class="italic">
      <span class="koboSpan" id="kobo.6.1">
       Chapter 3
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.7.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.8.1">
     In the previous chapter, the Product API was developed following the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.9.1">
      code-first
     </span>
    </em>
    <span class="koboSpan" id="kobo.10.1">
     approach, wherein the API was implemented before the documentation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.11.1">
     In this chapter, we will adopt a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.12.1">
      specification-first
     </span>
    </em>
    <span class="koboSpan" id="kobo.13.1">
     approach, also known as API-first, wherein we will have the specification of the whole API done first, and then have the API implemented.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.14.1">
     Firstly, we will build the OpenAPI specification for the Order Management API, declaring the paths, methods, and request and response schemas (some of them using polymorphism) for it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.15.1">
     Then, we will use OpenAPI tools to generate Java code stubs from the API specification.
    </span>
    <span class="koboSpan" id="kobo.15.2">
     This generated code speeds up the implementation process, reduces manual maintenance of boilerplate code, and, most importantly, makes it easier to maintain consistency between the API specification and the service implementation for future changes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.16.1">
     Next, we will go through the package structure of the service and the code implementation bullet points for the build of this API, delivering it in a ready-to-work state.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.17.1">
     Finally, we will look into establishing communication between the Order Management and Product APIs to validate the products that will be registered in the orders created in this service, by calling an external API and responding accordingly to the received condition.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.18.1">
     By the end of this chapter, you will have built all the knowledge you need to get started with the design, development, and integration of specification-first APIs to greatly empower you and speed up your design and development phases in an unbelievable manner.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.19.1">
     In this chapter, we will be covering the following topics:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.20.1">
      Specification of the Order Management API
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.21.1">
      Generating code from the specification
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.22.1">
      Package structure of the Order Management API
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.23.1">
      Implementing the Order Management API controller
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.24.1">
      Communicating with the Product API
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-91">
    <a id="_idTextAnchor098">
    </a>
    <span class="koboSpan" id="kobo.25.1">
     Technical requirements
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.26.1">
     In this chapter, we will implement an example Order Management API.
    </span>
    <span class="koboSpan" id="kobo.26.2">
     To be able to follow along and use the code examples as they are printed in the book, you should have the following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.27.1">
      Intermediate knowledge of the Java language and platform
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.28.1">
      At least a basic knowledge of Spring Boot or a similar framework
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.29.1">
      Java 21 and Maven 3.9.0 installed
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.30.1">
     In this chapter, we are going to apply API-first REST principles to create our API; you can access the code for this chapter on GitHub at
    </span>
    <a href="https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4">
     <span class="url">
      <span class="koboSpan" id="kobo.31.1">
       https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.32.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-92">
    <a id="_idTextAnchor099">
    </a>
    <span class="koboSpan" id="kobo.33.1">
     Specifying the Order Management API
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.34.1">
     In this section, you will develop the
    </span>
    <a id="_idIndexMarker214">
    </a>
    <span class="koboSpan" id="kobo.35.1">
     specification of the operations and data structures of the Order Management API.
    </span>
    <span class="koboSpan" id="kobo.35.2">
     The Order Management API, as part of the project we are building over the course of this book, will handle the orders of products managed by the Product API.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.36.1">
     As explained in the previous chapter,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.37.1">
      specification-first
     </span>
    </em>
    <span class="koboSpan" id="kobo.38.1">
     means an abstract API specification is created before the actual implementation of the API.
    </span>
    <span class="koboSpan" id="kobo.38.2">
     Instead of starting with executable code in a programming language, you begin by defining the structure, behavior, and functionality of the API.
    </span>
    <span class="koboSpan" id="kobo.38.3">
     That is why
    </span>
    <a id="_idIndexMarker215">
    </a>
    <span class="koboSpan" id="kobo.39.1">
     this is also known as API-first development.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.40.1">
     In
    </span>
    <a href="B21843_01.xhtml#_idTextAnchor015">
     <em class="italic">
      <span class="koboSpan" id="kobo.41.1">
       Chapter 1
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.42.1">
     , we visited many key
    </span>
    <a id="_idIndexMarker216">
    </a>
    <span class="koboSpan" id="kobo.43.1">
     principles that should be considered when designing RESTful APIs.
    </span>
    <span class="koboSpan" id="kobo.43.2">
     Let us look at how to apply those principles with the API-first approach.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-93">
    <a id="_idTextAnchor100">
    </a>
    <span class="koboSpan" id="kobo.44.1">
     Implementing HTTP principles in API-first development
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.45.1">
     When adopting an API-first approach, it is
    </span>
    <a id="_idIndexMarker217">
    </a>
    <span class="koboSpan" id="kobo.46.1">
     crucial to think in HTTP terms right from the design phase.
    </span>
    <span class="koboSpan" id="kobo.46.2">
     Let us look at some of the principles:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.47.1">
       Define API contracts first
      </span>
     </strong>
     <span class="koboSpan" id="kobo.48.1">
      : Use tools such as OpenAPI/Swagger to define your API structure, including endpoints, request/response formats, and data models.
     </span>
     <span class="koboSpan" id="kobo.48.2">
      This contract serves as a blueprint for developers and helps ensure consistency and clarity.
     </span>
     <span class="koboSpan" id="kobo.48.3">
      We are going to build an API contract with an OpenAPI specification file for the Order Management API in the next section.
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.49.1">
       Consistent use of HTTP methods and status codes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.50.1">
      : Follow conventions for HTTP methods and status codes, as seen in
     </span>
     <a href="B21843_02.xhtml#_idTextAnchor050">
      <em class="italic">
       <span class="koboSpan" id="kobo.51.1">
        Chapter 2
       </span>
      </em>
     </a>
     <span class="koboSpan" id="kobo.52.1">
      .
     </span>
     <span class="koboSpan" id="kobo.52.2">
      For example, use
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.53.1">
       GET
      </span>
     </code>
     <span class="koboSpan" id="kobo.54.1">
      for retrieving resources,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.55.1">
       POST
      </span>
     </code>
     <span class="koboSpan" id="kobo.56.1">
      for creating,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.57.1">
       PUT
      </span>
     </code>
     <span class="koboSpan" id="kobo.58.1">
      for updating, and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.59.1">
       DELETE
      </span>
     </code>
     <span class="koboSpan" id="kobo.60.1">
      for removing resources.
     </span>
     <span class="koboSpan" id="kobo.60.2">
      Use appropriate status codes to communicate the result of the request.
     </span>
     <span class="koboSpan" id="kobo.60.3">
      These should also be described in the specification file.
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.61.1">
       Emphasize resource modeling
      </span>
     </strong>
     <span class="koboSpan" id="kobo.62.1">
      : Focus on accurately modeling your domain as resources.
     </span>
     <span class="koboSpan" id="kobo.62.2">
      This involves identifying key entities and their relationships, identifying them by URLs that can be accessed using HTTP methods.
     </span>
     <span class="koboSpan" id="kobo.62.3">
      For example, in our Order Management API, resources are
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.63.1">
       Customers
      </span>
     </code>
     <span class="koboSpan" id="kobo.64.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.65.1">
       Products
      </span>
     </code>
     <span class="koboSpan" id="kobo.66.1">
      , and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.67.1">
       Orders
      </span>
     </code>
     <span class="koboSpan" id="kobo.68.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.69.1">
       Plan for versioning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.70.1">
      : Implement versioning strategies to handle API evolution.
     </span>
     <span class="koboSpan" id="kobo.70.2">
      This can be done through URL path versioning (e.g.,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.71.1">
       /v2/books
      </span>
     </code>
     <span class="koboSpan" id="kobo.72.1">
      ) and standard or custom request headers.
     </span>
     <span class="koboSpan" id="kobo.72.2">
      Versioning supports backward compatibility and smooth transitions as the API grows and changes.
     </span>
     <span class="koboSpan" id="kobo.72.3">
      This will be defined in the Common API metadata of our specification file.
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.73.1">
       Consider security
      </span>
     </strong>
     <span class="koboSpan" id="kobo.74.1">
      : Define authentication and authorization mechanisms, such as OAuth, API keys, or JSON Web Tokens (JWTs), to secure your API.
     </span>
     <span class="koboSpan" id="kobo.74.2">
      We will briefly look at how to add a security scheme to our specification, and you will learn how to implement it in depth in
     </span>
     <a href="B21843_07.xhtml#_idTextAnchor176">
      <em class="italic">
       <span class="koboSpan" id="kobo.75.1">
        Chapter 7
       </span>
      </em>
     </a>
     <span class="koboSpan" id="kobo.76.1">
      .
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.77.1">
     Now that we have a clearer picture of the principles we aim to achieve with this definition, let us start writing into the specification itself.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-94">
    <a id="_idTextAnchor101">
    </a>
    <span class="koboSpan" id="kobo.78.1">
     Designing the OpenAPI specification
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.79.1">
     We will write the Order Management API specification using the YAML syntax.
    </span>
    <span class="koboSpan" id="kobo.79.2">
     You can use any editor of your personal preference to
    </span>
    <a id="_idIndexMarker218">
    </a>
    <span class="koboSpan" id="kobo.80.1">
     follow along: you can use the online Swagger Editor available at
    </span>
    <a href="https://editor.swagger.io/">
     <span class="url">
      <span class="koboSpan" id="kobo.81.1">
       https://editor.swagger.io/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.82.1">
     , or if you work using IDEs such as JetBrains IntelliJ or Microsoft VS Code, you can use plugins to get a similar experience to the Swagger website and validate your specification while writing it inside your IDE.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.83.1">
     The full specification that we will create is available on GitHub at
    </span>
    <a href="https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4">
     <span class="url">
      <span class="koboSpan" id="kobo.84.1">
       https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.85.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.86.1">
     Let us begin the specification file by defining the API’s common metadata.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-95">
    <a id="_idTextAnchor102">
    </a>
    <span class="koboSpan" id="kobo.87.1">
     Common API metadata
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.88.1">
     We will start by defining the top-level context of the specification with the metadata about the API, defining the title, the description, and
    </span>
    <a id="_idIndexMarker219">
    </a>
    <span class="koboSpan" id="kobo.89.1">
     the version of the API.
    </span>
    <span class="koboSpan" id="kobo.89.2">
     Also, here we describe the servers where the application will be running.
    </span>
    <span class="koboSpan" id="kobo.89.3">
     In our case, since we want to run it locally, we will use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.90.1">
      localhost
     </span>
    </code>
    <span class="koboSpan" id="kobo.91.1">
     for testing purposes:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.92.1">openapi</span></span><span class="koboSpan" id="kobo.93.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.94.1">3.0.0</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.95.1">info</span></span><span class="koboSpan" id="kobo.96.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.97.1">title</span></span><span class="koboSpan" id="kobo.98.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.99.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.100.1">Management</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.101.1">API</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.102.1">description</span></span><span class="koboSpan" id="kobo.103.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.104.1">API</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.105.1">for</span></span><span class="koboSpan" id="kobo.106.1"> managing orders
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.107.1">version</span></span><span class="koboSpan" id="kobo.108.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.109.1">1.0.0</span></span><span class="koboSpan" id="kobo.110.1">-</span><span class="hljs-title"><span class="koboSpan" id="kobo.111.1">SNAPSHOT</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.112.1">servers:</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.113.1">  - url: http://localhost:8080/api/v1</span></span>
</code></pre>
   <h3 class="heading-3" id="_idParaDest-96">
    <a id="_idTextAnchor103">
    </a>
    <span class="koboSpan" id="kobo.114.1">
     Order Management API paths
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.115.1">
     This API will have three paths:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.116.1">
       /orders
      </span>
     </code>
     <span class="koboSpan" id="kobo.117.1">
      with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.118.1">
       POST
      </span>
     </code>
     <span class="koboSpan" id="kobo.119.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.120.1">
       GET
      </span>
     </code>
     <span class="koboSpan" id="kobo.121.1">
      methods for creating and retrieving orders, respectively
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.122.1">
       /orders/{orderId}
      </span>
     </code>
     <span class="koboSpan" id="kobo.123.1">
      with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.124.1">
       GET
      </span>
     </code>
     <span class="koboSpan" id="kobo.125.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.126.1">
       PUT
      </span>
     </code>
     <span class="koboSpan" id="kobo.127.1">
      , and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.128.1">
       DELETE
      </span>
     </code>
     <span class="koboSpan" id="kobo.129.1">
      methods for accessing, editing, and removing specific
     </span>
     <a id="_idIndexMarker220">
     </a>
     <span class="koboSpan" id="kobo.130.1">
      orders, respectively
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.131.1">
       /orders/{orderId}/status
      </span>
     </code>
     <span class="koboSpan" id="kobo.132.1">
      with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.133.1">
       PATCH
      </span>
     </code>
     <span class="koboSpan" id="kobo.134.1">
      method to change the status of an existing order
     </span>
    </li>
   </ul>
   <h4 class="heading-4">
    <span class="koboSpan" id="kobo.135.1">
     Methods for the /orders path
    </span>
   </h4>
   <p class="normal">
    <span class="koboSpan" id="kobo.136.1">
     Let us start by defining the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.137.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.138.1">
     method with its request and response.
    </span>
    <span class="koboSpan" id="kobo.138.2">
     Remember, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.139.1">
      $ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.140.1">
     notation is used to refer to the
    </span>
    <a id="_idIndexMarker221">
    </a>
    <span class="koboSpan" id="kobo.141.1">
     schema definitions in a separate section of the specification document.
    </span>
    <span class="koboSpan" id="kobo.141.2">
     This allows the schemas to be reused, and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.142.1">
      paths
     </span>
    </code>
    <span class="koboSpan" id="kobo.143.1">
     section to be shorter and more readable:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.144.1">paths</span></span><span class="koboSpan" id="kobo.145.1">:
  </span><span class="hljs-regexp"><span class="koboSpan" id="kobo.146.1">/orders:</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.147.1">    post:</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.148.1">      tags:</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.149.1">        - OrderManagement</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.150.1">      summary: Create Order</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.151.1">      description: Creates a new order</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.152.1">      requestBody:</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.153.1">        required: true</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.154.1">        content:</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.155.1">          application/</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.156.1">json</span></span><span class="koboSpan" id="kobo.157.1">:
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.158.1">schema</span></span><span class="koboSpan" id="kobo.159.1">:
              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.160.1">$ref</span></span><span class="koboSpan" id="kobo.161.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.162.1">'#/components/schemas/OrderRequestBody'</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.163.1">responses</span></span><span class="koboSpan" id="kobo.164.1">:
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.165.1">'201'</span></span><span class="koboSpan" id="kobo.166.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.167.1">description</span></span><span class="koboSpan" id="kobo.168.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.169.1">Created</span></span>
          <span class="hljs-attr"><span class="koboSpan" id="kobo.170.1">content</span></span><span class="koboSpan" id="kobo.171.1">:
            application/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.172.1">json</span></span><span class="koboSpan" id="kobo.173.1">:
              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.174.1">schema</span></span><span class="koboSpan" id="kobo.175.1">:
                </span><span class="hljs-attr"><span class="koboSpan" id="kobo.176.1">$ref</span></span><span class="koboSpan" id="kobo.177.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.178.1">'#/components/schemas/OrderResponse'</span></span>
        <span class="hljs-string"><span class="koboSpan" id="kobo.179.1">'400'</span></span><span class="koboSpan" id="kobo.180.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.181.1">description</span></span><span class="koboSpan" id="kobo.182.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.183.1">Bad</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.184.1">Request</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.185.1">
     In this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.186.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.187.1">
     definition, we are defining that when the controller receives a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.188.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.189.1">
     request with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.190.1">
      /orders
     </span>
    </code>
    <span class="koboSpan" id="kobo.191.1">
     path, the request should contain a body as specified in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.192.1">
      OrderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.193.1">
     schema definition.
    </span>
    <span class="koboSpan" id="kobo.193.2">
     If everything goes
    </span>
    <a id="_idIndexMarker222">
    </a>
    <span class="koboSpan" id="kobo.194.1">
     well, the API will respond with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.195.1">
      201 Created
     </span>
    </code>
    <span class="koboSpan" id="kobo.196.1">
     HTTP status code, with the body defined in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.197.1">
      OrderResponse
     </span>
    </code>
    <span class="koboSpan" id="kobo.198.1">
     schema.
    </span>
    <span class="koboSpan" id="kobo.198.2">
     If the request body does not match
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.199.1">
      OrderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.200.1">
     , the API will respond with a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.201.1">
      400 Bad Request
     </span>
    </code>
    <span class="koboSpan" id="kobo.202.1">
     HTTP response code.
    </span>
    <span class="koboSpan" id="kobo.202.2">
     We are going to define the request and response bodies later in this chapter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.203.1">
     Also, to help the OpenAPI generator name the classes that will be generated from our specification, we are specifying a tag in each method operation.
    </span>
    <span class="koboSpan" id="kobo.203.2">
     In this case, the tag will be named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.204.1">
      OrderManagement
     </span>
    </code>
    <span class="koboSpan" id="kobo.205.1">
     .
    </span>
    <span class="koboSpan" id="kobo.205.2">
     If we omit the tag, the generated class will be named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.206.1">
      DefaultApi
     </span>
    </code>
    <span class="koboSpan" id="kobo.207.1">
     .
    </span>
    <span class="koboSpan" id="kobo.207.2">
     We will cover this in detail in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.208.1">
      Generating code from the specification
     </span>
    </em>
    <span class="koboSpan" id="kobo.209.1">
     section when we have configured the generator and start generating code from the specification.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.210.1">
     Next, we will define the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.211.1">
      GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.212.1">
     method for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.213.1">
      /orders
     </span>
    </code>
    <span class="koboSpan" id="kobo.214.1">
     path endpoint:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.215.1">get</span></span><span class="koboSpan" id="kobo.216.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.217.1">tags</span></span><span class="koboSpan" id="kobo.218.1">:
    - </span><span class="hljs-title"><span class="koboSpan" id="kobo.219.1">OrderManagement</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.220.1">summary</span></span><span class="koboSpan" id="kobo.221.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.222.1">List</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.223.1">Orders</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.224.1">description</span></span><span class="koboSpan" id="kobo.225.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.226.1">Retrieves</span></span><span class="koboSpan" id="kobo.227.1"> a list </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.228.1">of</span></span><span class="koboSpan" id="kobo.229.1"> orders
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.230.1">responses</span></span><span class="koboSpan" id="kobo.231.1">:
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.232.1">'200'</span></span><span class="koboSpan" id="kobo.233.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.234.1">description</span></span><span class="koboSpan" id="kobo.235.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.236.1">OK</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.237.1">content</span></span><span class="koboSpan" id="kobo.238.1">:
        application/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.239.1">json</span></span><span class="koboSpan" id="kobo.240.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.241.1">schema</span></span><span class="koboSpan" id="kobo.242.1">:
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.243.1">type</span></span><span class="koboSpan" id="kobo.244.1">: array
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.245.1">items</span></span><span class="koboSpan" id="kobo.246.1">:
              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.247.1">$ref</span></span><span class="koboSpan" id="kobo.248.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.249.1">'#/components/schemas/OrderResponse'</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.250.1">
     This is a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.251.1">
      GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.252.1">
     method and, when called, it returns the list of orders, if any, with HTTP status
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.253.1">
      200
     </span>
    </code>
    <span class="koboSpan" id="kobo.254.1">
     , and with an array of objects of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.255.1">
      OrderResponse
     </span>
    </code>
    <span class="koboSpan" id="kobo.256.1">
     that contains all the orders in the system.
    </span>
    <span class="koboSpan" id="kobo.256.2">
     If there are none, the
    </span>
    <a id="_idIndexMarker223">
    </a>
    <span class="koboSpan" id="kobo.257.1">
     returned list will be empty still with HTTP status
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.258.1">
      200
     </span>
    </code>
    <span class="koboSpan" id="kobo.259.1">
     , meaning that the request was successfully completed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.260.1">
     We will also specify an endpoint to retrieve a single order from the system in the next path.
    </span>
   </p>
   <h4 class="heading-4">
    <span class="koboSpan" id="kobo.261.1">
     Methods for the /orders/{orderId} path
    </span>
   </h4>
   <p class="normal">
    <span class="koboSpan" id="kobo.262.1">
     Now, we are going to define another
    </span>
    <a id="_idIndexMarker224">
    </a>
    <span class="koboSpan" id="kobo.263.1">
     path to access specific orders, and we will define a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.264.1">
      GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.265.1">
     , a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.266.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.267.1">
     , and a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.268.1">
      DELETE
     </span>
    </code>
    <span class="koboSpan" id="kobo.269.1">
     method for this path, starting with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.270.1">
      GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.271.1">
     method:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.272.1">/orders/{orderId}:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.273.1">get</span></span><span class="koboSpan" id="kobo.274.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.275.1">tags</span></span><span class="koboSpan" id="kobo.276.1">:
      - </span><span class="hljs-title"><span class="koboSpan" id="kobo.277.1">OrderManagement</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.278.1">summary</span></span><span class="koboSpan" id="kobo.279.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.280.1">Get</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.281.1">Order</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.282.1">description</span></span><span class="koboSpan" id="kobo.283.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.284.1">Retrieves</span></span><span class="koboSpan" id="kobo.285.1"> a single order by its </span><span class="hljs-variable"><span class="koboSpan" id="kobo.286.1">ID</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.287.1">parameters</span></span><span class="koboSpan" id="kobo.288.1">:
      - </span><span class="hljs-attr"><span class="koboSpan" id="kobo.289.1">name</span></span><span class="koboSpan" id="kobo.290.1">: orderId
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.291.1">in</span></span><span class="koboSpan" id="kobo.292.1">: path
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.293.1">required</span></span><span class="koboSpan" id="kobo.294.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.295.1">true</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.296.1">description</span></span><span class="koboSpan" id="kobo.297.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.298.1">The</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.299.1">ID</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.300.1">of</span></span><span class="koboSpan" id="kobo.301.1"> the order to retrieve
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.302.1">schema</span></span><span class="koboSpan" id="kobo.303.1">:
         </span><span class="hljs-attr"><span class="koboSpan" id="kobo.304.1">type</span></span><span class="koboSpan" id="kobo.305.1">: string
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.306.1">example</span></span><span class="koboSpan" id="kobo.307.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.308.1">123456</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.309.1">responses</span></span><span class="koboSpan" id="kobo.310.1">:
      </span><span class="hljs-string"><span class="koboSpan" id="kobo.311.1">'200'</span></span><span class="koboSpan" id="kobo.312.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.313.1">description</span></span><span class="koboSpan" id="kobo.314.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.315.1">OK</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.316.1">content</span></span><span class="koboSpan" id="kobo.317.1">:
          application/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.318.1">json</span></span><span class="koboSpan" id="kobo.319.1">:
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.320.1">schema</span></span><span class="koboSpan" id="kobo.321.1">:
              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.322.1">$ref</span></span><span class="koboSpan" id="kobo.323.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.324.1">'#/components/schemas/OrderResponse'</span></span>
      <span class="hljs-string"><span class="koboSpan" id="kobo.325.1">'404'</span></span><span class="koboSpan" id="kobo.326.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.327.1">description</span></span><span class="koboSpan" id="kobo.328.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.329.1">Not</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.330.1">Found</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.331.1">
     In the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.332.1">
      GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.333.1">
     method, we are defining a path to retrieve data from a single order.
    </span>
    <span class="koboSpan" id="kobo.333.2">
     Here, we are receiving a single parameter in the path, to be able to get the data from a specific order, defined as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.334.1">
      /orders/{orderId}
     </span>
    </code>
    <span class="koboSpan" id="kobo.335.1">
     path, containing the order ID in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.336.1">
      {orderId}
     </span>
    </code>
    <span class="koboSpan" id="kobo.337.1">
     placeholder.
    </span>
    <span class="koboSpan" id="kobo.337.2">
     We also need to have the parameter
    </span>
    <a id="_idIndexMarker225">
    </a>
    <span class="koboSpan" id="kobo.338.1">
     defined in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.339.1">
      parameters
     </span>
    </code>
    <span class="koboSpan" id="kobo.340.1">
     , under the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.341.1">
      in: path
     </span>
    </code>
    <span class="koboSpan" id="kobo.342.1">
     flag.
    </span>
    <span class="koboSpan" id="kobo.342.2">
     This is where we specify that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.343.1">
      orderId
     </span>
    </code>
    <span class="koboSpan" id="kobo.344.1">
     is a parameter to be received.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.345.1">
     In a successful case, an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.346.1">
      OrderResponse
     </span>
    </code>
    <span class="koboSpan" id="kobo.347.1">
     object will be returned containing the order itself with a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.348.1">
      200 OK
     </span>
    </code>
    <span class="koboSpan" id="kobo.349.1">
     HTTP status response.
    </span>
    <span class="koboSpan" id="kobo.349.2">
     A
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.350.1">
      404 Not Found
     </span>
    </code>
    <span class="koboSpan" id="kobo.351.1">
     HTTP status will be returned if there is no order with the given ID.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.352.1">
     Now, let us have a look at the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.353.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.354.1">
     method:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-attr"><span class="koboSpan" id="kobo.355.1">put</span></span><span class="koboSpan" id="kobo.356.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.357.1">tags</span></span><span class="koboSpan" id="kobo.358.1">:
      - </span><span class="hljs-title"><span class="koboSpan" id="kobo.359.1">OrderManagement</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.360.1">summary</span></span><span class="koboSpan" id="kobo.361.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.362.1">Update</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.363.1">Order</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.364.1">description</span></span><span class="koboSpan" id="kobo.365.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.366.1">Updates</span></span><span class="koboSpan" id="kobo.367.1"> an existing order
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.368.1">parameters</span></span><span class="koboSpan" id="kobo.369.1">:
      - </span><span class="hljs-attr"><span class="koboSpan" id="kobo.370.1">name</span></span><span class="koboSpan" id="kobo.371.1">: orderId
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.372.1">in</span></span><span class="koboSpan" id="kobo.373.1">: path
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.374.1">required</span></span><span class="koboSpan" id="kobo.375.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.376.1">true</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.377.1">description</span></span><span class="koboSpan" id="kobo.378.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.379.1">The</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.380.1">ID</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.381.1">of</span></span><span class="koboSpan" id="kobo.382.1"> the order to be updated
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.383.1">schema</span></span><span class="koboSpan" id="kobo.384.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.385.1">type</span></span><span class="koboSpan" id="kobo.386.1">: string
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.387.1">example</span></span><span class="koboSpan" id="kobo.388.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.389.1">123456</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.390.1">requestBody</span></span><span class="koboSpan" id="kobo.391.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.392.1">required</span></span><span class="koboSpan" id="kobo.393.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.394.1">true</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.395.1">content</span></span><span class="koboSpan" id="kobo.396.1">:
        application/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.397.1">json</span></span><span class="koboSpan" id="kobo.398.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.399.1">schema</span></span><span class="koboSpan" id="kobo.400.1">:
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.401.1">$ref</span></span><span class="koboSpan" id="kobo.402.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.403.1">'#/components/schemas/OrderRequestBody'</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.404.1">responses</span></span><span class="koboSpan" id="kobo.405.1">:
      </span><span class="hljs-string"><span class="koboSpan" id="kobo.406.1">'200'</span></span><span class="koboSpan" id="kobo.407.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.408.1">description</span></span><span class="koboSpan" id="kobo.409.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.410.1">OK</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.411.1">content</span></span><span class="koboSpan" id="kobo.412.1">:
          application/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.413.1">json</span></span><span class="koboSpan" id="kobo.414.1">:
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.415.1">schema</span></span><span class="koboSpan" id="kobo.416.1">:
              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.417.1">$ref</span></span><span class="koboSpan" id="kobo.418.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.419.1">'#/components/schemas/OrderResponse'</span></span>
      <span class="hljs-string"><span class="koboSpan" id="kobo.420.1">'400'</span></span><span class="koboSpan" id="kobo.421.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.422.1">description</span></span><span class="koboSpan" id="kobo.423.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.424.1">Bad</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.425.1">Request</span></span>
      <span class="hljs-string"><span class="koboSpan" id="kobo.426.1">'404'</span></span><span class="koboSpan" id="kobo.427.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.428.1">description</span></span><span class="koboSpan" id="kobo.429.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.430.1">Not</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.431.1">Found</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.432.1">
     Similar to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.433.1">
      GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.434.1">
     method, with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.435.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.436.1">
     method, we are defining an operation to update a single order.
    </span>
    <span class="koboSpan" id="kobo.436.2">
     Please note that we are demonstrating an approach different from that adopted when building the Product API, where we used the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.437.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.438.1">
     method for creating entities.
    </span>
    <span class="koboSpan" id="kobo.438.2">
     In the Order Management API, we use a separate
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.439.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.440.1">
     method (without an ID in the request) for creating orders.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.441.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.442.1">
     is an idempotent method, meaning it can be called multiple times (with the same order ID) without affecting the result.
    </span>
    <span class="koboSpan" id="kobo.442.2">
     On
    </span>
    <a id="_idIndexMarker226">
    </a>
    <span class="koboSpan" id="kobo.443.1">
     the other hand,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.444.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.445.1">
     is not idempotent, so every time you call it, it creates a new order in our service.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.446.1">
     For the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.447.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.448.1">
     method, we receive the order ID in the path, defined in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.449.1">
      /orders/{orderId}
     </span>
    </code>
    <span class="koboSpan" id="kobo.450.1">
     path, receiving the order ID through the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.451.1">
      orderId
     </span>
    </code>
    <span class="koboSpan" id="kobo.452.1">
     parameter defined in the list of parameters and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.453.1">
      OrderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.454.1">
     , the same way as seen in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.455.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.456.1">
     method, containing all the details of the order to be updated.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.457.1">
     In case of success, it will return a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.458.1">
      200 OK
     </span>
    </code>
    <span class="koboSpan" id="kobo.459.1">
     HTTP status code and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.460.1">
      OrderResponse
     </span>
    </code>
    <span class="koboSpan" id="kobo.461.1">
     containing the details of the persisted order.
    </span>
    <span class="koboSpan" id="kobo.461.2">
     If the
    </span>
    <a id="_idIndexMarker227">
    </a>
    <span class="koboSpan" id="kobo.462.1">
     order is not found,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.463.1">
      404 Not Found
     </span>
    </code>
    <span class="koboSpan" id="kobo.464.1">
     will be returned.
    </span>
    <span class="koboSpan" id="kobo.464.2">
     In case of a wrong format in the request,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.465.1">
      400 Bad Request
     </span>
    </code>
    <span class="koboSpan" id="kobo.466.1">
     will be returned.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.467.1">
     Finally, let us see the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.468.1">
      DELETE
     </span>
    </code>
    <span class="koboSpan" id="kobo.469.1">
     method to cancel a specific order:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.470.1">delete</span></span><span class="koboSpan" id="kobo.471.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.472.1">tags</span></span><span class="koboSpan" id="kobo.473.1">:
    - </span><span class="hljs-title"><span class="koboSpan" id="kobo.474.1">OrderManagement</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.475.1">summary</span></span><span class="koboSpan" id="kobo.476.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.477.1">Cancel</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.478.1">Order</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.479.1">description</span></span><span class="koboSpan" id="kobo.480.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.481.1">Cancels</span></span><span class="koboSpan" id="kobo.482.1"> an existing order
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.483.1">parameters</span></span><span class="koboSpan" id="kobo.484.1">:
    - </span><span class="hljs-attr"><span class="koboSpan" id="kobo.485.1">name</span></span><span class="koboSpan" id="kobo.486.1">: orderId
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.487.1">in</span></span><span class="koboSpan" id="kobo.488.1">: path
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.489.1">description</span></span><span class="koboSpan" id="kobo.490.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.491.1">ID</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.492.1">of</span></span><span class="koboSpan" id="kobo.493.1"> the order to be cancelled
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.494.1">required</span></span><span class="koboSpan" id="kobo.495.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.496.1">true</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.497.1">schema</span></span><span class="koboSpan" id="kobo.498.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.499.1">type</span></span><span class="koboSpan" id="kobo.500.1">: string
   </span><span class="hljs-attr"><span class="koboSpan" id="kobo.501.1">example</span></span><span class="koboSpan" id="kobo.502.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.503.1">123456</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.504.1">responses</span></span><span class="koboSpan" id="kobo.505.1">:
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.506.1">'204'</span></span><span class="koboSpan" id="kobo.507.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.508.1">description</span></span><span class="koboSpan" id="kobo.509.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.510.1">No</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.511.1">Content</span></span>
  <span class="hljs-string"><span class="koboSpan" id="kobo.512.1">'403'</span></span><span class="koboSpan" id="kobo.513.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.514.1">description</span></span><span class="koboSpan" id="kobo.515.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.516.1">Forbidden</span></span>
  <span class="hljs-string"><span class="koboSpan" id="kobo.517.1">'404'</span></span><span class="koboSpan" id="kobo.518.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.519.1">description</span></span><span class="koboSpan" id="kobo.520.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.521.1">Not</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.522.1">Found</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.523.1">
     In this method, we are required to pass a parameter named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.524.1">
      orderId
     </span>
    </code>
    <span class="koboSpan" id="kobo.525.1">
     , which is the ID of the order to be cancelled, the same way we did with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.526.1">
      GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.527.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.528.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.529.1">
     methods.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.530.1">
     In case of success, a response HTTP status code of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.531.1">
      204 No Content
     </span>
    </code>
    <span class="koboSpan" id="kobo.532.1">
     will be returned to the caller because there is no response body.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.533.1">
      404 Not Found
     </span>
    </code>
    <span class="koboSpan" id="kobo.534.1">
     will be returned if there is no order with the specified ID.
    </span>
   </p>
   <h4 class="heading-4">
    <span class="koboSpan" id="kobo.535.1">
     Method for the /orders/{orderId}/status
    </span>
   </h4>
   <p class="normal">
    <span class="koboSpan" id="kobo.536.1">
     Finally, let us have a
    </span>
    <a id="_idIndexMarker228">
    </a>
    <span class="koboSpan" id="kobo.537.1">
     look at the last defined endpoint path to change the status of the orders, with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.538.1">
      PATCH
     </span>
    </code>
    <span class="koboSpan" id="kobo.539.1">
     method:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.540.1">/orders/{orderId}/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.541.1">status</span></span><span class="koboSpan" id="kobo.542.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.543.1">patch</span></span><span class="koboSpan" id="kobo.544.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.545.1">tags</span></span><span class="koboSpan" id="kobo.546.1">:
      - </span><span class="hljs-title"><span class="koboSpan" id="kobo.547.1">OrderManagement</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.548.1">summary</span></span><span class="koboSpan" id="kobo.549.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.550.1">Change</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.551.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.552.1">Status</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.553.1">description</span></span><span class="koboSpan" id="kobo.554.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.555.1">Change</span></span><span class="koboSpan" id="kobo.556.1"> an </span><span class="hljs-title"><span class="koboSpan" id="kobo.557.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.558.1">Status</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.559.1">parameters</span></span><span class="koboSpan" id="kobo.560.1">:
      - </span><span class="hljs-attr"><span class="koboSpan" id="kobo.561.1">name</span></span><span class="koboSpan" id="kobo.562.1">: orderId
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.563.1">in</span></span><span class="koboSpan" id="kobo.564.1">: path
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.565.1">required</span></span><span class="koboSpan" id="kobo.566.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.567.1">true</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.568.1">description</span></span><span class="koboSpan" id="kobo.569.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.570.1">The</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.571.1">ID</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.572.1">of</span></span><span class="koboSpan" id="kobo.573.1"> the order to be updated
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.574.1">schema</span></span><span class="koboSpan" id="kobo.575.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.576.1">type</span></span><span class="koboSpan" id="kobo.577.1">: string
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.578.1">example</span></span><span class="koboSpan" id="kobo.579.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.580.1">123456</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.581.1">requestBody</span></span><span class="koboSpan" id="kobo.582.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.583.1">required</span></span><span class="koboSpan" id="kobo.584.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.585.1">true</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.586.1">content</span></span><span class="koboSpan" id="kobo.587.1">:
        application/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.588.1">json</span></span><span class="koboSpan" id="kobo.589.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.590.1">schema</span></span><span class="koboSpan" id="kobo.591.1">:
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.592.1">$ref</span></span><span class="koboSpan" id="kobo.593.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.594.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.595.1">#/components/schemas/OrderStatus'</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.596.1">responses</span></span><span class="koboSpan" id="kobo.597.1">:
      </span><span class="hljs-string"><span class="koboSpan" id="kobo.598.1">'200'</span></span><span class="koboSpan" id="kobo.599.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.600.1">description</span></span><span class="koboSpan" id="kobo.601.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.602.1">OK</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.603.1">content</span></span><span class="koboSpan" id="kobo.604.1">:
          application/</span><span class="hljs-attr"><span class="koboSpan" id="kobo.605.1">json</span></span><span class="koboSpan" id="kobo.606.1">:
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.607.1">schema</span></span><span class="koboSpan" id="kobo.608.1">:
              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.609.1">$ref</span></span><span class="koboSpan" id="kobo.610.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.611.1">'#/components/schemas/OrderResponse'</span></span>
      <span class="hljs-string"><span class="koboSpan" id="kobo.612.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.613.1">404'</span></span><span class="koboSpan" id="kobo.614.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.615.1">description</span></span><span class="koboSpan" id="kobo.616.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.617.1">Not</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.618.1">Found</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.619.1">
     The goal of this endpoint is to update the status of an order.
    </span>
    <span class="koboSpan" id="kobo.619.2">
     In a real-world production environment, the status of an order depends on external circumstances defined by other services in business logic, for example, the payment approval validated by a payment provider, availability of the items in a warehouse, or even fraud detection; it’s important to have a way to change the status of the orders with external calls, and this endpoint is specifically to accomplish this.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.620.1">
     Note that the body of this request is being defined by reference, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.621.1">
      $ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.622.1">
     , to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.623.1">
      OrderStatus
     </span>
    </code>
    <span class="koboSpan" id="kobo.624.1">
     schema that will be defined in the
    </span>
    <a id="_idIndexMarker229">
    </a>
    <span class="koboSpan" id="kobo.625.1">
     next section.
    </span>
    <span class="koboSpan" id="kobo.625.2">
     This exemplifies the reusability of the specification-first design, where you define a reusable schema that can be referenced across multiple path definitions, parameters, and endpoints in the OpenAPI schema definition file, eliminating the need to repeat any definitions.
    </span>
    <span class="koboSpan" id="kobo.625.3">
     The next section covers this topic.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.626.1">
     Now, we are going to define the schemas used as a body for the requests and responses and as params in the operations we have just finished defining.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-97">
    <a id="_idTextAnchor104">
    </a>
    <span class="koboSpan" id="kobo.627.1">
     Defining the API schemas
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.628.1">
     Now that we have finished defining the
    </span>
    <a id="_idIndexMarker230">
    </a>
    <span class="koboSpan" id="kobo.629.1">
     paths that identify the resources of our API, we are going to define the schemas that we use in the operations defined in the previous section.
    </span>
    <span class="koboSpan" id="kobo.629.2">
     The schemas describe the structure of the request and response bodies for those operations and can also be used as parameters in the operations as seen before.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.630.1">
     <img alt="Figure 4.1: Entity-Relationship diagram from the defined API schema" src="../Images/B21843_04_1.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.631.1">
     Figure 4.1: Entity-Relationship diagram from the defined API schema
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.632.1">
     In the preceding diagram, you can see the relationship between the entities that will be created later by extending from the
    </span>
    <a id="_idIndexMarker231">
    </a>
    <span class="koboSpan" id="kobo.633.1">
     schema definitions we are about to write and generate – that is why they differ in the name definition.
    </span>
    <span class="koboSpan" id="kobo.633.2">
     This way, you can have the whole entity structure defined from the OpenAPI schema, reinforcing the API-first principle.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.634.1">
     Schema definitions are located under the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.635.1">
      components
     </span>
    </code>
    <span class="koboSpan" id="kobo.636.1">
     section of the OpenAPI specification.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.637.1">
     OpenAPI schemas use a language that supports defining complex structures of JSON data and the relationships between the structures.
    </span>
    <span class="koboSpan" id="kobo.637.2">
     The schemas are entries inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.638.1">
      schemas
     </span>
    </code>
    <span class="koboSpan" id="kobo.639.1">
     section, with the first ones being
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.640.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.641.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.642.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.643.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.644.1">components</span></span><span class="koboSpan" id="kobo.645.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.646.1">schemas</span></span><span class="koboSpan" id="kobo.647.1">:
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.648.1">Product</span></span><span class="koboSpan" id="kobo.649.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.650.1">type</span></span><span class="koboSpan" id="kobo.651.1">: object
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.652.1">properties</span></span><span class="koboSpan" id="kobo.653.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.654.1">productSKU</span></span><span class="koboSpan" id="kobo.655.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.656.1">type</span></span><span class="koboSpan" id="kobo.657.1">: string
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.658.1">quantity</span></span><span class="koboSpan" id="kobo.659.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.660.1">type</span></span><span class="koboSpan" id="kobo.661.1">: integer
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.662.1">Customer</span></span><span class="koboSpan" id="kobo.663.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.664.1">type</span></span><span class="koboSpan" id="kobo.665.1">: object
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.666.1">properties</span></span><span class="koboSpan" id="kobo.667.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.668.1">customerType</span></span><span class="koboSpan" id="kobo.669.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.670.1">type</span></span><span class="koboSpan" id="kobo.671.1">: string
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.672.1">streetAddress</span></span><span class="koboSpan" id="kobo.673.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.674.1">type</span></span><span class="koboSpan" id="kobo.675.1">: string
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.676.1">city</span></span><span class="koboSpan" id="kobo.677.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.678.1">type</span></span><span class="koboSpan" id="kobo.679.1">: string
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.680.1">postalCode</span></span><span class="koboSpan" id="kobo.681.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.682.1">type</span></span><span class="koboSpan" id="kobo.683.1">: string
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.684.1">discriminator</span></span><span class="koboSpan" id="kobo.685.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.686.1">propertyName</span></span><span class="koboSpan" id="kobo.687.1">: customerType
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.688.1">mapping</span></span><span class="koboSpan" id="kobo.689.1">:
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.690.1">person</span></span><span class="koboSpan" id="kobo.691.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.692.1">'#/components/schemas/PersonCustomer'</span></span>
          <span class="hljs-attr"><span class="koboSpan" id="kobo.693.1">company</span></span><span class="koboSpan" id="kobo.694.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.695.1">'#/components/schemas/CompanyCustomer'</span></span>
</code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.696.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.697.1">
     is the simplest schema in our specification.
    </span>
    <span class="koboSpan" id="kobo.697.2">
     It just defines that its type is a JSON object with two properties:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.698.1">
      productSKU
     </span>
    </code>
    <span class="koboSpan" id="kobo.699.1">
     of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.700.1">
      string
     </span>
    </code>
    <span class="koboSpan" id="kobo.701.1">
     , which will be the ID for our products, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.702.1">
      quantity
     </span>
    </code>
    <span class="koboSpan" id="kobo.703.1">
     of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.704.1">
      integer
     </span>
    </code>
    <span class="koboSpan" id="kobo.705.1">
     , which will represent the availability of this product.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.706.1">
     Moving to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.707.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.708.1">
     schema, it is an object containing four properties:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.709.1">
      customerType
     </span>
    </code>
    <span class="koboSpan" id="kobo.710.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.711.1">
      streetAddress
     </span>
    </code>
    <span class="koboSpan" id="kobo.712.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.713.1">
      city
     </span>
    </code>
    <span class="koboSpan" id="kobo.714.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.715.1">
      postalCode
     </span>
    </code>
    <span class="koboSpan" id="kobo.716.1">
     .
    </span>
    <span class="koboSpan" id="kobo.716.2">
     All the properties are of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.717.1">
      string
     </span>
    </code>
    <span class="koboSpan" id="kobo.718.1">
     .
    </span>
    <span class="koboSpan" id="kobo.718.2">
     But here, we also start to introduce the concept of inheritance and polymorphism.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.719.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.720.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.721.1">
     schema will
    </span>
    <a id="_idIndexMarker232">
    </a>
    <span class="koboSpan" id="kobo.722.1">
     serve as a parent (base) schema, which will be extended by two other schemas—
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.723.1">
      PersonCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.724.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.725.1">
      CompanyCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.726.1">
     —that we will introduce later.
    </span>
    <span class="koboSpan" id="kobo.726.2">
     This setup demonstrates inheritance, with one parent and two child schemas, and polymorphism, allowing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.727.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.728.1">
     to represent either
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.729.1">
      PersonCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.730.1">
     or a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.731.1">
      CompanyCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.732.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.733.1">
     This is where the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.734.1">
      discriminator
     </span>
    </code>
    <span class="koboSpan" id="kobo.735.1">
     property comes into play.
    </span>
    <span class="koboSpan" id="kobo.735.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.736.1">
      discriminator
     </span>
    </code>
    <span class="koboSpan" id="kobo.737.1">
     property is used by the JSON parser to indicate which of the child schemas it is inheriting from when it tries to deserialize the JSON data into the generated object while loading from JSON and converting it into an object in runtime.
    </span>
    <span class="koboSpan" id="kobo.737.2">
     In our case, the discriminator will be the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.738.1">
      customerType
     </span>
    </code>
    <span class="koboSpan" id="kobo.739.1">
     property.
    </span>
    <span class="koboSpan" id="kobo.739.2">
     This property will define whether
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.740.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.741.1">
     will be of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.742.1">
      PersonCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.743.1">
     or type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.744.1">
      CompanyCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.745.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.746.1">
     This property is used when you place an order, as part of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.747.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.748.1">
     request body that we previously defined.
    </span>
    <span class="koboSpan" id="kobo.748.2">
     With the discriminator, a single endpoint can accept two different bodies, one with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.749.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.750.1">
     of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.751.1">
      PersonCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.752.1">
     for individual customers, and another one with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.753.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.754.1">
     of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.755.1">
      CompanyCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.756.1">
     for companies.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.757.1">
     Now, let us define the child
    </span>
    <a id="_idIndexMarker233">
    </a>
    <span class="koboSpan" id="kobo.758.1">
     schemas,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.759.1">
      PersonCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.760.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.761.1">
      CompanyCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.762.1">
     , and relate them to the parent
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.763.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.764.1">
     schema:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.765.1">PersonCustomer</span></span><span class="koboSpan" id="kobo.766.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.767.1">type</span></span><span class="koboSpan" id="kobo.768.1">: object
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.769.1">allOf</span></span><span class="koboSpan" id="kobo.770.1">:
    - </span><span class="hljs-attr"><span class="koboSpan" id="kobo.771.1">$ref</span></span><span class="koboSpan" id="kobo.772.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.773.1">'#/components/schemas/Customer'</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.774.1">properties</span></span><span class="koboSpan" id="kobo.775.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.776.1">firstName</span></span><span class="koboSpan" id="kobo.777.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.778.1">type</span></span><span class="koboSpan" id="kobo.779.1">: string
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.780.1">lastName</span></span><span class="koboSpan" id="kobo.781.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.782.1">type</span></span><span class="koboSpan" id="kobo.783.1">: string
</span><span class="hljs-title"><span class="koboSpan" id="kobo.784.1">CompanyCustomer</span></span><span class="koboSpan" id="kobo.785.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.786.1">type</span></span><span class="koboSpan" id="kobo.787.1">: object
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.788.1">allOf</span></span><span class="koboSpan" id="kobo.789.1">:
    - </span><span class="hljs-attr"><span class="koboSpan" id="kobo.790.1">$ref</span></span><span class="koboSpan" id="kobo.791.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.792.1">'#/components/schemas/Customer'</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.793.1">properties</span></span><span class="koboSpan" id="kobo.794.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.795.1">companyName</span></span><span class="koboSpan" id="kobo.796.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.797.1">type</span></span><span class="koboSpan" id="kobo.798.1">: string
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.799.1">vatId</span></span><span class="koboSpan" id="kobo.800.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.801.1">type</span></span><span class="koboSpan" id="kobo.802.1">: string
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.803.1">
     Both schema definitions look similar; both of them use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.804.1">
      allOf
     </span>
    </code>
    <span class="koboSpan" id="kobo.805.1">
     keyword that refers to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.806.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.807.1">
     schema.
    </span>
    <span class="koboSpan" id="kobo.807.2">
     It defines that the child schema should contain (inherit) all the properties of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.808.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.809.1">
     schema.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.810.1">
     Since we have implemented hierarchy in our specification, let us briefly look at how to create new orders in this structure, using
    </span>
    <a id="_idIndexMarker234">
    </a>
    <span class="koboSpan" id="kobo.811.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.812.1">
      OrderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.813.1">
     that will be used for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.814.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.815.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.816.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.817.1">
     methods to create and update resources in the application.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.818.1">
     <img alt="Figure 4.2 – OrderRequestBody schema in OpenAPI Swagger UI" src="../Images/B21843_04_2.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.819.1">
     Figure 4.2 – OrderRequestBody schema in OpenAPI Swagger UI
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.820.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.821.1">
      POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.822.1">
     method expects
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.823.1">
      OrderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.824.1">
     in the body of the request.
    </span>
    <span class="koboSpan" id="kobo.824.2">
     Since we have used
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.825.1">
      discriminator
     </span>
    </code>
    <span class="koboSpan" id="kobo.826.1">
     in the definition, here we will need to select one of the bodies in the request, as specified by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.827.1">
      oneOf-&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.828.1">
     in the preceding figure:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.829.1">
      PersonCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.830.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.831.1">
      CompanyCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.832.1">
     , or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.833.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.834.1">
     .
    </span>
    <span class="koboSpan" id="kobo.834.2">
     The value for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.835.1">
      customerType
     </span>
    </code>
    <span class="koboSpan" id="kobo.836.1">
     field needs to be one of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.837.1">
      person
     </span>
    </code>
    <span class="koboSpan" id="kobo.838.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.839.1">
      company
     </span>
    </code>
    <span class="koboSpan" id="kobo.840.1">
     , or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.841.1">
      customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.842.1">
     to match one of the bodies defined.
    </span>
    <span class="koboSpan" id="kobo.842.2">
     The usage of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.843.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.844.1">
     alone is discouraged since it does not benefit from the hierarchy and the polymorphism, but it is important to know that you can use it alone too without the extra fields from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.845.1">
      PersonCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.846.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.847.1">
      CompanyCustomer
     </span>
    </code>
    <span class="koboSpan" id="kobo.848.1">
     if needed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.849.1">
     Then, you can add the corresponding fields of each of these, so if it is a company, you will have fields such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.850.1">
      vatId
     </span>
    </code>
    <span class="koboSpan" id="kobo.851.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.852.1">
      companyName
     </span>
    </code>
    <span class="koboSpan" id="kobo.853.1">
     in your request body, and if it is a person, you will have fields such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.854.1">
      firstName
     </span>
    </code>
    <span class="koboSpan" id="kobo.855.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.856.1">
      lastName
     </span>
    </code>
    <span class="koboSpan" id="kobo.857.1">
     in your request.
    </span>
    <span class="koboSpan" id="kobo.857.2">
     The fields mentioned in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.858.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.859.1">
     specification are common to both types of customers.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.860.1">
     To finish the schema section
    </span>
    <a id="_idIndexMarker235">
    </a>
    <span class="koboSpan" id="kobo.861.1">
     of our API specification, we will define the request and response bodies used by the Order Management API:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.862.1">OrderRequestBody</span></span><span class="koboSpan" id="kobo.863.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.864.1">type</span></span><span class="koboSpan" id="kobo.865.1">: object
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.866.1">properties</span></span><span class="koboSpan" id="kobo.867.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.868.1">customer</span></span><span class="koboSpan" id="kobo.869.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.870.1">$ref</span></span><span class="koboSpan" id="kobo.871.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.872.1">'#/components/schemas/Customer'</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.873.1">products</span></span><span class="koboSpan" id="kobo.874.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.875.1">type</span></span><span class="koboSpan" id="kobo.876.1">: array
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.877.1">items</span></span><span class="koboSpan" id="kobo.878.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.879.1">$ref</span></span><span class="koboSpan" id="kobo.880.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.881.1">'#/components/schemas/Product'</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.882.1">OrderResponse</span></span><span class="koboSpan" id="kobo.883.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.884.1">type</span></span><span class="koboSpan" id="kobo.885.1">: object
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.886.1">properties</span></span><span class="koboSpan" id="kobo.887.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.888.1">id</span></span><span class="koboSpan" id="kobo.889.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.890.1">type</span></span><span class="koboSpan" id="kobo.891.1">: string
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.892.1">customer</span></span><span class="koboSpan" id="kobo.893.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.894.1">$ref</span></span><span class="koboSpan" id="kobo.895.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.896.1">'#/components/schemas/Customer'</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.897.1">products</span></span><span class="koboSpan" id="kobo.898.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.899.1">type</span></span><span class="koboSpan" id="kobo.900.1">: array
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.901.1">items</span></span><span class="koboSpan" id="kobo.902.1">:
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.903.1">$ref</span></span><span class="koboSpan" id="kobo.904.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.905.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.906.1">#/components/schemas/Product'</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.907.1">totalAmount</span></span><span class="koboSpan" id="kobo.908.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.909.1">type</span></span><span class="koboSpan" id="kobo.910.1">: number
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.911.1">orderCreatedDate</span></span><span class="koboSpan" id="kobo.912.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.913.1">type</span></span><span class="koboSpan" id="kobo.914.1">: string
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.915.1">format</span></span><span class="koboSpan" id="kobo.916.1">: date-time
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.917.1">orderUpdatedDate</span></span><span class="koboSpan" id="kobo.918.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.919.1">type</span></span><span class="koboSpan" id="kobo.920.1">: string
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.921.1">format</span></span><span class="koboSpan" id="kobo.922.1">: date-time
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.923.1">status</span></span><span class="koboSpan" id="kobo.924.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.925.1">$ref</span></span><span class="koboSpan" id="kobo.926.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.927.1">'#/components/schemas/Status'</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.928.1">OrderStatus</span></span><span class="koboSpan" id="kobo.929.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.930.1">type</span></span><span class="koboSpan" id="kobo.931.1">: object
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.932.1">properties</span></span><span class="koboSpan" id="kobo.933.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.934.1">status</span></span><span class="koboSpan" id="kobo.935.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.936.1">$ref</span></span><span class="koboSpan" id="kobo.937.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.938.1">'#/components/schemas/Status'</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.939.1">Status</span></span><span class="koboSpan" id="kobo.940.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.941.1">type</span></span><span class="koboSpan" id="kobo.942.1">: string
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.943.1">enum</span></span><span class="koboSpan" id="kobo.944.1">: [ </span><span class="hljs-title"><span class="koboSpan" id="kobo.945.1">Pending</span></span><span class="koboSpan" id="kobo.946.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.947.1">Approved</span></span><span class="koboSpan" id="kobo.948.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.949.1">Cancelled</span></span><span class="koboSpan" id="kobo.950.1"> ]
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.951.1">
     In the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.952.1">
      OrderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.953.1">
     object definition, there are two properties – one that is of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.954.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.955.1">
     type defined above, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.956.1">
      $ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.957.1">
     to refer to its definition, and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.958.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.959.1">
     property, which is a JSON array that will represent a list of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.960.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.961.1">
     JSON objects within
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.962.1">
      OrderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.963.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.964.1">
     In the response schema definition,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.965.1">
      OrderResponse
     </span>
    </code>
    <span class="koboSpan" id="kobo.966.1">
     contains an array of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.967.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.968.1">
     JSON objects, containing every product for a particular order, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.969.1">
      customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.970.1">
     property that references the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.971.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.972.1">
     schema and returns the customer data for this order, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.973.1">
      orderCreatedDate
     </span>
    </code>
    <span class="koboSpan" id="kobo.974.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.975.1">
      orderUpdatedDate
     </span>
    </code>
    <span class="koboSpan" id="kobo.976.1">
     properties with the date and time of the order creation and update if any, and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.977.1">
      status
     </span>
    </code>
    <span class="koboSpan" id="kobo.978.1">
     property that references the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.979.1">
      OrderStatus
     </span>
    </code>
    <span class="koboSpan" id="kobo.980.1">
     defined, which references the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.981.1">
      Status
     </span>
    </code>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.982.1">
      enum
     </span>
    </code>
    <span class="koboSpan" id="kobo.983.1">
     , containing all the possible statuses for an order:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.984.1">
      Pending
     </span>
    </code>
    <span class="koboSpan" id="kobo.985.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.986.1">
      Approved
     </span>
    </code>
    <span class="koboSpan" id="kobo.987.1">
     , or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.988.1">
      Cancelled
     </span>
    </code>
    <span class="koboSpan" id="kobo.989.1">
     .
    </span>
    <span class="koboSpan" id="kobo.989.2">
     Since we can reuse these definitions
    </span>
    <a id="_idIndexMarker236">
    </a>
    <span class="koboSpan" id="kobo.990.1">
     anywhere around the specification, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.991.1">
      OrderStatus
     </span>
    </code>
    <span class="koboSpan" id="kobo.992.1">
     schema is also referenced in the order change status endpoint as the request body definition for allowed values in the request.
    </span>
   </p>
   <div class="note">
    <div>
     <span class="koboSpan" id="kobo.993.1">
      <img alt="img" src="../Images/Information_Box_Icon.png"/>
     </span>
    </div>
    <p class="normal">
     <span class="koboSpan" id="kobo.994.1">
      Sharing schemas across APIs
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.995.1">
      With Java and other programming languages, we are used to defining reusable libraries to avoid repeating the same code in multiple projects.
     </span>
     <span class="koboSpan" id="kobo.995.2">
      OpenAPI specifications can also refer to external files, so it is possible to share common parts among multiple APIs.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.996.1">
      However, you should be aware that this approach creates coupling among the APIs.
     </span>
     <span class="koboSpan" id="kobo.996.2">
      In case the common part changes, it can lead to unexpected inconsistencies.
     </span>
     <span class="koboSpan" id="kobo.996.3">
      So, it is advisable to try to keep the individual API specifications self-contained.
     </span>
     <span class="koboSpan" id="kobo.996.4">
      If you want to reuse schemas, you should ensure that they are very stable.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.997.1">
      One such example could be the structure
     </span>
     <a id="_idIndexMarker237">
     </a>
     <span class="koboSpan" id="kobo.998.1">
      used for reporting errors.
     </span>
     <span class="koboSpan" id="kobo.998.2">
      But in our example APIs, we use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.999.1">
       ProblemDetail
      </span>
     </code>
     <span class="koboSpan" id="kobo.1000.1">
      schema based on the RFC 7807 internet standard.
     </span>
     <span class="koboSpan" id="kobo.1000.2">
      This way, we avoid maintaining the shared schema.
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-98">
    <a id="_idTextAnchor105">
    </a>
    <span class="koboSpan" id="kobo.1001.1">
     Defining security schemes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1002.1">
     Besides schemas, the components
    </span>
    <a id="_idIndexMarker238">
    </a>
    <span class="koboSpan" id="kobo.1003.1">
     section of the OpenAPI specification can be used to specify security-related requirements for our API.
    </span>
    <span class="koboSpan" id="kobo.1003.2">
     Here, we will specify the authentication mechanism to use: OpenID Connect with JWT.
    </span>
    <span class="koboSpan" id="kobo.1003.3">
     You will learn more about security in
    </span>
    <a href="B21843_07.xhtml#_idTextAnchor176">
     <em class="italic">
      <span class="koboSpan" id="kobo.1004.1">
       Chapter 7
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.1005.1">
     .
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.1006.1">securitySchemes</span></span><span class="koboSpan" id="kobo.1007.1">:
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1008.1">JWTAuth</span></span><span class="koboSpan" id="kobo.1009.1">:
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1010.1">type</span></span><span class="koboSpan" id="kobo.1011.1">: http
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1012.1">scheme</span></span><span class="koboSpan" id="kobo.1013.1">: bearer
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1014.1">bearerFormat</span></span><span class="koboSpan" id="kobo.1015.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1016.1">JWT</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1017.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1018.1">
      securitySchemes
     </span>
    </code>
    <span class="koboSpan" id="kobo.1019.1">
     defines a security scheme named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1020.1">
      JWTAuth
     </span>
    </code>
    <span class="koboSpan" id="kobo.1021.1">
     and applies it globally to all operations in the API.
    </span>
    <span class="koboSpan" id="kobo.1021.2">
     Here is a breakdown of its components and their implications:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1022.1">
       JWTAuth
      </span>
     </code>
     <span class="koboSpan" id="kobo.1023.1">
      : This is the identifier for the security scheme
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1024.1">
       type: http
      </span>
     </code>
     <span class="koboSpan" id="kobo.1025.1">
      : This specifies that the security scheme is HTTP-based
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1026.1">
       scheme: bearer
      </span>
     </code>
     <span class="koboSpan" id="kobo.1027.1">
      : This indicates that the scheme uses bearer tokens
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1028.1">
       bearerFormat: JWT
      </span>
     </code>
     <span class="koboSpan" id="kobo.1029.1">
      : This specifies that the bearer tokens are in JWT format
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1030.1">
     With all that defined, we can move away from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1031.1">
      components
     </span>
    </code>
    <span class="koboSpan" id="kobo.1032.1">
     keyword and get to know our last keyword in this definition, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1033.1">
      security
     </span>
    </code>
    <span class="koboSpan" id="kobo.1034.1">
     keyword:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.1035.1">security</span></span><span class="koboSpan" id="kobo.1036.1">:
  - </span><span class="hljs-title"><span class="koboSpan" id="kobo.1037.1">JWTAuth</span></span><span class="koboSpan" id="kobo.1038.1">: []
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1039.1">
     This security definition is at the root level, and it indicates that there are no specific scopes or permissions required within the JWT for accessing the API.
    </span>
    <span class="koboSpan" id="kobo.1039.2">
     So, a valid JWT must be provided in the Authorization header for all API calls, but the token itself does n
    </span>
    <a id="_idTextAnchor106">
    </a>
    <span class="koboSpan" id="kobo.1040.1">
     ot need to specify any particular scopes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1041.1">
     If you prefer not to use JWTs for authentication, you can consider using session state IDs as an alternative.
    </span>
    <span class="koboSpan" id="kobo.1041.2">
     They were widely
    </span>
    <a id="_idIndexMarker239">
    </a>
    <span class="koboSpan" id="kobo.1042.1">
     used before the advent of JWTs, which replaced session state IDs for many reasons.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1043.1">
     Before looking at how to use session state IDs, let us see the key reasons that JWTs became the preferred authentication method for microservices:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1044.1">
       Statelessness
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1045.1">
      : JWTs are stateless, meaning they do not require the server to maintain session state.
     </span>
     <span class="koboSpan" id="kobo.1045.2">
      This is beneficial for microservices, which are designed to be stateless and scalable.
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1046.1">
       Scalability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1047.1">
      : Since JWTs are self-contained and do not require server-side storage, they are more scalable in distributed systems compared to session state IDs, which require centralized session storage.
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1048.1">
       Decentralized authentication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1049.1">
      : JWTs can be verified by any service that has a public key, allowing for decentralized authentication across multiple microservices without the need for a central session store.
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1050.1">
       Interoperability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1051.1">
      : JWTs are a standard (RFC 7519) and are widely supported across different platforms and languages, making them suitable for heterogeneous microservice environments.
     </span>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1052.1">
       Security
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1053.1">
      : JWTs can be signed and optionally encrypted, providing integrity and confidentiality.
     </span>
     <span class="koboSpan" id="kobo.1053.2">
      They can also include claims that provide additional context about the user or the session.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1054.1">
     But for specific circumstances, which could be dealing with legacy services and integrations with already existing services that make use of session state IDs, this approach may be necessary.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1055.1">
     Session state IDs involve maintaining a session on the server side, where each session is identified by a unique session ID.
    </span>
    <span class="koboSpan" id="kobo.1055.2">
     This session ID is stored on the client side, typically in a cookie, and sent with each request to the server.
    </span>
    <span class="koboSpan" id="kobo.1055.3">
     The server then validates the session ID and retrieves the associated session data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1056.1">
     Some of the advantages of session state IDs are that the server has full control over the session, including the ability to invalidate sessions at any time and there is no need to handle token expiration and renewal as with JWT.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1057.1">
     On the other hand, it requires
    </span>
    <a id="_idIndexMarker240">
    </a>
    <span class="koboSpan" id="kobo.1058.1">
     maintaining session state on the server, which can be challenging in a distributed environment, and, unlike JWT, which is stateless, session state IDs require the server to maintain state.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1059.1">
     Here is an example of how you can define session state IDs in your OpenAPI schema:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.1060.1">components</span></span><span class="koboSpan" id="kobo.1061.1">:
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1062.1">securitySchemes</span></span><span class="koboSpan" id="kobo.1063.1">:
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1064.1">SessionIDAuth</span></span><span class="koboSpan" id="kobo.1065.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1066.1">type</span></span><span class="koboSpan" id="kobo.1067.1">: apiKey
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1068.1">in</span></span><span class="koboSpan" id="kobo.1069.1">: cookie
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1070.1">name</span></span><span class="koboSpan" id="kobo.1071.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1072.1">SESSIONID</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.1073.1">security</span></span><span class="koboSpan" id="kobo.1074.1">:
  - </span><span class="hljs-title"><span class="koboSpan" id="kobo.1075.1">SessionIDAuth</span></span><span class="koboSpan" id="kobo.1076.1">: []
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1077.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1078.1">
      SessionIDAuth
     </span>
    </code>
    <span class="koboSpan" id="kobo.1079.1">
     security scheme specifies that the session ID will be sent in a cookie named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1080.1">
      SESSIONID
     </span>
    </code>
    <span class="koboSpan" id="kobo.1081.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1081.2">
     The server will then validate this session ID to authenticate the user.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1082.1">
     We will not be covering session state IDs in our services since they break the stateless goal of a RESTful microservice and having JWTs with all the advantages explained above, but it is good to know how you can use them with the specification-first approach.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1083.1">
     Also, as mentioned before, we will go into the security subject in more depth in
    </span>
    <a href="B21843_07.xhtml#_idTextAnchor176">
     <em class="italic">
      <span class="koboSpan" id="kobo.1084.1">
       Chapter 7
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.1085.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1086.1">
     With that, we have our specification completed.
    </span>
    <span class="koboSpan" id="kobo.1086.2">
     You can save your file with a name that represents your API, ending with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1087.1">
      .yml
     </span>
    </code>
    <span class="koboSpan" id="kobo.1088.1">
     extension (short for YAML).
    </span>
    <span class="koboSpan" id="kobo.1088.2">
     In our example, the file will be named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1089.1">
      Order_Management_API.yml
     </span>
    </code>
    <span class="koboSpan" id="kobo.1090.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1091.1">
     As mentioned earlier, you can see the complete file in the GitHub repository at
    </span>
    <a href="https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4">
     <span class="url">
      <span class="koboSpan" id="kobo.1092.1">
       https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1093.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1094.1">
     Next, we are going to generate code from this specification, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1095.1">
      openapi-generator-maven-plugin
     </span>
    </code>
    <span class="koboSpan" id="kobo.1096.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1096.2">
     Let us find out how.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-99">
    <a id="_idTextAnchor107">
    </a>
    <span class="koboSpan" id="kobo.1097.1">
     Generating code from the specification
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1098.1">
     In order to generate code from a specification, the application needs to be prepared for it.
    </span>
    <span class="koboSpan" id="kobo.1098.2">
     In this section, you will configure a plugin and generate code from what we have specified in the specification file.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1099.1">
     The following XML fragment
    </span>
    <a id="_idIndexMarker241">
    </a>
    <span class="koboSpan" id="kobo.1100.1">
     configures
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1101.1">
      openapi-generator-maven-plugin
     </span>
    </code>
    <span class="koboSpan" id="kobo.1102.1">
     for our Maven project, specifically designed to generate Spring-based Java code from the OpenAPI specification defined in the previous section.
    </span>
    <span class="koboSpan" id="kobo.1102.2">
     This plugin facilitates the automatic creation of API endpoints, models, and configuration classes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1103.1">
     We are going to configure the plugin in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1104.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.1105.1">
     file inside our project.
    </span>
    <span class="koboSpan" id="kobo.1105.2">
     You can refer to the GitHub repository to see the full file, but here we will focus on the specific changes to accomplish our goals.
    </span>
    <span class="koboSpan" id="kobo.1105.3">
     Let us look at this configuration now:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1106.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1107.1">plugin</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1108.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1109.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1110.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1111.1">&gt;</span></span><span class="koboSpan" id="kobo.1112.1">org.openapitools</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1113.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1114.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1115.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1116.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1117.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1118.1">&gt;</span></span><span class="koboSpan" id="kobo.1119.1">openapi-generator-maven-plugin</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1120.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1121.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1122.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1123.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1124.1">version</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1125.1">&gt;</span></span><span class="koboSpan" id="kobo.1126.1">7.5.0</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1127.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1128.1">version</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1129.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1130.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1131.1">executions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1132.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.1133.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1134.1">execution</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1135.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.1136.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1137.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1138.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.1139.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1140.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1141.1">&gt;</span></span><span class="koboSpan" id="kobo.1142.1">generate</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1143.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1144.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1145.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.1146.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1147.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1148.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.1149.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1150.1">configuration</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1151.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.1152.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1153.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1154.1">&gt;</span></span><span class="koboSpan" id="kobo.1155.1">${project.basedir}/your_spec_API.yml
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1156.1">                &lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1157.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1158.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.1159.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1160.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1161.1">&gt;</span></span><span class="koboSpan" id="kobo.1162.1">spring</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1163.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1164.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1165.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.1166.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1167.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1168.1">&gt;</span></span><span class="koboSpan" id="kobo.1169.1">[package where generated code is added]
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1170.1">                &lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1171.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1172.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.1173.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1174.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1175.1">&gt;</span></span><span class="koboSpan" id="kobo.1176.1">[new package where DTOs are added]
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1177.1">                &lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1178.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1179.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1180.1">                &lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1181.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1182.1">&gt;</span></span><span class="koboSpan" id="kobo.1183.1">Dto</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1184.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1185.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1186.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.1187.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1188.1">configOptions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1189.1">&gt;</span></span>
                   <span class="hljs-tag"><span class="koboSpan" id="kobo.1190.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1191.1">documentationProvider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1192.1">&gt;</span></span><span class="koboSpan" id="kobo.1193.1">springdoc
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1194.1">                   &lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1195.1">documentationProvider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1196.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.1197.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1198.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1199.1">&gt;</span></span><span class="koboSpan" id="kobo.1200.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1201.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1202.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1203.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.1204.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1205.1">oas3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1206.1">&gt;</span></span><span class="koboSpan" id="kobo.1207.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1208.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1209.1">oas3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1210.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.1211.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1212.1">openApiNullable</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1213.1">&gt;</span></span><span class="koboSpan" id="kobo.1214.1">false</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1215.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1216.1">openApiNullable</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1217.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.1218.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1219.1">serializableModel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1220.1">&gt;</span></span><span class="koboSpan" id="kobo.1221.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1222.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1223.1">serializableModel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1224.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.1225.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1226.1">useBeanValidation</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1227.1">&gt;</span></span><span class="koboSpan" id="kobo.1228.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1229.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1230.1">useBeanValidation</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1231.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.1232.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1233.1">useSpringBoot3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1234.1">&gt;</span></span><span class="koboSpan" id="kobo.1235.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1236.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1237.1">useSpringBoot3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1238.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.1239.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1240.1">useTags</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1241.1">&gt;</span></span><span class="koboSpan" id="kobo.1242.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1243.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1244.1">useTags</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1245.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.1246.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1247.1">configOptions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1248.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.1249.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1250.1">configuration</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1251.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.1252.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1253.1">execution</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1254.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1255.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1256.1">executions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1257.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1258.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1259.1">plugin</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1260.1">&gt;</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1261.1">
     Here is a breakdown of its key
    </span>
    <a id="_idIndexMarker242">
    </a>
    <span class="koboSpan" id="kobo.1262.1">
     components:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1263.1">
       Plugin identification
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1264.1">
      :
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1265.1">
       groupId
      </span>
     </code>
     <span class="koboSpan" id="kobo.1266.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1267.1">
       artifactId
      </span>
     </code>
     <span class="koboSpan" id="kobo.1268.1">
      identify the plugin within the Maven ecosystem:
     </span>
     <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1269.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1270.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1271.1">&gt;</span></span><span class="koboSpan" id="kobo.1272.1">org.openapitools</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1273.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1274.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1275.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1276.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1277.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1278.1">&gt;</span></span><span class="koboSpan" id="kobo.1279.1">openapi-generator-maven-plugin</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1280.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1281.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1282.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1283.1">
       Plugin version
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1284.1">
      : Specifies the version of the plugin to use, ensuring compatibility and access to specific features available in this version:
     </span>
     <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1285.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1286.1">version</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1287.1">&gt;</span></span><span class="koboSpan" id="kobo.1288.1">7.5.0</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1289.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1290.1">version</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1291.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1292.1">
       Execution configuration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1293.1">
      : The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1294.1">
       executions
      </span>
     </code>
     <span class="koboSpan" id="kobo.1295.1">
      block defines when and how the plugin should run.
     </span>
     <span class="koboSpan" id="kobo.1295.2">
      The goal named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1296.1">
       generate
      </span>
     </code>
     <span class="koboSpan" id="kobo.1297.1">
      triggers the code generation process:
     </span>
     <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1298.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1299.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1300.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1301.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1302.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1303.1">&gt;</span></span><span class="koboSpan" id="kobo.1304.1">generate</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1305.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1306.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1307.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1308.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1309.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1310.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1311.1">
       Specification input
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1312.1">
      : The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1313.1">
       inputSpec
      </span>
     </code>
     <span class="koboSpan" id="kobo.1314.1">
      configuration points to the OpenAPI specification file.
     </span>
     <span class="koboSpan" id="kobo.1314.2">
      This
     </span>
     <a id="_idIndexMarker243">
     </a>
     <span class="koboSpan" id="kobo.1315.1">
      path is relative to the project’s base directory, indicating where the plugin should look for the API definition elaborated in the previous section:
     </span>
     <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1316.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1317.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1318.1">&gt;</span></span><span class="koboSpan" id="kobo.1319.1">${project.basedir}/src/main/resources/Order_Management_API.yml</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1320.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1321.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1322.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1323.1">
       Generator configuration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1324.1">
      : The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1325.1">
       generatorName
      </span>
     </code>
     <span class="koboSpan" id="kobo.1326.1">
      specifies that the generated code should be tailored for Spring, influencing the structure and annotations used in the output:
     </span>
     <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1327.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1328.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1329.1">&gt;</span></span><span class="koboSpan" id="kobo.1330.1">spring</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1331.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1332.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1333.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1334.1">
       Package names
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1335.1">
      : The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1336.1">
       apiPackage
      </span>
     </code>
     <span class="koboSpan" id="kobo.1337.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1338.1">
       modelPackage
      </span>
     </code>
     <span class="koboSpan" id="kobo.1339.1">
      configurations define the Java package names for generated API interfaces (API operations) and model classes (data structures), respectively.
     </span>
     <span class="koboSpan" id="kobo.1339.2">
      This helps in organizing the generated code within the project structure.
     </span>
     <span class="koboSpan" id="kobo.1339.3">
      Also, having a suffix added by
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1340.1">
       modelNameSuffix
      </span>
     </code>
     <span class="koboSpan" id="kobo.1341.1">
      helps to have the DTOs generated with this suffix in the name:
     </span>
     <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1342.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1343.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1344.1">&gt;</span></span><span class="koboSpan" id="kobo.1345.1">com.packt.ordermanagementapi.adapter.inbound.rest
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1346.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1347.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1348.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1349.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1350.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1351.1">&gt;</span></span><span class="koboSpan" id="kobo.1352.1">com.packt.ordermanagementapi.adapter.inbound.rest.dto
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1353.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1354.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1355.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1356.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1357.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1358.1">&gt;</span></span><span class="koboSpan" id="kobo.1359.1">Dto</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1360.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1361.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1362.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="bulletList">
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1363.1">
       Additional options
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1364.1">
      : The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1365.1">
       configOptions
      </span>
     </code>
     <span class="koboSpan" id="kobo.1366.1">
      section provides further customization of the generated code.
     </span>
     <span class="koboSpan" id="kobo.1366.2">
      Let us briefly describe each of the options we are using here and their functionality:
     </span>
     <ul>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1367.1">
         documentationProvider
        </span>
       </code>
       <span class="koboSpan" id="kobo.1368.1">
        : This specifies the documentation provider to use.
       </span>
       <span class="koboSpan" id="kobo.1368.2">
        In this case,
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1369.1">
         springdoc
        </span>
       </code>
       <span class="koboSpan" id="kobo.1370.1">
        is used to
       </span>
       <a id="_idIndexMarker244">
       </a>
       <span class="koboSpan" id="kobo.1371.1">
        generate API documentation.
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1372.1">
         interfaceOnly
        </span>
       </code>
       <span class="koboSpan" id="kobo.1373.1">
        : When set to
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1374.1">
         true
        </span>
       </code>
       <span class="koboSpan" id="kobo.1375.1">
        , only interfaces for the API are generated, without any implementation.
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1376.1">
         oas3
        </span>
       </code>
       <span class="koboSpan" id="kobo.1377.1">
        : This indicates that the OpenAPI 3.0 specification is being used.
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1378.1">
         openApiNullable
        </span>
       </code>
       <span class="koboSpan" id="kobo.1379.1">
        : When set to
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1380.1">
         false
        </span>
       </code>
       <span class="koboSpan" id="kobo.1381.1">
        , the generator will not use the
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1382.1">
         @Nullable
        </span>
       </code>
       <span class="koboSpan" id="kobo.1383.1">
        annotation for optional fields.
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1384.1">
         serializableModel
        </span>
       </code>
       <span class="koboSpan" id="kobo.1385.1">
        : When set to
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1386.1">
         true
        </span>
       </code>
       <span class="koboSpan" id="kobo.1387.1">
        , the generated models will implement the
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1388.1">
         Serializable
        </span>
       </code>
       <span class="koboSpan" id="kobo.1389.1">
        interface.
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1390.1">
         useBeanValidation
        </span>
       </code>
       <span class="koboSpan" id="kobo.1391.1">
        : When set to
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1392.1">
         true
        </span>
       </code>
       <span class="koboSpan" id="kobo.1393.1">
        , the generated models will include annotations for bean validation (e.g.,
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1394.1">
         @NotNull
        </span>
       </code>
       <span class="koboSpan" id="kobo.1395.1">
        ,
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1396.1">
         @Size
        </span>
       </code>
       <span class="koboSpan" id="kobo.1397.1">
        ).
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1398.1">
         useSpringBoot3
        </span>
       </code>
       <span class="koboSpan" id="kobo.1399.1">
        : When set to
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1400.1">
         true
        </span>
       </code>
       <span class="koboSpan" id="kobo.1401.1">
        , the generator will produce code compatible with Spring Boot 3.
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1402.1">
         useTags
        </span>
       </code>
       <span class="koboSpan" id="kobo.1403.1">
        : When set to
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1404.1">
         true
        </span>
       </code>
       <span class="koboSpan" id="kobo.1405.1">
        , the generator will use tags defined in the OpenAPI specification to group API operations.
       </span>
      </li>
     </ul>
     <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1406.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1407.1">configOptions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1408.1">&gt;</span></span>
   <span class="hljs-tag"><span class="koboSpan" id="kobo.1409.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1410.1">documentationProvider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1411.1">&gt;</span></span><span class="koboSpan" id="kobo.1412.1">springdoc</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1413.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1414.1">documentationProvider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1415.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1416.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1417.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1418.1">&gt;</span></span><span class="koboSpan" id="kobo.1419.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1420.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1421.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1422.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1423.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1424.1">oas3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1425.1">&gt;</span></span><span class="koboSpan" id="kobo.1426.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1427.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1428.1">oas3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1429.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1430.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1431.1">openApiNullable</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1432.1">&gt;</span></span><span class="koboSpan" id="kobo.1433.1">false</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1434.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1435.1">openApiNullable</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1436.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1437.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1438.1">serializableModel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1439.1">&gt;</span></span><span class="koboSpan" id="kobo.1440.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1441.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1442.1">serializableModel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1443.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1444.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1445.1">useBeanValidation</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1446.1">&gt;</span></span><span class="koboSpan" id="kobo.1447.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1448.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1449.1">useBeanValidation</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1450.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1451.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1452.1">useSpringBoot3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1453.1">&gt;</span></span><span class="koboSpan" id="kobo.1454.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1455.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1456.1">useSpringBoot3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1457.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1458.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1459.1">useTags</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1460.1">&gt;</span></span><span class="koboSpan" id="kobo.1461.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1462.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1463.1">useTags</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1464.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1465.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1466.1">configOptions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1467.1">&gt;</span></span>
</code></pre>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1468.1">
     With that, we have covered every aspect of the configuration of the plugin in our
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1469.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.1470.1">
     file.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1471.1">
     Next, let us execute the build and have the implementation generated:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1472.1">mvn clean install
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1473.1">
     If your build was successful, you
    </span>
    <a id="_idIndexMarker245">
    </a>
    <span class="koboSpan" id="kobo.1474.1">
     will note that you have the DTOs and an interface generated in your target folder.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1475.1">
     <img alt="Figure 4.3 – Implementation generated in the target folder" src="../Images/B21843_04_3.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1476.1">
     Figure 4.3 – Implementation generated in the target folder
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1477.1">
     If you use IntelliJ IDEA, switch to the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.1478.1">
      Packages
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1479.1">
     view, so you can see the generated sources along with the structure of the project and work seamlessly with the generated sources and your own implementation, as seen in the following screenshot:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1480.1">
     <img alt="Figure 4.4 – Implementation generated along with the project structure" src="../Images/B21843_04_4.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1481.1">
     Figure 4.4 – Implementation generated along with the project structure
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1482.1">
     By generating the code in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1483.1">
      target
     </span>
    </code>
    <span class="koboSpan" id="kobo.1484.1">
     folder, we clearly separate it from the manually written code in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1485.1">
      src
     </span>
    </code>
    <span class="koboSpan" id="kobo.1486.1">
     folder.
    </span>
    <span class="koboSpan" id="kobo.1486.2">
     The generated code should not be stored in a version control system (Git or another) to avoid inconsistencies
    </span>
    <a id="_idIndexMarker246">
    </a>
    <span class="koboSpan" id="kobo.1487.1">
     with the source specification it should be generated from.
    </span>
    <span class="koboSpan" id="kobo.1487.2">
     Instead, fresh code is generated during every Maven build.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1488.1">
     Let us see the results in the generated
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1489.1">
      PersonCustomerDto
     </span>
    </code>
    <span class="koboSpan" id="kobo.1490.1">
     class:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1491.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.1492.1">Generated</span></span><span class="koboSpan" id="kobo.1493.1">(value = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1494.1">"org.openapitools.codegen.languages.SpringCodegen"</span></span><span class="koboSpan" id="kobo.1495.1">, date = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1496.1">"2024-07-21T20:59:33.440034506-03:00[America/Sao_Paulo]"</span></span><span class="koboSpan" id="kobo.1497.1">, comments = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1498.1">"Generator version: 7.5.0"</span></span><span class="koboSpan" id="kobo.1499.1">)
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1500.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1501.1">PersonCustomerDto</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1502.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1503.1">CustomerDto</span></span><span class="koboSpan" id="kobo.1504.1"> implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.1505.1">Serializable</span></span><span class="koboSpan" id="kobo.1506.1"> {
  private </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1507.1">static</span></span><span class="koboSpan" id="kobo.1508.1"> final long serialVersionUID = 1L;
  private </span><span class="hljs-title"><span class="koboSpan" id="kobo.1509.1">String</span></span><span class="koboSpan" id="kobo.1510.1"> firstName;
  private </span><span class="hljs-title"><span class="koboSpan" id="kobo.1511.1">String</span></span><span class="koboSpan" id="kobo.1512.1"> lastName;
  public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1513.1">PersonCustomerDto</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1514.1">firstName</span></span><span class="koboSpan" id="kobo.1515.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1516.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1517.1"> firstName</span></span><span class="koboSpan" id="kobo.1518.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1519.1">this</span></span><span class="koboSpan" id="kobo.1520.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1521.1">firstName</span></span><span class="koboSpan" id="kobo.1522.1"> = firstName;
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1523.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1524.1">this</span></span><span class="koboSpan" id="kobo.1525.1">;
  }
...getters and setters omitted </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1526.1">for</span></span><span class="koboSpan" id="kobo.1527.1"> brevity
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1528.1">
     Here, we can see that for every field that was specified in the specification schema, a Java class field was generated accordingly, including the relationships with other schemas, such as the inheritance from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1529.1">
      Customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1530.1">
     schema, proving that we can also model object-oriented programming concepts using the API-first approach if we define the relationships in the specification file properly.
    </span>
    <span class="koboSpan" id="kobo.1530.2">
     The
    </span>
    <a id="_idIndexMarker247">
    </a>
    <span class="koboSpan" id="kobo.1531.1">
     other classes look similar, each one generated according to its own schema definition.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1532.1">
     Before moving on to the implementation of the operations listed in the API specification, let us see what our API paths
    </span>
    <a id="_idIndexMarker248">
    </a>
    <span class="koboSpan" id="kobo.1533.1">
     and methods were translated to.
    </span>
    <span class="koboSpan" id="kobo.1533.2">
     For example, let us see the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1534.1">
      DELETE
     </span>
    </code>
    <span class="koboSpan" id="kobo.1535.1">
     method:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1536.1">/**</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1537.1"> * DELETE /orders : Cancel Order</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1538.1"> * Cancels an existing order</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1539.1"> *</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1540.1"> * </span></span><span class="hljs-doctag"><span class="koboSpan" id="kobo.1541.1">@param</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.1542.1"> orderId ID of the order to cancel (required)</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1543.1"> * </span></span><span class="hljs-doctag"><span class="koboSpan" id="kobo.1544.1">@return</span></span><span class="hljs-comment"><span class="koboSpan" id="kobo.1545.1"> No Content (status code 204)</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1546.1"> *         or Not Found (status code 404)</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1547.1"> */</span></span><span class="koboSpan" id="kobo.1548.1">
@</span><span class="hljs-title"><span class="koboSpan" id="kobo.1549.1">Operation</span></span><span class="koboSpan" id="kobo.1550.1">(
    operationId = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1551.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1552.1">ordersDelete"</span></span><span class="koboSpan" id="kobo.1553.1">,
    summary = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1554.1">"Cancel Order"</span></span><span class="koboSpan" id="kobo.1555.1">,
    description = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1556.1">"Cancels an existing order"</span></span><span class="koboSpan" id="kobo.1557.1">,
    tags = { </span><span class="hljs-string"><span class="koboSpan" id="kobo.1558.1">"OrderManagement"</span></span><span class="koboSpan" id="kobo.1559.1"> },
    responses = {
        @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1560.1">ApiResponse</span></span><span class="koboSpan" id="kobo.1561.1">(responseCode = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1562.1">"204"</span></span><span class="koboSpan" id="kobo.1563.1">, description = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1564.1">"No Content"</span></span><span class="koboSpan" id="kobo.1565.1">),
        @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1566.1">ApiResponse</span></span><span class="koboSpan" id="kobo.1567.1">(responseCode = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1568.1">"404"</span></span><span class="koboSpan" id="kobo.1569.1">, description = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1570.1">"Not Found"</span></span><span class="koboSpan" id="kobo.1571.1">)
    },
    security = {
        @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1572.1">SecurityRequirement</span></span><span class="koboSpan" id="kobo.1573.1">(name = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1574.1">"JWTAuth"</span></span><span class="koboSpan" id="kobo.1575.1">)
    }
)
@</span><span class="hljs-title"><span class="koboSpan" id="kobo.1576.1">RequestMapping</span></span><span class="koboSpan" id="kobo.1577.1">(
    method = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1578.1">RequestMethod</span></span><span class="koboSpan" id="kobo.1579.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1580.1">DELETE</span></span><span class="koboSpan" id="kobo.1581.1">,
    value = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1582.1">"/orders"</span></span><span class="koboSpan" id="kobo.1583.1">
)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1584.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1585.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1586.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1587.1">Void</span></span><span class="koboSpan" id="kobo.1588.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1589.1">ordersDelete</span></span><span class="koboSpan" id="kobo.1590.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.1591.1">    @NotNull @Parameter(name = </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1592.1">"orderId"</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1593.1">,</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.1594.1">        description = </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1595.1">"ID of the order to cancel"</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1596.1">, required = </span></span><span class="hljs-literal"><span class="koboSpan" id="kobo.1597.1">true</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1598.1">,</span></span>
<span class="hljs-params">        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1599.1">in</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1600.1"> = ParameterIn.QUERY) @Valid @RequestParam(value = </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1601.1">"orderId"</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1602.1">,</span></span>
<span class="hljs-keyword">        </span><span class="hljs-params"><span class="koboSpan" id="kobo.1603.1">required = </span></span><span class="hljs-literal"><span class="koboSpan" id="kobo.1604.1">true</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1605.1">) </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1606.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1607.1"> orderId</span></span><span class="koboSpan" id="kobo.1608.1">
) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1609.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1610.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1611.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1612.1">&lt;&gt;(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1613.1">HttpStatus</span></span><span class="koboSpan" id="kobo.1614.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1615.1">NOT_IMPLEMENTED</span></span><span class="koboSpan" id="kobo.1616.1">);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1617.1">
     Here, we can see that the generated
    </span>
    <a id="_idIndexMarker249">
    </a>
    <span class="koboSpan" id="kobo.1618.1">
     default implementation code does nothing; it only returns a response entity with the status
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1619.1">
      NOT_IMPLEMENTED
     </span>
    </code>
    <span class="koboSpan" id="kobo.1620.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1620.2">
     If we tried to invoke the API with this default code, the client would see a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1621.1">
      501 Not Implemented
     </span>
    </code>
    <span class="koboSpan" id="kobo.1622.1">
     HTTP status.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1623.1">
     The default implementation is expected to be overridden by the actual implementation.
    </span>
    <span class="koboSpan" id="kobo.1623.2">
     The path, its parameters, and responses are already defined and documented.
    </span>
    <span class="koboSpan" id="kobo.1623.3">
     The API documentation of the running API application is accessible using the Swagger UI interface or by downloading the OpenAPI JSON definition through the auto-generated
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1624.1">
      /v3/api-docs
     </span>
    </code>
    <span class="koboSpan" id="kobo.1625.1">
     path, like with the code-first API we developed in
    </span>
    <a href="B21843_02.xhtml#_idTextAnchor050">
     <em class="italic">
      <span class="koboSpan" id="kobo.1626.1">
       Chapter 2
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.1627.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1628.1">
     Just keep in mind that you will need to add the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1629.1">
      springdoc-openapi-starter-webmvc-ui
     </span>
    </code>
    <span class="koboSpan" id="kobo.1630.1">
     dependency into your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1631.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.1632.1">
     file to be able to use the Swagger UI graphical interface.
    </span>
    <span class="koboSpan" id="kobo.1632.2">
     Please refer to the GitHub repository of
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1633.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.1634.1">
     to get the full list of dependencies needed to run the project.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1635.1">
     This is what makes the specification-first approach handy, since after the design is defined, developers can focus on the implementation while consumers can start the integration with the system even before the actual
    </span>
    <a id="_idIndexMarker250">
    </a>
    <span class="koboSpan" id="kobo.1636.1">
     development is finished.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1637.1">
     Now that our specification is generated, let us have an overview of the package structure of this service.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-100">
    <a id="_idTextAnchor108">
    </a>
    <span class="koboSpan" id="kobo.1638.1">
     Package structure of the Order Management API
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1639.1">
     Let us have a look
    </span>
    <a id="_idIndexMarker251">
    </a>
    <span class="koboSpan" id="kobo.1640.1">
     at what our package structure looks like for the Order Management API:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1641.1">
     <img alt="Figure 4.5 – Package structure of implemented Order Management API" src="../Images/B21843_04_5.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1642.1">
     Figure 4.5 – Package structure of implemented Order Management API
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1643.1">
     Here, we can see that the Order Management API follows the same architectural approach as described in
    </span>
    <a href="B21843_02.xhtml#_idTextAnchor050">
     <em class="italic">
      <span class="koboSpan" id="kobo.1644.1">
       Chapter 2
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.1645.1">
     , following
    </span>
    <a id="_idIndexMarker252">
    </a>
    <span class="koboSpan" id="kobo.1646.1">
     the principles of clean architecture.
    </span>
    <span class="koboSpan" id="kobo.1646.2">
     Let us look at the contained packages:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1647.1">
       adapter
      </span>
     </code>
     <span class="koboSpan" id="kobo.1648.1">
      : This package contains the four following packages:
     </span>
     <ul>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1649.1">
         exception
        </span>
       </code>
       <span class="koboSpan" id="kobo.1650.1">
        : This contains all class exceptions and exception handlers
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1651.1">
         inbound.rest
        </span>
       </code>
       <span class="koboSpan" id="kobo.1652.1">
        : This is responsible for handling all the inputs, transformations, and generated data from the specification
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1653.1">
         mapper
        </span>
       </code>
       <span class="koboSpan" id="kobo.1654.1">
        : This contains all the mapper transformations between objects, such as
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1655.1">
         toOrderRequest
        </span>
       </code>
       <span class="koboSpan" id="kobo.1656.1">
        from
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1657.1">
         OrderRequestBodyDto
        </span>
       </code>
       <span class="koboSpan" id="kobo.1658.1">
        , and the custom-defined mappers.
       </span>
      </li>
      <li class="bulletList">
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.1659.1">
         outbound
        </span>
       </code>
       <span class="koboSpan" id="kobo.1660.1">
        : This package contains all elements that interact with external services, such as databases and other services.
       </span>
       <span class="koboSpan" id="kobo.1660.2">
        In this service, we will have two subpackages within it:
       </span>
       <ul>
        <li class="bulletList">
         <code class="inlineCode">
          <span class="koboSpan" id="kobo.1661.1">
           outbound.database
          </span>
         </code>
         <span class="koboSpan" id="kobo.1662.1">
          : This contains all the elements that will interact with the database itself, the implementation of use
         </span>
         <a id="_idIndexMarker253">
         </a>
         <span class="koboSpan" id="kobo.1663.1">
          cases that contain operations such as
         </span>
         <code class="inlineCode">
          <span class="koboSpan" id="kobo.1664.1">
           createOrder
          </span>
         </code>
         <span class="koboSpan" id="kobo.1665.1">
          and
         </span>
         <code class="inlineCode">
          <span class="koboSpan" id="kobo.1666.1">
           updateOrderStatus
          </span>
         </code>
         <span class="koboSpan" id="kobo.1667.1">
          , and the repositories also go here.
         </span>
         <span class="koboSpan" id="kobo.1667.2">
          It contains an internal package within it.
         </span>
        </li>
        <li class="bulletList">
         <code class="inlineCode">
          <span class="koboSpan" id="kobo.1668.1">
           outbound.database.entity
          </span>
         </code>
         <span class="koboSpan" id="kobo.1669.1">
          : This contains all the defined entities for the service that declares the tables and interacts with the database.
         </span>
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1670.1">
       outbound.rest
      </span>
     </code>
     <span class="koboSpan" id="kobo.1671.1">
      : This package contains all the elements required to interact with external services through REST calls.
     </span>
     <span class="koboSpan" id="kobo.1671.2">
      In this service, we have the elements required to interact with the Product API, created in
     </span>
     <a href="B21843_02.xhtml#_idTextAnchor050">
      <em class="italic">
       <span class="koboSpan" id="kobo.1672.1">
        Chapter 2
       </span>
      </em>
     </a>
     <span class="koboSpan" id="kobo.1673.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1674.1">
       domain
      </span>
     </code>
     <span class="koboSpan" id="kobo.1675.1">
      : This package contains the POJOs that define the base structure for each domain contained by this service.
     </span>
     <span class="koboSpan" id="kobo.1675.2">
      Its structure will be inherited mostly by the entities, but they are not the entities themselves (those are defined in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1676.1">
       adapter.outbound.database.entity
      </span>
     </code>
     <span class="koboSpan" id="kobo.1677.1">
      package), so it contains POJOs from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1678.1">
       Order
      </span>
     </code>
     <span class="koboSpan" id="kobo.1679.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1680.1">
       Customer
      </span>
     </code>
     <span class="koboSpan" id="kobo.1681.1">
      (also
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1682.1">
       PersonCustomer
      </span>
     </code>
     <span class="koboSpan" id="kobo.1683.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1684.1">
       CompanyCustomer
      </span>
     </code>
     <span class="koboSpan" id="kobo.1685.1">
      ), and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1686.1">
       Product
      </span>
     </code>
     <span class="koboSpan" id="kobo.1687.1">
      definitions, along with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1688.1">
       StatusEnum
      </span>
     </code>
     <span class="koboSpan" id="kobo.1689.1">
      definitions as well.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1690.1">
       usecase
      </span>
     </code>
     <span class="koboSpan" id="kobo.1691.1">
      : This contains the interface definitions for the use cases, containing the actions that will be implemented.
     </span>
     <span class="koboSpan" id="kobo.1691.2">
      In this service, we have two use cases:
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1692.1">
       OrdersCommandUseCase
      </span>
     </code>
     <span class="koboSpan" id="kobo.1693.1">
      : This contains the definitions of actions like
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1694.1">
       createOrder
      </span>
     </code>
     <span class="koboSpan" id="kobo.1695.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1696.1">
       updateOrder
      </span>
     </code>
     <span class="koboSpan" id="kobo.1697.1">
      that are implemented by the class
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1698.1">
       OrdersCommandUseCaseImpl
      </span>
     </code>
     <span class="koboSpan" id="kobo.1699.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1700.1">
       adapter.outbound.database
      </span>
     </code>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1701.1">
       OrdersQueryUseCase
      </span>
     </code>
     <span class="koboSpan" id="kobo.1702.1">
      : This contains the definition of the actions that happen with the database through queries and is implemented by
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1703.1">
       OrdersQueryUseCaseImpl
      </span>
     </code>
     <span class="koboSpan" id="kobo.1704.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1705.1">
       adapter.inbound.rest
      </span>
     </code>
     <span class="koboSpan" id="kobo.1706.1">
      package.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1707.1">
     Now that we are aware of the
    </span>
    <a id="_idIndexMarker254">
    </a>
    <span class="koboSpan" id="kobo.1708.1">
     package structure of the service, let us jump into the implementation of the controller itself.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-101">
    <a id="_idTextAnchor109">
    </a>
    <span class="koboSpan" id="kobo.1709.1">
     Implementing the Order Management API controller
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1710.1">
     The Order Management API will follow
    </span>
    <a id="_idIndexMarker255">
    </a>
    <span class="koboSpan" id="kobo.1711.1">
     the same architecture and package structure used in the Product API, so the controllers will be created within the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1712.1">
      adapter.inbound.rest
     </span>
    </code>
    <span class="koboSpan" id="kobo.1713.1">
     package.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1714.1">
     The first step is to create the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1715.1">
      OrderManagementApiController
     </span>
    </code>
    <span class="koboSpan" id="kobo.1716.1">
     class, implementing the methods of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1717.1">
      OrderManagementApi
     </span>
    </code>
    <span class="koboSpan" id="kobo.1718.1">
     interface.
    </span>
    <span class="koboSpan" id="kobo.1718.2">
     Here is a sample of the code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1719.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.1720.1">Controller</span></span><span class="koboSpan" id="kobo.1721.1">
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1722.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1723.1">OrderManagementApiController</span></span><span class="koboSpan" id="kobo.1724.1"> implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.1725.1">OrderManagementApi</span></span><span class="koboSpan" id="kobo.1726.1"> {
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1727.1">Override</span></span><span class="koboSpan" id="kobo.1728.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1729.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1730.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1731.1">List</span></span><span class="koboSpan" id="kobo.1732.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1733.1">OrderResponse</span></span><span class="koboSpan" id="kobo.1734.1">&gt;&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1735.1">ordersGet</span></span><span class="koboSpan" id="kobo.1736.1">() {
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1737.1">//Add your own concrete implementation</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.1738.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1739.1">OrderManagementApi</span></span><span class="koboSpan" id="kobo.1740.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1741.1">super</span></span><span class="koboSpan" id="kobo.1742.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1743.1">ordersGet</span></span><span class="koboSpan" id="kobo.1744.1">();
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1745.1">Override</span></span><span class="koboSpan" id="kobo.1746.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1747.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1748.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1749.1">Void</span></span><span class="koboSpan" id="kobo.1750.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1751.1">ordersDelete</span></span><span class="koboSpan" id="kobo.1752.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1753.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1754.1"> orderId</span></span><span class="koboSpan" id="kobo.1755.1">) {
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1756.1">//Add your own concrete implementation</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.1757.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1758.1">OrderManagementApi</span></span><span class="koboSpan" id="kobo.1759.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1760.1">super</span></span><span class="koboSpan" id="kobo.1761.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1762.1">ordersDelete</span></span><span class="koboSpan" id="kobo.1763.1">(orderId);
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1764.1">Override</span></span><span class="koboSpan" id="kobo.1765.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1766.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1767.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1768.1">OrderResponse</span></span><span class="koboSpan" id="kobo.1769.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1770.1">ordersOrderIdGet</span></span><span class="koboSpan" id="kobo.1771.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1772.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1773.1"> orderId</span></span><span class="koboSpan" id="kobo.1774.1">)
    {
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1775.1">//Add your own concrete implementation</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.1776.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1777.1">OrderManagementApi</span></span><span class="koboSpan" id="kobo.1778.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1779.1">super</span></span><span class="koboSpan" id="kobo.1780.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1781.1">ordersOrderIdGet</span></span><span class="koboSpan" id="kobo.1782.1">(orderId);
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1783.1">Override</span></span><span class="koboSpan" id="kobo.1784.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1785.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1786.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1787.1">OrderResponse</span></span><span class="koboSpan" id="kobo.1788.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1789.1">ordersOrderIdPut</span></span><span class="koboSpan" id="kobo.1790.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1791.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1792.1"> orderId,</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.1793.1">        OrderRequestBody orderRequestBody</span></span><span class="koboSpan" id="kobo.1794.1">) {
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1795.1">//Add your own concrete implementation</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.1796.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1797.1">OrderManagementApi</span></span><span class="koboSpan" id="kobo.1798.1">
            .</span><span class="hljs-property"><span class="koboSpan" id="kobo.1799.1">super</span></span><span class="koboSpan" id="kobo.1800.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1801.1">ordersOrderIdPut</span></span><span class="koboSpan" id="kobo.1802.1">(orderId, orderRequestBody);
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1803.1">Override</span></span><span class="koboSpan" id="kobo.1804.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1805.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1806.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1807.1">OrderResponse</span></span><span class="koboSpan" id="kobo.1808.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1809.1">ordersPost</span></span><span class="koboSpan" id="kobo.1810.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.1811.1">        OrderRequestBody orderRequestBody</span></span><span class="koboSpan" id="kobo.1812.1">) {
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1813.1">//Add your own concrete implementation</span></span>
        <span class="hljs-keyword"><span class="koboSpan" id="kobo.1814.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1815.1">OrderManagementApi</span></span><span class="koboSpan" id="kobo.1816.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1817.1">super</span></span><span class="koboSpan" id="kobo.1818.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1819.1">ordersPost</span></span><span class="koboSpan" id="kobo.1820.1">(orderRequestBody);
    }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1821.1">
     In the preceding snippet, there is no concrete implementation yet, but we are defining the methods that were specified previously in our specification file and generated in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1822.1">
      OrderManagementApi
     </span>
    </code>
    <span class="koboSpan" id="kobo.1823.1">
     interface.
    </span>
    <span class="koboSpan" id="kobo.1823.2">
     If we keep the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1824.1">
      super
     </span>
    </code>
    <span class="koboSpan" id="kobo.1825.1">
     calls (invoking the default implementation of the parent interface), the server returns a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1826.1">
      501 Not Implemented
     </span>
    </code>
    <span class="koboSpan" id="kobo.1827.1">
     HTTP status code to the caller.
    </span>
    <span class="koboSpan" id="kobo.1827.2">
     It can be
    </span>
    <a id="_idIndexMarker256">
    </a>
    <span class="koboSpan" id="kobo.1828.1">
     useful when you want to deploy your application partially to let the users know that this feature is not yet available.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1829.1">
     All the definitions in the OpenAPI specification file serve as documentation for the API.
    </span>
    <span class="koboSpan" id="kobo.1829.2">
     If you paste the specification into the online
    </span>
    <a href="https://www.editor.swagger.io">
     <span class="url">
      <span class="koboSpan" id="kobo.1830.1">
       editor.swagger.io
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1831.1">
     tool or run the application and open the Swagger UI with your browser at the URL
    </span>
    <a href="http://localhost:8080/swagger-ui/index.html">
     <span class="url">
      <span class="koboSpan" id="kobo.1832.1">
       http://localhost:8080/swagger-ui/index.html
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1833.1">
     , you will be able to see every operation and schema defined until now.
    </span>
    <span class="koboSpan" id="kobo.1833.2">
     This documentation represents the API contract, describing all the available resources, methods available to interact with them, and what data the API is expected to receive and return.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1834.1">
     <img alt="Figure 4.6 – Swagger UI from the Order Management API specification" src="../Images/B21843_04_6.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1835.1">
     Figure 4.6 – Swagger UI from the Order Management API specification
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1836.1">
     This is the first step toward a concrete implementation of the operations defined in our API specification.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1837.1">
     For the sake of brevity, we are
    </span>
    <a id="_idIndexMarker257">
    </a>
    <span class="koboSpan" id="kobo.1838.1">
     not going to look at every step of the implementation process here, since the goal of this chapter is to show you how to have the code generated from the specification, as we saw in the previous sections.
    </span>
    <span class="koboSpan" id="kobo.1838.2">
     Feel free to refer to the source code in the GitHub repository for
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1839.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.1840.1">
     to have a deeper understanding of the implementation details, since this goes much deeper than what we are going to describe in this section alone.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1841.1">
     This is what the controller looks like after being implemented:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1842.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.1843.1">RestController</span></span><span class="koboSpan" id="kobo.1844.1">
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1845.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1846.1">OrderManagementApiController</span></span><span class="koboSpan" id="kobo.1847.1"> implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.1848.1">OrderManagementApi</span></span><span class="koboSpan" id="kobo.1849.1"> {
    private final </span><span class="hljs-title"><span class="koboSpan" id="kobo.1850.1">OrdersCommandUseCase</span></span><span class="koboSpan" id="kobo.1851.1"> ordersCommandUseCase;
    private final </span><span class="hljs-title"><span class="koboSpan" id="kobo.1852.1">OrdersQueryUseCase</span></span><span class="koboSpan" id="kobo.1853.1"> ordersQueryUseCase;
    private final </span><span class="hljs-title"><span class="koboSpan" id="kobo.1854.1">OrderMapper</span></span><span class="koboSpan" id="kobo.1855.1"> orderMapper;
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1856.1">OrderManagementApiController</span></span><span class="koboSpan" id="kobo.1857.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1858.1">OrdersCommandUseCase</span></span><span class="koboSpan" id="kobo.1859.1"> ordersCommandUseCase,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1860.1">OrdersQueryUseCase</span></span><span class="koboSpan" id="kobo.1861.1"> ordersQueryUseCase,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1862.1">OrderMapper</span></span><span class="koboSpan" id="kobo.1863.1"> orderMapper) {
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1864.1">this</span></span><span class="koboSpan" id="kobo.1865.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1866.1">ordersCommandUseCase</span></span><span class="koboSpan" id="kobo.1867.1"> = ordersCommandUseCase;
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1868.1">this</span></span><span class="koboSpan" id="kobo.1869.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1870.1">ordersQueryUseCase</span></span><span class="koboSpan" id="kobo.1871.1"> = ordersQueryUseCase;
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1872.1">this</span></span><span class="koboSpan" id="kobo.1873.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1874.1">orderMapper</span></span><span class="koboSpan" id="kobo.1875.1"> = orderMapper;
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1876.1">Override</span></span><span class="koboSpan" id="kobo.1877.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1878.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1879.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1880.1">List</span></span><span class="koboSpan" id="kobo.1881.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1882.1">OrderResponseDto</span></span><span class="koboSpan" id="kobo.1883.1">&gt;&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1884.1">ordersGet</span></span><span class="koboSpan" id="kobo.1885.1">() {
        final </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1886.1">var</span></span><span class="koboSpan" id="kobo.1887.1"> orders = ordersQueryUseCase.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1888.1">getAllOrders</span></span><span class="koboSpan" id="kobo.1889.1">()
            .</span><span class="hljs-title"><span class="koboSpan" id="kobo.1890.1">stream</span></span><span class="koboSpan" id="kobo.1891.1">()
            .</span><span class="hljs-title"><span class="koboSpan" id="kobo.1892.1">map</span></span><span class="koboSpan" id="kobo.1893.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1894.1">orderMapper</span></span><span class="koboSpan" id="kobo.1895.1">::toOrderResponse)
            .</span><span class="hljs-title"><span class="koboSpan" id="kobo.1896.1">toList</span></span><span class="koboSpan" id="kobo.1897.1">();
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1898.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1899.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1900.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1901.1">status</span></span><span class="koboSpan" id="kobo.1902.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1903.1">HttpStatus</span></span><span class="koboSpan" id="kobo.1904.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1905.1">OK</span></span><span class="koboSpan" id="kobo.1906.1">)
            .</span><span class="hljs-title"><span class="koboSpan" id="kobo.1907.1">body</span></span><span class="koboSpan" id="kobo.1908.1">(orders);
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1909.1">Override</span></span><span class="koboSpan" id="kobo.1910.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1911.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1912.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1913.1">OrderResponseDto</span></span><span class="koboSpan" id="kobo.1914.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1915.1">ordersOrderIdGet</span></span><span class="koboSpan" id="kobo.1916.1">(
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1917.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1918.1"> orderId</span></span><span class="koboSpan" id="kobo.1919.1">) {
        final </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1920.1">var</span></span><span class="koboSpan" id="kobo.1921.1"> order = ordersQueryUseCase.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1922.1">getOrder</span></span><span class="koboSpan" id="kobo.1923.1">(orderId);
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1924.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1925.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1926.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1927.1">status</span></span><span class="koboSpan" id="kobo.1928.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1929.1">HttpStatus</span></span><span class="koboSpan" id="kobo.1930.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1931.1">OK</span></span><span class="koboSpan" id="kobo.1932.1">)
            </span><span class="hljs-title"><span class="koboSpan" id="kobo.1933.1">body</span></span><span class="koboSpan" id="kobo.1934.1">(orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1935.1">toOrderResponse</span></span><span class="koboSpan" id="kobo.1936.1">(order));
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1937.1">Override</span></span><span class="koboSpan" id="kobo.1938.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1939.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1940.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1941.1">OrderResponseDto</span></span><span class="koboSpan" id="kobo.1942.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1943.1">ordersPost</span></span><span class="koboSpan" id="kobo.1944.1">(
        </span><span class="hljs-params"><span class="koboSpan" id="kobo.1945.1">OrderRequestBodyDto orderRequestBody</span></span><span class="koboSpan" id="kobo.1946.1">) {
        final </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1947.1">var</span></span><span class="koboSpan" id="kobo.1948.1"> order = ordersCommandUseCase.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1949.1">createOrder</span></span><span class="koboSpan" id="kobo.1950.1">(
           orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1951.1">toOrderRequest</span></span><span class="koboSpan" id="kobo.1952.1">(orderRequestBody));
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1953.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1954.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1955.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1956.1">status</span></span><span class="koboSpan" id="kobo.1957.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1958.1">HttpStatus</span></span><span class="koboSpan" id="kobo.1959.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1960.1">CREATED</span></span><span class="koboSpan" id="kobo.1961.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1962.1">body</span></span><span class="koboSpan" id="kobo.1963.1">(
</span><span class="hljs-keyword">            </span><span class="koboSpan" id="kobo.1964.1">orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1965.1">toOrderResponse</span></span><span class="koboSpan" id="kobo.1966.1">(order));
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.1967.1">Override</span></span><span class="koboSpan" id="kobo.1968.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.1969.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1970.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1971.1">OrderResponseDto</span></span><span class="koboSpan" id="kobo.1972.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.1973.1">ordersOrderIdStatusPatch</span></span><span class="koboSpan" id="kobo.1974.1">(
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1975.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1976.1"> orderId, OrderStatusDto orderStatus</span></span><span class="koboSpan" id="kobo.1977.1">) {
        final </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1978.1">var</span></span><span class="koboSpan" id="kobo.1979.1"> order = ordersCommandUseCase.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1980.1">updateOrderStatus</span></span><span class="koboSpan" id="kobo.1981.1">(orderId,
            </span><span class="hljs-title"><span class="koboSpan" id="kobo.1982.1">StatusEnum</span></span><span class="koboSpan" id="kobo.1983.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1984.1">valueOf</span></span><span class="koboSpan" id="kobo.1985.1">(orderStatus.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1986.1">getStatus</span></span><span class="koboSpan" id="kobo.1987.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1988.1">name</span></span><span class="koboSpan" id="kobo.1989.1">()));
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1990.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1991.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.1992.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1993.1">status</span></span><span class="koboSpan" id="kobo.1994.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1995.1">HttpStatus</span></span><span class="koboSpan" id="kobo.1996.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1997.1">OK</span></span><span class="koboSpan" id="kobo.1998.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1999.1">body</span></span><span class="koboSpan" id="kobo.2000.1">(
</span><span class="hljs-keyword">            </span><span class="koboSpan" id="kobo.2001.1">orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2002.1">toOrderResponse</span></span><span class="koboSpan" id="kobo.2003.1">(order));
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2004.1">Override</span></span><span class="koboSpan" id="kobo.2005.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2006.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.2007.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2008.1">OrderResponseDto</span></span><span class="koboSpan" id="kobo.2009.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.2010.1">ordersOrderIdPut</span></span><span class="koboSpan" id="kobo.2011.1">(
        </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2012.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2013.1"> orderId, OrderRequestBodyDto orderRequestBody</span></span><span class="koboSpan" id="kobo.2014.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2015.1">var</span></span><span class="koboSpan" id="kobo.2016.1"> orderRequest = orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2017.1">toOrderRequest</span></span><span class="koboSpan" id="kobo.2018.1">(orderRequestBody);
        final </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2019.1">var</span></span><span class="koboSpan" id="kobo.2020.1"> order = ordersCommandUseCase.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2021.1">updateOrder</span></span><span class="koboSpan" id="kobo.2022.1">(
            orderId, orderRequest);
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2023.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2024.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.2025.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2026.1">status</span></span><span class="koboSpan" id="kobo.2027.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2028.1">HttpStatus</span></span><span class="koboSpan" id="kobo.2029.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2030.1">OK</span></span><span class="koboSpan" id="kobo.2031.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.2032.1">body</span></span><span class="koboSpan" id="kobo.2033.1">(
</span><span class="hljs-keyword">            </span><span class="koboSpan" id="kobo.2034.1">orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2035.1">toOrderResponse</span></span><span class="koboSpan" id="kobo.2036.1">(order));
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2037.1">Override</span></span><span class="koboSpan" id="kobo.2038.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2039.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.2040.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2041.1">Void</span></span><span class="koboSpan" id="kobo.2042.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.2043.1">ordersOrderIdDelete</span></span><span class="koboSpan" id="kobo.2044.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2045.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2046.1"> orderId</span></span><span class="koboSpan" id="kobo.2047.1">) {
        ordersCommandUseCase.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2048.1">deleteOrder</span></span><span class="koboSpan" id="kobo.2049.1">(orderId);
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2050.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2051.1">ResponseEntity</span></span><span class="koboSpan" id="kobo.2052.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2053.1">noContent</span></span><span class="koboSpan" id="kobo.2054.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.2055.1">build</span></span><span class="koboSpan" id="kobo.2056.1">();
    }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2057.1">
     Looking at the implementation of the controller, we can notice some similar patterns as were implemented in the Product API, especially the usage of use cases and mappers.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2058.1">
     But unlike the Product API, here we override the generated code of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2059.1">
      OpenManagementAPI
     </span>
    </code>
    <span class="koboSpan" id="kobo.2060.1">
     interface where all the paths and operations are defined.
    </span>
    <span class="koboSpan" id="kobo.2060.2">
     Unlike the code-first approach, the documentation that has been
    </span>
    <a id="_idIndexMarker258">
    </a>
    <span class="koboSpan" id="kobo.2061.1">
     already defined previously in the OpenAPI specification does not need to be repeated manually here, since it is contained within the generated
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2062.1">
      OpenManagementAPI
     </span>
    </code>
    <span class="koboSpan" id="kobo.2063.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2063.2">
     This is the power of a specification-first (API-first) implementation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2064.1">
     In this controller, we are injecting three main interfaces that are used for the processing of all the business logic, persistence, and data layer transformation:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2065.1">
       OrdersCommandUseCase
      </span>
     </code>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2066.1">
       OrdersQueryUseCase
      </span>
     </code>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2067.1">
       OrderMapper
      </span>
     </code>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2068.1">
     Let us first focus on the use case implementations of this service, which are
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2069.1">
      OrdersCommandUseCase
     </span>
    </code>
    <span class="koboSpan" id="kobo.2070.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2071.1">
      OrdersQueryUseCase
     </span>
    </code>
    <span class="koboSpan" id="kobo.2072.1">
     , and their purpose within the Order Management API, starting with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2073.1">
      OrdersCommandUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2074.1">
     .
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-102">
    <a id="_idTextAnchor110">
    </a>
    <span class="koboSpan" id="kobo.2075.1">
     Implementing OrdersCommandUseCase
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.2076.1">
     Let us start by
    </span>
    <a id="_idIndexMarker259">
    </a>
    <span class="koboSpan" id="kobo.2077.1">
     implementing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2078.1">
      OrdersCommandUseCase
     </span>
    </code>
    <span class="koboSpan" id="kobo.2079.1">
     with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2080.1">
      OrdersCommandUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2081.1">
     class:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2082.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2083.1">Transactional</span></span><span class="koboSpan" id="kobo.2084.1">
@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2085.1">Service</span></span><span class="koboSpan" id="kobo.2086.1">
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2087.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2088.1">OrdersCommandUseCaseImpl</span></span><span class="koboSpan" id="kobo.2089.1">
       implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.2090.1">OrdersCommandUseCase</span></span><span class="koboSpan" id="kobo.2091.1"> {
    private final </span><span class="hljs-title"><span class="koboSpan" id="kobo.2092.1">OrdersRepository</span></span><span class="koboSpan" id="kobo.2093.1"> ordersRepository;
    private final </span><span class="hljs-title"><span class="koboSpan" id="kobo.2094.1">OrderMapper</span></span><span class="koboSpan" id="kobo.2095.1"> orderMapper;
    private final </span><span class="hljs-title"><span class="koboSpan" id="kobo.2096.1">ProductsApi</span></span><span class="koboSpan" id="kobo.2097.1"> productsApi;
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2098.1">OrdersCommandUseCaseImpl</span></span><span class="koboSpan" id="kobo.2099.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2100.1">OrdersRepository</span></span><span class="koboSpan" id="kobo.2101.1"> ordersRepository,
                                    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2102.1">OrderMapper</span></span><span class="koboSpan" id="kobo.2103.1"> orderMapper,
                                    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2104.1">ProductsApi</span></span><span class="koboSpan" id="kobo.2105.1"> productsApi) {
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2106.1">this</span></span><span class="koboSpan" id="kobo.2107.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2108.1">ordersRepository</span></span><span class="koboSpan" id="kobo.2109.1"> = ordersRepository;
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2110.1">this</span></span><span class="koboSpan" id="kobo.2111.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2112.1">orderMapper</span></span><span class="koboSpan" id="kobo.2113.1"> = orderMapper;
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2114.1">this</span></span><span class="koboSpan" id="kobo.2115.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2116.1">productsApi</span></span><span class="koboSpan" id="kobo.2117.1"> = productsApi;
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2118.1">Override</span></span><span class="koboSpan" id="kobo.2119.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2120.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2121.1">createOrder</span></span><span class="koboSpan" id="kobo.2122.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2123.1">OrderRequest orderRequest</span></span><span class="koboSpan" id="kobo.2124.1">) {
        </span><span class="hljs-title"><span class="koboSpan" id="kobo.2125.1">BigDecimal</span></span><span class="koboSpan" id="kobo.2126.1"> total = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2127.1">getProductPrice</span></span><span class="koboSpan" id="kobo.2128.1">(orderRequest);
        </span><span class="hljs-title"><span class="koboSpan" id="kobo.2129.1">Order</span></span><span class="koboSpan" id="kobo.2130.1"> order = orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2131.1">toOrder</span></span><span class="koboSpan" id="kobo.2132.1">(orderRequest);
        order.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2133.1">setTotalAmount</span></span><span class="koboSpan" id="kobo.2134.1">(total);
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2135.1">return</span></span><span class="koboSpan" id="kobo.2136.1"> ordersRepository.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2137.1">save</span></span><span class="koboSpan" id="kobo.2138.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2139.1">OrderEntity</span></span><span class="koboSpan" id="kobo.2140.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2141.1">fromOrder</span></span><span class="koboSpan" id="kobo.2142.1">(order, </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2143.1">null</span></span><span class="koboSpan" id="kobo.2144.1">));
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2145.1">Override</span></span><span class="koboSpan" id="kobo.2146.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2147.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2148.1">updateOrder</span></span><span class="koboSpan" id="kobo.2149.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2150.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2151.1"> orderId, OrderRequest orderRequest</span></span><span class="koboSpan" id="kobo.2152.1">) {
        </span><span class="hljs-title"><span class="koboSpan" id="kobo.2153.1">Optional</span></span><span class="koboSpan" id="kobo.2154.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2155.1">OrderEntity</span></span><span class="koboSpan" id="kobo.2156.1">&gt; optionalOrderEntity
                = ordersRepository.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2157.1">findById</span></span><span class="koboSpan" id="kobo.2158.1">(orderId);
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2159.1">if</span></span><span class="koboSpan" id="kobo.2160.1"> (optionalOrderEntity.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2161.1">isPresent</span></span><span class="koboSpan" id="kobo.2162.1">()) {
            </span><span class="hljs-title"><span class="koboSpan" id="kobo.2163.1">BigDecimal</span></span><span class="koboSpan" id="kobo.2164.1"> total = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2165.1">getProductPrice</span></span><span class="koboSpan" id="kobo.2166.1">(orderRequest);
            </span><span class="hljs-title"><span class="koboSpan" id="kobo.2167.1">Order</span></span><span class="koboSpan" id="kobo.2168.1"> order = orderMapper.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2169.1">toOrder</span></span><span class="koboSpan" id="kobo.2170.1">(orderRequest);
            order.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2171.1">setTotalAmount</span></span><span class="koboSpan" id="kobo.2172.1">(total);
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2173.1">return</span></span><span class="koboSpan" id="kobo.2174.1"> ordersRepository
                .</span><span class="hljs-title"><span class="koboSpan" id="kobo.2175.1">save</span></span><span class="koboSpan" id="kobo.2176.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2177.1">OrderEntity</span></span><span class="koboSpan" id="kobo.2178.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2179.1">fromOrder</span></span><span class="koboSpan" id="kobo.2180.1">(order, 
                    optionalOrderEntity.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2181.1">get</span></span><span class="koboSpan" id="kobo.2182.1">()));
        }
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2183.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2184.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2185.1">EntityNotFoundException</span></span><span class="koboSpan" id="kobo.2186.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2187.1">"Order not found with id "</span></span><span class="koboSpan" id="kobo.2188.1"> + 
        orderId);
    }
    private </span><span class="hljs-title"><span class="koboSpan" id="kobo.2189.1">BigDecimal</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2190.1">getProductPrice</span></span><span class="koboSpan" id="kobo.2191.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2192.1">OrderRequest orderRequest</span></span><span class="koboSpan" id="kobo.2193.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2194.1">return</span></span><span class="koboSpan" id="kobo.2195.1"> orderRequest.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2196.1">products</span></span><span class="koboSpan" id="kobo.2197.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.2198.1">stream</span></span><span class="koboSpan" id="kobo.2199.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.2200.1">map</span></span><span class="koboSpan" id="kobo.2201.1">(orderProduct -&gt; {
            </span><span class="hljs-title"><span class="koboSpan" id="kobo.2202.1">ProductOutputDto</span></span><span class="koboSpan" id="kobo.2203.1"> catalogueProduct =
                productsApi.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2204.1">getProductById</span></span><span class="koboSpan" id="kobo.2205.1">(orderProduct.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2206.1">getProductSKU</span></span><span class="koboSpan" id="kobo.2207.1">());
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2208.1">return</span></span><span class="koboSpan" id="kobo.2209.1"> catalogueProduct
                .</span><span class="hljs-title"><span class="koboSpan" id="kobo.2210.1">getPrice</span></span><span class="koboSpan" id="kobo.2211.1">()
                .</span><span class="hljs-title"><span class="koboSpan" id="kobo.2212.1">multiply</span></span><span class="koboSpan" id="kobo.2213.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2214.1">BigDecimal</span></span><span class="koboSpan" id="kobo.2215.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2216.1">valueOf</span></span><span class="koboSpan" id="kobo.2217.1">(
                    orderProduct.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2218.1">getQuantity</span></span><span class="koboSpan" id="kobo.2219.1">()));
        }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.2220.1">reduce</span></span><span class="koboSpan" id="kobo.2221.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2222.1">BigDecimal</span></span><span class="koboSpan" id="kobo.2223.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2224.1">ZERO</span></span><span class="koboSpan" id="kobo.2225.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2226.1">BigDecimal</span></span><span class="koboSpan" id="kobo.2227.1">::add);
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2228.1">Override</span></span><span class="koboSpan" id="kobo.2229.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2230.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2231.1">updateOrderStatus</span></span><span class="koboSpan" id="kobo.2232.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2233.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2234.1"> orderId, StatusEnum status</span></span><span class="koboSpan" id="kobo.2235.1">) {
        </span><span class="hljs-title"><span class="koboSpan" id="kobo.2236.1">Optional</span></span><span class="koboSpan" id="kobo.2237.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2238.1">OrderEntity</span></span><span class="koboSpan" id="kobo.2239.1">&gt; optionalOrderEntity = ordersRepository.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2240.1">findById</span></span><span class="koboSpan" id="kobo.2241.1">(orderId);
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2242.1">if</span></span><span class="koboSpan" id="kobo.2243.1"> (optionalOrderEntity.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2244.1">isPresent</span></span><span class="koboSpan" id="kobo.2245.1">()) {
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2246.1">return</span></span><span class="koboSpan" id="kobo.2247.1"> ordersRepository
                .</span><span class="hljs-title"><span class="koboSpan" id="kobo.2248.1">save</span></span><span class="koboSpan" id="kobo.2249.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2250.1">OrderEntity</span></span><span class="koboSpan" id="kobo.2251.1">
                    .</span><span class="hljs-title"><span class="koboSpan" id="kobo.2252.1">updateOrderStatus</span></span><span class="koboSpan" id="kobo.2253.1">(optionalOrderEntity.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2254.1">get</span></span><span class="koboSpan" id="kobo.2255.1">(),
                                       status));
        }
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2256.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2257.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2258.1">EntityNotFoundException</span></span><span class="koboSpan" id="kobo.2259.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2260.1">"Order not found with id "</span></span><span class="koboSpan" id="kobo.2261.1"> +
        orderId);
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2262.1">Override</span></span><span class="koboSpan" id="kobo.2263.1">
    public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2264.1">void</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2265.1">deleteOrder</span></span><span class="koboSpan" id="kobo.2266.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2267.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2268.1"> orderId</span></span><span class="koboSpan" id="kobo.2269.1">) {
        ordersRepository.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2270.1">deleteById</span></span><span class="koboSpan" id="kobo.2271.1">(orderId);
    }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2272.1">
     As described earlier in the package structure, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2273.1">
      OrdersCommandUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2274.1">
     class contains the business logic of the service itself, the
    </span>
    <a id="_idIndexMarker260">
    </a>
    <span class="koboSpan" id="kobo.2275.1">
     actions, and interactions with other components such as the repository and mapper, and even other services such as the Product API, as we will see in detail in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2276.1">
      Communicating with the Product API
     </span>
    </em>
    <span class="koboSpan" id="kobo.2277.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.2277.2">
     That is why this class is annotated with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2278.1">
      @Service
     </span>
    </code>
    <span class="koboSpan" id="kobo.2279.1">
     annotation from Spring, indicating that it is a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2280.1">
      Service
     </span>
    </code>
    <span class="koboSpan" id="kobo.2281.1">
     stereotype of Bean.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-103">
    <a id="_idTextAnchor111">
    </a>
    <span class="koboSpan" id="kobo.2282.1">
     Implementing OrdersQueryUseCase
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.2283.1">
     Moving to the
    </span>
    <a id="_idIndexMarker261">
    </a>
    <span class="koboSpan" id="kobo.2284.1">
     implementation of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2285.1">
      OrdersQueryUseCase
     </span>
    </code>
    <span class="koboSpan" id="kobo.2286.1">
     , we will have
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2287.1">
      OrdersQueryUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2288.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2289.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2290.1">Service</span></span><span class="koboSpan" id="kobo.2291.1">
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2292.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2293.1">OrdersQueryUseCaseImpl</span></span><span class="koboSpan" id="kobo.2294.1"> implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.2295.1">OrdersQueryUseCase</span></span><span class="koboSpan" id="kobo.2296.1"> {
    private final </span><span class="hljs-title"><span class="koboSpan" id="kobo.2297.1">OrdersRepository</span></span><span class="koboSpan" id="kobo.2298.1"> ordersRepository;
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2299.1">OrdersQueryUseCaseImpl</span></span><span class="koboSpan" id="kobo.2300.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2301.1">OrdersRepository</span></span><span class="koboSpan" id="kobo.2302.1"> ordersRepository) {
        </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2303.1">this</span></span><span class="koboSpan" id="kobo.2304.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2305.1">ordersRepository</span></span><span class="koboSpan" id="kobo.2306.1"> = ordersRepository;
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2307.1">Override</span></span><span class="koboSpan" id="kobo.2308.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2309.1">List</span></span><span class="koboSpan" id="kobo.2310.1">&lt;? </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2311.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2312.1">Order</span></span><span class="koboSpan" id="kobo.2313.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.2314.1">getAllOrders</span></span><span class="koboSpan" id="kobo.2315.1">() {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2316.1">return</span></span><span class="koboSpan" id="kobo.2317.1"> ordersRepository.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2318.1">findAll</span></span><span class="koboSpan" id="kobo.2319.1">();
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2320.1">Override</span></span><span class="koboSpan" id="kobo.2321.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2322.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2323.1">getOrder</span></span><span class="koboSpan" id="kobo.2324.1">(</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2325.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2326.1"> orderId</span></span><span class="koboSpan" id="kobo.2327.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2328.1">return</span></span><span class="koboSpan" id="kobo.2329.1"> ordersRepository.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2330.1">findById</span></span><span class="koboSpan" id="kobo.2331.1">(orderId)
           .</span><span class="hljs-title"><span class="koboSpan" id="kobo.2332.1">orElseThrow</span></span><span class="koboSpan" id="kobo.2333.1">(
               () -&gt; </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2334.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2335.1">EntityNotFoundException</span></span><span class="koboSpan" id="kobo.2336.1">(
                   </span><span class="hljs-string"><span class="koboSpan" id="kobo.2337.1">"Order not found with id "</span></span><span class="koboSpan" id="kobo.2338.1"> + orderId)
               );
    }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2339.1">
     In
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2340.1">
      OrdersQueryUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2341.1">
     , we have a much smaller implementation, since here the focus is the interaction with the database.
    </span>
    <span class="koboSpan" id="kobo.2341.2">
     Any custom queries or requests that you would have just go into this class.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-104">
    <a id="_idTextAnchor112">
    </a>
    <span class="koboSpan" id="kobo.2342.1">
     Configuring OrderMapper with MapStruct
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.2343.1">
     And finally, there’s the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2344.1">
      OrderMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2345.1">
     interface.
    </span>
    <span class="koboSpan" id="kobo.2345.2">
     Unlike the use case classes, we do not implement any class here; instead, we define an interface
    </span>
    <a id="_idIndexMarker262">
    </a>
    <span class="koboSpan" id="kobo.2346.1">
     with the mappings we want to have in our project.
    </span>
    <span class="koboSpan" id="kobo.2346.2">
     Since this project uses MapStruct for object mapping, we define the mapping within this interface and any custom mappings separately.
    </span>
   </p>
   <div class="note">
    <div>
     <span class="koboSpan" id="kobo.2347.1">
      <img alt="img" src="../Images/Information_Box_Icon.png"/>
     </span>
    </div>
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2348.1">
       MapStruct
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2349.1">
      MapStruct is a code generator that simplifies the process of mapping between Java bean types by relying on a convention-over-configuration strategy.
     </span>
     <span class="koboSpan" id="kobo.2349.2">
      That is why we are defining this interface; it contains the configuration that MapStruct needs to generate the mapping code.
     </span>
     <span class="koboSpan" id="kobo.2349.3">
      Also, we are going to define a custom mapping for the cases when the basic generated mapping code is not enough.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2350.1">
     Let us start with the interface definition:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2351.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2352.1">Mapper</span></span><span class="koboSpan" id="kobo.2353.1">(uses = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2354.1">CustomerCustomMapper</span></span><span class="koboSpan" id="kobo.2355.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2356.1">class</span></span><span class="koboSpan" id="kobo.2357.1">, componentModel = </span><span class="hljs-string"><span class="koboSpan" id="kobo.2358.1">"spring"</span></span><span class="koboSpan" id="kobo.2359.1">)
public interface </span><span class="hljs-title"><span class="koboSpan" id="kobo.2360.1">OrderMapper</span></span><span class="koboSpan" id="kobo.2361.1"> {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2362.1">Order</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2363.1">toOrder</span></span><span class="koboSpan" id="kobo.2364.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2365.1">OrderRequest</span></span><span class="koboSpan" id="kobo.2366.1"> orderRequestBody);
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2367.1">Mapping</span></span><span class="koboSpan" id="kobo.2368.1">(target = </span><span class="hljs-string"><span class="koboSpan" id="kobo.2369.1">"customer"</span></span><span class="koboSpan" id="kobo.2370.1">, source = </span><span class="hljs-string"><span class="koboSpan" id="kobo.2371.1">"customer"</span></span><span class="koboSpan" id="kobo.2372.1">,
        qualifiedByName = </span><span class="hljs-string"><span class="koboSpan" id="kobo.2373.1">"customerDtoToCustomer"</span></span><span class="koboSpan" id="kobo.2374.1">)
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2375.1">OrderRequest</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2376.1">toOrderRequest</span></span><span class="koboSpan" id="kobo.2377.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2378.1">OrderRequestBodyDto</span></span><span class="koboSpan" id="kobo.2379.1"> orderRequestBody);
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2380.1">Mapping</span></span><span class="koboSpan" id="kobo.2381.1">(target = </span><span class="hljs-string"><span class="koboSpan" id="kobo.2382.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2383.1">customer"</span></span><span class="koboSpan" id="kobo.2384.1">, source = </span><span class="hljs-string"><span class="koboSpan" id="kobo.2385.1">"customer"</span></span><span class="koboSpan" id="kobo.2386.1">,
        qualifiedByName = </span><span class="hljs-string"><span class="koboSpan" id="kobo.2387.1">"customerToCustomerDto"</span></span><span class="koboSpan" id="kobo.2388.1">)
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2389.1">OrderResponseDto</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2390.1">toOrderResponse</span></span><span class="koboSpan" id="kobo.2391.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2392.1">Order</span></span><span class="koboSpan" id="kobo.2393.1"> order);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2394.1">
     This is what the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2395.1">
      OrderMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2396.1">
     interface looks like.
    </span>
    <span class="koboSpan" id="kobo.2396.2">
     We are defining the mapping operations that we want MapStruct to perform, such as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2397.1">
      toOrderRequest
     </span>
    </code>
    <span class="koboSpan" id="kobo.2398.1">
     operation, which is a mapping from an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2399.1">
      OrderRequestBodyDto
     </span>
    </code>
    <span class="koboSpan" id="kobo.2400.1">
     object to an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2401.1">
      OrderRequest
     </span>
    </code>
    <span class="koboSpan" id="kobo.2402.1">
     object.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2403.1">
     Simple mapping with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2404.1">
      Mapstruct
     </span>
    </code>
    <span class="koboSpan" id="kobo.2405.1">
     is straightforward, but when things get complicated, there is a need to introduce a custom mapping implementation for it.
    </span>
    <span class="koboSpan" id="kobo.2405.2">
     This is where the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2406.1">
      CustomerCustomMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2407.1">
     class gets into our mapping definition.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2408.1">
     To have a custom mapping used with MapStruct, you need to create a custom mapping class and tell the interface to use it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2409.1">
     Here, we are adding the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2410.1">
      CustomerCustomMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2411.1">
     class in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2412.1">
      uses
     </span>
    </code>
    <span class="koboSpan" id="kobo.2413.1">
     property within the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2414.1">
      @Mapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2415.1">
     annotation at the class level.
    </span>
    <span class="koboSpan" id="kobo.2415.2">
     This way, MapStruct knows that there is a custom implementation mapper that it needs to refer to.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2416.1">
     This approach allows for partial or
    </span>
    <a id="_idIndexMarker263">
    </a>
    <span class="koboSpan" id="kobo.2417.1">
     complete object mapping, depending on your requirements.
    </span>
    <span class="koboSpan" id="kobo.2417.2">
     In this case, we will perform partial mapping by using parts of the generated mapping from MapStruct and applying custom mapping to handle a specific complex object that the simple mapping cannot handle correctly.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2418.1">
     For every mapping operation, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2419.1">
      toOrder
     </span>
    </code>
    <span class="koboSpan" id="kobo.2420.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2421.1">
      toOrderRequest
     </span>
    </code>
    <span class="koboSpan" id="kobo.2422.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2423.1">
      toOrderResponse
     </span>
    </code>
    <span class="koboSpan" id="kobo.2424.1">
     , if you have a custom mapping that changes the default mapping behavior from MapStruct, you need to specify it with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2425.1">
      @Mapping
     </span>
    </code>
    <span class="koboSpan" id="kobo.2426.1">
     annotation at the method level to tell MapStruct that you have a custom mapping.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2427.1">
     In our custom mapping example, both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2428.1">
      target
     </span>
    </code>
    <span class="koboSpan" id="kobo.2429.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2430.1">
      source
     </span>
    </code>
    <span class="koboSpan" id="kobo.2431.1">
     properties specify that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2432.1">
      customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.2433.1">
     property within the received parameter (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2434.1">
      orderRequestBody
     </span>
    </code>
    <span class="koboSpan" id="kobo.2435.1">
     in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2436.1">
      toOrderRequest
     </span>
    </code>
    <span class="koboSpan" id="kobo.2437.1">
     method and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2438.1">
      order
     </span>
    </code>
    <span class="koboSpan" id="kobo.2439.1">
     in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2440.1">
      toOrderResponse
     </span>
    </code>
    <span class="koboSpan" id="kobo.2441.1">
     method) is going to be mapped in a custom way that needs to refer to the custom mapper implementation that is implemented by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2442.1">
      CustomerCustomMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2443.1">
     class.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2444.1">
     Finally, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2445.1">
      qualifiedByName
     </span>
    </code>
    <span class="koboSpan" id="kobo.2446.1">
     property tells MapStruct which method to refer to for the mapping into the custom mapper, being identified by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2447.1">
      @Named
     </span>
    </code>
    <span class="koboSpan" id="kobo.2448.1">
     annotation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2449.1">
     Due to the complexity and polymorphism introduced to have distinct types of customers with inheritance, this custom map was needed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2450.1">
     So, let us look at this custom mapping specification:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2451.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2452.1">Component</span></span><span class="koboSpan" id="kobo.2453.1">
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2454.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2455.1">CustomerCustomMapper</span></span><span class="koboSpan" id="kobo.2456.1"> {
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2457.1">Named</span></span><span class="koboSpan" id="kobo.2458.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2459.1">"customerDtoToCustomer"</span></span><span class="koboSpan" id="kobo.2460.1">)
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2461.1">Customer</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2462.1">customerDtoToCustomer</span></span><span class="koboSpan" id="kobo.2463.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2464.1">CustomerDto customerDto</span></span><span class="koboSpan" id="kobo.2465.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2466.1">if</span></span><span class="koboSpan" id="kobo.2467.1"> (customerDto == </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2468.1">null</span></span><span class="koboSpan" id="kobo.2469.1">) {
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2470.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2471.1">null</span></span><span class="koboSpan" id="kobo.2472.1">;
        }
        </span><span class="hljs-title"><span class="koboSpan" id="kobo.2473.1">Customer</span></span><span class="koboSpan" id="kobo.2474.1"> customer = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2475.1">switch</span></span><span class="koboSpan" id="kobo.2476.1"> (customerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2477.1">getCustomerType</span></span><span class="koboSpan" id="kobo.2478.1">()) {
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2479.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2480.1">"person"</span></span><span class="koboSpan" id="kobo.2481.1"> -&gt; {
                </span><span class="hljs-title"><span class="koboSpan" id="kobo.2482.1">PersonCustomer</span></span><span class="koboSpan" id="kobo.2483.1"> personCustomer = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2484.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2485.1">PersonCustomer</span></span><span class="koboSpan" id="kobo.2486.1">();
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2487.1">var</span></span><span class="koboSpan" id="kobo.2488.1"> personCustomerDto = (</span><span class="hljs-title"><span class="koboSpan" id="kobo.2489.1">PersonCustomerDto</span></span><span class="koboSpan" id="kobo.2490.1">) customerDto;
                personCustomer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2491.1">setFirstName</span></span><span class="koboSpan" id="kobo.2492.1">(
                    personCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2493.1">getFirstName</span></span><span class="koboSpan" id="kobo.2494.1">());
                personCustomer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2495.1">setLastName</span></span><span class="koboSpan" id="kobo.2496.1">(
                    personCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2497.1">getLastName</span></span><span class="koboSpan" id="kobo.2498.1">());
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2499.1">yield</span></span><span class="koboSpan" id="kobo.2500.1"> personCustomer;
            }
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2501.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2502.1">"company"</span></span><span class="koboSpan" id="kobo.2503.1"> -&gt; {
                </span><span class="hljs-title"><span class="koboSpan" id="kobo.2504.1">CompanyCustomer</span></span><span class="koboSpan" id="kobo.2505.1"> companyCustomer = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2506.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2507.1">CompanyCustomer</span></span><span class="koboSpan" id="kobo.2508.1">();
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2509.1">var</span></span><span class="koboSpan" id="kobo.2510.1"> companyCustomerDto = (</span><span class="hljs-title"><span class="koboSpan" id="kobo.2511.1">CompanyCustomerDto</span></span><span class="koboSpan" id="kobo.2512.1">) customerDto;
                companyCustomer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2513.1">setCompanyName</span></span><span class="koboSpan" id="kobo.2514.1">(
                    companyCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2515.1">getCompanyName</span></span><span class="koboSpan" id="kobo.2516.1">());
                companyCustomer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2517.1">setVatId</span></span><span class="koboSpan" id="kobo.2518.1">(companyCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2519.1">getVatId</span></span><span class="koboSpan" id="kobo.2520.1">());
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2521.1">yield</span></span><span class="koboSpan" id="kobo.2522.1"> companyCustomer;
            }
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2523.1">default</span></span><span class="koboSpan" id="kobo.2524.1"> -&gt; </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2525.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2526.1">Customer</span></span><span class="koboSpan" id="kobo.2527.1">();
        };
        customer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2528.1">setStreetAddress</span></span><span class="koboSpan" id="kobo.2529.1">(customerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2530.1">getStreetAddress</span></span><span class="koboSpan" id="kobo.2531.1">());
        customer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2532.1">setCity</span></span><span class="koboSpan" id="kobo.2533.1">(customerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2534.1">getCity</span></span><span class="koboSpan" id="kobo.2535.1">());
        customer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2536.1">setPostalCode</span></span><span class="koboSpan" id="kobo.2537.1">(customerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2538.1">getPostalCode</span></span><span class="koboSpan" id="kobo.2539.1">());
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2540.1">return</span></span><span class="koboSpan" id="kobo.2541.1"> customer;
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2542.1">Named</span></span><span class="koboSpan" id="kobo.2543.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2544.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2545.1">customerToCustomerDto"</span></span><span class="koboSpan" id="kobo.2546.1">)
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.2547.1">CustomerDto</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2548.1">customerToCustomerDto</span></span><span class="koboSpan" id="kobo.2549.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2550.1">Customer customer</span></span><span class="koboSpan" id="kobo.2551.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2552.1">if</span></span><span class="koboSpan" id="kobo.2553.1"> (customer == </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2554.1">null</span></span><span class="koboSpan" id="kobo.2555.1">) {
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2556.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2557.1">null</span></span><span class="koboSpan" id="kobo.2558.1">;
        }
        </span><span class="hljs-title"><span class="koboSpan" id="kobo.2559.1">CustomerDto</span></span><span class="koboSpan" id="kobo.2560.1"> customerDto = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2561.1">switch</span></span><span class="koboSpan" id="kobo.2562.1"> (customer) {
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2563.1">case</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2564.1">PersonCustomerEntity</span></span><span class="koboSpan" id="kobo.2565.1"> personCustomer -&gt; {
                </span><span class="hljs-title"><span class="koboSpan" id="kobo.2566.1">PersonCustomerDto</span></span><span class="koboSpan" id="kobo.2567.1"> personCustomerDto = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2568.1">new</span></span> 
                <span class="hljs-title"><span class="koboSpan" id="kobo.2569.1">PersonCustomerDto</span></span><span class="koboSpan" id="kobo.2570.1">();
                personCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2571.1">setFirstName</span></span><span class="koboSpan" id="kobo.2572.1">(
                    personCustomer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2573.1">getFirstName</span></span><span class="koboSpan" id="kobo.2574.1">());
                personCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2575.1">setLastName</span></span><span class="koboSpan" id="kobo.2576.1">(
                    personCustomer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2577.1">getLastName</span></span><span class="koboSpan" id="kobo.2578.1">());
                personCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2579.1">setCustomerType</span></span><span class="koboSpan" id="kobo.2580.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2581.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2582.1">person"</span></span><span class="koboSpan" id="kobo.2583.1">);
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2584.1">yield</span></span><span class="koboSpan" id="kobo.2585.1"> personCustomerDto;
            }
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2586.1">case</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2587.1">CompanyCustomerEntity</span></span><span class="koboSpan" id="kobo.2588.1"> companyCustomer -&gt; {
                </span><span class="hljs-title"><span class="koboSpan" id="kobo.2589.1">CompanyCustomerDto</span></span><span class="koboSpan" id="kobo.2590.1"> companyCustomerDto = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2591.1">new</span></span> 
                <span class="hljs-title"><span class="koboSpan" id="kobo.2592.1">CompanyCustomerDto</span></span><span class="koboSpan" id="kobo.2593.1">();
                companyCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2594.1">setCompanyName</span></span><span class="koboSpan" id="kobo.2595.1">(companyCustomer.
                </span><span class="hljs-title"><span class="koboSpan" id="kobo.2596.1">getCompanyName</span></span><span class="koboSpan" id="kobo.2597.1">());
                companyCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2598.1">setVatId</span></span><span class="koboSpan" id="kobo.2599.1">(companyCustomer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2600.1">getVatId</span></span><span class="koboSpan" id="kobo.2601.1">());
                companyCustomerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2602.1">setCustomerType</span></span><span class="koboSpan" id="kobo.2603.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2604.1">"company"</span></span><span class="koboSpan" id="kobo.2605.1">);
                </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2606.1">yield</span></span><span class="koboSpan" id="kobo.2607.1"> companyCustomerDto;
            }
            </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2608.1">default</span></span><span class="koboSpan" id="kobo.2609.1"> -&gt; </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2610.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2611.1">CustomerDto</span></span><span class="koboSpan" id="kobo.2612.1">();
        };
        customerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2613.1">setStreetAddress</span></span><span class="koboSpan" id="kobo.2614.1">(customer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2615.1">getStreetAddress</span></span><span class="koboSpan" id="kobo.2616.1">());
        customerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2617.1">setCity</span></span><span class="koboSpan" id="kobo.2618.1">(customer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2619.1">getCity</span></span><span class="koboSpan" id="kobo.2620.1">());
        customerDto.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2621.1">setPostalCode</span></span><span class="koboSpan" id="kobo.2622.1">(customer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2623.1">getPostalCode</span></span><span class="koboSpan" id="kobo.2624.1">());
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2625.1">return</span></span><span class="koboSpan" id="kobo.2626.1"> customerDto;
    }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2627.1">
     Since this is a MapStruct component, it is annotated
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2628.1">
      @Component
     </span>
    </code>
    <span class="koboSpan" id="kobo.2629.1">
     so it can be created as a Bean in the Spring context and made available to be detected by the mapping generator during the build process.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2630.1">
     But the key aspect of it is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2631.1">
      @Named
     </span>
    </code>
    <span class="koboSpan" id="kobo.2632.1">
     method-level annotation, as mentioned
    </span>
    <a id="_idIndexMarker264">
    </a>
    <span class="koboSpan" id="kobo.2633.1">
     earlier.
    </span>
    <span class="koboSpan" id="kobo.2633.2">
     It specifies the unique qualifier mentioned in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2634.1">
      qualifiedByName
     </span>
    </code>
    <span class="koboSpan" id="kobo.2635.1">
     MapStruct interface we just saw.
    </span>
    <span class="koboSpan" id="kobo.2635.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2636.1">
      customer
     </span>
    </code>
    <span class="koboSpan" id="kobo.2637.1">
     object is the only object being custom-mapped in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2638.1">
      CustomerCustomMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2639.1">
     implementation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2640.1">
     With that, when you generate your project using MapStruct, it will generate the mappings as specified in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2641.1">
      OrderMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2642.1">
     interface, but it will call this custom-mapping implementation, as we can see in the generated code snippet in the following screenshot:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2643.1">
     <img alt="Figure 4.7 – Generated mapping to OrderRequest calling customer custom mapping" src="../Images/B21843_04_7.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2644.1">
     Figure 4.7 – Generated mapping to OrderRequest calling customer custom mapping
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2645.1">
     You can find the generated code from the preceding screenshot in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2646.1">
      OrderMapperImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2647.1">
     generated class after building your project under the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2648.1">
      target
     </span>
    </code>
    <span class="koboSpan" id="kobo.2649.1">
     folder, within the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2650.1">
      classes
     </span>
    </code>
    <span class="koboSpan" id="kobo.2651.1">
     folder, in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2652.1">
      mapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2653.1">
     package, where the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2654.1">
      OrderMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2655.1">
     interface and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2656.1">
      CustomerCustomMapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2657.1">
     class are also defined.
    </span>
    <span class="koboSpan" id="kobo.2657.2">
     But if you are using the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2658.1">
      Packages
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2659.1">
     view in IntelliJ, the generated classes will be shown to you automatically in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2660.1">
      mapper
     </span>
    </code>
    <span class="koboSpan" id="kobo.2661.1">
     package with your own implemented classes, as seen before in this chapter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2662.1">
     Now, let us look at how the Order Management API can communicate with the Product API to validate the products in the received orders.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-105">
    <a id="_idTextAnchor113">
    </a>
    <span class="koboSpan" id="kobo.2663.1">
     Communicating with the Product API
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2664.1">
     To validate whether the
    </span>
    <a id="_idIndexMarker265">
    </a>
    <span class="koboSpan" id="kobo.2665.1">
     products of an order exist, the Order Management API validates the inserted product SKUs against the Product API through an API call either when a new order is created or when an order update contains an insertion of a new product into the order.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2666.1">
     In real-world production applications, the Product API may need to validate whether there are enough products available in stock to be added to the order and respond properly if there are not.
    </span>
    <span class="koboSpan" id="kobo.2666.2">
     For our purposes of demonstrating how to create APIs, we will show how to validate whether the products of an order exist within Product API service data and retrieve their prices to be added to our order.
    </span>
    <span class="koboSpan" id="kobo.2666.3">
     If a product is not found, the Order Management API will return a proper message with a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2667.1">
      404 Not Found
     </span>
    </code>
    <span class="koboSpan" id="kobo.2668.1">
     HTTP status code and the error message
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2669.1">
      Product not found
     </span>
    </code>
    <span class="koboSpan" id="kobo.2670.1">
     , explaining that the order
    </span>
    <a id="_idIndexMarker266">
    </a>
    <span class="koboSpan" id="kobo.2671.1">
     cannot be placed because that product does not exist and needs to be created in the Product API.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2672.1">
     To make this call, we will generate the client from the Product API specification.
    </span>
    <span class="koboSpan" id="kobo.2672.2">
     Since this chapter is about generating code, why not generate the client to retrieve the data from the Product API itself?
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2673.1">
     You saw in the previous section, in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2674.1">
      OrdersCommandUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2675.1">
     implementation, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2676.1">
      updateProductPrice
     </span>
    </code>
    <span class="koboSpan" id="kobo.2677.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.2677.2">
     This private method makes use of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2678.1">
      productsQueryUseCase.getProductById
     </span>
    </code>
    <span class="koboSpan" id="kobo.2679.1">
     to retrieve the data of the product with the generated client and calculate the total value of the order based on the products it contains.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2680.1">
     To have this client generated, we will need to update our generator plugin, adding the Product API specification to it, and generating a new build.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2681.1">
     Let us start with updating the OpenAPI generator plugin.
    </span>
    <span class="koboSpan" id="kobo.2681.2">
     We will be adding a second execution to it, below the first execution created at the beginning of this chapter.
    </span>
    <span class="koboSpan" id="kobo.2681.3">
     This is what it looks like:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2682.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2683.1">execution</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2684.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.2685.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2686.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2687.1">&gt;</span></span><span class="koboSpan" id="kobo.2688.1">generate-client</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2689.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2690.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2691.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.2692.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2693.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2694.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2695.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2696.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2697.1">&gt;</span></span><span class="koboSpan" id="kobo.2698.1">generate</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2699.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2700.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2701.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.2702.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2703.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2704.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.2705.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2706.1">configuration</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2707.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2708.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2709.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2710.1">&gt;</span></span><span class="koboSpan" id="kobo.2711.1">.../src/main/resources/Product_API.json</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2712.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2713.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2714.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2715.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2716.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2717.1">&gt;</span></span><span class="koboSpan" id="kobo.2718.1">java</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2719.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2720.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2721.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2722.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2723.1">library</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2724.1">&gt;</span></span><span class="koboSpan" id="kobo.2725.1">restclient</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2726.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2727.1">library</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2728.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2729.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2730.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2731.1">&gt;</span></span><span class="koboSpan" id="kobo.2732.1">[package where generated code is added]</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2733.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2734.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2735.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2736.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2737.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2738.1">&gt;</span></span><span class="koboSpan" id="kobo.2739.1">[new package where DTOs are added]</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2740.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2741.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2742.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2743.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2744.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2745.1">&gt;</span></span><span class="koboSpan" id="kobo.2746.1">Dto</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2747.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2748.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2749.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2750.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2751.1">generateApiTests</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2752.1">&gt;</span></span><span class="koboSpan" id="kobo.2753.1">false</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2754.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2755.1">generateApiTests</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2756.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2757.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2758.1">generateModelTests</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2759.1">&gt;</span></span><span class="koboSpan" id="kobo.2760.1">false</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2761.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2762.1">generateModelTests</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2763.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2764.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2765.1">configOptions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2766.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.2767.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2768.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2769.1">&gt;</span></span><span class="koboSpan" id="kobo.2770.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2771.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2772.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2773.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.2774.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2775.1">useJakartaEe</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2776.1">&gt;</span></span><span class="koboSpan" id="kobo.2777.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2778.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2779.1">useJakartaEe</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2780.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.2781.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2782.1">openApiNullable</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2783.1">&gt;</span></span><span class="koboSpan" id="kobo.2784.1">false</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2785.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2786.1">openApiNullable</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2787.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.2788.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2789.1">configOptions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2790.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.2791.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2792.1">configuration</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2793.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2794.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2795.1">execution</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2796.1">&gt;</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2797.1">
     The configuration here is similar to what we did in the first generator using the Order Management API specification, in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2798.1">
      Generating code from the specification
     </span>
    </em>
    <span class="koboSpan" id="kobo.2799.1">
     section, but now we will point to the Product API specification instead.
    </span>
    <span class="koboSpan" id="kobo.2799.2">
     There are only a few differences that we will detail now and, as we did for the first generator, let us go through each of the items to have them detailed:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2800.1">
       &lt;execution&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2801.1">
      : This defines a specific execution of the plugin.
     </span>
     <span class="koboSpan" id="kobo.2801.2">
      Each execution can have its own configuration and goals.
     </span>
     <span class="koboSpan" id="kobo.2801.3">
      Here, we are adding a new one.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2802.1">
       &lt;id&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2803.1">
      : This is a unique identifier for this execution.
     </span>
     <span class="koboSpan" id="kobo.2803.2">
      In this case, it is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2804.1">
       generate-client
      </span>
     </code>
     <span class="koboSpan" id="kobo.2805.1">
      .
     </span>
     <span class="koboSpan" id="kobo.2805.2">
      In the previous
     </span>
     <a id="_idIndexMarker267">
     </a>
     <span class="koboSpan" id="kobo.2806.1">
      execution, we used
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2807.1">
       generate-server
      </span>
     </code>
     <span class="koboSpan" id="kobo.2808.1">
      as the ID.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2809.1">
       &lt;goals&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2810.1">
      : This specifies the goals to be executed.
     </span>
     <span class="koboSpan" id="kobo.2810.2">
      Here, the goal is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2811.1">
       generate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2812.1">
      , which triggers the code generation process.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2813.1">
       &lt;configuration&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2814.1">
      : This contains the configuration options for this execution.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2815.1">
       &lt;inputSpec&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2816.1">
      : This specifies the path to the OpenAPI specification file.
     </span>
     <span class="koboSpan" id="kobo.2816.2">
      Here, it is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2817.1">
       ${project.basedir}/src/main/resources/Product_API.json
      </span>
     </code>
     <span class="koboSpan" id="kobo.2818.1">
      , which is where the Product API specification is contained within this service.
     </span>
     <span class="koboSpan" id="kobo.2818.2">
      The specification is in the JSON format that we could download using the Product API Swagger UI.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2819.1">
       &lt;generatorName&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2820.1">
      : This defines the generator to use.
     </span>
     <span class="koboSpan" id="kobo.2820.2">
      In this case, it is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2821.1">
       java
      </span>
     </code>
     <span class="koboSpan" id="kobo.2822.1">
      , indicating that Java client code will be generated.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2823.1">
       &lt;library&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2824.1">
      : This specifies the library to use for the generated code.
     </span>
     <span class="koboSpan" id="kobo.2824.2">
      Here, it is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2825.1">
       restclient
      </span>
     </code>
     <span class="koboSpan" id="kobo.2826.1">
      , which generates a REST client.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2827.1">
       &lt;apiPackage&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2828.1">
      : This defines the package for the generated API classes.
     </span>
     <span class="koboSpan" id="kobo.2828.2">
      Here, it is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2829.1">
       com.packt.ordermanagementapi.adapter.outbound.rest
      </span>
     </code>
     <span class="koboSpan" id="kobo.2830.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2831.1">
       &lt;modelPackage&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2832.1">
      : This defines the package for the generated model classes.
     </span>
     <span class="koboSpan" id="kobo.2832.2">
      Here, it is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2833.1">
       com.packt.ordermanagementapi.adapter.outbound.rest.dto
      </span>
     </code>
     <span class="koboSpan" id="kobo.2834.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2835.1">
       &lt;modelNameSuffix&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2836.1">
      : This adds a suffix to the names of the generated model classes.
     </span>
     <span class="koboSpan" id="kobo.2836.2">
      Here, it is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2837.1">
       Dto
      </span>
     </code>
     <span class="koboSpan" id="kobo.2838.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2839.1">
       &lt;generateApiTests&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2840.1">
      : When set to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2841.1">
       false
      </span>
     </code>
     <span class="koboSpan" id="kobo.2842.1">
      , API test classes will not be generated.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2843.1">
       &lt;generateModelTests&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2844.1">
      : When set to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2845.1">
       false
      </span>
     </code>
     <span class="koboSpan" id="kobo.2846.1">
      , model test classes will not be generated.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2847.1">
       &lt;configOptions&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2848.1">
      : This contains additional configuration options for the generator.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2849.1">
       &lt;interfaceOnly&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2850.1">
      : When set to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2851.1">
       true
      </span>
     </code>
     <span class="koboSpan" id="kobo.2852.1">
      , only interfaces for the API are generated, without any implementation.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2853.1">
       &lt;useJakartaEe&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2854.1">
      : When set to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2855.1">
       true
      </span>
     </code>
     <span class="koboSpan" id="kobo.2856.1">
      , the generated code will use Jakarta EE instead of Java EE.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2857.1">
       &lt;openApiNullable&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2858.1">
      : When set
     </span>
     <a id="_idIndexMarker268">
     </a>
     <span class="koboSpan" id="kobo.2859.1">
      to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2860.1">
       false
      </span>
     </code>
     <span class="koboSpan" id="kobo.2861.1">
      , the generator will not use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2862.1">
       @Nullable
      </span>
     </code>
     <span class="koboSpan" id="kobo.2863.1">
      annotation for optional fields.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2864.1">
     Having our plugin configured and pointing to the Product API specification, we can proceed to generate a new build that will generate the REST client from the specification, along with the DTOs needed for it.
    </span>
    <span class="koboSpan" id="kobo.2864.2">
     Again, we will run the Maven command:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2865.1">mvn clean install
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2866.1">
     After a successful build, this will generate the DTOs and the API classes into the specified packages that were configured in the plugin, as you can see in the following screenshot:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2867.1">
     <img alt="Figure 4.8 – Generated Product API client and DTO classes" src="../Images/B21843_04_8.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2868.1">
     Figure 4.8 – Generated Product API client and DTO classes
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2869.1">
     This approach is extremely powerful since we already have the specification of the service that our API is going to consume.
    </span>
    <span class="koboSpan" id="kobo.2869.2">
     This can save hours of development time just by having the code and the client generated quickly for you.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2870.1">
     You could think of an alternative solution where the client code would be generated as a module by the service providing the (Product) API and a client interested in consuming the API would just use the code as a library in the form of a JAR file.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2871.1">
     This may look like making the life of the consumer implementers even easier, but it has serious drawbacks.
    </span>
    <span class="koboSpan" id="kobo.2871.2">
     It would force the
    </span>
    <a id="_idIndexMarker269">
    </a>
    <span class="koboSpan" id="kobo.2872.1">
     consumer to be compatible with the library (and a particular version of it) used inside the JAR file.
    </span>
    <span class="koboSpan" id="kobo.2872.2">
     It would not support non-Java consumers.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2873.1">
     One of the advantages of microservices architecture is the loose coupling between the services.
    </span>
    <span class="koboSpan" id="kobo.2873.2">
     Depending on JAR files to consume APIs of different microservices creates unwanted coupling and defeats the purpose of making the application distributed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2874.1">
     If you noticed when we looked at the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2875.1">
      OrdersCommandUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2876.1">
     class in the previous section, there was a private method that uses this generated Product API client called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2877.1">
      updateProductPrice
     </span>
    </code>
    <span class="koboSpan" id="kobo.2878.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2878.2">
     Let us look at how it works and how to make the best use of it inside the Order Management API:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2879.1">    private </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2880.1">void</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2881.1">updateProductPrice</span></span><span class="koboSpan" id="kobo.2882.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2883.1">List&lt;Product&gt; products</span></span><span class="koboSpan" id="kobo.2884.1">) {
        products.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2885.1">forEach</span></span><span class="koboSpan" id="kobo.2886.1">(orderProduct -&gt; {
            </span><span class="hljs-title"><span class="koboSpan" id="kobo.2887.1">ProductDetails</span></span><span class="koboSpan" id="kobo.2888.1"> catalogueProduct = productsQueryUseCase.
            </span><span class="hljs-title"><span class="koboSpan" id="kobo.2889.1">getProductById</span></span><span class="koboSpan" id="kobo.2890.1">(orderProduct.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2891.1">getProductSKU</span></span><span class="koboSpan" id="kobo.2892.1">());
            orderProduct.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2893.1">setPrice</span></span><span class="koboSpan" id="kobo.2894.1">(catalogueProduct.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2895.1">price</span></span><span class="koboSpan" id="kobo.2896.1">());
        });
    }
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2897.1">
     Here,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2898.1">
      productsQueryUseCase
     </span>
    </code>
    <span class="koboSpan" id="kobo.2899.1">
     is injected into
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2900.1">
      OrdersCommandUseCaseImpl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2901.1">
     , where all related calls to the external Product API are handled.
    </span>
    <span class="koboSpan" id="kobo.2901.2">
     Within the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2902.1">
      updateProductPrice
     </span>
    </code>
    <span class="koboSpan" id="kobo.2903.1">
     method, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2904.1">
      getProductById
     </span>
    </code>
    <span class="koboSpan" id="kobo.2905.1">
     method from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2906.1">
      ProductsQueryUseCase
     </span>
    </code>
    <span class="koboSpan" id="kobo.2907.1">
     is called for each product in the order request, passing the unique
    </span>
    <a id="_idIndexMarker270">
    </a>
    <span class="koboSpan" id="kobo.2908.1">
     product identifier (product SKU) to retrieve the product details.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2909.1">
     Our goal is to validate whether these products exist in the Product API and get their value to be added to the total of the order.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2910.1">
     If the product is found, it will be returned and attributed to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2911.1">
      ProductDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.2912.1">
     variable named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2913.1">
      catalogueProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.2914.1">
     , and the price of the individual product will be set in the products list.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2915.1">
     If any of the products in the order are not found in the Products API,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2916.1">
      404 Not Found
     </span>
    </code>
    <span class="koboSpan" id="kobo.2917.1">
     will be returned from this external API call and will be caught by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2918.1">
      GlobalExceptionHandler
     </span>
    </code>
    <span class="koboSpan" id="kobo.2919.1">
     of the application, interrupting the order creation.
    </span>
    <span class="koboSpan" id="kobo.2919.2">
     This is the expected behavior since we do not want to allow any order to be created with a product that does not exist.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2920.1">
     If you are curious about the code generated by the plugin and how the REST client was built, we encourage you to generate your own code to see it in action following these steps.
    </span>
    <span class="koboSpan" id="kobo.2920.2">
     You can also always refer to the chapter code in the official repository of this book at
    </span>
    <a href="https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4">
     <span class="url">
      <span class="koboSpan" id="kobo.2921.1">
       https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter4
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.2922.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-106">
    <a id="_idTextAnchor114">
    </a>
    <span class="koboSpan" id="kobo.2923.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2924.1">
     In this chapter, you learned about the main differences between specification-first, (API-first), and code-first development.
    </span>
    <span class="koboSpan" id="kobo.2924.2">
     We developed an OpenAPI specification from scratch in detail, going through each part of its structure, creating paths and methods with parameters, defining schemas for generating the DTOs to use in the requests, responses, and as parameters, and defining a security scheme.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2925.1">
     Then we configured the Order Management API service with the OpenAPI code generator plugin for Maven and looked at each necessary parameter to have the code generated properly as expected and ran a successful build using the OpenAPI plugin.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2926.1">
     After that, we started to look at the generated code, where it is located, and how to see it along with your own code implementation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2927.1">
     We went through an overview of the architectural package structure for the project and the objective of each package in the structure.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2928.1">
     Next, we implemented our controller, using the generated interface from the specification, initially by overriding the methods and then by creating a real working implementation with all the features expected for this service, with a deep dive into the code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2929.1">
     Finally, we learned how to expand our code generator by adding a new execution into the OpenAPI plugin and generated a REST client to call the Product API.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2930.1">
     We used the generated Product API client to call and validate the products in the creation or update flow of an order, checking whether it exists in the Product API and computing the total of the order.
    </span>
    <span class="koboSpan" id="kobo.2930.2">
     If any product is not found, it just aborts the creation or update of the order.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2931.1">
     In the next chapter, you will get to know more about some advanced API concepts – how to handle timeouts, retries, and more – that could be used in a scenario where the Product API is unavailable at a certain request of the Order Management API, and how to handle it properly.
    </span>
   </p>
  </div>
 </body></html>