<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;3.&#xA0;Creating Your First Bukkit Plugin" id="OPEK1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03" class="calibre1"/>Chapter 3. Creating Your First Bukkit Plugin</h1></div></div></div><p class="calibre8">The Bukkit plugins that we will program will be written in the Java programming language. We will use an <span class="strong"><strong class="calibre2">IDE</strong></span> (short for <span class="strong"><strong class="calibre2">Integrated Development Environment</strong></span>) to write the plugins. An IDE is software that<a id="id71" class="calibre1"/> will aid us in writing the Java code. It has many tools and features that make programming much easier. For example, it automatically detects errors in code, it often tells us how to fix these errors and sometimes even does it for us, and it provides us with many shortcuts, such as a keystroke to compile code and build a JAR file so that the code can be executed. In this chapter, we will download and install an IDE and prepare it to create a new Bukkit plugin. We will cover the following topics and by the end of this chapter, we will have written our first plugin, which will be ready to be tested on our server:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Installing an IDE</li><li class="listitem">Creating a new project</li><li class="listitem">Adding Bukkit as a library</li><li class="listitem">The <code class="email">plugin.yml</code> file</li><li class="listitem">The plugin's <code class="email">main</code> class</li><li class="listitem">Creating and calling new methods</li><li class="listitem">Expanding the code</li></ul></div></div>

<div class="book" title="Chapter&#xA0;3.&#xA0;Creating Your First Bukkit Plugin" id="OPEK1-b66e70deee6e4ed481db4b113e303f23">
<div class="book" title="Installing an IDE"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch03lvl1sec20" class="calibre1"/>Installing an IDE</h1></div></div></div><p class="calibre8">In this book, we <a id="id72" class="calibre1"/>will use NetBeans as our IDE. There are other popular IDEs too, such as Eclipse and IntelliJ IDEA. You can use a different IDE if you wish. However, in this chapter, it will be assumed that you are using NetBeans. No matter which IDE you choose, the Java code will be the same. Therefore, as long as you set up the code properly, you can use any IDE for the remaining chapters. If you are fairly new to programming, then I suggest that you use NetBeans for now, and after you are more comfortable with programming, try other IDEs and choose the one that you prefer.</p><p class="calibre8">The <a id="id73" class="calibre1"/>NetBeans IDE can be downloaded from <a class="calibre1" href="http://www.oracle.com/technetwork/java/javase/downloads/">http://www.oracle.com/technetwork/java/javase/downloads/</a>. Downloading the program from Oracle will also allow us to download the required <span class="strong"><strong class="calibre2">Java Development Kit</strong></span> (<span class="strong"><strong class="calibre2">JDK</strong></span>) at<a id="id74" class="calibre1"/> the same time. You will see several download links. Click on the NetBeans link to visit the <span class="strong"><strong class="calibre2">JDK 8 with NetBeans</strong></span> download <a id="id75" class="calibre1"/>page. Once you select <span class="strong"><strong class="calibre2">Accept License Agreement</strong></span>, you will be allowed to download the software. The download link is located in a table that is similar to the one shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00016.jpeg" alt="Installing an IDE" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">If your PC has a 64-bit Windows operating system, then you will want to use the link corresponding to <span class="strong"><strong class="calibre2">Windows x64</strong></span>. If your PC has a 32-bit Windows operating system or you are unsure about whether it's a 64-bit or 32-bit Windows operating system, then download the <span class="strong"><strong class="calibre2">Windows x86</strong></span> version.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip03" class="calibre1"/>Tip</h3><p class="calibre8">If you wish to check whether you are running a 64-bit version of Windows, then you can check it by viewing the <span class="strong"><strong class="calibre2">System</strong></span> window in <span class="strong"><strong class="calibre2">Control Panel</strong></span>.</p></div><p class="calibre8">Once it has finished downloading, install the software. During the installation process, you may be asked about whether you'd like to install <span class="strong"><strong class="calibre2">JUnit</strong></span>. We will not be using <span class="strong"><strong class="calibre2">JUnit</strong></span>. Therefore, you should select <span class="strong"><strong class="calibre2">Do not install JUnit</strong></span>. In the next few screens of the installer, you will be asked about where you would like to install the two types of software. The default settings are fine. You can simply click on <span class="strong"><strong class="calibre2">Next</strong></span>.</p></div></div>
<div class="book" title="Creating a new project" id="PNV61-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec21" class="calibre1"/>Creating a new project</h1></div></div></div><p class="calibre8">Once it is<a id="id76" class="calibre1"/> installed, open NetBeans to begin the creation of the first project. You can create a new project by performing the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Open the <span class="strong"><strong class="calibre2">File</strong></span> menu and click on <span class="strong"><strong class="calibre2">New Project...</strong></span>.</li><li class="listitem" value="2">We want to create a new <span class="strong"><strong class="calibre2">java application. Java Application</strong></span> is already selected by default. Therefore, simply click on <span class="strong"><strong class="calibre2">Next</strong></span>.</li><li class="listitem" value="3">We must now name the first project. It is a good idea to avoid using spaces in a name. Let's name this project <code class="email">MyFirstBukkitPlugin</code>.</li><li class="listitem" value="4">Unless you want to store your project in another location, you can leave the default value of <span class="strong"><strong class="calibre2">Project Location</strong></span>.</li><li class="listitem" value="5">Ensure that <span class="strong"><strong class="calibre2">Create Main Class</strong></span> is checked.</li></ol><div class="calibre13"/></div><p class="calibre8">The <code class="email">main</code> class is where we will put the code that is needed to enable the plugin that we want to create. For this field, you must determine the package of your project. This usually involves your website's domain name in the reverse order. For example, Bukkit uses <code class="email">org.bukkit</code> and I use <code class="email">com.codisimus</code>. Assuming that you don't have your own domain name, you can use your e-mail address, such as <code class="email">com.gmail.username</code>. You need to use something that will be unique. If two plugins were to have the same package, it might cause collisions in class names, and Java will have no way of knowing which class you are referring to. Using an e-mail address or a domain name that you own is a good way to ensure that other developers don't use the same package. For this same reason, you should exclude <code class="email">bukkit</code> or <code class="email">minecraft</code> from your package name. The package should also be in lowercase, as shown in the previous examples.</p><p class="calibre8">Once you have a package, you need to name your main class. To avoid confusion, most Bukkit plugin developers use the project name as the main class name. The name of the main class should start with a capital letter.</p><p class="calibre8">The following screenshot is an example of how your forms should appear before clicking on <span class="strong"><strong class="calibre2">Finish</strong></span>:</p><div class="mediaobject"><img src="../images/00017.jpeg" alt="Creating a new project" class="calibre10"/></div><p class="calibre11"> </p></div>
<div class="book" title="Adding Bukkit as a library" id="QMFO1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec22" class="calibre1"/>Adding Bukkit as a library</h1></div></div></div><p class="calibre8">Now that <a id="id77" class="calibre1"/>we have created the main class, we need to add the Bukkit API as the library for the project. You may recall, as discussed in the previous chapter, that the API includes the code that we can access to modify the Spigot server. You built the API JAR file when you built the Spigot jar in <a class="calibre1" title="Chapter 1. Deploying a Spigot Server" href="part0014_split_000.html#DB7S1-b66e70deee6e4ed481db4b113e303f23">Chapter 1</a>, <span class="strong"><em class="calibre9">Deploying a Spigot Server</em></span>. If needed, refer to this chapter to retrieve the <code class="email">Bukkit.jar file</code>. You will want to move it to a more permanent location. I suggest that you create a folder named <code class="email">Libraries</code> and place the JAR file in this folder. The filename will most likely have a version appended to it. We will rename this file, which is similar to what we did for <code class="email">spigot.jar</code>. This will help us easily update it in the future. Therefore, the new location of the <code class="email">bukkit.jar file</code> will be similar to <code class="email">C:\Users\Owner\Documents\NetBeansProjects\Libraries\bukkit.jar</code>. Remember your file location because, now that we have the Bukkit API, we can create a library for it in NetBeans.</p><p class="calibre8">In NetBeans, inside<a id="id78" class="calibre1"/> the <span class="strong"><strong class="calibre2">Projects</strong></span> tab, you will see a <span class="strong"><strong class="calibre2">Libraries</strong></span> folder. When you right-click on it, you will be presented with the <span class="strong"><strong class="calibre2">Add Library...</strong></span> option. Click on it to bring up a list of the current libraries, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00018.jpeg" alt="Adding Bukkit as a library" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">For the first project, we need to create the Bukkit library by performing the following steps. For future projects, it will already be present and we can simply select it:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Click on <span class="strong"><strong class="calibre2">Create...</strong></span> and type <span class="strong"><strong class="calibre2">Bukkit</strong></span> as the <span class="strong"><strong class="calibre2">Library Name</strong></span>.</li><li class="listitem" value="2">In the next window, there is an <span class="strong"><strong class="calibre2">Add JAR/Folder...</strong></span> button. Click on it to locate and add the <code class="email">bukkit.jar</code> file.</li><li class="listitem" value="3">Leave <a id="id79" class="calibre1"/>the <span class="strong"><strong class="calibre2">Sources</strong></span> tab empty and then click on the <span class="strong"><strong class="calibre2">Javadoc</strong></span> tab.</li><li class="listitem" value="4">Add <a class="calibre1" href="https://hub.spigotmc.org/javadocs/spigot/">https://hub.spigotmc.org/javadocs/spigot/</a> in this tab and click on <span class="strong"><strong class="calibre2">OK</strong></span>. This allows us to read some parts of the API documentation directly in the IDE.</li></ol><div class="calibre13"/></div><p class="calibre8">Now, you will be able to select <span class="strong"><strong class="calibre2">Bukkit</strong></span> as a library and add it to the project.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre8">Note that in order to update to a newer version of Bukkit, you can simply replace the current <code class="email">bukkit.jar</code> file with the new one, just as you would do to update the <code class="email">spigot.jar file</code> on your server. No additional modifications need to <a id="id80" class="calibre1"/>be done to your existing projects. However, you will have to compile the code in these projects to check whether any new errors are presented.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="The essentials of a Bukkit plugin" id="RL0A1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec23" class="calibre1"/>The essentials of a Bukkit plugin</h1></div></div></div><p class="calibre8">Each Bukkit <a id="id81" class="calibre1"/>plugin requires two specific files. These files are <code class="email">plugin.yml</code> and the main class of the plugin. We will begin by creating the most basic versions of each of these files. All of your future projects will start with the creation of these two files.</p></div>

<div class="book" title="The essentials of a Bukkit plugin" id="RL0A1-b66e70deee6e4ed481db4b113e303f23">
<div class="book" title="The plugin.yml file"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec08" class="calibre1"/>The plugin.yml file</h2></div></div></div><p class="calibre8">We are <a id="id82" class="calibre1"/>ready to start programming a Bukkit plugin. The first file that we will create is <code class="email">plugin.yml</code>. This is the file that the Spigot server will read to determine how to load a plugin. Right-click on <span class="strong"><strong class="calibre2">Source Packages</strong></span> and click on <span class="strong"><strong class="calibre2">New | Other...</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00019.jpeg" alt="The plugin.yml file" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">In the window that appears, select <span class="strong"><strong class="calibre2">Other</strong></span> under <span class="strong"><strong class="calibre2">Categories</strong></span>. Then, select <span class="strong"><strong class="calibre2">YAML File</strong></span> under <span class="strong"><strong class="calibre2">File Types</strong></span>, as shown in the following screenshot, and click on <span class="strong"><strong class="calibre2">Next</strong></span>:</p><div class="mediaobject"><img src="../images/00020.jpeg" alt="The plugin.yml file" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Set<a id="id83" class="calibre1"/> the <span class="strong"><strong class="calibre2">File Name</strong></span> as <code class="email">plugin</code>, let the name of the folder be <code class="email">src</code>, and click on <span class="strong"><strong class="calibre2">Finish</strong></span>. Your project's tree structure should now look like in the following screenshot:</p><div class="mediaobject"><img src="../images/00021.jpeg" alt="The plugin.yml file" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">The <code class="email">plugin.yml </code>file was created in the default package. This is where it needs to be so that Spigot <a id="id84" class="calibre1"/>can find it. For now, we will fill in the <code class="email">plugin.yml</code> file with the most basic settings. The <code class="email">plugin.yml file</code> must include the name of your plugin, its version, and its <code class="email">main</code> class. We have already determined the name and <code class="email">main</code> class, and we will give it a <code class="email">Version number of 0.1</code>.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip04" class="calibre1"/>Tip</h3><p class="calibre8">If you wish <a id="id85" class="calibre1"/>to learn more about version numbers, Wikipedia has a great article on this at <a class="calibre1" href="http://en.wikipedia.org/wiki/Software_versioning">http://en.wikipedia.org/wiki/Software_versioning</a>.</p></div><p class="calibre8">The simplest form of <code class="email">plugin.yml</code> is as follows:</p><div class="informalexample"><pre class="programlisting">name: MyFirstBukkitPlugin
version: 0.1
main: com.codisimus.myfirstbukkitplugin.MyFirstBukkitPlugin</pre></div><p class="calibre8">That is all that you need in this file, but some other fields that you may wish to add are <code class="email">author</code>, <code class="email">description</code>, and <code class="email">website</code>. We are done with this file. You can save and close <code class="email">plugin.yml</code>.</p></div></div>

<div class="book" title="The essentials of a Bukkit plugin" id="RL0A1-b66e70deee6e4ed481db4b113e303f23">
<div class="book" title="The plugin's main class"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec09" class="calibre1"/>The plugin's main class</h2></div></div></div><p class="calibre8">We need<a id="id86" class="calibre1"/> to modify the main class. Open <code class="email">MyFirstBukkitPlugin.java</code> if it is not already open. We do not use the <code class="email">main</code> method in plugins. Hence, we will delete that section of the code. Now, you will have an empty Java class, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">package com.codisimus.myfirstbukkitplugin;

/**
 *
 * @author Owner
 */
public class MyFirstBukkitPlugin {

}</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip05" class="calibre1"/>Tip</h3><p class="calibre8">You may see additional comments, but they will not affect how the program is executed They are there for anyone who may be reading the code to help them understand it. It is always a good idea to comment on the code that you write. If someone ends up reading your code, whether it is a fellow developer or yourself a week from now, they will thank you for adding comments.</p></div><p class="calibre8">The first<a id="id87" class="calibre1"/> thing that we need to do is tell the IDE that this class is a Bukkit plugin. To do so, we will extend the <code class="email">JavaPlugin</code> class by adding <code class="email">extends JavaPlugin</code> immediately following the class name. The modified line will look like the following piece of code:</p><div class="informalexample"><pre class="programlisting">public class MyFirstBukkitPlugin extends JavaPlugin {</pre></div><p class="calibre8">You will see that a squiggly line and a light bulb appear. This will happen a lot, and it usually means that you need to import something from the Bukkit API. The IDE will do this for you if you ask it to do so. Click on the light bulb and import <code class="email">JavaPlugin</code> from the Bukkit library, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00022.jpeg" alt="The plugin's main class" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">This will automatically add a line of code near the top of your class. Right now, you can install this plugin on your server, but it will of course not do anything. Let's program the plugin to broadcast a message to the server once it is enabled. This message will show up when the plugin is enabled as we test it. To do this, we will override the <code class="email">onEnable</code> method. This method is executed when the plugin is enabled. Mimic the following code to add the method:</p><div class="informalexample"><pre class="programlisting">public class MyFirstBukkitPlugin extends JavaPlugin {
  public void onEnable() {

  }
}</pre></div><p class="calibre8">You will see another light bulb that will ask you to add the <code class="email">@Override</code> annotation. Click on it to automatically add the line of code. If you were not prompted to add the override annotation, then<a id="id88" class="calibre1"/> you may have misspelled something in the method header.</p><p class="calibre8">We now have the base of all of your future plugins.</p></div></div>
<div class="book" title="Making and calling new methods" id="SJGS1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec24" class="calibre1"/>Making and calling new methods</h1></div></div></div><p class="calibre8">Let's<a id="id89" class="calibre1"/> create <a id="id90" class="calibre1"/>a new method that will broadcast a message to the server. The following diagram labels the various parts of a method in case you are not familiar with them:</p><div class="mediaobject"><img src="../images/00023.jpeg" alt="Making and calling new methods" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Create a new method named <code class="email">broadcastToServer</code>. We will place it in the <code class="email">MyFirstBukkitPlugin</code> class under the <code class="email">onEnable</code> method. We only want to call this method from inside the <code class="email">MyFirstBukkitPlugin</code> class so that the access modifier will be <code class="email">private</code>. If you want to call this method from other classes in the plugin, you can remove the modifier or change it to <code class="email">public</code>. The method will not return anything and thus will have a return type of <code class="email">void</code>. Finally, the method will have one parameter, namely a string named <code class="email">msg</code>. After creating this second method, your class will look like the following code:</p><div class="informalexample"><pre class="programlisting">public class MyFirstBukkitPlugin extends JavaPlugin {
  @Override
  public void onEnable() {

  }

  private void broadcastToServer(String msg) {

  }
}</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip06" class="calibre1"/>Tip</h3><p class="calibre8">
<span class="strong"><strong class="calibre2">Downloading the example code</strong></span>
</p><p class="calibre8">You can download the example code files from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p class="calibre8">We will <a id="id91" class="calibre1"/>write the code within the body of the new method to accomplish its task. We <a id="id92" class="calibre1"/>want to broadcast a message to the server. We could call the <code class="email">getServer</code> method on the plugin. However, for convenience, the <code class="email">Bukkit</code> class contains a number of server methods in a static context. You may have come across the methods that we need when you were going through the <code class="email">Bukkit</code> class of the API in the previous chapter; if you have not stumbled upon them, browse through the methods<a id="id93" class="calibre1"/> in the <code class="email">Bukkit</code> class at <a class="calibre1" href="https://hub.spigotmc.org/javadocs/spigot/index.html?org/bukkit/Bukkit.html">https://hub.spigotmc.org/javadocs/spigot/index.html?org/bukkit/Bukkit.html</a> until you find the <code class="email">broadcastMessage(String message)</code> method. We will call the <code class="email">broadcastMessage</code> method from our own <code class="email">broadcastToServer</code> method. In the IDE, type <code class="email">Bukkit</code>, which is the name of the class, to indicate that you will be accessing the <code class="email">Bukkit</code> class from a static context. Continue by typing a period (<span class="strong"><em class="calibre9">.</em></span>) in order to call a method from that class. You will see that a list of available methods will appear, and we can simply scroll through them and choose the one that we want. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00024.jpeg" alt="Making and calling new methods" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Click to<a id="id94" class="calibre1"/> select <a id="id95" class="calibre1"/>the <code class="email">broadcastMessage</code> method. The API documentation for the method will be displayed. Note that to the right of the method, it says <span class="strong"><strong class="calibre2">int</strong></span>. This informs us that this method returns an <code class="email">integer</code> type value. When you click on the <span class="strong"><strong class="calibre2">See Also:</strong></span> link, as shown in the preceding screenshot, the documentation will tell us that the number that is returned is the number of players that the message was sent to. We don't really care about this number. Therefore, we will not assign it to a variable.</p><p class="calibre8">After selecting the method from the list, the IDE fills the parameters with variables that it believes we will use. In this case, it should use <code class="email">msg</code> as the parameter. If not, simply type <code class="email">msg</code> as parameter in <code class="email">broadcastMessage method</code> This completes the broadcast method. Now, we can call it from the <code class="email">onEnable</code> method. We will pass the <code class="email">Hello World!</code> string as an argument.</p><p class="calibre8">Adding this line <a id="id96" class="calibre1"/>of code will result in the class containing the following<a id="id97" class="calibre1"/> code:</p><div class="informalexample"><pre class="programlisting">public class MyFirstBukkitPlugin extends JavaPlugin {
  @Override
  public void onEnable() {
    broadcastToServer("Hello World!");
  }

    /**
    * Sends a message to everyone on the server
    *
    * @param msg the message to send
    */
  private void broadcastToServer(String msg) {
    Bukkit.broadcastMessage(msg);
  }
}</pre></div><p class="calibre8">If we test this plugin, then it will print <code class="email">Hello World!</code> once it is enabled.</p></div>
<div class="book" title="Expanding your code" id="TI1E1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec25" class="calibre1"/>Expanding your code</h1></div></div></div><p class="calibre8">Before <a id="id98" class="calibre1"/>testing the code, let's improve on the <code class="email">onEnable</code> method by implementing an <code class="email">if</code> statement. If there is only one player online, then why not say hello to that specific player? We can get a collection of all the players that are online by calling <code class="email">Bukkit.getOnlinePlayers</code>. If we wish to check whether the size of the collection is equal to 1, we can accomplish this by using an <code class="email">if</code>/<code class="email">else</code> statement. This is demonstrated in the following code:</p><div class="informalexample"><pre class="programlisting">if (Bukkit.getOnlinePlayers().size() == 1) {//Only 1 player online
  //Say 'Hello' to the specific player
} else {
  //Say 'Hello' to the Minecraft World
  broadcastToServer("Hello World!");
}</pre></div><p class="calibre8">Within the <code class="email">if</code> statement, we will now get the first and the only object in the collection of players. Once we have it, we can continue by broadcasting <code class="email">Hello</code> along with the player's name. After<a id="id99" class="calibre1"/> completing the <code class="email">if</code> statement, the entire class will look like the following code:</p><div class="informalexample"><pre class="programlisting">package com.codisimus.myfirstbukkitplugin;

 importorg.bukkit.Bukkit;
 importorg.bukkit.entity.Player;
 importorg.bukkit.plugin.java.JavaPlugin;

    /**
    * Broadcasts a hello message to the server
    */
public class MyFirstBukkitPlugin extends JavaPlugin {
  @Override
  public void onEnable() {
    if (Bukkit.getOnlinePlayers().size() == 1) {

      //Loop through the collection to access the single player
      for (Player player : Bukkit.getOnlinePlayers()) {
        //Say 'Hello' to the specific player
        broadcastToServer("Hello " + player.getName());
      }
    } else {
        //Say 'Hello' to the Minecraft World
        broadcastToServer("Hello World!");
      }
    }

    /**
    * Sends a message to everyone on the server
    *
    * @param msg the message to send
    */
    private void broadcastToServer(String msg) {
      Bukkit.broadcastMessage(msg);
    }
  }</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip07" class="calibre1"/>Tip</h3><p class="calibre8">If you do not fully understand the <code class="email">if</code> statement or the code provided, then I suggest that you go to my website to learn the basics of Java, which is a prerequisite that was mentioned in the preface of this book.</p></div></div>
<div class="book" title="Summary" id="UGI01-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec26" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">Your first plugin is complete and ready to be tested on your server. In the next chapter, we will install your new plugin, learn how to test it, and discover when the <code class="email">onEnable</code> method is executed by the server. Now that you are familiar with writing and calling methods, you can now create basic plugins. Each plugin that you create from now on will always start in a way that is similar to the way this one was started, that is, first create a new project and add Bukkit as a library then fill out the <code class="email">plugin.yml</code> file and finally set up your main class as a <code class="email">JavaPlugin</code> class with the <code class="email">onEnable</code> method.</p></div></body></html>