<html><head></head><body>
		<div>
			<div class="Content" id="_idContainer052">
			</div>
		</div>
		<div class="Content" id="_idContainer053">
			<h1 id="_idParaDest-117"><a id="_idTextAnchor117"/>6. Libraries, Packages, and Modules</h1>
		</div>
		<div class="Content" id="_idContainer065">
			<p class="callout-heading">Overview</p>
			<p class="callout">This chapter will introduce you to the various ways of packaging and bundling Java code, as well as the tools required to help build your own Java projects. The first step is learning how to organize your code into packages, so that you can build a <strong class="bold">Java ARchive</strong> (<strong class="bold">JAR</strong>) file from those packages. From there, you will practice creating an executable JAR file using Java build tools like Maven and Gradle, which will further help you to include third-party open source libraries in your projects. By the end of this chapter, you will be well equipped to create your own Java module to group your packages together.</p>
			<h1 id="_idParaDest-118"><a id="_idTextAnchor118"/>Introduction</h1>
			<p>Any sophisticated Java application will require many separate Java classes. Java provides several ways to help you organize your classes; one of which is the concept of packages. You can collect multiple compiled packages together into a Java library, or a <strong class="bold">Java ARchive</strong> (<strong class="bold">JAR</strong>) file. Furthermore, you can use modules to provide a higher level of abstraction in your code, exposing only those elements that you consider appropriate.</p>
			<p>When you start to create larger applications, you'll want to take advantage of Java's handy build tools—of which Maven and Gradle are the most popular. Build tools make it easier to build large projects that might depend on other projects and libraries. Build tools also provide standard ways to run tests, as well as packaging the project.</p>
			<p>Both Maven and Gradle help significantly with the inclusion of third-party open-source libraries in your applications. There are thousands of such libraries available.</p>
			<h1 id="_idParaDest-119"><a id="_idTextAnchor119"/>Organizing Code into Packages</h1>
			<p>Java packages together related classes, interfaces, enums (a data type that contains a data type that contains a fixed group of constants), and annotations (contain metadata). In other words, a package is a collection of Java types brought together under a common name. Using a common name makes it easier to find code in larger projects, and helps to keep your code separate from other, perhaps similar, code. For example, more than one package might contain a class named <strong class="source-inline">Rectangle</strong>, so referring to the appropriate package will allow you to specify which <strong class="source-inline">Rectangle</strong> class you're looking for. Packages allow you to organize your code, which becomes more and more important as you work on larger and larger applications.</p>
			<p>Java's API includes hundreds of classes divided into packages, such as <strong class="source-inline">java.math</strong> and <strong class="source-inline">java.net</strong>. As you'd expect, <strong class="source-inline">java.math</strong> has mathematics-related classes, and <strong class="source-inline">java.net</strong> has networking-related classes.</p>
			<h2 id="_idParaDest-120"><a id="_idTextAnchor120"/>Importing Classes</h2>
			<p>When you use Java classes from packages other than <strong class="source-inline">java.lang</strong>, you need to import them using an <strong class="source-inline">import</strong> statement. The Java compiler imports all classes in the <strong class="source-inline">java.lang</strong> package by default. Everything else is up to you.</p>
			<p>Here's an example:</p>
			<p class="source-code">import java.time.DayOfWeek;</p>
			<p class="source-code">import java.time.LocalDateTime;</p>
			<p>This code imports two types from the <strong class="source-inline">java.time</strong> package, <strong class="source-inline">DayOfWeek</strong> and <strong class="source-inline">LocalDateTime</strong>. Now, <strong class="source-inline">DayOfWeek</strong> is a Java <strong class="source-inline">enum</strong> representing days of the week. <strong class="source-inline">LocalDateTime</strong> is a class that holds a date and a time.</p>
			<p>Once you import these types, you can use them in your code, as follows:</p>
			<p class="source-code">LocalDateTime localDateTime = LocalDateTime.now();</p>
			<p class="source-code">DayOfWeek day = localDateTime.getDayOfWeek();</p>
			<p class="source-code">System.out.println("The week day is: " + day);</p>
			<h2 id="_idParaDest-121"><a id="_idTextAnchor121"/>Exercise 1: Importing Classes</h2>
			<p>In this exercise, we will display the current day of the week and use the <strong class="source-inline">java.time</strong> package to extract system date and time.</p>
			<ol>
				<li>In IntelliJ, select <strong class="source-inline">File</strong>, <strong class="source-inline">New</strong>, and then <strong class="source-inline">Project</strong> from the <strong class="source-inline">File</strong> menu.</li>
				<li>In the <strong class="source-inline">New Project</strong> Dialog, select a Java project. Click <strong class="source-inline">Next</strong>.</li>
				<li>Check the box to create the project from a template. Click on <strong class="source-inline">Command Line App</strong>. Click <strong class="source-inline">Next</strong>.</li>
				<li>Name the project <strong class="source-inline">chapter06</strong>.</li>
				<li>For the project's location, click the button with three dots (<strong class="source-inline">…</strong>), and then select the source folder you created previously.</li>
				<li>Enter <strong class="source-inline">com.packtpub.chapter06</strong> as the base package name. We'll do more with packages later in this chapter.</li>
				<li>Click <strong class="source-inline">Finish</strong>.<p>IntelliJ will create a project named <strong class="source-inline">chapter06</strong>, as well as an <strong class="source-inline">src</strong> folder inside <strong class="source-inline">chapter06</strong>. This is where your Java code will reside. Inside this folder, IntelliJ will create subfolders for <strong class="source-inline">com</strong>, <strong class="source-inline">packtpub</strong>, and <strong class="source-inline">chapter06</strong>.</p><p>IntelliJ also creates a class named <strong class="source-inline">Main</strong>:</p><p class="source-code">public class Main {</p><p class="source-code">    public static void main(String[] args) {</p><p class="source-code">    // write your code here</p><p class="source-code">    }</p><p class="source-code">}</p><p>Rename the class named <strong class="source-inline">Main</strong> to <strong class="source-inline">Example01</strong>. </p></li>
				<li>Double-click in the text editor window on the word <strong class="source-inline">Main</strong>.</li>
				<li>Right-click and select <strong class="source-inline">Refactor</strong> | <strong class="source-inline">Rename…</strong> from the menu.</li>
				<li>Enter <strong class="source-inline">Example01</strong> and press <em class="italic">Enter</em>.<p>You will now see the following code:</p><p class="source-code">public class Example01 {</p><p class="source-code">    public static void main(String[] args) {</p><p class="source-code">    // write your code here</p><p class="source-code">    }</p><p class="source-code">}</p><p>Now enter the following code inside the <strong class="source-inline">main()</strong> method:</p><p class="source-code">LocalDateTime localDateTime = LocalDateTime.now();</p><p class="source-code">DayOfWeek day = localDateTime.getDayOfWeek();</p><p class="source-code">System.out.println("The weekday is: " + day);</p><p>IntelliJ should offer the option to import the two types, <strong class="source-inline">DayOfWeek</strong> and <strong class="source-inline">LocalDateTime</strong>. If, for some reason, you click the wrong button, you can add the following lines after the package statement and prior to the definition of the class:</p><p class="source-code">package com.packtpub.chapter06;</p><p class="source-code">import java.time.DayOfWeek;</p><p class="source-code">import java.time.LocalDateTime;</p><p class="source-code">public class Example01 {</p></li>
				<li>Now, click on the green arrow just to the left of the text editor window that points to the class name, <strong class="source-inline">Example01</strong>. Select the first menu choice, <strong class="source-inline">Run</strong> <strong class="source-inline">Example01.main()</strong>.</li>
				<li>In the <strong class="source-inline">Run</strong> window, you'll see the path to your Java program, and then some output such as this:<p class="source-code">The weekday is: SATURDAY</p><p>You should see the current day of the week.</p></li>
			</ol>
			<p>The package statement identifies the package in which this code resides. See the <em class="italic">Creating a Package</em> section later in this chapter for more information on this topic.</p>
			<h2 id="_idParaDest-122"><a id="_idTextAnchor122"/>Fully Qualified Class Names</h2>
			<p>You don't have to use <strong class="source-inline">import</strong> statements. Instead, you can use the fully qualified class name, as shown here:</p>
			<p class="source-code">java.time.LocalDateTime localDateTime = java.time.LocalDateTime.now();</p>
			<p>The fully qualified name includes both the package and the type name. the following example would also give us the same result as the <em class="italic">Exercise 01</em>, <em class="italic">Importing Classes</em>.</p>
			<p class="source-code">package com.packtpub.chapter06;</p>
			<p class="source-code">public class Example02 {</p>
			<p class="source-code">    public static void main(String[] args) {</p>
			<p class="source-code">        java.time.LocalDateTime localDateTime = java.time.LocalDateTime.now();</p>
			<p class="source-code">        java.time.DayOfWeek day = localDateTime.getDayOfWeek();</p>
			<p class="source-code">        System.out.println("The weekday is: " + day);</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>Usually, importing classes and types makes your code easier to read and requires less typing. In large projects, you will find very long package names. Placing these long names in front of every declaration will make your code much harder to read. Most Java developers will import classes, unless you have two classes with the same name but stored in separate packages.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Most IDEs, such as IntelliJ, can find most classes for you, and will offer to import the class.</p>
			<h2 id="_idParaDest-123"><a id="_idTextAnchor123"/>Importing All Classes in a Package</h2>
			<p>You can import all classes in a package using an asterisk, <strong class="source-inline">*</strong>, to represent all the classes in a package, as follows:</p>
			<p class="source-code">import java.time.*;</p>
			<p>The asterisk is considered a wildcard character and imports all public types from the given package, in this case, <strong class="source-inline">java.time</strong>. The Java compiler will automatically import any types from this package that you use in your code.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Using the wildcard imports may bring in different classes to the ones you intended. Some packages use common class names, such as <strong class="source-inline">Event</strong>, <strong class="source-inline">Duration</strong>, or <strong class="source-inline">Distance</strong>, that may conflict with type names you want to use. So, if you use the wildcard import, you may end up with the wrong class imported. Normally, it is best to import only the types that you require.</p>
			<p><strong class="source-inline">Example03.java</strong> shows how to use wildcard imports:</p>
			<p class="source-code">package com.packtpub.chapter06;</p>
			<p class="source-code">import java.time.*;</p>
			<p class="source-code">public class Example03 {</p>
			<p class="source-code">    public static void main(String[] args) {</p>
			<p class="source-code">        LocalDateTime localDateTime = LocalDateTime.now();</p>
			<p class="source-code">        DayOfWeek day = localDateTime.getDayOfWeek();</p>
			<p class="source-code">        System.out.println("The weekend is: " + day);</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>When you run this program, you will see output like the following, depending on the day of the week:</p>
			<p class="source-code">The weekday is: MONDAY</p>
			<h2 id="_idParaDest-124"><a id="_idTextAnchor124"/>Dealing with Duplicated Names</h2>
			<p>If, for some reason, you have to use two different classes with the same name, you'll need to use the fully qualified class names.</p>
			<p>When you work with third-party libraries, you may find that there are multiple classes in your project with the same name. <strong class="source-inline">StringUtils</strong>, for example, is defined in multiple packages in multiple libraries. In this case, use the fully qualified class names to disambiguate. Here is an example:</p>
			<p class="source-code">boolean notEmpty = org.springframework.util.StringUtils.isNotEmpty(str);</p>
			<p class="source-code">boolean hasLength = org.apache.commons.lang3.StringUtils.hasLength(str);</p>
			<p>These are two classes with the same basic name, <strong class="source-inline">StringUtils</strong>, that come from different third-party libraries. You will learn more about third-party libraries later on in this chapter.</p>
			<h2 id="_idParaDest-125"><a id="_idTextAnchor125"/>Static Imports</h2>
			<p>Many classes define constants, usually defined as <strong class="source-inline">static</strong> <strong class="source-inline">final</strong> fields. You can use these constants by importing the enclosing class and then referencing them from the class name, as shown in <em class="italic">Chapter 3</em>, <em class="italic">Object-Oriented Programming</em>. For example, Java defines the end of time with the <strong class="source-inline">MAX </strong>constant in the <strong class="source-inline">LocalDateTime</strong> class. </p>
			<p><strong class="source-inline">Example04.java</strong> shows how to statically import <strong class="source-inline">LocalDateTime</strong>. <strong class="source-inline">MAX</strong> to see when the universe will end, at least according to the company behind Java:</p>
			<p class="source-code">package com.packtpub.chapter06;</p>
			<p class="source-code">import java.time.LocalDateTime;</p>
			<p class="source-code">public class Example04 {</p>
			<p class="source-code">    public static void main(String[] args) {</p>
			<p class="source-code">        System.out.println("The end of time is: " + LocalDateTime.MAX);</p>
			<p class="source-code">    }</p>
			<p class="source-code">}</p>
			<p>When you run this program, you will see the following output:</p>
			<p class="source-code">The end of time is: +999999999-12-31T23:59:59.999999999</p>
			<h2 id="_idParaDest-126"><a id="_idTextAnchor126"/>Creating a Package</h2>
			<p>As discussed earlier, once you start writing more complex Java programs, you will want to bundle your code together in a package. To create a package, you should observe the following steps:</p>
			<ol>
				<li value="1">Name your package.</li>
				<li>Create the appropriate source directory for the package.</li>
				<li>Create classes and other types, as needed, in the new package.</li>
			</ol>
			<h2 id="_idParaDest-127"><a id="_idTextAnchor127"/>Naming Your Package</h2>
			<p>Technically, you can name your Java packages anything you want, so long as you stick to the rules for naming variables and types in Java. Don't use characters that Java will interpret as code. For example, you cannot use a hyphen, -, in a Java package name. The Java compiler will think you are performing subtraction. You cannot use Java's reserved words, such as <strong class="source-inline">class</strong>, either.</p>
			<p>Typically, you'll use your organization's domain name in reverse for your package names. For example, if the domain name is <strong class="source-inline">packtpub.com</strong>, then your package names would start with <strong class="source-inline">com.packtpub</strong>. You will almost always want to add descriptive names after the domain part to allow you to organize your code. For example, if you were making a medical application that pulled data from a fitness tracking device, you might create packages such as the following:</p>
			<ul>
				<li><strong class="source-inline">com.packtpub.medical.heartrate </strong></li>
				<li><strong class="source-inline">com.packtpub.medical.tracker</strong></li>
				<li><strong class="source-inline">com.packtpub.medical.report</strong></li>
				<li><strong class="source-inline">com.packtpub.medical.ui</strong></li>
			</ul>
			<p>Use names that make sense for your organization, as well as for the purpose of the classes in the package.</p>
			<p>The reason for using your organization's domain name is, in part, to prevent your Java packages from having the same name as packages in third-party libraries. The domain names are already made unique by domain name registrars. Using the domain names in reverse makes for more understandable names for packages as you delve deeper and deeper into the package tree, such as <strong class="source-inline">com.packtpub.medical.report.daily.exceptions</strong>. Furthermore, this convention helps separate packages from multiple organizations.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The classes provided with Java APIs reside in packages starting with <strong class="source-inline">java</strong> or <strong class="source-inline">javax</strong>. Don't use these names for your packages.</p>
			<p>Generally, you'll want to group classes, interfaces, enums, and annotations that are related to the same package.</p>
			<h2 id="_idParaDest-128"><a id="_idTextAnchor128"/>Directories and Packages</h2>
			<p>Java makes heavy use of directories to define packages. Every dot in a package name, such as <strong class="source-inline">java.lang</strong>, indicates a sub-folder. </p>
			<p>In the IntelliJ project you created for this chapter, you also created a package named <strong class="source-inline">com.packtpub.chapter06</strong>. Using IntelliJ's <strong class="source-inline">Project</strong> pane, you can see the folders created for the package.</p>
			<ol>
				<li value="1">Click on the gear icon in the <strong class="source-inline">Project</strong> pane.</li>
				<li>Uncheck the <strong class="source-inline">Compact Middle Packages</strong> option.</li>
				<li>You will now see a folder for <strong class="source-inline">com.packtpub.chapter06</strong>, as shown in <em class="italic">Figure 6.1</em>:</li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer054">
					<img alt="Figure 6.1: IntelliJ's Project pane can show the individual folders that make up a Java package&#13;&#10;" src="image/C13927_06_01.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.1: IntelliJ's Project pane can show the individual folders that make up a Java package</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The folder structure might vary based on the number of examples you have tried out in this chapter.</p>
			<p>Normally, you'll want to leave IntelliJ's <strong class="source-inline">Compact Middle Packages</strong> setting on, as it makes the project organization easier to see at a glance.</p>
			<h2 id="_idParaDest-129"><a id="_idTextAnchor129"/>Exercise 2: Creating a Package for a Fitness Tracking App</h2>
			<p>We've created a package, <strong class="source-inline">com.packtpub.chapter06</strong>, that acts as a catch-all for examples in this chapter. In this exercise, we'll create another package to gather together a related set of classes.</p>
			<p>When creating an application that interacts with a fitness tracker, you want a package for classes that relate to tracking daily steps. Users will define a goal for the number of steps they want to take in a day, say 10,000. The tracker will record the number of steps taken so far, along with a collection of the daily totals:</p>
			<ol>
				<li value="1">In the IntelliJ Project pane for the <strong class="source-inline">chapter06</strong> project created previously, click the gear icon. Make sure <strong class="source-inline">Flatten Packages</strong> and <strong class="source-inline">Hide Empty Middle Packages</strong> are both selected.</li>
				<li>Remain in the <strong class="source-inline">Project</strong> pane, and right-click on the <strong class="source-inline">src</strong> folder. Select <strong class="source-inline">New</strong>, and then <strong class="source-inline">Package</strong>. Enter the <strong class="source-inline">com.packtpub.steps</strong> package name, and then click <strong class="source-inline">OK</strong>. This is our new package.</li>
				<li>Right-click on the <strong class="source-inline">com.packtpub.steps</strong> package, select <strong class="source-inline">New</strong>, and then select <strong class="source-inline">Java Class</strong>. Enter the <strong class="source-inline">Steps</strong> class name.</li>
				<li>Enter the following field definitions:<p class="source-code">private int steps;</p><p class="source-code">private LocalDate date;</p></li>
				<li>Allow IntelliJ to import <strong class="source-inline">java.time.LocalDate</strong>, or simply enter the following code after the package statement and before the definition of the class:<p class="source-code">package com.packtpub.steps;</p><p class="source-code">import java.time.LocalDate;</p><p class="source-code">/**</p><p class="source-code"> * Holds steps taken (so far) in a day.</p><p class="source-code"> */</p><p class="source-code">public class Steps {</p><p class="source-code">    private int steps;</p><p class="source-code">    private LocalDate date;</p><p class="source-code">}</p></li>
				<li>Right-click within the class definition. Choose <strong class="source-inline">Generate…</strong> from the menu. Then, select <strong class="source-inline">Constructor</strong>. Select both <strong class="source-inline">steps</strong> and the <strong class="source-inline">date</strong>, and then click <strong class="source-inline">OK</strong>.<p>You'll see a brand-new constructor, as follows:</p><p class="source-code">public Steps(int steps, LocalDate date) {</p><p class="source-code">    this.steps = steps;</p><p class="source-code">    this.date = date;</p><p class="source-code">}</p></li>
				<li>Right-click within the class definition again. Choose <strong class="source-inline">Generate…</strong>, and then select <strong class="source-inline">Getter and Setter</strong>. Select both <strong class="source-inline">steps</strong> and the <strong class="source-inline">date</strong>, and then click <strong class="source-inline">OK</strong>. You'll now see the getter and setter methods:<p class="source-code">public int getSteps() {</p><p class="source-code">    return steps;</p><p class="source-code">}</p><p class="source-code">public void setSteps(int steps) {</p><p class="source-code">    this.steps = steps;</p><p class="source-code">}</p><p class="source-code">public LocalDate getDate() {</p><p class="source-code">    return date;</p><p class="source-code">}</p><p class="source-code">public void setDate(LocalDate date) {</p><p class="source-code">    this.date = date;</p><p class="source-code">}</p><p>We now have our first class in the new package. Next, we'll create another class.</p></li>
				<li>Right-click on the <strong class="source-inline">com.packtpub.steps</strong> package in the <strong class="source-inline">Project</strong> pane, select <strong class="source-inline">New</strong>, and then select <strong class="source-inline">Java Class</strong>. Enter the <strong class="source-inline">DailyGoal</strong> class name.</li>
				<li>Enter the following field definition:<p class="source-code">int dailyGoal = 10000;</p><p>Note that we default the daily steps goal to 10,000 steps.</p></li>
				<li>Right-click within the class definition. Choose <strong class="source-inline">Generate…</strong> from the menu. Then, select <strong class="source-inline">Constructor</strong>, followed by <strong class="source-inline">dailyGoal</strong>, and then click <strong class="source-inline">OK</strong>.</li>
				<li>Define the following method, which is used to determine whether a <strong class="source-inline">Steps</strong> object has achieved the daily goal:<p class="source-code">public boolean hasMetGoal(Steps steps) {</p><p class="source-code">    if (steps.getSteps() &gt;= dailyGoal) {</p><p class="source-code">        return true;</p><p class="source-code">    }</p><p class="source-code">    return false;</p><p class="source-code">}</p></li>
				<li>Right-click on the <strong class="source-inline">com.packtpub.steps</strong> package in the <strong class="source-inline">Project</strong> pane, select <strong class="source-inline">New</strong>, and then select <strong class="source-inline">Java Class</strong>. Enter the <strong class="source-inline">WeeklySteps</strong> class name.</li>
				<li>Enter the following fields:<p class="source-code">List&lt;Steps&gt; dailySteps = new ArrayList&lt;&gt;();</p><p class="source-code">DailyGoal dailyGoal;</p><p>You will need to import <strong class="source-inline">java.util.List</strong> and <strong class="source-inline">java.util.ArrayList</strong>.</p></li>
				<li>Right-click within the class definition again. Choose <strong class="source-inline">Generate…</strong>, and then select <strong class="source-inline">Getter and Setter</strong>. Select both <strong class="source-inline">dailySteps</strong> and <strong class="source-inline">dailyGoal</strong>, and then click <strong class="source-inline">OK</strong>. You'll now see the getter and setter methods.<p>To use this new class, we'll add some methods to determine the best day (the day with the greatest number of steps), total the steps, and format the output.</p></li>
				<li>Enter the following method to determine the best day for steps:<p class="source-code">public DayOfWeek bestDay() {</p><p class="source-code">    DayOfWeek best = DayOfWeek.MONDAY;</p><p class="source-code">    int max = 0;</p><p class="source-code">    for (Steps steps : dailySteps) {</p><p class="source-code">        if (steps.getSteps() &gt; max) {</p><p class="source-code">            max = steps.getSteps();</p><p class="source-code">            best = steps.getDate().getDayOfWeek();</p><p class="source-code">        }</p><p class="source-code">    }</p><p class="source-code">    return best;</p><p class="source-code">}</p></li>
				<li>Now, enter the following method to total the weekly number of steps:<p class="source-code">public int getTotalSteps() {</p><p class="source-code">    int total = 0;</p><p class="source-code">    for (Steps steps : dailySteps) {</p><p class="source-code">        total += steps.getSteps();</p><p class="source-code">    }</p><p class="source-code">    return total;</p><p class="source-code">}</p><p>Note that both methods iterate over <strong class="source-inline">dailySteps</strong>. These two methods could be combined into one.</p><p>In a real fitness tracking application, you would probably have a smartphone or a web user interface. For this example, though, we'll simply generate a string of the results of the weekly steps.</p></li>
				<li>Enter the following method:<p class="source-code-heading">WeeklySteps.java</p><p class="source-code">36 public String format() {</p><p class="source-code">37 </p><p class="source-code">38     StringBuilder builder = new StringBuilder();</p><p class="source-code">39 </p><p class="source-code">40     builder.append("Total steps: " + getTotalSteps() + "\n");</p><p class="source-code">41 </p><p class="source-code">42     for (Steps steps : dailySteps) {</p><p class="source-code">43         if (dailyGoal.hasMetGoal(steps)) {</p><p class="source-code">44             builder.append("YAY! ");</p><p class="source-code">45         } else {</p><p class="source-code">46             builder.append("     ");</p><p class="source-code">47         }</p><p class="source-code-link"><a href="https://packt.live/2quq4uh">https://packt.live/2quq4uh</a></p><p>This method uses <strong class="source-inline">StringBuilder</strong> and <strong class="source-inline">DayOfWeek</strong>, both part of the Java API. An encouraging message, <strong class="source-inline">YAY!</strong>, appears with each day the user met the step goal. The best day also gets an uplifting message. </p></li>
				<li>To help initialize the weekly step data, we'll create a convenience method (a method that exists to simplify our code and reduce typing):<p class="source-code">public void addDailySteps(int steps, LocalDate date) {</p><p class="source-code">    dailySteps.add(new Steps(steps, date));</p><p class="source-code">}</p></li>
				<li>To test the entire step-tracking package, we'll create a <strong class="source-inline">main()</strong> method that shows how everything fits together:<p class="source-code-heading">WeeklySteps.java</p><p class="source-code">84 public static void main(String[] args) {</p><p class="source-code">85     // Initialize sample data.</p><p class="source-code">86     DailyGoal dailyGoal = new DailyGoal(10000);</p><p class="source-code">87</p><p class="source-code">88     WeeklySteps weekly = new WeeklySteps();</p><p class="source-code">89     weekly.setDailyGoal(dailyGoal);</p><p class="source-code">90</p><p class="source-code">91     int year = 2021;</p><p class="source-code">92     int month = 1;</p><p class="source-code">93     int day = 4;</p><p class="source-code-link"><a href="https://packt.live/2pB8nIG">https://packt.live/2pB8nIG</a></p><p>Normally, you would put this type of code into a unit test, which is a special code designed to make sure your classes and algorithms are correct. Refer to <em class="italic">Chapter 18</em>, <em class="italic">Unit Testing</em>, for more information on unit testing.</p></li>
				<li>Click on the green arrow just to the left of the text editor window that points to the <strong class="source-inline">WeeklySteps</strong> class name. Select the first menu choice, <strong class="source-inline">Run 'WeeklySteps.main()'</strong>.<p>You'll see output along the lines of the following, for a week of fitness data (in the year 2021):</p><p class="source-code">Total steps: 92772</p><p class="source-code">YAY! MONDAY 11543</p><p class="source-code">YAY! TUESDAY 12112</p><p class="source-code">YAY! WEDNESDAY 10005</p><p class="source-code">YAY! THURSDAY 10011</p><p class="source-code">     FRIDAY 9000</p><p class="source-code">YAY! SATURDAY 20053 ***** BEST DAY!</p><p class="source-code">YAY! SUNDAY 20048</p></li>
			</ol>
			<p>Now that you have an idea of the basics of Java code organization, we will look into a special kind of file known as the Java Archive. </p>
			<h2 id="_idParaDest-130"><a id="_idTextAnchor130"/>Building JAR Files</h2>
			<p>A JAR file, short for Java Archive, holds multiple files and provides a platform-neutral way to distribute Java code. For a Java library, a JAR file will contain the compiled .class files, and perhaps additional files, such as the configuration data, certificates, and image files, called resources, that are required by the library. Specialized versions of JAR files are used to package and deploy server-side Java applications. </p>
			<p>A <strong class="bold">WAR</strong> file, short for <strong class="bold">web archive</strong>, contains the compiled Java code and resources for a web application. An <strong class="bold">EAR</strong> file, short for <strong class="bold">enterprise archive</strong>, contains the compiled Java code and resources for a full server-side <strong class="bold">Java Enterprise Edition</strong> (<strong class="bold">JavaEE</strong>) application. Under the hood, a JAR file is a compressed ZIP file.</p>
			<p>To build a JAR file, we can use the following command:</p>
			<p class="source-code">jar cvf jar_file_name files_to_put_in</p>
			<p>The <strong class="source-inline">c</strong> option tells the <strong class="source-inline">jar</strong> command to create a new JAR file. The <strong class="source-inline">f</strong> option specifies the filename of the new JAR file. This filename should appear immediately after the options. Finally, you list all the files to place in the JAR file, typically, <strong class="source-inline">.class</strong> files.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The <strong class="source-inline">v</strong> option (part of <strong class="source-inline">cvf</strong>) stands for verbose; that is, it is optional, and tells the JAR tool to output verbose output while it works.</p>
			<h2 id="_idParaDest-131"><a id="_idTextAnchor131"/>Exercise 3: Building a JAR File</h2>
			<p>In this exercise, we'll compile the Java code for the <strong class="source-inline">com.packtpub.steps</strong> package and then build a JAR file:</p>
			<ol>
				<li value="1">In the Terminal pane in IntelliJ, run the following commands:<p class="source-code">cd src</p><p class="source-code">javac com/packtpub/steps/*.java</p><p>The <strong class="source-inline">javac</strong> command created <strong class="source-inline">.class</strong> files in the <strong class="source-inline">com/packtpub/steps</strong> folder.</p></li>
				<li>Next, create a JAR file with the following command:<p class="source-code">jar cvf chapter6.jar  com/packtpub/steps/*.class</p><p>This command will generate output because we are using the verbose option:</p><p class="source-code">added manifest</p><p class="source-code">adding: com/packtpub/steps/DailyGoal.class(in = 464) (out= 321)(deflated 30%)</p><p class="source-code">adding: com/packtpub/steps/Steps.class(in = 622) (out= 355)(deflated 42%)</p><p class="source-code">adding: com/packtpub/steps/WeeklySteps.class(in = 3465) (out= 1712)(deflated 50%)</p></li>
			</ol>
			<p>You'll then see the new JAR file, <strong class="source-inline">chapter6.jar</strong>, in the current directory. By convention, use the <strong class="source-inline">.jar</strong> filename extension for JAR files.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The name jar, and the command-line syntax, are based on a much earlier UNIX and Linux tool called <strong class="source-inline">tar</strong>.</p>
			<p>Like with all compressed files, we will have to decompress the JAR files too, before we start using them. To extract all the files from a JAR file, use the <strong class="source-inline">jar xvf</strong> command:</p>
			<p class="source-code">jar xvf chapter6.jar</p>
			<p>In this case, <strong class="source-inline">chapter6.jar</strong> is the name of the JAR file.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The JAR command-line options are treated in order. In this case, the <strong class="source-inline">f</strong> option requires a filename parameter. If you add another option that also requires a parameter (such as <strong class="source-inline">e</strong>, mentioned later in <em class="italic">Exercise 04, Building an Executable JAR File</em>), then the filename needs to come before that additional parameter. </p>
			<p>To see what is inside a JAR file, use the <strong class="source-inline">jar tf</strong> command. In this case, you can see inside your new JAR file by running the following command from the Terminal pane:</p>
			<p class="source-code">jar tf chapter6.jar</p>
			<p>You will see a listing of the files in the JAR file as the output:</p>
			<p class="source-code">META-INF/</p>
			<p class="source-code">META-INF/MANIFEST.MF</p>
			<p class="source-code">com/packtpub/steps/DailyGoal.class</p>
			<p class="source-code">com/packtpub/steps/Steps.class</p>
			<p class="source-code">com/packtpub/steps/WeeklySteps.class</p>
			<p>Notice how the <strong class="source-inline">jar</strong> command created a folder named <strong class="source-inline">META-INF</strong> and a file named <strong class="source-inline">MANIFEST.MF</strong> in that folder.</p>
			<p>By default, the <strong class="source-inline">jar</strong> command will create a <strong class="source-inline">MANIFEST.MF</strong> file with the following content:</p>
			<p class="source-code">Manifest-Version: 1.0</p>
			<p class="source-code">Created-By: 11.0.2 (Oracle Corporation)</p>
			<p>The file lists a version number, and the version of Java created that file—in this case, Java 11 from Oracle.</p>
			<h2 id="_idParaDest-132"><a id="_idTextAnchor132"/>Defining the Manifest</h2>
			<p>The <strong class="source-inline">MANIFEST.MF</strong> file is used to provide information to Java tools regarding the content of the JAR file. You can add versioning information, electronically sign the JAR file, and so on. Probably the most useful thing to add to a JAR file's manifest is to identify the <strong class="source-inline">main</strong> class. This option names the class with a <strong class="source-inline">main()</strong> method that you would want to run from the JAR file. In essence, this creates an executable JAR file. </p>
			<p>An executable JAR file allows you to run the Java application inside the JAR file with a command such as this:</p>
			<p class="source-code">java -jar chapter6.jar</p>
			<p>To do this, you need to create an entry in the <strong class="source-inline">MANIFEST.MF</strong> file that defines the main class. For example, for the <strong class="source-inline">WeeklySteps</strong> Java class, you'd create an entry in the <strong class="source-inline">MANIFEST.MF</strong> file with the following:</p>
			<p class="source-code">Main-Class: com.packtpub.steps.WeeklySteps</p>
			<h2 id="_idParaDest-133"><a id="_idTextAnchor133"/>Exercise 4: Building an Executable JAR File</h2>
			<p>In this exercise, we'll add a Main-Class entry to the <strong class="source-inline">MANIFEST.MF</strong> file inside a JAR file:</p>
			<ol>
				<li value="1">Recreate the JAR file with the following command (all on one line):<p class="source-code">jar cvfe chapter6.jar com.packtpub.steps.WeeklySteps com/packtpub/steps/*.class</p><p>The <strong class="source-inline">e</strong> option defines an entry point, in other words, the Main-Class header. Since the JAR command-line options are dealt with in a sequential order, this means that you provide the JAR filename first, and then the name of the main class (the entry point). These options can easily be mixed up.</p><p>With this <strong class="source-inline">jar</strong> command, you'll see output like the following:</p><p class="source-code">added manifest</p><p class="source-code">adding: com/packtpub/steps/DailyGoal.class(in = 464) (out= 321)(deflated 30%)</p><p class="source-code">adding: com/packtpub/steps/Steps.class(in = 622) (out= 355)(deflated 42%)</p><p class="source-code">adding: com/packtpub/steps/WeeklySteps.class(in = 251) (out= 185)(deflated 26%)</p></li>
				<li>Now we can run our Java application from the JAR file:<p class="source-code">java -jar chapter6.jar</p><p>This command should generate the output shown in <em class="italic">Exercise 02</em>, <em class="italic">Creating a Package for a Fitness Tracking App</em>:</p><p class="source-code">Total steps: 92772</p><p class="source-code">YAY! MONDAY 11543</p><p class="source-code">YAY! TUESDAY 12112</p><p class="source-code">YAY! WEDNESDAY 10005</p><p class="source-code">YAY! THURSDAY 10011</p><p class="source-code">     FRIDAY 9000</p><p class="source-code">YAY! SATURDAY 20053 ***** BEST DAY!</p><p class="source-code">YAY! SUNDAY 20048</p><p class="callout-heading">Note</p><p class="callout">You can find out more about the jar command, as well as the other Java tools, at <a href="https://packt.live/2MYsN6N">https://packt.live/2MYsN6N</a>.</p></li>
			</ol>
			<p>Manually building a JAR file when you have a single package isn't that difficult. When you start to add more and more packages though, manually building JAR files and manipulating the contents becomes quite cumbersome. There are much easier ways to do this—most notably, by using a Java build tool that can aid in making JAR files.</p>
			<h2 id="_idParaDest-134"><a id="_idTextAnchor134"/>Build Tools</h2>
			<p>As applications become more and more complex, you'll find it essential to use a Java build tool. Build tools allow you to do the following:</p>
			<ul>
				<li>Build Java applications that span multiple packages.</li>
				<li>Make your builds easier to run and maintain.</li>
				<li>Make your builds consistent.</li>
				<li>Create a library or multiple libraries from your code.</li>
				<li>Download and include third-party libraries in your applications.</li>
			</ul>
			<p>These items just scratch the surface of what Java build tools can do for you.</p>
			<p>The two main Java build tools are as follows:</p>
			<ul>
				<li><strong class="bold">Maven</strong>, which issues XML configuration files</li>
				<li><strong class="bold">Gradle</strong>, which uses a Groovy-based, domain-specific language for configuration<p class="callout-heading">Note</p><p class="callout">Refer to <a href="https://packt.live/33Iqprj">https://packt.live/33Iqprj</a> for more on Maven, and <a href="https://packt.live/35PNREO">https://packt.live/35PNREO</a> for more on Gradle.</p></li>
			</ul>
			<h2 id="_idParaDest-135"><a id="_idTextAnchor135"/>Maven</h2>
			<p>Maven has very specific ideas about how your software projects should be structured. For example, Maven expects your source code to go into a folder named <strong class="source-inline">src</strong>. In general, it is best not to fight Maven's expectations.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Refer to <a href="https://packt.live/2nVNI1A">https://packt.live/2nVNI1A</a> for more on Maven's expectations about the directory structure for your projects. </p>
			<h2 id="_idParaDest-136"><a id="_idTextAnchor136"/>Exercise 5: Creating a Maven Project</h2>
			<p>IntelliJ provides some very handy features when working with Maven. We'll now use those features to create a Maven project:</p>
			<ol>
				<li value="1">In IntelliJ, go to the <strong class="source-inline">File</strong> menu, select <strong class="source-inline">New</strong>, and then <strong class="source-inline">Project…</strong>.</li>
				<li>In the <strong class="source-inline">New Project</strong> dialog, select <strong class="source-inline">Maven</strong>. Then, click <strong class="source-inline">Next</strong>, as shown in <em class="italic">Figure 6.2</em>:<div class="IMG---Figure" id="_idContainer055"><img alt="Figure 6.2: Selecting Maven when creating a Maven project&#13;&#10;" src="image/C13927_06_02.jpg"/></div><p class="figure-caption">Figure 6.2: Selecting Maven when creating a Maven project</p><p>On the next screen, you'll need to enter three values, as shown in <em class="italic">Figure 6.3</em>:</p><div class="IMG---Figure" id="_idContainer056"><img alt="Figure 6.3: Entering GroupId, ArtifactId, and Version&#13;&#10;" src="image/C13927_06_03.jpg"/></div><p class="figure-caption">Figure 6.3: Entering GroupId, ArtifactId, and Version</p></li>
				<li>For <strong class="source-inline">GroupId</strong>, enter <strong class="source-inline">com.packtpub.steps</strong>.<p><strong class="source-inline">GroupId</strong> in Maven identifies the overall project. Normally, you'll use the main package name for your work as <strong class="source-inline">GroupId</strong>.</p></li>
				<li>For <strong class="source-inline">ArtifactId</strong>, enter steps.<p><strong class="source-inline">ArtifactId</strong> is the name you want for any JAR file you create, without the version number. Maven will add the version information for you.</p></li>
				<li>Leave the <strong class="source-inline">Version</strong> as <strong class="source-inline">1.0-SNAPSHOT</strong>.<p class="callout-heading">Note</p><p class="callout">In Maven, SNAPSHOT versions represent work in progress. When you come to make a release, you'll normally remove the SNAPSHOT portion of the version information.</p></li>
				<li>Click <strong class="source-inline">Next</strong>.</li>
				<li>On the next screen, it will default the IntelliJ project name to steps (from <strong class="source-inline">ArtifactId</strong>). Select a project location on disk and then click <strong class="source-inline">Finish</strong>.</li>
			</ol>
			<p>You now have a Maven project.</p>
			<p>In the <strong class="source-inline">Project</strong> pane, note the directory structure created. You will find an <strong class="source-inline">src</strong> folder. This holds the project source code. Under <strong class="source-inline">src</strong>, you'll see folders called <strong class="source-inline">main</strong> and <strong class="source-inline">test</strong>. The <strong class="source-inline">main</strong> folder is where your Java source code resides. The <strong class="source-inline">test</strong> folder is where your unit tests reside. Unit tests are Java classes that test the main code.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Refer to <em class="italic">Chapter 18</em>, <em class="italic">Unit Testing</em>, for more information on unit tests.</p>
			<p>In both the main and test folders, you'll see folders named <strong class="source-inline">java</strong>. This indicates Java source code (as opposed to Groovy or Kotlin code, for example).</p>
			<p><em class="italic">Figure 6.4</em> shows the directory structure with the <strong class="source-inline">src/main/java</strong> and <strong class="source-inline">src/test/java</strong> folders:</p>
			<div>
				<div class="IMG---Figure" id="_idContainer057">
					<img alt="Figure 6.4: The src/main/java and src/test/java folders for a Maven project&#13;&#10;" src="image/C13927_06_04.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.4: The src/main/java and src/test/java folders for a Maven project</p>
			<p>When Maven builds your project, compiling the code and building JAR files, it incorporates the output of the build in a folder named target.</p>
			<p>You'll also see a file named <strong class="source-inline">pom.xml</strong>. Short for <strong class="bold">Project Object Model</strong>, <strong class="bold">POM</strong> provides Maven's configuration, which tells Maven what you want to build and how to do it. </p>
			<p>The default POM created by IntelliJ, <strong class="source-inline">pom.xml</strong>, has the following content:</p>
			<p class="source-code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</p>
			<p class="source-code">&lt;project </p>
			<p class="source-code">    </p>
			<p class="source-code">    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0       http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</p>
			<p class="source-code">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</p>
			<p class="source-code">    &lt;groupId&gt;com.packtpub.steps&lt;/groupId&gt;</p>
			<p class="source-code">    &lt;artifactId&gt;steps&lt;/artifactId&gt;</p>
			<p class="source-code">    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</p>
			<p class="source-code">&lt;/project&gt;</p>
			<p>You should see <strong class="source-inline">groupId</strong>, <strong class="source-inline">artifactId</strong>, and the version information you entered when creating the project in IntelliJ.</p>
			<h2 id="_idParaDest-137"><a id="_idTextAnchor137"/>Exercise 6: Adding Java Sources to the Maven Project</h2>
			<p>We'll now add the Java source to the Maven project as follows: </p>
			<ol>
				<li value="1">Start by going to the <strong class="source-inline">src/main/java</strong> folder.</li>
				<li>Right-click, select <strong class="source-inline">New</strong>, and then select <strong class="source-inline">Package</strong>.</li>
				<li>Enter <strong class="source-inline">com.packtpub.steps</strong> as the package name.</li>
				<li>Next, bring in the three source files from <strong class="source-inline">Exercise 02</strong>. You can copy the files from before.</li>
				<li>Copy <strong class="source-inline">Steps.java</strong>, <strong class="source-inline">DailyGoal.java</strong>, and <strong class="source-inline">WeeklySteps.java</strong> into this project.<p>Now, let's have a look at the three files. First, here's <strong class="source-inline">Steps.java</strong>:</p><p class="source-code-heading">Steps.java</p><p class="source-code">1  package com.packtpub.steps;</p><p class="source-code">2  </p><p class="source-code">3  import java.time.LocalDate;</p><p class="source-code">4  </p><p class="source-code">5  /**</p><p class="source-code">6  * Holds steps taken (so far) in a day.</p><p class="source-code">7  */</p><p class="source-code">8  public class Steps {</p><p class="source-code">9      private int steps;</p><p class="source-code">10    private LocalDate date;</p><p class="source-code-link"><a href="https://packt.live/2MVxFJO">https://packt.live/2MVxFJO</a></p><p>Here is <strong class="source-inline">DailyGoal.java</strong>:</p><p class="source-code">package com.packtpub.steps;</p><p class="source-code">public class DailyGoal {</p><p class="source-code">    int dailyGoal = 10000;</p><p class="source-code">    public DailyGoal(int dailyGoal) {</p><p class="source-code">        this.dailyGoal = dailyGoal;</p><p class="source-code">    }</p><p class="source-code">    public boolean hasMetGoal(Steps steps) {</p><p class="source-code">        if (steps.getSteps() &gt;= dailyGoal) {</p><p class="source-code">            return true;</p><p class="source-code">        }</p><p class="source-code">        return false;</p><p class="source-code">    }</p><p class="source-code">}</p><p>And here is <strong class="source-inline">WeeklySteps.java</strong>:</p><p class="source-code-heading">WeeklySteps.java</p><p class="source-code">1  package com.packtpub.steps;</p><p class="source-code">2  </p><p class="source-code">3  import java.time.DayOfWeek;</p><p class="source-code">4  import java.time.LocalDate;</p><p class="source-code">5  import java.util.ArrayList;</p><p class="source-code">6  import java.util.List;</p><p class="source-code">7  </p><p class="source-code">8  public class WeeklySteps {</p><p class="source-code">9      List&lt;Steps&gt; dailySteps = new ArrayList&lt;&gt;();</p><p class="source-code">10    DailyGoal dailyGoal;</p><p class="source-code-link"><a href="https://packt.live/32wiz3Q">https://packt.live/32wiz3Q</a></p></li>
				<li>Call up <strong class="source-inline">Steps.java</strong> in the IntelliJ editor window. <p>You'll notice that a number of errors appear in the project. This is because Maven does not default to using Java 12. The next step fixes this.</p></li>
				<li>Call up <strong class="source-inline">pom.xml</strong> in the IntelliJ editor window.</li>
				<li>Enter the following after <strong class="source-inline">groupId</strong>, <strong class="source-inline">artifactId</strong>, and <strong class="source-inline">version</strong>:<p class="source-code">&lt;groupId&gt;com.packtpub.steps&lt;/groupId&gt;</p><p class="source-code">&lt;artifactId&gt;steps&lt;/artifactId&gt;</p><p class="source-code">&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</p><p class="source-code">&lt;build&gt;</p><p class="source-code">    &lt;plugins&gt;</p><p class="source-code">        &lt;plugin&gt;</p><p class="source-code">            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</p><p class="source-code">            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</p><p class="source-code">            &lt;version&gt;3.6.1&lt;/version&gt;</p><p class="source-code">            &lt;configuration&gt;</p><p class="source-code">                &lt;source&gt;12&lt;/source&gt;</p><p class="source-code">                &lt;target&gt;12&lt;/target&gt;</p><p class="source-code">            &lt;/configuration&gt;</p><p class="source-code">        &lt;/plugin&gt;</p><p class="source-code">    &lt;/plugins&gt;</p><p class="source-code">&lt;/build&gt;</p><p>As you enter this configuration, notice how IntelliJ offers to help you type in the XML elements.</p></li>
				<li>When you finish, IntelliJ will display an alert that Maven projects need to be imported. Click on <strong class="source-inline">Import Changes</strong>.<p>The red error lines for <strong class="source-inline">Steps</strong> and <strong class="source-inline">WeeklySteps</strong> should disappear.</p></li>
			</ol>
			<p>You should now be able to build your project. This is covered in <em class="italic">Exercise 07, Building the Maven Project.</em></p>
			<h2 id="_idParaDest-138"><a id="_idTextAnchor138"/>Exercise 7: Building the Maven Project</h2>
			<p>Now that we have added the Java sources, we will build the Maven project.</p>
			<ol>
				<li value="1">First, go to the <strong class="source-inline">steps</strong> project, and then click on the <strong class="source-inline">Maven</strong> tab near the top-right corner of the IntelliJ window.</li>
				<li>Expand the <strong class="source-inline">steps</strong> project.</li>
				<li>Expand <strong class="source-inline">Lifecycle</strong>.<p>You will now see a list of Maven goals, as shown in <em class="italic">Figure 6.5</em>:</p><div class="IMG---Figure" id="_idContainer058"><img alt="Figure 6.5: IntelliJ's Maven pane&#13;&#10;" src="image/C13927_06_05.jpg"/></div><p class="figure-caption">Figure 6.5: IntelliJ's Maven pane</p></li>
				<li>Double-click on package. In the <strong class="source-inline">Run</strong> pane, you will see a lot of output. Maven is a very verbose tool by default. The project is now built.</li>
				<li>Look in the target directory. You will see the output of the build. </li>
			</ol>
			<p>Maven creates a JAR file named steps-<strong class="source-inline">1.0-SNAPSHOT.jar</strong>. This holds all the compiled <strong class="source-inline">.class</strong> files.</p>
			<p>The Maven-created JAR file is not an executable JAR, though. <em class="italic">Exercise 08</em>, <em class="italic">Creating an Executable JAR with Maven</em> will show you how to configure Maven to create an executable JAR.</p>
			<h2 id="_idParaDest-139"><a id="_idTextAnchor139"/>Exercise 8: Creating an Executable JAR with Maven</h2>
			<p>In this exercise, we will create an executable JAR with Maven.</p>
			<ol>
				<li value="1">In the <strong class="source-inline">Steps</strong> project, call up <strong class="source-inline">pom.xml</strong> in the IntelliJ editor window.</li>
				<li>Enter the following after the <strong class="source-inline">&lt;plugin&gt;</strong> section for the Maven compiler plugin:<p class="source-code-heading">pom.xml</p><p class="source-code">24 &lt;plugin&gt;</p><p class="source-code">25     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</p><p class="source-code">26     &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;</p><p class="source-code">27     &lt;executions&gt;</p><p class="source-code">28         &lt;execution&gt;</p><p class="source-code">29             &lt;goals&gt;</p><p class="source-code">30                 &lt;goal&gt;shade&lt;/goal&gt;</p><p class="source-code">31             &lt;/goals&gt;</p><p class="source-code">32             &lt;configuration&gt; </p><p class="source-code">33                 &lt;transformers&gt;</p><p class="source-code">34                     &lt;transformer implementation=</p><p class="source-code">35                         "org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"&gt;</p><p class="source-code-link"><a href="https://packt.live/33KFUPs">https://packt.live/33KFUPs</a></p><p>This configuration brings in the Maven shade plugin, which provides one of the main ways to create an executable JAR. The shade plugin will also create a JAR with all the necessary dependencies, such as third-party libraries, which makes this Maven plugin pretty handy.</p></li>
				<li>Run the package goal in the <strong class="source-inline">Maven</strong> pane.<p>You will see a lot more output.</p></li>
				<li>Switch to the <strong class="source-inline">Terminal</strong> pane.</li>
				<li>Change to the <strong class="source-inline">target</strong> directory:<p class="source-code">cd target</p></li>
				<li>Run the executable JAR:<p class="source-code">java -jar steps-1.0-SNAPSHOT.jar</p><p>You will see output such as the following:</p><p class="source-code">Total steps: 92772</p><p class="source-code">YAY! MONDAY 11543</p><p class="source-code">YAY! TUESDAY 12112</p><p class="source-code">YAY! WEDNESDAY 10005</p><p class="source-code">YAY! THURSDAY 10011</p><p class="source-code">     FRIDAY 9000</p><p class="source-code">YAY! SATURDAY 20053 ***** BEST DAY!</p><p class="source-code">YAY! SUNDAY 20048</p></li>
			</ol>
			<p>There is a lot more to Maven. This exercise has just touched the surface of this build tool.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Refer to <a href="https://packt.live/33Iqprj">https://packt.live/33Iqprj</a> for a number of tutorials on Maven.</p>
			<h2 id="_idParaDest-140"><a id="_idTextAnchor140"/>Using Gradle</h2>
			<p>While Maven can do a lot for you, it is often inflexible and confusing, especially for larger projects. Trying to solve those problems led to the creation of Gradle. For example, in Maven, each POM file builds one thing, such as a JAR file. With Gradle, you can perform additional tasks with the same build file (Gradle's equivalent of a POM file).</p>
			<p>Gradle is a lot more flexible than Maven, and generally—but not always—easier to understand.</p>
			<h2 id="_idParaDest-141"><a id="_idTextAnchor141"/>Exercise 9: Creating a Gradle Project</h2>
			<p>In this exercise, we will create a Gradle project.</p>
			<ol>
				<li value="1">First, go to IntelliJ, and, in the <strong class="source-inline">File</strong> menu, select <strong class="source-inline">New</strong> and then <strong class="source-inline">Project</strong>.</li>
				<li>Select <strong class="source-inline">Gradle</strong> and, in the right-hand pane, leave Java checked, as shown in <em class="italic">Figure 6.6</em>:<div class="IMG---Figure" id="_idContainer059"><img alt="Figure 6.6: Selecting Gradle when creating a new project&#13;&#10;" src="image/C13927_06_06.jpg"/></div><p class="figure-caption">Figure 6.6: Selecting Gradle when creating a new project</p></li>
				<li>Click <strong class="source-inline">Next</strong>. Enter <strong class="source-inline">GroupId</strong>, <strong class="source-inline">ArtifactId</strong>, and <strong class="source-inline">Version</strong>, much like you did for the Maven project, as shown in <em class="italic">Figure 6.7</em>:<div class="IMG---Figure" id="_idContainer060"><img alt="Figure 6.7: Entering GroupId, ArtifactId, and Version&#13;&#10;" src="image/C13927_06_07.jpg"/></div><p class="figure-caption">Figure 6.7: Entering GroupId, ArtifactId, and Version</p></li>
				<li>Enter <strong class="source-inline">com.packtpub.steps</strong> for <strong class="source-inline">GroupId</strong>.</li>
				<li>Enter <strong class="source-inline">steps-gradle</strong> for <strong class="source-inline">ArtifactId</strong>.</li>
				<li>Leave the version information at <strong class="source-inline">1.0-SNAPSHOT</strong>.<p>Note that Gradle uses the same mechanism as Maven for identifying dependencies.</p></li>
				<li>Click <strong class="source-inline">Next</strong>.</li>
				<li>Leave all the default options. Create a separate module for each source set, and use the default gradle wrapper.</li>
				<li>Click <strong class="source-inline">Next</strong>.</li>
				<li>On the next screen, it will default the IntelliJ project name to steps-gradle (from <strong class="source-inline">ArtifactId</strong>). Select a project location on disk and then click <strong class="source-inline">Finish</strong>.<p>IntelliJ will build things for a bit, and then you can look at the new project directory.</p></li>
			</ol>
			<p>IntelliJ creates Gradle projects along very similar lines to Maven projects. You will see the same <strong class="source-inline">main</strong> and <strong class="source-inline">test</strong> folders inside <strong class="source-inline">src</strong>, for example.</p>
			<p>You'll also see two new files:</p>
			<ul>
				<li><strong class="source-inline">build.gradle</strong> provides the main configuration file for Gradle.</li>
				<li><strong class="source-inline">settings.gradle</strong> contains some additional settings.</li>
			</ul>
			<p>The <strong class="source-inline">build.gradle</strong> file generated by IntelliJ holds the following configuration:</p>
			<p class="source-code">plugins {</p>
			<p class="source-code">    id 'java'</p>
			<p class="source-code">}</p>
			<p class="source-code">group 'com.packtpub.steps'</p>
			<p class="source-code">version '1.0-SNAPSHOT'</p>
			<p class="source-code">sourceCompatibility = 1.8</p>
			<p class="source-code">repositories {</p>
			<p class="source-code">    mavenCentral()</p>
			<p class="source-code">}</p>
			<p class="source-code">dependencies {</p>
			<p class="source-code">    testCompile group: 'junit', name: 'junit', version: '4.12'</p>
			<p class="source-code">}</p>
			<h2 id="_idParaDest-142"><a id="_idTextAnchor142"/>Exercise 10: Building an Executable JAR with Gradle</h2>
			<p>In this exercise, we'll add the same three Java classes as used in the Maven example, and then configure the <strong class="source-inline">build.gradle</strong> file to create an executable JAR file. We'll work in the <strong class="source-inline">steps-gradle</strong> project created in the previous exercise.</p>
			<ol>
				<li value="1">In the <strong class="source-inline">steps-gradle</strong> project, go to the <strong class="source-inline">src/main/java</strong> folder.</li>
				<li>Right-click, and select <strong class="source-inline">New</strong> and then <strong class="source-inline">Package</strong>.</li>
				<li>Enter <strong class="source-inline">com.packtpub.steps</strong> as the package name.</li>
				<li>Next, bring in the three source files from <strong class="source-inline">Exercise 02</strong>. You can copy the files from before.</li>
				<li>Call up the <strong class="source-inline">build.gradle</strong> file in the IntelliJ text editor.</li>
				<li>Set <strong class="source-inline">sourceCompatibility</strong> to 12:<p class="source-code">sourceCompatibility = 12</p></li>
				<li>Add the following section at the end of the <strong class="source-inline">build.gradle</strong> file:<p class="source-code">jar { </p><p class="source-code">    manifest { </p><p class="source-code">        attributes 'Main-Class': 'com.packtpub.steps.WeeklySteps' </p><p class="source-code">    } </p><p class="source-code">}</p></li>
				<li>Click on the <strong class="source-inline">Gradle</strong> tab near the top-right corner of the IntelliJ window.</li>
				<li>Expand the <strong class="source-inline">steps-gradle</strong> project, then <strong class="source-inline">Tasks</strong>, and then <strong class="source-inline">build</strong>.</li>
				<li>Double-click on <strong class="source-inline">ASSEMBLE</strong> to build the project.<p>You'll see that Gradle outputs much less text than Maven. When it's done, you'll see a build directory. This is similar to the target directory used by Maven. The Java <strong class="source-inline">.class</strong> files and JAR files are placed in the build directory.</p></li>
				<li>Switch to the <strong class="source-inline">Terminal</strong> pane.</li>
				<li>Change to the <strong class="source-inline">build/libs</strong> directory:<p class="source-code">cd build</p><p class="source-code">cd libs</p></li>
				<li>Run the executable JAR:<p class="source-code">java -jar steps-gradle-1.0-SNAPSHOT.jar</p><p>You should see the same output as before.</p></li>
			</ol>
			<p>As with Maven, there are a lot more things you can do with Gradle.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can read more about Gradle at <a href="https://packt.live/2P3Hjg2">https://packt.live/2P3Hjg2</a>. You can find more on how Gradle handles Java projects at <a href="https://packt.live/2Mv5CBZ">https://packt.live/2Mv5CBZ</a>.</p>
			<h2 id="_idParaDest-143"><a id="_idTextAnchor143"/>Using Third-Party Libraries</h2>
			<p>One of the best things about developing with Java is the thousands of open source third-party libraries available. A third-party library is a group of ready-made packages that you can use in your own programs. This means you can implement specific functionality without having to code it from scratch. </p>
			<p>Everything from the Spring Boot framework to logging libraries and simple utilities can be found online. And, to make things easier, both the Maven and Gradle build tools support the downloading of third-party libraries and the incorporation of these libraries into your project.</p>
			<h2 id="_idParaDest-144"><a id="_idTextAnchor144"/>Finding the Libraries</h2>
			<p>There is a huge set of third-party libraries available for Java. To see a description of some, a good starting point is <a href="https://packt.live/2qnRAcx">https://packt.live/2qnRAcx</a>, which lists many Java libraries and frameworks.</p>
			<p>The <strong class="source-inline">Spring</strong>, <strong class="source-inline">Hibernate</strong>, <strong class="source-inline">Apache</strong>, <strong class="source-inline">Eclipse</strong>, and <strong class="source-inline">BouncyCastle</strong> projects provide a huge number of libraries. They can all be found at the link mentioned previously, and are good places to search for whatever functionality you're looking for.</p>
			<p>Before selecting an open source library, you will want to take a look at the following topics:</p>
			<ul>
				<li><strong class="bold">Documentation</strong> – Good documentation not only helps you learn how to use the library, but acts as a good indicator for the maturity of the library. Can you understand how to use the library? If not, this library is probably not for you.</li>
				<li><strong class="bold">Community</strong> – An active community shows that the library is being used. It also provides a glimpse into how the library's maintainers treat people who ask questions. Look for mailing lists and discussion groups about the library.</li>
				<li><strong class="bold">Momentum</strong> – Check to see how often the library gets updates. You'll want to choose libraries that are under active development.</li>
				<li><strong class="bold">Does it work for you</strong>? – Always try each library to see that it actually works for your project and that you can understand how to use the library.</li>
				<li><strong class="bold">License</strong> – Can you legally use this library? Make sure first. Refer to <a href="https://packt.live/2MTZfqD">https://packt.live/2MTZfqD</a> for a listing of the most common open source licenses. Read the license and see whether this will work for your organization. If the license looks too weird or restrictive, avoid the library.<p class="callout-heading">Note</p><p class="callout">Always look at the license for any open source library to make sure your organization can legally use the library in the manner you want to use it.</p></li>
			</ul>
			<p>Once you find a library that looks promising, the next step is to import the library into your application.</p>
			<h2 id="_idParaDest-145"><a id="_idTextAnchor145"/>Adding a Project Dependency</h2>
			<p>A third-party library that you include in your project is called a dependency. Think of this as meaning your project now depends on this library. Both Maven and Gradle identify dependencies similarly. You'll need the following:</p>
			<ul>
				<li>GroupId</li>
				<li>ArtifactId</li>
				<li>Version information</li>
				<li>A repository where the build tool can download the library</li>
			</ul>
			<p>The most commonly used third-party open source libraries can be downloaded from a large repository called <strong class="source-inline">Maven Central</strong>, located at <a href="https://packt.live/2pvXmZs">https://packt.live/2pvXmZs</a>.</p>
			<p>You can search for the group, artifact, and version information on a handy site located at <a href="https://packt.live/33UlfZF">https://packt.live/33UlfZF</a>.</p>
			<p>A good, useful open source library is <strong class="source-inline">Apache Commons Lang</strong>, which contains handy classes for working with strings and numbers.</p>
			<h2 id="_idParaDest-146"><a id="_idTextAnchor146"/>Exercise 11: Adding a Third-Party Library Dependency</h2>
			<p>In this exercise, we'll add the Apache Commons Lang library to the Gradle project created in <em class="italic">Exercises 09 and 10</em> previously. In these exercises, we'll add just one to simplify the entire setup. </p>
			<p>In large, complex projects, you will often see a lot of dependencies. The concepts used here apply when you start adding more dependencies:</p>
			<ol>
				<li value="1">Search on <a href="https://packt.live/33UlfZF">https://packt.live/33UlfZF</a> for Apache Commons Lang. You should find the page on this library at <a href="https://packt.live/33JnQ8n">https://packt.live/33JnQ8n</a>. </li>
				<li>Look for the latest released version. At the time of writing, the version is 3.8.1.<p>Notice how many releases there are. This library seems to be under active development.</p></li>
				<li>Click on the <strong class="source-inline">3.8.1</strong> link.</li>
				<li>Look at the license information. The Apache license is compatible with most organizations.<p>On this page, you will see a set of tabs for different Java build tools, with the Maven tab selected by default. Inside the tab, you'll see the group, artifact, and version information in the format used in a Maven POM file.</p></li>
				<li>Click on the <strong class="source-inline">Gradle</strong> tab to see the same information formatted for Gradle, as shown in <em class="italic">Figure 6.8</em>:<div class="IMG---Figure" id="_idContainer061"><img alt="" src="image/C13927_06_08.jpg"/></div><p class="figure-caption">Figure 6.8: Using the Gradle tab to see the Gradle dependency information</p></li>
				<li>Copy this text and add it to the dependencies block in your <strong class="source-inline">build.gradle</strong> file.</li>
				<li>Change the word <em class="italic">compile</em> to <em class="italic">implementation</em>:<p class="source-code">implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.8.1'</p><p>The compile dependency in Gradle is replaced by the implementation dependency in more recent versions of Gradle.</p></li>
				<li>In the IntelliJ alert that states that Gradle projects need to be imported, click <strong class="source-inline">Import Changes</strong>.<p>We now have the library in the project. We next need to do two things. First, we need to configure Gradle to build an executable JAR with all the dependencies. Second, we need to use the new dependency—the new library—in our code.</p><p>The next step is to add the Gradle shadow plugin to the project. This plugin combines your code in a project (along with any third-party libraries and other dependencies) into a single JAR file that holds everything needed. </p><p class="callout-heading">Note</p><p class="callout">You can find more information on the Gradle shadow plugin at <a href="https://packt.live/33Irb7H">https://packt.live/33Irb7H</a> and <a href="https://packt.live/31qGIYs">https://packt.live/31qGIYs</a>.</p></li>
				<li>Call up <strong class="source-inline">build.gradle</strong> in the IntelliJ text editor.</li>
				<li>Replace the <strong class="source-inline">plugins</strong> block with the following:<p class="source-code">buildscript {</p><p class="source-code">    repositories {</p><p class="source-code">        jcenter()</p><p class="source-code">    }</p><p class="source-code">    dependencies {</p><p class="source-code">        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.1'</p><p class="source-code">    }</p><p class="source-code">}</p><p class="source-code">apply plugin: 'java'</p><p class="source-code">apply plugin: 'com.github.johnrengelman.shadow' </p><p>This tells Gradle to bring the shadow plugin into our project.</p></li>
				<li>Go to the Gradle pane in IntelliJ. Click the <strong class="source-inline">Refresh</strong> icon (the two circular arrows). </li>
				<li>Expand the new shadow tasks.</li>
				<li>Double-click on <strong class="source-inline">shadowJar</strong>.<p>This will build a new JAR file, <strong class="source-inline">steps-gradle-1.0-SNAPSHOT-all.jar</strong>, that contains the project code, along with all the dependencies. Notice that the format is artifact Id – version – <strong class="source-inline">all.jar</strong>.</p></li>
				<li>Switch to the <strong class="source-inline">Terminal</strong> pane.</li>
				<li>Enter the following commands:<p class="source-code">cd build</p><p class="source-code">cd libs</p><p class="source-code">java -jar steps-gradle-1.0-SNAPSHOT-all.jar</p><p>You will then see the output of the <strong class="source-inline">Steps</strong> application.</p></li>
			</ol>
			<p>In this exercise, we have added a third-party dependency library. Next, we'll use the new library in the application.</p>
			<h2 id="_idParaDest-147"><a id="_idTextAnchor147"/>Using the Apache Commons Lang Library</h2>
			<p>When using a new library, it is usually good to start with a look at the documentation. For a Java utility library, Javadoc is a good first place to start.</p>
			<p>For the Apache Commons Lang library, you can find the Javadoc at <a href="https://packt.live/32wkrJR">https://packt.live/32wkrJR</a>. Open the first package, <strong class="source-inline">org.apache.commons.lang3</strong>. </p>
			<p>In this package, you'll find a really handy set of utility classes, including the excellent <strong class="source-inline">StringUtils</strong> class. <strong class="source-inline">StringUtils</strong> provides a number of methods for working with strings. And, better yet, the methods are null safe, so if you pass in a null string, your code won't throw an exception.</p>
			<p>Open the <strong class="source-inline">StringUtils</strong> Javadoc. You will see a lot of good documentation relating to this class.</p>
			<h2 id="_idParaDest-148"><a id="_idTextAnchor148"/>Exercise 12: Using the Apache Commons Lang Library</h2>
			<p>In this exercise, we'll use two methods of the handy <strong class="source-inline">StringUtils</strong> class, <strong class="source-inline">leftPad()</strong> and <strong class="source-inline">rightPad()</strong>. These methods ensure that a string has a certain length by padding space characters on the left or right.</p>
			<p>We'll use these methods to make the <strong class="source-inline">Steps</strong> application output look a bit better:</p>
			<ol>
				<li value="1">In IntelliJ, call up the <strong class="source-inline">WeeklySteps</strong> class into the text editor.</li>
				<li>Scroll down to the <strong class="source-inline">format()</strong> method.</li>
				<li>Replace that method with the following code:<p class="source-code">public String format() {</p><p class="source-code">    StringBuilder builder = new StringBuilder();</p><p class="source-code">    builder.append("Total steps: " + getTotalSteps() + "\n");</p><p class="source-code">    for<a id="_idTextAnchor149"/> (Steps steps : dailySteps) {</p><p class="source-code">        if (dailyGoal.hasMetGoal(steps)) {</p><p class="source-code">            builder.append("YAY! ");</p><p class="source-code">        } else {</p><p class="source-code">            builder.append("     ");</p><p class="source-code">        }</p><p class="source-code">        String day = steps.getDate().getDayOfWeek().toString();</p><p class="source-code">        builder.append( StringUtils.rightPad(day, 11) );</p><p class="source-code">        builder.append(" ");</p><p class="source-code">        String stp = Integer.toString(steps.getSteps());</p><p class="source-code">        builder.append( StringUtils.leftPad( stp, 6 ) );</p><p class="source-code">        DayOfWeek best = bestDay();</p><p class="source-code">        if (steps.getDate().getDayOfWeek() == best) {</p><p class="source-code">            builder.append(" ***** BEST DAY!");</p><p class="source-code">        }</p><p class="source-code">        builder.append("\n");</p><p class="source-code">    }</p><p class="source-code">    return builder.toString();</p><p class="source-code">}</p><p>This code pads out the days of the week to a consistent length. It does the same to the daily steps count.</p></li>
				<li>Run the <strong class="source-inline">shadowJar</strong> build task again from the Gradle pane.</li>
				<li>In the Terminal pane, in the <strong class="source-inline">build/libs</strong> directory, run the following command:<p class="source-code">java -jar steps-gradle-1.0-SNAPSHOT-all.jar </p><p>You will see output that is now better aligned:</p><p class="source-code">Total steps: 92772</p><p class="source-code">YAY! MONDAY       11543</p><p class="source-code">YAY! TUESDAY      12112</p><p class="source-code">YAY! WEDNESDAY    10005</p><p class="source-code">YAY! THURSDAY     10011</p><p class="source-code">     FRIDAY        9000</p><p class="source-code">YAY! SATURDAY     20053 ***** BEST DAY!</p><p class="source-code">YAY! SUNDAY       20048</p></li>
			</ol>
			<p>Just about every Java project you work on will require more than one dependency.</p>
			<h2 id="_idParaDest-149"><a id="_idTextAnchor150"/>Using Modules</h2>
			<p>Java packages allow you to gather together related classes (and other types). You can then bundle a number of packages into a JAR file, creating a library you can use.</p>
			<p>Modules go a step further and allow you encapsulate your libraries efficiently. This means you can declare which of a module's public classes (and other types) can be accessed outside the module.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Java version 9 and higher supports modules called the <strong class="bold">Java Platform Module System</strong>, or <strong class="bold">JPMS</strong>.</p>
			<p>In addition, modules can declare explicit dependencies on other modules. This helps clean up the mess of Java classpaths. Instead of searching the classpath for classes, a module will search directly for a named dependent module. This really helps when you bring in a lot of dependencies. With a large Java application, some libraries may depend on different versions of the same libraries, causing all sorts of problems. Instead, each module allows you to isolate its dependencies from the rest of the application.</p>
			<p>Modules look in what is called a module path. The module path just lists modules, not classes.</p>
			<p>Within a module, packages in a module can be exported. If a package in a module is not exported, then no other module can use that package.</p>
			<p>A module that wants to use code from another module must indicate that it requires the other module. Inside a module, your code can only make use of packages that are exported in the dependent module.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">When you start using modules, you'll want to convert each Java library you create into one or more modules. You can only have one module per JAR file.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The original project that created Java's module system was called PROJECT JIGSAW. Refer to <a href="https://packt.live/32yH1le">https://packt.live/32yH1le</a> for more on modules. A big part of the effort was to add modules to the <strong class="bold">Java Development Kit</strong>, or <strong class="bold">JDK</strong>. This allows you to create smaller JDKs aimed at mobile platforms, for example.</p>
			<p>To see all the modules that make up the JDK, use the java command.</p>
			<p>From the IntelliJ Terminal pane, run the following command:</p>
			<p class="source-code">java --list-modules</p>
			<p>You will see a lot of modules in the output (shortened here):</p>
			<p class="source-code">java.base@11.0.2</p>
			<p class="source-code">java.compiler@11.0.2</p>
			<p class="source-code">java.datatransfer@11.0.2</p>
			<p class="source-code">java.desktop@11.0.2</p>
			<p class="source-code">java.instrument@11.0.2</p>
			<p class="source-code">java.logging@11.0.2</p>
			<p class="source-code">java.management@11.0.2</p>
			<p class="source-code">java.management.rmi@11.0.2</p>
			<p class="source-code">java.naming@11.0.2</p>
			<p class="source-code">java.net.http@11.0.2</p>
			<p class="source-code">…</p>
			<p class="source-code">jdk.hotspot.agent@11.0.2</p>
			<p class="source-code">jdk.httpserver@11.0.2</p>
			<p class="source-code">jdk.internal.ed@11.0.2</p>
			<p>The modules with names starting with java are classes that we consider part of the JDK, that is, classes you can use in your Java code. Modules with names starting with jdk are modules that are required internally by the JDK. You should not use those classes.</p>
			<h2 id="_idParaDest-150"><a id="_idTextAnchor151"/>Creating Modules</h2>
			<p>A module groups together a set of Java packages and additional resources (files). Each module requires a <strong class="source-inline">module-info.java</strong> file, which specifies what the module exports as well as what other modules are required.</p>
			<h2 id="_idParaDest-151"><a id="_idTextAnchor152"/>Exercise 13: Creating a Project for a Module</h2>
			<p>In this exercise, we'll create an IntelliJ project that we can use to explore Java modules and then create a Java module inside the project:</p>
			<ol>
				<li value="1">From the <strong class="source-inline">File</strong> menu, select <strong class="source-inline">New</strong> and then <strong class="source-inline">Project…</strong>.</li>
				<li>Select a <strong class="source-inline">Java</strong> project and click <strong class="source-inline">Next</strong>, as shown in <em class="italic">Figure 6.9</em>:<div class="IMG---Figure" id="_idContainer062"><img alt="" src="image/C13927_06_09.jpg"/></div><p class="figure-caption">Figure 6.9: Selecting a Java project</p></li>
				<li>Do not specify a project template. Click <strong class="source-inline">Next</strong>, as shown in <em class="italic">Figure 6.10</em>:<div class="IMG---Figure" id="_idContainer063"><img alt="" src="image/C13927_06_10.jpg"/></div><p class="figure-caption">Figure 6.10: Do not select a project template</p></li>
				<li>Name the project modules.</li>
				<li>Click <strong class="source-inline">Finish</strong>. You now have an empty Java project. The next step will be to create a very simple module.</li>
				<li>From the <strong class="source-inline">File</strong> menu, select <strong class="source-inline">New</strong> and then <strong class="source-inline">Module…</strong>.</li>
				<li>Make sure Java is selected. Click <strong class="source-inline">Next</strong>.</li>
				<li>Enter <strong class="source-inline">com.packtpub.day.module</strong> for the module name. Make sure that the content root and the file location both show <strong class="source-inline">com.packtpub.day.module</strong> under the modules folder.</li>
				<li>Click <strong class="source-inline">Finish</strong>. You now have a module.<p>It can be confusing at first that the module name, <strong class="source-inline">com.packtpub.day.module</strong>, gets created as a single directory. </p><p class="callout-heading">Note</p><p class="callout">Normally, with packages, each dot in the name indicates a separate subfolder. With modules, you get a folder name with dots.</p><p>IntelliJ has created a folder named <strong class="source-inline">com.packtpub.day</strong>.module in the project, and also an <strong class="source-inline">src</strong> folder under <strong class="source-inline">com.packtpub.day.module</strong>.</p></li>
				<li>Right-click on the <strong class="source-inline">src</strong> folder under <strong class="source-inline">com.packtpub.day</strong> module.</li>
				<li>Select <strong class="source-inline">New</strong> and then <strong class="source-inline">Package</strong>.</li>
				<li>Enter <strong class="source-inline">com.packtpub.day</strong> as the name of the package.</li>
				<li>Right-click on the new package, <strong class="source-inline">com.packtpub.day</strong>, select <strong class="source-inline">New</strong>, and then <strong class="source-inline">Java class</strong>. Name the class <strong class="source-inline">Today</strong>.</li>
				<li>In the text editor window, add a method to the new class:<p class="source-code">public String getToday() {</p><p class="source-code">    return LocalDate.now().getDayOfWeek().toString();</p><p class="source-code">}</p><p>This method returns the day of the week for the current day as a string.</p></li>
				<li>Right-click on the package <strong class="source-inline">com.packtpub.day</strong>, select <strong class="source-inline">New</strong>, and then select <strong class="source-inline">module-info.java</strong>.</li>
				<li>In the text editor, add the following <strong class="source-inline">exports</strong> line inside the <strong class="source-inline">module</strong> block:<p class="source-code">module com.packtpub.day.module {</p><p class="source-code">    exports com.packtpub.day;</p><p class="source-code">}</p><p><strong class="source-inline">com.packtpub.day</strong> module exports one package, <strong class="source-inline">com.packtpub.day</strong>. Anything else added to this module will be hidden.</p></li>
			</ol>
			<p>Now that we have a module, the next step is to use this module in another module. This will show how modules can control what classes get exported for use by other modules, and what classes remain private within the module. The modules exist side by side, but both need to be included in your project's module path—the module equivalent of Java's classpath.</p>
			<h2 id="_idParaDest-152"><a id="_idTextAnchor153"/>Exercise 14: Creating a Second Module Using the First One</h2>
			<p>Next, we'll create a second very simple module that uses the <strong class="source-inline">com.packtpub.day</strong> module created previously.</p>
			<ol>
				<li value="1">From the <strong class="source-inline">File</strong> menu, select <strong class="source-inline">New</strong> and then <strong class="source-inline">Module…</strong>.</li>
				<li>Make sure Java is selected, and then click <strong class="source-inline">Next</strong>.</li>
				<li>Name this module <strong class="source-inline">com.packtpub.message.module</strong>.</li>
				<li>Click <strong class="source-inline">Finish</strong>.</li>
				<li>Right-click on the <strong class="source-inline">src</strong> folder under <strong class="source-inline">com.packtpub.message</strong> module.</li>
				<li>Select <strong class="source-inline">New</strong> and then <strong class="source-inline">Package</strong>.</li>
				<li>Name the <strong class="source-inline">package com.packtpub.message</strong> and click <strong class="source-inline">OK</strong>.</li>
				<li>Right-click on the <strong class="source-inline">com.packtpub.message</strong> package. Select <strong class="source-inline">New</strong> and <strong class="source-inline">module-info.java</strong>.</li>
				<li>Right-click on the <strong class="source-inline">com.packtpub.message</strong> package. Select <strong class="source-inline">New</strong> and <strong class="source-inline">Java Class</strong>.</li>
				<li>Name the class <strong class="source-inline">Message</strong>.</li>
				<li>In the text editor, edit the <strong class="source-inline">Message</strong> class and import the <strong class="source-inline">Today</strong> class:<p class="source-code">import com.packtpub.day.Today;</p></li>
				<li>Also in the text editor, create a <strong class="source-inline">main()</strong> method as follows:<p class="source-code">public static void main(String[] args) {</p><p class="source-code">    Today today = new Today();</p><p class="source-code">    System.out.println("Today is " + today.getToday());</p><p class="source-code">}</p></li>
				<li>Edit the <strong class="source-inline">module-info.java</strong> file in the <strong class="source-inline">com.packtpub.message.module</strong> module. Add the following <strong class="source-inline">requires</strong> statement:<p class="source-code">module com.packtpub.message.module {</p><p class="source-code">    requires com.packtpub.day.module;</p><p class="source-code">}</p><p>The <strong class="source-inline">requires</strong> statement will show an error. We need to add the <strong class="source-inline">com.packtpub.day.module</strong> module as a dependency within the IntelliJ project. </p></li>
				<li>From the <strong class="source-inline">File</strong> menu, select <strong class="source-inline">Project Structure</strong>.</li>
				<li>Click on <strong class="source-inline">Modules</strong>.</li>
				<li>Select <strong class="source-inline">message.module</strong> under <strong class="source-inline">com.packtpub</strong>.</li>
				<li>Click the <strong class="source-inline">Dependencies</strong> tab.</li>
				<li>Click the <strong class="source-inline">+</strong> icon at the bottom of the dialog window and select <strong class="source-inline">Module Dependency…</strong>.</li>
				<li>Select com.<strong class="source-inline">packtpub.day.module</strong> and click <strong class="source-inline">OK</strong>.<p>You should see the new module dependency added, as shown in Figure 6.11.</p></li>
				<li>Click <strong class="source-inline">OK</strong> in the previous dialog. The error should no longer be present.</li>
				<li>In the <strong class="source-inline">Message</strong> class, click the green arrow to the left of the class definition, and select <strong class="source-inline">Run 'Message.main()'</strong>.<p>You will see output like this:</p><p class="source-code">Today is THURSDAY</p></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer064">
					<img alt="Figure 6.11: The IntelliJ project structure dialog showing the new module dependency on the com.packtpub.day.module module&#13;&#10;" src="image/C13927_06_11.jpg"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.11: The IntelliJ project structure dialog showing the new module dependency on the com.packtpub.day.module module</p>
			<h2 id="_idParaDest-153"><a id="_idTextAnchor154"/>Activity 1: Tracking Summer High Temperatures</h2>
			<p>Studies on changing climate have determined what summer high temperatures will be like in the year 2100.</p>
			<p>You can see this information for many world cities at <a href="https://packt.live/33IrCyR">https://packt.live/33IrCyR</a>.</p>
			<p>Create an application to display how high summer temperatures are projected to be in the year 2100 with no major emission cuts, or with moderate emission cuts.</p>
			<p>To do this, follow these steps:</p>
			<ol>
				<li value="1">Create a new Gradle project in IntelliJ.</li>
				<li>Bring in the Guava third-party library as a dependency. Refer to <a href="https://packt.live/2qkLutt">https://packt.live/2qkLutt</a> for more on Guava.</li>
				<li>Create a class named <strong class="source-inline">City</strong> that holds the name of a city, the name of the country where the city is located, and its summer high temperature. Remember that IntelliJ can generate getter and setter methods for you.</li>
				<li>Create a class named <strong class="source-inline">SummerHigh</strong> that holds a base city, along with the city that most closely matches the 2100 summer projections if no emission cuts are made, and the city that matches the 2100 summer projections if moderate emission cuts are made (based on data from Climate Central). </li>
				<li>Create a class named <strong class="source-inline">SummerHighs</strong> to hold the overall data store. This class should have methods to retrieve the data by city name (regardless of case) or country name (regardless of case).</li>
				<li>Use a Guava Table to hold the underlying <strong class="source-inline">SummerHigh</strong> data, using a Table like this:<p class="source-code">Table&lt;String String, SummerHigh&gt; data = HashBasedTable.create();</p></li>
				<li>Create a <strong class="source-inline">Main</strong> class that takes in either a city or a country name, looks up the appropriate data, and then prints it out. Use a command-line parameter of <strong class="source-inline">-city</strong> for a city lookup and <strong class="source-inline">-country</strong> for a country lookup.<p>The entire code base for the project should be incorporated in an executable JAR. Run this JAR from the IntelliJ Terminal pane.</p><p>You should be able to run this JAR similarly to the following:</p><p class="source-code">java -jar temps-1.0-all.jar  -city London</p><p>You should generate output like the following:</p><p class="source-code">In 2100, London, United Kingdom 20.4 C will be like</p><p class="source-code">   Milan, Italy 25.2 C with no emissions cuts,</p><p class="source-code">   Paris, France 22.7 C with moderate emissions cuts</p></li>
				<li>Add a temperature converter class that can output the temperatures in degrees Fahrenheit instead of Celsius.</li>
				<li>Add a <strong class="source-inline">-f</strong> command-line option that tells the application to return temperatures in degrees Fahrenheit.</li>
				<li>Create a class called <strong class="source-inline">TempConverter</strong> to perform the conversion.</li>
				<li>Use the following formula to convert the unit of temperature:<p class="source-code">double degreesF = (degreesC * 9/5) + 32</p><p>You should then be able to run the application:</p><p class="source-code">java -jar temps-1.0-all.jar  -city London -f</p><p>You should then see the temperature output in degrees Fahrenheit. Here's an example:</p><p class="source-code">In 2100, London, United Kingdom 68.72 F will be like</p><p class="source-code">   Milan, Italy 77.36 F with no emissions cuts,</p><p class="source-code">   Paris, France 72.86 F with moderate emissions cuts</p><p class="callout-heading">Note</p><p class="callout">Refer to <a href="https://packt.live/2pvYxbk">https://packt.live/2pvYxbk</a> for more information on the <strong class="source-inline">Table</strong> class. <strong class="bold">Hint:</strong> look at the <strong class="source-inline">row()</strong> and <strong class="source-inline">column()</strong> methods. We use this class to allow lookups by city or country.</p></li>
			</ol>
			<p><strong class="bold">Summertime High Temperatures</strong></p>
			<p>Here are some selected cities from the Climate Central map. Each city is listed with its summertime high temperature. Feel free to include these cities in your program. You can add more cities from Climate Central if you like.</p>
			<p><strong class="bold">London, United Kingdom, 20.4 °C</strong>:</p>
			<ul>
				<li>Will be like Paris, France, 22.7 °C, with moderate emission cuts.</li>
				<li>Will be like Milan, Italy, 25.2 °C, with no emission cuts.</li>
			</ul>
			<p><strong class="bold">Stockholm, Sweden, 19.3 °C</strong>:</p>
			<ul>
				<li>Will be like Vilnius, Lithuania, 21.7 °C, with moderate emission cuts.</li>
				<li>Will be like Kiev, Ukraine, 24.2 °C, with no emission cuts.</li>
			</ul>
			<p><strong class="bold">Barcelona, Spain, 25.7 °C</strong>:</p>
			<ul>
				<li>Will be like Madrid, Spain, 28.9 °C, with moderate emission cuts.</li>
				<li>Will be like Izmir, Turkey, 32.2 °C, with no emission cuts.</li>
			</ul>
			<p><strong class="bold">New York, US, 27.7 °C</strong>:</p>
			<ul>
				<li>Will be like Belize City, Belize, 31.3 °C, with moderate emission cuts.</li>
				<li>Will be like Juarez, Mexico, 34.4 °C, with no emission cuts.</li>
			</ul>
			<p><strong class="bold">Tokyo, Japan, 26.2 °C</strong>:</p>
			<ul>
				<li>Will be like Beijing, China, 29.0 °C, with moderate emission cuts.</li>
				<li>Will be like Wuhan, China, 31.2 °C, with no emission cuts.<p class="callout-heading">Note</p><p class="callout">The solution to this activity can be found on page 542.</p></li>
			</ul>
			<h1 id="_idParaDest-154"><a id="_idTextAnchor155"/>Summary</h1>
			<p>In this chapter, we saw how packages allow you to better organize your code, which becomes essential when working on large projects. When you use classes from another package, you need to import these classes into your code.</p>
			<p>When you create your own packages, place your code into packages based on the purpose of the code and name these packages based on your organization's internet domain name. For example, you might create packages called <strong class="source-inline">com.packtpub.medical.report</strong> and <strong class="source-inline">com.packtpub.medical.heartrate</strong>.</p>
			<p>You will often incorporate your Java code into a JAR file. A JAR file is like a compiled library of Java code. Executable JAR files contain the name of a Java class with a <strong class="source-inline">main()</strong> method that you can run with the <strong class="source-inline">java-jar</strong> command.</p>
			<p>Java build tools such as Maven or Gradle help a lot when working on large projects. These two build tools also support downloading and using third-party open source Java libraries—libraries that are used in just about every large Java project.</p>
			<p>Modules form a newer way to separate code. In the next chapter, we shall cover relational databases and using Java with databases.</p>
		</div>
	</body></html>