<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Rising to the Cloud – Java EE, Containers, and Cloud Computing</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre8">This chapter covers the following recipes:</span></p>
<ul class="calibre13">
<li class="calibre14">Building Java EE containers using Docker</li>
<li class="calibre14">Using Oracle Cloud for container orchestration in the cloud</li>
<li class="calibre14">Using Jelastic for container orchestration in the cloud</li>
<li class="calibre14">Using OpenShift for container orchestration in the cloud</li>
<li class="calibre14">Using AWS for container orchestration in the cloud</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">There are two things that have happened in the computer industry that have changed it for good—<strong class="calibre7">cloud computing</strong> and <strong class="calibre7">containers</strong>. Cloud computing came first and changed the way to look at infrastructure, the way to consume software, and the way to grow many businesses. Now, computation is a commodity.</p>
<p class="mce-root">Containers change and are changing the way we build and deliver software. They are also the essential glue for DevOps and the way to take CI/CD to another level.</p>
<p class="mce-root">Put them together and you will have one of the most powerful environments in IT. But can Java EE take advantage of it? Of course! If an application server is an abstraction of Java EE applications, containers are an abstraction of the server, and once you have them built in a standard such as Docker, you have the power to use such tools to manage an application server.</p>
<p class="mce-root">This chapter will show you how to put your Java EE application inside a container and how to deliver this container with some of the best providers we have today.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Building Java EE containers using Docker</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Since day one, Java EE has been based on containers. If you doubt it, just have a look at this diagram:</p>
<div class="cdpaligncenter"><img src="Images/75c65e0a-4eb7-41b4-bc1d-11ee5da34b4e.png" class="calibre29"/></div>
<div class="cdpaligncenter1">Java EE architecture: https://docs.oracle.com/javaee/6/tutorial/doc/bnacj.html</div>
<p class="mce-root">It belongs to Oracle's official documentation for Java EE 6 and, actually, has been much the same architecture since the times of Sun.</p>
<p class="mce-root">If you pay attention, you will notice that there are different containers: a web container, an EJB container, and an application client container. In this architecture, it means that the applications developed with those APIs will rely on many features and services provided by the container.</p>
<p class="mce-root">When we take the Java EE application server and put it inside a Docker container, we are doing the same thing— it is relying on some of the features and services provided by the Docker environment.</p>
<p class="mce-root">This recipe will show you how to deliver a Java EE application in a container bundle, which is called an <strong class="calibre7">appliance</strong>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">First, of course, you need the Docker platform installed in your environment. There are plenty of options, so I suggest you go the following link and get more details:</p>
<p class="mce-root"><a href="https://docs.docker.com/install/" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://docs.docker.com/install/</a></p>
<p class="mce-root">And if you are not familiar with Docker commands, I recommend you have a look at this beautiful cheat sheet:</p>
<p class="mce-root"><a href="https://zeroturnaround.com/rebellabs/docker-commands-and-best-practices-cheat-sheet/" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://zeroturnaround.com/rebellabs/docker-commands-and-best-practices-cheat-sheet/</a></p>
<p class="mce-root">You'll also need to create an account at Docker Hub so you can store your own images. Check it out: <a href="https://hub.docker.com/" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://hub.docker.com/</a>.</p>
<p class="mce-root">It's free for public images.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">To build your Java EE container, you'll first need a Docker image. To build it, you'll need a Dockerfile such as this:</p>
<pre class="calibre21">FROM openjdk:8-jdk<br class="calibre2"/><br class="calibre2"/>ENV GLASSFISH_HOME /usr/local/glassfish<br class="calibre2"/>ENV PATH ${GLASSFISH_HOME}/bin:$PATH<br class="calibre2"/>ENV GLASSFISH_PKG latest-glassfish.zip<br class="calibre2"/>ENV GLASSFISH_URL https://download.oracle.com/glassfish/5.0/nightly/latest-glassfish.zip<br class="calibre2"/><br class="calibre2"/>RUN mkdir -p ${GLASSFISH_HOME}<br class="calibre2"/><br class="calibre2"/>WORKDIR ${GLASSFISH_HOME}<br class="calibre2"/><br class="calibre2"/>RUN set -x \<br class="calibre2"/>  &amp;&amp; curl -fSL ${GLASSFISH_URL} -o ${GLASSFISH_PKG} \<br class="calibre2"/>    &amp;&amp; unzip -o $GLASSFISH_PKG \<br class="calibre2"/>    &amp;&amp; rm -f $GLASSFISH_PKG \<br class="calibre2"/>  &amp;&amp; mv glassfish5/* ${GLASSFISH_HOME} \<br class="calibre2"/>  &amp;&amp; rm -Rf glassfish5<br class="calibre2"/><br class="calibre2"/>RUN addgroup glassfish_grp \<br class="calibre2"/>    &amp;&amp; adduser --system glassfish \<br class="calibre2"/>    &amp;&amp; usermod -G glassfish_grp glassfish \<br class="calibre2"/>    &amp;&amp; chown -R glassfish:glassfish_grp ${GLASSFISH_HOME} \<br class="calibre2"/>    &amp;&amp; chmod -R 777 ${GLASSFISH_HOME}<br class="calibre2"/><br class="calibre2"/>COPY docker-entrypoint.sh /<br class="calibre2"/>RUN chmod +x /docker-entrypoint.sh<br class="calibre2"/><br class="calibre2"/>USER glassfish<br class="calibre2"/><br class="calibre2"/>ENTRYPOINT ["/docker-entrypoint.sh"]<br class="calibre2"/><br class="calibre2"/>EXPOSE 4848 8080 8181<br class="calibre2"/>CMD ["asadmin", "start-domain", "-v"]</pre>
<p class="mce-root">This image will be our base image from which we will construct other images in this chapter. Now we need to build it:</p>
<pre class="calibre21"><strong class="calibre3">docker build -t eldermoraes/gf-javaee-jdk8 .</strong></pre>
<p class="mce-root">Go ahead and push it to your Docker Registry at Docker Hub:</p>
<pre class="calibre21"><strong class="calibre3">docker push eldermoraes/gf-javaee-jdk8</strong></pre>
<p class="mce-root">Now you can create another image by customizing the previous one, and then put your app on it:</p>
<pre class="calibre21"><strong class="calibre3">FROM eldermoraes/gf-javaee-jdk8</strong><br class="calibre2"/><br class="calibre2"/><strong class="calibre3">ENV DEPLOYMENT_DIR ${GLASSFISH_HOME}/glassfish/domains/domain1/autodeploy/</strong><br class="calibre2"/><br class="calibre2"/><strong class="calibre3">COPY app.war ${DEPLOYMENT_DIR}</strong></pre>
<p class="mce-root">In the same folder, we have a Java EE application file (<kbd class="calibre16">app.war</kbd>) that will be deployed inside the container. Check the <em class="calibre17">See also</em> section to download all the files.</p>
<p class="mce-root">Once you save your Dockerfile, you can build your image:</p>
<pre class="calibre21"><strong class="calibre3">docker build -t eldermoraes/gf-javaee-cookbook .</strong></pre>
<p class="mce-root">Now you can create the container:</p>
<pre class="calibre21"><strong class="calibre3">docker run -d --name gf-javaee-cookbook \</strong><br class="calibre2"/><strong class="calibre3">    -h gf-javaee-cookbook \</strong><br class="calibre2"/><strong class="calibre3">    -p 80:8080 \</strong><br class="calibre2"/><strong class="calibre3">    -p 4848:4848 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8686:8686 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8009:8009 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8181:8181 \</strong><br class="calibre2"/><strong class="calibre3">    eldermoraes/gf-javaee-cookbook</strong></pre>
<p class="mce-root">Wait a few seconds and open this URL in your browser:</p>
<p class="mce-root"><kbd class="calibre16">http://localhost/app</kbd></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Let's understand our first Dockerfile:</p>
<pre class="calibre21"><strong class="calibre3">FROM openjdk:8-jdk</strong></pre>
<p class="mce-root"><span class="calibre8">This <kbd class="calibre16">FROM</kbd> keyword will ask Docker to pull the <kbd class="calibre16">openjdk:8-jdk</kbd> image, but what does it mean?</span></p>
<p class="mce-root">It means that there's a registry somewhere where your Docker will find prebuilt images. If there's no image registry in your local environment, it will search for it in Docker Hub, the official and public Docker registry in the cloud.</p>
<p class="mce-root">And when you say that you are using a pre-built image, it means that you don't need to build, in our case, the whole Linux container from scratch. There's already a template that you can rely on:</p>
<pre class="calibre21"><strong class="calibre3">ENV GLASSFISH_HOME /usr/local/glassfish</strong><br class="calibre2"/><strong class="calibre3">ENV PATH ${GLASSFISH_HOME}/bin:$PATH</strong><br class="calibre2"/><strong class="calibre3">ENV GLASSFISH_PKG latest-glassfish.zip</strong><br class="calibre2"/><strong class="calibre3">ENV GLASSFISH_URL https://download.oracle.com/glassfish/5.0/nightly/latest-glassfish.zip</strong><br class="calibre2"/><br class="calibre2"/><strong class="calibre3">RUN mkdir -p ${GLASSFISH_HOME}</strong><br class="calibre2"/><br class="calibre2"/><strong class="calibre3">WORKDIR ${GLASSFISH_HOME}</strong></pre>
<p class="mce-root">Here are just some environment variables to help with the coding.</p>
<pre class="calibre21"><strong class="calibre3">RUN set -x \</strong><br class="calibre2"/><strong class="calibre3">  &amp;&amp; curl -fSL ${GLASSFISH_URL} -o ${GLASSFISH_PKG} \</strong><br class="calibre2"/><strong class="calibre3">    &amp;&amp; unzip -o $GLASSFISH_PKG \</strong><br class="calibre2"/><strong class="calibre3">    &amp;&amp; rm -f $GLASSFISH_PKG \</strong><br class="calibre2"/><strong class="calibre3">  &amp;&amp; mv glassfish5/* ${GLASSFISH_HOME} \</strong><br class="calibre2"/><strong class="calibre3">  &amp;&amp; rm -Rf glassfish5</strong></pre>
<p class="mce-root">The <kbd class="calibre16">RUN</kbd> clause in Dockerfiles execute some bash commands inside the container when it has been created. Basically, what is happening here is that GlassFish is being downloaded and then prepared in the container:</p>
<pre class="calibre21"><strong class="calibre3">RUN addgroup glassfish_grp \</strong><br class="calibre2"/><strong class="calibre3">    &amp;&amp; adduser --system glassfish \</strong><br class="calibre2"/><strong class="calibre3">    &amp;&amp; usermod -G glassfish_grp glassfish \</strong><br class="calibre2"/><strong class="calibre3">    &amp;&amp; chown -R glassfish:glassfish_grp ${GLASSFISH_HOME} \</strong><br class="calibre2"/><strong class="calibre3">    &amp;&amp; chmod -R 777 ${GLASSFISH_HOME}</strong></pre>
<p class="mce-root">For safety, we define the user that will hold the permissions for GlassFish files and processes:</p>
<pre class="calibre21"><strong class="calibre3">COPY docker-entrypoint.sh /</strong><br class="calibre2"/><strong class="calibre3">RUN chmod +x /docker-entrypoint.sh</strong></pre>
<p class="mce-root">Here we are including a bash script inside the container to perform some GlassFish administrative tasks:</p>
<pre class="calibre21">#!/bin/bash<br class="calibre2"/><br class="calibre2"/>if [[ -z $ADMIN_PASSWORD ]]; then<br class="calibre2"/>  ADMIN_PASSWORD=$(date| md5sum | fold -w 8 | head -n 1)<br class="calibre2"/>  echo "##########GENERATED ADMIN PASSWORD: $ADMIN_PASSWORD<br class="calibre2"/>  ##########"<br class="calibre2"/>fi<br class="calibre2"/><br class="calibre2"/>echo "AS_ADMIN_PASSWORD=" &gt; /tmp/glassfishpwd<br class="calibre2"/>echo "AS_ADMIN_NEWPASSWORD=${ADMIN_PASSWORD}" &gt;&gt; /tmp/glassfishpwd<br class="calibre2"/><br class="calibre2"/>asadmin --user=admin --passwordfile=/tmp/glassfishpwd change-admin-password --domain_name domain1<br class="calibre2"/>asadmin start-domain<br class="calibre2"/><br class="calibre2"/>echo "AS_ADMIN_PASSWORD=${ADMIN_PASSWORD}" &gt; /tmp/glassfishpwd<br class="calibre2"/><br class="calibre2"/>asadmin --user=admin --passwordfile=/tmp/glassfishpwd enable-secure-admin<br class="calibre2"/>asadmin --user=admin stop-domain<br class="calibre2"/>rm /tmp/glassfishpwd<br class="calibre2"/><br class="calibre2"/>exec "$@"</pre>
<p class="mce-root">After copying the bash file into the container, we go to the final block:</p>
<pre class="calibre21">USER glassfish<br class="calibre2"/><br class="calibre2"/>ENTRYPOINT ["/docker-entrypoint.sh"]<br class="calibre2"/><br class="calibre2"/>EXPOSE 4848 8080 8181<br class="calibre2"/>CMD ["asadmin", "start-domain", "-v"]</pre>
<p class="mce-root">The <kbd class="calibre16">USER</kbd> clause defines the user that will be used from this point in the file. It's great because from there, all the tasks will be done by the <kbd class="calibre16">glassfish</kbd> user.</p>
<p class="mce-root">The <kbd class="calibre16">ENTRYPOINT</kbd> clause will execute the <kbd class="calibre16">docker-entrypoint.sh</kbd> script.</p>
<p class="mce-root">The <kbd class="calibre16">EXPOSE</kbd> clause will define the ports that will be available for containers that use this image.</p>
<p class="mce-root">And finally, the <kbd class="calibre16">CMD</kbd> clause will call the GlassFish script that will initialize the container.</p>
<p class="mce-root">Now let's understand our second Dockerfile:</p>
<pre class="calibre21"><strong class="calibre3">FROM eldermoraes/gf-javaee-jdk8</strong></pre>
<p class="mce-root">We need to take into account the same considerations about the prebuilt image, but now the image was made by you. Congratulations!</p>
<pre class="calibre21"><strong class="calibre3">ENV DEPLOYMENT_DIR ${GLASSFISH_HOME}/glassfish/domains/domain1/autodeploy/</strong></pre>
<p class="mce-root">Here, we are building an environment variable to help with the deployment. It's done in the same way as for Linux systems:</p>
<pre class="calibre21"><strong class="calibre3">COPY app.war ${DEPLOYMENT_DIR}</strong></pre>
<p class="mce-root">This <kbd class="calibre16">COPY</kbd> command will literally copy the <kbd class="calibre16">app.war</kbd> file to the folder defined in the <kbd class="calibre16">DEPLOYMENT_DIR</kbd> environment variable.</p>
<p class="mce-root">From here, you are ready to build an image and create a container. The image builder is self-explanatory:</p>
<pre class="calibre21"><strong class="calibre3">docker build -t eldermoraes/gf-javaee-cookbook .</strong></pre>
<p class="mce-root">Let's check the <kbd class="calibre16">docker run</kbd> command:</p>
<pre class="calibre21"><strong class="calibre3">docker run -d --name gf-javaee-cookbook \</strong><br class="calibre2"/><strong class="calibre3">    -h gf-javaee-cookbook \</strong><br class="calibre2"/><strong class="calibre3">    -p 80:8080 \</strong><br class="calibre2"/><strong class="calibre3">    -p 4848:4848 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8686:8686 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8009:8009 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8181:8181 \</strong><br class="calibre2"/><strong class="calibre3">    eldermoraes/gf-javaee-cookbook</strong></pre>
<p class="mce-root">If we break it down, this is what the various elements of the command mean:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre16">-h</kbd>: Defines the host name of the container.</li>
<li class="calibre14"><kbd class="calibre16">-p</kbd>: Defines which ports will be exposed and how it will be done. It is useful, for example, when more than one container is using the same port by default—you just use them differently.</li>
<li class="calibre14"><kbd class="calibre16">eldermoraes/gf-javaee-cookbook</kbd>: The reference to the image you just built.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article class="calibre2">
                
<ul class="calibre13">
<li class="calibre14">The source code and files used in this recipe are at <a href="https://github.com/eldermoraes/javaee8-cookbook/tree/master/chapter11/ch11-docker" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://github.com/eldermoraes/javaee8-cookbook/tree/master/chapter11/ch11-docker</a>.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using Oracle Cloud for container orchestration in the cloud</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The best way to use containers in the cloud is by using a provider. Why? Because they can provide a good infrastructure and a nice service for a small price.</p>
<p class="mce-root">This recipe will show you how to get the container created in the first recipe of this chapter and deliver it using Oracle Cloud.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">If you don't have an account with Oracle Cloud you can register for a trial at <a href="https://cloud.oracle.com/tryit" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://cloud.oracle.com/tryit</a>.</p>
<p class="mce-root">That's all you need, beyond having created the Docker image in the first recipe of this chapter.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<ol class="calibre19">
<li class="chapter">After logging in to the platform, you will see this dashboard:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/228152d8-3c64-49e3-bd88-b285baf6ba95.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Oracle Cloud dashboard</div>
<ol start="2" class="calibre19">
<li class="chapter">Scroll down the page until you find <span class="calibre5">Oracle Cloud Infrastructure - Container Service</span> and click on it:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone2" src="Images/26384752-6510-48e9-8ff2-50f7f6b70e48.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Container Service Access</div>
<ol start="3" class="calibre19">
<li class="chapter">On the main page of the container service (the following screenshot), click on the <span class="calibre5"><span class="calibre5">My Services URL</span> </span>link :</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/d9d2699b-d36d-4e40-a883-76486a5a0c8b.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Container Service Overview page</div>
<ol start="4" class="calibre19">
<li class="chapter">You will get to the <span class="calibre5">Cloud Services</span> dashboard. Click on <span class="calibre5">Container Classic</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone2" src="Images/50b2ad95-7047-40dc-a49e-7b08a90697f2.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Cloud Services Dashboard</div>
<ol start="5" class="calibre19">
<li class="chapter">On the page that opens, click on the <span class="calibre5">Open Service Console</span> button:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/d25654b5-071d-48f3-aa1c-7eeaa701d5bd.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Service Console Access</div>
<ol start="6" class="calibre19">
<li class="chapter">On the next page, click on the <span class="calibre5">Create Instance</span> button:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/609a7b22-6314-4cb4-aabd-326166f7d7df.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Container Cloud Service welcome page</div>
<ol start="7" class="calibre19">
<li class="chapter">Fill in the form like this:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/08f56395-ef9a-4fd3-be12-fcb4f4a4f260.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Fields for instance creation</div>
<div class="packt_infobox">In the <span class="calibre5">SSH Public Key</span> field, you need to set a valid public key that has a private pair. Without it, you will not be able to log in to the service using SSH. </div>
<p class="calibre26"><span class="calibre8"><span class="calibre8">Click on <span class="calibre8">Next</span>.</span></span></p>
<ol start="8" class="calibre19">
<li class="chapter">On the page that opens, confirm your data and click on the <span class="calibre5">Create</span> button:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone2" src="Images/860cffaa-fb25-4296-8f2f-c69f34232d10.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Data confirmation</div>
<ol start="9" class="calibre19">
<li class="chapter">Then you'll be back to the main page while the service is created (note the <span class="calibre5">Creating service...</span> label):</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone3" src="Images/05411a89-de1f-4987-8c07-8dfe0afc7d49.png" width="1440" height="838"/></div>
<div class="cdpaligncenter1">New service being created</div>
<ol start="10" class="calibre19">
<li class="chapter">Once the service is created, click on the <span class="calibre5">Options</span> button and click on <span class="calibre5">Container Console</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone2" src="Images/e6a18614-6ee0-474a-8c96-6e8e30d8b4b8.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Access to the Container Console</div>
<p class="calibre23">You are now in the dashboard of the service you have just created:</p>
<div class="cdpaligncenter"><img class="alignnone4" src="Images/ebfacede-59e1-41c8-8e38-f4928769c045.png" width="1440" height="751"/></div>
<div class="cdpaligncenter1">Container Cloud Service dashboard</div>
<ol start="11" class="calibre19">
<li class="chapter">Click on <span class="calibre5">Services</span> (left side) and then <span class="calibre5">New Service</span> (right side):</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/8f0ddbd0-a930-481a-a07f-0da0b5ba6874.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Services page</div>
<ol start="12" class="calibre19">
<li class="chapter">In the popup, give a name to the service (the <span class="calibre5">Service Name</span> field), and in the <span class="calibre5">Image</span> field you need to fill in the details of the pre-built <span class="calibre5">image</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone5" src="Images/fe89d645-a961-42ba-8e42-2a5088fdd054.png" width="1439" height="818"/></div>
<div class="cdpaligncenter1">Fields for service creation</div>
<ol start="13" class="calibre19">
<li class="chapter">In the <span class="calibre5">Available Options</span> field, check the <span class="calibre5">Ports</span> option. It will open the <span class="calibre5">Ports</span> section under <span class="calibre5">Environment Variables</span>. Click on the <span class="calibre5">Add</span> button and fill in the form in the popup like this:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone6" src="Images/f6442c72-125f-4f55-83cf-12cb96c5b245.png" width="1440" height="817"/></div>
<div class="cdpaligncenter1">Ports forwarding</div>
<ol start="14" class="calibre19">
<li class="chapter">Now your service is on this list. Click on its <span class="calibre5">Deploy</span> button:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone7" src="Images/b2189347-228b-4018-bdc3-e51269ed20a9.png" width="1440" height="832"/></div>
<div class="cdpaligncenter1">Services list</div>
<ol start="15" class="calibre19">
<li class="chapter">In the popup, fill in the form as shown in the screenshot and click on <span class="calibre5">Deploy</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone7" src="Images/92dd3df2-c791-43cc-8f19-682ceff638fd.png" width="1440" height="832"/></div>
<div class="cdpaligncenter1">Popup for service deployment</div>
<ol start="16" class="calibre19">
<li class="chapter">Now, just wait a moment until your new service is up and running:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone8" src="Images/5a3482c6-fab8-4f1d-904b-c9ee0366bdbb.png" width="1440" height="669"/></div>
<div class="cdpaligncenter1">Ongoing deployment</div>
<ol start="17" class="calibre19">
<li class="chapter">Once your deployment is done, it will become green and you will have information about the container you have created. Click on the link under the <span class="calibre5">Container Name</span> label:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone9" src="Images/fbc4027a-d269-465f-b649-6dba6960e4c6.png" width="1440" height="690"/></div>
<div class="cdpaligncenter1">Deployment done</div>
<p class="calibre23">You now will see details about your container:</p>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/88aac31b-804a-4cb1-8725-f896914f0dc6.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Container details</div>
<ol start="18" class="calibre19">
<li class="chapter">Click on the tab labeled <span class="calibre5">Environment Variables</span> and find a variable called <span class="calibre5">OCCS_HOSTIPS</span>. On the same line there's an IP in the <span class="calibre5">public_ip</span> label. Copy it:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone10" src="Images/6d86c4fb-3195-4e2e-8d88-346b5959e34e.png" width="1118" height="838"/></div>
<div class="cdpaligncenter1">Environment variable for the container</div>
<p class="calibre23">Use it to navigate to <kbd class="calibre16"><span class="calibre5">http://[public_ip]:8080/app</span></kbd><span class="calibre8">:</span></p>
<div class="cdpaligncenter"><img class="alignnone11" src="Images/7fe72716-013a-47a3-a359-57f7f383b900.png" width="1440" height="408"/></div>
<div class="cdpaligncenter1">Test page for our application</div>
<p class="mce-root">If you can see the preceding image, you've made it! Now your container is orchestrated in the cloud using Oracle Cloud.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The reason why it's so simple is that you are using a platform that was designed to make it simple. So, all the heavy lifting that you'd have to do in your own infrastructure is done by the platform.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The reason why you should use a provider to orchestrate your containers in the cloud is not only because of the ease of creating services, but also because the platform will take care of keeping it up and running.</p>
<p class="mce-root">So, if your container goes wrong and needs to be stopped, restarted, or even killed and recreated, the platform will do it automatically.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using Jelastic for container orchestration in the cloud</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The best way to use containers in the cloud is by using a provider. Why? Because they can provide you a good infrastructure and a nice service for a small price.</p>
<p class="mce-root">This recipe will show you how to get the container created in the first recipe of this chapter and deliver it using Jelastic.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">If you don't have an account with Jelastic, you can sign for a free trial at <a href="https://jelastic.com/" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://jelastic.com/</a>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<ol class="calibre19">
<li class="chapter">After logging into the platform you will get to this main page:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone12" src="Images/302510b6-df5d-4034-917d-55c810647e0c.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Jelastic main page</div>
<ol start="2" class="calibre19">
<li class="chapter">First things first. Click on the <span class="calibre5">Settings</span> button (top right). It will open the <span class="calibre5">Account settings</span> section (bottom left):</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/b2e5d3cb-bcf3-45cc-a0f7-b01932b7eb50.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Account settings</div>
<ol start="3" class="calibre19">
<li class="chapter"><span class="calibre5">Click on <span class="calibre5">Public</span> inside <span class="calibre5">SSH Keychain</span> and upload your public SSH key:</span></li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/96734ee4-184b-4774-87c1-9089f8bf755d.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">SSH Public Key information</div>
<ol start="4" class="calibre19">
<li class="chapter">Make sure your SSH key is really uploaded, otherwise you will not be able to log into the platform using SSH:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/f2d365f9-7b15-4c9e-a08f-c6b2f8150734.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">SSH confirmation</div>
<ol start="5" class="calibre19">
<li class="chapter">At the top of the page, click on the <span class="calibre5">Marketplace</span> button. Go on to the <span class="calibre5">Other</span> section and select <span class="calibre5">Docker Engine CE</span>. Click on <span class="calibre5">Install</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/8532dacd-b294-40c7-be3e-3b8727ddcb33.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Marketplace popup</div>
<ol start="6" class="calibre19">
<li class="chapter">Give this environment a name and click on <span class="calibre5">Install</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/7c17ebbd-b819-466f-95be-9dcf37e54b41.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Docker Engine CE configuration popup</div>
<p class="calibre23">Wait until it's done:</p>
<div class="cdpaligncenter"><img class="alignnone13" src="Images/930cb813-5858-4933-9158-20b8f4d7cf72.png" width="1440" height="837"/></div>
<div class="cdpaligncenter1">Installation status</div>
<ol start="7" class="calibre19">
<li class="chapter">Once it's finished, it will show a popup with the command you'll have to use to log in to the platform. Copy it:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/c3c3a2fc-a519-4bac-b504-6f20b74e8ba8.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Install confirmation and commands for connection</div>
<ol start="8" class="calibre19">
<li class="chapter">Open a Terminal in your machine and paste the copied command:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone14" src="Images/904c954f-30f9-4fbd-bf89-29988a6952ab.png" width="1130" height="450"/></div>
<div class="cdpaligncenter1">Command execution on terminal</div>
<p class="calibre23">At the end of the output of the console window, there is the command:</p>
<pre class="mce-root2"><strong class="calibre3">docker-machine env [environment-name]</strong></pre>
<p class="calibre23">The output will be like this:</p>
<div class="cdpaligncenter"><img class="alignnone15" src="Images/5cb3c8b4-7b21-482f-b1e6-64f60ee04164.png" width="920" height="294"/></div>
<div class="cdpaligncenter1">Environment variables output</div>
<ol start="9" class="calibre19">
<li class="chapter">Now, you can just run your command to create a container:</li>
</ol>
<pre class="mce-root2"><strong class="calibre3">docker run -d --name gf-javaee-cookbook \</strong><br class="calibre2"/><strong class="calibre3">    -h gf-javaee-cookbook \</strong><br class="calibre2"/><strong class="calibre3">    -p 80:8080 \</strong><br class="calibre2"/><strong class="calibre3">    -p 4848:4848 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8686:8686 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8009:8009 \</strong><br class="calibre2"/><strong class="calibre3">    -p 8181:8181 \</strong><br class="calibre2"/><strong class="calibre3">    eldermoraes/gf-javaee-cookbook</strong></pre>
<p class="calibre23">Check the output:</p>
<div class="cdpaligncenter"><img class="alignnone16" src="Images/d82697bb-a569-4106-b5cf-eb8ff8c27d60.png" width="1440" height="856"/></div>
<div class="cdpaligncenter1">Container log output</div>
<p class="mce-root">It's quite the same as if you were running in your own local machine, but you are actually running on the Jelastic platform.</p>
<p class="mce-root">Now, if you go back to the main page you will see your environment up and running:</p>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/6433d7a0-1811-4c8f-8721-a176661bef14.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Main page with the node created</div>
<p class="mce-root">Under the <span class="calibre8">Docker Engine CE</span> label there's the URL of your environment. Just click on it and add <kbd class="calibre16">/app</kbd> to the end:</p>
<div class="cdpaligncenter"><img class="alignnone17" src="Images/58dacf77-831b-4f47-828c-5bd9fafad82d.png" width="1440" height="455"/></div>
<div class="cdpaligncenter1"><span class="calibre5">Test page for our application</span></div>
<p class="mce-root">If you can see this page, congratulations! Your application is deployed on Jelastic.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre8">The reason why it's so simple is because you are using a platform that's designed to make it simple. So all the heavy lifting that you'd need to do it in your own infrastructure is done by the platform.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The reason why you should use a provider to orchestrate your containers in the cloud is not only regarding the ease of creating services, but also because the platform will take care of keeping it up and running.</p>
<p class="mce-root">So if your container goes wrong and needs to be stopped, restarted, or even killed and recreated, the platform will do it automatically.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using OpenShift for container orchestration in the cloud</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The best way to use containers in the cloud is by using a provider. Why? Because they can provide you a good infrastructure and a nice service for a small price.</p>
<p class="mce-root">This recipe will show you how to get the container created in the first recipe of this chapter and deliver it using OpenShift.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">If you don't have an account with OpenShift you can sign up for a free trial. Visit <a href="https://www.openshift.com/" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://www.openshift.com/</a> and click on <span class="calibre8">Sign up for free</span>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<ol class="calibre19">
<li class="chapter">After logging in to the platform, you will see this main page:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone18" src="Images/368f4560-4ed3-4fe7-b6a6-f7b8432b22d0.png" width="1440" height="876"/></div>
<div class="cdpaligncenter1">Openshift main page</div>
<ol start="2" class="calibre19">
<li class="chapter">Click on the <span class="calibre5">Create Project</span> button and fill in the blanks. Click on <span class="calibre5">Create</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone19" src="Images/4c2f74c8-5f75-42f0-b1ac-29ccaac48b67.png" width="1440" height="874"/></div>
<div class="cdpaligncenter1">Filling fields for a new project</div>
<ol start="3" class="calibre19">
<li class="chapter">Once your project is created, click on it:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone20" src="Images/4142630c-5181-428a-8f9d-517b4d6bf178.png" width="1440" height="873"/></div>
<div class="cdpaligncenter1">Access for the new project</div>
<ol start="4" class="calibre19">
<li class="chapter">On the opened page, click on <span class="calibre5">Add to Project</span> (top right) and then <span class="calibre5">Deploy Image</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone21" src="Images/2140a434-7132-44d2-9da2-871ef7b62813.png" width="1440" height="658"/></div>
<div class="cdpaligncenter1">Project main page</div>
<ol start="5" class="calibre19">
<li class="chapter">In the popup select <span class="calibre5">Image Name</span>, fill in the form with our pre-built image (<kbd class="calibre16">eldermoraes/gf-javaee-cookbook</kbd>) and click on the Search icon.</li>
</ol>
<p class="calibre23">You will see a warning like this:</p>
<div class="cdpaligncenter"><img class="alignnone22" src="Images/ec6e5dff-d3c0-4fc3-88c3-432f50898987.png" width="1440" height="828"/></div>
<div class="cdpaligncenter1">Image deployment popup</div>
<p class="calibre23">Let me save you time: don't deploy it, because it will not work. The OpenShift platform demands that your container should run with a user other than <kbd class="calibre16">root</kbd>. So we need to build another image for it.</p>
<p class="calibre23">Fortunately, it's quite simple. The new Dockerfile is like this:</p>
<pre class="mce-root2">FROM eldermoraes/gf-javaee-jdk8<br class="calibre2"/><br class="calibre2"/>ENV DEPLOYMENT_DIR ${GLASSFISH_HOME}/glassfish/domains/domain1/autodeploy/<br class="calibre2"/><br class="calibre2"/>COPY app.war ${DEPLOYMENT_DIR}<br class="calibre2"/><br class="calibre2"/>USER root<br class="calibre2"/><br class="calibre2"/>RUN chown -R glassfish:glassfish_grp ${DEPLOYMENT_DIR}/app.war \<br class="calibre2"/>    &amp;&amp; chmod -R 777 ${DEPLOYMENT_DIR}/app.war<br class="calibre2"/><br class="calibre2"/>USER glassfish</pre>
<ol start="6" class="calibre19">
<li class="chapter">Then you build a new image based on this Dockerfile:</li>
</ol>
<pre class="mce-root2"><strong class="calibre3">docker build -t eldermoraes/gf-javaee-cookbook-os .</strong></pre>
<ol start="7" class="calibre19">
<li class="chapter">Then push this new image to the Docker Hub:</li>
</ol>
<pre class="mce-root2"><strong class="calibre3">docker push eldermoraes/gf-javaee-cookbook-os</strong></pre>
<p class="calibre23">Now you are good to go:</p>
<div class="cdpaligncenter"><img class="alignnone23" src="Images/2e516ce2-1405-459e-bade-2b27d422cae3.png" width="1440" height="822"/></div>
<div class="cdpaligncenter1"><span class="calibre5">Image deployment popup</span></div>
<ol start="8" class="calibre19">
<li class="chapter">There are no warnings, so go ahead and click on <span class="calibre5">Deploy</span>. In the page that opens, click on the <span class="calibre5">Continue to the project overview</span> label:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone24" src="Images/8dd76dcc-1f3c-47fb-8cf3-6e44ceeba661.png" width="1440" height="830"/></div>
<div class="cdpaligncenter1">Image deployment confirmation</div>
<ol start="9" class="calibre19">
<li class="chapter">Watch the following page until the pod icon is blue. When it's ready, click on the <span class="calibre5">Create Route</span> link:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone25" src="Images/aefa00fb-d707-4b2c-a730-3eaa1b90ec06.png" width="1440" height="782"/></div>
<div class="cdpaligncenter1">Monitoring the pod creation</div>
<ol start="10" class="calibre19">
<li class="chapter">In the popup, fill in the <span class="calibre5">Path</span> field with <kbd class="calibre16">/app</kbd> and in <span class="calibre5">Target Port</span> choose <span class="calibre5">8080 -&gt; 8080 (TCP)</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone26" src="Images/c58cfe33-1742-4d7c-9239-b353aa184fc3.png" width="1440" height="847"/></div>
<div class="cdpaligncenter1">Route creation</div>
<ol start="11" class="calibre19">
<li class="chapter">Click on <span class="calibre5">Create</span> and wait:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone27" src="Images/fac6f7e9-5167-409f-9b8a-0120be124fdf.png" width="1440" height="657"/></div>
<div class="cdpaligncenter1">Route confirmation</div>
<ol start="12" class="calibre19">
<li class="chapter">Once it's done, click on the <span class="calibre5">Overview</span> menu <span class="calibre5">(top left). In the same row as the application name, there's a URL pointing to your container:</span></li>
</ol>
<div class="cdpaligncenter"><img class="alignnone28" src="Images/50660b6c-4fe6-40c0-a768-1fc917f04081.png" width="1440" height="440"/></div>
<div class="cdpaligncenter1"><span class="calibre5">Test page for our application</span></div>
<p class="mce-root">If you can see the page, congratulations! Your application is now orchestrated at OpenShift.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre8">The reason why it's so simple is because you are using a platform that's designed to make it simple. So all the heavy lifting that you'd need to do it in your own infrastructure is done by the platform.</span></p>
<p class="mce-root">The change we've made to make the application run in the OpenShift is quite simple:</p>
<pre class="calibre21">USER root<br class="calibre2"/><br class="calibre2"/>RUN chown -R glassfish:glassfish_grp ${DEPLOYMENT_DIR}/app.war \<br class="calibre2"/>    &amp;&amp; chmod -R 777 ${DEPLOYMENT_DIR}/app.war<br class="calibre2"/><br class="calibre2"/>USER glassfish</pre>
<p class="mce-root">First, we use the <kbd class="calibre16">root</kbd> user to change the permissions of <kbd class="calibre16">app.war</kbd>. Then the main point is to specify to use the <kbd class="calibre16">glassfish</kbd> user. This feature tells Docker that the internal process will be owned by the <kbd class="calibre16">glassfish</kbd> user, and not by <kbd class="calibre16">root</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The reason why you should use a provider to orchestrate your containers in the cloud is not only based on the ease of creating services, but also because the platform will take care of keeping it up and running.</p>
<p class="mce-root">So, if your container goes wrong and needs to be stopped, restarted, or even killed and recreated, the platform will do it automatically.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article class="calibre2">
                
<ul class="calibre13">
<li class="calibre14">See the full source code for this recipe at <a href="https://github.com/eldermoraes/javaee8-cookbook/tree/master/chapter11/ch11-openshift" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://github.com/eldermoraes/javaee8-cookbook/tree/master/chapter11/ch11-openshift</a>.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Using AWS for container orchestration in the cloud</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The best way to use containers in the cloud is by using a provider. Why? Because they can provide you with a good infrastructure and a nice service for a small price.</p>
<p class="mce-root">This recipe will show you how to get the container created in the first recipe of this chapter and deliver it using <strong class="calibre7">Amazon Web Services</strong> (<strong class="calibre7">AWS</strong>).</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">If you don't have an account with AWS, register for a free trial at <a href="https://aws.amazon.com/free/start-your-free-trial/" target="_blank" class="pcalibre pcalibre3 pcalibre1 calibre12 pcalibre2">https://aws.amazon.com/free/start-your-free-trial/</a>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<ol class="calibre19">
<li class="chapter">Once you log in to the platform, you will get to this main page:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone29" src="Images/8a63ab0d-c44e-4501-be7e-008aba035300.png" width="1440" height="824"/></div>
<div class="cdpaligncenter1">AWS main page</div>
<ol start="2" class="calibre19">
<li class="chapter">Click on the <span class="calibre5">Services</span> menu (top left) and then <span class="calibre5">Elastic Container Service</span> (under the <span class="calibre5">Compute</span> menu):</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/5c3ff577-292c-4f81-adb0-54d9ee09ce19.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Services list</div>
<ol start="3" class="calibre19">
<li class="chapter">On the page that opens, click on <span class="calibre5">Get started</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/3e1b8287-9eb3-4357-8646-8985b0231315.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Getting started page for ECS</div>
<ol start="4" class="calibre19">
<li class="chapter">Check only the <span class="calibre5">Deploy a sample application onto an Amazon ECS Cluster</span> option. Then click on <span class="calibre5">Continue</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone30" src="Images/78975c46-cf2e-4a65-b319-5de753fd9ecc.png" width="1440" height="631"/></div>
<div class="cdpaligncenter1">First page for ECS creation</div>
<ol start="5" class="calibre19">
<li class="chapter">Fill in the blanks as follows, paying special attention to the <span class="calibre5">Image</span> field, where you will use our prebuilt image:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone31" src="Images/310023da-bd63-4c06-b353-d40afdc23e77.png" width="1440" height="836"/></div>
<div class="cdpaligncenter1">Task definition page</div>
<ol start="6" class="calibre19">
<li class="chapter">Scroll down the page and set <span class="calibre5">Port mappings</span> as shown here. Click on <span class="calibre5">Continue</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone1" src="Images/406548fd-4414-4957-81cd-63009a81ce0e.png" width="1440" height="839"/></div>
<div class="cdpaligncenter1">Port mappings</div>
<ol start="7" class="calibre19">
<li class="chapter">Give the service a name and set the <span class="calibre5">Desired number of tasks</span> to <kbd class="calibre16">1</kbd>. Click on <span class="calibre5">Next step</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone32" src="Images/10f8d9c5-61fb-4b46-91d8-c0a5f1363778.png" width="1440" height="834"/></div>
<div class="cdpaligncenter1">Service and network configuration</div>
<ol start="8" class="calibre19">
<li class="chapter">Configure the cluster as shown here:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone33" src="Images/1034a353-326b-4f3e-b9d3-f7bbfa20e541.png" width="1440" height="826"/></div>
<div class="cdpaligncenter1">Cluster configuration</div>
<ol start="9" class="calibre19">
<li class="chapter">Scroll down to the page and click on <span class="calibre5">Launch instance &amp; run service</span>:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone3" src="Images/ceb6e961-ebea-435a-be91-d2acf6dcba09.png" width="1440" height="838"/></div>
<div class="cdpaligncenter1">Launch instance</div>
<ol start="10" class="calibre19">
<li class="chapter">You can follow the status of the process on the following page. When it's done, click on the <span class="calibre5">View service</span> button:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone34" src="Images/151d54ff-dfb2-4dd7-9e33-59fb2a516386.png" width="1440" height="827"/></div>
<div class="cdpaligncenter1">Launch status</div>
<ol start="11" class="calibre19">
<li class="chapter">You'll see the details of your service on the following page. Click on the <span class="calibre5">default &gt;</span> label:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone2" src="Images/70f03884-2907-498c-af5c-967e15650dcd.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Cluster information</div>
<p class="calibre23">On the page that opens, you can see more details about the cluster: </p>
<div class="cdpaligncenter"><img class="alignnone2" src="Images/6794bfaa-b88e-4a72-8ac1-43c28fbfe6d7.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Cluster details</div>
<ol start="12" class="calibre19">
<li class="chapter">Click on the <span class="calibre5">Tasks</span> tab to see information about the tasks and the containers created:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone2" src="Images/38147487-2d04-422c-9e83-7ff5f1fac0a9.png" width="1440" height="840"/></div>
<div class="cdpaligncenter1">Container tasks</div>
<ol start="13" class="calibre19">
<li class="chapter">Click on the <span class="calibre5">Container Instance</span> label to see details about the container that has been created:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone29" src="Images/5113f052-7a95-4e09-8681-076568961eb9.png" width="1440" height="824"/></div>
<div class="cdpaligncenter1">Container details</div>
<ol start="14" class="calibre19">
<li class="chapter">Check the <span class="calibre5">Public IP</span> label and copy the IP. It's automatically mapped to the <kbd class="calibre16">8080</kbd> port. Use <span class="calibre5"><kbd class="calibre16">http://[public-ip]/app</kbd> </span>to try it:</li>
</ol>
<div class="cdpaligncenter"><img class="alignnone35" src="Images/c4448c68-7c4d-4765-ab6d-2781088ebaa2.png" width="1440" height="532"/></div>
<div class="cdpaligncenter1"><span class="calibre5">Test page for our application</span></div>
<p class="mce-root">If you can see the same screenshot, that's great! You are now orchestrating your container in AWS.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre8">The reason why it's so simple is because you are using a platform that's designed to make it simple. So, all the heavy lifting that you'd make to do it in your own infrastructure is done by the platform.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The reason why you should use a provider to orchestrate your containers in the cloud is not only because of the ease of creating services, but also because the platform will take care of keeping it up and running.</p>
<p class="mce-root">So if your container goes wrong and needs to be stopped, restarted, or even killed and recreated, the platform will do it automatically.</p>


            </article>

            
        </section>
    </div>



  </body></html>