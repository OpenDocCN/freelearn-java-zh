<html><head></head><body>
  <div id="_idContainer101">
   <h1 class="chapterNumber">
    <a id="_idTextAnchor310">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     11
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-290">
    <a id="_idTextAnchor311">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Alternative Java Frameworks to Build RESTful APIs
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3.1">
     Until this chapter, we have used the Spring Boot framework to demonstrate the API implementation in real code.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     By using the very popular Spring Boot, we are trying to the book as readable and useful for as many readers as possible.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.4.1">
     Now it is time to explain why and how other Java frameworks can be used to implement RESTful web services.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.5.1">
     You will see that the same design principles and a similar code structure are still applicable, so you can use the concepts from the other chapters with any framework you may want to use for your specific situation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.6.1">
     First, we will explain how standards such as Jakarta EE and MicroProfile can help you not get lost in the sea of frameworks and implementation stacks you could use to build your application.
    </span>
    <span class="koboSpan" id="kobo.6.2">
     We will briefly mention the possibility of using reactive programming, available with most current frameworks.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.7.1">
     The current choice of implementation technologies is the result of the history of innovative approaches to aid developers in creating applications that fulfill the current architectural and deployment preferences.
    </span>
    <span class="koboSpan" id="kobo.7.2">
     We will walk you from Java EE through Spring to frameworks such as Quarkus and the MicroProfile specification.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.8.1">
     To provide you with a detailed view, we will demonstrate the similarities and differences in our example API implementation with the Quarkus and Helidon frameworks compared to the Spring Boot implementation from the previous chapters.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.9.1">
     This makes for the following list of sections:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.10.1">
      Understanding the benefits of standards
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.11.1">
      Choosing imperative or reactive
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.12.1">
      Java EE and Jakarta EE
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.13.1">
      Spring Framework and Spring Boot
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.14.1">
      New microservice frameworks and MicroProfile
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.15.1">
      Example implementation with Quarkus
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.16.1">
      Example implementation with Helidon
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-291">
    <a id="_idTextAnchor312">
    </a>
    <span class="koboSpan" id="kobo.17.1">
     Technical requirements
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.18.1">
     In this chapter, we will demonstrate the use of frameworks other than Spring Boot (used in previous chapters).
    </span>
    <span class="koboSpan" id="kobo.18.2">
     However, the necessary dependencies will be downloaded during the project build automatically based on the Maven
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.19.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.20.1">
     file, so the prerequisites stay the same:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.21.1">
      Intermediate knowledge of the Java language and platform
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.22.1">
      At least basic knowledge of Spring Boot or a similar framework
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.23.1">
      Java 21 and Maven 3.9.x installed (alternatively, you can use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.24.1">
       mvnw
      </span>
     </code>
     <span class="koboSpan" id="kobo.25.1">
      command included in the example code, which will download the correct Maven version)
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.26.1">
     You can access the code for this chapter on GitHub at
    </span>
    <a href="https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter11">
     <span class="url">
      <span class="koboSpan" id="kobo.27.1">
       https://github.com/PacktPublishing/Mastering-RESTful-Web-Services-with-Java/tree/main/chapter11
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.28.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-292">
    <a id="_idTextAnchor313">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     Understanding the benefits of standards
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.30.1">
     Java is a versatile language
    </span>
    <a id="_idIndexMarker867">
    </a>
    <span class="koboSpan" id="kobo.31.1">
     with a large ecosystem of both open source and commercial frameworks and libraries.
    </span>
    <span class="koboSpan" id="kobo.31.2">
     Hence, you have more options to choose from than you will ever be able to fully evaluate.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.32.1">
     You could even try to implement your own HTTP server or client and a custom framework, although it is not recommended other than for educational purposes due to the extreme costs of catching the details needed to make it production-ready and to maintain it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.33.1">
     Choosing a framework or any component your software will depend on is difficult.
    </span>
    <span class="koboSpan" id="kobo.33.2">
     It involves predicting both the future features your software will need and the future evolution and support of the framework (dependency).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.34.1">
     For example, an application based on the Java Enterprise Edition standard needs to be deployed to an application server.
    </span>
    <span class="koboSpan" id="kobo.34.2">
     Later, a need to deploy new application versions frequently, cloud deployment, and scalability requirements may require a faster startup time, smaller container size, and removing the dependency on the application server.
    </span>
    <span class="koboSpan" id="kobo.34.3">
     Or, the version of the application server the operations team has experience with may become outdated and it will limit the version of Java that can be used.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.35.1">
     A common approach is to choose between the frameworks with large communities of users and developers.
    </span>
    <span class="koboSpan" id="kobo.35.2">
     But we also want new innovative frameworks to enter the market, although their communities will naturally start small.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.36.1">
     Fortunately, vendor-neutral standards and specifications have been created to prevent the Java community from becoming fragmented by mutually incompatible frameworks.
    </span>
    <span class="koboSpan" id="kobo.36.2">
     By choosing a framework that conforms to a standard, you retain the option to switch to a different implementation of the same standard.
    </span>
    <span class="koboSpan" id="kobo.36.3">
     It will be much easier for developers to start working on your code even
    </span>
    <a id="_idIndexMarker868">
    </a>
    <span class="koboSpan" id="kobo.37.1">
     without experience specific to the framework provided they are familiar with the standard.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.38.1">
     Therefore, in the following sections, we focus not only on the individual frameworks but also on the standards (specifications) they support.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-293">
    <a id="_idTextAnchor314">
    </a>
    <span class="koboSpan" id="kobo.39.1">
     Choosing imperative or reactive
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.40.1">
     In the previous chapters, we
    </span>
    <a id="_idIndexMarker869">
    </a>
    <span class="koboSpan" id="kobo.41.1">
     used the imperative programming style using the Spring Web framework.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.42.1">
     The
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.43.1">
      imperative programming style
     </span>
    </strong>
    <span class="koboSpan" id="kobo.44.1">
     models
    </span>
    <a id="_idIndexMarker870">
    </a>
    <span class="koboSpan" id="kobo.45.1">
     an API operation using a simple Java method that takes data from the HTTP request as arguments and returns a result object that will be used to generate the HTTP response.
    </span>
    <span class="koboSpan" id="kobo.45.2">
     The method body consists of statements that are executed sequentially in the order they appear in the code using one Java thread.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.46.1">
     In the following code snippet, we can see the statements
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.47.1">
      statement1
     </span>
    </code>
    <span class="koboSpan" id="kobo.48.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.49.1">
      statement2
     </span>
    </code>
    <span class="koboSpan" id="kobo.50.1">
     , and so on, which will be executed one after another in one thread, with access to the same scope of variables and the same call stack.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.51.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.52.1">GetMapping</span></span> <span class="hljs-comment"><span class="koboSpan" id="kobo.53.1">// or other similar annotation</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.54.1">ResultType</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.55.1">operationName</span></span><span class="koboSpan" id="kobo.56.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.57.1">InputType1 input1,</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.58.1">                         InputType2 input2...</span></span><span class="koboSpan" id="kobo.59.1">) {
    statement1;
    statement2;
    ...
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.60.1">return</span></span><span class="koboSpan" id="kobo.61.1"> ...;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.62.1">
     A similar code snippet shows the same structure when the result contains multiple entities.
    </span>
    <span class="koboSpan" id="kobo.62.2">
     This time, the result type is a well-known Java collection (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.63.1">
      List
     </span>
    </code>
    <span class="koboSpan" id="kobo.64.1">
     ).
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.65.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.66.1">GetMapping</span></span> <span class="hljs-comment"><span class="koboSpan" id="kobo.67.1">// or other similar annotation</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.68.1">List</span></span><span class="koboSpan" id="kobo.69.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.70.1">ResultType</span></span><span class="koboSpan" id="kobo.71.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.72.1">collectionReturningOperationName</span></span><span class="koboSpan" id="kobo.73.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.74.1">                 InputType1 input1, InputType2 input2...</span></span><span class="koboSpan" id="kobo.75.1">) {
    statement1;
    statement2;
    ...
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.76.1">return</span></span><span class="koboSpan" id="kobo.77.1"> ...;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.78.1">
     The style is called
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.79.1">
      imperative
     </span>
    </em>
    <span class="koboSpan" id="kobo.80.1">
     because the program is understood as a sequence of commands, telling the computer explicitly what steps to perform in which order.
    </span>
    <span class="koboSpan" id="kobo.80.2">
     In this model, data is just parameters for the commands.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.81.1">
     Besides the “classic” imperative style, with
    </span>
    <a id="_idIndexMarker871">
    </a>
    <span class="koboSpan" id="kobo.82.1">
     most
    </span>
    <a id="_idIndexMarker872">
    </a>
    <span class="koboSpan" id="kobo.83.1">
     modern frameworks you also have the option of using the reactive style.
    </span>
    <span class="koboSpan" id="kobo.83.2">
     For example, with the Spring framework family, you can use
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.84.1">
      Spring WebFlux
     </span>
    </em>
    <span class="koboSpan" id="kobo.85.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.86.1">
     The
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.87.1">
      reactive programming style
     </span>
    </strong>
    <span class="koboSpan" id="kobo.88.1">
     is built
    </span>
    <a id="_idIndexMarker873">
    </a>
    <span class="koboSpan" id="kobo.89.1">
     around the idea of asynchronous processing of streams of data.
    </span>
    <span class="koboSpan" id="kobo.89.2">
     The program execution is understood as driven by the flow of data.
    </span>
    <span class="koboSpan" id="kobo.89.3">
     The program reacts to the incoming data items using a pipeline of functions (data transformations).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.90.1">
     The processing steps of a single request using the reactive style are executed asynchronously and they usually jump between different Java threads.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.91.1">
     Several libraries were created to support reactive programming in Java, among them
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.92.1">
      RxJava
     </span>
    </em>
    <span class="koboSpan" id="kobo.93.1">
     and
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.94.1">
      Project Reactor
     </span>
    </em>
    <span class="koboSpan" id="kobo.95.1">
     .
    </span>
    <span class="koboSpan" id="kobo.95.2">
     All of them share common features based on the Observable design pattern.
    </span>
    <span class="koboSpan" id="kobo.95.3">
     Their interfaces were standardized in the Reactive Streams specification (
    </span>
    <a href="https://www.reactive-streams.org/">
     <span class="url">
      <span class="koboSpan" id="kobo.96.1">
       https://www.reactive-streams.org/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.97.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.97.2">
     Starting from Java version 9, the interfaces from the Reactive Streams specification have been part of the standard Java API as interfaces embedded in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.98.1">
      java.util.concurrent.Flow
     </span>
    </code>
    <span class="koboSpan" id="kobo.99.1">
     class.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.100.1">
     Now let us compare the preceding example to similar code using Spring WebFlux:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.101.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.102.1">GetMapping</span></span> <span class="hljs-comment"><span class="koboSpan" id="kobo.103.1">// or other similar annotation</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.104.1">Mono</span></span><span class="koboSpan" id="kobo.105.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.106.1">ResultType</span></span><span class="koboSpan" id="kobo.107.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.108.1">operationName</span></span><span class="koboSpan" id="kobo.109.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.110.1">InputType1 input1, InputType2 input2...</span></span><span class="koboSpan" id="kobo.111.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.112.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.113.1">reactiveDataSource</span></span><span class="koboSpan" id="kobo.114.1">()
        .</span><span class="hljs-property"><span class="koboSpan" id="kobo.115.1">map</span></span><span class="koboSpan" id="kobo.116.1"> (item -&gt; transformation </span><span class="hljs-number"><span class="koboSpan" id="kobo.117.1">1</span></span><span class="koboSpan" id="kobo.118.1">)
        .</span><span class="hljs-property"><span class="koboSpan" id="kobo.119.1">map</span></span><span class="koboSpan" id="kobo.120.1"> (transformation </span><span class="hljs-number"><span class="koboSpan" id="kobo.121.1">2.</span></span><span class="koboSpan" id="kobo.122.1">..);
}
@</span><span class="hljs-title"><span class="koboSpan" id="kobo.123.1">GetMapping</span></span> <span class="hljs-comment"><span class="koboSpan" id="kobo.124.1">// or other similar annotation</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.125.1">Flux</span></span><span class="koboSpan" id="kobo.126.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.127.1">ResultType</span></span><span class="koboSpan" id="kobo.128.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.129.1">collectionReturningOperationName</span></span><span class="koboSpan" id="kobo.130.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.131.1">InputType1 input1,</span></span>
<span class="hljs-title">                                                  </span><span class="hljs-params"><span class="koboSpan" id="kobo.132.1">InputType2 input2...</span></span><span class="koboSpan" id="kobo.133.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.134.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.135.1">reactiveDataSource</span></span><span class="koboSpan" id="kobo.136.1">()
        .</span><span class="hljs-property"><span class="koboSpan" id="kobo.137.1">map</span></span><span class="koboSpan" id="kobo.138.1"> (item -&gt; transformation </span><span class="hljs-number"><span class="koboSpan" id="kobo.139.1">1</span></span><span class="koboSpan" id="kobo.140.1">)
        .</span><span class="hljs-property"><span class="koboSpan" id="kobo.141.1">map</span></span><span class="koboSpan" id="kobo.142.1"> (transformation </span><span class="hljs-number"><span class="koboSpan" id="kobo.143.1">2.</span></span><span class="koboSpan" id="kobo.144.1">..);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.145.1">
     With the reactive style, the
    </span>
    <a id="_idIndexMarker874">
    </a>
    <span class="koboSpan" id="kobo.146.1">
     handler method returns a special reactive type.
    </span>
    <span class="koboSpan" id="kobo.146.2">
     For WebFlux (using the Project Reactor library as the reactive streams implementation), the result type will be
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.147.1">
      Mono
     </span>
    </code>
    <span class="koboSpan" id="kobo.148.1">
     (for at most one data item) or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.149.1">
      Flux
     </span>
    </code>
    <span class="koboSpan" id="kobo.150.1">
     (a reactive analogy of a collection that can contain any number of items).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.151.1">
     The reactive handler method is invoked and returns before even the first request starts being processed.
    </span>
    <span class="koboSpan" id="kobo.151.2">
     It is only used to declaratively build the pipeline of asynchronous transformations that should be
    </span>
    <a id="_idIndexMarker875">
    </a>
    <span class="koboSpan" id="kobo.152.1">
     performed for each request.
    </span>
    <span class="koboSpan" id="kobo.152.2">
     The actual request processing is then controlled by the reactive framework, depending on the availability of data to process.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.153.1">
     By breaking up the processing into separate asynchronous steps (transformation functions), the reactive programming style lets the framework use the computing resources just in time when the data is available.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.154.1">
     For the reactive framework to be efficient, the pipeline steps (that would be the functions that are the arguments of the map functions in the preceding examples) are expected to be non-blocking: They should not contain statements that synchronously wait for an input/output to finish.
    </span>
    <span class="koboSpan" id="kobo.154.2">
     Using the reactive programming style on the incoming API request layer (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.155.1">
      Controller
     </span>
    </code>
    <span class="koboSpan" id="kobo.156.1">
     class in WebFlux) does not make for a correct reactive implementation.
    </span>
    <span class="koboSpan" id="kobo.156.2">
     Instead, a reactive program should be reactive across all its layers, including database access and downstream API calls.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.157.1">
     The reactive programming paradigm enables the development of extremely scalable services and systems.
    </span>
    <span class="koboSpan" id="kobo.157.2">
     Among other features, reactive streams enhance the communication between the code parts that implement individual processing steps:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.158.1">
      Failures are expected and can also be processed reactively; reactive streams have a separate error channel for that.
     </span>
     <span class="koboSpan" id="kobo.158.2">
      This is different from ordinary Java streams where failures (Java exceptions) break the whole pipeline, not allowing the processing to continue without explicit catch clauses.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.159.1">
      Data consumers can control the rate of data sent to them by the producers using so-called back pressure.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.160.1">
     On the other hand, with reactive programming, we pay the tax of having to fragment the implementation code into small non-blocking functions capable of running on different threads.
    </span>
    <span class="koboSpan" id="kobo.160.2">
     Reactive programming increases complexity due to its asynchronous and multi-threaded nature, as well as by requiring the discipline to avoid blocking input/output.
    </span>
    <span class="koboSpan" id="kobo.160.3">
     It puts an increased cognitive load on developers who need to be able to translate between the pipeline declarations and the runtime execution.
    </span>
    <span class="koboSpan" id="kobo.160.4">
     Request processing spanning multiple threads makes debugging more difficult since the steps leading to a particular execution point are not aligned with the stack trace of the current thread.
    </span>
    <span class="koboSpan" id="kobo.160.5">
     Therefore, it is advisable to make sure the application being developed
    </span>
    <a id="_idIndexMarker876">
    </a>
    <span class="koboSpan" id="kobo.161.1">
     needs the level of scalability that justifies the increased complexity.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.162.1">
     If the only problem you need to solve is the efficient use of threads so that CPU cores are not idle waiting for blocking operations, it can be done with the currently available versions of Java without incurring the cost of introducing reactive programming.
    </span>
    <span class="koboSpan" id="kobo.162.2">
     It was explained in the in the section,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.163.1">
      Increasing the throughput with virtual threads
     </span>
    </em>
    <span class="koboSpan" id="kobo.164.1">
     , in
    </span>
    <a href="B21843_10.xhtml#_idTextAnchor284">
     <em class="italic">
      <span class="koboSpan" id="kobo.165.1">
       Chapter 10
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.166.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.167.1">
     To summarize the criteria for choosing the imperative versus the reactive option of the backend framework, try to answer the following questions.
    </span>
    <span class="koboSpan" id="kobo.167.2">
     The more your answers converge to “yes,” the more likely it makes sense to use the reactive implementation:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.168.1">
      Is scalability near the top of the features you optimize for?
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.169.1">
      Is the team ready to accept the increased cognitive load of reactive programming?
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.170.1">
      Do you need advanced stream control features such as backpressure?
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.171.1">
      Is it
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.172.1">
       not
      </span>
     </em>
     <span class="koboSpan" id="kobo.173.1">
      possible to use virtual threads?
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.174.1">
      Can all the layers (database access, downstream API calls, etc.) of your application be reactive?
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.175.1">
     In the following sections, we will take a look at various Java server-side implementation frameworks, grouped by
    </span>
    <a id="_idIndexMarker877">
    </a>
    <span class="koboSpan" id="kobo.176.1">
     the related standards, and a little bit of historical context.
    </span>
    <span class="koboSpan" id="kobo.176.2">
     Before we move on to the next section, here is a table that is providing a chronological overview of major Java standards and their associated server-side framework implementations.
    </span>
   </p>
   <table class="table-container" id="table001-2">
    <tbody>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <strong class="keyWord">
         <span class="koboSpan" id="kobo.177.1">
          Standards
         </span>
        </strong>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <strong class="keyWord">
         <span class="koboSpan" id="kobo.178.1">
          year
         </span>
        </strong>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <strong class="keyWord">
         <span class="koboSpan" id="kobo.179.1">
          Implementations
         </span>
        </strong>
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.180.1">
         Java 2 EE
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.181.1">
         1999
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.182.1">
         2000
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.183.1">
         2001
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.184.1">
         2002
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.185.1">
         2003
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.186.1">
         2004
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.187.1">
         Spring Framework 1.0
        </span>
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.188.1">
         2005
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.189.1">
         2006
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.190.1">
         2007
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.191.1">
         2008
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.192.1">
         JAX-RS in Java EE 6
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.193.1">
         2009
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.194.1">
         2010
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.195.1">
         2011
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.196.1">
         2012
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.197.1">
         2013
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.198.1">
         2014
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.199.1">
         Spring Boot 1.0
        </span>
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.200.1">
         2015
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.201.1">
         MicroProfile 1.0
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.202.1">
         2016
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.203.1">
         Java EE 8
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.204.1">
         2017
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.205.1">
         2018
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.206.1">
         Micronaut 1.0
        </span>
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.207.1">
         2019
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.208.1">
         Helidon 1.0, Quarkus 1.0
        </span>
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.209.1">
         Jakarta EE 9
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.210.1">
         2020
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.211.1">
         2021
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.212.1">
         Jakarta EE 10
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.213.1">
         2022
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.214.1">
         2023
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.215.1">
         MicroProfile 7.0
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.216.1">
         2024
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
       </p>
      </td>
     </tr>
     <tr>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.217.1">
         Jakarta EE 11
        </span>
       </p>
      </td>
      <td class="table-cell">
       <p class="normal">
        <span class="koboSpan" id="kobo.218.1">
         2025
        </span>
       </p>
      </td>
      <td class="table-cell">
      </td>
     </tr>
    </tbody>
   </table>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.219.1">
     Table 11.1 – Timeline of standards and frameworks
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-294">
    <a id="_idTextAnchor315">
    </a>
    <span class="koboSpan" id="kobo.220.1">
     Java EE and Jakarta EE
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.221.1">
     The Java language and platform can be used to develop various types of applications; however, the area where Java has become the most successful and popular is server-side (backend) applications.
    </span>
   </p>
   <p class="normal">
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.222.1">
      Java Enterprise Edition (Java EE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.223.1">
     ) is a set of standard APIs that extend the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.224.1">
      Java Standard Edition
     </span>
    </strong>
    <span class="koboSpan" id="kobo.225.1">
     (Java SE, commonly referred to as just “Java” and implemented by various products that build on the OpenJDK project) to support the development of server-side applications.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-295">
    <a id="_idTextAnchor316">
    </a>
    <span class="koboSpan" id="kobo.226.1">
     From Java 2 Platform, Enterprise Edition to Jakarta EE
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.227.1">
     Java EE started with the name Java 2 Platform, Enterprise Edition (J2EE), along with the release of version 2 of Java (SE) by Sun Microsystems.
    </span>
    <span class="koboSpan" id="kobo.227.2">
     The Java trademark and Java EE passed to Oracle, which acquired Sun Microsystems in 2010.
    </span>
    <span class="koboSpan" id="kobo.227.3">
     The last version of Java EE is Java EE 8, released in 2017.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.228.1">
     After Java EE 8, the Java EE code and documentation were donated to the Eclipse Foundation, and the specification, starting from version 9, is named
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.229.1">
      Jakarta EE
     </span>
    </em>
    <span class="koboSpan" id="kobo.230.1">
     (
    </span>
    <a href="https://jakarta.ee/">
     <span class="url">
      <span class="koboSpan" id="kobo.231.1">
       https://jakarta.ee/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.232.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.232.2">
     The respective Java packages were renamed from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.233.1">
      javax.*
     </span>
    </code>
    <span class="koboSpan" id="kobo.234.1">
     to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.235.1">
      jakarta.*
     </span>
    </code>
    <span class="koboSpan" id="kobo.236.1">
     .
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-296">
    <a id="_idTextAnchor317">
    </a>
    <span class="koboSpan" id="kobo.237.1">
     Types of JEE containers
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.238.1">
     An implementation
    </span>
    <a id="_idIndexMarker878">
    </a>
    <span class="koboSpan" id="kobo.239.1">
     of the Jakarta EE specification is called a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.240.1">
      Jakarta EE container
     </span>
    </em>
    <span class="koboSpan" id="kobo.241.1">
     (also known as an application server), to which Jakarta EE applications can be deployed in
    </span>
    <a id="_idIndexMarker879">
    </a>
    <span class="koboSpan" id="kobo.242.1">
     the form of
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.243.1">
      Web Archives (WAR)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.244.1">
     or
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.245.1">
      Enterprise Application Archives (EAR)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.246.1">
     .
    </span>
    <span class="koboSpan" id="kobo.246.2">
     There are various commercial and open-source
    </span>
    <a id="_idIndexMarker880">
    </a>
    <span class="koboSpan" id="kobo.247.1">
     implementations.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.248.1">
     An application server can be a full Jakarta EE container (for example, WebSphere, OpenLiberty, JBoss, GlassFish, Payara, or TomEE) or it can be a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.249.1">
      servlet (web) container
     </span>
    </em>
    <span class="koboSpan" id="kobo.250.1">
     only supporting a subset of the Jakarta EE APIs (for example, Jetty or Apache Tomcat).
    </span>
    <span class="koboSpan" id="kobo.250.2">
     The
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.251.1">
      Servlet API
     </span>
    </em>
    <span class="koboSpan" id="kobo.252.1">
     is a standard way for Jakarta EE
    </span>
    <a id="_idIndexMarker881">
    </a>
    <span class="koboSpan" id="kobo.253.1">
     applications to serve HTTP requests.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-297">
    <a id="_idTextAnchor318">
    </a>
    <span class="koboSpan" id="kobo.254.1">
     From the Servlet API to declarative endpoint handler methods
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.255.1">
     The
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.256.1">
      Servlet API
     </span>
    </strong>
    <span class="koboSpan" id="kobo.257.1">
     models
    </span>
    <a id="_idIndexMarker882">
    </a>
    <span class="koboSpan" id="kobo.258.1">
     how an HTTP
    </span>
    <a id="_idIndexMarker883">
    </a>
    <span class="koboSpan" id="kobo.259.1">
     server sees the communication: The main objects are the HTTP request and response, encapsulating all the details such as the HTTP method, URI path, headers, and request parameters.
    </span>
    <span class="koboSpan" id="kobo.259.2">
     The handler method must explicitly (imperatively) implement the logic to read the items of the request it is interested in and set them in the response.
    </span>
    <span class="koboSpan" id="kobo.259.3">
     The payloads are accessed as Java I/O streams.
    </span>
    <span class="koboSpan" id="kobo.259.4">
     The handler method has to convert between the streams of bytes and structured data objects (model classes).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.260.1">
     Another Jakarta EE API specification,
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.261.1">
      Jakarta RESTful Web Services (JAX-RS)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.262.1">
     , builds on the Servlet API to make
    </span>
    <a id="_idIndexMarker884">
    </a>
    <span class="koboSpan" id="kobo.263.1">
     implementation of RESTful web services easier by providing a declarative programming model where the developer only implements handler methods annotated with their respective resource paths and HTTP methods.
    </span>
    <span class="koboSpan" id="kobo.263.2">
     The JAX-RS implementation automatically dispatches the HTTP requests to the matching handler methods.
    </span>
    <span class="koboSpan" id="kobo.263.3">
     It also deserializes the request bodies and serializes the responses.
    </span>
    <span class="koboSpan" id="kobo.263.4">
     JAX-RS in Jakarta EE is like Spring Web MVC in the Spring ecosystem.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.264.1">
     As the handler classes provide REST resources, the convention is to call them “resources,” – for example, a class providing methods operating on products could be named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.265.1">
      ProductResource
     </span>
    </code>
    <span class="koboSpan" id="kobo.266.1">
     .
    </span>
    <span class="koboSpan" id="kobo.266.2">
     The resource path is specified with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.267.1">
      @Path
     </span>
    </code>
    <span class="koboSpan" id="kobo.268.1">
     annotation and there are annotations for specifying the HTTP method:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.269.1">
      @GET
     </span>
    </code>
    <span class="koboSpan" id="kobo.270.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.271.1">
      @POST
     </span>
    </code>
    <span class="koboSpan" id="kobo.272.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.273.1">
      @PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.274.1">
     , and so on.
    </span>
    <span class="koboSpan" id="kobo.274.2">
     You can see that a resource class is like a controller class in Spring Web.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-298">
    <a id="_idTextAnchor319">
    </a>
    <span class="koboSpan" id="kobo.275.1">
     Spring Framework and Spring Boot
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.276.1">
     Early versions of Java EE (most notably
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.277.1">
      Enterprise Java Beans
     </span>
    </strong>
    <span class="koboSpan" id="kobo.278.1">
     ) were infamous for being hard to use for developers and
    </span>
    <a id="_idIndexMarker885">
    </a>
    <span class="koboSpan" id="kobo.279.1">
     requiring a
    </span>
    <a id="_idIndexMarker886">
    </a>
    <span class="koboSpan" id="kobo.280.1">
     lot of boilerplate code.
    </span>
    <span class="koboSpan" id="kobo.280.2">
     JAX-RS (mentioned above) and CDI (the dependency injection standard) only came to Java EE with version 6, released in 2009.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.281.1">
     That situation motivated the creation of the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.282.1">
      Spring Framework
     </span>
    </strong>
    <span class="koboSpan" id="kobo.283.1">
     (
    </span>
    <a href="https://spring.io/">
     <span class="url">
      <span class="koboSpan" id="kobo.284.1">
       https://spring.io/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.285.1">
     ), with version 1.0 released in 2004.
    </span>
    <span class="koboSpan" id="kobo.285.2">
     Among other features and modules, it provided support for dependency injection, aspect-oriented programming, and Spring Web MVC, the module enabling web service implementation with controller classes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.286.1">
     Spring Framework
    </span>
    <a id="_idIndexMarker887">
    </a>
    <span class="koboSpan" id="kobo.287.1">
     with
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.288.1">
      Spring Web MVC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.289.1">
     (commonly referred to as just
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.290.1">
      Spring Web
     </span>
    </strong>
    <span class="koboSpan" id="kobo.291.1">
     ) and
    </span>
    <a id="_idIndexMarker888">
    </a>
    <span class="koboSpan" id="kobo.292.1">
     many other modules, thanks to improvements in developer experience, has become very popular and is the most used framework for developing server-side Java applications currently.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.293.1">
     The requirement to deploy applications to a separate software product, the Java EE container, was perceived as an unnecessary additional step by developers.
    </span>
    <span class="koboSpan" id="kobo.293.2">
     Upgrades of application servers required organizational coordination that caused them to be complex and slow, impeding technical modernization, including the upgrades to new Java (SE) versions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.294.1">
     To prevent CPU and memory usage or specific extensions of one application from influencing other applications, there is a common practice to use a separate application server instance for each application.
    </span>
   </p>
   <p class="normal">
    <em class="italic">
     <span class="koboSpan" id="kobo.295.1">
      Spring Boot
     </span>
    </em>
    <span class="koboSpan" id="kobo.296.1">
     , first released in 2014, brought the possibility to develop standalone Spring applications that can be run directly without a separate application server.
    </span>
    <span class="koboSpan" id="kobo.296.2">
     The application can be packaged as a simple
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.297.1">
      Java Archive (JAR)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.298.1">
     that
    </span>
    <a id="_idIndexMarker889">
    </a>
    <span class="koboSpan" id="kobo.299.1">
     includes an embedded web server (Tomcat by default).
    </span>
    <span class="koboSpan" id="kobo.299.2">
     Simplified deployment, together with other features such as easy configuration and sensible defaults, made Spring Boot a good fit for developing microservices.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.300.1">
     Although Spring Framework and Spring Boot have become a de facto standard in backend Java development, it is important to understand that Spring Web and many other Spring modules are just a layer on top of Java/Jakarta EE.
    </span>
    <span class="koboSpan" id="kobo.300.2">
     When
    </span>
    <a id="_idIndexMarker890">
    </a>
    <span class="koboSpan" id="kobo.301.1">
     using Spring Web, you use not only Spring-specific
    </span>
    <a id="_idIndexMarker891">
    </a>
    <span class="koboSpan" id="kobo.302.1">
     abstractions but also Java/Jakarta EE features directly: Servlet API, Java Bean Validation API, and so on.
    </span>
    <span class="koboSpan" id="kobo.302.2">
     By using a particular version of Spring, you automatically depend on a particular version of Java/Jakarta EE as well.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-299">
    <a id="_idTextAnchor320">
    </a>
    <span class="koboSpan" id="kobo.303.1">
     New microservice frameworks and MicroProfile
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.304.1">
     Jakarta EE and Spring
    </span>
    <a id="_idIndexMarker892">
    </a>
    <span class="koboSpan" id="kobo.305.1">
     Boot, thanks to their long history, are the most mature and most
    </span>
    <a id="_idIndexMarker893">
    </a>
    <span class="koboSpan" id="kobo.306.1">
     well-known server-side Java application frameworks, providing reliability and stability to many developers.
    </span>
    <span class="koboSpan" id="kobo.306.2">
     However, around the years 2018-2019, new frameworks such as
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.307.1">
      Micronaut
     </span>
    </em>
    <span class="koboSpan" id="kobo.308.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.309.1">
      Helidon
     </span>
    </em>
    <span class="koboSpan" id="kobo.310.1">
     , and
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.311.1">
      Quarkus
     </span>
    </em>
    <span class="koboSpan" id="kobo.312.1">
     gradually appeared, which, by not being limited by backward compatibility, could choose innovative approaches to application development and better meet the current challenges of microservices and cloud deployment.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.313.1">
     Highly scalable cloud-native applications need to be able to do the following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.314.1">
      Start new service instances quickly to adapt to higher load (upscaling) or to restart after failures
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.315.1">
      Use as little CPU, memory, and networking resources as possible to optimize cloud service costs
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.316.1">
     Such applications should have the following characteristics:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.317.1">
      A small application executable code size to minimize the time delay and network traffic needed to transfer the application to the cloud nodes where new service instances should run
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.318.1">
      A short service startup time (the time the service spends preparing before being able to serve requests)
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.319.1">
      A small and stable memory consumption (even if a service needs more memory during startup only, it will need a larger and more expensive cloud computing instance)
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.320.1">
     The new microservice frameworks address these challenges by bringing the following features:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.321.1">
      Limiting the number and complexity of library dependencies
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.322.1">
      Replacing dynamic processing during application startup (application configuration, dependency injection, and aspect-oriented programming) with static code generation during application build
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.323.1">
      Avoiding the use of reflection, dynamic class loading, or dynamic (proxy) class creation
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.324.1">
     The resulting applications are well-suited for ahead-of-time compilation to platform-native code (using
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.325.1">
      GraalVM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.326.1">
     – see
    </span>
    <a href="https://www.graalvm.org/">
     <span class="url">
      <span class="koboSpan" id="kobo.327.1">
       https://www.graalvm.org/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.328.1">
     )
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.329.1">
     On the other
    </span>
    <a id="_idIndexMarker894">
    </a>
    <span class="koboSpan" id="kobo.330.1">
     hand, the emergence of new frameworks brought the problems of how to avoid the fragmentation of the Java backend developer community and how to overcome the barrier of adoption of the frameworks because of a lack of developers familiar with their programming model.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.331.1">
     The Micronaut framework tries to help with the transition from Spring and Spring Boot by providing similar abstractions (controllers), supporting many Spring annotations, and other compatibility features to make the transition from Spring smooth.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.332.1">
     All the new frameworks try to some extent to exploit the potential of the experience and the broad community around the Java/Jakarta EE standards.
    </span>
    <span class="koboSpan" id="kobo.332.2">
     Due to their lightweight nature, they choose to implement only selected parts of the Jakarta EE specification.
    </span>
    <span class="koboSpan" id="kobo.332.3">
     In contrast, they do implement additional features required by distributed cloud-native applications, such as declarative REST clients, observability, fault tolerance, and so on, that were not standardized within Jakarta EE.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.333.1">
     Many of the above-mentioned features were standardized in the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.334.1">
      MicroProfile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.335.1">
     specification (
    </span>
    <a href="https://microprofile.io/">
     <span class="url">
      <span class="koboSpan" id="kobo.336.1">
       https://microprofile.io/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.337.1">
     ) whose version 1.0 was created in 2016.
    </span>
    <span class="koboSpan" id="kobo.337.2">
     Shortly after its creation, the MicroProfile project joined the Eclipse Foundation.
    </span>
    <span class="koboSpan" id="kobo.337.3">
     The latest MicroProfile version available at the time of writing
    </span>
    <a id="_idIndexMarker895">
    </a>
    <span class="koboSpan" id="kobo.338.1">
     this
    </span>
    <a id="_idIndexMarker896">
    </a>
    <span class="koboSpan" id="kobo.339.1">
     book is 7.0.
    </span>
    <span class="koboSpan" id="kobo.339.2">
     It is aligned with version 10.0 of Jakarta EE.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.340.1">
     The subset of Jakarta EE that overlaps with MicroProfile
    </span>
    <a id="_idIndexMarker897">
    </a>
    <span class="koboSpan" id="kobo.341.1">
     is named the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.342.1">
      Core Profile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.343.1">
     .
    </span>
    <span class="koboSpan" id="kobo.343.2">
     The parts of the Core Profile that are the most interesting in the context of this book are Jakarta RESTful Web Services, Jakarta JSON Binding, and Jakarta JSON Processing.
    </span>
    <span class="koboSpan" id="kobo.343.3">
     The Core Profile also contains the lightweight dependency injection framework called Jakarta CDI Lite, Jakarta Interceptors, and obviously Jakarta Annotations as a common dependency.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.344.1">
     MicroProfile 7.0 extends the Core Profile with the following modules, which are very relevant for API and microservice implementation:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.345.1">
       OpenAPI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.346.1">
      : Generating OpenAPI specification from code for the code-first approach, we showed its Spring alternative in
     </span>
     <a href="B21843_03.xhtml#_idTextAnchor076">
      <em class="italic">
       <span class="koboSpan" id="kobo.347.1">
        Chapter 3
       </span>
      </em>
     </a>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.348.1">
       REST Client
      </span>
     </strong>
     <span class="koboSpan" id="kobo.349.1">
      : For consuming REST APIs using the code-first approach (we used the specification-first approach with client code generation in
     </span>
     <a href="B21843_04.xhtml#_idTextAnchor096">
      <em class="italic">
       <span class="koboSpan" id="kobo.350.1">
        Chapter 4
       </span>
      </em>
     </a>
     <span class="koboSpan" id="kobo.351.1">
      )
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.352.1">
       Fault tolerance
      </span>
     </strong>
     <span class="koboSpan" id="kobo.353.1">
      : Also known as resilience, discussed in
     </span>
     <a href="B21843_06.xhtml#_idTextAnchor135">
      <em class="italic">
       <span class="koboSpan" id="kobo.354.1">
        Chapter 6
       </span>
      </em>
     </a>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.355.1">
       JWT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.356.1">
      authentication: An important part of API security, discussed in
     </span>
     <a href="B21843_07.xhtml#_idTextAnchor176">
      <em class="italic">
       <span class="koboSpan" id="kobo.357.1">
        Chapter 7
       </span>
      </em>
     </a>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.358.1">
       Telemetry
      </span>
     </strong>
     <span class="koboSpan" id="kobo.359.1">
      : Providing observability, we showed this aspect using Spring in
     </span>
     <a href="B21843_09.xhtml#_idTextAnchor240">
      <em class="italic">
       <span class="koboSpan" id="kobo.360.1">
        Chapter 9
       </span>
      </em>
     </a>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.361.1">
       Health:
      </span>
     </strong>
     <span class="koboSpan" id="kobo.362.1">
      Used by orchestrators such as Kubernetes to probe a service instance for its healthand readiness to serve requests, a functionality provided by the Actuator in Spring Boot, we will show this using Spring in
     </span>
     <a href="B21843_12.xhtml#_idTextAnchor330">
      <em class="italic">
       <span class="koboSpan" id="kobo.363.1">
        Chapter 12
       </span>
      </em>
     </a>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.364.1">
       Config
      </span>
     </strong>
     <span class="koboSpan" id="kobo.365.1">
      : Flexible configuration options, a common requirement for cloud-native services
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.366.1">
     After listing the
    </span>
    <a id="_idIndexMarker898">
    </a>
    <span class="koboSpan" id="kobo.367.1">
     abstract
    </span>
    <a id="_idIndexMarker899">
    </a>
    <span class="koboSpan" id="kobo.368.1">
     concepts that the MicroProfile specification covers, in the following sections, we will show small examples of API implementations using two frameworks that fully implement the MicroProfile specification:
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.369.1">
      Quarkus
     </span>
    </em>
    <span class="koboSpan" id="kobo.370.1">
     and
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.371.1">
      Helidon
     </span>
    </em>
    <span class="koboSpan" id="kobo.372.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-300">
    <a id="_idTextAnchor321">
    </a>
    <span class="koboSpan" id="kobo.373.1">
     Example implementation with Quarkus
    </span>
   </h1>
   <p class="normal">
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.374.1">
      Quarkus
     </span>
    </strong>
    <span class="koboSpan" id="kobo.375.1">
     (
    </span>
    <a href="https://quarkus.io/">
     <span class="url">
      <span class="koboSpan" id="kobo.376.1">
       https://quarkus.io/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.377.1">
     ) is a framework providing optimized startup time and memory usage.
    </span>
    <span class="koboSpan" id="kobo.377.2">
     Quarkus
    </span>
    <a id="_idIndexMarker900">
    </a>
    <span class="koboSpan" id="kobo.378.1">
     makes deployment to Kubernetes and the cloud easy in many ways.
    </span>
    <span class="koboSpan" id="kobo.378.2">
     Despite being relatively new, thanks to its great developer experience, it has been adopted quickly in many enterprise application development projects.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.379.1">
     Among other features, Quarkus boasts its
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.380.1">
      development mode (dev mode)
     </span>
    </em>
    <span class="koboSpan" id="kobo.381.1">
     , which detects changes in Java source files or resource files (e.g., configuration properties), recompiles them automatically, and applies them (if possible) to the running application (performs a so-called hot deployment) without a need for an explicit restart.
    </span>
    <span class="koboSpan" id="kobo.381.2">
     With the dev mode, the developer gets fast feedback without losing focus on the code due to lengthy application rebuilds and restarts.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.382.1">
     We will start our Quarkus example by implementing the Product API, as we did in
    </span>
    <a href="B21843_02.xhtml#_idTextAnchor050">
     <em class="italic">
      <span class="koboSpan" id="kobo.383.1">
       Chapter 2
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.384.1">
     with Spring Boot.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-301">
    <a id="_idTextAnchor322">
    </a>
    <span class="koboSpan" id="kobo.385.1">
     Exposing the Product API
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.386.1">
     We will
    </span>
    <a id="_idIndexMarker901">
    </a>
    <span class="koboSpan" id="kobo.387.1">
     use the same
    </span>
    <a id="_idIndexMarker902">
    </a>
    <span class="koboSpan" id="kobo.388.1">
     endpoint design as in
    </span>
    <a href="B21843_02.xhtml#_idTextAnchor050">
     <em class="italic">
      <span class="koboSpan" id="kobo.389.1">
       Chapter 2
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.390.1">
     :
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.391.1">
       GET /products
      </span>
     </code>
     <span class="koboSpan" id="kobo.392.1">
      to list all products
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.393.1">
       PUT /products/{id}
      </span>
     </code>
     <span class="koboSpan" id="kobo.394.1">
      to create or update a product
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.395.1">
       DELETE /products/{id}
      </span>
     </code>
     <span class="koboSpan" id="kobo.396.1">
      to remove a product
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.397.1">
       PATCH /products/{id}
      </span>
     </code>
     <span class="koboSpan" id="kobo.398.1">
      to update product description only
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.399.1">
       GET /products/{id}
      </span>
     </code>
     <span class="koboSpan" id="kobo.400.1">
      to get the data of one product.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.401.1">
     We will use the same Clean Architecture structure, so for exposing the REST API we will focus on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.402.1">
      *.adapter.inbound.rest
     </span>
    </code>
    <span class="koboSpan" id="kobo.403.1">
     package.
    </span>
    <span class="koboSpan" id="kobo.403.2">
     The main class in the package is the resource class.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-302">
    <a id="_idTextAnchor323">
    </a>
    <span class="koboSpan" id="kobo.404.1">
     The resource class
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.405.1">
     In accordance with
    </span>
    <a id="_idIndexMarker903">
    </a>
    <span class="koboSpan" id="kobo.406.1">
     the Jakarta REST terminology, the class handling the REST resource endpoints is named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.407.1">
      ProductResource
     </span>
    </code>
    <span class="koboSpan" id="kobo.408.1">
     .
    </span>
    <span class="koboSpan" id="kobo.408.2">
     The base URL path for the resource endpoints is specified using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.409.1">
      @Path
     </span>
    </code>
    <span class="koboSpan" id="kobo.410.1">
     annotation:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.411.1">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.412.1">Path</span></span><span class="koboSpan" id="kobo.413.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.414.1">"/api/products"</span></span><span class="koboSpan" id="kobo.415.1">)
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.416.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.417.1">ProductResource</span></span><span class="koboSpan" id="kobo.418.1"> {
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.419.1">
     Each endpoint is implemented by a handler method.
    </span>
    <span class="koboSpan" id="kobo.419.2">
     Let us start with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.420.1">
      createOrUpdateProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.421.1">
     operation:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.422.1">    @</span><span class="hljs-variable"><span class="koboSpan" id="kobo.423.1">PUT</span></span><span class="koboSpan" id="kobo.424.1">
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.425.1">Path</span></span><span class="koboSpan" id="kobo.426.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.427.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.428.1">{productId}"</span></span><span class="koboSpan" id="kobo.429.1">)
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.430.1">Consumes</span></span><span class="koboSpan" id="kobo.431.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.432.1">MediaType</span></span><span class="koboSpan" id="kobo.433.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.434.1">APPLICATION_JSON</span></span><span class="koboSpan" id="kobo.435.1">)
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.436.1">Produces</span></span><span class="koboSpan" id="kobo.437.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.438.1">MediaType</span></span><span class="koboSpan" id="kobo.439.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.440.1">APPLICATION_JSON</span></span><span class="koboSpan" id="kobo.441.1">)
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.442.1">Response</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.443.1">createOrUpdateProduct</span></span><span class="koboSpan" id="kobo.444.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.445.1">        @PathParam(</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.446.1">"productId"</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.447.1">) @ValidSku </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.448.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.449.1"> productId,</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.450.1">        @Valid ProductInput productInput</span></span><span class="koboSpan" id="kobo.451.1">) {
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.452.1">
     There are multiple annotations on the method and its arguments:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.453.1">
       @PUT
      </span>
     </code>
     <span class="koboSpan" id="kobo.454.1">
      : The HTTP method
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.455.1">
       @Path
      </span>
     </code>
     <span class="koboSpan" id="kobo.456.1">
      : The endpoint relative path
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.457.1">
       @Consumes
      </span>
     </code>
     <span class="koboSpan" id="kobo.458.1">
      : The expected request content type
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.459.1">
       @Produces
      </span>
     </code>
     <span class="koboSpan" id="kobo.460.1">
      : The response content type
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.461.1">
       @PathParam
      </span>
     </code>
     <span class="koboSpan" id="kobo.462.1">
      : The argument bound to the URL path parameter
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.463.1">
     The built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.464.1">
      @Valid
     </span>
    </code>
    <span class="koboSpan" id="kobo.465.1">
     and custom
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.466.1">
      @ValidSku
     </span>
    </code>
    <span class="koboSpan" id="kobo.467.1">
     bean validation annotations are used the same way as with Spring Boot.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.468.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.469.1">
      Response
     </span>
    </code>
    <span class="koboSpan" id="kobo.470.1">
     method return type, like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.471.1">
      ResponseEntity
     </span>
    </code>
    <span class="koboSpan" id="kobo.472.1">
     in Spring Boot, lets the method body decide on the HTTP response code and additional response headers dynamically.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.473.1">
     The method to list all products is quite simple; the only annotation needed is the HTTP method, and the method
    </span>
    <a id="_idIndexMarker904">
    </a>
    <span class="koboSpan" id="kobo.474.1">
     returns the body of the HTTP response directly:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.475.1">    @</span><span class="hljs-variable"><span class="koboSpan" id="kobo.476.1">GET</span></span><span class="koboSpan" id="kobo.477.1">
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.478.1">Produces</span></span><span class="koboSpan" id="kobo.479.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.480.1">MediaType</span></span><span class="koboSpan" id="kobo.481.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.482.1">APPLICATION_JSON</span></span><span class="koboSpan" id="kobo.483.1">)
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.484.1">List</span></span><span class="koboSpan" id="kobo.485.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.486.1">ProductOutput</span></span><span class="koboSpan" id="kobo.487.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.488.1">getProducts</span></span><span class="koboSpan" id="kobo.489.1">() {
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.490.1">
     The method to get one product by its ID is similar, but in addition, it needs the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.491.1">
      productId
     </span>
    </code>
    <span class="koboSpan" id="kobo.492.1">
     path parameter:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.493.1">    @</span><span class="hljs-variable"><span class="koboSpan" id="kobo.494.1">GET</span></span><span class="koboSpan" id="kobo.495.1">
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.496.1">Produces</span></span><span class="koboSpan" id="kobo.497.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.498.1">MediaType</span></span><span class="koboSpan" id="kobo.499.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.500.1">APPLICATION_JSON</span></span><span class="koboSpan" id="kobo.501.1">)
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.502.1">Path</span></span><span class="koboSpan" id="kobo.503.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.504.1">"{productId}"</span></span><span class="koboSpan" id="kobo.505.1">)
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.506.1">ProductOutput</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.507.1">getProductById</span></span><span class="koboSpan" id="kobo.508.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.509.1">        @PathParam(</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.510.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.511.1">productId"</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.512.1">) @ValidSku </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.513.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.514.1"> productId</span></span><span class="koboSpan" id="kobo.515.1">) {
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.516.1">
     Here’s the method to update a product description:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.517.1">    @</span><span class="hljs-variable"><span class="koboSpan" id="kobo.518.1">PATCH</span></span><span class="koboSpan" id="kobo.519.1">
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.520.1">Path</span></span><span class="koboSpan" id="kobo.521.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.522.1">"{productId}"</span></span><span class="koboSpan" id="kobo.523.1">)
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.524.1">ProductOutput</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.525.1">editProduct</span></span><span class="koboSpan" id="kobo.526.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.527.1">        @PathParam(</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.528.1">"productId"</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.529.1">) @ValidSku </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.530.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.531.1"> productId,</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.532.1">        @Valid ProductDescriptionInput input</span></span><span class="koboSpan" id="kobo.533.1">) {
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.534.1">
     And finally, the method to remove a product:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.535.1">    @</span><span class="hljs-variable"><span class="koboSpan" id="kobo.536.1">DELETE</span></span><span class="koboSpan" id="kobo.537.1">
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.538.1">Path</span></span><span class="koboSpan" id="kobo.539.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.540.1">"{productId}"</span></span><span class="koboSpan" id="kobo.541.1">)
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.542.1">Response</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.543.1">deleteProduct</span></span><span class="koboSpan" id="kobo.544.1">(
</span><span class="hljs-params"><span class="koboSpan" id="kobo.545.1">        @PathParam(</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.546.1">"productId"</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.547.1">) @ValidSku </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.548.1">String</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.549.1"> productId</span></span><span class="koboSpan" id="kobo.550.1">) {
</span></code></pre>
   <div class="note">
    <div>
     <span class="koboSpan" id="kobo.551.1">
      <img alt="img" src="../Images/Information_Box_Icon.png"/>
     </span>
    </div>
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.552.1">
       Keeping within the standard
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.553.1">
      Please note that, in the resource class, we deliberately decided to only use the annotations from packages starting with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.554.1">
       jakarta.
      </span>
     </code>
     <span class="koboSpan" id="kobo.555.1">
      prefix so that our code stays within the MicroProfile specification.
     </span>
     <span class="koboSpan" id="kobo.555.2">
      We could have used other annotations supported by Quarkus (and recommended in some tutorials) – for example,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.556.1">
       org.jboss.resteasy.RestPath
      </span>
     </code>
     <span class="koboSpan" id="kobo.557.1">
      instead of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.558.1">
       jakarta.ws.rs.PathParam
      </span>
     </code>
     <span class="koboSpan" id="kobo.559.1">
      – and we could have skipped specifying the parameter name (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.560.1">
       "productId"
      </span>
     </code>
     <span class="koboSpan" id="kobo.561.1">
      ) as it would be inferred from the method argument name.
     </span>
     <span class="koboSpan" id="kobo.561.2">
      However, that would make the code Quarkus-specific.
     </span>
     <span class="koboSpan" id="kobo.561.3">
      For the reasons stated earlier in this chapter, it makes sense to use standardized APIs even if it means sacrificing a little bit of the convenience some specific implementation may offer.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.562.1">
     The rest of the
    </span>
    <a id="_idIndexMarker905">
    </a>
    <span class="koboSpan" id="kobo.563.1">
     package (DTOs, mappers, and the ValidSku annotation) are framework-independent, so the code is the same as for Spring Boot.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.564.1">
     To handle exceptions by mapping them to the correct HTTP responses, MicroProfile supports the ExceptionMapper interface, described in the following section.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-303">
    <a id="_idTextAnchor324">
    </a>
    <span class="koboSpan" id="kobo.565.1">
     Exception mappers
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.566.1">
     For our example API, we
    </span>
    <a id="_idIndexMarker906">
    </a>
    <span class="koboSpan" id="kobo.567.1">
     want to define mappings for two exception types:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.568.1">
       EntityNotFoundException
      </span>
     </code>
     <span class="koboSpan" id="kobo.569.1">
      , meaning a product with the given ID is not found
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.570.1">
       ValidationException
      </span>
     </code>
     <span class="koboSpan" id="kobo.571.1">
      , meaning some input does not comply with the bean validation annotations
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.572.1">
     Both mapper classes are alike, so it will suffice if we show the first of them:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.573.1">package com.</span><span class="hljs-property"><span class="koboSpan" id="kobo.574.1">packt</span></span><span class="koboSpan" id="kobo.575.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.576.1">productapi</span></span><span class="koboSpan" id="kobo.577.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.578.1">adapter</span></span><span class="koboSpan" id="kobo.579.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.580.1">exception</span></span><span class="koboSpan" id="kobo.581.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.582.1">import</span></span><span class="koboSpan" id="kobo.583.1"> com.</span><span class="hljs-property"><span class="koboSpan" id="kobo.584.1">packt</span></span><span class="koboSpan" id="kobo.585.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.586.1">productapi</span></span><span class="koboSpan" id="kobo.587.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.588.1">adapter</span></span><span class="koboSpan" id="kobo.589.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.590.1">inbound</span></span><span class="koboSpan" id="kobo.591.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.592.1">rest</span></span><span class="koboSpan" id="kobo.593.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.594.1">dto</span></span><span class="koboSpan" id="kobo.595.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.596.1">ProblemDetail</span></span><span class="koboSpan" id="kobo.597.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.598.1">import</span></span><span class="koboSpan" id="kobo.599.1"> jakarta.</span><span class="hljs-property"><span class="koboSpan" id="kobo.600.1">ws</span></span><span class="koboSpan" id="kobo.601.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.602.1">rs</span></span><span class="koboSpan" id="kobo.603.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.604.1">core</span></span><span class="koboSpan" id="kobo.605.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.606.1">Response</span></span><span class="koboSpan" id="kobo.607.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.608.1">import</span></span><span class="koboSpan" id="kobo.609.1"> jakarta.</span><span class="hljs-property"><span class="koboSpan" id="kobo.610.1">ws</span></span><span class="koboSpan" id="kobo.611.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.612.1">rs</span></span><span class="koboSpan" id="kobo.613.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.614.1">ext</span></span><span class="koboSpan" id="kobo.615.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.616.1">ExceptionMapper</span></span><span class="koboSpan" id="kobo.617.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.618.1">import</span></span><span class="koboSpan" id="kobo.619.1"> jakarta.</span><span class="hljs-property"><span class="koboSpan" id="kobo.620.1">ws</span></span><span class="koboSpan" id="kobo.621.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.622.1">rs</span></span><span class="koboSpan" id="kobo.623.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.624.1">ext</span></span><span class="koboSpan" id="kobo.625.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.626.1">Provider</span></span><span class="koboSpan" id="kobo.627.1">;
@</span><span class="hljs-title"><span class="koboSpan" id="kobo.628.1">Provider</span></span><span class="koboSpan" id="kobo.629.1">
public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.630.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.631.1">NotFoundExceptionMapper</span></span><span class="koboSpan" id="kobo.632.1"> implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.633.1">ExceptionMapper</span></span><span class="koboSpan" id="kobo.634.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.635.1">EntityNotFoundException</span></span><span class="koboSpan" id="kobo.636.1">&gt; {
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.637.1">Override</span></span><span class="koboSpan" id="kobo.638.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.639.1">Response</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.640.1">toResponse</span></span><span class="koboSpan" id="kobo.641.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.642.1">EntityNotFoundException</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.643.1">                               entityNotFoundException</span></span><span class="koboSpan" id="kobo.644.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.645.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.646.1">Response</span></span><span class="koboSpan" id="kobo.647.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.648.1">status</span></span><span class="koboSpan" id="kobo.649.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.650.1">Response</span></span><span class="koboSpan" id="kobo.651.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.652.1">Status</span></span><span class="koboSpan" id="kobo.653.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.654.1">NOT_FOUND</span></span><span class="koboSpan" id="kobo.655.1">)
                .</span><span class="hljs-title"><span class="koboSpan" id="kobo.656.1">entity</span></span><span class="koboSpan" id="kobo.657.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.658.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.659.1">ProblemDetail</span></span><span class="koboSpan" id="kobo.660.1">(
                        </span><span class="hljs-title"><span class="koboSpan" id="kobo.661.1">Response</span></span><span class="koboSpan" id="kobo.662.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.663.1">Status</span></span><span class="koboSpan" id="kobo.664.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.665.1">NOT_FOUND</span></span><span class="koboSpan" id="kobo.666.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.667.1">getReasonPhrase</span></span><span class="koboSpan" id="kobo.668.1">(),
                        </span><span class="hljs-title"><span class="koboSpan" id="kobo.669.1">Response</span></span><span class="koboSpan" id="kobo.670.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.671.1">Status</span></span><span class="koboSpan" id="kobo.672.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.673.1">NOT_FOUND</span></span><span class="koboSpan" id="kobo.674.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.675.1">getStatusCode</span></span><span class="koboSpan" id="kobo.676.1">(),
                        entityNotFoundException.</span><span class="hljs-title"><span class="koboSpan" id="kobo.677.1">getMessage</span></span><span class="koboSpan" id="kobo.678.1">()))
                .</span><span class="hljs-title"><span class="koboSpan" id="kobo.679.1">build</span></span><span class="koboSpan" id="kobo.680.1">();
    }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.681.1">
     It can be seen that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.682.1">
      ProblemDetail
     </span>
    </code>
    <span class="koboSpan" id="kobo.683.1">
     DTO is defined in our code as it is not provided by Jakarta REST.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.684.1">
     In the following section, we
    </span>
    <a id="_idIndexMarker907">
    </a>
    <span class="koboSpan" id="kobo.685.1">
     will briefly mention the remaining parts of our application and test the REST API.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-304">
    <a id="_idTextAnchor325">
    </a>
    <span class="koboSpan" id="kobo.686.1">
     Completing and testing the Quarkus application
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.687.1">
     Classes in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.688.1">
      domain
     </span>
    </code>
    <span class="koboSpan" id="kobo.689.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.690.1">
      usecase
     </span>
    </code>
    <span class="koboSpan" id="kobo.691.1">
     packages, decoupled from the communication layers using Clean Architecture, need
    </span>
    <a id="_idIndexMarker908">
    </a>
    <span class="koboSpan" id="kobo.692.1">
     not change when we switch from Spring Boot to Quarkus.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.693.1">
     To create a working Quarkus application, we need to implement persistence.
    </span>
    <span class="koboSpan" id="kobo.693.2">
     We use Jakarta Persistence to map the database tables to entity classes.
    </span>
    <span class="koboSpan" id="kobo.693.3">
     However, to be able to access the database using the Repository pattern (as we did with Spring Data), we have to use Panache, which is a module specific to Quarkus.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.694.1">
     The repository pattern for persistence is not standardized within MicroProfile; however, there isthe new Jakarta Data specification in Jakarta EE 11.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.695.1">
     To link the components of our application together, we use dependency injection with Jakarta Contexts and Dependency Injection (CDI) features (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.696.1">
      @ApplicationScoped
     </span>
    </code>
    <span class="koboSpan" id="kobo.697.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.698.1">
      @Inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.699.1">
     annotations) that are supported by MicroProfile.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.700.1">
     As persistence and dependency injection are concepts that are not specific to RESTful web service implementation, we are not going to explain in more detail how to use them with Quarkus, MicroProfile, or Jakarta EE.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.701.1">
     When we have the application code complete, we can start the application using the convenient Quarkus dev mode:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.702.1">./mvnw compile quarkus:dev
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.703.1">
     Then we can try the API endpoints using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.704.1">
      curl
     </span>
    </code>
    <span class="koboSpan" id="kobo.705.1">
     commands, creating the product with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.706.1">
      PUT
     </span>
    </code>
    <span class="koboSpan" id="kobo.707.1">
     method:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.708.1">curl -v -X PUT http://localhost:8080/api/products/AK12345 -d '{"name":"testprod235","description":"test description","price":123.45}' -H 'Content-Type: application/json'
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.709.1">
     We list all products:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.710.1">curl -v http://localhost:8080/api/products/
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.711.1">
     In the next chapter, we
    </span>
    <a id="_idIndexMarker909">
    </a>
    <span class="koboSpan" id="kobo.712.1">
     will get the documentation of the API we have just created in the OpenAPI standard.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-305">
    <a id="_idTextAnchor326">
    </a>
    <span class="koboSpan" id="kobo.713.1">
     Getting the API specification from the code
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.714.1">
     We saw how
    </span>
    <a id="_idIndexMarker910">
    </a>
    <span class="koboSpan" id="kobo.715.1">
     the implementation-independent
    </span>
    <a id="_idIndexMarker911">
    </a>
    <span class="koboSpan" id="kobo.716.1">
     specification of an API can be generated for a Spring Boot application in
    </span>
    <a href="B21843_03.xhtml#_idTextAnchor076">
     <em class="italic">
      <span class="koboSpan" id="kobo.717.1">
       Chapter 3
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.718.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.719.1">
     A similar code-first approach is available for MicroProfile applications, thanks to the MicroProfile OpenAPI specification.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.720.1">
     We will add just one dependency in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.721.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.722.1">
     file of our Quarkus application:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.723.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.724.1">dependency</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.725.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.726.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.727.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.728.1">&gt;</span></span><span class="koboSpan" id="kobo.729.1">io.quarkus</span><span class="hljs-tag"><span class="koboSpan" id="kobo.730.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.731.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.732.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.733.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.734.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.735.1">&gt;</span></span><span class="koboSpan" id="kobo.736.1">quarkus-smallrye-openapi</span><span class="hljs-tag"><span class="koboSpan" id="kobo.737.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.738.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.739.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.740.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.741.1">dependency</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.742.1">&gt;</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.743.1">
     Now we can enter the Swagger UI by opening the
    </span>
    <a href="http://localhost:8080/q/swagger-ui/">
     <span class="url">
      <span class="koboSpan" id="kobo.744.1">
       http://localhost:8080/q/swagger-ui/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.745.1">
     URL in a web browser.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.746.1">
     <img alt="Figure 11.1 – Swagger UI generated from a Quarkus application" src="../Images/B21843_11_1.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.747.1">
     Figure 11.1 – Swagger UI generated from a Quarkus application
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.748.1">
     The OpenAPI specification (in YAML format) can be downloaded using the
    </span>
    <a href="http://localhost:8080/q/openapi">
     <span class="url">
      <span class="koboSpan" id="kobo.749.1">
       http://localhost:8080/q/openapi
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.750.1">
     URL.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.751.1">
     We have shown
    </span>
    <a id="_idIndexMarker912">
    </a>
    <span class="koboSpan" id="kobo.752.1">
     how to create and document the
    </span>
    <a id="_idIndexMarker913">
    </a>
    <span class="koboSpan" id="kobo.753.1">
     Product API with Quarkus using the code-first approach.
    </span>
    <span class="koboSpan" id="kobo.753.2">
     In the next chapter, you will see that, even with Quarkus, we can create APIs specification-first, using Java code generation
    </span>
    <a id="_idIndexMarker914">
    </a>
    <span class="koboSpan" id="kobo.754.1">
     from
    </span>
    <a id="_idIndexMarker915">
    </a>
    <span class="koboSpan" id="kobo.755.1">
     OpenAPI.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-306">
    <a id="_idTextAnchor327">
    </a>
    <span class="koboSpan" id="kobo.756.1">
     Generating MicroProfile code from OpenAPI
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.757.1">
     We are going
    </span>
    <a id="_idIndexMarker916">
    </a>
    <span class="koboSpan" id="kobo.758.1">
     to create a stub (not the full implementation) of
    </span>
    <a id="_idIndexMarker917">
    </a>
    <span class="koboSpan" id="kobo.759.1">
     the Order Management API that
    </span>
    <a id="_idIndexMarker918">
    </a>
    <span class="koboSpan" id="kobo.760.1">
     was implemented with Spring Boot in
    </span>
    <a href="B21843_04.xhtml#_idTextAnchor096">
     <em class="italic">
      <span class="koboSpan" id="kobo.761.1">
       Chapter 4
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.762.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.763.1">
     We’ll use the same
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.764.1">
      Order_Management_API.yml
     </span>
    </code>
    <span class="koboSpan" id="kobo.765.1">
     specification file as in
    </span>
    <a href="B21843_04.xhtml#_idTextAnchor096">
     <em class="italic">
      <span class="koboSpan" id="kobo.766.1">
       Chapter 4
      </span>
     </em>
    </a>
    <span class="koboSpan" id="kobo.767.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.768.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.769.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.770.1">
     file contains the same Quarkus dependencies as in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.771.1">
      Exposing the Product API
     </span>
    </em>
    <span class="koboSpan" id="kobo.772.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.772.2">
     Additionally, we add the plugin configurations to generate the code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.773.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.774.1">plugin</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.775.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.776.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.777.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.778.1">&gt;</span></span><span class="koboSpan" id="kobo.779.1">org.openapitools</span><span class="hljs-tag"><span class="koboSpan" id="kobo.780.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.781.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.782.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.783.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.784.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.785.1">&gt;</span></span><span class="koboSpan" id="kobo.786.1">openapi-generator-maven-plugin</span><span class="hljs-tag"><span class="koboSpan" id="kobo.787.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.788.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.789.1">&gt;</span></span><span class="koboSpan" id="kobo.790.1">
...
            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.791.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.792.1">configuration</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.793.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.794.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.795.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.796.1">&gt;</span></span><span class="koboSpan" id="kobo.797.1">${project.basedir}/
                  src/main/resources/Order_Management_API.yml</span><span class="hljs-tag"><span class="koboSpan" id="kobo.798.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.799.1">inputSpec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.800.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.801.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.802.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.803.1">&gt;</span></span><span class="koboSpan" id="kobo.804.1">jaxrs-spec</span><span class="hljs-tag"><span class="koboSpan" id="kobo.805.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.806.1">generatorName</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.807.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.808.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.809.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.810.1">&gt;</span></span><span class="koboSpan" id="kobo.811.1">
                    com.packt.ordermanagementapi.adapter.inbound.rest
                </span><span class="hljs-tag"><span class="koboSpan" id="kobo.812.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.813.1">apiPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.814.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.815.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.816.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.817.1">&gt;</span></span><span class="koboSpan" id="kobo.818.1">
                    com.packt.ordermanagementapi.adapter.inbound.rest.dto
                </span><span class="hljs-tag"><span class="koboSpan" id="kobo.819.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.820.1">modelPackage</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.821.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.822.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.823.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.824.1">&gt;</span></span><span class="koboSpan" id="kobo.825.1">Dto</span><span class="hljs-tag"><span class="koboSpan" id="kobo.826.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.827.1">modelNameSuffix</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.828.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.829.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.830.1">configOptions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.831.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.832.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.833.1">useJakartaEe</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.834.1">&gt;</span></span><span class="koboSpan" id="kobo.835.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.836.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.837.1">useJakartaEe</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.838.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.839.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.840.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.841.1">&gt;</span></span><span class="koboSpan" id="kobo.842.1">true</span><span class="hljs-tag"><span class="koboSpan" id="kobo.843.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.844.1">interfaceOnly</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.845.1">&gt;</span></span>
                    <span class="hljs-tag"><span class="koboSpan" id="kobo.846.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.847.1">useSwaggerAnnotations</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.848.1">&gt;</span></span><span class="koboSpan" id="kobo.849.1">false
...
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.850.1">
     Some configuration parameters are the same as with Spring: package names, model name suffix.
    </span>
    <span class="koboSpan" id="kobo.850.2">
     The generator name is different; we are using the one compliant with the JAX-RS specification.
    </span>
    <span class="koboSpan" id="kobo.850.3">
     We use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.851.1">
      useJakartaEe
     </span>
    </code>
    <span class="koboSpan" id="kobo.852.1">
     flag because the current version of the specification requires
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.853.1">
      jakarta
     </span>
    </code>
    <span class="koboSpan" id="kobo.854.1">
     instead of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.855.1">
      javax
     </span>
    </code>
    <span class="koboSpan" id="kobo.856.1">
     as the package prefix.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.857.1">
     We use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.858.1">
      interfaceOnly
     </span>
    </code>
    <span class="koboSpan" id="kobo.859.1">
     flag because we want our manually written classes to implement generated interfaces.
    </span>
    <span class="koboSpan" id="kobo.859.2">
     This way, if our implementation does not match the generated interface, it will be reported by the compiler automatically.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.860.1">
     Now we can run the Maven
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.861.1">
      compile
     </span>
    </code>
    <span class="koboSpan" id="kobo.862.1">
     goal:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.863.1">./mvnw clean compile
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.864.1">
     We can see
    </span>
    <a id="_idIndexMarker919">
    </a>
    <span class="koboSpan" id="kobo.865.1">
     the
    </span>
    <a id="_idIndexMarker920">
    </a>
    <span class="koboSpan" id="kobo.866.1">
     generated
    </span>
    <a id="_idIndexMarker921">
    </a>
    <span class="koboSpan" id="kobo.867.1">
     sources in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.868.1">
      target/generated-sources/openapi
     </span>
    </code>
    <span class="koboSpan" id="kobo.869.1">
     directory.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.870.1">
     If we try to run the Quarkus application now, and open the Swagger UI at
    </span>
    <a href="http://localhost:8080/q/swagger-ui/">
     <span class="url">
      <span class="koboSpan" id="kobo.871.1">
       http://localhost:8080/q/swagger-ui/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.872.1">
     , we will see that no REST endpoints (operations) are exposed:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.873.1">
     <img alt="Figure 11.2 – Swagger UI showing no operations" src="../Images/B21843_11_2.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.874.1">
     Figure 11.2 – Swagger UI showing no operations
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.875.1">
     We need to provide an implementation of the generated interface.
    </span>
    <span class="koboSpan" id="kobo.875.2">
     Before doing so, we need to add one more plugin to
    </span>
    <a id="_idIndexMarker922">
    </a>
    <span class="koboSpan" id="kobo.876.1">
     make
    </span>
    <a id="_idIndexMarker923">
    </a>
    <span class="koboSpan" id="kobo.877.1">
     the generated sources accessible from our manually written code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.878.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.879.1">plugin</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.880.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.881.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.882.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.883.1">&gt;</span></span><span class="koboSpan" id="kobo.884.1">org.codehaus.mojo</span><span class="hljs-tag"><span class="koboSpan" id="kobo.885.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.886.1">groupId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.887.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.888.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.889.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.890.1">&gt;</span></span><span class="koboSpan" id="kobo.891.1">build-helper-maven-plugin</span><span class="hljs-tag"><span class="koboSpan" id="kobo.892.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.893.1">artifactId</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.894.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.895.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.896.1">executions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.897.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.898.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.899.1">execution</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.900.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.901.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.902.1">phase</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.903.1">&gt;</span></span><span class="koboSpan" id="kobo.904.1">generate-sources</span><span class="hljs-tag"><span class="koboSpan" id="kobo.905.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.906.1">phase</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.907.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.908.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.909.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.910.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.911.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.912.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.913.1">&gt;</span></span><span class="koboSpan" id="kobo.914.1">add-source</span><span class="hljs-tag"><span class="koboSpan" id="kobo.915.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.916.1">goal</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.917.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.918.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.919.1">goals</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.920.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.921.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.922.1">configuration</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.923.1">&gt;</span></span>
                <span class="hljs-tag"><span class="koboSpan" id="kobo.924.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.925.1">sources</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.926.1">&gt;</span></span><span class="koboSpan" id="kobo.927.1">${basedir}/target/
                         generated-sources/openapi/src</span><span class="hljs-tag"><span class="koboSpan" id="kobo.928.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.929.1">sources</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.930.1">&gt;</span></span>
            <span class="hljs-tag"><span class="koboSpan" id="kobo.931.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.932.1">configuration</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.933.1">&gt;</span></span>
        <span class="hljs-tag"><span class="koboSpan" id="kobo.934.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.935.1">execution</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.936.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.937.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.938.1">executions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.939.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.940.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.941.1">plugin</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.942.1">&gt;</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.943.1">
     Just to demonstrate
    </span>
    <a id="_idIndexMarker924">
    </a>
    <span class="koboSpan" id="kobo.944.1">
     the concept, we will create a
    </span>
    <a id="_idIndexMarker925">
    </a>
    <span class="koboSpan" id="kobo.945.1">
     stub
    </span>
    <a id="_idIndexMarker926">
    </a>
    <span class="koboSpan" id="kobo.946.1">
     implementation of the generated interface:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.947.1">public </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.948.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.949.1">OrderResource</span></span><span class="koboSpan" id="kobo.950.1"> implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.951.1">OrdersApi</span></span><span class="koboSpan" id="kobo.952.1"> {
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.953.1">Override</span></span><span class="koboSpan" id="kobo.954.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.955.1">OrderResponseDto</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.956.1">ordersPost</span></span><span class="koboSpan" id="kobo.957.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.958.1">OrderRequestBodyDto</span></span>
<span class="hljs-params"><span class="koboSpan" id="kobo.959.1">                                       orderRequestBodyDto</span></span><span class="koboSpan" id="kobo.960.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.961.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.962.1">null</span></span><span class="koboSpan" id="kobo.963.1">;
    }
    @</span><span class="hljs-title"><span class="koboSpan" id="kobo.964.1">Override</span></span><span class="koboSpan" id="kobo.965.1">
    public </span><span class="hljs-title"><span class="koboSpan" id="kobo.966.1">List</span></span><span class="koboSpan" id="kobo.967.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.968.1">OrderResponseDto</span></span><span class="koboSpan" id="kobo.969.1">&gt; </span><span class="hljs-title"><span class="koboSpan" id="kobo.970.1">ordersGet</span></span><span class="koboSpan" id="kobo.971.1">() {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.972.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.973.1">List</span></span><span class="koboSpan" id="kobo.974.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.975.1">of</span></span><span class="koboSpan" id="kobo.976.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.977.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.978.1">OrderResponseDto</span></span><span class="koboSpan" id="kobo.979.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.980.1">id</span></span><span class="koboSpan" id="kobo.981.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.982.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.983.1">1"</span></span><span class="koboSpan" id="kobo.984.1">));
    }
...
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.985.1">
     Opening the Swagger UI again shows that the operations are now available.
    </span>
   </p>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.986.1">
     <img alt="img" src="../Images/B21843_11_3.png"/>
    </span>
    <span class="koboSpan" id="kobo.987.1">
     Figure 11.3 – Swagger UI of the Order Management API
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.988.1">
     We can test it, for
    </span>
    <a id="_idIndexMarker927">
    </a>
    <span class="koboSpan" id="kobo.989.1">
     example, by sending the
    </span>
    <a id="_idIndexMarker928">
    </a>
    <span class="koboSpan" id="kobo.990.1">
     POST
    </span>
    <a id="_idIndexMarker929">
    </a>
    <span class="koboSpan" id="kobo.991.1">
     request with the body.
    </span>
    <span class="koboSpan" id="kobo.991.2">
     The response will be empty (because our implementation is not complete) but successful (HTTP 2xx status code).
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-punctuation"><span class="koboSpan" id="kobo.992.1">{</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.993.1">"customer"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.994.1">:</span></span>  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.995.1">{</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.996.1">"customerType"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.997.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.998.1">"person"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.999.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1000.1">"firstName"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1001.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1002.1">"John"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1003.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1004.1">"lastName"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1005.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1006.1">"Doe"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1007.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1008.1">"streetAddress"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1009.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1010.1">"1234, Rest Street"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1011.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1012.1">"city"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1013.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1014.1">"Javatown"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1015.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1016.1">"postalCode"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1017.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1018.1">"12345"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.1019.1">},</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.1020.1">"products"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1021.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.1022.1">[</span></span>
    <span class="hljs-punctuation"><span class="koboSpan" id="kobo.1023.1">{</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.1024.1">"productSKU"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1025.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1026.1">"AK12345"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1027.1">,</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.1028.1">"quantity"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.1029.1">:</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.1030.1">1</span></span>
    <span class="hljs-punctuation"><span class="koboSpan" id="kobo.1031.1">}</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.1032.1">]</span></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.1033.1">}</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1034.1">
     In the last section
    </span>
    <a id="_idIndexMarker930">
    </a>
    <span class="koboSpan" id="kobo.1035.1">
     of the chapter, we will see that
    </span>
    <a id="_idIndexMarker931">
    </a>
    <span class="koboSpan" id="kobo.1036.1">
     similar
    </span>
    <a id="_idIndexMarker932">
    </a>
    <span class="koboSpan" id="kobo.1037.1">
     code to what we used with Quarkus can work with another framework, Helidon.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-307">
    <a id="_idTextAnchor328">
    </a>
    <span class="koboSpan" id="kobo.1038.1">
     Example implementation with Helidon
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1039.1">
     As we have used
    </span>
    <a id="_idIndexMarker933">
    </a>
    <span class="koboSpan" id="kobo.1040.1">
     the MicroProfile annotations only, exactly the same
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1041.1">
      ProductResource
     </span>
    </code>
    <span class="koboSpan" id="kobo.1042.1">
     class code that was used with Quarkus works with Helidon, too.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1043.1">
     Instead of the Panache repository-based data persistence implementation used with Quarkus, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1044.1">
      EntityManager
     </span>
    </code>
    <span class="koboSpan" id="kobo.1045.1">
     interface
    </span>
    <a id="_idIndexMarker934">
    </a>
    <span class="koboSpan" id="kobo.1046.1">
     of the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1047.1">
      Jakarta Persistence (JPA)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1048.1">
     specification directly.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1049.1">
     Obviously, compared to the Quarkus implementation, we had to put different dependencies in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1050.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.1051.1">
     file, and we used different configuration files, too.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1052.1">
     The application is built with this Maven command:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1053.1">./mvnw package
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1054.1">
     Then we can start the application JAR file:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1055.1">java -jar target/product-api-helidon.jar
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1056.1">
     Of course, the API of the running application will behave the same way as the other implementations, so it can be tested with the same
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1057.1">
      curl
     </span>
    </code>
    <span class="koboSpan" id="kobo.1058.1">
     commands.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1059.1">
     Thanks to the MicroProfile
    </span>
    <a id="_idIndexMarker935">
    </a>
    <span class="koboSpan" id="kobo.1060.1">
     OpenAPI compliance and Helidon OpenAPI UI module, when these dependencies are in our
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1061.1">
      pom.xml
     </span>
    </code>
    <span class="koboSpan" id="kobo.1062.1">
     file, we can see the documentation of the REST API in a web browser at
    </span>
    <a href="http://localhost:8080/openapi/ui">
     <span class="url">
      <span class="koboSpan" id="kobo.1063.1">
       http://localhost:8080/openapi/ui
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1064.1">
     .
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1065.1">
     <img alt="Figure 11.5 – OpenAPI UI generated by Helidon" src="../Images/B21843_11_4.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1066.1">
     Figure 11.5 – OpenAPI UI generated by Helidon
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1067.1">
     We can see that, using
    </span>
    <a id="_idIndexMarker936">
    </a>
    <span class="koboSpan" id="kobo.1068.1">
     the MicroProfile standard features, we get the same results when switching the frameworks from Quarkus to Helidon.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-308">
    <a id="_idTextAnchor329">
    </a>
    <span class="koboSpan" id="kobo.1069.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1070.1">
     In this chapter, we summarized from a high-level perspective, the different frameworks that can be used to implement Java services exposing REST APIs.
    </span>
    <span class="koboSpan" id="kobo.1070.2">
     Using a historical overview, we explained the different goals and features that motivated the creation of these frameworks.
    </span>
    <span class="koboSpan" id="kobo.1070.3">
     We explained how vendor-neutral standards help prevent developer community fragmentation and lock-in to a particular implementation technology.
    </span>
    <span class="koboSpan" id="kobo.1070.4">
     By implementing parts of our example APIs in two MicroProfile-compliant frameworks (Quarkus and Helidon), we demonstrated that the various REST API design principles we went through in the previous chapters can be applied regardless of the framework used and lead to application code with the same basic structure.
    </span>
   </p>
  </div>
 </body></html>