["```java\nExchange.setException(new IOException(\"My exception\"));\n```", "```java\nMessage msg = Exchange.getOut();\nmsg.setFault(true);\nmsg.setBody(\"Some Error Message\");\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project   xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.packt.camel</groupId>\n  <artifactId>chapter7a</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>bundle</packaging>\n\n  <dependencies>\n      <dependency>\n          <groupId>org.apache.camel</groupId>\n          <artifactId>camel-core</artifactId>\n          <version>2.12.4</version>\n      </dependency>\n  </dependencies>\n\n  <build>\n      <plugins>\n          <plugin>\n              <groupId>org.apache.felix</groupId>\n              <artifactId>maven-bundle-plugin</artifactId>\n              <version>2.3.7</version>\n              <extensions>true</extensions>\n              <configuration>\n                  <instructions>\n                      <Import-Package>*</Import-Package>\n                  </instructions>\n              </configuration>\n          </plugin>\n      </plugins>\n  </build>\n\n</project>\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"checker\" class=\"com.packt.camel.chapter7a.Checker\"/>\n\n  <camelContext >\n      <route>\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <to uri=\"bean:checker\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\npackage com.packt.camel.chapter7a;\n\npublic class Checker {\n\n  public String validate(String body) throws Exception {\n      String[] param = body.split(\"=\");\n      if (param.length != 2) {\n          throw new IllegalArgumentException(\"Bad parameter\");\n      }\n      if (!param[0].equalsIgnoreCase(\"message\")) {\n          throw new IllegalArgumentException(\"Message parameter expected\");\n      }\n      return \"Hello \" + param[1] + \"\\n\";\n  }\n\n}\n```", "```java\n$ mvn clean install\n[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------------------------------------------------\n[INFO] Building chapter7a 1.0-SNAPSHOT\n[INFO] -------------------------------------------------------------\n[INFO]\n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ chapter7a\n[INFO]\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ chapter7a ---\n[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] Copying 1 resource\n[INFO]\n[INFO] --- maven-compiler-plugin:3.2:compile (default-compile) @ chapter7a ---\n[INFO] Changes detected - recompiling the module!\n[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!\n[INFO] Compiling 1 source file to /home/jbonofre/Workspace/sample/chapter7a/target/classes\n[INFO]\n[INFO] --- maven-resources-plugin:2.6:testResources (default- testResources) @ chapter7a ---\n[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] skip non existing resourceDirectory /home/jbonofre/Workspace/sample/chapter7a/src/test/resources\n[INFO]\n[INFO] --- maven-compiler-plugin:3.2:testCompile (default- testCompile) @ chapter7a ---\n[INFO] No sources to compile\n[INFO]\n[INFO] --- maven-surefire-plugin:2.17:test (default-test) @ chapter7a\n[INFO] No tests to run.\n[INFO]\n[INFO] --- maven-bundle-plugin:2.3.7:bundle (default-bundle) @ chapter7a ---\n[INFO]\n[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ chapter7a ---\n[INFO] Installing /home/jbonofre/Workspace/sample/chapter7a/target/chapter7a-1.0- SNAPSHOT.jar to /home/jbonofre/.m2/repository/com/packt/camel/chapter7a/1.0- SNAPSHOT/chapter7a-1.0-SNAPSHOT.jar\n[INFO] Installing /home/jbonofre/Workspace/sample/chapter7a/pom.xml to /home/jbonofre/.m2/repository/com/packt/camel/chapter7a/1.0- SNAPSHOT/chapter7a-1.0-SNAPSHOT.pom\n[INFO]\n[INFO] --- maven-bundle-plugin:2.3.7:install (default-install) @ chapter7a ---\n[INFO] Installing com/packt/camel/chapter7a/1.0-SNAPSHOT/chapter7a- 1.0-SNAPSHOT.jar\n[INFO] Writing OBR metadata\n[INFO] --------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] --------------------------------------------------------------\n[INFO] Total time: 3.648 s\n[INFO] Finished at: 2015-03-04T10:19:55+01:00\n[INFO] Final Memory: 34M/1222M\n[INFO] --------------------------------------------------------------\n\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint\nkaraf@root()> feature:install camel-jetty\nRefreshing bundles org.apache.camel.camel-core (60)\n\n```", "```java\nkaraf@root()> bundle:install mvn:com.packt.camel/chapter7a/1.0- SNAPSHOT\nBundle ID: 86\nkaraf@root()> bundle:start 86\n\n```", "```java\n$ curl -d \"message=chapter7a\" http://localhost:9999/my/route\nHello chapter7a\n\n```", "```java\n$ curl -d \"foo=bar\" http://localhost:9999/my/route\njava.lang.IllegalArgumentException: Message parameter expected\n\n```", "```java\n2015-03-04 10:25:44,647 | ERROR | qtp766046018-75  | DefaultErrorHandler | rg.apache.camel.util.CamelLogger  215 | 60 - org.apache.camel.camel-core - 2.12.4 | Failed delivery for (MessageId: ID-latitude-40620-1425461026278-0-6 on ExchangeId: ID- latitude-40620-1425461026278-0-5). Exhausted after delivery attempt: 1 caught: java.lang.IllegalArgumentException: Message parameter expected\n\nMessage History\n---------------------------------------------------------------------------------------------------------------------------------------\nRouteId            ProcessorId        Processor                      Elapsed (ms)\n[route1]           [route1]           [http://0.0.0.0:9999/my/route] [4]\n[route1]           [to1]              [bean:checker]                 [3]\n\nExchange\n---------------------------------------------------------------------------------------------------------------------------------------\nExchange[\n Id                ID-latitude-40620-1425461026278-0-5\n ExchangePattern   InOut\n Headers           {Accept=*/*, breadcrumbId=ID-latitude-40620- 1425461026278-0-6, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=(POST /my/route)@132201555 org.eclipse.jetty.server.Request@7e13c53, CamelHttpServletResponse=HTTP/1.1 200\n^M\n, CamelHttpUri=/my/route, CamelHttpUrl=http://localhost:9999/my/route, CamelRedelivered=false, CamelRedeliveryCounter=0, CamelServletContextPath=/my/route, Content- Length=7, Content-Type=application/x-www-form-urlencoded, foo=bar, Host=localhost:9999, User-Agent=curl/7.35.0}\n BodyType \norg.apache.camel.converter.stream.InputStreamCache\n Body \n[Body is instance of org.apache.camel.StreamCache]\n]\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\njava.lang.IllegalArgumentException: Message parameter expected at com.packt.camel.chapter7a.Checker.validate(Checker.java:11)[86:com.packt.camel.chapter7a:1.0.0.SNAPSHOT]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"checker\" class=\"com.packt.camel.chapter7b.Checker\"/>\n\n  <camelContext >\n      <route errorHandlerRef=\"myDeadLetterErrorHandler\">\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <to uri=\"bean:checker\"/>\n      </route>\n      <route>\n          <from uri=\"direct:error\"/>\n          <convertBodyTo type=\"java.lang.String\"/>\n          <to uri=\"log:error\"/>\n      </route>\n  </camelContext>\n\n  <bean id=\"myDeadLetterErrorHandler\" class=\"org.apache.camel.builder.DeadLetterChannelBuilder\">\n      <property name=\"deadLetterUri\" value=\"direct:error\"/>\n      <property name=\"redeliveryPolicy\" ref=\"myRedeliveryPolicyConfig\"/>\n  </bean>\n\n  <bean id=\"myRedeliveryPolicyConfig\" class=\"org.apache.camel.processor.RedeliveryPolicy\">\n      <property name=\"maximumRedeliveries\" value=\"3\"/>\n      <property name=\"redeliveryDelay\" value=\"5000\"/>\n  </bean>\n\n</blueprint>\n```", "```java\n$ mvn clean install\n[INFO] ------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] -------------------------------------------------------\n\n```", "```java\nbin/karaf\n\n```", "```java\nkaraf@root()> feature:repo-add camel 2.12.4\nAdding feature url mvn:org.apache.camel.karaf/apache- camel/2.12.4/xml/features\nkaraf@root()> feature:install camel-blueprint camel-jetty\nRefreshing bundles org.apache.camel.camel-core (60)\nkaraf@root()>\n\n```", "```java\nkaraf@root()> bundle:install mvn:com.packt.camel/chapter7b/1.0- SNAPSHOT\nBundle ID: 86\nkaraf@root()> bundle:start 86\n\n```", "```java\n$ curl -d \"message=chapter7b\" http://localhost:9999/my/route\nHello chapter7b\n\n```", "```java\n$ curl -d \"foo=bar\" http://localhost:9999/my/route\n\n```", "```java\nfoo=bar\n\n```", "```java\n2015-03-04 15:00:29,838 | INFO  | qtp1470784256-76 | error | org.apache.camel.util.CamelLogger  176 | 60 - org.apache.camel.camel- core - 2.12.4 | Exchange[ExchangePattern: InOnly, BodyType: String,\n Body: foo=bar]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n  <bean id=\"checker\" class=\"com.packt.camel.chapter7c.Checker\"/>\n  <camelContext >\n      <errorHandler id=\"myLoggingErrorHandler\" type=\"LoggingErrorHandler\" logName=\"packt\" level=\"ERROR\"/>\n      <route id=\"main\" errorHandlerRef=\"myLoggingErrorHandler\">\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <to uri=\"bean:checker\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ curl -d \"foo=bar\" http://localhost:9999/my/route\njava.lang.IllegalArgumentException: Message parameter expected at com.packt.camel.chapter7c.Checker.validate(Checker.java:11)\n\n```", "```java\n2015-03-04 16:43:57,910 | ERROR | qtp1055249608-73 | packt | org.apache.camel.util.CamelLogger  215 | 60 - org.apache.camel.camel- core - 2.12.4 | Failed delivery for (MessageId: ID-latitude-41466- 1425483831913-0-2 on ExchangeId: ID-latitude-41466-1\n425483831913-0-1). Exhausted after delivery attempt: 1 caught: java.lang.IllegalArgumentException: Message parameter expected\n\nMessage History\n---------------------------------------------------------------------------------------------------------------------------------------\nRouteId            ProcessorId        Processor                                                                      Elapsed (ms)\n[route1]           [route1]           [http://0.0.0.0:9999/my/route]                                                      [18]\n[route1]           [to1]              [bean:checker]                                                                       [15]\n\nExchange\n---------------------------------------------------------------------------------------------------------------------------------------\nExchange[\n Id                ID-latitude-41466-1425483831913-0-1\n ExchangePattern   InOut\n Headers           {Accept=*/*, breadcrumbId=ID-latitude-41466- 1425483831913-0-2, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=(POST /my/route)@1904375366 org.eclipse.jetty.server.Request@71827646, CamelHttpServletResponse=HTTP/1.1 200\n\n, CamelHttpUri=/my/route, CamelHttpUrl=http://localhost:9999/my/route, CamelRedelivered=false, CamelRedeliveryCounter=0, CamelServletContextPath=/my/route, Content- Length=7, Content-Type=application/x-www-form-urlencoded, foo=bar, Host=localhost:9999, User-Agent=curl/7.35.0}\n BodyType \norg.apache.camel.converter.stream.InputStreamCache\n Body \n[Body is instance of org.apache.camel.StreamCache]\n]\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\njava.lang.IllegalArgumentException: Message parameter expected at com.packt.camel.chapter7c.Checker.validate(Checker.java:11)[86:com.packt.camel.chapter7c:1.0.0.SNAPSHOT]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"checker\" class=\"com.packt.camel.chapter7d.Checker\"/>\n\n  <camelContext >\n      <errorHandler id=\"myNoErrorHandler\" type=\"NoErrorHandler\"/>\n      <route errorHandlerRef=\"myNoErrorHandler\">\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <to uri=\"bean:checker\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"checker\" class=\"com.packt.camel.chapter7e.Checker\"/>\n\n  <camelContext  errorHandlerRef=\"deadLetterErrorHandler\">\n      <errorHandler id=\"noErrorHandler\" type=\"NoErrorHandler\"/>\n      <route>\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <to uri=\"bean:checker\"/>\n      </route>\n      <route errorHandlerRef=\"noErrorHandler\">\n           <from uri=\"jetty:http://0.0.0.0:8888/my/route\"/>\n           <to uri=\"bean:checker\"/>\n      </route>\n  </camelContext>\n\n  <bean id=\"deadLetterErrorHandler\" class=\"org.apache.camel.builder.DeadLetterChannelBuilder\">â€©      <property name=\"deadLetterUri\" value=\"direct:error\"/>\n      <property name=\"redeliveryPolicy\"ref=\"myRedeliveryPolicyConfig\"/>\n  </bean>\n\n  <bean id=\"myRedeliveryPolicyConfig\" class=\"org.apache.camel.processor.RedeliveryPolicy\">\n      <property name=\"maximumRedeliveries\" value=\"3\"/>\n      <property name=\"redeliveryDelay\" value=\"5000\"/>\n  </bean>\n\n</blueprint>\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"myException\" class=\"java.lang.IllegalArgumentException\">\n      <argument value=\"Booooommmmm\"/>\n  </bean>\n\n  <camelContext >\n      <errorHandler id=\"defaultErrorHandler\">\n           <redeliveryPolicy maximumRedeliveries=\"3\" redeliveryDelay=\"2000\"/>\n      </errorHandler>\n      <route errorHandlerRef=\"defaultErrorHandler\">\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <throwException ref=\"myException\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root> features:chooseurl camel 2.12.4\nkaraf@root> features:install camel-blueprint camel-jetty\n\n```", "```java\n$ curl http://localhost:9999/my/route\n\n```", "```java\n$ curl http://localhost:9999/my/route\njava.lang.IllegalArgumentException: Booooommmmm\n\n```", "```java\n2015-03-05 13:04:32,447 | ERROR | qtp307037456-75  | DefaultErrorHandler | rg.apache.camel.util.CamelLogger  215 | 60 - org.apache.camel.camel-core - 2.12.4 | Failed delivery for (MessageId: ID-latitude-34120-1425557044231-0-2 on ExchangeId: ID- latitude-34120-1425557044231-0-1). Exhausted after delivery attempt: 4 caught: java.lang.IllegalArgumentException: Booooommmmm\n\nMessage History\n---------------------------------------------------------------------------------------------------------------------------------------\nRouteId            ProcessorId        Processor                       Elapsed (ms)\n[route1]           [route1]           [http://0.0.0.0:9999/my/route]   [6010]\n[route1]           [throwException1]    [throwException[java.lang.IllegalArgumentException]]                               [6007]\n\nExchange\n---------------------------------------------------------------------------------------------------------------------------------------\nExchange[\n Id                ID-latitude-34120-1425557044231-0-1\n ExchangePattern   InOut\n Headers           {Accept=*/*, breadcrumbId=ID-latitude-34120- 1425557044231-0-2, CamelHttpMethod=GET, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=(GET /my/route)@1911523579 org.eclipse.jetty.server.Request@71ef88fb, CamelHttpServletResponse=HTTP/1.1 200\n\n, CamelHttpUri=/my/route, CamelHttpUrl=http://localhost:9999/my/route, CamelRedelivered=true, CamelRedeliveryCounter=3, CamelRedeliveryMaxCounter=3, CamelServletContextPath=/my/route, Content-Type=null, Host=localhost:9999, User-Agent=curl/7.35.0}\n BodyType          null\n Body              [Body is null]\n]\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\njava.lang.IllegalArgumentException: Booooommmmm at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)[:1.7.0_67]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"illegalArgumentException\" class=\"java.lang.IllegalArgumentException\">\n      <argument value=\"Booooommmmm\"/>\n  </bean>\n  <bean id=\"illegalStateException\" class=\"java.lang.IllegalStateException\">\n      <argument value=\"Kaboooommmmm\"/>\n  </bean>\n\n  <camelContext >\n      <onException>\n          <exception>java.lang.IllegalArgumentException</exception>\n          <redeliveryPolicy maximumRedeliveries=\"2\" redeliveryDelay=\"1000\"/>\n      </onException>\n      <onException>\n          <exception>java.lang.IllegalStateException</exception>\n          <to uri=\"direct:error\"/>\n      </onException>\n      <route>\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <throwException ref=\"illegalArgumentException\"/>\n      </route>\n      <route>\n          <from uri=\"jetty:http://0.0.0.0:8888/my/route\"/>\n          <throwException ref=\"illegalStateException\"/>\n      </route>\n      <route>\n          <from uri=\"direct:error\"/>\n          <convertBodyTo type=\"java.lang.String\"/>\n          <to uri=\"log:error\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root()> feature:repo-add camel 2.12.4\nkaraf@root()> feature:install camel-blueprint camel-jetty\n\n```", "```java\n$ curl http://localhost:9999/my/route\njava.lang.IllegalArgumentException: Booooommmmm\n\n```", "```java\n2015-03-05 17:24:53,621 | ERROR | qtp486271114-76  | DefaultErrorHandler | rg.apache.camel.util.CamelLogger  215 | 60 - org.apache.camel.camel-core - 2.12.4 | Failed delivery for (MessageId: ID-latitude-34088-1425572554935-0-2 on ExchangeId: ID- latitude-34088-1425572554935-0-1). Exhausted after delivery attempt: 3 caught: java.lang.IllegalArgumentException: Booooommmmm\n\nMessage History\n---------------------------------------------------------------------------------------------------------------------------------------\nRouteId            ProcessorId        Processor                      Elapsed (ms)\n[route1]           [route1]           [http://0.0.0.0:9999/my/route]  [2009]\n[route1]           [throwException1]          [throwException[java.lang.IllegalArgumentException]    [2005]\n\nExchange\n---------------------------------------------------------------------------------------------------------------------------------------\nExchange[\n Id                ID-latitude-34088-1425572554935-0-1\n ExchangePattern   InOut\n Headers           {Accept=*/*, breadcrumbId=ID-latitude-34088- 1425572554935-0-2, CamelHttpMethod=GET, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=(GET /my/route)@1882419051 org.eclipse.jetty.server.Request@70336f6b, CamelHttpServletResponse=HTTP/1.1 200\n\n, CamelHttpUri=/my/route, CamelHttpUrl=http://localhost:9999/my/route, CamelRedelivered=true, CamelRedeliveryCounter=2, CamelRedeliveryMaxCounter=2, CamelServletContextPath=/my/route, Content-Type=null, Host=localhost:9999, User-Agent=curl/7.35.0}\n BodyType          null\n Body              [Body is null]\n]\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\njava.lang.IllegalArgumentException: Booooommmmm at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)[:1.7.0_67]\n\n```", "```java\n$ curl http://localhost:8888/my/route\njava.lang.IllegalStateException: Kaboooommmmm\n\n```", "```java\n2015-03-05 17:25:02,965 | INFO  | qtp1797782377-82 | error | rg.apache.camel.util.CamelLogger  176 | 60 - org.apache.camel.camel-core - 2.12.4 | Exchange[ExchangePattern: InOut, BodyType: null, Body: [Body is null]]\n2015-03-05 17:25:02,969 | ERROR | qtp1797782377-82 | DefaultErrorHandler | rg.apache.camel.util.CamelLogger 215 | 60 - org.apache.camel.camel-core - 2.12.4 | Failed delivery for (MessageId: ID-latitude-34088-1425572554935-0-4 on ExchangeId: ID- latitude-34088-1425572554935-0-3). Exhausted after delivery attempt: 1 caught: java.lang.IllegalStateException: Kaboooommmmm. Processed by failure processor: FatalFallbackErrorHandler[Channel[sendTo(Endpoint[direct://error])]]\n\nMessage History\n---------------------------------------------------------------------------------------------------------------------------------------\nRouteId            ProcessorId        Processor                                                                      Elapsed (ms)\n[route2]           [route2]           [http://0.0.0.0:8888/my/route]              [7]\n[route2]           [throwException2]    [throwException[java.lang.IllegalStateException]]                       [to1]              [direct:error]                 [4]\n[route3]           [convertBodyTo1] [convertBodyTo[java.lang.String]] [0]\n[route3]           [to2]              [log:error]                     [2]\n\nExchange\n---------------------------------------------------------------------------------------------------------------------------------------\nExchange[\n Id                ID-latitude-34088-1425572554935-0-3\n ExchangePattern   InOut\n Headers           {Accept=*/*, breadcrumbId=ID-latitude-34088- 1425572554935-0-4, CamelHttpMethod=GET, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=(GET /my/route)@10303\n16697 org.eclipse.jetty.server.Request@3d696299, CamelHttpServletResponse=HTTP/1.1 200\n\n, CamelHttpUri=/my/route, CamelHttpUrl=http://localhost:8888/my/route, CamelRedelivered=false, CamelRedeliveryCounter=0, CamelServletContextPath=/my/route, Content- Type=null, Host=localhost:8888, User-Agent=curl/7.35.0}\n BodyType          null\n Body              [Body is null]\n]\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\njava.lang.IllegalStateException: Kaboooommmmm at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)[:1.7.0_67]\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"illegalArgumentException\" class=\"java.lang.IllegalArgumentException\">\n      <argument value=\"Booooommmmm\"/>\n  </bean>\n\n  <camelContext >\n      <onException>\n          <exception>java.lang.IllegalArgumentException</exception>\n          <redeliveryPolicy maximumRedeliveries=\"2\" redeliveryDelay=\"1000\"/>\n          <handled><constant>true</constant></handled>\n          <transform><constant>Ouch we got an error</constant></transform>\n      </onException>\n      <route>\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <throwException ref=\"illegalArgumentException\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ bin/karaf\nkaraf@root> features:chooseurl camel 2.12.4\nkaraf@root> features:install camel-blueprint camel-jetty\n\n```", "```java\n$ curl http://localhost:9999/my/route\nOuch we got an error\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <bean id=\"illegalArgumentException\" class=\"java.lang.IllegalArgumentException\">\n      <argument value=\"Booooommmmm\"/>\n  </bean>\n\n  <camelContext >\n      <onException>\n          <exception>java.lang.IllegalArgumentException</exception>\n          <continued><constant>true</constant></continued>\n      </onException>\n      <route>\n          <from uri=\"jetty:http://0.0.0.0:9999/my/route\"/>\n          <throwException ref=\"illegalArgumentException\"/>\n      </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n$ curl http://localhost:9999/my/route\n$\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<blueprint >\n\n  <camelContext >\n  <onException>\n  <exception>java.io.IOException</exception>\n  <redeliveryPolicy maximumRedeliveries=\"3\"/>\n  <handled><constant>true</constant></handled>\n  <to uri= \"ftp://fallbackftp.packt.com?user=anonymous&amp;password=foobar\"/>\n  </onException>\n    <route>\n  <from uri=\"file:/tmp/in\"/>\n  <to uri=\"ftp://ftp.packt.com?user=anonymous&amp;password=foobar\"/>\n    </route>\n  </camelContext>\n\n</blueprint>\n```", "```java\n<onException>\n  <exception>java.io.IOException</exception>\n  <onWhen><simple>${header.foo} == bar</simple></onWhen>\n  <to uri=\"direct:my\"/>\n</onException>\n```", "```java\n<onException onRedeliveryRef=\"myRedeliveryProcessor\">\n  <exception>java.io.IOException</exception>\n</onException>\n```", "```java\n<route>\n    <from uri=\"direct:start\"/>\n    <doTry>\n        <process ref=\"processor\"/>\n        <to uri=\"direct:result\"/>\n        <doCatch>\n            <!-- catch multiple exceptions -->\n            <exception>java.io.IOException</exception>\n            <exception>java.lang.IllegalStateException</exception>\n            <to uri=\"direct:catch\"/>\n        </doCatch>\n        <doFinally>\n            <to uri=\"direct:finally\"/>\n        </doFinally>\n    </doTry>\n</route>\n```"]