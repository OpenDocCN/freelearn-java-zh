- en: Chapter 1. Getting Started with GlassFish
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will discuss how to get started with GlassFish. The following
    are some of the topics discussed in this chapter:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: An overview of Java EE and GlassFish
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Obtaining GlassFish
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing and starting GlassFish
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Explaining the concept of GlassFish domains
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Deploying Java EE applications
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting up Database Connectivity
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: An Overview of Java EE and GlassFish
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Java Enterprise Edition** (**Java EE**, formerly called **J2EE** or **Java
    2 Enterprise Edition**) is a standard set of technologies for server-side Java
    development. Java EE technologies include **JavaServer Faces** (**JSF**), **Enterprise
    JavaBeans** (**EJBs**), the **Java Messaging Service** (**JMS**), the **Java Persistence
    API** (**JPA**), the Java API for WebSocket, **Contexts and Dependency Injection**
    (**CDI**), the **Java API for XML Web Services** (**JAX-WS**), the **Java API
    for RESTful Web Services** (**JAX-RS**), and the **Java API for JSON Processing**
    (**JSON-P**), among others.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: Several commercial and open source application servers exist. Java EE application
    servers allow developers to develop and deploy Java EE-compliant applications,
    GlassFish being one of them. Other open source Java EE application servers include
    Red Hat's WildFly (formerly JBoss), the Apache Software Foundation's Geronimo,
    and ObjectWeb's JOnAS. Commercial application servers include Oracle's WebLogic,
    IBM's WebSphere, and the Oracle Application Server.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: GlassFish is the Java EE 7 reference implementation; as such, it implements
    the latest Java EE APIs before any other application server in the market. GlassFish
    is open source and freely available, and is licensed under the **Common Development
    and Distribution License** (**CDDL**).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: You can find out more about the CDDL license at [http://opensource.org/licenses/CDDL-1.0](http://opensource.org/licenses/CDDL-1.0).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: Like all Java EE-compliant application servers, GlassFish provides the necessary
    libraries to allow us to develop and deploy Java applications compliant with Java
    EE specifications.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: What's new in Java EE 7?
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Java EE 7, the latest version of the Java EE specification, includes several
    improvements and additions to the specification. The following sections list the
    major improvements to the specifications that are of interest to enterprise application
    developers:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: JavaServer Faces (JSF) 2.2
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Java EE 7 includes a new version of the **JavaServer Faces** (**JSF**) specification.
    JSF 2.2 includes the following notable new features:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: JSF 2.2 features the HTML5 friendly markup, that is, web pages can be written
    using the standard HTML 5 markup and using JSF-specific attributes on the HTML
    tags.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JSF 2.2 also includes Faces Flows, which provides a way to encapsulate related
    pages with defined entry and exit points.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Resource library contracts are the third major JSF feature introduced in JSF
    2.2\. Resource library contracts allow us to easily develop web applications that
    can have a different look and feel for different users using JSF.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Java Persistence API (JPA) 2.1
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: JPA was introduced as a standard part of Java EE in version 5 of the specification.
    JPA replaced entity beans as the standard object relational mapping framework
    for Java EE. JPA adopted ideas from third-party object relational frameworks such
    as Hibernate and JDO, and made them a part of the standard.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: 'JPA 2.1 introduces the following new features:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: JPA 2.1 introduces the concept of **Converters**, which allows custom code conversions
    between values stored in the database and values stored in Java objects. For instance,
    a common problem when working with database data is that the desired value in
    Java code differs from the value stored in the database. For example, the values
    `1` and `0` are commonly stored in the database to denote `true` and `false` respectively.
    Java has a perfectly good boolean type, so `true` and `false` can be used directly.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The JPA Criteria API can now perform bulk updates and deletes.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JPA 2.1 now supports stored procedures.
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JPA 2.1 introduces the `@ConstructorResult` annotation, which allows returning
    standard Java classes (but not the JPA entities) from native SQL queries.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Java API for RESTful Web Services (JAX-RS) 2.0
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: JAX-RS is a Java API for developing RESTful web services. RESTful web services
    use the **Representational State Transfer** (**REST**) architecture. Java EE 6
    adopted JAX-RS as an official part of the Java EE specification.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: 'JAX-RS 2.0 includes the following new features:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: JAX-RS 2.0 introduces a new client-side API. While previous versions of JAX-RS
    made it easy to develop RESTful web services, each implementation defined its
    own proprietary client-side API.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Extension points, method filters, and entity interceptors are also introduced
    in JAX-RS 2.0\. These features allow **Aspect Oriented Programming** (**AOP**)
    when developing RESTful web services.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JAX-RS 2.0 also introduces asynchronous processing both on the server side and
    as part of the client API.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Java Message Service (JMS) 2.0
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The **Java Message Service** (**JMS**) API has been completely revamped in Java
    EE 7\. Previous versions of JMS required lots of boilerplate code; with the new
    revamped JMS 2.0 API, this is no longer the case.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: Java API for JSON Processing (JSON-P) 1.0
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: JSON-P is a brand new API introduced in Java EE 7\. JSON-P allows us to parse
    and generate **JSON** (**JavaScript Object Notation**) strings.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: Java API for WebSocket 1.0
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Traditional web applications use a request-response model, that is, a client
    (typically a web browser) requests resources and the server provides a response.
    In this model, communication is always initiated by the client.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: WebSockets were introduced as part of the HTML5 specification; they provide
    full-duplex communication between the client and the server.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: GlassFish advantages
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: GlassFish优势
- en: 'With so many options in Java EE application servers, why choose GlassFish?
    Besides the obvious advantage of GlassFish being available free of charge, it
    offers the following benefits:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在Java EE应用服务器中有这么多选项，为什么选择GlassFish？除了GlassFish免费提供的明显优势外，它还提供以下好处：
- en: '**Java EE reference implementation**: GlassFish is the Java EE reference implementation.
    What this means is that other application servers may use GlassFish to make sure
    their product complies with the specification. GlassFish could theoretically be
    used to debug other application servers. If an application deployed under another
    application server is not behaving properly, but it does behave properly when
    deployed under GlassFish, then more than likely the improper behavior is due to
    a bug in the other application server.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Java EE参考实现**：GlassFish是Java EE参考实现。这意味着其他应用服务器可能使用GlassFish来确保其产品符合规范。理论上，GlassFish可以用来调试其他应用服务器。如果一个在另一个应用服务器上部署的应用程序表现不正常，但在GlassFish上部署时表现正常，那么很可能是不正常行为是由于其他应用服务器中的错误。'
- en: '**Supports the latest versions of the Java EE specification**: Since GlassFish
    is the reference Java EE specification, it tends to implement the latest specifications
    before any other application server in the market. As a matter of fact, at the
    time of writing, GlassFish is the only Java EE application server in the market
    that supports the complete Java EE 7 specification.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**支持Java EE规范的最新版本**：由于GlassFish是参考Java EE规范，它通常在市场上任何其他应用服务器之前实现最新规范。事实上，在撰写本文时，GlassFish是市场上唯一支持完整Java
    EE 7规范的应用服务器。'
- en: Obtaining GlassFish
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取GlassFish
- en: GlassFish can be downloaded at [https://glassfish.java.net](https://glassfish.java.net).
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: GlassFish可以从[https://glassfish.java.net](https://glassfish.java.net)下载。
- en: Note
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: GlassFish 4.0 is also bundled with the NetBeans IDE version 7.4 or newer.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: GlassFish 4.0也捆绑了7.4或更新的NetBeans IDE版本。
- en: 'Once there, you will see a window as shown in the following screenshot:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦到达那里，你将看到一个如下截图所示的窗口：
- en: '![Obtaining GlassFish](img/6886EN_01_01.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![获取GlassFish](img/6886EN_01_01.jpg)'
- en: 'Clicking on the **Download** link takes us to a wizard page that provides several
    options to download GlassFish as shown in the following screenshot:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**下载**链接将带我们到一个提供多个选项的向导页面，以下载GlassFish，如下截图所示：
- en: '![Obtaining GlassFish](img/6886EN_01_02.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![获取GlassFish](img/6886EN_01_02.jpg)'
- en: The download page has several options; we can get the full Java EE platform
    or the web profile. We can also download GlassFish as a compressed ZIP file or
    as a native installer for the operating system of our choice.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 下载页面有多个选项；我们可以获取完整的Java EE平台或Web配置文件。我们还可以下载GlassFish作为压缩的ZIP文件或作为我们选择的操作系统的本地安装程序。
- en: To be able to follow all of the examples in this book, we need to download the
    full Java EE platform version of GlassFish. We will download the compressed ZIP
    file version since the instructions to install it are very similar across any
    operating system; feel free to download a platform-specific installer if you prefer.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够跟随本书中的所有示例，我们需要下载GlassFish的完整Java EE平台版本。我们将下载压缩的ZIP文件版本，因为安装说明在所有操作系统上都非常相似；如果您更喜欢，可以自由下载特定平台的安装程序。
- en: Installing GlassFish
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装GlassFish
- en: We will use the ZIP installer to illustrate the installation process. This installation
    process works under all major operating systems.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用ZIP安装程序来演示安装过程。此安装过程适用于所有主流操作系统。
- en: Installing GlassFish is an easy process; however, GlassFish assumes that some
    dependencies are present in your system.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 安装GlassFish是一个简单的过程；然而，GlassFish假设您的系统中存在某些依赖项。
- en: GlassFish dependencies
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: GlassFish依赖项
- en: In order to install GlassFish 4, a recent version of the **Java Development
    Kit** (**JDK**) must be installed on your workstation (JDK 1.7 or newer required),
    and the Java executable file must be in your system PATH. The latest JDK can be
    downloaded at [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html).
    Please refer to the JDK installation instructions for your particular platform
    at [http://docs.oracle.com/javase/7/docs/webnotes/install/index.html](http://docs.oracle.com/javase/7/docs/webnotes/install/index.html).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: Performing the installation
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Once JDK has been installed, the GlassFish installation can begin by simply
    extracting the download compressed file as shown in the following screenshot:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: '![Performing the installation](img/6886EN_01_03.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
- en: Note
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: All modern operating systems including Linux, Windows, and Mac OS X include
    out-of-the-box support to extract compressed ZIP files; consult your operating
    system documentation for details.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: After extracting the ZIP file, a new directory named `glassfish4` will be created.
    This new directory contains our GlassFish installation.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: Starting GlassFish
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To start GlassFish from the command line, change your directory to `[glassfish
    installation directory]/glassfish4/bin` and execute the following command:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The preceding command, and most commands shown in this chapter, assume a Unix
    or Unix-like operating system such as Linux or Mac OS. For Windows systems, the
    initial `./` is not necessary.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: 'A few short seconds after executing the preceding command, we should see a
    message similar to the following at the bottom of the terminal:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Tip
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Downloading the example code**'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
- en: You can download the sample code files for all the Packt books that you have
    purchased from your account at [http://www.packtpub.com](http://www.packtpub.com).
    If you purchased this book elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: 'We can then open a browser window and type the following URL in the browser''s
    location text field:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: '`http://localhost:8080`'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
- en: 'If everything goes well, we should see a page indicating that your GlassFish
    server is now running as shown in the following screenshot:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: '![Starting GlassFish](img/6886EN_01_04.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
- en: Tip
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Getting Help**'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: If any of the preceding steps fail or for help with GlassFish in general, a
    great resource is the GlassFish forum at [https://www.java.net/forums/glassfish/glassfish](https://www.java.net/forums/glassfish/glassfish).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: Deploying our first Java EE application
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To further confirm that our GlassFish installation is running properly, we will
    deploy a **WAR** (**Web ARchive**) file and make sure the file deploys and executes
    properly. Before moving on, please download the file `simpleapp.war` from this
    book's web site at [www.packtpub.com](http://www.packtpub.com).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: Deploying an application through the Web Console
  id: totrans-86
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To deploy `simpleapp.war`, open a browser and navigate to `http://localhost:4848`.
    You should be greeted with the default GlassFish server administration page as
    shown in the following screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: '![Deploying an application through the Web Console](img/6886EN_01_05.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
- en: By default, GlassFish is installed in development mode. In this mode, it is
    not necessary to enter a username and password to access the GlassFish web console.
    In production environments, it is highly advisable to configure the web console
    so that it is password protected.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: At this point, we should click on the **Deploy an Application** item under the
    **Deployment** section on the main screen.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: 'To deploy our application, we should select the **Local Packaged File or Directory
    That is Accessible from GlassFish Server** radio button and either type the path
    to our WAR file or select it by clicking on the **Browse Files...** button. Once
    this is done, you will see a window as shown in the following screenshot:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: '![Deploying an application through the Web Console](img/6886EN_01_06.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
- en: 'After we have selected our WAR file, a number of input fields that allow us
    to specify several options are shown. For our purposes, all defaults are fine.
    We can simply click on the **OK** button at the top right of the page as shown
    in the following screenshot:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: '![Deploying an application through the Web Console](img/6886EN_01_07.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
- en: 'Once we deploy our application, the GlassFish web console displays the **Applications**
    window, with our application listed as one of the deployed applications as shown
    in the following screenshot:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: '![Deploying an application through the Web Console](img/6886EN_01_08.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
- en: 'To execute the `simpleapp` application, type the following URL in the browser''s
    location text field:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: '`http://localhost:8080/simpleapp/simpleservlet`'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: 'The resulting page should look like the following screenshot:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: '![Deploying an application through the Web Console](img/6886EN_01_09.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
- en: That's it! We have successfully deployed our first Java EE application.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: Undeploying an application through the GlassFish Admin Console
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To undeploy the application we just deployed, log in to the GlassFish Admin
    Console by typing the following URL in the browser:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '`http://localhost:4848`'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: Then, either click on the **Applications** menu item in the navigation pane
    on the left, or click on the **List Deployed Applications** item on the administration
    console's home page.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: 'Either way should take us to the application management page as shown in the
    following screenshot:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: '![Undeploying an application through the GlassFish Admin Console](img/6886EN_01_10.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
- en: The application can be undeployed simply by selecting the checkbox next to the
    `simpleapp` name from the list of deployed applications and clicking on the **Undeploy**
    button above the list of deployed applications.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: 'Once our application has been undeployed, it is no longer shown on the application
    management page as shown in the following screenshot:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: '![Undeploying an application through the GlassFish Admin Console](img/6886EN_01_11.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
- en: Deploying an application through the command line
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: There are two ways in which an application can be deployed through the command
    line—it can be done either by copying the artifact we want to deploy to an `autodeploy`
    directory, or by using GlassFish's `asadmin` command-line utility.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: The autodeploy directory
  id: totrans-113
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Now that we have undeployed the `simpleapp` WAR file, we are ready to deploy
    it using the command line. To deploy the application in this manner, simply copy
    `simpleapp.war` to `[glassfish installation directory]/glassfish4/glassfish/domains/domain1/autodeploy`.
    The application will automatically be deployed just by copying it to this directory.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: 'We can verify that the application has successfully been deployed by looking
    at the server log. The server log can be found by typing `[glassfish installation
    directory]/glassfish4/glassfish/domains/domain1/logs/server.log`. The last few
    lines on this file should look something like the following:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We can, of course, also verify the deployment by navigating to the same URL
    for the application, which we used when deploying through the web console: `http://localhost:8080/simpleapp/simpleservlet`.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
- en: Once here, the application should execute properly.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: 'An application deployed this way can be undeployed by simply deleting the artifact
    (WAR file, in our case) from the `autodeploy` directory. After deleting the file,
    we should see a message similar to the following in the server log:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The asadmin command-line utility
  id: totrans-121
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'An alternate way of deploying an application through the command line is to
    use the following command:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The preceding command must be executed from the `[glassfish installation directory]/glassfish4/bin`
    path.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: 'We should see the following confirmation on the command line terminal letting
    us know that the file was deployed successfully:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The server logfile should show a message similar to the following:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The `asadmin` executable can be used to undeploy an application as well by
    issuing a command like the following:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The following message should be shown at the bottom of the terminal window:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Please note that the file extension is not used to undeploy the application,
    the argument to `asadmin undeplo`y should be the application name, which is, by
    default, the WAR file name (minus the extension).
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: GlassFish domains
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Alert readers might have noticed that the `autodeploy` directory is under a
    `domains/domain1` subdirectory. GlassFish has a concept of domains. Domains allow
    a collection of related applications to be deployed together. Several domains
    can be started concurrently. GlassFish domains behave like individual GlassFish
    instances; a default domain called `domain1` is created when installing GlassFish.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
- en: Creating Domains
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Additional domains can be created from the command line by issuing the following
    command:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The preceding command takes several parameters to specify ports where the domain
    will listen to for several services (HTTP, Admin, JMS, IIOP, Secure HTTP, and
    so on). Type the following command in the command line to see these parameters:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: If we want several domains to execute concurrently on the same server, these
    ports must be chosen carefully since specifying the same ports for different services
    (or even the same service across domains) will prevent one of the domains from
    working properly.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
- en: 'The default ports for the default `domain1` domain are listed in the following
    table:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
- en: '| Service | Port |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
- en: '| Admin | 4848 |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
- en: '| HTTP | 8080 |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
- en: '| Java Messaging System (JMS) | 7676 |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
- en: '| Internet Inter-ORB Protocol (IIOP) | 3700 |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
- en: '| Secure HTTP (HTTPS) | 8181 |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
- en: '| Secure IIOP | 3820 |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
- en: '| Mutual Authorization IIOP | 3920 |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
- en: '| Java Management Extensions (JMX) administration | 8686 |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
- en: Please note that when creating a domain, the only port that needs to be specified
    is the admin port. If the other ports are not specified, the default ports listed
    in the preceding table will be used. Care must be taken when creating a domain,
    since, as explained above, two domains cannot run concurrently in the same server
    if any of their services listen for connections on the same port.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: 'An alternate method of creating a domain, without having to specify ports for
    every service, is to issue the following command:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The value of the `--portbase` parameter dictates the base port for the domain;
    ports for the different services will be offsets of the given port number. The
    following table lists the ports assigned to all the different services:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: '| Service | Port |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
- en: '| Admin | portbase + 48 |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
- en: '| HTTP | portbase + 80 |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
- en: '| Java Messaging System (JMS) | portbase + 76 |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
- en: '| Internet Inter-ORB Protocol (IIOP) | portbase + 37 |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
- en: '| Secure HTTP (HTTPS) | portbase + 81 |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
- en: '| Secure IIOP | portbase + 38 |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
- en: '| Mutual Authorization IIOP | portbase + 39 |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
- en: '| Java Management Extensions (JMX) administration | portbase + 86 |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
- en: Of course, care must be taken when choosing the value for `--portbase`, making
    sure that none of the assigned ports collide with any other domain.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: As a rule of thumb, creating domains using a portbase number greater than 8000
    and divisible by 1000 should create domains that don't conflict with each other.
    For example, it should be safe to create a domain using a portbase of 9000, another
    one using a portbase of 10000, so on and so forth.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: Deleting domains
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Deleting a domain is very simple. It can be accomplished by issuing the following
    command in the command line:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'We should see the following message on the terminal window:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Tip
  id: totrans-176
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Please use the preceding command with care. Once a domain is deleted, it cannot
    be easily recreated (all deployed applications as well as any connection pools,
    data sources, and so on will be gone).
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: Stopping a domain
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'A domain that is running can be stopped by issuing the following command:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The preceding command will stop the domain named `domainname`.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
- en: 'If only one domain is running, the `domainname` argument is optional, that
    is, we can simply stop the running domain by issuing the following command:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Note
  id: totrans-184
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This book will assume that the reader is working with the default domain called
    `domain1` and the default ports. If this is not the case, instructions given need
    to be modified to match the appropriate domain and port.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
- en: Setting up Database Connectivity
  id: totrans-186
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Any nontrivial Java EE application will connect to a **Relational Database Management
    System** (**RDBMS**). Supported RDBMS systems include Java DB, Oracle, Derby,
    Sybase, DB2, PointBase, MySQL, PostgreSQL, Informix, Cloudscape, and SQL Server.
    In this section, we will demonstrate how to set up GlassFish to communicate with
    a MySQL database. The procedure is similar for other RDBMS systems.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: GlassFish comes bundled with an RDBMS called JavaDB. This RDBMS is based on
    Apache Derby. To limit the download and configuration needed to follow this book's
    code, all examples needing an RDBMS will use the bundled JavaDB RDBMS. The instructions
    in this section are to illustrate how to connect GlassFish to a third-party RDBMS.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: Setting up connection pools
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Opening and closing the database connections is a relatively slow operation.
    For performance reasons, GlassFish and other Java EE application servers keep
    a pool of open database connections; when a deployed application requires a database
    connection, one is provided from the pool; when the application no longer needs
    the database connection, the said connection is returned to the pool.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: 'The first step to follow when setting up a connection pool is to copy the JAR
    file containing the JDBC driver for our RDBMS in the `lib` directory of the domain
    (consult your RDBMS documentation for information on where to obtain this JAR
    file). If the GlassFish domain where we want to add the connection pool is running
    when copying the JDBC driver, it must be restarted for the change to take effect.
    The domain can be restarted by executing the following command:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Once the JDBC driver has been copied to the appropriate location and the application
    server has been restarted, log in to the admin console by pointing the browser
    to `http://localhost:4848`.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: 'Then, navigate to **Resources** | **JDBC** | **JDBC Connection Pools**. The
    browser should now look something like what is shown in the following screenshot:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up connection pools](img/6886EN_01_12.jpg)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
- en: 'Click on the **New...** button. After entering the appropriate values for our
    RDBMS, the main area of the page should look something like the following screenshot:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up connection pools](img/6886EN_01_13.jpg)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
- en: 'After clicking on the **Next** button, we should see a page similar to the
    one shown in the following screenshot:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up connection pools](img/6886EN_01_14.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
- en: Most of the default values on the top portion of the page shown in the preceding
    screenshot are sensible. Scroll all the way down and enter the appropriate property
    values for our RDBMS (at a minimum, username, password, and URL). Then, click
    on the **Finish** button at the top right of the screen.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: Property names vary depending on the RDBMS we are using, but usually there is
    a URL property where we should enter the JDBC URL for our database, plus username
    and password properties where we should enter authentication credentials for our
    database.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: 'Our newly created connection pool should now be visible in the list of connection
    pools as shown in the following screenshot:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up connection pools](img/6886EN_01_15.jpg)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
- en: In some cases, the GlassFish domain may need to be restarted after setting up
    a new connection pool.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: 'We can verify that our connection pool was successfully set up by clicking
    on its pool name and then enabling the **Ping** button on the resulting page as
    shown in the following screenshot:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up connection pools](img/6886EN_01_16.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
- en: Our connection pool is now ready to be used by our applications.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: Setting up the data sources
  id: totrans-209
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Java EE applications don''t access connection pools directly; they access a
    data source instead, which points to a connection pool. To set up a new data source,
    click on the **JDBC** icon under the **Resources** menu item on the left-hand
    side of the web console, then click on the **JDBC Connection Pools** tab, and
    then click on the **New...** button. After filling out the appropriate information
    for our new data source, the main area of the web console should look something
    like what is shown in the following screenshot:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up the data sources](img/6886EN_01_17.jpg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
- en: 'After clicking on the **OK** button, we can see our newly created data source
    as shown in the following screenshot:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting up the data sources](img/6886EN_01_18.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
- en: Summary
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we discussed how to download and install GlassFish. We also
    discussed several methods of deploying the Java EE application through the GlassFish
    web console, through the `asadmin` command, and by copying the file to the `autodeploy`
    directory. We also discussed basic GlassFish administration tasks like setting
    up domains and setting up Database Connectivity by adding connection pools and
    data sources. In the next chapter, we will cover how to develop web applications
    using JSF.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
