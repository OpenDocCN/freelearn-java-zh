<html><head></head><body>
<div id="_idContainer030">
<h1 class="chapter-number" id="_idParaDest-69"><a id="_idTextAnchor078"/><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 id="_idParaDest-70"><a id="_idTextAnchor079"/><span class="koboSpan" id="kobo.2.1">Building an Application Using TDD</span></h1>
<p><span class="koboSpan" id="kobo.3.1">We’re going to learn the practical side of TDD by building the application test first. </span><span class="koboSpan" id="kobo.3.2">We are also going to use an approach known as </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">agile software development</span></strong><span class="koboSpan" id="kobo.5.1"> as we build. </span><span class="koboSpan" id="kobo.5.2">Being agile means building our software in small, self-contained iterations instead of building it all at once. </span><span class="koboSpan" id="kobo.5.3">These small steps allow us to learn more about the software design as we go. </span><span class="koboSpan" id="kobo.5.4">We adapt and refine the design over time, as we become more certain of how a good design might look. </span><span class="koboSpan" id="kobo.5.5">We can offer working functionality to early test users and receive their feedback long before the application is complete. </span><span class="koboSpan" id="kobo.5.6">This is valuable. </span><span class="koboSpan" id="kobo.5.7">As we have seen in earlier chapters, TDD is an excellent approach for providing rapid feedback on self-contained pieces of software. </span><span class="koboSpan" id="kobo.5.8">It is the perfect complement to agile development.</span></p>
<p><span class="koboSpan" id="kobo.6.1">To help us build in this way, this chapter will introduce the technique of </span><strong class="bold"><span class="koboSpan" id="kobo.7.1">user stories</span></strong><span class="koboSpan" id="kobo.8.1">, which is a way of capturing requirements that fits an agile approach well. </span><span class="koboSpan" id="kobo.8.2">We will prepare our Java development environment ready for test-first development before describing what our application will do.  </span></p>
<p><span class="koboSpan" id="kobo.9.1">In this chapter, we’re going to cover the following topics:</span></p>
<ul>
<li><span class="koboSpan" id="kobo.10.1">Introducing the Wordz application</span></li>
<li><span class="koboSpan" id="kobo.11.1">Exploring agile methods</span></li>
</ul>
<h1 id="_idParaDest-71"><a id="_idTextAnchor080"/><span class="koboSpan" id="kobo.12.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.13.1">The final code for this chapter can be found at </span><a href="https://github.com/PacktPublishing/Test-Driven-Development-with-Java/tree/main/chapter04"><span class="koboSpan" id="kobo.14.1">https://github.com/PacktPublishing/Test-Driven-Development-with-Java/tree/main/chapter04</span></a><span class="koboSpan" id="kobo.15.1">.</span></p>
<p><span class="koboSpan" id="kobo.16.1">To code along – which I highly recommend – we need to set up our development environment first. </span><span class="koboSpan" id="kobo.16.2">This will use the excellent JetBrains IntelliJ Java </span><strong class="bold"><span class="koboSpan" id="kobo.17.1">Integrated Development Environment</span></strong><span class="koboSpan" id="kobo.18.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.19.1">IDE</span></strong><span class="koboSpan" id="kobo.20.1">), a free-of-charge Java SDK from Amazon, and some libraries to help us with writing our tests and including the libraries in our Java project. </span><span class="koboSpan" id="kobo.20.2">We will assemble all our development tools in the next section.</span></p>
<h2 id="_idParaDest-72"><a id="_idTextAnchor081"/><span class="koboSpan" id="kobo.21.1">Preparing our development environment</span></h2>
<p><span class="koboSpan" id="kobo.22.1">For this project, we will be using </span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.23.1">the following tools:</span></p>
<ul>
<li><span class="koboSpan" id="kobo.24.1">IntelliJ IDEA IDE 2022.1.3 (Community Edition) or higher</span></li>
<li><span class="koboSpan" id="kobo.25.1">Amazon Corretto Java 17 JDK</span></li>
<li><span class="koboSpan" id="kobo.26.1">The JUnit 5 unit test framework</span></li>
<li><span class="koboSpan" id="kobo.27.1">The AssertJ fluent assertions framework</span></li>
<li><span class="koboSpan" id="kobo.28.1">The Gradle dependency management system</span></li>
</ul>
<p><span class="koboSpan" id="kobo.29.1">We will begin by installing our Java IDE, the JetBrains IntelliJ IDE Community Edition, before adding the rest of the tools. </span></p>
<h2 id="_idParaDest-73"><a id="_idTextAnchor082"/><span class="koboSpan" id="kobo.30.1">Installing the IntelliJ IDE</span></h2>
<p><span class="koboSpan" id="kobo.31.1">To help us work with Java</span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.32.1"> source code, we will use the JetBrains IntelliJ Java IDE, using its free-of-charge Community Edition. </span><span class="koboSpan" id="kobo.32.2">This is a popular IDE used in the software industry – and for good reason. </span><span class="koboSpan" id="kobo.32.3">It combines an excellent Java editor with auto-completion and code suggestions, together with a debugger, automated refactoring support, Git source control tools, and excellent integration for running tests. </span></p>
<p><span class="koboSpan" id="kobo.33.1">To install IntelliJ, see</span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.34.1"> the following steps:</span></p>
<ol>
<li><span class="koboSpan" id="kobo.35.1">Go to </span><a href="https://www.jetbrains.com/idea/download/"><span class="koboSpan" id="kobo.36.1">https://www.jetbrains.com/idea/download/</span></a><span class="koboSpan" id="kobo.37.1">.</span></li>
<li><span class="koboSpan" id="kobo.38.1">Click on the tab for your operating system.</span></li>
<li><span class="koboSpan" id="kobo.39.1">Scroll down to the </span><strong class="bold"><span class="koboSpan" id="kobo.40.1">Community</span></strong><span class="koboSpan" id="kobo.41.1"> section.</span></li>
<li><span class="koboSpan" id="kobo.42.1">Follow the installation instructions for your operating system.</span></li>
</ol>
<p><span class="koboSpan" id="kobo.43.1">Once complete, the IntelliJ IDE should be installed on your computer. </span><span class="koboSpan" id="kobo.43.2">The next step is to create an empty Java project, using the Gradle package management system, and then set up whichever version of Java we wish to use. </span><span class="koboSpan" id="kobo.43.3">The installations for Mac, Windows, and Linux are usually straightforward.</span></p>
<h2 id="_idParaDest-74"><a id="_idTextAnchor083"/><span class="koboSpan" id="kobo.44.1">Setting up the Java project and libraries</span></h2>
<p><span class="koboSpan" id="kobo.45.1">Once IntelliJ is installed, we can </span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.46.1">import the starter project provided in the accompanying</span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.47.1"> GitHub repository. </span><span class="koboSpan" id="kobo.47.2">This will set up a Java project that uses the Amazon Corretto 17 </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">Java Development Kit</span></strong><span class="koboSpan" id="kobo.49.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.50.1">JDK</span></strong><span class="koboSpan" id="kobo.51.1">), the JUnit 5 unit test runner, the Gradle build management system, and the AssertJ fluent assertions library.</span></p>
<p><span class="koboSpan" id="kobo.52.1">To do this, see the following steps:</span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.53.1">In your web browser, go to </span><a href="https://github.com/PacktPublishing/Test-Driven-Development-with-Java"><span class="koboSpan" id="kobo.54.1">https://github.com/PacktPublishing/Test-Driven-Development-with-Java</span></a><span class="koboSpan" id="kobo.55.1">.</span></li>
<li><span class="koboSpan" id="kobo.56.1">Use your preferred </span><strong class="source-inline"><span class="koboSpan" id="kobo.57.1">git</span></strong><span class="koboSpan" id="kobo.58.1"> tool to clone the whole repository on your computer. </span><span class="koboSpan" id="kobo.58.2">If you use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">git</span></strong><span class="koboSpan" id="kobo.60.1"> command-line tool, this will be as follows:</span></li>
</ol>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">git clone https://github.com/PacktPublishing/Test-Driven-Development-with-Java.git</span></strong></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.62.1">Launch IntelliJ. </span><span class="koboSpan" id="kobo.62.2">You should see the welcome screen:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer025">
<span class="koboSpan" id="kobo.63.1"><img alt="Figure 4.1 – IntelliJ welcome screen" src="image/Figure_4.1_B18384.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.64.1">Figure 4.1 – IntelliJ welcome screen</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.65.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.66.1">Open</span></strong><span class="koboSpan" id="kobo.67.1"> and then navigate to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.68.1">chapter04</span></strong><span class="koboSpan" id="kobo.69.1"> folder of the repository that we just cloned. </span><span class="koboSpan" id="kobo.69.2">Click to highlight it: </span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer026">
<span class="koboSpan" id="kobo.70.1"><img alt="Figure 4.2 – ﻿Select the code folder" src="image/Figure_4.2_B18384.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.71.1">Figure 4.2 – Select the code folder</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.72.1">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.73.1">Open</span></strong><span class="koboSpan" id="kobo.74.1"> button.</span></li>
<li><span class="koboSpan" id="kobo.75.1">Wait for IntelliJ</span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.76.1"> to import the</span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.77.1"> files. </span><span class="koboSpan" id="kobo.77.2">You should see this workspace open:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer027">
<span class="koboSpan" id="kobo.78.1"><img alt="Figure 4.3 – IntelliJ workspace view" src="image/Figure_4.3_B18384.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.79.1">Figure 4.3 – IntelliJ workspace view</span></p>
<p><span class="koboSpan" id="kobo.80.1">We now have the IDE set</span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.81.1"> up with a skeleton project</span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.82.1"> containing everything we need to make a start. </span><span class="koboSpan" id="kobo.82.2">In the next section, we will describe the main features of the application we are going to build, which we will start to do in the next chapter.</span></p>
<h1 id="_idParaDest-75"><a id="_idTextAnchor084"/><span class="koboSpan" id="kobo.83.1">Introducing the Wordz application</span></h1>
<p><span class="koboSpan" id="kobo.84.1">In this section, we will describe</span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.85.1"> the application that we are going to build at a high level, before going on to look at the agile process we will use to build it. </span><span class="koboSpan" id="kobo.85.2">The application is called Wordz and it is based on a popular word guessing game. </span><span class="koboSpan" id="kobo.85.3">Players try to guess a five-letter word. </span><span class="koboSpan" id="kobo.85.4">Points are scored based on how quickly a player guesses the word. </span><span class="koboSpan" id="kobo.85.5">The player gets feedback on each guess to steer them towards the right answer. </span><span class="koboSpan" id="kobo.85.6">We are going</span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.86.1"> to build the server-side components of this application throughout the remainder of this book using various TDD techniques.</span></p>
<h2 id="_idParaDest-76"><a id="_idTextAnchor085"/><span class="koboSpan" id="kobo.87.1">Describing the rules of Wordz</span></h2>
<p><span class="koboSpan" id="kobo.88.1">To play Wordz, a player</span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.89.1"> will have up to six attempts to guess a five-letter word. </span><span class="koboSpan" id="kobo.89.2">After each attempt, letters in the word are highlighted as follows:</span></p>
<ul>
<li><span class="koboSpan" id="kobo.90.1">The correct letter in the correct position has a black background</span></li>
<li><span class="koboSpan" id="kobo.91.1">The correct letter in the wrong position has a gray background</span></li>
<li><span class="koboSpan" id="kobo.92.1">Incorrect letters not present in the word have a white background </span></li>
</ul>
<p><span class="koboSpan" id="kobo.93.1">The player can use this feedback to make a better next guess. </span><span class="koboSpan" id="kobo.93.2">Once a player guesses the word correctly, they score some points. </span><span class="koboSpan" id="kobo.93.3">They get six points for a correct guess on the first attempt, five points for a correct guess on the second attempt, and one point for a correct guess on the sixth and final attempt. </span><span class="koboSpan" id="kobo.93.4">Players compete against each other in various rounds to gain the highest score. </span><span class="koboSpan" id="kobo.93.5">Wordz is a fun game as well as a gentle brain workout.</span></p>
<p><span class="koboSpan" id="kobo.94.1">Whilst building a user interface is outside the scope of this book, it is very helpful to see a possible example:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer028">
<span class="koboSpan" id="kobo.95.1"><img alt="Figure 4.4 – The Wordz game" src="image/Figure_4.4_B18384.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.96.1">Figure 4.4 – The Wordz game</span></p>
<p><span class="koboSpan" id="kobo.97.1">Technically, we are going to create the backend</span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.98.1"> web service component for this game. </span><span class="koboSpan" id="kobo.98.2">It will expose an </span><strong class="bold"><span class="koboSpan" id="kobo.99.1">Application Programming Interface</span></strong><span class="koboSpan" id="kobo.100.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.101.1">API</span></strong><span class="koboSpan" id="kobo.102.1">) so that a user interface can use the service and will keep track of the game state in a database.  </span></p>
<p><span class="koboSpan" id="kobo.103.1">To focus on the techniques of TDD, we will leave certain things out of our scope, such as user authentication and the user interface. </span><span class="koboSpan" id="kobo.103.2">A production version would, of course, include these aspects. </span><span class="koboSpan" id="kobo.103.3">But to implement these features, we don’t need any new TDD techniques. </span></p>
<p><span class="koboSpan" id="kobo.104.1">This simple design will allow us to fully explore TDD through all the layers of a typical web application.</span></p>
<p><span class="koboSpan" id="kobo.105.1">Now that we’ve defined</span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.106.1"> what we’re going to build, the next section will introduce the development approach we will use to build it.</span></p>
<h1 id="_idParaDest-77"><a id="_idTextAnchor086"/><span class="koboSpan" id="kobo.107.1">Exploring agile methods</span></h1>
<p><span class="koboSpan" id="kobo.108.1">As we build Wordz, we are going</span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.109.1"> to use an iterative approach, where we build the application</span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.110.1"> as a series of features that our users can work with. </span><span class="koboSpan" id="kobo.110.2">This is known as </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">agile development</span></strong><span class="koboSpan" id="kobo.112.1">. </span><span class="koboSpan" id="kobo.112.2">It is effective as it allows us to ship features to users earlier and on a regular schedule. </span><span class="koboSpan" id="kobo.112.3">It allows us as developers to learn more about the problems we are solving and how a good software design looks as we go. </span><span class="koboSpan" id="kobo.112.4">This section will compare the benefits of agile development to waterfall approaches, then introduce</span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.113.1"> an agile requirements gathering tool called user stories.</span></p>
<p><span class="koboSpan" id="kobo.114.1">The predecessor to agile is called </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">waterfall development</span></strong><span class="koboSpan" id="kobo.116.1">. </span><span class="koboSpan" id="kobo.116.2">It is called this because the project stages flow</span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.117.1"> as a waterfall does, each one is fully completed before the next one is begun.</span></p>
<p><span class="koboSpan" id="kobo.118.1">In a waterfall project, we split development into sequential stages:</span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.119.1">Collecting requirements</span></li>
<li><span class="koboSpan" id="kobo.120.1">Performing an analysis of requirements</span></li>
<li><span class="koboSpan" id="kobo.121.1">Creating a complete software design </span></li>
<li><span class="koboSpan" id="kobo.122.1">Writing all the code </span></li>
<li><span class="koboSpan" id="kobo.123.1">Testing the code </span></li>
</ol>
<p><span class="koboSpan" id="kobo.124.1">In theory, every stage is perfectly executed, everything works, and there are no problems. </span><span class="koboSpan" id="kobo.124.2">In reality, there are always problems. </span></p>
<p><span class="koboSpan" id="kobo.125.1">We discover certain requirements we had missed. </span><span class="koboSpan" id="kobo.125.2">We find that the design documents cannot be coded exactly as they were written. </span><span class="koboSpan" id="kobo.125.3">We find missing parts of the design. </span><span class="koboSpan" id="kobo.125.4">The coding itself can run into difficulties. </span><span class="koboSpan" id="kobo.125.5">The worst part is that the end user never sees any working software until the very end. </span><span class="koboSpan" id="kobo.125.6">If what they see is not what they had in mind, we have a very expensive set of changes and reworking to do. </span></p>
<p><span class="koboSpan" id="kobo.126.1">The reason for this is that </span><em class="italic"><span class="koboSpan" id="kobo.127.1">humans have limited foresight</span></em><span class="koboSpan" id="kobo.128.1">. </span><span class="koboSpan" id="kobo.128.2">Try as we might, we cannot predict the future with any accuracy. </span><span class="koboSpan" id="kobo.128.3">I can sit here with a hot cup of coffee and know accurately that it will go cold in twenty minutes. </span><span class="koboSpan" id="kobo.128.4">But I can’t tell you what the weather will be three months from now. </span><span class="koboSpan" id="kobo.128.5">Our ability to predict the future is limited to short time frames, for processes with clear-cut causes and effects.</span></p>
<p><span class="koboSpan" id="kobo.129.1">Waterfall development</span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.130.1"> performs very poorly in the face of uncertainty and change. </span><span class="koboSpan" id="kobo.130.2">It is designed around the notion that all things can be known and planned in advance. </span><span class="koboSpan" id="kobo.130.3">A better approach is to </span><em class="italic"><span class="koboSpan" id="kobo.131.1">embrace</span></em><span class="koboSpan" id="kobo.132.1"> change and uncertainty, making it an active part of the development process. </span><span class="koboSpan" id="kobo.132.2">This is the basis of agile development. </span><span class="koboSpan" id="kobo.132.3">At its core lies an iterative approach, where we take one small feature that our users care about, then build that feature completely, allowing our users to try it out. </span><span class="koboSpan" id="kobo.132.4">If changes are needed, we do another iteration of development. </span><span class="koboSpan" id="kobo.132.5">The costs of change are much lower when our development process actively supports change.</span></p>
<p><span class="koboSpan" id="kobo.133.1">Professional agile development processes rely on maintaining one single code base that is always tested and represents </span><em class="italic"><span class="koboSpan" id="kobo.134.1">the best version to date</span></em><span class="koboSpan" id="kobo.135.1"> of our software. </span><span class="koboSpan" id="kobo.135.2">This code is always ready to deploy to users. </span><span class="koboSpan" id="kobo.135.3">We grow this code base one feature at a time, continuously improving its design as we go.</span></p>
<p><span class="koboSpan" id="kobo.136.1">Techniques such as TDD play a major role in this, by ensuring our code is well designed and thoroughly tested. </span><span class="koboSpan" id="kobo.136.2">Every time we commit code to the main trunk, we already know it has passed many TDD tests. </span><span class="koboSpan" id="kobo.136.3">We know we are happy with its design.</span></p>
<p><span class="koboSpan" id="kobo.137.1">To better support iterative</span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.138.1"> development, we choose an iterative technique for capturing</span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.139.1"> requirements. </span><span class="koboSpan" id="kobo.139.2">This technique is called user stories, which we will describe in the next section.</span></p>
<h2 id="_idParaDest-78"><a id="_idTextAnchor087"/><span class="koboSpan" id="kobo.140.1">Reading user stories – the building block of planning</span></h2>
<p><span class="koboSpan" id="kobo.141.1">As development is iterative</span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.142.1"> and embraces refactoring and reworking, it makes</span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.143.1"> sense that the old methods of specifying requirements won’t work. </span><span class="koboSpan" id="kobo.143.2">We are no longer served by thousands of pages of requirements set in stone up front. </span><span class="koboSpan" id="kobo.143.3">We are better served by taking one requirement at a time, building it, and learning from it. </span><span class="koboSpan" id="kobo.143.4">Over time, we can prioritize the features users want and learn more about how a </span><em class="italic"><span class="koboSpan" id="kobo.144.1">good design</span></em><span class="koboSpan" id="kobo.145.1"> will look. </span></p>
<p><span class="koboSpan" id="kobo.146.1">Through agile techniques, we do not have to know the future in advance; we can discover it alongside our users. </span></p>
<p><span class="koboSpan" id="kobo.147.1">Supporting this change is a new way to express requirements. </span><span class="koboSpan" id="kobo.147.2">Waterfall projects start with a complete requirements document, detailing every feature formally. </span><span class="koboSpan" id="kobo.147.3">The complete set of requirements – often thousands of them – were expressed in formal language such as “</span><em class="italic"><span class="koboSpan" id="kobo.148.1">The system shall…</span></em><span class="koboSpan" id="kobo.149.1">” and then the details were explained in terms of changes to the software system. </span><span class="koboSpan" id="kobo.149.2">With agile development, we don’t want to capture requirements in that way. </span><span class="koboSpan" id="kobo.149.3">We want to capture them following two key principles:</span></p>
<ul>
<li><span class="koboSpan" id="kobo.150.1">Requirements are presented one at a time in isolation</span></li>
<li><span class="koboSpan" id="kobo.151.1">We emphasize the value to the user, not the technical impact on the system</span></li>
</ul>
<p><span class="koboSpan" id="kobo.152.1">The technique for doing this is called the user story. </span><span class="koboSpan" id="kobo.152.2">The first user story to tackle for Wordz looks as follows:</span><strong class="bold"> </strong></p>
<div>
<div class="IMG---Figure" id="_idContainer029">
<span class="koboSpan" id="kobo.153.1"><img alt="Figure 4.5 – The user story" src="image/Figure_4.5_B18384.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.154.1">Figure 4.5 – The user story</span></p>
<p><span class="koboSpan" id="kobo.155.1">The format of a user story</span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.156.1"> is always the same</span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.157.1"> – it comprises three sections:</span></p>
<ul>
<li><span class="koboSpan" id="kobo.158.1">As a [person or machine that uses the software], …</span></li>
<li><span class="koboSpan" id="kobo.159.1">I want [a specific outcome from that software] …</span></li>
<li><span class="koboSpan" id="kobo.160.1">… so that [a task that is important is achieved].</span></li>
</ul>
<p><span class="koboSpan" id="kobo.161.1">The three sections</span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.162.1"> are written this way to emphasize that agile development centers around value delivered to the users of the system. </span><span class="koboSpan" id="kobo.162.2">These are not technical requirements. </span><span class="koboSpan" id="kobo.162.3">They do not (indeed, </span><em class="italic"><span class="koboSpan" id="kobo.163.1">must not</span></em><span class="koboSpan" id="kobo.164.1">) specify a solution. </span><span class="koboSpan" id="kobo.164.2">They simply state which user of the system should get what valuable outcome out of it.</span></p>
<p><span class="koboSpan" id="kobo.165.1">The first part always starts with “</span><em class="italic"><span class="koboSpan" id="kobo.166.1">As a …</span></em><span class="koboSpan" id="kobo.167.1">.” </span><span class="koboSpan" id="kobo.167.2">It then names the user role that this story will improve. </span><span class="koboSpan" id="kobo.167.3">This can be any user – whether human or machine – of the system. </span><span class="koboSpan" id="kobo.167.4">The one thing it must never be is the system itself, as in, “</span><em class="italic"><span class="koboSpan" id="kobo.168.1">As a system</span></em><span class="koboSpan" id="kobo.169.1">.” </span><span class="koboSpan" id="kobo.169.2">This is to enforce clear thinking in our user stories; they must always deliver some benefit to some user of the system. </span><span class="koboSpan" id="kobo.169.3">They are never an end in themselves. </span></p>
<p><span class="koboSpan" id="kobo.170.1">To give an example from a photo-taking app, as developers, we might want a technical activity to optimize photo storage. </span><span class="koboSpan" id="kobo.170.2">We might write a story such as, “</span><em class="italic"><span class="koboSpan" id="kobo.171.1">As a system, I want to compact my image data to optimize storage</span></em><span class="koboSpan" id="kobo.172.1">.” </span><span class="koboSpan" id="kobo.172.2">Instead of writing from a technical viewpoint, we can reframe this to highlight the benefit to the user: “</span><em class="italic"><span class="koboSpan" id="kobo.173.1">As a photographer, I want fast access to my stored photographs and to maximize space for new ones</span></em><span class="koboSpan" id="kobo.174.1">.”</span></p>
<p><span class="koboSpan" id="kobo.175.1">The “</span><em class="italic"><span class="koboSpan" id="kobo.176.1">I want…</span></em><span class="koboSpan" id="kobo.177.1">” section describes the desired outcome the user wants. </span><span class="koboSpan" id="kobo.177.2">It is always described in user terminology, not technical terminology. </span><span class="koboSpan" id="kobo.177.3">Again, this helps us focus on what our users want our software to achieve for them. </span><span class="koboSpan" id="kobo.177.4">It is the purest form of capturing the requirements. </span><span class="koboSpan" id="kobo.177.5">There is no attempt made at this stage to suggest how anything will be implemented. </span><span class="koboSpan" id="kobo.177.6">We simply capture what it is that the user sets out to do.</span></p>
<p><span class="koboSpan" id="kobo.178.1">The final part, “</span><em class="italic"><span class="koboSpan" id="kobo.179.1">…so that…</span></em><span class="koboSpan" id="kobo.180.1">”, provides context. </span><span class="koboSpan" id="kobo.180.2">The “</span><em class="italic"><span class="koboSpan" id="kobo.181.1">As a …</span></em><span class="koboSpan" id="kobo.182.1">” section describes </span><em class="italic"><span class="koboSpan" id="kobo.183.1">who</span></em><span class="koboSpan" id="kobo.184.1"> benefits, the “</span><em class="italic"><span class="koboSpan" id="kobo.185.1">I want…</span></em><span class="koboSpan" id="kobo.186.1">” section describes </span><em class="italic"><span class="koboSpan" id="kobo.187.1">how</span></em><span class="koboSpan" id="kobo.188.1"> they benefit, and the “</span><em class="italic"><span class="koboSpan" id="kobo.189.1">…so that…</span></em><span class="koboSpan" id="kobo.190.1">” section describes </span><em class="italic"><span class="koboSpan" id="kobo.191.1">why</span></em><span class="koboSpan" id="kobo.192.1"> they need this feature. </span><span class="koboSpan" id="kobo.192.2">This forms the justification for the time and costs required for developing this feature. </span><span class="koboSpan" id="kobo.192.3">It can be used to prioritize which features to develop next. </span></p>
<p><span class="koboSpan" id="kobo.193.1">This user story is where</span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.194.1"> we start development. </span><span class="koboSpan" id="kobo.194.2">The heart of the</span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.195.1"> Wordz application is its ability to evaluate and score the player’s current guess at a word. </span><span class="koboSpan" id="kobo.195.2">It’s worth looking at how this work will proceed.</span></p>
<h2 id="_idParaDest-79"><a id="_idTextAnchor088"/><span class="koboSpan" id="kobo.196.1">Combining agile development with TDD</span></h2>
<p><span class="koboSpan" id="kobo.197.1">TDD is a perfect complement</span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.198.1"> to agile development. </span><span class="koboSpan" id="kobo.198.2">As we learned in earlier</span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.199.1"> chapters, TDD helps us improve our design and prove that our logic is correct. </span><span class="koboSpan" id="kobo.199.2">Everything we do is aimed at delivering working software to our users, without defects, as quickly as possible. </span><span class="koboSpan" id="kobo.199.3">TDD is a great way to achieve this.</span></p>
<p><span class="koboSpan" id="kobo.200.1">The workflow we will use is typical for an agile TDD project:</span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.201.1">Pick a user story prioritized for impact.</span></li>
<li><span class="koboSpan" id="kobo.202.1">Think a little about the design to aim for.</span></li>
<li><span class="koboSpan" id="kobo.203.1">Use TDD to write the application logic in the core.</span></li>
<li><span class="koboSpan" id="kobo.204.1">Use TDD to write code to connect the core to a database.</span></li>
<li><span class="koboSpan" id="kobo.205.1">Use TDD to write code to connect to an API endpoint.</span></li>
</ol>
<p><span class="koboSpan" id="kobo.206.1">This process repeats. </span><span class="koboSpan" id="kobo.206.2">It forms the rhythm</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.207.1"> of writing the core application logic under a unit</span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.208.1"> test, then growing the application outward, connecting it to API endpoints, user interfaces, databases, and external web services. </span><span class="koboSpan" id="kobo.208.2">Working this way, we retain a lot of flexibility within our code. </span><span class="koboSpan" id="kobo.208.3">We can also work quickly, concentrating upfront on the most important parts of our application code. </span></p>
<h1 id="_idParaDest-80"><a id="_idTextAnchor089"/><span class="koboSpan" id="kobo.209.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.210.1">We’ve learned the key ideas that let us build an application iteratively, getting value at each step and avoiding a </span><em class="italic"><span class="koboSpan" id="kobo.211.1">big design up front</span></em><span class="koboSpan" id="kobo.212.1"> approach that often disappoints. </span><span class="koboSpan" id="kobo.212.2">We can read user stories, which will drive building our TDD application in small, well-defined steps. </span><span class="koboSpan" id="kobo.212.3">We now also know the process we will use to build our application – using TDD to get a thoroughly tested, central core of clean code, and then drive out connections to the real world.</span></p>
<p><span class="koboSpan" id="kobo.213.1">In the next chapter, we’ll make a start on our application. </span><span class="koboSpan" id="kobo.213.2">We will learn the three key components of every TDD test by writing our first test and making sure it passes.</span></p>
<h1 id="_idParaDest-81"><a id="_idTextAnchor090"/><span class="koboSpan" id="kobo.214.1">Questions and answers</span></h1>
<ol>
<li value="1"><span class="koboSpan" id="kobo.215.1">Waterfall development sounds as though it should work well – why doesn’t it?</span></li>
</ol>
<p><span class="koboSpan" id="kobo.216.1">Waterfall development would work well if we knew about every missing requirement, every change request from the users, every bad design decision, and every coding error at the start of the project. </span><span class="koboSpan" id="kobo.216.2">But humans have limited foresight, and it is impossible to know these things in advance. </span><span class="koboSpan" id="kobo.216.3">So, waterfall projects never work smoothly. </span><span class="koboSpan" id="kobo.216.4">Expensive changes crop up at a later stage of the project – just when you don’t have the time to address them.</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.217.1">Can we do agile development without TDD?</span></li>
</ol>
<p><span class="koboSpan" id="kobo.218.1">Yes, although that way, we miss out on the advantages of TDD that we’ve covered in previous chapters. </span><span class="koboSpan" id="kobo.218.2">We also make our job harder. </span><span class="koboSpan" id="kobo.218.3">An important part of Agile development is always demonstrating the latest working code. </span><span class="koboSpan" id="kobo.218.4">Without TDD, we need to add a large manual test cycle into our process. </span><span class="koboSpan" id="kobo.218.5">This slows us down significantly.</span></p>
<h1 id="_idParaDest-82"><a id="_idTextAnchor091"/><span class="koboSpan" id="kobo.219.1">Further reading</span></h1>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.220.1">Mastering React Test-Driven Development, ISBN 9781789133417</span></em> </li>
</ul>
<p><span class="koboSpan" id="kobo.221.1">If you would like to build a user interface for the Wordz application, using the popular React web UI framework is an excellent way to do it. </span><span class="koboSpan" id="kobo.221.2">This Packt book is one of my personal favorites. </span><span class="koboSpan" id="kobo.221.3">It shows how to apply the same kind of TDD techniques we are using server-side into frontend work. </span><span class="koboSpan" id="kobo.221.4">It also explains React development from the ground up in a highly readable way.</span></p>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.222.1">Agile Model-Based Systems Engineering Cookbook, ISBN 9781838985837</span></em></li>
</ul>
<p><span class="koboSpan" id="kobo.223.1">This book provides further details on how to craft effective user stories and other useful techniques for capturing agile requirements, modeling, and analysis.</span></p>
</div>
</body></html>