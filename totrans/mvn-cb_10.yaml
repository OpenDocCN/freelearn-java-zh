- en: Chapter 10. Java Development with Maven
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: Building a JAR project
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Generating an executable JAR
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Generating a JAR of the source code
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Generating a JAR of the test classes
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building a WAR project
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building an EAR project
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building a pom project
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Running a web project with Jetty
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Running a web project with Tomcat
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Maven is primarily a build tool for Java projects. Java projects can generate
    different types of binaries. Typically, the output of a Java project is a JAR
    file. For web applications, Java classes combined with other type of files result
    in a WAR or EAR file as well. Maven provides plugins and lifecycle phases to generate
    various types of binary artifacts for Java projects.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: Building a JAR project
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The default type of artifact generated by Maven is JAR. If the `packaging` element
    is absent, or specified as `jar`, Maven considers it a JAR project. A JAR project
    combines all the source classes along with the necessary project resources to
    a single file. This JAR file can be distributed for it to be used elsewhere.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Maven is set up on your system and is verified for work. To do this, refer to
    [Chapter 1](ch01.html "Chapter 1. Getting Started"), *Getting Started*.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open a simple Maven project, in our case `simple-project`.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify that the type is absent or set to `jar`:'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-20
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Run the following Maven command:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-22
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Observe the output:'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: How it works...
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The `package` option is part of Maven's default lifecycle. When Maven is run
    with the `package` option, it runs all the phases up to and prior to it, in order.
    Maven first compiles the project, runs the tests, and then, based on the packaging
    type, invokes the suitable plugin to package. In our case, as we specified the
    packaging as `jar`, Maven used the `jar` goal of the Maven JAR plugin to create
    a JAR artifact in the `target` folder.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: See also
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Generating an executable JAR* recipe in this chapter
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Generating an executable JAR
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The JAR artifact generated by Maven works well when used as a dependency in
    another project. However, it cannot be run as an executable without manually specifying
    the main class and explicitly specifying the dependencies that the project uses
    in the classpath.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: What if we want to create an executable JAR for the project? This may be useful
    when the JAR needs to be tested or the project is a simple tool that should be
    invoked without additional effort.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Open a simple Maven project (`project-with-executable-jar`):'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Add the following section in the `pom` file:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Add the plugin configuration to copy over the dependencies to the `target`
    folder:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Run the following command:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Observe the `target` folder:![How to do it...](img/6124OS_10_01.jpg)
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Run the generated JAR file:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Observe the output:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: How it works...
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We have made the following configurations to the Maven JAR plugin in our `pom`
    file:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: '**Added classpath**: This adds all the dependant JARs to the manifest classpath
    section'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Specified the main class**: This information is again updated in the manifest'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We also added the `copy-dependencies` goal of the Maven Dependency plugin to
    copy over the required dependencies to the folder where the executable JAR is
    generated.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: When we then run the executable JAR, it uses the manifest file to determine
    the main class as well as the dependencies, loads them, and runs.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: 'Let us look at the manifest file generated:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: '![How it works...](img/6124OS_10_02.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
- en: Evidently, for this to work, the executable JAR should be accompanied by the
    dependencies that it uses. In the *Creating an assembly* recipe in [Chapter 11](ch11.html
    "Chapter 11. Advanced Maven Usage"), *Advanced Maven Usage*, we will learn how
    to create an assembly with all the dependencies, which can be distributed more
    easily.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: Generating a JAR of the source code
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For many projects, it is useful to generate a JAR of the source code along with
    the artifact. The source thus generated can be imported to IDEs and used for browsing
    and debugging. Typically, the artifacts of most open source projects are accompanied
    by sources and Javadocs.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open a project for which you want to generate and attach the source code (`project-with-source-code`).
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Add the following plugin configuration to the `pom` file:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Run the following Maven command:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Observe the output:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Examine the `target` folder:![How to do it...](img/6124OS_10_03.jpg)
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We added the Maven Source plugin to the `pom` file. We also configured the plugin
    to run the `jar-no-fork` goal during the package phase. The goal creates a JAR
    of the project source code and makes it available along with the project artifacts.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: 'The `jar-no-fork` goal is used to bind the goal to the build lifecycle. To
    run the plugin and create the JAR independent of the lifecycle, the `jar` goal
    can be used as follows:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Subsequent phases (such as `install`) install the source artifact along with
    the project artifact.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'What if we want to attach the Javadoc instead of (or in addition to) sources?
    Let us do this:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the following plugin to the `pom` file:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Build the aggregator project:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Observe the output:![There's more...](img/6124OS_10_04.jpg)
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Maven runs the `jar` goal of the Maven Javadoc plugin in addition to the `jar-no-fork`
    goal of the Maven Source plugin. Both the JARs are now created, in addition to
    the project artifacts, and are now available for distribution.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Besides sources, the test sources and test Javadocs can also be generated and
    attached, if relevant to the project.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: Generating a JAR of the test classes
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There could be situations when you would want to use the test classes and resources
    of a project as a test dependency in another project. This is typically the case
    in multi-module projects, where a module depends on another module. There could
    be utility code in the test classes of a module that can be reused in another
    module.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: One way to achieve this would be by creating a separate project to hold these
    classes. However, that is cumbersome and may be confusing as well.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: Maven provides another way to achieve this.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open a project for which you want to create a test JAR (`project-with-test-jar`).
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Add the following plugin configuration to the `pom` file:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Run the following Maven command:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Observe the output:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Examine the `target` folder:![How to do it...](img/6124OS_10_05.jpg)
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We specified a `test-jar` goal to the Maven JAR plugin. This asks Maven to
    generate a JAR of test classes and resources. This JAR can be installed along
    with the project artifact. It can also be specified as a dependency in another
    project as follows:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Tip
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: One thing to note though is the test JAR does not bring its transitive test-scoped
    dependencies with it if you add a dependency on this. These dependencies, if required,
    need to be specified by hand.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: Building a WAR project
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: So far, we have been building projects that generate a JAR artifact. When it
    comes to web applications, we typically create WAR artifacts. Maven supports the
    building of WAR artifacts. The packaging type `.war` indicates to Maven that it
    is a WAR artifact. Maven automatically invokes the corresponding lifecycle bindings.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Run the following command from the command prompt:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Observe the output:![How to do it...](img/6124OS_10_06.jpg)
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Open the created `pom` file:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Run the command to build the project:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Observe the output:![How to do it...](img/6124OS_10_07.jpg)
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Check the `target` folder:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: How it works...
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We used the Maven Archetype plugin to bootstrap a simple web project. This generated
    a `pom` file along with other contents for a web application. When you examine
    the `pom` file, you will notice that the `packaging` type is set to `war`.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: Maven uses this information to invoke the `war` goal of the Maven plugin to
    create a WAR of the project contents.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
- en: Also, observe that we specified the `finalName` element. Maven uses this to
    create the name of the WAR artifact. In the absence of this element, Maven uses
    the default name, which would have been `simple-webapp-1.0-SNAPSHOT.war`.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The Maven WAR plugin can be used in many ways. The default option creates a
    WAR file. During development, we would want to speed up things by generating the
    WAR file in exploded form. To do this, perform the following steps:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
- en: Open the `simple-webapp` project.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Run the following command:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Examine the content of the `target` folder:![There's more...](img/6124OS_10_08.jpg)
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Building an EAR project
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Maven provides support to generate Java **EE Enterprise Archive** (**EAR**)
    files. These can be deployed in application servers such as JBoss, WebLogic, and
    WebSphere.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Run the following command from the command prompt:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE23]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Observe the result:![How to do it...](img/6124OS_10_09.jpg)
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Build the generated project:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE24]'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Observe the generated output:![How to do it...](img/6124OS_10_10.jpg)
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Open the `target` folder:![How to do it...](img/6124OS_10_11.jpg)
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We used the Maven Archetype plugin to bootstrap a simple EAR project. It generated
    a multi-module project, which has an EJB module, web module, and a EAR module
    along with the aggregate pom file. When you examine the `pom` file of the EAR
    module, you will notice that the `packaging` type is set to `ear`.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: Once built, Maven builds all the modules. In the EAR module, it uses the packaging
    information to invoke the `ear` goal of the Maven EAR plugin to create a EAR of
    the project contents.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: Building a pom project
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are many reasons why you may want to make a pom file available as an artifact.
    One reason is the aggregate project. An aggregate project must have the `pom`
    packaging type. Another reason could be a pom, which can be imported as a dependency.
    Whatever the reason, Maven provides support to build a pom project.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open a simple pom project (`simple-pom-project`).
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Observe the `packaging` type:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE25]'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Build the project:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE26]'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Note that only the `clean` goal is run.
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Run the following command:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Observe the output:![How to do it...](img/6124OS_10_12.jpg)
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The following are the default bindings for the `pom` packaging type:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: '`package: site:attach-descriptor`: This attaches a descriptor to the site report,
    if applicable'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`install: install:install`: This installs the project in the local repository'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`deploy: deploy:deploy`: This deploys the project to the remote repository'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: As we can see, Maven does not run any other goals for the `pom` packaging type.
    However, if it sees `module` elements, it invokes the specified Maven goals on
    all the defined modules.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: Also, various configurations, including `pluginManagement` and `dependencyManagement`,
    get inherited by all of the child projects.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'What if you had a reason to compile some source files or run some tests even
    though the packaging type is `pom`? This may not be a usual scenario, but it can
    be done by explicitly invoking the relevant plugin goals in the following way:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: Open the simple pom project (`simple-pom-project`).
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Run the following command:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Observe the output:![There's more...](img/6124OS_10_13.jpg)
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We now explicitly invoke the following goals:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: '`compiler:compile`: This compiles the source files'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`compiler:testCompile`: This compiles test files'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`surefire:test`: This runs tests'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`jar:jar`: This creates a JAR artifact'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Maven does not prevent us from doing this.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: Running a web project with Jetty
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: When developing web applications, it is good to have a quick way to check if
    the application deploys successfully without errors. IDEs allow users to hot-deploy
    applications. Maven provides a mechanism to quickly run the project using Jetty.
    Jetty is a popular open source application server that can be used to deploy web
    projects. The Maven Jetty plugin allows applications to be deployed to Jetty and
    runs them as part of the Maven build process.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open a simple web project (`simple-web-project`).
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Run the following Maven command:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE29]'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Observe the result:![How to do it...](img/6124OS_10_14.jpg)
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Access the web application from the browser by going to `http://localhost:8080`.![How
    to do it...](img/6124OS_10_15.jpg)
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The Maven Jetty plugin allows web applications to be deployed and tested using
    Jetty. The `run` goal is bound to the `package` phase. Maven runs all the phases
    prior to it. Jetty deploys the webapp from its sources; the webapp does not have
    to be built into a WAR. It looks for the relevant parts of the web application
    in the default Maven locations. Here are some instances:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: '`resources` in `src/main/webapp`'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`classes` in `target/classes`'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`web.xml` in `src/main/webapp/WEB-INF`'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Jetty uses default values to start the server.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-179
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'As Jetty is not an official Maven plugin, we have explicitly specified `groupId`
    (`org.eclipse.jetty`) and `artifactId` (`jetty-maven-plugin`) instead of the short
    plugin prefix. To use the short plugin prefix, add the following in the settings
    file:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Then, Maven can be invoked as follows:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: There's more...
  id: totrans-184
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The Maven Jetty plugin provides several goals and configurations to help develop
    web applications.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
- en: 'Run the WAR file:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Jetty now builds the WAR file and then runs it:'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![There''s more...](img/6124OS_10_16.jpg)'
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: 'Run the exploded WAR file:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE33]'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Jetty now builds the WAR file, explodes it, and then runs it:'
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![There''s more...](img/6124OS_10_17.jpg)'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: 'There are some other goals that can be used as well:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: '`jetty:deploy-war`: This deploys an existing WAR file without building it'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`jetty:start`: This starts the Jetty server'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`jetty:stop`: This stops the Jetty server'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`jetty:run-forked`: This runs the Jetty server in a Java virtual machine process
    different from Maven'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Running a web project with Tomcat
  id: totrans-199
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Tomcat is a popular open source application server. The Maven Tomcat plugin
    supports the ability to build and deploy Maven projects in Tomcat. In fact, there
    are two Maven Tomcat plugins, one for Tomcat 6 and another for Tomcat 7.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: Let us look at how to run a web project with Tomcat 7\. The steps will be identical
    for Tomcat 6, except that the plugin would be `tomcat6-maven-plugin` instead of
    `tomcat7-maven-plugin`, and the plugin prefix would be `tomcat6` instead of `tomcat7`.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-202
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Open a simple web project (`simple-web-project`).
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Run the following Maven command:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Observe the result:![How to do it...](img/6124OS_10_18.jpg)
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Browse to the deployed webapp by visiting `http://localhost:8080/simple-webapp`:![How
    to do it...](img/6124OS_10_19.jpg)
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  id: totrans-208
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The Maven Tomcat plugin allows web applications to be deployed and tested using
    Apache Tomcat. The `run` goal is bound to the `package` phase. Maven runs all
    the phases prior to it.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: Tomcat uses default values to start the server.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-211
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'As this is not an official Maven plugin, we have explicitly specified the `groupId`
    (`org.apache.tomcat.maven`) and the `artifactId` (`tomcat7-maven-plugin`) instead
    of the short plugin prefix. To use the short plugin prefix, add the following
    in the settings file:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这不是官方的 Maven 插件，我们明确指定了 `groupId` (`org.apache.tomcat.maven`) 和 `artifactId`
    (`tomcat7-maven-plugin`)，而不是使用简短的插件前缀。要使用简短的插件前缀，请在设置文件中添加以下内容：
- en: '[PRE35]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Then Maven can be invoked as follows:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，可以按照以下方式调用 Maven：
- en: '[PRE36]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: There's more...
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The Maven Tomcat7 plugin also supports goals to start and stop Tomcat, which
    can be used when running integration tests.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: Maven Tomcat7 插件也支持启动和停止 Tomcat 的目标，这在运行集成测试时可以使用。
- en: 'It also supports the creation of an executable JAR using embedded Tomcat. Let
    us see how to do this:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 它还支持使用嵌入式 Tomcat 创建可执行 JAR 文件。让我们看看如何做：
- en: Open the web project for which you want to create an executable JAR (`project-with-executable-webapp`).
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您想要创建可执行 JAR 文件的 Web 项目（`project-with-executable-webapp`）。
- en: 'Add the following plugin and configuration:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加以下插件和配置：
- en: '[PRE37]'
  id: totrans-221
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Run the following command:'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE38]'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Run the JAR created in the `target` folder:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行 `target` 文件夹中创建的 JAR 文件：
- en: '[PRE39]'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: Observe the output:![There's more...](img/6124OS_10_20.jpg)
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 观察输出：![还有更多...](img/6124OS_10_20.jpg)
- en: What we have now is a distributable web application using embedded Tomcat.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在有一个使用嵌入式 Tomcat 的可分发 Web 应用程序。
- en: Tip
  id: totrans-228
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: There is a bug due to which we need to use version 2.1 of the plugin rather
    than 2.2 for this to work.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 由于存在一个错误，我们需要使用插件的 2.1 版本而不是 2.2 版本才能使其工作。
