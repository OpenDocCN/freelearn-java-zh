<html><head></head><body>
		<div id="_idContainer198">
			<h1 id="_idParaDest-293" class="chapter-number"><a id="_idTextAnchor293"/>12</h1>
			<h1 id="_idParaDest-294"><a id="_idTextAnchor294"/>Java Core API</h1>
			<p>In this chapter, we will delve more deeply into popular classes and interfaces from the Java API. We will start with the <strong class="source-inline">Scanner</strong> class, which is commonly used for scanning and parsing text from sources such as the keyboard (the user). We will then examine the very popular <strong class="source-inline">String</strong> and <strong class="source-inline">StringBuilder</strong> classes. We will discuss their differences, which will require contrasting mutable and immutable types. We will also show you how to design immutable types and look at the <strong class="source-inline">List</strong> interface and its popular implementation class, <strong class="source-inline">ArrayList</strong>. Lastly, we will examine the Date API, which was overhauled in <span class="No-Break">Java 8.</span></p>
			<p>For further details on the types covered in this chapter, please refer to the Java Docs <span class="No-Break">API: </span><a href="https://docs.oracle.com/en/java/javase/21/docs/api/index.html"><span class="No-Break">https://docs.oracle.com/en/java/javase/21/docs/api/index.html</span></a><span class="No-Break">.</span></p>
			<p>This chapter covers the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>Understanding the <span class="No-Break"><strong class="source-inline">Scanner</strong></span><span class="No-Break"> class</span></li>
				<li>Comparing <strong class="source-inline">String</strong> <span class="No-Break">with </span><span class="No-Break"><strong class="source-inline">StringBuilder</strong></span></li>
				<li>Designing an <span class="No-Break">immutable type</span></li>
				<li>Examining <strong class="source-inline">List</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">ArrayList</strong></span></li>
				<li>Exploring the <span class="No-Break">Date API</span></li>
			</ul>
			<h1 id="_idParaDest-295"><a id="_idTextAnchor295"/>Technical requirements</h1>
			<p>The code for this chapter can be found on GitHub <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Learn-Java-with-Projects/tree/main/ch12"><span class="No-Break">https://github.com/PacktPublishing/Learn-Java-with-Projects/tree/main/ch12</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-296"><a id="_idTextAnchor296"/>Understanding the Scanner class</h1>
			<p><strong class="source-inline">Scanner</strong> (from the <strong class="source-inline">java.util</strong> package) is a text scanner that can parse primitives and strings using <a id="_idIndexMarker879"/>regular expressions. A regular expression is a pattern that enables string manipulation. As it states <a id="_idIndexMarker880"/>so eloquently in the Java API: “<em class="italic">A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various </em><span class="No-Break"><em class="italic">next methods.</em></span><span class="No-Break">”</span></p>
			<p>These <strong class="source-inline">nextXXX()</strong> methods convert the tokens on the input stream into primitives. For example, if the user has typed in <strong class="source-inline">23</strong>, then <strong class="source-inline">nextInt()</strong> would return an <strong class="source-inline">int</strong> value of <strong class="source-inline">23</strong>; if the user typed in <strong class="source-inline">45.89</strong>, then <strong class="source-inline">nextDouble()</strong> would return a <strong class="source-inline">double</strong> value <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">45.89</strong></span><span class="No-Break">.</span></p>
			<p>However, if the token on the input stream is not an integer and <strong class="source-inline">nextInt()</strong> is called, an <strong class="source-inline">InputMismatchException</strong> error is thrown. This could occur if the user types in <strong class="source-inline">"abc"</strong> and <strong class="source-inline">nextInt()</strong> is called. To protect against this, each of the <strong class="source-inline">nextXXX()</strong> methods has a corresponding guardian angel method, namely <strong class="source-inline">hasNextXXX()</strong>. For example, <strong class="source-inline">nextInt()</strong> has a corresponding <strong class="source-inline">hasNextInt()</strong> method, <strong class="source-inline">nextDouble()</strong> has a corresponding <strong class="source-inline">hasNextDouble()</strong> method, and so forth. The <strong class="source-inline">hasNextXXX()</strong> methods all take a sneak peek at the input stream for the next token (without consuming it) and check if that token can be successfully converted into the type in question. They return <strong class="source-inline">true</strong> or <strong class="source-inline">false</strong> accordingly. If <strong class="source-inline">true</strong> is returned, then the corresponding <strong class="source-inline">nextXXX()</strong> method can safely be used without causing <span class="No-Break">an exception.</span></p>
			<p><em class="italic">Table 12.1</em> shows some of the more important <strong class="source-inline">Scanner</strong> methods. Note that we have just listed one of the <strong class="source-inline">hasNextXXX()</strong> methods, namely <strong class="source-inline">hasNextDouble()</strong>, along with its corresponding <strong class="source-inline">nextXXX()</strong> method, namely <strong class="source-inline">nextDouble()</strong>. All of the following types follow the same pattern: <strong class="source-inline">boolean</strong>, <strong class="source-inline">byte</strong>, <strong class="source-inline">float</strong>, <strong class="source-inline">int</strong>, <strong class="source-inline">long</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">short</strong></span><span class="No-Break">:</span></p>
			<table id="table001-2" class="T---Table _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<thead>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Method Name</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Description</strong></span></p>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">Scanner(InputStream source)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Creates a <strong class="source-inline">Scanner</strong> class that produces values from the specified input stream – for example, <span class="No-Break">the keyboard</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">Scanner(File source)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Creates a <strong class="source-inline">Scanner</strong> class that produces values from the <span class="No-Break">specified file</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">Scanner(String source)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Creates a <strong class="source-inline">Scanner</strong> class that produces values from the <span class="No-Break">specified string</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">String next()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the <span class="No-Break">next token</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">boolean hasNextDouble()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns <strong class="source-inline">true</strong> if and only if the next token is a valid <span class="No-Break"><strong class="source-inline">double</strong></span><span class="No-Break"> value</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">double nextDouble()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Scans the next token as a <span class="No-Break"><strong class="source-inline">double</strong></span><span class="No-Break"> value</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">String nextLine()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns (the rest of) <span class="No-Break">the line</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">Scanner </strong><span class="No-Break"><strong class="source-inline">useDelimiter(String pattern)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Sets the Scanner’s delimiting pattern according to the <span class="No-Break">argument passed</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 12.1 – Sample “Scanner” API methods</p>
			<p>Now, let’s look at <a id="_idIndexMarker881"/>some examples <span class="No-Break">in code.</span></p>
			<h2 id="_idParaDest-297"><a id="_idTextAnchor297"/>Using Scanner to read from the keyboard</h2>
			<p>The standard input <a id="_idIndexMarker882"/>stream can be accessed with <strong class="source-inline">System.in</strong>. Typically, this is the keyboard. When creating our <strong class="source-inline">Scanner</strong>, we must pass the input source (<strong class="source-inline">System.in</strong>, in this case) as an argument of the <strong class="source-inline">Scanner</strong> constructor. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.1</em> shows <span class="No-Break">an example:</span></p>
			<div>
				<div id="_idContainer173" class="IMG---Figure">
					<img src="image/B19793_12_01.jpg" alt="Figure 12.1 – “Scanner” taking input from the keyboard"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.1 – “Scanner” taking input from the keyboard</p>
			<p>In this figure, on line 23, we create a <strong class="source-inline">Scanner</strong> object referring to the keyboard by passing <strong class="source-inline">System.in</strong> to the <strong class="source-inline">Scanner</strong> constructor. Line 24 simply prompts the user to type in an age. Line 25 is the guardian angel method to protect against exceptions. If the next token on the input is <a id="_idIndexMarker883"/>of the <strong class="source-inline">int</strong> type, then the condition on line 25 will be <strong class="source-inline">true</strong> and we can safely execute <strong class="source-inline">nextInt()</strong> on line 26. Line 27 echoes the integer that was typed on <span class="No-Break">the keyboard.</span></p>
			<p class="callout-heading">Closing a Scanner resource</p>
			<p class="callout">Closing resources once you are finished with them is prudent as it prevents resource leaks. However, a <strong class="source-inline">Scanner</strong> object wrapped around <strong class="source-inline">System.in</strong> is a little different. In effect, if we close a <strong class="source-inline">Scanner</strong> object that was wrapped around <strong class="source-inline">System.in</strong>, we won’t be able to read from standard <span class="No-Break">input again.</span></p>
			<p class="callout">This is what lines 30-34 in <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.1</em> are demonstrating. If we close the <strong class="source-inline">Scanner</strong> object (line 30), even though lines 31-34 are essentially the same as lines 23-27 (bar <strong class="source-inline">hasNextInt()</strong>), an exception is thrown on line 33. This is because we are attempting to access a <span class="No-Break">closed resource.</span></p>
			<p>Now, let’s look at an example that will further explain tokens <span class="No-Break">and delimiters:</span></p>
			<div>
				<div id="_idContainer174" class="IMG---Figure">
					<img src="image/B19793_12_02.jpg" alt="Figure 12.2 – next() delimited by whitespace"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.2 – next() delimited by whitespace</p>
			<p>In this figure, we are using <strong class="source-inline">next()</strong> to try and parse <strong class="source-inline">Sean Kennedy</strong> from the input stream (keyboard). However, the (default) delimiter is whitespace, and thus, <strong class="source-inline">Sean</strong> is returned. Note that <strong class="source-inline">Kennedy</strong> is still there in the input stream. We could invoke <strong class="source-inline">next()</strong> a second <a id="_idIndexMarker884"/>time to consume the extra <strong class="source-inline">Kennedy</strong> token. However, there is a method that solves this issue: <strong class="source-inline">nextLine()</strong>. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.3</em> shows <strong class="source-inline">nextLine()</strong> <span class="No-Break">in action:</span></p>
			<div>
				<div id="_idContainer175" class="IMG---Figure">
					<img src="image/B19793_12_03.jpg" alt="Figure 12.3 – nextLine() delimited by the end of the line"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.3 – nextLine() delimited by the end of the line</p>
			<p>In this figure, we are using <strong class="source-inline">nextLine()</strong>, which uses a different delimiter. Rather than whitespace delimiting the tokens (as with <strong class="source-inline">next()</strong>), the newline character delimits <strong class="source-inline">nextLine()</strong>). In effect, <strong class="source-inline">nextLine()</strong> reads a line of text, whereas <strong class="source-inline">next()</strong> reads words. Line 17 demonstrates this by outputting <span class="No-Break"><strong class="source-inline">Sean Kennedy</strong></span><span class="No-Break">.</span></p>
			<p><strong class="source-inline">Scanner</strong> can be redirected to other sources for input. One such source is <span class="No-Break">a file.</span></p>
			<h2 id="_idParaDest-298"><a id="_idTextAnchor298"/>Using Scanner to read from a file</h2>
			<p>Let’s examine how we <a id="_idIndexMarker885"/>can direct <strong class="source-inline">Scanner</strong> to read from a file, as opposed to the keyboard. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.4</em> shows such <span class="No-Break">an example:</span></p>
			<div>
				<div id="_idContainer176" class="IMG---Figure">
					<img src="image/B19793_12_04.jpg" alt="Figure 12.4 – “Scanner” taking input from a file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.4 – “Scanner” taking input from a file</p>
			<p>In the preceding figure, the file in question (<strong class="source-inline">ages.txt</strong>) is a simple text file containing the number <strong class="source-inline">12</strong>, followed by a carriage return. We pass the <strong class="source-inline">File</strong> object into the <strong class="source-inline">Scanner</strong> constructor (lines 34-36). The <strong class="source-inline">String</strong> object that’s passed into the <strong class="source-inline">File</strong> constructor (lines 35-36) is a <a id="_idIndexMarker886"/>relative path. In other words, it is appended to the current working directory (as opposed to an absolute path, which contains the full path from the root). <strong class="source-inline">\\</strong> within <strong class="source-inline">String</strong> is where we are escaping the backslash (<strong class="source-inline">\</strong>). Java converts <strong class="source-inline">\\</strong> into a single backslash internally. Therefore, <strong class="source-inline">"out\\production"</strong> becomes <strong class="source-inline">"out\production"</strong>. The <strong class="source-inline">hasNextInt()</strong> and <strong class="source-inline">nextInt()</strong> methods (lines 37 and 38) work <span class="No-Break">as before.</span></p>
			<p>As we are using try-with-resources, we do not need to remember to explicitly close the <strong class="source-inline">Scanner</strong> or <strong class="source-inline">File</strong> resources (they are closed implicitly <span class="No-Break">for us).</span></p>
			<p>Another possible source for <strong class="source-inline">Scanner</strong> input is a <strong class="source-inline">String</strong> object. Let’s look at <span class="No-Break">that now.</span></p>
			<h2 id="_idParaDest-299"><a id="_idTextAnchor299"/>Using Scanner to read from a string</h2>
			<p>Using <strong class="source-inline">String</strong> as <a id="_idIndexMarker887"/>an input <strong class="source-inline">Scanner</strong> source is also possible. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.5</em> shows such <span class="No-Break">an example:</span></p>
			<div>
				<div id="_idContainer177" class="IMG---Figure">
					<img src="image/B19793_12_05.jpg" alt="Figure 12.5 – “Scanner” taking input from a string"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.5 – “Scanner” taking input from a string</p>
			<p>In this figure, we declare a <strong class="source-inline">String</strong> object (line 14) and pass it to the <strong class="source-inline">Scanner</strong> constructor (line 15). We then chain the <strong class="source-inline">useDelimiter(String)</strong> method onto the <strong class="source-inline">Scanner</strong> object that is returned. This method accepts <strong class="source-inline">String</strong> as an argument and represents the regular expression pattern required to parse the input. The double backslash is, as before, simply escaping the backslash. In other words, <strong class="source-inline">\\</strong> <span class="No-Break">becomes </span><span class="No-Break"><strong class="source-inline">\</strong></span><span class="No-Break">.</span></p>
			<p>The <strong class="source-inline">\s*</strong> regular expression translates into <em class="italic">0 or more whitespace characters</em>. <strong class="source-inline">*</strong> represents <em class="italic">0 or more</em> and <strong class="source-inline">\s</strong> represents <em class="italic">a single whitespace character</em>. The <strong class="source-inline">delim</strong> string is hardcoded. This means that the input tokens are delimited by 0 or more spaces, followed by the <strong class="source-inline">delim</strong> token, followed by 0 or <span class="No-Break">more spaces.</span></p>
			<p>When we apply this delimiter pattern to the given input string (line 14), the first token returned by <strong class="source-inline">next()</strong> is <strong class="source-inline">Maaike</strong>. This is output by line 16. As <strong class="source-inline">Maaike</strong> has now been consumed from the input stream, the <strong class="source-inline">next()</strong> method call (line 17) returns the <strong class="source-inline">van</strong> token, which is then <a id="_idIndexMarker888"/>output. Similarly, the <strong class="source-inline">next()</strong> method on line 18 returns <strong class="source-inline">Putten</strong> to be output. Lastly, line 19 uses <strong class="source-inline">nextInt()</strong> to return 22 as an <strong class="source-inline">int</strong> type, which is then output to <span class="No-Break">the screen.</span></p>
			<p>Now that we know how to obtain input from the user, let’s cover two of the most important classes dealing with strings, namely <strong class="source-inline">String</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">StringBuilder</strong></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-300"><a id="_idTextAnchor300"/>Comparing String with StringBuilder</h1>
			<p>When dealing <a id="_idIndexMarker889"/>with strings, these two classes are your go-to classes. Their primary difference is that <strong class="source-inline">String</strong> objects are immutable, whereas <strong class="source-inline">StringBuilder</strong> objects are mutable. This means that for strings, once you create a <strong class="source-inline">String</strong> object, you cannot ever change that object. Java might make it look like you changed the object but you haven’t; a new object, reflecting your changes, has been created. <strong class="source-inline">StringBuilder</strong> objects, on the other hand, are mutable. This means <a id="_idIndexMarker890"/>that you are working with one object all the time. We will delve into this with an <span class="No-Break">example later.</span></p>
			<p class="callout-heading">Why immutability?</p>
			<p class="callout">Immutability is attractive from a security perspective as immutable objects cannot be changed. In addition, immutable objects are thread-safe in a multi-threaded environment. In multi-threaded environments, changes to (non-immutable) objects have to be synchronized one at a time so that changes do not interfere with one another Immutable objects are, by definition, protected from that. See <a href="B19793_17.xhtml#_idTextAnchor430"><span class="No-Break"><em class="italic">Chapter 17</em></span></a> (Concurrency) for a discussion <span class="No-Break">on multi-threading.</span></p>
			<p>For the moment, let’s start with the <span class="No-Break"><strong class="source-inline">String</strong></span><span class="No-Break"> class.</span></p>
			<h2 id="_idParaDest-301"><a id="_idTextAnchor301"/>String class</h2>
			<p>The <strong class="source-inline">String</strong> class is in the <strong class="source-inline">java.lang</strong> package and represents a sequence of characters. As the class is in <strong class="source-inline">java.lang</strong>, it is automatically imported for you. The <strong class="source-inline">String</strong> class implements <a id="_idIndexMarker891"/>the <strong class="source-inline">Comparable</strong> interface, meaning that a natural ordering is defined when sorting strings. This ordering <span class="No-Break">is alphabetic.</span></p>
			<p>As stated, <strong class="source-inline">String</strong> is an immutable type. Objects of the <strong class="source-inline">String</strong> type, once created, cannot be modified. <strong class="source-inline">String</strong> is also a <strong class="source-inline">final</strong> class, which means that you cannot subclass it. This is <a id="_idIndexMarker892"/>deliberate – the Java designers expect strings to behave in a certain way. If we were allowed to subclass <strong class="source-inline">String</strong> and override its behavior, unexpected results would occur. So, making the class <strong class="source-inline">final</strong> prevents this by ensuring predictable <span class="No-Break">string behavior.</span></p>
			<p>All <strong class="source-inline">String</strong> literals are instances of the <strong class="source-inline">String</strong> class. <strong class="source-inline">String</strong> literals are stored in a special area of the heap called the string pool (or string constant pool). This is known as <em class="italic">interning</em> the string. If another string literal with the same character sequence is encountered, the string in the string pool is reused. This saves on memory. However, if you use the <strong class="source-inline">new</strong> keyword to create your <strong class="source-inline">String</strong> object, a new object with the character sequence is created on the heap, even if such an object is available in the string pool. In other words, the string pool is ignored if <strong class="source-inline">new</strong> <span class="No-Break">is used.</span></p>
			<p>Let’s look at an example in code, as well as a supporting <span class="No-Break">in-memory diagram.</span></p>
			<h3>String example (code)</h3>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.6</em> represents <a id="_idIndexMarker893"/><span class="No-Break">the code:</span></p>
			<div>
				<div id="_idContainer178" class="IMG---Figure">
					<img src="image/B19793_12_06.jpg" alt="Figure 12.6 – “String” example in code"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.6 – “String” example in code</p>
			<p>In this figure, on line 5, we use the <strong class="source-inline">s1</strong> string reference to refer to the <strong class="source-inline">"abc"</strong> string literal. When the JVM encounters a string literal, it first checks if the same string literal exists in the string pool. If it does, it reuses the one from the pool. As line 5 is the first time <strong class="source-inline">"abc"</strong> is encountered, the <strong class="source-inline">String</strong> object with <strong class="source-inline">"abc"</strong> is inserted into the pool. Note that the string pool is simply a special area in <span class="No-Break">the heap.</span></p>
			<p>Line 6 is where the string pool object is reused. Now, we have both <strong class="source-inline">s1</strong> and <strong class="source-inline">s2</strong> referring to the same <strong class="source-inline">String</strong> object (in the pool). This is why line 7 outputs <strong class="source-inline">true</strong>. Recall that when the <strong class="source-inline">==</strong> operator is used with references, we are comparing the references. In other words, are both <strong class="source-inline">s1</strong> and <strong class="source-inline">s2</strong> referring to the same object in memory? Yes, <span class="No-Break">they are.</span></p>
			<p>Line 8 uses the <strong class="source-inline">new</strong> keyword to create a <strong class="source-inline">String</strong> object. Once <strong class="source-inline">new</strong> is used, regardless of the same literal <strong class="source-inline">"abc"</strong> being used, a completely new object is created in a separate part of the heap. As line 8 creates a new object, when we compare <strong class="source-inline">s1</strong> and <strong class="source-inline">s3</strong> on line 9, the result is <strong class="source-inline">false</strong>. This is because <strong class="source-inline">s1</strong> and <strong class="source-inline">s3</strong> refer to two <span class="No-Break">different objects.</span></p>
			<p>The <strong class="source-inline">String</strong> object’s method, <strong class="source-inline">equals()</strong>, operates differently from the equivalence operator, <strong class="source-inline">==</strong>. Rather than compare the references, <strong class="source-inline">equals()</strong> compares the contents of the objects. As line 10 returns <strong class="source-inline">true</strong>, it shows that the contents of the objects referred to by <strong class="source-inline">s1</strong> and <strong class="source-inline">s2</strong> are the same. This should not be a surprise as both <strong class="source-inline">s1</strong> and <strong class="source-inline">s2</strong> refer to the <span class="No-Break">same object.</span></p>
			<p>Line 11, however, also returns <strong class="source-inline">true</strong>. Even though <strong class="source-inline">s1</strong> and <strong class="source-inline">s3</strong> refer to different objects, this demonstrates that <strong class="source-inline">equals()</strong> compares the object’s contents and not <span class="No-Break">the references.</span></p>
			<p>Line 12 is interesting. We can intern a string by using its <strong class="source-inline">intern()</strong> method. What we are saying on line 12 is “Intern in the string pool what <strong class="source-inline">s3</strong> is referring to, and make the <strong class="source-inline">s3</strong> reference refer to the string pool object.” Line 13 returns <strong class="source-inline">true</strong>, demonstrating that both <strong class="source-inline">s1</strong> and <strong class="source-inline">s3</strong> now refer to the <a id="_idIndexMarker894"/>same string object. Note that line 13 is the same code as line 9, which returned <span class="No-Break"><strong class="source-inline">false</strong></span><span class="No-Break"> previously.</span></p>
			<p>A diagram will certainly help here, so let’s examine what is happening <span class="No-Break">in memory.</span></p>
			<h3>String example (diagram)</h3>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.7</em> represents the <a id="_idIndexMarker895"/>in-memory representation of the code in <span class="No-Break"><em class="italic">Figure 12</em></span><span class="No-Break"><em class="italic">.6</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer179" class="IMG---Figure">
					<img src="image/B19793_12_07.jpg" alt="Figure 12.7 – “String” example in memory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.7 – “String” example in memory</p>
			<p>As can be seen from the preceding figure, both <strong class="source-inline">s1</strong> and <strong class="source-inline">s2</strong> refer to the <strong class="source-inline">"abc"</strong> object in the string pool. The dashed line from <strong class="source-inline">s3</strong> represents the object that was created by using the <strong class="source-inline">new</strong> keyword (line 8). Thus, we have two separate string objects: one on the heap and one in the pool (which is also part of <span class="No-Break">the heap).</span></p>
			<p>The solid line from <strong class="source-inline">s3</strong> represents the result of the interning operation on line 12. Now, it is straightforward to see why, after line 12, that <strong class="source-inline">s1 == s3</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">true</strong></span><span class="No-Break">.</span></p>
			<p>So, when using strings, if you <a id="_idIndexMarker896"/>are interested in comparing the contents, use the <strong class="source-inline">equals()</strong> method. Note that <strong class="source-inline">equals()</strong> is case-sensitive. There is a method, namely <strong class="source-inline">equalsIgnoreCase()</strong>, which is <span class="No-Break">case insensitive.</span></p>
			<p>An important property of <strong class="source-inline">String</strong> objects is the fact that they are immutable. Let’s discuss <span class="No-Break">that now.</span></p>
			<h3>String immutability</h3>
			<p>This topic is very important if you want to create immutable types or wish to obtain Java certification. We will <a id="_idIndexMarker897"/>discuss how to create a custom immutable type later. Regarding the <strong class="source-inline">String</strong> class, it is the object that is immutable and not the reference. What this means is that you can change the reference to point to a different string, but you cannot change the contents of the string object itself. Also, note that all the “wrapper” types, such as <strong class="source-inline">Integer</strong>, <strong class="source-inline">Double</strong>, <strong class="source-inline">Float</strong>, and <strong class="source-inline">Character</strong>, are <span class="No-Break">also immutable.</span></p>
			<p>Let’s look at an example in code, with an associated in-memory diagram. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.8</em> represents <span class="No-Break">the code:</span></p>
			<div>
				<div id="_idContainer180" class="IMG---Figure">
					<img src="image/B19793_12_08.jpg" alt="Figure 12.8 – “String” immutability (code)"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.8 – “String” immutability (code)</p>
			<p>In this figure, on line 18, using the <strong class="source-inline">"The "</strong> literal, we create a <strong class="source-inline">String</strong> object that’s referred to by the <strong class="source-inline">s</strong> reference. As this is a literal, the object goes into the string pool. Line 19 appends <strong class="source-inline">"quick "</strong> to <strong class="source-inline">s</strong> using the <strong class="source-inline">+=</strong> operator. As line 20 outputs <strong class="source-inline">"The quick "</strong>, you would be forgiven for thinking that the string object referred to by <strong class="source-inline">s</strong> has changed. This is not the case. As <strong class="source-inline">String</strong> objects are immutable, this is not allowed. What happens is that a new <strong class="source-inline">String</strong> object is created reflecting the requested changes. Therefore, we have three <strong class="source-inline">String</strong> objects on line 20: the two literals, <strong class="source-inline">"The "</strong> and <strong class="source-inline">"quick "</strong>, are in the string pool, and the newly created <strong class="source-inline">"The quick "</strong> object is on <span class="No-Break">the heap.</span></p>
			<p>Line 21 is revealing. Many of the <strong class="source-inline">String</strong> API methods return a <strong class="source-inline">String</strong> (reference). As <strong class="source-inline">String</strong> objects are immutable, this <strong class="source-inline">String</strong> reference that’s returned is a reference to the newly created <strong class="source-inline">String</strong> object. This object is created in the background and reflects the requested changes. As we have not stored the reference on line 21, this object is lost to us and is immediately eligible for garbage collection. When we output <strong class="source-inline">s</strong> on line 22, you can see that it has not changed; its content is still <strong class="source-inline">"The </strong><span class="No-Break"><strong class="source-inline">quick "</strong></span><span class="No-Break">.</span></p>
			<p>Line 23 shows what <a id="_idIndexMarker898"/>line 21 should have done. By reinitializing <strong class="source-inline">s</strong>, we redirect the reference to the newly created object. Consequently, when we output <strong class="source-inline">s</strong> on line 24, we get the full string – that is, <strong class="source-inline">"The quick </strong><span class="No-Break"><strong class="source-inline">brown fox"</strong></span><span class="No-Break">.</span></p>
			<p>A diagram representing what is happening in memory will help here. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.9</em> represents the in-memory representation of the code from <span class="No-Break"><em class="italic">Figure 12</em></span><span class="No-Break"><em class="italic">.8</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer181" class="IMG---Figure">
					<img src="image/B19793_12_09.jpg" alt="Figure 12.9 – “String” immutability (diagram)"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.9 – “String” immutability (diagram)</p>
			<p>In the preceding figure, dashed lines represent overwritten references. We have six <strong class="source-inline">String</strong> objects in total – three string literals in the pool and three constructed string objects using both the <strong class="source-inline">+=</strong> operator and the <span class="No-Break"><strong class="source-inline">concat()</strong></span><span class="No-Break"> method.</span></p>
			<p>Notice that the string object in the middle (at the bottom), has no reference pointing to it. It never had, hence there is no dashed line pointing to it. This is the object that was created by line 21 but as the reference was never assigned to a variable, it <span class="No-Break">was lost.</span></p>
			<p>On the other hand, line 23 <a id="_idIndexMarker899"/>did store the reference to the newly created string object. It overwrote what was in the <strong class="source-inline">s</strong> reference. This is why <strong class="source-inline">s</strong> is referring to <strong class="source-inline">"The quick </strong><span class="No-Break"><strong class="source-inline">brown fox"</strong></span><span class="No-Break">.</span></p>
			<p>When we discuss <strong class="source-inline">StringBuilder</strong>, we will re-write the code from <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.8</em>. For the moment, we will look at the more important methods in the <strong class="source-inline">String</strong> API. These are reflected in <span class="No-Break"><em class="italic">Table 12.2</em></span><span class="No-Break">:</span></p>
			<table id="table002" class="T---Table _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<thead>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Method Name</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Description</strong></span></p>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">char </strong><span class="No-Break"><strong class="source-inline">charAt(int index)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the character at the specified index. Indices range from 0 (as per arrays) <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">length()</strong></span><span class="No-Break">-1.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">int </strong><span class="No-Break"><strong class="source-inline">compareTo(String anotherString)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Compares two strings character by character lexicographically (dictionary order). In other words, <strong class="source-inline">this.charAt(k)-anotherString.charAt(k)</strong>. For example, <strong class="source-inline">"ace"</strong> comes before <strong class="source-inline">"bat"</strong>, <strong class="source-inline">"and"</strong> comes before <strong class="source-inline">"at"</strong>, and so forth. If all characters match but the two string lengths differ, then the shorter string precedes the longer string. For example, <strong class="source-inline">"bat"</strong> comes before <strong class="source-inline">"battle"</strong>. Let’s take <span class="No-Break">a look:</span></p>
							<p><strong class="source-inline">"ace".compareTo("bat")</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">-1</strong></span><span class="No-Break">;</span></p>
							<p><strong class="source-inline">"and".compareTo("at")</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">-6</strong></span><span class="No-Break">;</span></p>
							<p><strong class="source-inline">"bat".compareTo("battle")</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">-3</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">String </strong><span class="No-Break"><strong class="source-inline">concat(String str)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Concatenates the argument string to <span class="No-Break">this string.</span></p>
							<p><strong class="source-inline">"abc".concat("def")</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">"abcdef"</strong></span><span class="No-Break">.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">boolean </strong><span class="No-Break"><strong class="source-inline">endsWith(String suffix)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Does this string end with the specified suffix? As it uses <strong class="source-inline">equals(Object)</strong>, it <span class="No-Break">is case-sensitive.</span></p>
							<p><strong class="source-inline">"abc".endsWith("bc")</strong> <span class="No-Break">returns true.</span></p>
							<p><strong class="source-inline">"abc".endsWith("BC")</strong> <span class="No-Break">returns false.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">int hashCode()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns a hash code for this string. Hash codes are used to store/retrieve objects used in hash-based collections such <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">HashMap</strong></span><span class="No-Break">.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">int </strong><span class="No-Break"><strong class="source-inline">indexOf(String str)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the index of the first occurrence of the specified substring. It is case-sensitive <span class="No-Break">and overloaded.</span></p>
							<p><strong class="source-inline">"abcdef".indexOf("b")</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">1</strong></span><span class="No-Break">.</span></p>
							<p><strong class="source-inline">"abcdef".indexOf("B")</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">-1</strong></span><span class="No-Break">.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">int length()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the length of <span class="No-Break">the string.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">String </strong><span class="No-Break"><strong class="source-inline">substring(int beginIndex)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the substring of this string, starting at the specified <strong class="source-inline">beginIndex</strong> and proceeding until the end of this string. Indices start <span class="No-Break">at 0.</span></p>
							<p><strong class="source-inline">"abcdef".substring(3)</strong> <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">"def"</strong></span><span class="No-Break">.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">String substring(int beginIndex, </strong><span class="No-Break"><strong class="source-inline">int endIndex)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the substring of this string. The substring begins at the specified <strong class="source-inline">beginIndex</strong> and extends to the character at <strong class="source-inline">endIndex</strong>-1. Indices start <span class="No-Break">at 0.</span></p>
							<p>Think: “Give me <strong class="source-inline">endIndex-startIndex</strong> characters, starting at <strong class="source-inline">startIndex</strong>.” <span class="No-Break">For example,</span></p>
							<p><strong class="source-inline">"Sean Kennedy".substring(3,8)</strong> means “Give me 5 characters, starting at index 3,” which returns <strong class="source-inline">"</strong><span class="No-Break"><strong class="source-inline">n Ken"</strong></span><span class="No-Break">.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">String toLowerCase()</strong></span></p>
							<p><span class="No-Break"><strong class="source-inline">String toUpperCase()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Converts the string to lowercase and uppercase,  <span class="No-Break">respectively.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">String trim()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>The <strong class="source-inline">trim()</strong> method removes whitespace from both ends of a string – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">"   lots of  spaces   here    </strong><strong class="source-inline">".trim()</strong> returns <strong class="source-inline">""lots of  spaces   </strong><span class="No-Break"><strong class="source-inline">here""</strong></span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 12.2 – Sample “String” API methods</p>
			<p>Now, let’s turn <a id="_idIndexMarker900"/>our attention to the <span class="No-Break"><strong class="source-inline">StringBuilder</strong></span><span class="No-Break"> class.</span></p>
			<h2 id="_idParaDest-302"><a id="_idTextAnchor302"/>StringBuilder class</h2>
			<p>The <strong class="source-inline">StringBuilder</strong> class is also in the <strong class="source-inline">java.lang</strong> package and represents a mutable sequence of <a id="_idIndexMarker901"/>characters. The API for <strong class="source-inline">StringBuilder</strong> is the same as for the <strong class="source-inline">StringBuffer</strong> class. Use <strong class="source-inline">StringBuilder</strong> in a single-thread environment and use <strong class="source-inline">StringBuffer</strong> in a multithreading environment. <strong class="source-inline">StringBuilder</strong> also implements the <strong class="source-inline">Comparable</strong> interface where the natural ordering defined for sorting is <span class="No-Break">also alphabetic.</span></p>
			<p><strong class="source-inline">StringBuilder</strong> is a mutable type. <strong class="source-inline">StringBuilder</strong> is also a <strong class="source-inline">final</strong> class, which means that you cannot subclass it. Again, this is deliberate as the Java designers wanted to ensure predictable behavior from <span class="No-Break"><strong class="source-inline">StringBuilder</strong></span><span class="No-Break"> objects.</span></p>
			<p>As promised earlier, we will refactor <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.8</em> to use <strong class="source-inline">StringBuilder</strong> instead of <strong class="source-inline">String</strong>. In addition, we will diagram the differences <span class="No-Break">in memory.</span></p>
			<h3>StringBuilder example (code)</h3>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.10</em> represents <a id="_idIndexMarker902"/><span class="No-Break">the code:</span></p>
			<div>
				<div id="_idContainer182" class="IMG---Figure">
					<img src="image/B19793_12_10.jpg" alt="Figure 12.10 – “StringBuilder” example in code"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.10 – “StringBuilder” example in code</p>
			<p>In this figure, line 49 creates a new <strong class="source-inline">StringBuilder</strong> object and initializes it to <strong class="source-inline">"The "</strong>. Line 50 uses the <strong class="source-inline">append()</strong> method to append <strong class="source-inline">"quick "</strong> to the object referenced by <strong class="source-inline">sb</strong>. As <strong class="source-inline">StringBuilder</strong> objects are mutable, we can ignore the reference returned (as we have that reference in <strong class="source-inline">sb</strong> already). Line 51 outputs <strong class="source-inline">"The quick "</strong>, thereby demonstrating that the (one) <strong class="source-inline">StringBuilder</strong> object was changed. Line 52 appends <strong class="source-inline">"brown fox"</strong> to the <strong class="source-inline">StringBuilder</strong> object and line 53 again shows that there is only one object all <span class="No-Break">the time.</span></p>
			<p>Let’s have a look at the in-memory representation of <span class="No-Break"><em class="italic">Figure 12</em></span><span class="No-Break"><em class="italic">.10</em></span><span class="No-Break">.</span></p>
			<h3>StringBuilder example (diagram)</h3>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.11</em> represents <a id="_idIndexMarker903"/>the in-memory representation of the code in <span class="No-Break"><em class="italic">Figure 12</em></span><span class="No-Break"><em class="italic">.10</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer183" class="IMG---Figure">
					<img src="image/B19793_12_11.jpg" alt="Figure 12.11 – “StringBuilder” example in memory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.11 – “StringBuilder” example in memory</p>
			<p>As can be seen from this figure, apart from the string pool objects (which are there as they are string literals), we only have one <strong class="source-inline">StringBuilder</strong> object. Each time we call <strong class="source-inline">append()</strong>, that <a id="_idIndexMarker904"/>one mutable <strong class="source-inline">StringBuilder</strong> object <span class="No-Break">is changed.</span></p>
			<p>Let’s have a look at the more commonly used API methods from <strong class="source-inline">StringBuilder</strong>. <em class="italic">Table 12.3</em> reflects <span class="No-Break">this API:</span></p>
			<table id="table003" class="T---Table _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="bold">Method Name</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="bold">Description</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">StringBuilder </strong><span class="No-Break"><strong class="source-inline">append(String str)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Appends the specified string to <strong class="source-inline">StringBuilder</strong>. Overloaded versions are available (see <span class="No-Break">the API).</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">char </strong><span class="No-Break"><strong class="source-inline">charAt(int index)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the character at the specified index. Indices range <span class="No-Break">from 0.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">int </strong><span class="No-Break"><strong class="source-inline">indexOf(String str)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the index of the first occurrence of the <span class="No-Break">specified substring.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">StringBuilder insert(int offset, </strong><span class="No-Break"><strong class="source-inline">String str)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Inserts the given string into the <strong class="source-inline">StringBuilder</strong> object at the specified offset, moving any characters above that <span class="No-Break">position upwards.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">String </strong><span class="No-Break"><strong class="source-inline">substring(int beginIndex)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns a new string, starting at the specified <strong class="source-inline">beginIndex</strong>, and proceeds until the end of this string builder. Indices start <span class="No-Break">at 0.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">String substring(int beginIndex, </strong><span class="No-Break"><strong class="source-inline">int endIndex)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns a new string, starting at the specified <strong class="source-inline">beginIndex</strong>, and extends to the character at <strong class="source-inline">endIndex-1</strong>. Indices start <span class="No-Break">at 0.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">String toString()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns a string representation of the <span class="No-Break">character sequence.</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 12.3 – Sample “StringBuilder” API methods</p>
			<p>As we have seen, the <a id="_idIndexMarker905"/>major difference between <strong class="source-inline">String</strong> and <strong class="source-inline">StringBuilder</strong> is that <strong class="source-inline">String</strong> objects are immutable, whereas <strong class="source-inline">StringBuilder</strong> objects are mutable. Let’s look at an example that will help bring that difference into <span class="No-Break">sharp focus.</span></p>
			<h2 id="_idParaDest-303"><a id="_idTextAnchor303"/>String versus StringBuilder example</h2>
			<p>We will use a <a id="_idIndexMarker906"/>sample piece of code to demonstrate this. This code will help highlight both the immutability of <strong class="source-inline">String</strong> objects and the mutability of <strong class="source-inline">StringBuilder</strong> objects. As a bonus, because we are using methods, the code will help us revise the principle of call by value. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.12</em> shows <span class="No-Break">the code:</span></p>
			<div>
				<div id="_idContainer184" class="IMG---Figure">
					<img src="image/B19793_12_12.jpg" alt="Figure 12.12 – “String” versus “StringBuilder” code example"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.12 – “String” versus “StringBuilder” code example</p>
			<p>In this figure, on line 11, we declare a <strong class="source-inline">String</strong> reference, <strong class="source-inline">s</strong>, that’s referring to <strong class="source-inline">"Hi"</strong> and a <strong class="source-inline">StringBuilder</strong> reference, <strong class="source-inline">sb</strong>, that contains <strong class="source-inline">"Hi"</strong> also. On line 13, we invoke the <strong class="source-inline">whatHappens()</strong> method, passing in both <strong class="source-inline">s</strong> and <span class="No-Break"><strong class="source-inline">sb</strong></span><span class="No-Break">, respectively.</span></p>
			<p>As Java uses call by value, a copy of each reference is made. Thus, the <strong class="source-inline">s</strong> and <strong class="source-inline">sb</strong> references in the <a id="_idIndexMarker907"/>method declaration (line 4) refer to the same objects that were declared on lines 11 and 12, respectively. While not necessary, keeping the same identifiers, <strong class="source-inline">s</strong> and <strong class="source-inline">sb</strong>, helps emphasize <span class="No-Break">this point.</span></p>
			<p>Line 5 then concatenates <strong class="source-inline">" there!"</strong> onto the string referenced by <strong class="source-inline">s</strong>. As strings are immutable, that object cannot be changed, so the JVM creates a new object with the character sequence (string value) of <strong class="source-inline">"Hi there!"</strong>. Line 7 outputs this <span class="No-Break">new string.</span></p>
			<p>Line 6 appends <strong class="source-inline">" there!"</strong> to the <strong class="source-inline">StringBuilder</strong> object. As it is mutable, the object is simply modified. Line 8 outputs <strong class="source-inline">sb</strong> after <span class="No-Break">this change.</span></p>
			<p>After the method call on line 13 returns, we output both the values of the string object referred to by <strong class="source-inline">s</strong> and the string builder object referred to by <strong class="source-inline">sb</strong>. Remember, because we passed in references and because of call by value, the <strong class="source-inline">whatHappens()</strong> method had direct access to the objects declared in <strong class="source-inline">main()</strong> on lines 11 and 12. However, when we output the string object (line 14), we see that it is still <strong class="source-inline">"Hi"</strong>, demonstrating that <strong class="source-inline">String</strong> objects are immutable. On the other hand, when we output the <strong class="source-inline">StringBuilder</strong> object, it has changed to <strong class="source-inline">"Hi there!"</strong>, demonstrating the mutability of <span class="No-Break"><strong class="source-inline">StringBuilder</strong></span><span class="No-Break"> objects.</span></p>
			<p>A diagram will help here. However, to keep the diagram simple and to focus on mutability/immutability, the <a id="_idIndexMarker908"/>string pool has been omitted. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.13</em> is the in-memory representation of the code in <span class="No-Break"><em class="italic">Figure 12</em></span><span class="No-Break"><em class="italic">.12</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer185" class="IMG---Figure">
					<img src="image/B19793_12_13.jpg" alt="Figure 12.13 - ”String” versus “StringBuilder” in memory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.13 - ”String” versus “StringBuilder” in memory</p>
			<p>This figure represents the picture in memory as we are just about to leave the <strong class="source-inline">whatHappens()</strong> method (line 9). The dashed arrow is the important arrow. When we entered the <strong class="source-inline">whatHappens()</strong> method, both <strong class="source-inline">s</strong> references were pointing at the same <strong class="source-inline">String</strong> object. Line 5 changes the local <strong class="source-inline">s</strong> reference to point to the new <strong class="source-inline">String</strong> object and the original <strong class="source-inline">String</strong> object was untouched (as it is immutable). The other thing to notice is that the <strong class="source-inline">StringBuilder</strong> object has been modified (we used a strikethrough to <span class="No-Break">highlight this).</span></p>
			<p>Thus, when we return to <strong class="source-inline">main()</strong> after calling the method (line 13), the <strong class="source-inline">s</strong> reference is referring to the <a id="_idIndexMarker909"/>untouched <strong class="source-inline">String</strong> object containing <strong class="source-inline">"Hi"</strong>, whereas the <strong class="source-inline">sb</strong> reference is referring to the modified <strong class="source-inline">StringBuilder</strong> object containing <strong class="source-inline">"</strong><span class="No-Break"><strong class="source-inline">Hi there!"</strong></span><span class="No-Break">.</span></p>
			<p>This discussion on immutable types leads to a natural question, how do I create a custom immutable type? That is the topic of the <span class="No-Break">next section.</span></p>
			<h1 id="_idParaDest-304"><a id="_idTextAnchor304"/>Designing a custom immutable type</h1>
			<p>In the API, there are mutable types, such as <strong class="source-inline">StringBuilder</strong> and <strong class="source-inline">ArrayList</strong>, and immutable types, such as <strong class="source-inline">String</strong> and <strong class="source-inline">Integer</strong>. When something is “immutable,” it means it cannot <a id="_idIndexMarker910"/>change. We can use the <strong class="source-inline">final</strong> keyword to make a primitive value immutable. When we apply <strong class="source-inline">final</strong> to a reference, it is the reference that is immutable and not <span class="No-Break">the object.</span></p>
			<p>What if we wanted to create our own type (class) and make it immutable? In other words, we want the <em class="italic">objects</em> based on our custom class to be immutable. What considerations are involved? That is what we’ll discuss in <span class="No-Break">this section.</span></p>
			<p>Before we present the checklist, recall that Java uses call by value when passing arguments to, and retrieving values from, methods. Call by value implies that a copy of the argument is made and that the method works with that copy. For primitives, this means that the called method cannot change the primitive value passed from the caller method. This is analogous to passing a photocopy of a sheet of paper; the photocopied sheet can be written on, without it changing the original. For references, however, the situation is different. Passing a reference to a method means that the called method can change the object that the caller method is looking at. This is analogous to passing a copy of a remote control; the copy-remote can change the TV channel also. This is reflected in the checklist. Let’s examine <span class="No-Break">this checklist.</span></p>
			<h2 id="_idParaDest-305"><a id="_idTextAnchor305"/>The checklist</h2>
			<p>The checklist to <a id="_idIndexMarker911"/>apply is <span class="No-Break">as follows:</span></p>
			<ul>
				<li>Do not provide any “<span class="No-Break">setter” methods</span></li>
				<li>Make all the fields <strong class="source-inline">private</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">final</strong></span></li>
				<li>Prevent subclassing (so that methods cannot <span class="No-Break">be overridden):</span><ul><li>Make the <span class="No-Break">class </span><span class="No-Break"><strong class="source-inline">final</strong></span></li><li>Make the constructor <strong class="source-inline">private</strong> and provide a <strong class="source-inline">public static</strong> factory method such <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">createNewInstance</strong></span></li></ul></li>
				<li>Regarding instance fields, bear in <span class="No-Break">mind that:</span><ul><li>Immutable types such as <strong class="source-inline">String</strong> <span class="No-Break">are ok</span></li><li>For mutable types such as <strong class="source-inline">StringBuilder</strong>, do <em class="italic">not</em> share the references – use the advanced encapsulation technique outlined in <a href="B19793_08.xhtml#_idTextAnchor168"><em class="italic">Chapter 8</em></a>. This technique is also known as “<span class="No-Break">defensive copying”.</span></li></ul></li>
			</ul>
			<p>This checklist is best explained with the aid of a code example. We will start with an example that looks fine <a id="_idIndexMarker912"/>but has a subtle issue. We will examine the issue in memory to explain it further. Finally, we will address the issue in code and show why it works <span class="No-Break">in memory.</span></p>
			<h3>Immutable type (breaking encapsulation)</h3>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.14</em> presents such <span class="No-Break">an example:</span></p>
			<div>
				<div id="_idContainer186" class="IMG---Figure">
					<img src="image/B19793_12_14.jpg" alt="Figure 12.14 – A custom immutable type that breaks encapsulation"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.14 – A custom immutable type that breaks encapsulation</p>
			<p>In this figure, we have an immutable type called <strong class="source-inline">Farm</strong>. The class is <strong class="source-inline">final</strong> (line 6), so it cannot be subclassed. All of the fields are <strong class="source-inline">private</strong> and <strong class="source-inline">final</strong> (lines 8-10). Marking them as <strong class="source-inline">private</strong> ensures no external classes can change their values without our knowledge (basic encapsulation). Marking them as <strong class="source-inline">final</strong> means that once given initial values, those values <a id="_idIndexMarker913"/>cannot change. In this example, as they are not given initial values at the point of declaration, they are known as <em class="italic">blank finals</em>. Blank finals must be initialized before the constructor finishes, which is what we do (<span class="No-Break">lines 14-17).</span></p>
			<p>Our constructor is marked <strong class="source-inline">private</strong> on line 13. Thus, no external class can <strong class="source-inline">new</strong> a <strong class="source-inline">Farm</strong> object directly via this constructor. This is another way to prevent subclassing, as no subclass will have access to this constructor and as we have a constructor coded, the compiler will not insert the default constructor either. We have marked the constructor parameters as <strong class="source-inline">final</strong> also, in case of <span class="No-Break">accidental change.</span></p>
			<p>The <strong class="source-inline">createNewInstance()</strong> factory method (lines 20-23) is how we enable external classes to create <strong class="source-inline">Farm</strong> objects. We provide a <strong class="source-inline">public</strong> <strong class="source-inline">static</strong> method that calls the <strong class="source-inline">private</strong> constructor on their behalf. Marking it as <strong class="source-inline">public</strong> gives every class access to this method; marking it as <strong class="source-inline">static</strong> ensures that clients do not have to create an object to create a <strong class="source-inline">Farm</strong> (which they can’t do <span class="No-Break">directly anyway!).</span></p>
			<p>Note that there are no <strong class="source-inline">set</strong> methods, only <strong class="source-inline">get</strong> methods (lines 25-34). There is one <strong class="source-inline">get</strong> method per <span class="No-Break">instance variable.</span></p>
			<p>Note that this class breaks encapsulation. This is because, in the constructor (line 17), we are storing the reference that was passed in. In addition, our <strong class="source-inline">getAnimals()</strong> method is returning the <a id="_idIndexMarker914"/>reference we stored. We will see the implications of this in <span class="No-Break">memory shortly.</span></p>
			<p>However, for now, let’s look at a client class utilizing the “supposedly immutable” <strong class="source-inline">Farm</strong> class. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.15</em> highlights <span class="No-Break">an issue:</span></p>
			<div>
				<div id="_idContainer187" class="IMG---Figure">
					<img src="image/B19793_12_15.jpg" alt="Figure 12.15 – A class that uses a weakly encapsulated custom immutable type"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.15 – A class that uses a weakly encapsulated custom immutable type</p>
			<p>In this figure, we declare a <strong class="source-inline">List</strong> (interface) reference, namely <strong class="source-inline">animals</strong>, referring to an <strong class="source-inline">ArrayList</strong> object (line 54). By stating the reference is of the <strong class="source-inline">List&lt;String&gt;</strong> type, we are telling the compiler that only strings are allowed. This gives us type safety, as we cannot, for example, add an <strong class="source-inline">Integer</strong> object to our list. As <strong class="source-inline">ArrayList</strong> is a mutable type, it is perfect for our example. Line 55 adds <strong class="source-inline">"Cattle"</strong> to <span class="No-Break">our </span><span class="No-Break"><strong class="source-inline">ArrayList</strong></span><span class="No-Break">.</span></p>
			<p>Line 57 uses the <strong class="source-inline">createNewInstance()</strong> factory method, passing in <strong class="source-inline">"Small Farm"</strong>, <strong class="source-inline">25</strong>, and our <strong class="source-inline">animals</strong> array list. Line 58 proves that the object was <span class="No-Break">created properly.</span></p>
			<p>Lines 61-63 are where we initialize the local variables based on the <strong class="source-inline">Farm</strong> object’s state (the values of the instance variables). Lines 64-65 check that they are set <span class="No-Break">as expected.</span></p>
			<p>Lines 68-70 are where we change the <em class="italic">local</em> variables. This is the acid test. Changing the local variables should <em class="italic">not</em> affect the state of our <strong class="source-inline">Farm</strong> object. On line 73, we output <a id="_idIndexMarker915"/>the instance variables again, via the implicit call to <strong class="source-inline">toString()</strong>. The output is in a comment on the previous line, line 72. As can be seen from the output, the instance’s <strong class="source-inline">String</strong> variable name is unaffected (still <strong class="source-inline">"Small Farm"</strong>) and the <strong class="source-inline">numAnimals</strong> instance primitive is also unaffected (still 25). However, the <strong class="source-inline">animals</strong> instance variable has changed! The <strong class="source-inline">ArrayList</strong> object type is the issue here. Originally, the list was just <strong class="source-inline">"Cattle"</strong>; now, it is <strong class="source-inline">"Cattle"</strong>, <strong class="source-inline">"Sheep"</strong>, and <strong class="source-inline">"Horses"</strong>. This change is highlighted by the rectangles. How did this happen? Looking at the situation in memory will reveal <span class="No-Break">the issue.</span></p>
			<h3>In-memory representation (breaking encapsulation)</h3>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.16</em> shows the situation in memory (as we are just about to exit the program). Note that <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.16</em> represents the whole program across both figures, namely <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.14</em> and <span class="No-Break"><em class="italic">Figure 12</em></span><span class="No-Break"><em class="italic">.15</em></span><span class="No-Break">.</span></p>
			<div>
				<div id="_idContainer188" class="IMG---Figure">
					<img src="image/B19793_12_16.jpg" alt="   Figure 12.16 – Encapsulation broken by a custom “immutable” type"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">   Figure 12.16 – Encapsulation broken by a custom “immutable” type</p>
			<p>In the preceding figure, the dashed lines represent original states or values. For example, the dashed line from the <strong class="source-inline">name</strong> variable, on the stack in <strong class="source-inline">main()</strong>, represents line 61 in the code. In contrast, the sold line from the same variable represents <span class="No-Break">line 68.</span></p>
			<p>Let’s discuss the stack first. The local <strong class="source-inline">farm</strong> reference refers to the <strong class="source-inline">Farm</strong> object on the heap, which is where the <strong class="source-inline">name</strong>, <strong class="source-inline">numAnimals</strong>, and <strong class="source-inline">animals</strong> instance variables are initialized accordingly. As stated, the local <strong class="source-inline">name</strong> variable in <strong class="source-inline">main()</strong> is initialized (line 61) to refer to the same <strong class="source-inline">String</strong> object that the instance variable in the <strong class="source-inline">Farm</strong> object is looking at. The local <strong class="source-inline">numAnimals</strong> variable is initialized to the value of the instance variable of the same name (line 62). Note that the local copy is represented as a rectangle and not an arrow; this reflects the <a id="_idIndexMarker916"/>photocopy of a sheet of paper analogy. Line 63 initializes the local <strong class="source-inline">animals</strong> reference to point to the same <strong class="source-inline">ArrayList</strong> object as the <strong class="source-inline">animals</strong> instance variable in the <strong class="source-inline">Farm</strong> object on the heap. This is the problem, as we shall see <span class="No-Break">very shortly.</span></p>
			<p>Just as we start to execute line 68, both <strong class="source-inline">name</strong> references, the local one on the stack and the instance one on the heap, are referring to the same <strong class="source-inline">String</strong> object. Line 68 changes the <strong class="source-inline">name</strong> local variable to <strong class="source-inline">"Big Farm"</strong>. However, as <strong class="source-inline">String</strong> objects are immutable, a new <strong class="source-inline">String</strong> object is created on the heap reflecting those changes. In other words, a new <strong class="source-inline">String</strong> object with <strong class="source-inline">"Big Farm"</strong> is created and <strong class="source-inline">name</strong> (on the stack) refers to it. The dashed line, referring to the original <strong class="source-inline">String</strong> object, and the solid line referring to the new <strong class="source-inline">String</strong> object represent this (from <strong class="source-inline">name</strong> on <span class="No-Break">the stack).</span></p>
			<p>Note that the <strong class="source-inline">name</strong> <em class="italic">instance</em> variable is completely unaffected by this change. That is the strength of immutable types. Other classes are unable to change <span class="No-Break">their values.</span></p>
			<p>Line 69 changes the <strong class="source-inline">numAnimals</strong> local variable (on the stack) to 500. The strikethrough font for the old value and 500 for the new value represent this. Again, the <strong class="source-inline">numAnimals</strong> instance variable is untouched, demonstrating that primitives are fine in custom <span class="No-Break">immutable types.</span></p>
			<p>The issue becomes apparent on line 70, where we add <strong class="source-inline">"Sheep"</strong> and <strong class="source-inline">"Horses"</strong> to the local array list. This <a id="_idIndexMarker917"/>should not change the supposedly <strong class="source-inline">private</strong> list that the instance variable is looking at. But <span class="No-Break">it does!</span></p>
			<p>So, we know there is a problem, but how do we <span class="No-Break">fix it?</span></p>
			<h3>Immutable types (properly encapsulated)</h3>
			<p>The issue here is with the reference to the mutable type being passed in and returned. A custom immutable type should not store or return the reference <em class="italic">directly</em>. Once you do that, the external class is looking at the same object and as it is mutable, you have no protection from the JVM. That is why lines 17 and 33 are in bold in <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.16</em> – they are the lines causing <span class="No-Break">the problem.</span></p>
			<p>So, how do we solve this? Well, the solution is to refer back to what we discussed in <a href="B19793_08.xhtml#_idTextAnchor168"><span class="No-Break"><em class="italic">Chapter 8</em></span></a>, <em class="italic">Mastering Advanced Encapsulation</em>. In summary, we should use a technique known as “defensive copying” to deal with <span class="No-Break">this situation.</span></p>
			<p>Only two code changes need to be made to our immutable <strong class="source-inline">Farm</strong> type. One is in the constructor; the other is in the relevant <strong class="source-inline">get</strong> method, namely <strong class="source-inline">getAnimals()</strong>. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.17</em> shows the <span class="No-Break">code changes:</span></p>
			<div>
				<div id="_idContainer189" class="IMG---Figure">
					<img src="image/B19793_12_17.jpg" alt="   Figure 12.17 – Custom immutable type, properly encapsulated"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">   Figure 12.17 – Custom immutable type, properly encapsulated</p>
			<p>Rather than present code that has not changed, this figure presents a segment of the class so that we can focus on the changes. Line 16, which was commented out before, is now uncommented and line 17, which has the issue, is now commented out. Contrasting them, we can see that instead of directly storing the reference passed in (line 17), we are now creating a <strong class="bold">new</strong> <strong class="source-inline">ArrayList</strong> object, based on the contents of the list passed in. We then store the reference to the new <strong class="source-inline">ArrayList</strong> object in our <strong class="source-inline">private</strong> <span class="No-Break">instance variable.</span></p>
			<p>The other change relates to lines 32 and 33. Line 33, which has the issue, has been commented out, whereas <a id="_idIndexMarker918"/>line 32, which has the fix, has been uncommented. Again, rather than returning a copy of our <strong class="source-inline">private</strong> instance variable (line 33), we are creating a <strong class="bold">new</strong> <strong class="source-inline">ArrayList</strong> object based on the contents of our array list and returning that reference. The contents of the new object can be identical to our private copy, so long as the external class cannot change our private copy. These changes achieve that. Let’s look at the situation <span class="No-Break">in memory.</span></p>
			<h3>In-memory representation (properly encapsulated)</h3>
			<p>In the interests of clarity in the diagram, we have only shown the <strong class="source-inline">ArrayList</strong> objects and their references. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.16</em> already demonstrated that <strong class="source-inline">String</strong> objects and primitives were fine, so there’s no need to look at those <span class="No-Break">elements again.</span></p>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.18</em> shows the situation in memory now (at the end of the program, just before <span class="No-Break">we exit):</span></p>
			<div>
				<div id="_idContainer190" class="IMG---Figure">
					<img src="image/B19793_12_18.jpg" alt="   Figure 12.18 - In-memory representation of properly encapsulated custom immutable type"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">   Figure 12.18 - In-memory representation of properly encapsulated custom immutable type</p>
			<p>In this figure, the methods <a id="_idIndexMarker919"/>where each of the three <strong class="source-inline">ArrayList</strong> objects are created are marked in bold. For example, the bottom <strong class="source-inline">ArrayList</strong> object (marked A) was created in <strong class="source-inline">main()</strong>. Examining that object for a moment, we can see that the <strong class="source-inline">animals</strong> reference on the stack initially (dashed line) refers to it. There is just one <strong class="source-inline">String</strong> in <span class="No-Break">it, </span><span class="No-Break"><strong class="source-inline">"Cattle"</strong></span><span class="No-Break">.</span></p>
			<p>This object is passed via the factory method into the constructor, where its content (<strong class="source-inline">"Cattle"</strong>) is used to create a <em class="italic">new</em> array list object and initialize the <strong class="source-inline">animals</strong> instance variable so that it points at the new object (line 16). This is represented in the figure by the <strong class="source-inline">ArrayList</strong> object being marked with <strong class="source-inline">Farm()</strong> (and the <span class="No-Break">letter B).</span></p>
			<p>The call to <strong class="source-inline">getAnimals()</strong> also results in a new array list object being created (line 32). This new object is marked by the method name creating it, namely <strong class="source-inline">getAnimals()</strong>, and the letter C. Initially, it just contains <strong class="source-inline">"Cattle"</strong> as this is what the instance variable contains. The dashed rectangle <span class="No-Break">represents this.</span></p>
			<p>Now, however, when we use the local animals reference to insert both “Sheep” and “Horses” into the <a id="_idIndexMarker920"/>array list (marked D), the private instance array list is <strong class="bold">not</strong> affected. Thus, this class is <span class="No-Break">properly encapsulated.</span></p>
			<p>That completes our coverage on creating a custom immutable type. The next few topics are ones we have touched upon in our recent example, namely <strong class="source-inline">List</strong> and <strong class="source-inline">ArrayList</strong>. Let’s discuss both in more <span class="No-Break">detail now.</span></p>
			<h1 id="_idParaDest-306"><a id="_idTextAnchor306"/>Examining List and ArrayList</h1>
			<p><strong class="source-inline">List</strong> is an interface <a id="_idIndexMarker921"/>implemented by the <strong class="source-inline">ArrayList</strong> class. Therefore, any API method in <strong class="source-inline">List</strong> is automatically in <strong class="source-inline">ArrayList</strong>. As we know, it is good coding practice <a id="_idIndexMarker922"/>to use an interface reference (<strong class="source-inline">List</strong>) to refer to an object (<strong class="source-inline">ArrayList</strong>). As the compiler looks at the reference type, this frees you up in the future to use different implementations of <strong class="source-inline">List</strong>, such <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">LinkedList</strong></span><span class="No-Break">.</span></p>
			<p>Both <strong class="source-inline">List</strong> and <strong class="source-inline">ArrayList</strong> are in the <strong class="source-inline">java.util</strong> package. In the API, both are typed generically with <strong class="source-inline">E</strong> (for <strong class="source-inline">Element</strong>), which means we are free to specify the type we want to store in our list. Failure to follow the declared type results in a compiler error. We will cover generics in detail in <a href="B19793_13.xhtml#_idTextAnchor317"><span class="No-Break"><em class="italic">Chapter 13</em></span></a><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-307"><a id="_idTextAnchor307"/>List properties</h2>
			<p>A list is an ordered<a id="_idIndexMarker923"/> collection (sometimes called a sequence). We have precise control over where in the list an element is inserted. Indices (as with arrays) start at 0 and duplicate elements are allowed. The order that lists maintain is insertion order. In other words, if you simply add two elements, the second one is positioned after the first one. So, lists maintain order and allow duplicates. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.19</em> shows a small piece of code that captures <span class="No-Break">these properties:</span></p>
			<div>
				<div id="_idContainer191" class="IMG---Figure">
					<img src="image/B19793_12_19.jpg" alt="   Figure 12.19 – Code demonstrating List properties"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">   Figure 12.19 – Code demonstrating List properties</p>
			<p>In this<a id="_idIndexMarker924"/> figure, line 11 declares a <strong class="source-inline">List</strong> reference called <strong class="source-inline">list</strong>, referring to an <strong class="source-inline">ArrayList</strong> object. The <strong class="source-inline">List</strong> reference is typed for strings, meaning that we can only add <strong class="source-inline">String</strong> objects to the list. As the list is implemented by <strong class="source-inline">ArrayList</strong>, the properties outlined here apply to <strong class="source-inline">ArrayList</strong> <span class="No-Break">implementations also.</span></p>
			<p>Lines 12-15 add the <strong class="source-inline">J</strong>, <strong class="source-inline">A</strong>, <strong class="source-inline">V</strong>, and <strong class="source-inline">A</strong> strings in sequence. When we output the list (line 17), we can see that the insertion order is maintained and that duplicate elements <span class="No-Break">are allowed.</span></p>
			<p>To demonstrate precise control over where elements are inserted, lines 18-19 add <strong class="source-inline">"O"</strong> to two different locations, namely indices 1 and 3. When we output the list again (line 21), we can see that the strings have been inserted into their <span class="No-Break">correct locations.</span></p>
			<p>Let’s look at another example showing other <strong class="source-inline">List</strong>/<strong class="source-inline">ArrayList</strong> <span class="No-Break">API calls:</span></p>
			<div>
				<div id="_idContainer192" class="IMG---Figure">
					<img src="image/B19793_12_20.jpg" alt="   Figure 12.20 – Code demonstrating “List” and ”ArrayList”"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">   Figure 12.20 – Code demonstrating “List” and ”ArrayList”</p>
			<p>In this figure, we have several API calls and their respective output is in commented form on the right-hand side <a id="_idIndexMarker925"/>of each line. In this figure, our list contains <strong class="source-inline">"Joe"</strong>, <strong class="source-inline">"Mary"</strong>, and <strong class="source-inline">"Joe"</strong> in that order. We have the following sequence of <span class="No-Break">API calls:</span></p>
			<ul>
				<li><strong class="bold">Line 27</strong>: <strong class="source-inline">contains(Object o)</strong> checks if <strong class="source-inline">"Mary"</strong> is in the list. This <span class="No-Break">returns </span><span class="No-Break"><strong class="source-inline">true</strong></span><span class="No-Break">.</span></li>
				<li><strong class="bold">Line 28</strong>: <strong class="source-inline">get(int index)</strong> returns the element at index 0, <span class="No-Break">namely </span><span class="No-Break"><strong class="source-inline">"Joe"</strong></span><span class="No-Break">.</span></li>
				<li><strong class="bold">Line 29</strong>: <strong class="source-inline">indexOf(Object o)</strong> returns the index of the first occurrence of <strong class="source-inline">2</strong>. This will be boxed as an <strong class="source-inline">Integer</strong> type, which “is-a” <strong class="source-inline">Object</strong>. However, as there is no such object in the list, <strong class="source-inline">-1</strong> <span class="No-Break">is returned.</span></li>
				<li><strong class="bold">Line 30</strong>: Returns <strong class="source-inline">0</strong> as this is the index of the first occurrence of <strong class="source-inline">"Joe"</strong> in <span class="No-Break">the list.</span></li>
				<li><strong class="bold">Line 31</strong>: <strong class="source-inline">remove(Object o)</strong> removes the first occurrence of the object from the list and returns true/false depending on whether the object was found or not. As <strong class="source-inline">"Joe"</strong> was present in the list, <strong class="source-inline">true</strong> <span class="No-Break">is returned.</span></li>
				<li><strong class="bold">Line 32</strong>: Outputs the list, which is now <strong class="source-inline">"Mary"</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">"Joe"</strong></span><span class="No-Break">.</span></li>
				<li><strong class="bold">Line 33</strong>: <strong class="source-inline">remove(int index)</strong> removes the object at index 0, which <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">"Mary"</strong></span><span class="No-Break">.</span></li>
				<li><strong class="bold">Line 34</strong>: Outputs the list, which is now just <strong class="source-inline">"Joe"</strong> (the <span class="No-Break">second </span><span class="No-Break"><strong class="source-inline">"Joe"</strong></span><span class="No-Break">).</span></li>
				<li><strong class="bold">Line 35</strong>: <strong class="source-inline">set(int index, E element)</strong> changes the contents of the given index to the object passed. Therefore, <strong class="source-inline">"Paul"</strong> is now in <span class="No-Break">index </span><span class="No-Break"><strong class="source-inline">0</strong></span><span class="No-Break">.</span></li>
				<li><strong class="bold">Line 36</strong>: This shows that line 35 operated <span class="No-Break">as expected.</span></li>
			</ul>
			<p>Now that we have discussed <a id="_idIndexMarker926"/>some of the API methods, let’s discuss some others. <em class="italic">Table 12.4</em> presents <span class="No-Break">this information:</span></p>
			<table id="table004" class="T---Table _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="bold">Method Name</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="bold">Description</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">void add(int index, </strong><span class="No-Break"><strong class="source-inline">E element)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Adds the element at the <span class="No-Break">specified index</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">boolean </strong><span class="No-Break"><strong class="source-inline">add(E e)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Adds the element to the end of <span class="No-Break">the list</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">void clear()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Removes all the elements from <span class="No-Break">the list</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">boolean </strong><span class="No-Break"><strong class="source-inline">contains(Object o)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns <strong class="source-inline">true</strong> if the object is in <span class="No-Break">the list</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">E </strong><span class="No-Break"><strong class="source-inline">get(int index)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the element at the <span class="No-Break">specified index</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">boolean isEmpty()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns <strong class="source-inline">true</strong> if the list <span class="No-Break">is empty</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">int </strong><span class="No-Break"><strong class="source-inline">indexOf(Object o)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the index of the first occurrence of the specified element; its returns -1 if no such element exists in <span class="No-Break">the list</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">E </strong><span class="No-Break"><strong class="source-inline">remove(int index)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Removes the element at the <span class="No-Break">specified index</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">boolean </strong><span class="No-Break"><strong class="source-inline">remove(Object o)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Removes the first occurrence of the <span class="No-Break">specified object</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><strong class="source-inline">E set(int index, </strong><span class="No-Break"><strong class="source-inline">E element)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Replaces the element at the specified index with the <span class="No-Break">given element</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">int size()</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Returns the number of elements in <span class="No-Break">the list</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 12.4 – Sample “List” and “ArrayList” API methods</p>
			<p>That concludes this <a id="_idIndexMarker927"/>section on examining <strong class="source-inline">List</strong> and <strong class="source-inline">ArrayList</strong>. For further reading please see the JavaDocs at <a href="https://docs.oracle.com/en/java/javase/21/docs/api/index.html">https://docs.oracle.com/en/java/javase/21/docs/api/index.html</a>. Now, let’s move on to exploring the <span class="No-Break">Date API.</span></p>
			<h1 id="_idParaDest-308"><a id="_idTextAnchor308"/>Exploring the Date API</h1>
			<p>The <strong class="source-inline">java.time</strong> package was introduced in Java 8 and was designed to replace the previous <strong class="source-inline">java.util.Date</strong>, <strong class="source-inline">java.util.Calendar</strong>, and <strong class="source-inline">java.text.DateFormat</strong> classes. The classes in <strong class="source-inline">java.time</strong> represent dates, times, timezones, instants, periods, and durations. The ISO calendar system is followed, which is the <a id="_idIndexMarker928"/>de facto world calendar (following Gregorian rules). All the classes are immutable <span class="No-Break">and thread-safe.</span></p>
			<p>It is a large API (<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/package-summary.html">https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/package-summary.html</a>) with a large number of classes for dealing with dates, with relatively fewer classes dealing with times. Thankfully, despite the large number of methods available, the consistent use of method prefixes makes this manageable. We will look at these API prefixes shortly. But before we do that, let’s discuss the more important date and <span class="No-Break">time classes.</span></p>
			<p class="callout-heading">Coordinated Universal Time (UTC)</p>
			<p class="callout">UTC is the standard by <a id="_idIndexMarker929"/>which the world regulates clocks and time. It is <a id="_idIndexMarker930"/>effectively a successor to <strong class="bold">Greenwich Mean Time</strong> (<strong class="bold">GMT</strong>). UTC makes no adjustment for daylight <span class="No-Break">savings time.</span></p>
			<p class="callout">The time zone uses UTC+/-00:00, which is sometimes denoted by the letter Z – a reference to the equivalent nautical time zone (GMT). Since the NATO phonetic alphabet word for Z is “Zulu”, UTC is sometimes referred to as “<span class="No-Break">Zulu time.”</span></p>
			<h2 id="_idParaDest-309"><a id="_idTextAnchor309"/>Dates and times</h2>
			<p>There are five important <a id="_idIndexMarker931"/>classes here. Let’s examine each <span class="No-Break">in turn:</span></p>
			<ul>
				<li><strong class="source-inline">Instant</strong>: An instant is a numeric timestamp. It is useful for logging and persistence. Historically, <strong class="source-inline">System.currentTimeMillis()</strong> would have been used. <strong class="source-inline">System.currentTimeMillis()</strong> returns the number of milliseconds since the “epoch day” (Jan 1<span class="superscript">st</span>, 1970 at 00:00:00 UTC). The epoch is a fixed time from which all timestamps <span class="No-Break">are calculated.</span></li>
				<li><strong class="source-inline">LocalDate</strong>: Stores a date <a id="_idIndexMarker932"/>without a time. This is useful for representing birthdays such as 2000-10-21. As it follows ISO-8601, the format <span class="No-Break">is year-month-day.</span></li>
				<li><strong class="source-inline">LocalTime</strong>: Stores a time without a date. This is useful for representing opening/closing hours such <span class="No-Break">as 09:00.</span></li>
				<li><strong class="source-inline">LocalDateTime</strong>: Stores a date and time such as 2000-10-21T17:00. Note the “T” used as a date and time separator. This is useful for representing the date and time of a scheduled event, such as <span class="No-Break">a concert.</span></li>
				<li><strong class="source-inline">ZonedDateTime</strong>: Represents a “full” date-time with a time zone and resolved offset from UTC. For example, 2023-02-14T16:45+01:00[Europe/Zurich] is the date-time for the Europe/Zurich time zone and is 1 hour ahead <span class="No-Break">of UTC.</span></li>
			</ul>
			<h2 id="_idParaDest-310"><a id="_idTextAnchor310"/>Duration and Period</h2>
			<p>In addition to dates and times, the API also represents durations and periods of time. Let’s look at <span class="No-Break">these now.</span></p>
			<ul>
				<li><strong class="source-inline">Duration</strong>: An amount <a id="_idIndexMarker933"/>of time, represented in seconds (and nanoseconds); for example, “<span class="No-Break">54 seconds.”</span></li>
				<li><strong class="source-inline">Period</strong>: Represents an <a id="_idIndexMarker934"/>amount of time in units more meaningful to humans, such as years or days. For example, “3 years, 6 months, and <span class="No-Break">12 days.”</span></li>
			</ul>
			<h2 id="_idParaDest-311"><a id="_idTextAnchor311"/>Additional interesting types</h2>
			<p>Other types are interesting <a id="_idIndexMarker935"/>also. Let’s examine some of <span class="No-Break">these now.</span></p>
			<ul>
				<li><strong class="source-inline">Month</strong>: Represents a month on its own; for <span class="No-Break">example, JANUARY.</span></li>
				<li><strong class="source-inline">DayOfWeek</strong>: Represents a day-of-week on its own; for <span class="No-Break">example, FRIDAY.</span></li>
				<li><strong class="source-inline">YearMonth</strong>: Represents a year and month, without a day or time; for example, 2025-12. This could be useful for a credit card <span class="No-Break">expiry date.</span></li>
				<li><strong class="source-inline">MonthDay</strong>: Represents a month and day, without a year or time; for example, --08-09. This could be useful for an annual event, such as <span class="No-Break">an anniversary.</span></li>
				<li><strong class="source-inline">ZoneOffset</strong>: Represents a time zone offset from GMT/UTC, such <span class="No-Break">as +2:00.</span></li>
			</ul>
			<p>As stated earlier, there are a large number of methods across the classes. However, as the prefixes are consistently applied, this is manageable. <em class="italic">Table 12.5</em> represents <span class="No-Break">these prefixes.</span></p>
			<table id="table005" class="T---Table _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<thead>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Method Prefix</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Description</strong></span></p>
							<p>Note: <strong class="source-inline">ld2</strong> and so forth used in these examples <span class="No-Break">are related.</span></p>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">of</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>A static factory method for creating instances – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">LocalDate ld1 = LocalDate.of(2023, </strong><span class="No-Break"><strong class="source-inline">3, 17);</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">parse</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>A static factory method for creating instances – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">LocalDate ld2 = </strong><span class="No-Break"><strong class="source-inline">LocalDate.parse("2023-03-17");</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">get</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Gets the value of something – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">int dayOfMonth = ld2.getDayOfMonth(); // </strong><span class="No-Break"><strong class="source-inline">17</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">is</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Checks if something is true – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">boolean isLeapYear = ld2.isLeapYear(); // </strong><span class="No-Break"><strong class="source-inline">false</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">with</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>The immutable equivalent of a setter method – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">LocalDate ld3 = ld2.withDayOfMonth(25); // </strong><span class="No-Break"><strong class="source-inline">2023-03-25</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">plus</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Adds an amount to an object – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">LocalDate ld4 = ld3.plusDays(2); // </strong><span class="No-Break"><strong class="source-inline">2023-03-27</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">minus</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Subtracts an amount from an object – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">LocalDate ld5 = ld4.minusMonths(2); // </strong><span class="No-Break"><strong class="source-inline">2023-01-27</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">at</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Combines this object with another – <span class="No-Break">for example,</span></p>
							<p><strong class="source-inline">LocalDateTime ldt1 = ld5.atTime(13, 45, 10); // </strong><span class="No-Break"><strong class="source-inline">2023-01-27T13:45:10</strong></span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 12.5 – Date API method prefixes</p>
			<p>Now that we have had a look at the <a id="_idIndexMarker936"/>prefixes in the API, let’s look at some sample code to reinforce them. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.21</em> shows some code for manipulating dates <span class="No-Break">and times:</span></p>
			<div>
				<div id="_idContainer193" class="IMG---Figure">
					<img src="image/B19793_12_21.jpg" alt="Figure 12.21 – Code for manipulating dates and times"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.21 – Code for manipulating dates and times</p>
			<p>In this figure, line 13 creates <strong class="source-inline">LocalDate</strong> using the factory <strong class="source-inline">now()</strong> method. This creates a <strong class="source-inline">LocalDate</strong> object based on the system clock setting for the default locale. Also, using the <strong class="source-inline">now()</strong> method, lines 14-15 create <strong class="source-inline">LocalTime</strong> and <strong class="source-inline">LocalDateTime</strong> objects, respectively. Line 16 shows another way to create <strong class="source-inline">LocalDateTime</strong> objects by using the <strong class="source-inline">of()</strong> factory method to pass in both <strong class="source-inline">LocalDate</strong> and <strong class="source-inline">LocalTime</strong> objects. Line 17 shows the output of the <strong class="source-inline">LocalDateTime</strong> object to be <strong class="source-inline">yyyy-mm-ddThh:mm:ss:nnnnnnnnn</strong>. The date part comes first, then <strong class="source-inline">"T"</strong>, which separates the date from the time, where <strong class="source-inline">n</strong> in the time part <span class="No-Break">represent nanoseconds.</span></p>
			<p>Next, we want to create <strong class="source-inline">LocalDate</strong> values representing St. Patrick’s Day (March 17), 2025. Line 20 uses the <strong class="source-inline">of()</strong> factory method and passes in numeric values for the year, month, and day. Note that the months start at 1 and not 0. Thus, March is represented <span class="No-Break">as 3.</span></p>
			<p>Line 21 uses an alternative factory method, namely <strong class="source-inline">parse(String)</strong>, which accepts a <strong class="source-inline">String</strong> and creates a <strong class="source-inline">LocalDate</strong> accordingly. If the string cannot be parsed, an exception <span class="No-Break">will occur.</span></p>
			<p>Line 22 outputs what day of the week, March 17, 2025, occurs (which is a Monday). Line 23 “modifies” the <a id="_idIndexMarker937"/>months, changing it from 3 to 5 (March to May). As the Date API types are immutable, the change is made to a new object in the background (<strong class="source-inline">ld2</strong> is untouched). The <strong class="source-inline">ld3</strong> reference refers to this new <span class="No-Break">object (</span><span class="No-Break"><strong class="source-inline">2025-05-17</strong></span><span class="No-Break">).</span></p>
			<p>Line 25 adds a year, so we now have 2026-05-17. Line 27 subtracts 5 days, so we now have 2026-05-12. Lastly, on line 29, we “change” our <strong class="source-inline">LocalDate</strong> to <strong class="source-inline">LocalDateTime</strong>. As we already have a date, we just provided the time elements. The nanoseconds, which are not provided, are set to 0 and are not displayed as <span class="No-Break">a result.</span></p>
			<p>Now, let’s look at a <strong class="source-inline">ZonedDateTime</strong> example in <span class="No-Break"><em class="italic">Figure 12</em></span><span class="No-Break"><em class="italic">.22</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer194" class="IMG---Figure">
					<img src="image/B19793_12_22.jpg" alt="Figure 12.22 – ZonedDateTime example"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.22 – ZonedDateTime example</p>
			<p>In this figure, a flight leaves Dublin for Paris at 1 PM local time. The flight duration is 1 hour 45 minutes. We are trying to calculate the local time in Paris when the flight lands. The solution presented here is <span class="No-Break">one option.</span></p>
			<p>Lines 34-38 create a <strong class="source-inline">LocalDateTime</strong> object for the departure date and time (November 24<span class="superscript">th</span>, 2023, at 1 P.M.). Line 39 zones the date-time object using the <strong class="source-inline">atZone()</strong> method by passing in the relevant time zone (a <strong class="source-inline">ZoneId</strong>). To get the time zone <strong class="source-inline">ZoneId</strong> object, simply <a id="_idIndexMarker938"/>call the factory <strong class="source-inline">of()</strong> method while passing in the relevant time zone string. In this example, it is <strong class="source-inline">"Europe/Dublin"</strong>. Line 40 shows the format of the <strong class="source-inline">ZonedDateTime</strong> object. Note <strong class="source-inline">"Z"</strong> for Zulu time (UTC). At that time of year, as summertime has ended, Dublin is in line <span class="No-Break">with UTC.</span></p>
			<p>Lines 42-45 represent the calculation of the local arrival time in Paris. Line 43 calculates what time is it in Paris when the flight leaves Dublin using the <strong class="source-inline">withZoneSameInstant()</strong> method. Now, all we have to do is add on the flight time of 1 hour and <span class="No-Break">45 minutes.</span></p>
			<p>Line 47 shows the <strong class="source-inline">ZonedDateTime</strong> for the arrival time. The time and zoned offset elements are interesting. The local time allows for the fact that Paris is 1 hour ahead of Dublin. This time difference is reflected in the offset of <strong class="source-inline">+1:00</strong>. Thus, Paris is 1 hour ahead <span class="No-Break">of UTC.</span></p>
			<p>Now, let’s look at some code that uses <strong class="source-inline">Period</strong> and <strong class="source-inline">Duration</strong>. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.23</em> presents <span class="No-Break">an example:</span></p>
			<div>
				<div id="_idContainer195" class="IMG---Figure">
					<img src="image/B19793_12_23.jpg" alt="Figure 12.23 – An example using Period and Duration"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.23 – An example using Period and Duration</p>
			<p>In this figure, both <strong class="source-inline">Period</strong> and <strong class="source-inline">Duration</strong> are demonstrated. <strong class="source-inline">Period</strong> is suited for time blocks of greater than 1 day; for example, 2 years, 5 months, and 11 days. <strong class="source-inline">Duration</strong> is more suited to blocks of time of less than 1 day; for example, 8 hours and <span class="No-Break">20 seconds.</span></p>
			<p>Lines 57-63 calculate <a id="_idIndexMarker939"/>and output the number of years, months, and days the American Civil War lasted. Firstly, we create <strong class="source-inline">LocalDate</strong> objects for the start and end dates (lines 57-58). Line 59 creates a <strong class="source-inline">Period</strong> object using the static <strong class="source-inline">Period.between()</strong> method, passing in the relevant start and end dates. Line 60 outputs the period object, <strong class="source-inline">P3Y11M28D</strong>, which represents a <strong class="source-inline">Period</strong> of 3 years, 11 months, and 28 days (weeks are represented in days). Lines 61-63 output the years, months, and days <span class="No-Break">values separately.</span></p>
			<p>Next, we will look at <strong class="source-inline">Duration</strong>. In this case, we use two <strong class="source-inline">LocalTime</strong> objects; one representing 12:00:20 (line 66) and the other representing 14:45:40 (line 67). Line 68 calculates the time difference between both and line 69 outputs the result. Note that there is no Y, M, or D (years, months, or days) as there was on line 60 (<strong class="source-inline">Period</strong>). Now, on line 69, we have a <strong class="source-inline">Duration</strong> of <strong class="source-inline">PT2H45M20S</strong> representing 2 hours, 45 minutes, and <span class="No-Break">20 seconds.</span></p>
			<p>Lastly, let’s look at how to format dates <span class="No-Break">and times.</span></p>
			<h2 id="_idParaDest-312"><a id="_idTextAnchor312"/>Formatting dates and times</h2>
			<p>A formatter can work in both directions: formatting your temporal (time-related) object as a string or <a id="_idIndexMarker940"/>parsing a string into a temporal object. Both approaches<a id="_idIndexMarker941"/> work with formatters. This is represented by the following code from <span class="No-Break">the API:</span></p>
			<pre class="source-code">
LocalDate date = LocalDate.now();String text = date.format(formatter);
LocalDate parsedDate = LocalDate.parse(text, formatter);</pre>
			<p>We will focus on how to create formatters for the <strong class="source-inline">format()</strong> method. However, as formatters are common to both formatting and parsing, what we say for one applies to <span class="No-Break">the other.</span></p>
			<p>We have a lot of flexibility in how we specify the format for our dates and times. Firstly, there are pre-defined standard formats available for us. In addition, we can specify custom formats. When specifying custom formats, the letters A-Z and a-z are reserved and have specific semantics. Importantly, the number of format letters is important – for example, MMM formats the month to Aug, whereas MM <span class="No-Break">produces 08.</span></p>
			<p>There are two common approaches to formatting your dates and times. One is to use <strong class="source-inline">format(DateTimeFormatter)</strong> in the <strong class="source-inline">LocalDate</strong>, <strong class="source-inline">LocalTime</strong>, <strong class="source-inline">LocalDateTime</strong>, and <strong class="source-inline">ZonedDateTime</strong> temporal classes. Its signature accepts a parameter of the <strong class="source-inline">DateTimeFormatter</strong> type. The other approach is to use <strong class="source-inline">format(TemporalAccessor)</strong> in the <strong class="source-inline">DateTimeFormatter</strong> class itself. <strong class="source-inline">TemporalAccessor</strong> is an interface that’s implemented by the temporal classes <span class="No-Break">just mentioned.</span></p>
			<p>Before we look at some example code, we must cover the more popular pre-defined formatters and format patterns. There are quite a few and we encourage you to look up the API for <span class="No-Break">further details.</span></p>
			<h3>Pre-defined formatters</h3>
			<p>The easiest way to access <a id="_idIndexMarker942"/>these formatters is to <a id="_idIndexMarker943"/>use the constants in the <strong class="source-inline">DateTimeFormatter</strong> class or by calling the factory “of” methods in <strong class="source-inline">DateTimeFormatter</strong>. <em class="italic">Table 12.6</em> presents an overview of the more popular ones. Please see the <a id="_idIndexMarker944"/>API for further details. Note that <strong class="bold">ISO</strong> stands for <strong class="bold">International Organization </strong><span class="No-Break"><strong class="bold">for Standardization</strong></span><span class="No-Break">:</span></p>
			<table id="table006" class="T---Table _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="bold">Formatter</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="bold">Description</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="bold">Example</strong></span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ofLocalizedDate (dateStyle)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Formatter with the date style from <span class="No-Break">the locale</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>This depends on the style that’s passed in. An example is “Monday 10 <span class="No-Break">July 2023”.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ofLocalizedTime (timeStyle)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Formatter with the time style from <span class="No-Break">the locale</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>This depends on the style that’s passed in. An example <span class="No-Break">is “15:47”.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ofLocalizedDateTime (dateTimeStyle)</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Formatter with the date and time styles from <span class="No-Break">the locale</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>This depends on the style that’s passed in. An <span class="No-Break">example is</span></p>
							<p>“3 July <span class="No-Break">2018 09:19”.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ISO_DATE</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>ISO date (may <span class="No-Break">contain offset)</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>“<span class="No-Break">2023-07-10”, “2023-07-10+01:00”.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ISO_TIME</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>ISO time (may <span class="No-Break">contain offset)</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>“<span class="No-Break">15:47:13”, “15:47:13+01:00”.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ISO_LOCAL_DATE</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>ISO local date (<span class="No-Break">no offset)</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>“<span class="No-Break">2023-07-10”.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ISO_LOCAL_TIME</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>ISO local time (<span class="No-Break">no offset)</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>“<span class="No-Break">16:00:03”.</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break"><strong class="source-inline">ISO_ZONED_DATE_TIME</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Zoned <span class="No-Break">date time</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>“<span class="No-Break">2023-07-12T09:33:03+01:00 [Europe/Dublin]”.</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 12.6 – Date API pre-defined formatters</p>
			<p>Now, let’s <a id="_idIndexMarker945"/>examine some code that <a id="_idIndexMarker946"/>uses <span class="No-Break">pre-defined formatters.</span></p>
			<p><span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.24</em> presents code that uses these <span class="No-Break">pre-defined formatters:</span></p>
			<div>
				<div id="_idContainer196" class="IMG---Figure">
					<img src="image/B19793_12_24.jpg" alt="Figure 12.24 – Code example using pre-defined formatters"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.24 – Code example using pre-defined formatters</p>
			<p>In this figure, we represent the current date (line 74) and the current time (line 81) in various formats, based on the pre-defined formats available in <strong class="source-inline">DateTimeFormatter</strong>. First up is <strong class="source-inline">ISO_DATE</strong> (line 75). Its output (in comments on line 76) is <strong class="source-inline">2023-07-10</strong>, which is in <span class="No-Break">yyyy-mm-dd format.</span></p>
			<p>Line 78 uses the <strong class="source-inline">ofLocalizedDate()</strong> factory method to create a format. By passing in the <strong class="source-inline">FormatStyle.FULL</strong> enum constant, we are requesting as much detail as possible. As a result, this format outputs (line 79) <strong class="source-inline">Monday 10 July 2023</strong>. As can be seen, this is more detailed than the <span class="No-Break"><strong class="source-inline">ISO_DATE</strong></span><span class="No-Break"> format.</span></p>
			<p>Line 82 creates an <strong class="source-inline">ISO_TIME</strong> formatter and applies it (line 83) to the time object that’s already been created (line 81). Line 85 uses the <strong class="source-inline">ofLocalizedTime()</strong> factory method. The <strong class="source-inline">FormatStyle.SHORT</strong> enum returns the fewest details, <span class="No-Break">typically numeric.</span></p>
			<p>That covers the pre-defined formatters. Now, let’s discuss how to specify <span class="No-Break">custom formatters.</span></p>
			<h3>Custom formatters</h3>
			<p>Custom formatters are defined using pattern letters, where the number of letters used is significant. Let’s <a id="_idIndexMarker947"/>discuss the most commonly used pattern letters first and then <a id="_idIndexMarker948"/>present some code that utilizes them. <em class="italic">Table 12.7</em> presents a summary of the <span class="No-Break">pattern letters:</span></p>
			<table id="table007" class="T---Table _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<thead>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Letter</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Description</strong></span></p>
						</td>
						<td class="T---Table T---Body T---Header">
							<p><span class="No-Break"><strong class="bold">Examples</strong></span></p>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>y</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">Year</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">2023; 23</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>M</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">Month</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>8; 08; <span class="No-Break">Aug; August</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>d</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Day of <span class="No-Break">the month</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">16</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>E</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Day of <span class="No-Break">the week</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">Wed; Wednesday</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>D</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Day of <span class="No-Break">the year</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">145</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>h</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Hour of the day; 12-hour <span class="No-Break">clock (1-12)</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">10</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>H</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Hour of the day; 24-hour <span class="No-Break">clock (0-23)</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">19</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>m</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Minute of <span class="No-Break">the hour</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">32</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>s</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>Second of <span class="No-Break">the minute</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">55</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>a</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p>A.M. <span class="No-Break">or P.M.</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">PM</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>z</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">Timezone</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">GMT</span></p>
						</td>
					</tr>
					<tr class="T---Table">
						<td class="T---Table T---Body T---Body">
							<p>G</p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">Era</span></p>
						</td>
						<td class="T---Table T---Body T---Body">
							<p><span class="No-Break">AD</span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 12.7 – Date API pattern letters overview</p>
			<p>This table is best <a id="_idIndexMarker949"/>explained with the aid of an example. <span class="No-Break"><em class="italic">Figure 12</em></span><em class="italic">.25</em> presents <a id="_idIndexMarker950"/>an example that uses the pattern letters from <span class="No-Break"><em class="italic">Table 12.7</em></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer197" class="IMG---Figure">
					<img src="image/B19793_12_25.jpg" alt="Figure 12.25 – Code example using pattern letters"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.25 – Code example using pattern letters</p>
			<p>In this figure, line 91 gets the current date and time for this timezone, which is <strong class="bold">Irish Standard </strong><span class="No-Break"><strong class="bold">Time</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">IST</strong></span><span class="No-Break">).</span></p>
			<p class="callout-heading">Irish Standard Time (IST)</p>
			<p class="callout">This is the timezone that’s used in Ireland. In Ireland, we utilize daylight savings time (“summertime”). This means <a id="_idIndexMarker951"/>that during the summer months, we advance the clocks forward 1 hour so that darkness falls at a later clock time. Therefore, in March, we put the clocks forward 1 hour, and in October, we put the clocks back <span class="No-Break">1 hour.</span></p>
			<p class="callout">There is no “summertime” in UTC. Because of this and the fact that it is July right now, IST is +1:00 hours ahead <span class="No-Break">of UTC.</span></p>
			<p>The output for line 92 is in a comment to the right. The date and time are separated, as usual, by “T.” The zone offset is “+1:00,” indicating that this zoned time is 1 hour ahead of UTC. The zone ID <span class="No-Break">is “[Europe/Dublin].”</span></p>
			<p>We will first look at a date-related formatter. Line 93 creates a formatter using the <strong class="source-inline">yy-MMM-dd E D</strong> pattern. The output it generates is <strong class="source-inline">23-Jul-11 Tue 192</strong> (line 94). Thus, the current year of 2023 is output as <strong class="source-inline">23</strong> because we only provided <strong class="source-inline">yy</strong> in the format (as opposed to <strong class="source-inline">yyyy</strong>). Note that, had it been <strong class="source-inline">yyyy</strong> in the format, <strong class="source-inline">2023</strong> would have been output. This is why the number of pattern letters is important. The capital <strong class="source-inline">M</strong> is for the month. <strong class="source-inline">M</strong> produces <strong class="source-inline">7</strong>, <strong class="source-inline">MM</strong> produces <strong class="source-inline">07</strong>, <strong class="source-inline">MMM</strong> (as in the pattern) produces <strong class="source-inline">Jul</strong>, and <strong class="source-inline">MMMM</strong> produces <strong class="source-inline">July</strong>. Again, this demonstrates that the number of pattern letters <span class="No-Break">is important.</span></p>
			<p>The <strong class="source-inline">dd</strong> pattern outputs the day of the month. This gives us <strong class="source-inline">11</strong> for the <strong class="source-inline">11th</strong>. <strong class="source-inline">E</strong> gives us the day of the week, which is <strong class="source-inline">Tue</strong>. Note that <strong class="source-inline">EEEE</strong> returns <strong class="source-inline">Tuesday</strong>. <strong class="source-inline">D</strong> represents the day of the year; the 192<span class="superscript">nd</span> in <span class="No-Break">this example.</span></p>
			<p>Note that the dashes and spaces are simply inserted into the output. This is because, unlike letters, they <a id="_idIndexMarker952"/>are not reserved. We will learn how to insert words (containing letters) into the output without causing <span class="No-Break">exceptions shortly.</span></p>
			<p>Now, let’s examine <a id="_idIndexMarker953"/>a time-related formatter. Line 96 creates a formatter using the <strong class="source-inline">hh:mm:ss a z G</strong> pattern, which generates the output (line 97) of <strong class="source-inline">09:05:50 a.m. IST AD</strong>. The <strong class="source-inline">hh:mm:ss</strong> pattern returns the current time in hours (12-hour clock), minutes, and seconds format. <strong class="source-inline">a</strong> returns whether it is A.M. or P.M. Right now, it is the morning, so <strong class="source-inline">am</strong> is returned. The <strong class="source-inline">z</strong> pattern letter returns the abbreviated zone name, <strong class="source-inline">IST</strong>. Expanding this to <strong class="source-inline">zzzz</strong> returns <strong class="source-inline">Irish Standard Time</strong>. Lastly, <strong class="source-inline">G</strong> returns the era, <strong class="source-inline">AD</strong> (<span class="No-Break">Anno Domini).</span></p>
			<p>Now, let’s learn how to insert text into our formatter. As we know, the letters a-z and A-Z are reserved. So, how do we insert letters as regular letters and not pattern letters? To do this, we must surround the regular letters with single quotes. Line 101 specifies a pattern that uses both regular letters and pattern letters. The pattern is “’Year: ‘<em class="italic">yyyy</em>’. Month: ‘<em class="italic">MMMM</em>’. Day: ‘<em class="italic">dd</em>’.’”. The pattern letters are in italics. Any other characters are enclosed in <span class="No-Break">single quotes.</span></p>
			<p><strong class="source-inline">Year: 2023. Month: July. Day: 11.</strong> is generated <span class="No-Break">as output.</span></p>
			<p>As we can see, the year value, <strong class="source-inline">2023</strong>, is preceded by the text <strong class="source-inline">"Year: "</strong>. This was achieved by surrounding the text with single quotes:  <strong class="source-inline">'Year: '</strong>. Following the year pattern <strong class="source-inline">yyyy</strong>, the regular text <strong class="source-inline">'. Month: '</strong> is inserted. Thus, the capital <strong class="source-inline">M</strong> is treated as simply a capital M, instead of a month pattern letter. After that, <strong class="source-inline">'. Day: '</strong> is inserted to precede the day of the month, which is <strong class="source-inline">11</strong>. Lastly, a period is inserted at the end by enclosing it in single quotes also. Note that the period without single quotes is also fine as it is not a <span class="No-Break">reserved character.</span></p>
			<p>Lastly, let’s look at an example of parsing where we can create temporal objects from <strong class="source-inline">String</strong> values. Line 105 <a id="_idIndexMarker954"/>declares a string of <strong class="source-inline">"2023-07-10 22:10"</strong>. Line 106 then declares a pattern that will <a id="_idIndexMarker955"/>be able to parse this string. The pattern is <strong class="source-inline">"yyyy-MM-dd HH:mm"</strong>. Note that <strong class="source-inline">"HH"</strong> represents the 24-hour clock. This will enable us to parse the time of <strong class="source-inline">"22"</strong> in <span class="No-Break">the string.</span></p>
			<p>Line 107 creates a <strong class="source-inline">LocalDateTime</strong> object by parsing the string according to the pattern provided. Line 108 outputs the <strong class="source-inline">LocalDateTime</strong> object, producing <strong class="source-inline">"2023-07-10T22:10"</strong>, which is what the <span class="No-Break">string represents.</span></p>
			<p>That completes our discussion on custom formatters and concludes <a href="B19793_12.xhtml#_idTextAnchor293"><span class="No-Break"><em class="italic">Chapter 12</em></span></a>. Now, let’s put that knowledge into practice to reinforce the concepts <span class="No-Break">we’ve covered.</span></p>
			<h1 id="_idParaDest-313"><a id="_idTextAnchor313"/>Exercises</h1>
			<p>We’ve learned so many fun new things in this chapter. It’s time to enlighten the users of the Mesozoic Eden software with some new features that have been built with our <span class="No-Break">new skills:</span></p>
			<ol>
				<li>Manage the birthdays of the dinosaurs in our park. Add the <strong class="source-inline">birthday</strong> property to the <span class="No-Break"><strong class="source-inline">Dinosaur</strong></span><span class="No-Break"> class.</span></li>
				<li>The park operates on a strict schedule. Create a simple system to log events such as feeding times, cleaning, and emergency drills in the park using the <span class="No-Break">Date API.</span></li>
				<li>In Mesozoic Eden, we have a very strong safety-first policy. Regular inspections help us maintain our high standards of safety. Create a program that calculates how many days are left until the park’s next safety inspection, based on the date of the last safety inspection. Safety inspections need to happen every <span class="No-Break">45 days.</span></li>
				<li>We have a newborn Theropod. The guests were asked to submit names for our youngest inhabitant of Mesozoic Eden. 10 names were picked. Create a list for these <span class="No-Break">10 names.</span></li>
				<li>We want to create a string with the newborn’s full name. Use <strong class="source-inline">StringBuilder</strong> to append every name to its new name, and then convert it into a string when you’re done. (Hint: Use a loop combined <span class="No-Break">with </span><span class="No-Break"><strong class="source-inline">StringBuilder</strong></span><span class="No-Break">.)</span></li>
			</ol>
			<h1 id="_idParaDest-314"><a id="_idTextAnchor314"/>Project – dinosaur care system</h1>
			<p>We’ll continue to <a id="_idIndexMarker956"/>work on our “dinosaur care system” by adding functionality to log daily care activities for dinosaurs using the Java Core API. This includes features to accept user input, maintain a history of activities, and store dinosaur health data over time. Don’t worry – we’ll break this down for you step <span class="No-Break">by step.</span></p>
			<p><strong class="bold">Step 1: Add additional </strong><span class="No-Break"><strong class="bold">Java classes</strong></span><span class="No-Break">:</span></p>
			<ul>
				<li>Create a new package <span class="No-Break">named </span><span class="No-Break"><strong class="source-inline">coreapi</strong></span><span class="No-Break">.</span></li>
				<li>Inside this package, create a class named <strong class="source-inline">Dinosaur</strong>. This class should have properties such as name, species, health status, and <span class="No-Break">so on.</span></li>
				<li>Also, create a class named <strong class="source-inline">Activity</strong> with properties such as name, date, dinosaur, and <span class="No-Break">so on.</span></li>
			</ul>
			<p><strong class="bold">Step 2: Extend the dinosaur </strong><span class="No-Break"><strong class="bold">care system</strong></span><span class="No-Break">:</span></p>
			<ul>
				<li>In your <strong class="source-inline">DinosaurCareSystem</strong> class, create a <strong class="source-inline">List</strong> to hold <strong class="source-inline">Dinosaur</strong> objects, and another <strong class="source-inline">List</strong> to hold <span class="No-Break"><strong class="source-inline">Activity</strong></span><span class="No-Break"> objects.</span></li>
				<li>Create a method called <strong class="source-inline">addDinosaur()</strong> that takes user input to create a new <strong class="source-inline">Dinosaur</strong> object and add it to the list <span class="No-Break">of dinosaurs.</span></li>
				<li>Create a method called <strong class="source-inline">logActivity()</strong> that also takes user input to create a new <strong class="source-inline">Activity</strong> object (including selecting a dinosaur from the list) and add it to the list <span class="No-Break">of activities.</span></li>
			</ul>
			<p>Here is some sample code to get you started with <span class="No-Break">this step:</span></p>
			<pre class="source-code">
import java.util.*;public class DinosaurCareSystem {
    private List&lt;Dinosaur&gt; dinosaurs;
    private List&lt;Activity&gt; activities;
    public DinosaurCareSystem() {
        dinosaurs = new ArrayList&lt;&gt;();
        activities = new ArrayList&lt;&gt;();
    }
    public void addDinosaur(Dinosaur dinosaur) {
        dinosaurs.add(dinosaur);
    }
    public void logActivity(Activity activity) {
        activities.add(activity);
    }
    //... existing methods for handling exceptions here
}</pre>
			<p><strong class="bold">Step 3: Interact with </strong><span class="No-Break"><strong class="bold">the system</strong></span><span class="No-Break">:</span></p>
			<ul>
				<li>In your main class, create a <strong class="source-inline">DinosaurCareSystem</strong> object and use a loop to continuously ask the user what they want to do (add a dinosaur, log activity, and so on). Use a <strong class="source-inline">Scanner</strong> object to get input from <span class="No-Break">the user.</span></li>
			</ul>
			<p> Here’s some<a id="_idIndexMarker957"/> code to get <span class="No-Break">you started:</span></p>
			<pre class="source-code">
import java.util.Scanner;public class Main {
    public static void main(String[] args) {
        DinosaurCareSystem system = new
          DinosaurCareSystem();
        Scanner scanner = new Scanner(System.in);
        while (true) {
            System.out.println("What would you like to
              do?");
            System.out.println("1. Add a dinosaur");
            System.out.println("2. Log an activity");
            System.out.println("3. Exit");
            int choice = scanner.nextInt();
            scanner.nextLine();  // consume newline
            if (choice == 1) {
                // add dinosaur
            } else if (choice == 2) {
                // log activity
            } else if (choice == 3) {
                break;
            }
        }
    }
}</pre>
			<p> As always, feel <a id="_idIndexMarker958"/>free to expand on this and let your creativity <span class="No-Break">run free!</span></p>
			<h1 id="_idParaDest-315"><a id="_idTextAnchor315"/>Summary</h1>
			<p>In this chapter, we looked at popular classes from the Java Core API. We started with <strong class="source-inline">Scanner</strong>, a useful class for reading input. <strong class="source-inline">Scanner</strong> can be directed to read from a file, a <strong class="source-inline">String</strong> object, or the keyboard. Reading from the keyboard is particularly useful for dealing with <span class="No-Break">user input.</span></p>
			<p>We examined the <strong class="source-inline">String</strong> class and its API. We saw how <strong class="source-inline">String</strong> literals use the string constant pool to save on memory. We examined an important property of <strong class="source-inline">String</strong> objects, namely immutability. A <strong class="source-inline">String</strong> object, once created, cannot <span class="No-Break">be changed.</span></p>
			<p>Next, we examined <strong class="source-inline">StringBuilder</strong> and its API. We discussed that <strong class="source-inline">StringBuilder</strong> is a mutable type and thus, there is only ever one object <span class="No-Break">in memory.</span></p>
			<p>Given that <strong class="source-inline">String</strong> is immutable but <strong class="source-inline">StringBuilder</strong> is mutable, we presented a detailed example with both code and supporting diagrams to compare and contrast  <strong class="source-inline">String</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">StringBuilder</strong></span><span class="No-Break">.</span></p>
			<p>This led to a discussion on how to create our own custom immutable types. We examined a checklist of steps you must perform to ensure that your class is immutable. We then showed an example where, very subtly, Java’s call by value principle broke encapsulation (and hence immutability). We discussed how to fix such an issue using defensive copying. Effectively, for our <strong class="source-inline">private</strong> instance mutable types, we had to ensure that the references passed in to initialize them were not stored directly; we must copy them first. In addition, we had to ensure that we did not return the references to our <strong class="source-inline">private</strong> instance mutable types either; we must copy them <span class="No-Break">first also.</span></p>
			<p>From there we examined the <strong class="source-inline">List</strong> and <strong class="source-inline">ArrayList</strong> APIs. <strong class="source-inline">List</strong> is an interface and <strong class="source-inline">ArrayList</strong> is an implementation of <strong class="source-inline">List</strong>. <strong class="source-inline">ArrayList</strong> is essentially an expandable array. It maintains the order of insertion and <span class="No-Break">allows duplicates.</span></p>
			<p>Then, we examined the Date API, which was overhauled in Java 8. We discussed <strong class="source-inline">Instant</strong>, <strong class="source-inline">LocalDate</strong>, <strong class="source-inline">LocalTime</strong>, <strong class="source-inline">LocalDateTime</strong>, <strong class="source-inline">ZonedDateTime</strong>, <strong class="source-inline">Period</strong>, and <strong class="source-inline">Duration</strong>. All of these types are immutable, meaning we can use factory methods (such as <strong class="source-inline">now()</strong> and <strong class="source-inline">of()</strong>) to create instances. In a large API, the consistency of method prefix names <span class="No-Break">is helpful.</span></p>
			<p>Finally, we discussed how we can format a temporal object for output and also how we can parse a string into a temporal object. We examined the pre-defined formatters available and in addition, we designed custom formatters using reserved <span class="No-Break">pattern letters.</span></p>
			<p>That completes our discussion on the Java Core API. We will move on to generics and collections in the <span class="No-Break">next chapter.</span></p>
		</div>
	

		<div id="_idContainer199" class="Content">
			<h1 id="_idParaDest-316" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor316"/>Part 3: Advanced Topics</h1>
			<p>In this part, we will take a look at some of the more advanced topics in Java. We will start with the Java Collection framework. This will include several of its popular interfaces and their common implementations. We will discuss sorting in Java and how to work with generics. We then move on to lambda expressions and their relationship to functional interfaces. We will look at popular functional interfaces from the API and also method references. We will then discuss streams over two chapters, both the fundamentals and advanced topics. The fundamentals will cover topics such as the stream pipeline, stream laziness, and terminal operations. The advanced chapter will discuss intermediate operations, primitive streams, <strong class="source-inline">Optional</strong>s, and parallel streams. Lastly, we will discuss concurrency, where we will explain multi-threading, data races, <strong class="source-inline">ExecutorService,</strong> and <span class="No-Break">concurrent collections.</span></p>
			<p>This section has the <span class="No-Break">following chapters:</span></p>
			<ul>
				<li><a href="B19793_13.xhtml#_idTextAnchor317"><em class="italic">Chapter 13</em></a>, <em class="italic">Generics and Collections</em></li>
				<li><a href="B19793_14.xhtml#_idTextAnchor355"><em class="italic">Chapter 14</em></a>, <em class="italic">Lambda Expressions</em></li>
				<li><a href="B19793_15.xhtml#_idTextAnchor377"><em class="italic">Chapter 15</em></a>, <em class="italic">Streams: Fundamentals</em></li>
				<li><a href="B19793_16.xhtml#_idTextAnchor401"><em class="italic">Chapter 16</em></a>, <em class="italic">Streams: Advanced Concepts</em></li>
				<li><a href="B19793_17.xhtml#_idTextAnchor430"><em class="italic">Chapter 17</em></a>, <em class="italic">Concurrency</em></li>
			</ul>
		</div>
		<div>
			<div id="_idContainer200">
			</div>
		</div>
	</body></html>