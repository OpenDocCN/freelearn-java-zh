<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;2.&#xA0;Learning the Bukkit API" id="J2B81-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02" class="calibre1"/>Chapter 2. Learning the Bukkit API</h1></div></div></div><p class="calibre8">In this chapter, you <a id="id49" class="calibre1"/>will be introduced to the <span class="strong"><strong class="calibre2">Bukkit</strong></span> <span class="strong"><strong class="calibre2">API</strong></span> and learn what it allows you to accomplish through programming plugins for a Spigot server. By the end of the chapter, you will most likely have numerous ideas for plugins that you will eventually be able to create yourself. This chapter will cover the following topics in detail:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Understanding the purpose of an API</li><li class="listitem">Finding the documentation of the Bukkit API</li><li class="listitem">Navigating through Javadocs to find specific information</li><li class="listitem">Reading and understanding the documentation</li><li class="listitem">Exploring and learning the features of the Bukkit API</li></ul></div></div>

<div class="book" title="Chapter&#xA0;2.&#xA0;Learning the Bukkit API" id="J2B81-b66e70deee6e4ed481db4b113e303f23">
<div class="book" title="Introduction to APIs"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch02lvl1sec14" class="calibre1"/>Introduction to APIs</h1></div></div></div><p class="calibre8">
<span class="strong"><strong class="calibre2">API</strong></span> stands for <span class="strong"><strong class="calibre2">Application Programming Interface</strong></span>. An API helps control how various software components are used. As <a id="id50" class="calibre1"/>mentioned in the previous chapter, Spigot includes the Minecraft code in a form that is easy for developers to utilize when creating plugins. Spigot has a lot of code that we need not access in order to create plugins. It also includes code that we should not tamper with, as it may cause the server to become unstable. Bukkit provides us with the interfaces that we can use to properly modify the game while restricting access <a id="id51" class="calibre1"/>to other portions of the code. An <span class="strong"><strong class="calibre2">interface</strong></span> is essentially a shell of a class. It includes methods, but the methods are empty. The Spigot server contains classes for each interface. The classes implement the interfaces and fill each method with the appropriate code.</p><p class="calibre8">To explain this better, let's imagine the Bukkit API as a menu to a pizza shop. The menu contains different types of pizza, such as pepperoni, Hawaiian, and meat lovers. These menu items represent the interfaces within the API, with each interface having a method named <code class="email">makePizza</code>. At this point, these pizzas cannot be eaten, because they are merely a concept. They are just items on a menu. But let's say that a pizza shop named <span class="strong"><em class="calibre9">All You Need is Pizza</em></span> decides to open up and they use this menu, or API. This pizza shop can represent CraftBukkit. The pizza shop creates recipes for each item on the menu. This is equivalent to writing code for each <code class="email">makePizza</code> method within the three interfaces. Thus, these<a id="id52" class="calibre1"/> recipes are the classes that implement the interfaces. However, these classes are still just a concept. It is not until the <code class="email">makePizza</code> method is called that you have an instance of that class. This instance, or object, will be the tangible pizza that you can actually eat. Now, imagine that there is another pizza shop named <span class="strong"><em class="calibre9">Crazy Little Thing Called Pizza</em></span>, which opens across the street from <span class="strong"><em class="calibre9">All You Need is Pizza</em></span>. This new pizza shop will represent Spigot. Crazy Little Thing Called Pizza uses the exact same menu, or API, as All You Need is Pizza. However, its recipes, or implementations of the methods, may be different.</p><p class="calibre8">Using this same analogy, we can see the benefit of the API. As a customer, I can take a look at the menu and assemble an order. For example, I want to order a pepperoni pizza and a meat lovers pizza. Since I created my order based on the menu and both pizza shops implemented the same menu, either restaurant is able to fulfill my order. Likewise, a developer creates a plugin based on the Bukkit API. Both <span class="strong"><strong class="calibre2">CraftBukkit</strong></span> and <span class="strong"><strong class="calibre2">Spigot</strong></span> utilize the <span class="strong"><strong class="calibre2">Bukkit API</strong></span>. Therefore, they will both support the plugin. The following diagram explains this relation between pizza and code:</p><div class="mediaobject"><img src="../images/00011.jpeg" alt="Introduction to APIs" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Basically, Bukkit<a id="id53" class="calibre1"/> acts as a bridge between a plugin and the Spigot server. The Spigot team adds new classes, methods, and so on to the API as new features develop in Minecraft, but the preexisting code rarely changes. This ensures that Bukkit plugins will still function correctly months, or even years, from now even though new versions of Minecraft/Spigot are released. For example, if Minecraft were to change how an entity's health is handled, we would not see any difference.</p><p class="calibre8">The Spigot jar<a id="id54" class="calibre1"/> will account for this change by filling the <code class="email">getHeath</code> method with the updated code. Then, when the plugin calls the <code class="email">getHealth</code> method, it will function exactly as it had before the update. The addition of new Minecraft features, such as new items, is another example of how great the Bukkit API is. Let's say that we've created a plugin that gives food an expiration date. To check whether an item is food, we'll use the <code class="email">isEdible</code> method. Minecraft continues to create new items. If one of these new<a id="id55" class="calibre1"/> items is <span class="strong"><strong class="calibre2">Pumpkin Bread</strong></span>, Spigot will flag that type of item as edible and will therefore be given an expiration date by our plugin. A year from now, new food items will still be given expiration dates without us needing to change any of our code.</p></div></div>
<div class="book" title="The Bukkit API documentation" id="K0RQ1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec15" class="calibre1"/>The Bukkit API documentation</h1></div></div></div><p class="calibre8">Documentation<a id="id56" class="calibre1"/> of the Bukkit API can be found <a id="id57" class="calibre1"/>at <a class="calibre1" href="http://hub.spigotmc.org/javadocs/bukkit/">hub.spigotmc.org/javadocs/bukkit/</a>. The Bukkit.jar file that you built in <a class="calibre1" title="Chapter 1. Deploying a Spigot Server" href="part0014_split_000.html#DB7S1-b66e70deee6e4ed481db4b113e303f23">Chapter 1</a>, <span class="strong"><em class="calibre9">Deploying a Spigot Server</em></span> also contains the Spigot API, which can be found at <a class="calibre1" href="http://hub.spigotmc.org/javadocs/spigot/">hub.spigotmc.org/javadocs/spigot/</a>. The Spigot API is a <span class="strong"><strong class="calibre2">superset</strong></span> of the Bukkit API, which <a id="id58" class="calibre1"/>means<a id="id59" class="calibre1"/> that it contains all the classes, interfaces, and so on that are present in the Bukkit API, as well as some additional classes that are unique to the Spigot project. If you want your plugin to support Spigot and CraftBukkit servers, then you will want to develop by using the Bukkit API. If you choose to only support Spigot servers, then you can develop using the Spigot API. In this book, we will refer to the Bukkit API. However, using the Spigot API will yield the same results.</p></div>
<div class="book" title="Navigating through the Bukkit API documentation" id="KVCC1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec16" class="calibre1"/>Navigating through the Bukkit API documentation</h1></div></div></div><p class="calibre8">We can <a id="id60" class="calibre1"/>go through the Bukkit API documentation to get a general idea of what we can modify on a Spigot server. Server-side plugins are different from client-side mods in that we are limited with what we are able to modify in the game using server-side plugins. For example, we cannot create a new type of block, but we can make lava blocks rain from the sky. We cannot make zombies look and sound like dinosaurs, but we can put a zombie on a leash, change its name to Fido, and have it not burn in the daylight. For the most part, you cannot change the visual aspect of the game, but you can change how it functions. This ensures that everyone who connects to the server with a standard Minecraft client will have the same experience.</p><p class="calibre8">For some more examples on what we can do, let's have a look at the various pages of the API's documentation:</p><div class="mediaobject"><img src="../images/00012.jpeg" alt="Navigating through the Bukkit API documentation" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">You will <a id="id61" class="calibre1"/>see that the classes and interfaces <a id="id62" class="calibre1"/>within the API are selectable in the lower left section of the <span class="strong"><strong class="calibre2">Javadoc</strong></span>. Selecting a package in the upper left narrows the choices in the section below it. Each type, such as a class or interface, is organized into a package. These packages help group similar classes together. For example, <code class="email">Cow</code>, <code class="email">Player</code>, and <code class="email">Zombie</code> are all types of entities and thus can be found in the <code class="email">org.bukkit.entity</code> package. So, if I were to say that the <code class="email">World</code> interface can be found at <code class="email">org.bukkit.World</code>, then you will know that you can find <code class="email">World</code> within the <code class="email">org.bukkit</code> package. Knowing this will help you find the classes or interfaces that you are looking for. You can always use <span class="strong"><em class="calibre9">Ctrl + F</em></span> to search for a specific word on the webpage. This can help in finding a specific class in a long list.</p><p class="calibre8">Let's look at the <code class="email">World</code> class and see what it has to offer. The classes are listed in alphabetical order. So, we will find <span class="strong"><strong class="calibre2">World</strong></span> near the end of the list within the <code class="email">org.bukkit</code> package. When you click on the <code class="email">World</code> class link, all of its methods will be displayed in the main column of the site under the <span class="strong"><strong class="calibre2">Method Summary</strong></span> header, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00013.jpeg" alt="Navigating through the Bukkit API documentation" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">A <code class="email">World</code> object is<a id="id63" class="calibre1"/> an entire world on your server. By default, a Minecraft server has multiple worlds, including the main world, nether world, and end world. Spigot even allows you to add additional worlds. The methods that are listed in the <code class="email">World</code> class can be applied to the specific world object. For example, the <code class="email">Bukkit.getWorlds</code> method will give you a list of all the worlds that are on the server; each one is unique. Therefore, if you call the <code class="email">getName</code> method on the first world, it may return <code class="email">world</code> while, calling the same method on the second world may return <code class="email">world_nether</code>.</p></div>
<div class="book" title="Understanding the Java documentation" id="LTSU1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec17" class="calibre1"/>Understanding the Java documentation</h1></div></div></div><p class="calibre8">Let's look <a id="id64" class="calibre1"/>at a method that is included in the <code class="email">World</code> class to see what information it provides us. Click on the link to view the <code class="email">createExplosion(Location loc, float power, boolean setFire)</code> method. You will be brought to a method description that is similar to the one shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00014.jpeg" alt="Understanding the Java documentation" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">The <a id="id65" class="calibre1"/>screenshot explains each parameter and the return value for the method. This method requires that we pass three parameters to it, which is explained as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Where the explosion should take place</li><li class="listitem">How powerful the explosion should be</li><li class="listitem">Whether the explosion should cause the surrounding blocks to ignite in flames</li></ul></div><p class="calibre8">If the returned value is <code class="email">void</code>, then the method will not send any information back to us. In this example, the method returns a <code class="email">boolean</code> value. On reading the documentation, you will learn that the returned value is whether or not the explosion actually occurred. If another plugin prevented the explosion from happening, then the <code class="email">createExplosion</code> method will return <code class="email">false</code>.</p></div>
<div class="book" title="Exploring the Bukkit API" id="MSDG1-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec18" class="calibre1"/>Exploring the Bukkit API</h1></div></div></div><p class="calibre8">Now that <a id="id66" class="calibre1"/>you are familiar with the Bukkit API documentation, I advise you to look through it on your own. You will find interesting methods; many of these methods will spark ideas for cool plugins that you may want to make. Note that there may be additional links to view more methods for an object. For example, a <code class="email">Player</code> is a type of <span class="strong"><strong class="calibre2">LivingEntity</strong></span>. Therefore, you can call a <span class="strong"><strong class="calibre2">LivingEntity</strong></span> method on a <code class="email">Player</code> object. This inheritance is shown after the method summary, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00015.jpeg" alt="Exploring the Bukkit API" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">If you<a id="id67" class="calibre1"/> are ever going to try and think up an idea for a plugin, browsing through the API documentation will surely give you some ideas. I suggest reading the class pages, listed as follows, as they will be the classes that you will frequently<a id="id68" class="calibre1"/> use in your future plugins:</p><div class="informalexample"><table border="1" class="calibre15"><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre19"><th valign="bottom" class="calibre20">
<p class="calibre21">Class</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Package</p>
</th><th valign="bottom" class="calibre20">
<p class="calibre21">Description</p>
</th></tr></thead><tbody class="calibre22"><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">World</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">A world on the server</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Player</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit.entity</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">A person who is playing on the server</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Entity</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit.entity</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">A player, mob, item, projectile, vehicle, and so on</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Block</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit.block</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">A specific block in the world, such as a dirt block or a chest</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Inventory</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit.inventory</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">The inventory of a player, chest, furnace, and so on</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">ItemStack</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit.inventory</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">An item that is in an inventory, which includes how many items are present</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Location</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">The location of an entity or a block</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Material</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">The type of a block or item, such as <code class="literal">DIRT</code>, <code class="literal">STONE</code>, or <code class="literal">DIAMOND_SWORD</code>
</p>
</td></tr><tr class="calibre19"><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">Bukkit</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">
<code class="literal">org.bukkit</code>
</p>
</td><td valign="top" class="calibre23">
<p class="calibre21">Contains many useful methods that can be called from anywhere in your code</p>
</td></tr></tbody></table></div><p class="calibre8">Now that <a id="id69" class="calibre1"/>you understand how to read the Bukkit Java documentation, you can find answers to the various questions that you may have. For example, what if you want to find out which methods you would call to get the Block that is at <code class="email">x:20 y:64 z:14</code> in the world that is named "world"?</p><p class="calibre8">First, you will need to retrieve the correct <code class="email">World</code> object. The initial place that you may check is the Bukkit class, as listed in the previous table. You may check there because you can call these methods from anywhere in your code. Another option is to view the uses of the <code class="email">World</code> class. This can be done by clicking on the <span class="strong"><strong class="calibre2">Use</strong></span> link at the top of the <span class="strong"><strong class="calibre2">World</strong></span> page. There, you can see all the methods that return a <code class="email">World</code> object as well as methods that accept a <code class="email">World</code> object as a parameter. To aid in searching through a page, remember that you can use <span class="strong"><em class="calibre9">Ctrl + F</em></span>. Searching for <span class="strong"><em class="calibre9">name</em></span> will lead you to the <code class="email">Bukkit.getWorld</code> method, which takes the name of the world as a parameter and returns the actual <code class="email">World</code> object.</p><p class="calibre8">Once you have the <code class="email">World</code> object, you will want to find a method that will give you the <code class="email">Block</code> at a specific location. You could navigate to the World page and use <span class="strong"><em class="calibre9">Ctrl + F</em></span> to search for <span class="strong"><em class="calibre9">block</em></span>, <span class="strong"><em class="calibre9">location</em></span>, <span class="strong"><em class="calibre9">x</em></span>, <span class="strong"><em class="calibre9">y</em></span>, or <span class="strong"><em class="calibre9">z</em></span>. If none of these help you find a useful method, then you can always view the uses of Block in a way that is similar to how we viewed the uses of World. Either way, you will find the <code class="email">World.getBlockAt</code> method, which can be called on the <code class="email">World</code> object that you discovered in the previous step.</p><p class="calibre8">The following are a few additional challenges to guide you while exploring the Bukkit API on your own and becoming familiar with it:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Which method would you call to check what time it is in a world?</li><li class="listitem">Which methods would you call to send a message to the player whose name is Steve?</li><li class="listitem">Which methods would you call to check whether the material of a block is flammable?</li><li class="listitem">Which method would you call to check whether a player has diamonds in their inventory?</li><li class="listitem">Which <a id="id70" class="calibre1"/>methods would you call to check whether a player is holding an item that is edible?</li></ul></div></div>
<div class="book" title="Summary" id="NQU21-b66e70deee6e4ed481db4b113e303f23"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec19" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">If you have any trouble figuring out any of the problems mentioned in the challenges or with any other portion of the Bukkit API you can ask help from the Spigot forums (<a class="calibre1" href="http://www.spigotmc.org/forums">www.spigotmc.org/forums</a>), the official IRC channel for Spigot (<a class="calibre1" href="http://www.spigotmc.org/pages/irc">www.spigotmc.org/pages/irc</a>), and the Minecraft forums (<a class="calibre1" href="http://www.minecraftforum.net">www.minecraftforum.net</a>).</p><p class="calibre8">You can also contact me directly or visit my website at <a class="calibre1" href="http://www.codisimus.com">www.codisimus.com</a>. I am always interested in helping out a fellow developer.</p><p class="calibre8">You now have the knowledge required to begin programming your own Bukkit plugins. As we did in this chapter, we will have to refer to the documentation to find the required information. Being able to navigate and understand the API documentation will speed up the process of coding. If you are ever unsure of a section of the API, you now know how to find the information that you need. In the next chapter, we'll use the Bukkit API to begin writing code to create your first Bukkit plugin.</p></div></body></html>