<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Reactive Patterns</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this chapter, we are going to explore the concepts and implementations of reactive patterns, looking at how we can use them to implement a better application. We will also cover reactive programming concepts, focusing on how they can aid application development. After reading this chapter, we will be able to use reactive patterns using the best practices of Java EE 8.</p>
<p class="mce-root">The following topics will be explored in this chapter:</p>
<ul class="calibre15">
<li class="calibre16">Explaining <span class="calibre5">the concept of reactive programming</span></li>
<li class="calibre16">Explaining the concept of an event in CDI</li>
<li class="calibre16">Implementing an <span class="calibre5">event in CDI</span></li>
<li class="calibre16">Explaining the concept of an asynchronous EJB method</li>
<li class="calibre16">Implementing an asynchronous EJB method</li>
<li class="calibre16">Explaining the concept of an asynchronous REST service</li>
<li class="calibre16">Implementing an asynchronous REST service</li>
</ul>
<p class="mce-root">For a long time, <span class="calibre10">applications processed all requests in a synchronous manner</span>. In a synchronous process, the users request a resource and wait for its response. When this type of process begins, each step is executed right after the previous one.</p>
<p class="mce-root">In the following diagram, we can see the process of the workflow when it is executed in a synchronous manner:</p>
<div class="cdpaligncenter"><img src="Images/a6530aad-ab8b-4374-8128-de18020ab36d.png" width="488" height="378" class="calibre66"/></div>
<p class="mce-root">In a synchronous process, each call to a function or resource works in a step-by-step, sequential manner. However, some tasks take longer to execute, thus blocking this process for a long time. An example of a task that can take a long time to execute is an I/O request when the application reads data from a disk or data source. </p>
<p class="mce-root">With the growth of web application access, several web applications needed to become able to receive and process a large number of requests in order to respond to these requests. With this, synchronous processing began to encounter problems with responding to large volumes of requests and building a response to the requests quickly. To solve this, web applications began working through asynchronous processes, making it possible for the applications to build a response quickly.</p>
<p class="mce-root">In an asynchronous process, calls to functions or resources can be carried out in a parallel manner without having to wait for a task to end in order to execute the next one. Because of this, executing an I/O request will not delay the next task's execution—they can proceed at the same time.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root">Reactive programming is a style of programming that develops applications in a functional form. Here, the development occurs in an asynchronous data stream that is sent by a requester. Furthermore, we can have a resource that reacts with this data stream as the data flow is received. Each task then works as a function and does not handle variables outside of its scope, making it possible for this function to execute several times <span class="calibre10">in a parallel manner </span><span class="calibre10">without having any collateral effects.</span></p>
<p class="mce-root">In reactive programming, we have elements that react to events, then when a user requests a resource, it starts an event that operates a data stream. When this event begins, an element or task reacts to the data stream and processes its algorithm. This makes it possible for the web application to process a large amount of data and scale it without difficulty. This paradigm works with the following four concepts:</p>
<ul class="calibre15">
<li class="calibre16"><strong class="calibre3">Elastic</strong>: This reacts to demands. Applications can use multicore and multiple servers to process the requests.</li>
<li class="calibre16"><strong class="calibre3">Resilient</strong>: This reacts to faults. Applications can react to and recover from faults and errors in software, hardware, and networks.</li>
<li class="calibre16"><strong class="calibre3">Message-driven</strong>:<span class="calibre5"> This r</span>eacts to events. Applications are composed of event managers that are asynchronous and nonblocking, as opposed to being composed of multiple synchronous threads.</li>
<li class="calibre16"><strong class="calibre3">Responsive</strong>: This reacts to users. Applications offer rich iterations in real time.</li>
</ul>
<p class="mce-root">Java EE 8 has tools that permit developers to use reactive programming in their applications. Some of these tools are e<span class="calibre10">vents in CDI</span>, asynchronous EJB methods, and asynchronous rest services.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Explaining the concept of an event in CDI</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">As reactive programming grew in the development environment, the Java language and Java EE needed to create tools to permit developers to develop systems using reactive programming. On Java EE, some solutions were introduced that made it possible to use the style function and to create processes asynchronously. One of these solutions is Event in CDI; this solution could launch a synchronous and blocking event, or an asynchronous and nonblocking event using CDI.</p>
<p class="mce-root">In CDI, Event is a solution that Java EE built using the observer pattern, making it possible to develop and launch an event to separate components doing the processing, working as a <span class="calibre10">synchronous and blocking or</span> asynchronous and nonblocking process. This separate task is an observer that reacts to an event launched with its data. In this chapter, we will focus on asynchronous CDI, using Event in CDI to launch asynchronous <span class="calibre10">events.</span><span class="calibre10"> </span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing an event in CDI</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">As an example of implementing an event in CDI, we think about asynchronous CDI and imagine a scene in which we want to create an application that makes it possible to upload <span class="calibre10">three types (or extensions) of file—this includes ZIP, JPG, and PDF extensions. Depending on the extension received at the request, it is intended that one event is launched and one observer will save its file on a disk using an asynchronous process. Each extension will have an observer, which will have an algorithm making it possible to save the file on a disk. To develop this example, we have the following classes:</span></p>
<ul class="calibre15">
<li class="calibre16"><kbd class="calibre18">FileUploadResource</kbd>: This is a class that represents the resource that receives all the requests in order to upload and launches respective events according to the file extension. </li>
<li class="calibre16"><kbd class="calibre18">FileEvent</kbd>: This is a bean that contains the file data and is sent to an event. </li>
<li class="calibre16"><kbd class="calibre18">FileHandler</kbd>: This is an interface of all the observers. In this example, all classes that react to <kbd class="calibre18">FileEvent</kbd> need to implement <kbd class="calibre18">FileHandler</kbd>.</li>
<li class="calibre16"><kbd class="calibre18">JpgHandler</kbd>: This is an implementation of FileHandler that saves a JPG file on a disk. This class is an observer that reacts with <kbd class="calibre18">FileEvent</kbd> launched to a JPG file.</li>
<li class="calibre16"><kbd class="calibre18">PdfHandler</kbd>: This is an <span class="calibre5">implementation of <kbd class="calibre18">FileHandler</kbd> that saves a PDF file on a disk. This class is an observer that reacts with <kbd class="calibre18">FileEvent</kbd> launched to a PDF file.</span></li>
<li class="calibre16"><kbd class="calibre18">ZipHandler</kbd>: This is an i<span class="calibre5">mplementation of <kbd class="calibre18">FileHandler</kbd> that saves a ZIP file on a disk. This class is an observer that reacts with <kbd class="calibre18">FileEvent</kbd> launched to a ZIP file.</span></li>
<li class="calibre16"><kbd class="calibre18">Jpg</kbd>: This is a qualifier used to establish that the <kbd class="calibre18">JpgHandler</kbd> observers need to react to an event.</li>
<li class="calibre16"><kbd class="calibre18">Pdf</kbd><span class="calibre5">: This is a qualifier used to establish that the <kbd class="calibre18">PdfHandler</kbd> observer needs to react to an event.</span></li>
<li class="calibre16"><kbd class="calibre18">Zip</kbd><span class="calibre5">: This is a qualifier used to establish that the <kbd class="calibre18">ZipHandler</kbd> observer needs to react to an event.</span></li>
<li class="calibre16"><kbd class="calibre18">FileSystemUtils</kbd>: This is a <span class="calibre5">utility class</span> to treat issues on a filesystem.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing the FileUploadResource class</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><kbd class="calibre18">FileUploadResource</kbd> is a resource class that uses JAX-RS to create a RESTful service to upload a file with JPG, PDF, and ZIP extensions. In the following code, we have the code of qualifiers that are used to select the correct observer to react to an event as well as the code for <kbd class="calibre18">FileUploadResource</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Bean sent on the event</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><kbd class="calibre18">FileEvent</kbd> is a bean that is sent to the event—the observers will receive this:</p>
<pre class="calibre23"><span class="calibre5">import </span>java.io.File<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">public class </span>FileEvent {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">private </span>File <span class="calibre5">file</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    private </span>String <span class="calibre5">mimeType</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    public </span><span class="calibre5">FileEvent</span>(){}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public </span><span class="calibre5">FileEvent</span>(File file<span class="calibre5">, </span>String mimeType){<br class="calibre2"/><br class="calibre2"/>        <span class="calibre5">this</span>.<span class="calibre5">file </span>= file<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        this</span>.<span class="calibre5">mimeType </span>= mimeType<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public </span>File <span class="calibre5">getFile</span>() {<br class="calibre2"/>        <span class="calibre5">return </span><span class="calibre5">file</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public void </span><span class="calibre5">setFile</span>(File file) {<br class="calibre2"/>        <span class="calibre5">this</span>.<span class="calibre5">file </span>= file<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public </span>String <span class="calibre5">getMimeType</span>() {<br class="calibre2"/>        <span class="calibre5">return </span><span class="calibre5">mimeType</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public void </span><span class="calibre5">setMimeType</span>(String mimeType) {<br class="calibre2"/>        <span class="calibre5">this</span>.<span class="calibre5">mimeType </span>= mimeType<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Qualifier to select the JpgHandler observer to react to an event </h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In the following code, we have the <kbd class="calibre18">Jpg</kbd> qualifier, used to define the correct handler:</p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.inject.<span class="calibre5">Qualifier</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.ElementType<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.<span class="calibre5">Retention</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.RetentionPolicy<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.<span class="calibre5">Target</span><span class="calibre5">;<br class="calibre2"/><br class="calibre2"/></span><span class="calibre5">@Qualifier<br class="calibre2"/></span><span class="calibre5">@Retention</span>(RetentionPolicy.<span class="calibre5">RUNTIME</span>)<br class="calibre2"/><span class="calibre5">@Target</span>({ElementType.<span class="calibre5">METHOD</span><span class="calibre5">, </span>ElementType.<span class="calibre5">TYPE</span><span class="calibre5">, </span>ElementType.<span class="calibre5">PARAMETER</span><span class="calibre5">, </span>ElementType.<span class="calibre5">FIELD</span>})<br class="calibre2"/><span class="calibre5">public </span>@<span class="calibre5">interface </span><span class="calibre5">Jpg </span>{<br class="calibre2"/>}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Qualifier to select the PdfHandler observer to react to an event </h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In the following code, we have the <kbd class="calibre18"><span class="calibre5"><span class="calibre5">Pdf</span></span></kbd> qualifier, used to define the correct handler:</p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.inject.<span class="calibre5">Qualifier</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.ElementType<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.<span class="calibre5">Retention</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.RetentionPolicy<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.<span class="calibre5">Target</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Qualifier<br class="calibre2"/></span><span class="calibre5">@Retention</span>(RetentionPolicy.<span class="calibre5">RUNTIME</span>)<br class="calibre2"/><span class="calibre5">@Target</span>({ElementType.<span class="calibre5">METHOD</span><span class="calibre5">, </span>ElementType.<span class="calibre5">TYPE</span><span class="calibre5">, </span>ElementType.<span class="calibre5">PARAMETER</span><span class="calibre5">, </span>ElementType.<span class="calibre5">FIELD</span>})<br class="calibre2"/><span class="calibre5">public </span>@<span class="calibre5">interface </span><span class="calibre5">Pdf </span>{</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Qualifier to select the ZipHandler observer to react to an event </h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre10">In the following code, we have the </span><kbd class="calibre18">Zip</kbd><span class="calibre10"> qualifier, used to define the correct handler:</span></p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.inject.<span class="calibre5">Qualifier</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.ElementType<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.<span class="calibre5">Retention</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.RetentionPolicy<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.lang.annotation.<span class="calibre5">Target</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Qualifier<br class="calibre2"/></span><span class="calibre5">@Retention</span>(RetentionPolicy.<span class="calibre5">RUNTIME</span>)<br class="calibre2"/><span class="calibre5">@Target</span>({ElementType.<span class="calibre5">METHOD</span><span class="calibre5">, </span>ElementType.<span class="calibre5">TYPE</span><span class="calibre5">, </span>ElementType.<span class="calibre5">PARAMETER</span><span class="calibre5">, </span>ElementType.<span class="calibre5">FIELD</span>})<br class="calibre2"/><span class="calibre5">public </span>@<span class="calibre5">interface </span><span class="calibre5">Zip </span>{<br class="calibre2"/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">The FIleUploadResource class</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre10">In the following code block, we have the</span> <kbd class="calibre18">JFileUploadResource</kbd><span class="calibre10"> class, which uses JAX-RS and is a REST service:</span></p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.enterprise.event.Event<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.enterprise.util.AnnotationLiteral<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.inject.<span class="calibre5">Inject</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">Consumes</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">POST</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">Path</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.core.Response<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">import </span>java.io.File<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Objects<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Path</span>(<span class="calibre5">"upload"</span>)<br class="calibre2"/><span class="calibre5">public class </span>FileUploadResource {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Inject<br class="calibre2"/></span><span class="calibre5">    </span>Event&lt;FileEvent&gt; <span class="calibre5">fileEvent</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">@Consumes</span>(<span class="calibre5">"application/pdf"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Response <span class="calibre5">uploadPdf</span>(File file){<br class="calibre2"/><br class="calibre2"/>        FileEvent fileEvent = <span class="calibre5">new </span>FileEvent(file<span class="calibre5">, </span><span class="calibre5">"pdf"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>Event&lt;FileEvent&gt; pdfEvent = <span class="calibre5">this</span>.<span class="calibre5">fileEvent</span>.select(<span class="calibre5">new <br class="calibre2"/></span>        AnnotationLiteral&lt;<span class="calibre5">Pdf</span>&gt;() {})<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>pdfEvent.fireAsync(fileEvent)<br class="calibre2"/>                .whenCompleteAsync((event<span class="calibre5">, </span>err)-&gt;{<br class="calibre2"/><br class="calibre2"/>                    <span class="calibre5">if</span>( Objects.<span class="calibre5">isNull</span>( err ) )<br class="calibre2"/>                        System.<span class="calibre5">out</span>.println(<span class="calibre5">"PDF saved"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                    else<br class="calibre2"/></span><span class="calibre5">                        </span>err.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">                </span>})<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>Response.<span class="calibre5">ok</span>().build()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Consumes</span>(<span class="calibre5">"image/jpeg"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Response <span class="calibre5">uploadJpg</span>(File file){<br class="calibre2"/><br class="calibre2"/>        FileEvent fileEvent = <span class="calibre5">new </span>FileEvent(file<span class="calibre5">, </span><span class="calibre5">"jpg"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>Event&lt;FileEvent&gt; jpgEvent = <span class="calibre5">this</span>.<span class="calibre5">fileEvent</span>.select( <span class="calibre5">new <br class="calibre2"/></span>        AnnotationLiteral&lt;<span class="calibre5">Jpg</span>&gt;() {} )<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>jpgEvent.fireAsync(fileEvent)<br class="calibre2"/>                .whenCompleteAsync((event<span class="calibre5">, </span>err)-&gt;{<br class="calibre2"/><br class="calibre2"/>                    <span class="calibre5">if</span>( Objects.<span class="calibre5">isNull</span>( err ) )<br class="calibre2"/>                        System.<span class="calibre5">out</span>.println( <span class="calibre5">"JPG saved" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                    else<br class="calibre2"/></span><span class="calibre5">                        </span>err.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">                </span>})<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>Response.<span class="calibre5">ok</span>().build()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Consumes</span>(<span class="calibre5">"application/zip"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Response <span class="calibre5">uploadZip</span>( File file){<br class="calibre2"/><br class="calibre2"/>        FileEvent fileEvent = <span class="calibre5">new </span>FileEvent( file<span class="calibre5">, </span><span class="calibre5">"zip" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>Event&lt;FileEvent&gt; zipEvent = <span class="calibre5">this</span>.<span class="calibre5">fileEvent</span>.select(<span class="calibre5">new <br class="calibre2"/></span>        AnnotationLiteral&lt;<span class="calibre5">Zip</span>&gt;() {})<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>zipEvent.fireAsync(fileEvent)<br class="calibre2"/>                .whenCompleteAsync( (event<span class="calibre5">, </span>err)-&gt;{<br class="calibre2"/><br class="calibre2"/>                    <span class="calibre5">if</span>( Objects.<span class="calibre5">isNull</span>( err ) )<br class="calibre2"/>                        System.<span class="calibre5">out</span>.println( <span class="calibre5">"PDF saved" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                    else<br class="calibre2"/></span><span class="calibre5">                        </span>err.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">                </span>})<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>Response.<span class="calibre5">ok</span>().build()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"><span class="calibre10">The preceding code contains the <kbd class="calibre18">uploadPdf(File file)</kbd>, <kbd class="calibre18">uploadJpg(File file)</kbd>, and <kbd class="calibre18">uploadZip(File file)</kbd> methods that are called when a user wants to upload a file with PDF, JPG, or ZIP </span><span class="calibre10">extensions, respectively</span><span class="calibre10">. Furthermore, this class has the <kbd class="calibre18">fileEvent</kbd> </span><span class="calibre10">attribute</span><span class="calibre10"> </span><span class="calibre10">of the <kbd class="calibre18">Event&lt;FileEvent&gt;</kbd></span><span class="calibre10"> type</span><span class="calibre10">. <kbd class="calibre18">Event&lt;FileEvent&gt;</kbd></span><span class="calibre10"> </span><span class="calibre10">is the class responsible for launching an event driven by a qualifier. In the following code, we have a code snippet that selects a correct <kbd class="calibre18">Event</kbd>, using an annotation as a qualifier:</span></p>
<pre class="mce-root2">Event&lt;FileEvent&gt; zipEvent = <span class="calibre5">this</span>.<span class="calibre5">fileEvent</span>.select(<span class="calibre5">new </span>AnnotationLiteral&lt;<span class="calibre5">Zip</span>&gt;() {})<span class="calibre5">;<br class="calibre2"/></span></pre>
<p class="mce-root">Another way to establish the correct event to launch is to use the qualifier at the point where the object is injected using <kbd class="calibre18">@Inject</kbd>, but this way, the event becomes static and all events launched by the <kbd class="calibre18">Event</kbd> object are of the same type. Using the <kbd class="calibre18">select (Annotation... var)</kbd> method, we can launch <span class="calibre10">a dynamic event</span> <span class="calibre10">as well as other event types</span>. The following is an example of <kbd class="calibre18">Event</kbd> with a static <span class="calibre10">event type:</span></p>
<pre class="mce-root2"><span class="calibre5">@Inject<br class="calibre2"/></span><span class="calibre5">@Pdf //Qualifier <br class="calibre2"/></span>Event&lt;FileEvent&gt; <span class="calibre5">pdfEvent</span><span class="calibre5">;<br class="calibre2"/></span></pre>
<p class="mce-root">In the preceding example, <kbd class="calibre18">pdfEvent</kbd> <span class="calibre10">will</span><span class="calibre10"> </span><span class="calibre10">always launch an event to an observer that processes an event marked by the </span><kbd class="calibre18">@Pdf</kbd> <span class="calibre10">qualifier</span><span class="calibre10">.</span></p>
<p class="mce-root">To launch an asynchronous event<span class="calibre10">, we need to call the</span> <kbd class="calibre18">fireAsync(U var)</kbd> <span class="calibre10">method,</span><span class="calibre10"> </span><span class="calibre10">which returns</span> <kbd class="calibre18">CompletionStage</kbd><span class="calibre10">. In the following code block, we have a snippet that calls this method and prepares a callback function to execute when the process is complete:</span></p>
<pre class="mce-root2"><span class="calibre5"> </span>zipEvent.fireAsync(fileEvent)<br class="calibre2"/>                .whenCompleteAsync( (event<span class="calibre5">, </span>err)-&gt;{<br class="calibre2"/><br class="calibre2"/>                    <span class="calibre5">if</span>( Objects.<span class="calibre5">isNull</span>( err ) )<br class="calibre2"/>                        System.<span class="calibre5">out</span>.println( <span class="calibre5">"PDF saved" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                    else<br class="calibre2"/></span><span class="calibre5">                        </span>err.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">                </span>})<span class="calibre5">;</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing observers</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">When an event is launched by a launcher, some elements will react to this event and process a task with the data given on an event. These elements are called <strong class="calibre8">observers</strong> and work as observer patterns, which create a one-to-many relationship between objects.</p>
<p class="mce-root">This occurs when one object is the subject and the other objects are the observers. Then, when the subject object is updated, all observer objects that are related to this subject-object are updated too. </p>
<p class="mce-root">CDI has a mechanism for creating observers that will react with its events. In our example, we will launch an event, create observers to react to these events, and process a task. To do this, we will create handlers that represent our observer and process tasks. These handlers will be classes that implement the <kbd class="calibre18">FileHandler</kbd> interface as well as methods, called <kbd class="calibre18">handle(FileEvent file)</kbd>. Note that the parameter of the <kbd class="calibre18">handler(FileEvent file)</kbd> method is a <kbd class="calibre18">FileEvent</kbd> type. This is the same type of data as sent to the event in the preceding example. In the following example, we have the code for the <kbd class="calibre18">FileHandler</kbd> interface and its implementations:</p>
<pre class="calibre23"><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">public interface </span>FileHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public void </span><span class="calibre5">handle</span>( FileEvent file ) <span class="calibre5">throws </span>IOException<span class="calibre5">;<br class="calibre2"/></span>}</pre>
<p class="mce-root">In the following code, we have the <kbd class="calibre18">JpgHandler</kbd> class, which is an implementation of <kbd class="calibre18">FileHandler</kbd>. This is responsible for saving the JPG files on a filesystem. This observer is called when an event is launched to the <kbd class="calibre18">@Jpg</kbd> <span class="calibre10">qualifier:</span></p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.enterprise.event.<span class="calibre5">ObservesAsync</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">public class </span>JpgHandler <span class="calibre5">implements </span>FileHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Override<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public void </span><span class="calibre5">handle</span>(<span class="calibre5">@ObservesAsync @Jpg </span>FileEvent file) <span class="calibre5">throws  <br class="calibre2"/></span>    IOException {<br class="calibre2"/><br class="calibre2"/>       FileSystemUtils.<span class="calibre5">save</span>( file.getFile()<span class="calibre5">,</span><span class="calibre5">"jpg"</span><span class="calibre5">,</span><span class="calibre5">"jpg_"</span>+ <span class="calibre5">new <br class="calibre2"/></span>       Date().getTime() + <span class="calibre5">".jpg" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root">In the preceding code block, we have the method handler, which has an <kbd class="calibre18">@ObservesAsync</kbd> <span class="calibre10">annotation</span><span class="calibre10"> </span><span class="calibre10">as well as </span><kbd class="calibre18">@Jpg</kbd><span class="calibre10">. This is a CDI annotation that configures this method to observe the</span> <kbd class="calibre18">FileEvent</kbd> <span class="calibre10">file, as well as the Qualifier, to configure the observer to react only to the event launched to the</span> <kbd class="calibre18">@Jpg</kbd> <span class="calibre10">qualifier</span><span class="calibre10">. </span></p>
<p class="mce-root"><span class="calibre10">In the following code block, we have the</span> <kbd class="calibre18">PdfHandler</kbd><span class="calibre10"> class, which is an implementation of </span><kbd class="calibre18">FileHandler</kbd><span class="calibre10"> responsible for persisting PDF files on a filesystem. This observer is called when an event is launched to a</span> <kbd class="calibre18">@Pdf</kbd> <span class="calibre10">qualifier:</span></p>
<pre class="calibre23"><span class="calibre5">import </span>javax.enterprise.event.<span class="calibre5">ObservesAsync</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">public class </span>PdfHandler <span class="calibre5">implements </span>FileHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Override<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public void </span><span class="calibre5">handle</span>(<span class="calibre5">@ObservesAsync @Pdf </span>FileEvent file) <span class="calibre5">throws <br class="calibre2"/></span>    IOException {<br class="calibre2"/><br class="calibre2"/>         FileSystemUtils.<span class="calibre5">save</span>( file.getFile()<span class="calibre5">,</span><span class="calibre5">"pdf"</span><span class="calibre5">,</span><span class="calibre5">"pdf_"</span>+ <span class="calibre5">new <br class="calibre2"/></span>         Date().getTime() + <span class="calibre5">".pdf" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"><span class="calibre10">In the preceding code, we have a </span><span class="calibre10">handler</span><span class="calibre10"> </span><span class="calibre10">method with an</span> <kbd class="calibre18">@ObservesAsync</kbd><span class="calibre10"> </span><span class="calibre10">annotation </span><span class="calibre10">as well as a </span><kbd class="calibre18">@Pdf.</kbd><span class="calibre10"> This is a CDI annotation that configures the <kbd class="calibre18">handle(FileEvent file)</kbd> method to observe the </span><kbd class="calibre18">FileEvent</kbd><span class="calibre10"> file, and the <kbd class="calibre18">Qualifier</kbd> to configure the observer to react only to an event launched to the</span> <kbd class="calibre18">@Pdf</kbd><span class="calibre10"> qualifier</span><span class="calibre10">. </span></p>
<p class="mce-root"><span class="calibre10">In the following code, we have the </span><kbd class="calibre18">ZipHandler</kbd><span class="calibre10"> class, which is an implementation of </span><kbd class="calibre18">FileHandler</kbd><span class="calibre10"> responsible for saving ZIP files on a filesystem. This observer is called when an event is launched to a</span> <kbd class="calibre18">@Zip</kbd> <span class="calibre10">qualifier:</span></p>
<pre class="calibre23"><span class="calibre5">import </span>javax.enterprise.event.<span class="calibre5">ObservesAsync</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">public class </span>ZipHandler <span class="calibre5">implements </span>FileHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Override<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public void </span><span class="calibre5">handle</span>(<span class="calibre5">@ObservesAsync @Zip </span>FileEvent file) <span class="calibre5">throws <br class="calibre2"/></span>    IOException {<br class="calibre2"/><br class="calibre2"/>        FileSystemUtils.<span class="calibre5">save</span>( file.getFile()<span class="calibre5">,</span><span class="calibre5">"zip"</span><span class="calibre5">,</span><span class="calibre5">"zip_"</span>+ <span class="calibre5">new <br class="calibre2"/></span>        Date().getTime() + <span class="calibre5">".zip" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"><span class="calibre10">In the preceding code, we have the handler </span><span class="calibre10">method, which </span><span class="calibre10">has an</span> <kbd class="calibre18">@ObservesAsync</kbd><span class="calibre10"> </span><span class="calibre10">and a </span><kbd class="calibre18">@Zip</kbd><span class="calibre10"> annotation. This is a CDI annotation that configures this method to observe the </span><kbd class="calibre18">FileEvent</kbd><span class="calibre10"> file, and the Qualifier to configure this observer to react only to events launched to the</span> <kbd class="calibre18">@Zip</kbd><span class="calibre10"> </span><span class="calibre10">qualifier</span><span class="calibre10">.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Explaining the concept of an asynchronous EJB method</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Launching events to elements that react to these events is a good mechanism for solving many kinds of problems during development. However, sometimes it is necessary to call<span class="calibre10"> a class </span><span class="calibre10">method without blocking the process until this method completes the execution.</span></p>
<p class="mce-root">An asynchronous EJB method is a mechanism of EJB that allows the client to call a method and receive its return as soon as the method is invoked. T<span class="calibre10">he return of a method is in control of the asynchronous call represented by the <kbd class="calibre18">Future&lt;T&gt;</kbd> object. The client can control the execution of the asynchronous method. These actions can cancel the </span><span class="calibre10">invocation </span><span class="calibre10">method, check whether the invocation is completed, check whether the invocation has launched an exception, and check whether the invocation was cancelled.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Difference between an asynchronous EJB method and an event in CDI</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre10">An event in </span><span class="calibre10">CDI </span>and an asynchronous EJB method have the similar characteristic of making a nonblocking call to a task. Furthermore, the client can cancel and monitor the invocation of an asynchronous process. However, an asynchronous EJB method and an event in CDI don't share all the same characteristics. The principal difference between them is that the asynchronous EJB method works on a one-to-one basis between the caller and the called. This is because when this method is invoked, it will only process the task and the client knows what the method <span class="calibre10">is</span><span class="calibre10"> </span><span class="calibre10">that will be processed. On the event in CDI, the relationship between the caller and the called is one-to-many. This is because the caller launches an event, and one or more observers can react to this. Another difference between the asynchronous EJB method and an event in CDI is that, in CDI, the event works with the observer pattern and makes it possible to apply a callback method to be executed at another time. The a</span>synchronous EJB method doesn't work with the observer pattern and doesn't have the ability to apply a callback method.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing an asynchronous EJB method</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In our <span class="calibre10">implementation</span><span class="calibre10"> example, we will use the same scenario as in the example of an Event in CDI. Here, we will create an application that makes it possible to upload three types (or extensions) of files—ZIP, JPG, and PDF extensions. Depending on the type of extension received, the file received will be saved on the filesystem at its respective directory. To develop this example, we will use the following classes:</span></p>
<ul class="calibre15">
<li class="calibre16"><kbd class="calibre18">FileUploadResource</kbd>: This is a class that represents the resource to receive all request to upload, and calls the respective EJB according to the file extension.</li>
<li class="calibre16"><kbd class="calibre18">JpgHandler</kbd>:<span class="calibre5"> This is an EJB with an asynchronous method to treat the process save of a JPG file on disk.</span></li>
<li class="calibre16"><kbd class="calibre18">PdfHandler</kbd>:<span class="calibre5"> This is an EJB with an asynchronous method to treat the process save of a PDF file on disk.</span></li>
<li class="calibre16"><kbd class="calibre18">ZipHandler</kbd>: <span class="calibre5">This is an</span> <span class="calibre5">EJB with an asynchronous method to treat the process save of a ZIP file on disk.</span></li>
<li class="calibre16"><kbd class="calibre18">FileSystemUtils</kbd>: <span class="calibre5">This is a</span> utility class intended to handle issues with the filesystem.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing EJBs</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">To use an asynchronous EJB method, we need to create a session bean and configure it to have asynchronous methods. In the following code, we have an example of the implementation of a session bean called <kbd class="calibre18">PdfHandler</kbd>, which is responsible for saving PDF files on a filesystem:</p>
<pre class="calibre23"><span class="calibre5">import </span>javax.ejb.AsyncResult<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Asynchronous</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Stateless</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.concurrent.Future<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Stateless<br class="calibre2"/></span><span class="calibre5">public class </span>PdfHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Asynchronous<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Future&lt;String&gt; <span class="calibre5">handler </span>(FileBean file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        <span class="calibre5">return new </span>AsyncResult(<br class="calibre2"/>                FileSystemUtils.<span class="calibre5">save</span>(<br class="calibre2"/>                        file.getFile()<span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"pdf"</span><span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"pdf_"</span>+ <span class="calibre5">new </span>Date().getTime() + <span class="calibre5">".pdf" </span>))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root">In the preceding code block, we have the <kbd class="calibre18">PdfHandler</kbd> class, which contains a <kbd class="calibre18">handler(FileBean file)</kbd> method. This method is annotated with <kbd class="calibre18">@Asynchronous</kbd> to configure it as an asynchronous method. </p>
<p class="mce-root">The following code demonstrates the configuration of the <kbd class="calibre18">handle(FileBean file)</kbd> method:</p>
<pre class="mce-root2"> <span class="calibre5">@Asynchronous<br class="calibre2"/></span><span class="calibre5"> </span><span class="calibre5">public </span>Future&lt;String&gt; <span class="calibre5">handler </span>(FileBean file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/>        //Business logic<br class="calibre2"/> }</pre>
<p class="mce-root">This method needs to return <kbd class="calibre18">Future&lt;T&gt;</kbd>. In our example, we return <kbd class="calibre18">AsyncResult</kbd>, which is an implementation of the <kbd class="calibre18">Future</kbd> interface. In our example, the data returned with the <kbd class="calibre18">Future</kbd> object contains the information of the path to the file on the filesystem. In the following code, we have an example of a <kbd class="calibre18">Future</kbd> return:</p>
<pre class="mce-root2"><span class="calibre5">return new </span>AsyncResult(<br class="calibre2"/>                FileSystemUtils.<span class="calibre5">save</span>(<br class="calibre2"/>                        file.getFile()<span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"pdf"</span><span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"pdf_"</span>+ <span class="calibre5">new </span>Date().getTime() + <span class="calibre5">".pdf" </span>))<span class="calibre5">;</span></pre>
<p class="mce-root"><span class="calibre10">In the following code block, we have an example of the implementation of a session bean called </span><kbd class="calibre18">JpgHandler</kbd><span class="calibre10">, which is responsible for saving JPG files on the filesystem:</span></p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.ejb.AsyncResult<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Asynchronous</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Stateless</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.concurrent.Future<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Stateless<br class="calibre2"/></span><span class="calibre5">public class </span>JpgHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Asynchronous<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Future&lt;String&gt; <span class="calibre5">handler </span>(FileBean file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        <span class="calibre5">return new </span>AsyncResult(<br class="calibre2"/>                FileSystemUtils.<span class="calibre5">save</span>(<br class="calibre2"/>                        file.getFile()<span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"jpg"</span><span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"jpg_"</span>+ <span class="calibre5">new </span>Date().getTime() + <span class="calibre5">".jpg" </span>))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"><span class="calibre10">This method works as the <kbd class="calibre18">PdfHandler</kbd> method, but saves the file at another directory and with another filename pattern.</span><span class="calibre10"> In our example, the data returned with the </span><kbd class="calibre18">Future</kbd><span class="calibre10"> object is the path to the file on the filesystem. </span></p>
<p class="mce-root"><span class="calibre10">In the following code, we have an example of an implementation of the session bean called </span><kbd class="calibre18">JpgHandler</kbd><span class="calibre10">, which is responsible for saving JPG files on the filesystem:</span></p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.ejb.AsyncResult<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Asynchronous</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Stateless</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.concurrent.Future<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Stateless<br class="calibre2"/></span><span class="calibre5">public class </span>ZipHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Asynchronous<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Future&lt;String&gt; <span class="calibre5">handler </span>(FileBean file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        <span class="calibre5">return new </span>AsyncResult(<br class="calibre2"/>                FileSystemUtils.<span class="calibre5">save</span>(<br class="calibre2"/>                        file.getFile()<span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"zip"</span><span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"zip_"</span>+ <span class="calibre5">new </span>Date().getTime() + <span class="calibre5">".zip" </span>))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"><span class="calibre10">This method works as the <kbd class="calibre18">PdfHandler</kbd> and <kbd class="calibre18">JpgHandler</kbd> methods, but saves the file at another directory and with another filename pattern.</span><span class="calibre10"> In our example, the data returned with the </span><kbd class="calibre18">Future</kbd><span class="calibre10"> object is the path to the file on the filesystem. </span></p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing the FileUploadResource class</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre10"><kbd class="calibre18">FileUploadResource</kbd> is a resource class that uses JAX-RS to create a RESTful service to upload a file with JPG, PDF, and ZIP extensions. The following code contains the <kbd class="calibre18">FileUploadResource</kbd> resource class:</span></p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.inject.<span class="calibre5">Inject</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">Consumes</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">POST</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">Path</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.core.Response<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.File<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Path</span>(<span class="calibre5">"upload"</span>)<br class="calibre2"/><span class="calibre5">public class </span>FileUploadResource {<br class="calibre2"/><br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Inject<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">private </span>PdfHandler <span class="calibre5">pdfHandler</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">@Inject<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">private </span>JpgHandler <span class="calibre5">jpgHandler</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">@Inject<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">private </span>ZipHandler <span class="calibre5">zipHandler</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">@Consumes</span>(<span class="calibre5">"application/pdf"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Response <span class="calibre5">uploadPdf</span>(File file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        FileBean fileBean = <span class="calibre5">new </span>FileBean(file<span class="calibre5">, </span><span class="calibre5">"pdf"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span><span class="calibre5">pdfHandler</span>.handler( fileBean )<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>Response.<span class="calibre5">ok</span>().build()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Consumes</span>(<span class="calibre5">"image/jpeg"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Response <span class="calibre5">uploadJpg</span>(File file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        FileBean fileBean = <span class="calibre5">new </span>FileBean(file<span class="calibre5">, </span><span class="calibre5">"jpg"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span><span class="calibre5">jpgHandler</span>.handler( fileBean )<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>Response.<span class="calibre5">ok</span>().build()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Consumes</span>(<span class="calibre5">"application/zip"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>Response <span class="calibre5">uploadZip</span>( File file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        FileBean fileBean = <span class="calibre5">new </span>FileBean( file<span class="calibre5">, </span><span class="calibre5">"zip" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span><span class="calibre5">zipHandler</span>.handler( fileBean )<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>Response.<span class="calibre5">ok</span>().build()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root">In the following code block, the EJB's <kbd class="calibre18">PdfHandler</kbd>, <kbd class="calibre18">JpgHandler</kbd>, and <kbd class="calibre18">ZipHandler</kbd> are injected with the <kbd class="calibre18">@Inject</kbd> annotation from CDI. In the following example, we have the injection code:</p>
<pre class="mce-root2"><span class="calibre5">    @Inject<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">private </span>PdfHandler <span class="calibre5">pdfHandler</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">@Inject<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">private </span>JpgHandler <span class="calibre5">jpgHandler</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">@Inject<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">private </span>ZipHandler <span class="calibre5">zipHandler</span><span class="calibre5">;<br class="calibre2"/></span></pre>
<p class="mce-root">When a request is sent to an application, the method responsible for processing a request gets the file and builds a <kbd class="calibre18">FileBean</kbd>. This method calls an asynchronous EJB method to process this task. In the following code blocks, we have examples of calling the asynchronous EJB method.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Calling an asynchronous EJB method to save a PDF</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">We use the following ways to call the asynchronous EJB method. The following code block demonstrates the saving of a PDF file by calling the EJB method:</p>
<pre class="mce-root2">    FileBean fileBean = <span class="calibre5">new </span>FileBean(file<span class="calibre5">, </span><span class="calibre5">"pdf"</span>)<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">pdfHandler</span>.handler( fileBean )<span class="calibre5">;</span></pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Calling an asynchronous EJB method to save a JPG</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre10">The following code block demonstrates the saving of a JPG file by calling the asynchronous EJB method:</span></p>
<pre class="mce-root2">    FileBean fileBean = <span class="calibre5">new </span>FileBean(file<span class="calibre5">, </span><span class="calibre5">"jpg"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">jpgHandler</span>.handler( fileBean )<span class="calibre5">;</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Calling an asynchronous EJB method to save a ZIP</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre10">The following code block demonstrates the saving of a ZIP file by calling the asynchronous EJB method:</span></p>
<pre class="mce-root2">    FileBean fileBean = <span class="calibre5">new </span>FileBean( file<span class="calibre5">, </span><span class="calibre5">"zip" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">zipHandler</span>.handler( fileBean )<span class="calibre5">;<br class="calibre2"/></span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Explaining the concept of an asynchronous REST service</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Over time, the number of REST applications has grown and many APIs have been created to serve various kinds of services in many environments. In the same way as other applications, some REST applications need asynchronous processes and work with nonblocking processes. </p>
<p class="mce-root">An asynchronous REST service is an asynchronous process that <span class="calibre10">makes it easier to process threads</span>. In contrast, in a request sent to a server, a new thread can be called to process a nonblocking task, such as operations on a filesystem. JAX-RS supports asynchronous processing in a client API and server API, but the asynchronous rest service is implemented at the server API. This is because it is the server API that provides services. The client API consumes the services and, as a result, we refer to the asynchronous processing in a client API as the asynchronous REST consume.</p>
<p class="mce-root">The client API can be completed through asynchronous invocation, which returns a <kbd class="calibre18">Future&lt;T&gt;</kbd> object as soon as the request is done, allowing the client to control this invocation and apply actions to it. This can be done through reactive programming and it can return a <kbd class="calibre18">CompletionState&lt;T&gt;</kbd> object as soon as the request is done. This means that it is possible to control the invocation and choose a callback method, executed depending on the stage. In the implementation example covered in the next topic, we will use the invocation with reactive programming.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing an asynchronous REST service</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><span class="calibre10">As an </span><span class="calibre10">example of implementing an asynchronous REST service</span><span class="calibre10">, we will use the same scenario used in the example of the event in the CDI and the asynchronous EJB method. Here, we will create an application that makes it possible to upload three types (or extensions) of files—ZIP, JPG, and PDF extensions. Depending on the extension received, we want the file received to be kept in its respective directory on the filesystem. To develop this example, we have the following classes:</span></p>
<ul class="calibre15">
<li class="calibre16"><kbd class="calibre18">FileUploadResource</kbd>: This is a class that represents the resource that works with asynchronous processes to receive all requests to upload, and calls the respective EJB according to the file extension.</li>
<li class="calibre16"><kbd class="calibre18">JpgHandler</kbd>:<span class="calibre5"> This is an EJB with an available method for saving a JPG file on a disk.</span></li>
<li class="calibre16"><kbd class="calibre18">PdfHandler</kbd><span class="calibre5">: This is an EJB with an available method for saving a PDF file on a disk.</span></li>
<li class="calibre16"><kbd class="calibre18">ZipHandler</kbd>: <span class="calibre5">This is an </span><span class="calibre5">EJB with an available method for saving a ZIP file on a disk.</span></li>
<li class="calibre16"><kbd class="calibre18">FileSystemUtils</kbd>: <span class="calibre5">This is a</span> utility class that deals with issues within the filesystem.</li>
<li class="calibre16"><kbd class="calibre18">FileUploadClient</kbd>: <span class="calibre5">This is a c</span>lient API implemented through JAX-RS that makes asynchronous calls to the REST service.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing the EJBs </h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">At this point, we will implement <kbd class="calibre18">PdfHandler</kbd>, <kbd class="calibre18"><span class="calibre5">JpgHandler</span></kbd>, and <kbd class="calibre18">ZipHandler</kbd>, which are the EJBs responsible for dealing with the logic to save its files.</p>
<p class="mce-root">In the following code, we have <kbd class="calibre18">PdfHandler</kbd>, which is responsible for saving PDF files:</p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Stateless</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Stateless<br class="calibre2"/></span><span class="calibre5">public class </span>PdfHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public </span>String <span class="calibre5">handler </span>(FileBean file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        <span class="calibre5">return </span>FileSystemUtils.<span class="calibre5">save</span>(<br class="calibre2"/>                file.getFile()<span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">"pdf"</span><span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">"pdf_"</span>+ <span class="calibre5">new </span>Date().getTime() + <span class="calibre5">".pdf" </span>)<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"><span class="calibre10">In the following code block, we have <kbd class="calibre18">JpgHandler</kbd></span>, <span class="calibre10">which is responsible for saving JPG files:</span></p>
<pre class="calibre23"><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Stateless</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Stateless<br class="calibre2"/></span><span class="calibre5">public class </span>JpgHandler {<br class="calibre2"/><br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public </span>String <span class="calibre5">handler </span>(FileBean file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        <span class="calibre5">return </span>FileSystemUtils.<span class="calibre5">save</span>(<br class="calibre2"/>                        file.getFile()<span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"jpg"</span><span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                        </span><span class="calibre5">"jpg_"</span>+ <span class="calibre5">new </span>Date().getTime() + <span class="calibre5">".jpg" </span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"><span class="calibre10">In the following code block, we have </span><kbd class="calibre18">ZipHandler</kbd><span class="calibre10">, which is responsible for saving ZIP files:</span></p>
<pre class="calibre23"><span class="calibre5">import </span>javax.ejb.<span class="calibre5">Stateless</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.Date<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Stateless<br class="calibre2"/></span><span class="calibre5">public class </span>ZipHandler {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">public </span>String <span class="calibre5">handler </span>(FileBean file) <span class="calibre5">throws </span>IOException {<br class="calibre2"/><br class="calibre2"/>        <span class="calibre5">return </span>FileSystemUtils.<span class="calibre5">save</span>(<br class="calibre2"/>                file.getFile()<span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">"zip"</span><span class="calibre5">,<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">"zip_"</span>+ <span class="calibre5">new </span>Date().getTime() + <span class="calibre5">".zip" </span>)<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing the FileUploadResource class</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><kbd class="calibre18">FileUploadResource</kbd> is a resource designed to allow clients to upload files to a server through an asynchronous request using REST. This class uses the JAX-RS to create a REST resource and, depending on the file extension, this resource delegates the task of saving a file to its respective EJB. In the following code block, we have the <kbd class="calibre18">FileUploadResource</kbd> <span class="calibre10">class:</span><span class="calibre10"> </span></p>
<pre class="mce-root2"><span class="calibre5">import </span>javax.annotation.<span class="calibre5">Resource</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.enterprise.concurrent.ManagedExecutorService<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.enterprise.context.spi.CreationalContext<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.enterprise.inject.spi.Bean<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.enterprise.inject.spi.BeanManager<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.naming.InitialContext<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.naming.NamingException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">Consumes</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">POST</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>javax.ws.rs.<span class="calibre5">Path</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.File<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.io.IOException<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.concurrent.CompletableFuture<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">import </span>java.util.concurrent.CompletionStage<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">@Path</span>(<span class="calibre5">"upload"</span>)<br class="calibre2"/><span class="calibre5">public class </span>FileUploadResource {<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Resource<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">private </span>ManagedExecutorService <span class="calibre5">executor</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">@Consumes</span>(<span class="calibre5">"application/pdf"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>CompletionStage&lt;String&gt; <span class="calibre5">uploadPdf</span>(File file) {<br class="calibre2"/><br class="calibre2"/>        BeanManager beanManager = getBeanManager()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>CompletableFuture&lt;String&gt; completionStage = <span class="calibre5">new <br class="calibre2"/></span>        CompletableFuture&lt;&gt;()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        </span><span class="calibre5">executor</span>.execute(() -&gt; {<br class="calibre2"/>            FileBean fileBean = <span class="calibre5">new </span>FileBean(<span class="calibre5">file</span><span class="calibre5">, </span><span class="calibre5">"pdf"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            </span>Bean&lt;PdfHandler&gt; bean = (Bean) <br class="calibre2"/><span class="calibre5">            beanManager</span>.getBeans(PdfHandler.<span class="calibre5">class</span>).iterator().next()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>CreationalContext cCtx = <br class="calibre2"/><span class="calibre5">            beanManager</span>.createCreationalContext(bean)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>PdfHandler pdfHandler = (PdfHandler) <br class="calibre2"/><span class="calibre5">            beanManager</span>.getReference(bean<span class="calibre5">, </span>PdfHandler.<span class="calibre5">class, </span>cCtx)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            try </span>{<br class="calibre2"/><br class="calibre2"/>              <span class="calibre5">completionStage</span>.complete(pdfHandler.handler( fileBean ))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>} <span class="calibre5">catch </span>(IOException e) {<br class="calibre2"/>                e.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">completionStage</span>.completeExceptionally(e)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>}<br class="calibre2"/><br class="calibre2"/>        })<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>completionStage<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">private </span>BeanManager <span class="calibre5">getBeanManager</span>(){<br class="calibre2"/>        <span class="calibre5">try </span>{<br class="calibre2"/>            <span class="calibre5">// manual JNDI lookupCDI for the CDI bean manager (JSR 299)<br class="calibre2"/></span><span class="calibre5">           </span><span class="calibre5">return </span>(BeanManager) <span class="calibre5">new </span>InitialContext().lookup(<br class="calibre2"/>                    <span class="calibre5">"java:comp/BeanManager"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>} <span class="calibre5">catch </span>(NamingException ex) {<br class="calibre2"/>            <span class="calibre5">throw new </span>IllegalStateException(<br class="calibre2"/>                    <span class="calibre5">"cannot perform JNDI lookup for CDI BeanManager"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        </span>}<br class="calibre2"/>    }<br class="calibre2"/><br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Consumes</span>(<span class="calibre5">"image/jpeg"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>CompletionStage&lt;String&gt; <span class="calibre5">uploadJpg</span>(File file) <span class="calibre5">throws <br class="calibre2"/></span>    IOException {<br class="calibre2"/><br class="calibre2"/>        BeanManager beanManager = getBeanManager()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>CompletableFuture&lt;String&gt; completionStage = <span class="calibre5">new <br class="calibre2"/></span>        CompletableFuture&lt;&gt;()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        </span><span class="calibre5">executor</span>.execute(() -&gt; {<br class="calibre2"/>            FileBean fileBean = <span class="calibre5">new </span>FileBean(<span class="calibre5">file</span><span class="calibre5">, </span><span class="calibre5">"jpg"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            </span>Bean&lt;JpgHandler&gt; bean = (Bean) <br class="calibre2"/><span class="calibre5">            beanManager</span>.getBeans(JpgHandler.<span class="calibre5">class</span>).iterator().next()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>CreationalContext cCtx = <br class="calibre2"/><span class="calibre5">            beanManager</span>.createCreationalContext(bean)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>JpgHandler jpgHandler = (JpgHandler) <br class="calibre2"/><span class="calibre5">            beanManager</span>.getReference(bean<span class="calibre5">, </span>JpgHandler.<span class="calibre5">class, </span>cCtx)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            try </span>{<br class="calibre2"/><br class="calibre2"/>            <span class="calibre5">completionStage</span>.complete(jpgHandler.handler( fileBean ))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>} <span class="calibre5">catch </span>(IOException e) {<br class="calibre2"/>                e.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">completionStage</span>.completeExceptionally(e)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>}<br class="calibre2"/><br class="calibre2"/>        })<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>completionStage<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/><br class="calibre2"/>    <span class="calibre5">@Consumes</span>(<span class="calibre5">"application/zip"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>CompletionStage&lt;String&gt; <span class="calibre5">uploadZip</span>( File file) <span class="calibre5">throws <br class="calibre2"/></span>    IOException {<br class="calibre2"/><br class="calibre2"/>        BeanManager beanManager = getBeanManager()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>CompletableFuture&lt;String&gt; completionStage = <span class="calibre5">new <br class="calibre2"/></span>        CompletableFuture&lt;&gt;()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        </span><span class="calibre5">executor</span>.execute(() -&gt; {<br class="calibre2"/>            FileBean fileBean = <span class="calibre5">new </span>FileBean(<span class="calibre5">file</span><span class="calibre5">, </span><span class="calibre5">"zip"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            </span>Bean&lt;ZipHandler&gt; bean = (Bean) <br class="calibre2"/><span class="calibre5">            beanManager</span>.getBeans(ZipHandler.<span class="calibre5">class</span>).iterator().next()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>CreationalContext cCtx = <br class="calibre2"/><span class="calibre5">            beanManager</span>.createCreationalContext(bean)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>ZipHandler zipHandler = (ZipHandler) <br class="calibre2"/><span class="calibre5">            beanManager</span>.getReference(bean<span class="calibre5">, </span>ZipHandler.<span class="calibre5">class, </span>cCtx)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            try </span>{<br class="calibre2"/><br class="calibre2"/>             <span class="calibre5">completionStage</span>.complete(zipHandler.handler( fileBean ))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>} <span class="calibre5">catch </span>(IOException e) {<br class="calibre2"/>                e.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">completionStage</span>.completeExceptionally(e)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>}<br class="calibre2"/><br class="calibre2"/>        })<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>completionStage<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}<br class="calibre2"/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root">In the preceding code block, we have the <kbd class="calibre18">FileUploadResource</kbd> <span class="calibre10">class, which has a class </span><span class="calibre10">injected named <kbd class="calibre18">executor</kbd>. The <kbd class="calibre18">executor</kbd> attribute has the <kbd class="calibre18">ManagedExecutorService</kbd> type, which is injected by <kbd class="calibre18">@Resource</kbd> of CDI. This attribute is used to create a new thread to execute a separated task. In the following code block, we have a code snippet of <kbd class="calibre18">FileUploadResource</kbd>, which has an <kbd class="calibre18">executor</kbd> attribute </span><span class="calibre10">injection</span><span class="calibre10">:</span></p>
<pre class="mce-root2"> <span class="calibre5">@Resource<br class="calibre2"/></span><span class="calibre5"> </span><span class="calibre5">private </span>ManagedExecutorService <span class="calibre5">executor</span><span class="calibre5">;<br class="calibre2"/></span></pre>
<p class="mce-root">In addition, this class consists of three methods that receive a request, prepare the <kbd class="calibre18">FileBean</kbd>, and send it to an EJB to process a task that saves the files. In the following code block, we have the <kbd class="calibre18">uploadPdf(File file)</kbd> <span class="calibre10">method, which is </span><span class="calibre10">responsible for processing all the requests to upload PDF files:</span></p>
<pre class="mce-root2"><span class="calibre5">    </span><span class="calibre5">@Consumes</span>(<span class="calibre5">"application/pdf"</span>)<br class="calibre2"/>    <span class="calibre5">@POST<br class="calibre2"/></span><span class="calibre5">    </span><span class="calibre5">public </span>CompletionStage&lt;String&gt; <span class="calibre5">uploadPdf</span>(File file) {<br class="calibre2"/><br class="calibre2"/>        BeanManager beanManager = getBeanManager()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>CompletableFuture&lt;String&gt; completionStage = <span class="calibre5">new <br class="calibre2"/></span>        CompletableFuture&lt;&gt;()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        </span><span class="calibre5">executor</span>.execute(() -&gt; {<br class="calibre2"/>            FileBean fileBean = <span class="calibre5">new </span>FileBean(<span class="calibre5">file</span><span class="calibre5">, </span><span class="calibre5">"pdf"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            <br class="calibre2"/>            //get the EJB by CDI    <br class="calibre2"/></span><span class="calibre5">            </span>Bean&lt;PdfHandler&gt; bean = (Bean)                                                    <br class="calibre2"/><span class="calibre5">            beanManager</span>.getBeans(PdfHandler.<span class="calibre5">class</span>).iterator().next()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>CreationalContext cCtx =    <br class="calibre2"/><span class="calibre5">             beanManager</span>.createCreationalContext(bean)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>PdfHandler pdfHandler = (PdfHandler) <br class="calibre2"/><span class="calibre5">            beanManager</span>.getReference(bean<span class="calibre5">, </span>PdfHandler.<span class="calibre5">class, </span>cCtx)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            try </span>{<br class="calibre2"/><br class="calibre2"/>              <span class="calibre5">completionStage</span>.complete(pdfHandler.handler( fileBean ))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>} <span class="calibre5">catch </span>(IOException e) {<br class="calibre2"/>                e.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">completionStage</span>.completeExceptionally(e)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>}<br class="calibre2"/><br class="calibre2"/>        })<span class="calibre5">;</span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        return </span>completionStage<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    </span>}</pre>
<p class="mce-root">In the preceding code block, <span class="calibre10">we have a <kbd class="calibre18">FileUploadResource</kbd> </span><span class="calibre10">code snippet,</span><span class="calibre10"> </span><span class="calibre10">which contains an</span> <span class="calibre10">example of the service for uploading PDFs provided by resource</span><span class="calibre10">s. This service works with asynchronous processing. To enable the method to work with an asynchronous method, we should either use <kbd class="calibre18">AsyncResponse</kbd> (</span><span class="calibre10"><kbd class="calibre18">@Suspended final AsyncResponse ar</kbd>)</span> <span class="calibre10">as a parameter of the service </span><span class="calibre10">method,</span><span class="calibre10"> or this method would need to return a</span> <kbd class="calibre18">CompletionState&lt;T&gt;</kbd> <span class="calibre10">to the client. In our example, we returned</span> <kbd class="calibre18">CompletionState</kbd> <span class="calibre10">to the client. Further, we need to create a separate thread in order to execute a nonblocking task. In the following code block, we have a code snippet of the <kbd class="calibre18">uploadPdf</kbd> method, which creates a separate task to call the task that saves the PDF file:</span></p>
<pre class="mce-root2"><span class="calibre5">executor</span>.execute(() -&gt; {<br class="calibre2"/>            FileBean fileBean = <span class="calibre5">new </span>FileBean(<span class="calibre5">file</span><span class="calibre5">, </span><span class="calibre5">"pdf"</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            </span>Bean&lt;PdfHandler&gt; bean = (Bean)     <br class="calibre2"/><span class="calibre5">            beanManager</span>.getBeans(PdfHandler.<span class="calibre5">class</span>).iterator().next()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>CreationalContext cCtx = <br class="calibre2"/><span class="calibre5">            beanManager</span>.createCreationalContext(bean)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>PdfHandler pdfHandler = (PdfHandler)  <br class="calibre2"/><span class="calibre5">            beanManager</span>.getReference(bean<span class="calibre5">, </span>PdfHandler.<span class="calibre5">class, </span>cCtx)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            try </span>{<br class="calibre2"/><br class="calibre2"/>            <span class="calibre5">completionStage</span>.complete(pdfHandler.handler( fileBean ))<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>} <span class="calibre5">catch </span>(IOException e) {<br class="calibre2"/>                e.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                </span><span class="calibre5">completionStage</span>.completeExceptionally(e)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">            </span>}<br class="calibre2"/><br class="calibre2"/>  })<span class="calibre5">;<br class="calibre2"/></span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Implementing the client API</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Now, in order to send an asynchronous request using the reactive programming, we create an example of the JAX-RS client API. In the following code, we can see an example of the client API:</p>
<pre class="calibre23"><span class="calibre5">public class ClientAPI</span><br class="calibre2"/>{<br class="calibre2"/>    <span class="calibre5">private static final </span>String <span class="calibre5">URL </span>= <span class="calibre5">"http://localhost:8080/asyncRestService/resources/upload"</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">    private static final </span>String <span class="calibre5">FILE_PATH </span>= <span class="calibre5">"test.pdf"</span><span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">    public static void </span><span class="calibre5">main</span>( String[] args ) {<br class="calibre2"/>        Client client = ClientBuilder.<span class="calibre5">newClient</span>()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        </span>WebTarget target = client.target(<span class="calibre5">URL</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        try </span>{<br class="calibre2"/>            CompletionStage&lt;String&gt; csf = target.request()<br class="calibre2"/>                    .rx()<br class="calibre2"/>                    .post(Entity.<span class="calibre5">entity</span>(<span class="calibre5">new </span>FileInputStream(<span class="calibre5">new <br class="calibre2"/></span>                    File(<span class="calibre5">FILE_PATH</span>))<span class="calibre5">,</span><span class="calibre5">"application/pdf"</span>)<span class="calibre5">,</span>String.<span class="calibre5">class</span>)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            </span>csf.whenCompleteAsync((path<span class="calibre5">, </span>err)-&gt;{<br class="calibre2"/><br class="calibre2"/>                <span class="calibre5">if</span>( Objects.<span class="calibre5">isNull</span>( err ) )<br class="calibre2"/>                    System.<span class="calibre5">out</span>.println(<span class="calibre5">"File saved on: " </span>+ path)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                else<br class="calibre2"/></span><span class="calibre5">                    </span>err.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            </span>})<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">        </span>} <span class="calibre5">catch </span>(FileNotFoundException e) {<br class="calibre2"/>            e.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">        </span>}<br class="calibre2"/>    }<br class="calibre2"/>}</pre>
<p class="mce-root">In the preceding code block, we sent a request to the server, which returned a control as soon as the request was sent. A callback method was then queued to be executed after the asynchronous processing was completed. In the following code, we have a code snippet of <kbd class="calibre18">ClientAPI</kbd>, which defines a callback method to be executed after the asynchronous processing finishes:</p>
<pre class="mce-root2"><span class="calibre5"> </span>csf.whenCompleteAsync((path<span class="calibre5">, </span>err)-&gt;{<br class="calibre2"/><br class="calibre2"/>                <span class="calibre5">if</span>( Objects.<span class="calibre5">isNull</span>( err ) )<br class="calibre2"/>                    System.<span class="calibre5">out</span>.println(<span class="calibre5">"File saved on: " </span>+ path)<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5">                else<br class="calibre2"/></span><span class="calibre5">                    </span>err.printStackTrace()<span class="calibre5">;<br class="calibre2"/></span><span class="calibre5"><br class="calibre2"/></span><span class="calibre5">            </span>})<span class="calibre5">;</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In <a href="9e35e298-1a91-43b8-ace1-805997b2b89e.xhtml" target="_blank" class="calibre14 pcalibre pcalibre3 pcalibre2 pcalibre1">Chapter 7</a>, <em class="calibre12">Microservice Patterns</em>, we explored the reactive programming paradigm and how it is implemented using Java EE 8 mechanisms. We also demonstrated how we can make asynchronous calls using Java EE 8 mechanisms, and how to control these calls and apply actions to them via asynchronous processing.</p>
<p class="mce-root"/>
<p class="mce-root">Event in CDI is a mechanism of the CDI specification that can be used in all tiers of an application. However, using this mechanism is recommended when working with a presentation tier. This is because CDI has a major focus on the presentation tier and its scopes are directly related to the HTTP interaction and HTTP session. Furthermore, we could launch an event with various elements that react to this event.</p>
<p class="mce-root">The asynchronous EJB method doesn't use the reactive programming paradigm but is an asynchronous process that makes it possible to decrease <span class="calibre10">the time it takes to respond to the client</span>. This is an EJB mechanism and it is recommended to use it at the business tier. The benefit of using this mechanism is that we can also use other EJB mechanisms, such as the transactions control.</p>
<p class="mce-root">The asynchronous REST service is a mechanism of the JAX-RS specification that is able to create a REST service that can do asynchronous processing. With this mechanism, the control of the process is returned as soon as a request is sent, and the client, therefore, doesn't need to wait a long time to process other tasks. This mechanism is always implemented <span class="calibre10">in the presentation tier.</span></p>
<p class="mce-root">In the next chapter, we will cover microservice patterns and how to implement them. We will also look at the aggregator pattern, proxy pattern, chained pattern, branch pattern, and asynchronous messaging pattern. </p>


            </article>

            
        </section>
    </div>



  </body></html>