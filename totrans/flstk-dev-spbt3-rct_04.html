<html><head></head><body>
  <div id="_idContainer072" class="Basic-Text-Frame">
    <h1 class="chapterNumber">3</h1>
    <h1 id="_idParaDest-38" class="chapterTitle">Using JPA to Create and Access a Database</h1>
    <p class="normal">This chapter covers how to use <strong class="keyWord">Jakarta Persistence API</strong> (<strong class="keyWord">JPA</strong>) with Spring Boot and how to define a database by using entity<a id="_idIndexMarker069"/> classes. In the first phase, we will be using the <strong class="keyWord">H2</strong> database. H2 is an in-memory SQL database<a id="_idIndexMarker070"/> that is good for fast development<a id="_idIndexMarker071"/> or demonstration purposes. In the second phase, we will move from H2 to <strong class="keyWord">MariaDB</strong>. This chapter also describes the creation of CRUD repositories and a one-to-many connection between database tables.</p>
    <p class="normal">In this chapter, we will cover the following topics:</p>
    <ul>
      <li class="bulletList">Basics of ORM, JPA, and Hibernate</li>
      <li class="bulletList">Creating the entity classes</li>
      <li class="bulletList">Creating CRUD repositories</li>
      <li class="bulletList">Adding relationships between tables</li>
      <li class="bulletList">Setting up the MariaDB database</li>
    </ul>
    <h1 id="_idParaDest-39" class="heading-1">Technical requirements</h1>
    <p class="normal">The Spring Boot application we created in previous chapters is required.</p>
    <p class="normal">A MariaDB installation is necessary to create the database application: <a href="https://downloads.mariadb.org/"><span class="url">https://downloads.mariadb.org/</span></a>. We went through the installation steps in <em class="chapterRef">Chapter 1</em>.</p>
    <p class="normal">The code for this chapter can be found at the following GitHub link: <a href="https://github.com/PacktPublishing/Full-Stack-Development-with-Spring-Boot-3-and-React-Fourth-Edition/tree/main/Chapter03"><span class="url">https://github.com/PacktPublishing/Full-Stack-Development-with-Spring-Boot-3-and-React-Fourth-Edition/tree/main/Chapter03</span></a>.</p>
    <h1 id="_idParaDest-40" class="heading-1">Basics of ORM, JPA, and Hibernate</h1>
    <p class="normal">ORM and JPA are widely used techniques in software development for handling relational databases. You don’t have to write complex SQL queries; instead, you can work with objects, which is more natural for Java developers. In this way, ORM and JPA can speed up your development process by reducing the time you spend writing and debugging SQL code. Many JPA implementations can also generate a database schema automatically based on your Java entity classes. In brief:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Object-Relational Mapping</strong> (<strong class="keyWord">ORM</strong>) is a technique that allows you to fetch from and manipulate<a id="_idIndexMarker072"/> a database by using an object-oriented programming paradigm. ORM is really good for programmers because it relies on object-oriented concepts rather than database structures. It also makes development much faster and reduces the amount of source code. ORM is mostly independent of databases, and developers don’t have to worry about vendor-specific SQL statements.</li>
      <li class="bulletList"><strong class="keyWord">Jakarta Persistence API</strong> (<strong class="keyWord">JPA</strong>, formerly <strong class="keyWord">Java Persistence API</strong>) provides object-relational <a id="_idIndexMarker073"/>mapping for Java developers. The JPA entity<a id="_idIndexMarker074"/> is a Java class that represents the structure of a database table. The fields of an entity class represent the columns of the database tables.</li>
      <li class="bulletList"><strong class="keyWord">Hibernate</strong> is the most popular Java-based JPA<a id="_idIndexMarker075"/> implementation and is used in Spring Boot by default. Hibernate is a mature product and is widely used in large-scale applications.</li>
    </ul>
    <p class="normal">Next, we will start to implement our first entity class using the H2 database.</p>
    <h1 id="_idParaDest-41" class="heading-1">Creating the entity classes</h1>
    <p class="normal">An <strong class="keyWord">entity class</strong> is a simple Java class<a id="_idIndexMarker076"/> that is annotated with JPA’s <code class="inlineCode">@Entity</code> annotation. Entity classes use the standard JavaBean naming convention and have proper getter and setter methods. The class fields have private visibility.</p>
    <p class="normal">JPA creates a database table with the same name as the class when the application is initialized. If you want to use some other name for the database table, you can use the <code class="inlineCode">@Table</code> annotation in your entity class.</p>
    <p class="normal">At the beginning<a id="_idIndexMarker077"/> of this chapter, we will use the H2 database (<span class="url">https://www.h2database.com/</span>), which is an embedded<a id="_idIndexMarker078"/> in-memory database. To be able to use JPA and the H2 database, we have to add the following dependencies to the <code class="inlineCode">build.gradle</code> file:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">dependencies</span> {
    implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-web'</span>
    <span class="code-highlight"><strong class="hljs-slc">implementation </strong><strong class="hljs-string-slc">'org.springframework.boot:spring-boot-starter-data-jpa'</strong></span>
    developmentOnly <span class="hljs-string">'org.springframework.boot:spring-boot-devtools'</span>
    <span class="code-highlight"><strong class="hljs-slc">runtimeOnly </strong><strong class="hljs-string-slc">'com.h2database:h2'</strong></span>
    testImplementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-test'</span>
}
</code></pre>
    <p class="normal">After you have updated the <code class="inlineCode">build.gradle</code> file, you should update your dependencies by selecting the project in Eclipse’s <strong class="screenText">Project Explorer</strong> and right-clicking to open the context menu. Then, select <strong class="screenText">Gradle | Refresh Gradle Project</strong>, as shown in the next screenshot:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_01.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.1: Refresh Gradle Project</p>
    <p class="normal">You can also enable automatic project<a id="_idIndexMarker079"/> refresh by opening the <strong class="screenText">Window | Preferences</strong> menu. Go to the <strong class="screenText">Gradle</strong> settings and there is an <strong class="screenText">Automatic Project Synchronization</strong> checkbox that you can check. Then, your project will be synchronized automatically if you make changes to your build script file. This is recommended and means you don’t have to manually refresh the project when you update your build script:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_02.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.2: Gradle wrapper settings</p>
    <p class="normal">You can find the project dependencies from the <strong class="screenText">Project and External Dependencies</strong> folder in the Eclipse <strong class="screenText">Project</strong><strong class="screenText"><a id="_idIndexMarker080"/></strong><strong class="screenText"> Explorer</strong>. Now, you should find <code class="inlineCode">spring-boot-starter-data-jpa</code> and h2 dependencies there:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_03.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.3: Project dependencies</p>
    <p class="normal">Let’s look at the following<a id="_idIndexMarker081"/> steps to create entity classes:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">To create an entity class in Spring Boot, we must create a package for entities. The package should be created under the root package. To begin this process, activate the root package in Eclipse’s <strong class="screenText">Project Explorer</strong> and right-click to make a context menu appear.</li>
      <li class="numberedList">From this menu, select <strong class="screenText">New | Package</strong>. The following screenshot shows how to create a package for entity classes:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_04.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.4: New package</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">We will name<a id="_idIndexMarker082"/> our package <code class="inlineCode">com.packt.cardatabase.domain</code>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_05.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.5: New Java package</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Next, we will create our entity class. Activate the new <code class="inlineCode">com.packt.cardatabase.domain</code> package, right-click it, and select <strong class="screenText">New | Class</strong> from the menu.</li>
      <li class="numberedList">Because we are going<a id="_idIndexMarker083"/> to create a car database, the name of the entity class will be <code class="inlineCode">Car</code>. Type <code class="inlineCode">Car</code> into the <strong class="screenText">Name</strong> field and then press the <strong class="screenText">Finish</strong> button, as shown in the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_06.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.6: New Java class</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Open the <code class="inlineCode">Car</code> class file in the editor by double-clicking it in the <strong class="screenText">Project Explorer</strong>. First, we must annotate the class with the <code class="inlineCode">@Entity</code> annotation. The <code class="inlineCode">@Entity</code> annotation is imported from the <code class="inlineCode">jakarta.persistence</code> package:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> jakarta.persistence.Entity;</strong></span>
<span class="code-highlight"><strong class="hljs-meta-slc">@Entity</strong></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> {
}
</code></pre>
    <div class="packt_tip">
      <p class="normal">You can use the <em class="keystroke">Ctrl</em> + <em class="keystroke">Shift</em> + <em class="keystroke">O</em> shortcut in the Eclipse IDE to import missing packages automatically. In some cases, there might be multiple packages that contain the same identifier, so you have to be careful to select the correct import. For example, in the next step, <code class="inlineCode">Id</code> can be found in multiple packages, but you should select <code class="inlineCode">jakarta.persistence.Id</code>.</p>
    </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Next, we must add<a id="_idIndexMarker084"/> some fields to our class. The entity class fields are mapped to database table columns. The entity class must also contain a unique ID that is used as a primary key in the database:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> jakarta.persistence.Entity;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> jakarta.persistence.GeneratedValue;</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> jakarta.persistence.GenerationType;</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import </strong><strong class="hljs-slc">jakarta.persistence.Id;</strong></span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> {
    <span class="code-highlight"><strong class="hljs-meta-slc">@Id</strong></span>
    <span class="code-highlight"><strong class="hljs-meta-slc">@GeneratedValue(strategy=GenerationType.AUTO)</strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc">private</strong><strong class="hljs-slc"> Long id;</strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc">private</strong><strong class="hljs-slc"> String brand, model, color, registrationNumber;</strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc">private</strong><strong class="hljs-slc"> </strong><strong class="hljs-slc">int modelYear, price;</strong></span>
}
</code></pre>
    <p class="normal">The primary key is defined by using the <code class="inlineCode">@Id</code> annotation. The <code class="inlineCode">@GeneratedValue</code> annotation defines that the ID is automatically generated by the database. We can also define our key generation strategy; the <code class="inlineCode">AUTO</code> type means that the JPA provider selects the best strategy for a particular database and it is also the default generation type. You can create a composite primary key by annotating multiple attributes with the <code class="inlineCode">@Id</code> annotation.</p>
    <p class="normal">The database columns are named according to class field naming conventions by default. If you want to use some other naming convention, you can use the <code class="inlineCode">@Column</code> annotation. With the <code class="inlineCode">@Column</code> annotation, you can define the column’s length and whether the column is <code class="inlineCode">nullable</code>. The following code shows an example of using the <code class="inlineCode">@Column</code> annotation. With this definition, the column’s name in the database is <code class="inlineCode">explanation</code>, the length of the column is <code class="inlineCode">512</code>, and it is not <code class="inlineCode">nullable</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">@Column(name="explanation", nullable=false, length=512)</span>
<span class="hljs-keyword">private</span> String description
</code></pre>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Finally, we must add getters, setters, a default<a id="_idIndexMarker085"/> constructor, and constructors with attributes to the entity class. We don’t need an ID field in our constructor due to automatic ID generation. The source code of the <code class="inlineCode">Car</code> entity class constructors is as follows:
    <div class="note">
      <p class="normal">Eclipse provides the automatic addition<a id="_idIndexMarker086"/> of getters, setters, and constructors. Activate your cursor in the place where you want to add the code and right-click. From the menu, select <strong class="screenText">Source | Generate Getters and Setters... </strong>or<strong class="screenText"> Source | Generate Constructor using Fields...</strong>.</p>
    </div>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// Car.java constructors</span>
<span class="hljs-keyword">public</span> <span class="hljs-title">Car</span><span class="hljs-params">()</span> {
}
<span class="hljs-keyword">public</span> <span class="hljs-title">Car</span><span class="hljs-params">(String brand, String model, String color,</span>
<span class="hljs-params">    String registrationNumber, </span><span class="hljs-type">int</span><span class="hljs-params"> modelYear, </span><span class="hljs-type">int</span><span class="hljs-params"> price)</span> {
        <span class="hljs-built_in">super</span>();
        <span class="hljs-built_in">this</span>.brand = brand;
        <span class="hljs-built_in">this</span>.model = model;
        <span class="hljs-built_in">this</span>.color = color;
        <span class="hljs-built_in">this</span>.registrationNumber = registrationNumber;
        <span class="hljs-built_in">this</span>.modelYear = modelYear;
        <span class="hljs-built_in">this</span>.price = price;
}
</code></pre>
    <p class="normal">The following is the source code for the <code class="inlineCode">Car</code> entity class’s getters and setters:</p>
    <pre class="programlisting code"><code class="hljs-code">    <span class="hljs-keyword">public</span> Long <span class="hljs-title">getId</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> id;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBrand</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> brand;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBrand</span><span class="hljs-params">(String brand)</span> {
            <span class="hljs-built_in">this</span>.brand = brand;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getModel</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> model;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setModel</span><span class="hljs-params">(String model)</span> {
            <span class="hljs-built_in">this</span>.model = model;
    }
<span class="hljs-comment">// Rest of the setters and getters. See the whole source code from GitHub</span>
</code></pre></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">We also have to add<a id="_idIndexMarker087"/> new properties to the <code class="inlineCode">application.properties</code> file. This allows us to log the SQL statements to the console. We also have to define the data source URL. Open the <code class="inlineCode">application.properties</code> file and add the following two lines to the file:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:h2:mem:testdb</span>
<span class="hljs-attr">spring.jpa.show-sql</span>=<span class="hljs-string">true</span>
</code></pre>
    <div class="note">
      <p class="normal">When you are editing the <code class="inlineCode">application.properties</code> file, you have to make sure that there are no extra spaces at the end of the lines. Otherwise, the settings won’t work. This might happen when you copy/paste settings.</p>
    </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="10">Now, the <code class="inlineCode">car</code> table will be created in the database when we run the application. At this point, we can see the table creation statements in the console:
    <figure class="mediaobject"><img src="../Images/B19818_03_07.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.7: Car table SQL statements</p>
    <div class="note">
      <p class="normal">If <code class="inlineCode">spring.datasource.url</code> is not defined in the <code class="inlineCode">application.properties</code> file, Spring Boot creates a random data source URL that can be seen in the console when you run the application; for example, <code class="inlineCode">H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:b92ad05e-8af4-4c33-b22d-ccbf9ffe491e'</code>.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="11">The H2 database<a id="_idIndexMarker088"/> provides a web-based console that can be used to explore a database and execute SQL statements. To enable the console, we have to add the following lines to the <code class="inlineCode">application.properties</code> file. The first setting enables the H2 console, while the second defines its path:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">spring.h2.console.enabled</span>=<span class="hljs-string">true</span>
<span class="hljs-attr">spring.h2.console.path</span>=<span class="hljs-string">/h2-console</span>
</code></pre>
      </li>
      <li class="numberedList">You can access the H2 console by starting your application and navigating to <code class="inlineCode">localhost:8080/h2-console</code> using your web browser. Use <code class="inlineCode">jdbc:h2:mem:testdb</code> as the <strong class="screenText">JDBC URL</strong> and leave the <strong class="screenText">Password</strong> field empty in the <strong class="screenText">Login</strong> window. Press the <strong class="screenText">Connect</strong> button to log in to the console, as shown in the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_08.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.8: H2 console login</p>
    <div class="packt_tip">
      <p class="normal">You can also change the H2 database username and password by using the following settings in the <code class="inlineCode">application.properties</code> file: <code class="inlineCode">spring.datasource.username</code> and <code class="inlineCode">spring.datasource.password</code>.</p>
    </div>
    <p class="normal">Now, you can see our <code class="inlineCode">CAR</code> table<a id="_idIndexMarker089"/> in the database. You may notice that the registration number and model year have an underscore between the words. The reason for the underscore is the camel case naming of the attribute (<code class="inlineCode">registrationNumber</code>):</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_09.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.9: H2 console</p>
    <p class="normal">Now, we have created our first entity<a id="_idIndexMarker090"/> class and learned how JPA generates a database table from the entity class. Next, we will create a repository class that provides CRUD operations.</p>
    <h1 id="_idParaDest-42" class="heading-1">Creating CRUD repositories</h1>
    <p class="normal">The Spring Boot Data JPA<a id="_idIndexMarker091"/> provides a <code class="inlineCode">CrudRepository</code> interface for <strong class="keyWord">Create</strong>, <strong class="keyWord">Read</strong>, <strong class="keyWord">Update</strong>, and <strong class="keyWord">Delete</strong> (<strong class="keyWord">CRUD</strong>) operations. It provides CRUD functionalities<a id="_idIndexMarker092"/> to our entity class.</p>
    <p class="normal">Let’s create our repository in the <code class="inlineCode">domain</code> package, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create a new interface called <code class="inlineCode">CarRepository</code> in the <code class="inlineCode">com.packt.cardatabase.domain</code> package and modify the file according to the following code snippet:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> org.springframework.data.repository.CrudRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">CarRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CrudRepository</span>&lt;Car,Long&gt; {
}
</code></pre>
    <p class="normal"><code class="inlineCode">CarRepository</code> now extends the Spring Boot JPA <code class="inlineCode">CrudRepository</code> interface. The <code class="inlineCode">&lt;Car, Long&gt;</code> type arguments define that this is the repository for the <code class="inlineCode">Car</code> entity class and that the type of the ID field is <code class="inlineCode">Long</code>.</p>
    <p class="normal">The <code class="inlineCode">CrudRepository</code> interface provides multiple CRUD methods that we can now start to use. The following table lists the most commonly used methods:</p>
    <table id="table001-1" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Method</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Description</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">long count()</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Returns the number of entities</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Iterable&lt;T&gt; findAll()</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Returns all items of a given type</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Optional&lt;T&gt; findById(ID Id)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Returns one item by ID</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">void delete(T entity)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Deletes an entity</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">void deleteAll()</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Deletes all the entities in the repository</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">&lt;S extends T&gt; save(S entity)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Saves an entity</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">List&lt;S&gt; saveAll(Iterable&lt;S&gt; entities)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Saves multiple entities</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 3.1: CRUD methods</p>
    <p class="normal">If the method returns only one item, <code class="inlineCode">Optional&lt;T&gt;</code> is returned instead of <code class="inlineCode">T</code>. The <code class="inlineCode">Optional</code> class was introduced in Java 8 SE and is a type of single-value container that either contains a value or doesn’t. If there is a value, the <code class="inlineCode">isPresent()</code> method returns <code class="inlineCode">true</code> and you can get it by using the <code class="inlineCode">get()</code> method; otherwise, it returns <code class="inlineCode">false</code>. By using <code class="inlineCode">Optional</code>, we can prevent <strong class="keyWord">null pointer exceptions</strong>. Null pointers can lead to unexpected<a id="_idIndexMarker093"/> and often undesirable behavior in Java programs.</p>
    <p class="normal">After adding the <code class="inlineCode">CarRepository</code> class, your project<a id="_idIndexMarker094"/> structure should look as follows:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_10.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.10: Project structure</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Now, we are ready to add some demonstration data to our H2 database. For that, we will use the Spring Boot <code class="inlineCode">CommandLineRunner</code> interface. The <code class="inlineCode">CommandLineRunner</code> interface allows us to execute additional code before the application has fully started. Therefore, it is a good point to add demo data to your database. Your Spring Boot application’s <code class="inlineCode">main</code> class implements the <code class="inlineCode">CommandLineRunner</code> interface. Therefore, we should implement the <code class="inlineCode">run</code> method, as shown in the following <code class="inlineCode">CardatabaseApplication.java</code> code:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> org.springframework.boot.CommandLineRunner;</strong></span>
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CardatabaseApplication</span> <span class="code-highlight"><strong class="hljs-keyword-slc">implements</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">CommandLineRunner</strong><strong class="hljs-slc"> {</strong></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run
            (CardatabaseApplication.class, args);
    }
    <span class="code-highlight"><strong class="hljs-meta-slc">@Override</strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc">public </strong><strong class="hljs-keyword-slc">void</strong><strong class="hljs-title-slc"> run</strong><strong class="hljs-slc">(String... args)</strong><strong class="hljs-keyword-slc"> throws</strong><strong class="hljs-slc"> Exception {</strong></span>
        <span class="code-highlight"><strong class="hljs-comment-slc">// Place your code here</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">}</strong></span>
<span class="code-highlight"><strong class="hljs-slc">}</strong></span>
</code></pre>
      </li>
      <li class="numberedList">Next, we have to inject<a id="_idIndexMarker095"/> our car repository into the main class to be able to save new car objects to the database. We use constructor injection to inject <code class="inlineCode">CarRepository</code>. We will also add a logger to our <code class="inlineCode">main</code> class (the code for which we saw in <em class="chapterRef">Chapter 1</em>):
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> org.slf4j.Logger;</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> org.slf4j.LoggerFactory;</strong></span>
<span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> com.packt.cardatabase.domain.Car;</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> com.packt.cardatabase.domain.CarRepository;</strong></span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CardatabaseApplication</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CommandLineRunner</span> {
    <span class="code-highlight"><strong class="hljs-keyword-slc">private static final</strong><strong class="hljs-slc"> </strong><strong class="hljs-type-slc">Logger</strong><strong class="hljs-slc"> </strong><strong class="hljs-type-slc">logger</strong><strong class="hljs-slc"> =</strong></span>
        <span class="code-highlight"><strong class="hljs-slc">LoggerFactory.getLogger(</strong></span>
            <span class="code-highlight"><strong class="hljs-slc">CardatabaseApplication.class</strong></span>
        <span class="code-highlight"><strong class="hljs-slc">);</strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc">private final</strong><strong class="hljs-slc"> CarRepository repository;</strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc">public</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">CardatabaseApplication</strong><strong class="hljs-slc">(CarRepository repository) {</strong></span>
        <span class="code-highlight"><strong class="hljs-built_in-slc">this</strong><strong class="hljs-slc">.repository = repository;</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">}</strong></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run
            (CardatabaseApplication.class, args);
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception {
      <span class="hljs-comment">// Place your code here</span>
    }
}
</code></pre>
      </li>
      <li class="numberedList">Once we have injected the repository<a id="_idIndexMarker096"/> class, we can use the CRUD methods it provides in the <code class="inlineCode">run</code> method. The following sample code shows how to insert a few cars into the database using the <code class="inlineCode">save</code> method. We will also use the repository’s <code class="inlineCode">findAll()</code> method to fetch all the cars from the database and print them to the console using the logger:
        <pre class="programlisting code"><code class="hljs-code">    <span class="hljs-comment">// CardataseApplication.java run method</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="code-highlight"><strong class="hljs-slc">repository.save(</strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">Car</strong><strong class="hljs-slc">(</strong><strong class="hljs-string-slc">"Ford"</strong><strong class="hljs-slc">, </strong><strong class="hljs-string-slc">"Mustang"</strong><strong class="hljs-slc">, </strong><strong class="hljs-string-slc">"Red"</strong><strong class="hljs-slc">,</strong></span>
                  <span class="code-highlight"><strong class="hljs-string-slc">"ADF-1121"</strong><strong class="hljs-slc">, </strong><strong class="hljs-number-slc">2023</strong><strong class="hljs-slc">, </strong><strong class="hljs-number-slc">59000</strong><strong class="hljs-slc">));</strong></span>
        <span class="code-highlight"><strong class="hljs-slc">repository.save(</strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">Car</strong><strong class="hljs-slc">(</strong><strong class="hljs-string-slc">"Nissan"</strong><strong class="hljs-slc">, </strong><strong class="hljs-string-slc">"Leaf"</strong><strong class="hljs-slc">, </strong><strong class="hljs-string-slc">"White"</strong><strong class="hljs-slc">,</strong></span>
                  <span class="code-highlight"><strong class="hljs-string-slc">"SSJ-3002"</strong><strong class="hljs-slc">, </strong><strong class="hljs-number-slc">2020</strong><strong class="hljs-slc">, </strong><strong class="hljs-number-slc">29000</strong><strong class="hljs-slc">));</strong></span>
        <span class="code-highlight"><strong class="hljs-slc">repository.save(</strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">Car</strong><strong class="hljs-slc">(</strong><strong class="hljs-string-slc">"Toyota"</strong><strong class="hljs-slc">, </strong><strong class="hljs-string-slc">"Prius"</strong><strong class="hljs-slc">,</strong></span>
                  <span class="code-highlight"><strong class="hljs-string-slc">"Silver"</strong><strong class="hljs-slc">, </strong><strong class="hljs-string-slc">"KKO-0212"</strong><strong class="hljs-slc">, </strong><strong class="hljs-number-slc">2022</strong><strong class="hljs-slc">, </strong><strong class="hljs-number-slc">39000</strong><strong class="hljs-slc">));</strong></span>
        <span class="code-highlight"><strong class="hljs-slc">// Fetch all cars and log to console</strong></span>
        <span class="code-highlight"><strong class="hljs-slc">for (Car car : repository.findAll()) {</strong></span>
            <span class="code-highlight"><strong class="hljs-slc">logger.info(</strong><strong class="hljs-string-slc">"</strong><strong class="hljs-string-slc">brand: {}, model:</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">{}"</strong><strong class="hljs-slc">,</strong></span>
                <span class="code-highlight"><strong class="hljs-slc">car.getBrand(), car.getModel());</strong></span>
        <span class="code-highlight"><strong class="hljs-slc">}</strong></span>
    }
</code></pre>
      </li>
    </ol>
    <p class="normal">The <code class="inlineCode">insert</code> statements and cars we logged can be seen in the Eclipse console once the application has been executed:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_11.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.11: Insert statements</p>
    <p class="normal">You can now use the H2 console<a id="_idIndexMarker097"/> to fetch cars from the database, as shown in the following screenshot:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_12.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.12: H2 console: Select cars</p>
    <p class="normal">You can define queries in the Spring Data repositories. A query must start with a prefix, for example, <code class="inlineCode">findBy</code>. After the prefix, you must define the entity class fields that are used in the query. The following<a id="_idIndexMarker098"/> is some sample code for three simple queries:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> org.springframework.data.repository.CrudRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">CarRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CrudRepository</span> &lt;Car, Long&gt; {
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by brand</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">List&lt;Car&gt; </strong><strong class="hljs-title-slc">findByBrand</strong><strong class="hljs-slc">(String brand);</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by color</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">List&lt;Car&gt; </strong><strong class="hljs-title-slc">findByColor</strong><strong class="hljs-slc">(String color);</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by model year</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">List&lt;Car&gt; </strong><strong class="hljs-title-slc">findByModelYear</strong><strong class="hljs-slc">(int modelYear);</strong></span>
}
</code></pre>
    <p class="normal">There can be multiple fields after the <code class="inlineCode">By</code> keyword, concatenated with the <code class="inlineCode">And</code> and <code class="inlineCode">Or</code> keywords:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> org.springframework.data.repository.CrudRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">CarRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CrudRepository</span> &lt;Car, Long&gt; {
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by brand and model</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">List&lt;Car&gt; </strong><strong class="hljs-title-slc">findByBrandAndModel</strong><strong class="hljs-slc">(String brand, String model);</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by brand or color</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">List&lt;Car&gt; </strong><strong class="hljs-title-slc">findByBrandOrColor</strong><strong class="hljs-slc">(String brand, String color);</strong></span>
}
</code></pre>
    <p class="normal">Queries can be sorted by using the <code class="inlineCode">OrderBy</code> keyword in the query method:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> org.springframework.data.repository.CrudRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">CarRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CrudRepository</span> &lt;Car, Long&gt; {
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by brand and sort by year</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">List&lt;Car&gt; </strong><strong class="hljs-title-slc">findByBrandOrderByModelYearAsc</strong><strong class="hljs-slc">(String brand);</strong></span>
}
</code></pre>
    <p class="normal">You can also create queries<a id="_idIndexMarker099"/> by using SQL statements via the <code class="inlineCode">@Query</code> annotation. The following example shows the usage of a SQL query in <code class="inlineCode">CrudRepository</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> java.util.List;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> org.springframework.data.jpa.repository.Query;</strong></span>
<span class="hljs-keyword">import</span> org.springframework.data.repository.CrudRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">CarRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CrudRepository</span> &lt;Car, Long&gt; {
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by brand using SQL</strong></span>
    <span class="code-highlight"><strong class="hljs-meta-slc">@Query("select c from Car c where c.brand = ?1")</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">List&lt;Car&gt; </strong><strong class="hljs-title-slc">findByBrand</strong><strong class="hljs-slc">(String brand);</strong></span>
}
</code></pre>
    <p class="normal">With the <code class="inlineCode">@Query</code> annotation, you can use more advanced expressions, such as <code class="inlineCode">like</code>. The following example shows the usage of the <code class="inlineCode">like</code> query in <code class="inlineCode">CrudRepository</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> java.util.List;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> org.springframework.data.jpa.repository.Query;</strong></span>
<span class="hljs-keyword">import</span> org.springframework.data.repository.CrudRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">CarRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CrudRepository</span> &lt;Car, Long&gt; {
    <span class="code-highlight"><strong class="hljs-slc">// Fetch cars by brand using SQL</strong></span>
    <span class="code-highlight"><strong class="hljs-meta-slc">@Query("select c from Car c where c.brand like %?1")</strong></span>
    List&lt;Car&gt; <span class="hljs-title">findByBrandEndsWith</span><span class="hljs-params">(String brand)</span>;
}
</code></pre>
    <div class="note">
      <p class="normal">If you use the <code class="inlineCode">@Query</code> annotation and write SQL queries in your code, your application might be less portable across different database systems.</p>
    </div>
    <p class="normal">Spring Data JPA also provides <code class="inlineCode">PagingAndSortingRepository</code>, which extends <code class="inlineCode">CrudRepository</code>. This offers methods to fetch entities using pagination and sorting. This is a good option if you are dealing with larger amounts of data because you don’t have to return everything from a large result set. You can also sort your data into some meaningful order. <code class="inlineCode">PagingAndSortingRepository</code> can be created in a similar way to how we created <code class="inlineCode">CrudRepository</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> org.springframework.data.repository.PagingAndSortingRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">CarRepository</span> <span class="hljs-keyword">extends</span>
<span class="hljs-title">    PagingAndSortingRepository</span> &lt;Car, Long&gt; {
    }
</code></pre>
    <p class="normal">In this case, you now have the two new additional methods that the repository provides:</p>
    <table id="table002" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Method</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord">Description</strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Iterable&lt;T&gt; findAll(Sort sort)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Returns all entities sorted by the given options</p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode">Page&lt;T&gt; findAll(Pageable pageable)</code></p>
          </td>
          <td class="table-cell">
            <p class="normal">Returns all entities according to the given paging options</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="packt_figref">Table 3.2: PagingAndSortingRepository methods</p>
    <p class="normal">At this point, we have<a id="_idIndexMarker100"/> completed our first database table and we are ready to add relationships between the database tables.</p>
    <h1 id="_idParaDest-43" class="heading-1">Adding relationships between tables</h1>
    <p class="normal">We will create<a id="_idIndexMarker101"/> a new table called <code class="inlineCode">owner</code> that has a one-to-many relationship<a id="_idIndexMarker102"/> with the <code class="inlineCode">car</code> table. In this case, a one-to-many relationship means that the owner can own multiple cars, but<a id="_idIndexMarker103"/> a car can only have one owner. </p>
    <p class="normal">The following <strong class="keyWord">Unified Modeling Language</strong> (<strong class="keyWord">UML</strong>) diagram shows the relationship between the tables:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_13.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.13: One-to-many relationship</p>
    <p class="normal">The following<a id="_idIndexMarker104"/> are the steps<a id="_idIndexMarker105"/> to create a new table:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">First, we must create the <code class="inlineCode">Owner</code> entity and repository classes in the <code class="inlineCode">com.packt.cardatabase.domain</code> package. The <code class="inlineCode">Owner</code> entity and repository are created in a similar way to the <code class="inlineCode">Car</code> class.
    <p class="normal">The following is the source code for the <code class="inlineCode">Owner</code> entity class:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// Owner.java</span>
<span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> jakarta.persistence.Entity;
<span class="hljs-keyword">import</span> jakarta.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> jakarta.persistence.GenerationType;
<span class="hljs-keyword">import</span> jakarta.persistence.Id;
<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Owner</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long ownerid;
    <span class="hljs-keyword">private</span> String firstname, lastname;
    <span class="hljs-keyword">public</span> <span class="hljs-title">Owner</span><span class="hljs-params">()</span> {
    }
    <span class="hljs-keyword">public</span> <span class="hljs-title">Owner</span><span class="hljs-params">(String firstname, String lastname)</span> {
        <span class="hljs-built_in">super</span>();
        <span class="hljs-built_in">this</span>.firstname = firstname;
        <span class="hljs-built_in">this</span>.lastname = lastname;
    }
    <span class="hljs-keyword">public</span> Long <span class="hljs-title">getOwnerid</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ownerid;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getFirstname</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> firstname;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setFirstname</span><span class="hljs-params">(String firstname)</span> {
        <span class="hljs-built_in">this</span>.firstname = firstname;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getLastname</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> lastname;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setLastname</span><span class="hljs-params">(String lastname)</span> {
        <span class="hljs-built_in">this</span>.lastname = lastname;
    }
}
</code></pre>
    <p class="normal">The following<a id="_idIndexMarker106"/> is the source code<a id="_idIndexMarker107"/> for <code class="inlineCode">OwnerRepository</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// OwnerRepository.java</span>
<span class="hljs-keyword">package</span> com.packt.cardatabase.domain;
<span class="hljs-keyword">import</span> org.springframework.data.repository.CrudRepository;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">OwnerRepository</span> <span class="hljs-keyword">extends</span> 
<span class="hljs-title">    CrudRepository</span>&lt;Owner, Long&gt; {
    }
</code></pre></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Now, we should check that everything is working. Run the project and check that both database tables have been created and that there are no errors in the console. The following screenshot shows the console messages when the tables are created:
    <figure class="mediaobject"><img src="../Images/B19818_03_14.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.14: The car and owner tables</p>
    <p class="normal">Now, our domain package<a id="_idIndexMarker108"/> contains two entity<a id="_idIndexMarker109"/> classes and repositories:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_15.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.15: The Project Explorer</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">The one-to-many relationship can be added by using the <code class="inlineCode">@ManyToOne</code> and <code class="inlineCode">@OneToMany</code> annotations (<code class="inlineCode">jakarta.persistence</code>). In the car entity class, which contains a foreign key, you must define<a id="_idIndexMarker110"/> the relationship with the <code class="inlineCode">@ManyToOne</code> annotation. You should <a id="_idIndexMarker111"/>also add the getter and setter for the owner field. It is recommended that you use <code class="inlineCode">FetchType.LAZY</code> for all associations. For the <code class="inlineCode">toMany</code> relationships, that is the default value, but for the <code class="inlineCode">toOne</code> relationships, you should define it. <code class="inlineCode">FetchType</code> defines the strategy for fetching data from the database. The value can be either <code class="inlineCode">EAGER</code> or <code class="inlineCode">LAZY</code>. In our case, the <code class="inlineCode">LAZY</code> strategy means that when the owner is fetched from the database, the cars associated with the owner will be fetched <em class="italic">when needed</em>. <code class="inlineCode">EAGER</code> means that the cars will be fetched immediately by the owner. The following source code shows how to define a one-to-many relationship in the <code class="inlineCode">Car</code> class:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// Car.java</span>
<span class="hljs-meta">@ManyToOne(fetch=FetchType.LAZY)</span>
<span class="hljs-meta">@JoinColumn(name="owner")</span>
<span class="hljs-keyword">private</span> Owner owner;
<span class="hljs-comment">// Getter and setter</span>
<span class="hljs-keyword">public</span> Owner <span class="hljs-title">getOwner</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> owner;
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOwner</span><span class="hljs-params">(Owner owner)</span> {
    <span class="hljs-built_in">this</span>.owner = owner;
}
</code></pre>
      </li>
      <li class="numberedList">On the owner entity site, the relationship is defined with the <code class="inlineCode">@OneToMany</code> annotation. The type of field is <code class="inlineCode">List&lt;Car&gt;</code> because an owner may have multiple cars. Add the getter and setter for this, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// Owner.java</span>
<span class="hljs-meta">@OneToMany(cascade=CascadeType.ALL, mappedBy="owner")</span>
<span class="hljs-keyword">private</span> List&lt;Car&gt; cars;
    
<span class="hljs-keyword">public</span> List&lt;Car&gt; <span class="hljs-title">getCars</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> cars;
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCars</span><span class="hljs-params">(List&lt;Car&gt; cars)</span> {
    <span class="hljs-built_in">this</span>.cars = cars;
}
</code></pre>
    <p class="normal">The <code class="inlineCode">@OneToMany</code> annotation has two attributes that we are using. The <code class="inlineCode">cascade</code> attribute defines how cascading affects the entities in the case of deletions or updates. The <code class="inlineCode">ALL</code> attribute setting means that all operations are cascaded. For example, if the owner is deleted, the cars that are linked to that owner are deleted as well. The <code class="inlineCode">mappedBy="owner"</code> attribute setting tells us that the <code class="inlineCode">Car</code> class has the <code class="inlineCode">owner</code> field, which is the foreign key for this relationship.</p>
    <p class="normal">When you run the project, by looking<a id="_idIndexMarker112"/> in the console, you will see<a id="_idIndexMarker113"/> that the relationship has been created:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_16.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.16: Console</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Now, we can add some owners to the database with <code class="inlineCode">CommandLineRunner</code>. Let’s also modify the <code class="inlineCode">Car</code> entity class constructor and add an <code class="inlineCode">owner</code> object there:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// Car.java constructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-title">Car</span><span class="hljs-params">(String brand, String model, String color, </span>
<span class="hljs-params">           String registrationNumber, </span><span class="hljs-type">int</span><span class="hljs-params"> modelYear, </span><span class="hljs-type">int</span><span class="hljs-params"> price,</span>
<span class="hljs-params">           </span><span class="code-highlight"><strong class="hljs-slc">Owner owner</strong></span><span class="hljs-params">)</span> 
{
    <span class="hljs-built_in">super</span>();
    <span class="hljs-built_in">this</span>.brand = brand;
    <span class="hljs-built_in">this</span>.model = model;
    <span class="hljs-built_in">this</span>.color = color;
    <span class="hljs-built_in">this</span>.registrationNumber = registrationNumber;
    <span class="hljs-built_in">this</span>.modelYear = modelYear;
    <span class="hljs-built_in">this</span>.price = price;
    <span class="code-highlight"><strong class="hljs-built_in-slc">this</strong><strong class="hljs-slc">.owner = owner;</strong></span>
}
</code></pre>
      </li>
      <li class="numberedList">First, we will create two owner objects and save these to the database using the repository’s <code class="inlineCode">saveAll</code> method, which we can use to save multiple entities at once. To save the owners, we have to inject <code class="inlineCode">OwnerRepository</code> into the main class. Then, we must connect the owners to the cars by using the <code class="inlineCode">Car</code> constructor. First, let’s modify the <code class="inlineCode">CardatabaseApplication</code> class by adding the following imports:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// CardatabaseApplication.java</span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> com.packt.cardatabase.domain.Owner;</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> com.packt.cardatabase.domain.OwnerRepository;</strong></span>
</code></pre>
      </li>
      <li class="numberedList">Now, let’s also inject <code class="inlineCode">OwnerRepository</code> into the <code class="inlineCode">CardatabaseApplication</code> class using constructor injection:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> CarRepository repository;
<span class="code-highlight"><strong class="hljs-keyword-slc">private </strong><strong class="hljs-keyword-slc">final</strong><strong class="hljs-slc"> OwnerRepository orepository;</strong></span>
<span class="hljs-keyword">public</span> <span class="hljs-title">CardatabaseApplication</span><span class="hljs-params">(CarRepository repository,</span>
                              <span class="code-highlight"><strong class="hljs-slc">OwnerRepository orepository)</strong></span> 
{
    <span class="hljs-built_in">this</span>.repository = repository;
    <span class="code-highlight"><strong class="hljs-built_in-slc">this</strong><strong class="hljs-slc">.orepository = orepository;</strong></span>
}
</code></pre>
      </li>
      <li class="numberedList">At this point, we must<a id="_idIndexMarker114"/> modify the <code class="inlineCode">run</code> method<a id="_idIndexMarker115"/> to save owners and link owners and cars:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception {
<span class="hljs-comment">    </span><span class="code-highlight"><strong class="hljs-comment-slc">// Add owner objects and save these to db</strong></span>
<span class="hljs-type">    </span><span class="code-highlight"><strong class="hljs-variable-slc">Owner owner1</strong><strong class="hljs-slc"> = </strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-title-slc"> Owner</strong><strong class="hljs-slc">(</strong><strong class="hljs-string-slc">"John"</strong><strong class="hljs-slc"> , </strong><strong class="hljs-string-slc">"Johnson"</strong><strong class="hljs-slc">);</strong></span>
<span class="hljs-type">    </span><span class="code-highlight"><strong class="hljs-variable-slc">Owner owner2</strong><strong class="hljs-slc"> = </strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-title-slc"> Owner</strong><strong class="hljs-slc">(</strong><strong class="hljs-string-slc">"Mary"</strong><strong class="hljs-slc"> , </strong><strong class="hljs-string-slc">"Robinson"</strong><strong class="hljs-slc">);</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">orepository.saveAll(Arrays.asList(owner1, owner2));</strong></span>
    repository.save(<span class="hljs-keyword">new</span> <span class="hljs-title">Car</span>(<span class="hljs-string">"Ford"</span>, <span class="hljs-string">"Mustang"</span>, <span class="hljs-string">"Red"</span>,
                            <span class="hljs-string">"ADF-1121"</span>, <span class="hljs-number">2023</span>, <span class="hljs-number">59000</span><span class="code-highlight"><strong class="hljs-slc">, owner1</strong></span>));
    repository.save(<span class="hljs-keyword">new</span> <span class="hljs-title">Car</span>(<span class="hljs-string">"Nissan"</span>, <span class="hljs-string">"Leaf"</span>, <span class="hljs-string">"White"</span>,
                            <span class="hljs-string">"SSJ-3002"</span>, <span class="hljs-number">2020</span>, <span class="hljs-number">29000</span><span class="code-highlight"><strong class="hljs-slc">, owner2</strong></span>));
    repository.save(<span class="hljs-keyword">new</span> <span class="hljs-title">Car</span>(<span class="hljs-string">"Toyota"</span>, <span class="hljs-string">"Prius"</span>, <span class="hljs-string">"Silver"</span>,
                            <span class="hljs-string">"KKO-0212"</span>, <span class="hljs-number">2022</span>, <span class="hljs-number">39000</span><span class="code-highlight"><strong class="hljs-slc">, owner2</strong></span>));
    <span class="hljs-comment">// Fetch all cars and log to console</span>
    <span class="hljs-keyword">for</span> (Car car : repository.findAll()) 
      {
        logger.info(<span class="hljs-string">"brand: {}, model: {}"</span>, car.getBrand(), 
        car.getModel());
      }
}
</code></pre>
      </li>
      <li class="numberedList">Now, if you run the application<a id="_idIndexMarker116"/> and fetch cars from the<a id="_idIndexMarker117"/> database, you will see that the owners are now linked to the cars:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_17.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.17: OneToMany relationship</p>
    <p class="normal">If you want to create a many-to-many relationship instead, which means, in practice, that an owner can have multiple cars and a car can have multiple owners, you should use the <code class="inlineCode">@ManyToMany</code> annotation. In our example application, we will use a one-to-many relationship. The code that you have completed here will be needed in the next chapter.</p>
    <p class="normal">Next, you will learn how to change the relationship to many-to-many. In a many-to-many relationship, it is recommended that you use <code class="inlineCode">Set</code> instead of <code class="inlineCode">List</code> with Hibernate:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">In the <code class="inlineCode">Car</code> entity class’s many-to-many relationship, define the getters and setters in the following way:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// Car.java</span>
<span class="hljs-meta">@ManyToMany(mappedBy="cars")</span>
<span class="hljs-keyword">private</span> Set&lt;Owner&gt; owners = <span class="hljs-keyword">new</span> <span class="hljs-title">HashSet</span>&lt;Owner&gt;();
<span class="hljs-keyword">public</span> Set&lt;Owner&gt; <span class="hljs-title">getOwners</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> owners;
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOwners</span><span class="hljs-params">(Set&lt;Owner&gt; owners)</span> {
    <span class="hljs-built_in">this</span>.owners = owners;
}
</code></pre>
      </li>
      <li class="numberedList">In the <code class="inlineCode">Owner</code> entity class, the<a id="_idIndexMarker118"/> many-to-many relationship<a id="_idIndexMarker119"/> is defined as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// Owner.java</span>
<span class="hljs-meta">@ManyToMany(cascade=CascadeType.PERSIST)</span>
<span class="hljs-meta">@JoinTable(name="car_owner",joinColumns = </span>
<span class="hljs-meta">        {</span>
<span class="hljs-meta">        @JoinColumn(name="ownerid") },</span>
<span class="hljs-meta">        inverseJoinColumns = </span>
<span class="hljs-meta">        {</span>
<span class="hljs-meta">        @JoinColumn(name="id") }</span>
<span class="hljs-meta">)</span>
<span class="hljs-keyword">private</span> Set&lt;Car&gt; cars = <span class="hljs-keyword">new</span> <span class="hljs-title">HashSet</span>&lt;Car&gt;();
<span class="hljs-keyword">public</span> Set&lt;Car&gt; <span class="hljs-title">getCars</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> cars;
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCars</span><span class="hljs-params">(Set&lt;Car&gt; cars)</span> {
    <span class="hljs-built_in">this</span>.cars = cars;
}
</code></pre>
      </li>
      <li class="numberedList">Now, if you run the<a id="_idIndexMarker120"/> application, there will be a new <strong class="keyWord">join table</strong> called <code class="inlineCode">car_owner</code> that is created between the car and owner tables. The join table is a special kind of table that manages the many-to-many relationship between two tables. 
    <p class="normal">The join table is defined by using the <code class="inlineCode">@JoinTable</code> annotation. With this annotation, we can set the name of the join table and join columns. The following screenshot shows the database structure when using a many-to-many relationship:</p>
    <figure class="mediaobject"><img src="../Images/B19818_03_18.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.18: Many-to-many relationship</p>
    <p class="normal">Now, the database<a id="_idIndexMarker121"/> UML diagram looks <a id="_idIndexMarker122"/>as follows:</p>
    <p class="packt_figref"><img src="../Images/B19818_03_19.png" alt="" role="presentation"/></p>
    <p class="packt_figref">Figure 3.19: Many-to-many relationship</p></li>
    </ol>
    <p class="normal">We have used an in-memory H2 database in the chapter so far. In the next section, we will be using<a id="_idIndexMarker123"/> a one-to-many <a id="_idIndexMarker124"/>relationship, so <em class="italic">change your code back if you followed the previous many-to-many example</em>.</p>
    <p class="normal">Next, we are going to look at how to use a MariaDB database instead.</p>
    <h1 id="_idParaDest-44" class="heading-1">Setting up a MariaDB database</h1>
    <p class="normal">Now, we will switch<a id="_idIndexMarker125"/> the database we are using from H2 to MariaDB. H2 is a good database for test and demonstration purposes, but MariaDB is a better option for a proper production database when applications require performance, reliability, and scalability.</p>
    <p class="normal">In this book, we are using MariaDB version 10. The database tables are still created automatically by JPA. However, before we run our application, we have to create a database for it.</p>
    <div class="packt_tip">
      <p class="normal">In this section, we will be using the one-to-many relationship from the previous section.</p>
    </div>
    <p class="normal">The database can be created using HeidiSQL (or DBeaver, if you are using Linux or macOS). Open HeidiSQL and follow these steps:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Activate the top database connection name (<strong class="screenText">Unnamed</strong>) and right-click it.</li>
      <li class="numberedList">Then, select <strong class="screenText">Create new | Database</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_20.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.20: Create new database</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Let’s name<a id="_idIndexMarker126"/> our database <code class="inlineCode">cardb</code>. After clicking <strong class="screenText">OK</strong>, you should see the new <code class="inlineCode">cardb</code> database in the database list:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_21.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.21: The cardb database</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">In Spring Boot, add a MariaDB Java client dependency to the <code class="inlineCode">build.gradle</code> file and remove the H2 dependency since we don’t need it anymore. Remember to refresh your Gradle project after you have modified your <code class="inlineCode">build.gradle</code> file:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">dependencies</span> {
    implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-web'</span>
    implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-jpa'</span>
    developmentOnly <span class="hljs-string">'org.springframework.boot:spring-boot-devtools'</span>
    <span class="code-highlight"><strong class="hljs-slc">runtimeOnly </strong><strong class="hljs-string-slc">'org.mariadb.jdbc:mariadb-java-client'</strong></span>
    testImplementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-test'</span>
}
</code></pre>
      </li>
      <li class="numberedList">In the <code class="inlineCode">application.properties</code> file, you must define the database<a id="_idIndexMarker127"/> connection for MariaDB. In this phase, you should remove the old H2 database settings. First, you must define the database’s URL, username, password (defined in <em class="chapterRef">Chapter 1</em>), and database driver class:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mariadb://localhost:3306/cardb</span>
<span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span>
<span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">YOUR_PASSWORD</span>
<span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">org.mariadb.jdbc.Driver</span>
</code></pre>
    <div class="note">
      <p class="normal">In this example, we are using the database root user, but in production, you should create a user for your database that doesn’t have all root database rights.</p>
    </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Add the <code class="inlineCode">spring.jpa.generate-ddl</code> setting, which defines whether JPA should initialize the database (<code class="inlineCode">true</code>/<code class="inlineCode">false</code>). Also add the <code class="inlineCode">spring.jpa.hibernate.ddl-auto</code> setting, which defines the behavior of the database initialization:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mariadb://localhost:3306/cardb</span>
<span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span>
<span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">YOUR_PASSWORD</span>
<span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">org.mariadb.jdbc.Driver</span>
<span class="code-highlight"><strong class="hljs-attr-slc">spring.jpa.generate-ddl</strong><strong class="hljs-slc">=</strong><strong class="hljs-string-slc">true</strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc">spring.jpa.hibernate.ddl-auto</strong><strong class="hljs-slc">=</strong><strong class="hljs-string-slc">create-drop</strong></span>
</code></pre>
    <p class="normal">The possible values for <code class="inlineCode">spring.jpa.hibernate.ddl-auto</code> are <code class="inlineCode">none</code>, <code class="inlineCode">validate</code>, <code class="inlineCode">update</code>, <code class="inlineCode">create</code>, and <code class="inlineCode">create-drop</code>. The default value depends on your database. If you are using an embedded database such as H2, the default value is <code class="inlineCode">create-drop</code>; otherwise, the default value is <code class="inlineCode">none</code>. <code class="inlineCode">create-drop</code> means that the database is created when an application starts, and it is dropped when the application is stopped. The <code class="inlineCode">create</code> value only creates the database when the application is started. The <code class="inlineCode">update</code> value creates the database and updates the schema if it has changed.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Check that the MariaDB database<a id="_idIndexMarker128"/> server is running and restart your Spring Boot application. After running the application, you should see the tables in MariaDB. You might have to refresh the database tree in HeidiSQL first by pressing the <em class="keystroke">F5</em> key. The following screenshot shows the HeidiSQL user interface once the database has been created:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B19818_03_22.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 3.22: MariaDB cardb You can also run SQL queries in HeidiSQL.</p>
    <p class="normal">Now, your application<a id="_idIndexMarker129"/> is ready to use with MariaDB.</p>
    <h1 id="_idParaDest-45" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we used JPA to create our Spring Boot application database. First, we created entity classes, which are mapped to database tables. </p>
    <p class="normal">Then, we created a <code class="inlineCode">CrudRepository</code> for our entity class, which provides CRUD operations for the entity. After that, we managed to add some demo data to our database by using <code class="inlineCode">CommandLineRunner</code>. We also created one-to-many relationships between two entities. At the beginning of this chapter, we used the H2 in-memory database, and we switched the database to MariaDB at the end.</p>
    <p class="normal">In the next chapter, we will create a RESTful web service for our backend. We will also look at testing the RESTful web service with the cURL command-line tool and the Postman GUI.</p>
    <h1 id="_idParaDest-46" class="heading-1">Questions</h1>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">What are ORM, JPA, and Hibernate?</li>
      <li class="numberedList">How can you create an entity class?</li>
      <li class="numberedList">How can you create a <code class="inlineCode">CrudRepository</code>?</li>
      <li class="numberedList">What does a <code class="inlineCode">CrudRepository</code> provide for your application?</li>
      <li class="numberedList">How can you create a one-to-many relationship between tables?</li>
      <li class="numberedList">How can you add demo data to a database with Spring Boot?</li>
      <li class="numberedList">How can you access the H2 console?</li>
      <li class="numberedList">How can you connect your Spring Boot application to MariaDB?</li>
    </ol>
    <h1 id="_idParaDest-47" class="heading-1">Further reading</h1>
    <p class="normal">Packt has other resources for learning more about MariaDB, Hibernate, and JPA:</p>
    <ul>
      <li class="bulletList"><em class="italic">Getting Started with MariaDB</em>, by Daniel Bartholomew (<a href="https://www.packtpub.com/product/getting-started-with-mariadb/9781785284120"><span class="url">https://www.packtpub.com/product/getting-started-with-mariadb/9781785284120</span></a>)</li>
      <li class="bulletList"><em class="italic">Master Hibernate and JPA with Spring Boot in 100 Steps [Video]</em>, by In28Minutes Official (<a href="https://www.packtpub.com/product/master-hibernate-and-jpa-with-spring-boot-in-100-steps-video/9781788995320"><span class="url">https://www.packtpub.com/product/master-hibernate-and-jpa-with-spring-boot-in-100-steps-video/9781788995320</span></a>)</li>
    </ul>
    <h1 class="heading-1">Learn more on Discord</h1>
    <p class="normal">To join the Discord community for this book – where you can share feedback, ask the author questions, and learn about new releases – follow the QR code below:</p>
    <p class="normal"><a href="https://packt.link/FullStackSpringBootReact4e"><span class="url">https://packt.link/FullStackSpringBootReact4e</span></a></p>
    <p class="normal"><img src="../Images/QR_Code107961080093826401.png" alt="" role="presentation"/></p>
  </div>
</body></html>