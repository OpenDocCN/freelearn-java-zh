<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Using the Management Interfaces"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Using the Management Interfaces</h1></div></div></div><p>In this chapter, we will describe the management tools available with WildFly, which can be used to control your application server instances.</p><p>WildFly provides several administration channels. One of them is the CLI, which contains many unique features that make it convenient for daily system administration and for monitoring application server resources.</p><p>The management tools<a id="id776" class="indexterm"/> also include a web admin console that offers an elegant view of the application server subsystems, allowing you to perform administrative tasks in a simple way.</p><p>Within this chapter, we will describe the following management tools:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The command-line interface (CLI)</li><li class="listitem" style="list-style-type: disc">The web admin console</li></ul></div><p>We will also cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Creating and modifying datasources</li><li class="listitem" style="list-style-type: disc">Getting help from the CLI</li><li class="listitem" style="list-style-type: disc">Batch scripting</li><li class="listitem" style="list-style-type: disc">Configuring server profiles</li><li class="listitem" style="list-style-type: disc">Adding JMS destinations</li><li class="listitem" style="list-style-type: disc">Configuring JMS destinations</li><li class="listitem" style="list-style-type: disc">Configuring socket-binding groups</li><li class="listitem" style="list-style-type: disc">Choosing between the CLI and web console</li></ul></div><div class="section" title="The command-line interface (CLI)"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec34"/>The command-line interface (CLI)</h1></div></div></div><p>Terminals <a id="id777" class="indexterm"/>and consoles were one of the earliest types of communication interfaces between a system administrator and the machine. Due <a id="id778" class="indexterm"/>to this long-time presence, most system administrators prefer to use the raw power of the command line to perform management tasks. One of the most evident advantages of using a low-level interface, such as a shell, is that tasks can often be executed as a part of batch processing or macros for repetitive actions.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip24"/>Tip</h3><p>As we indicated at the beginning of this book, the CLI is located in the <code class="literal">JBOSS_HOME/bin</code> folder and wrapped by <code class="literal">jboss-cli.sh</code> (for Windows users, it's <code class="literal">jboss-cli.bat</code>).</p></div></div><p>By launching the shell script, you will start with a disconnected session. You can connect at any time with the <code class="literal">connect [standalone/domain controller]</code> command, which, by default, connects to a server controller located at <code class="literal">localhost</code> on port <code class="literal">9990</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>You are disconnected at the moment. Type 'connect' to connect to the server or 'help' for the list of supported commands.</strong></span>
<span class="strong"><strong>[disconnected /] connect</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 /]</strong></span>
</pre></div><p>You can adjust the default port where the native interface is running by modifying the line highlighted in the following code snippet, which is found within the <code class="literal">standalone.xml</code> or <code class="literal">domain.xml</code> configuration file:</p><div class="informalexample"><pre class="programlisting">&lt;management-interfaces&gt;
   
   &lt;http-interface security-realm="ManagementRealm" http-upgrade-enabled="true"&gt;
       &lt;socket-binding http="management-http"/&gt;
   &lt;/http-interface&gt;
 &lt;/management-interfaces&gt;
 
 &lt;socket-binding-group name="standard-sockets" default-interface="public" port-offset="0"&gt;
...
 
<span class="strong"><strong> &lt;socket-binding name="management-http" interface="management" port="9990"/&gt;</strong></span>
<span class="strong"><strong> &lt;socket-binding name="management-https" interface="management" port="9993"/&gt;</strong></span>
...
&lt;/socket-binding-group&gt;</pre></div><p>As you can see from the preceding code snippet, the socket management alias is defined within the <code class="literal">management-interfaces</code> section, while the corresponding port is contained in the <code class="literal">socket-binding</code> section.</p><p>A handy <a id="id779" class="indexterm"/>switch is <code class="literal">--connect</code>, which can be used to automatically connect to your standalone/domain controller when starting the CLI, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$JBOSS_HOME/bin/jboss-cli.sh --connect</strong></span>
</pre></div><p>On a Windows machine, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$JBOSS_HOME/bin/jboss-cli.bat --connect</strong></span>
</pre></div><p>The corresponding command for exiting the CLI is either <code class="literal">quit</code> or <code class="literal">exit</code>, which closes the connection to the main controller:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] quit</strong></span>
</pre></div><div class="section" title="Reloading the server configuration"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec84"/>Reloading the server configuration</h2></div></div></div><p>While most<a id="id780" class="indexterm"/> changes made to the configuration via the command line take effect immediately, some changes do not and require a reload of the server configuration, for example, changing the socket-binding groups. To reload the server configuration, you need to issue the <code class="literal">:reload</code> command, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] :reload</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; undefined</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div></div><div class="section" title="Employing the CLI"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec85"/>Employing the CLI</h2></div></div></div><p>One of the<a id="id781" class="indexterm"/> most interesting features of the CLI is its ability to autocomplete, which helps you find the correct spelling of resources and commands. This can be achieved by simply pressing the <span class="emphasis"><em>Tab</em></span> key. You can even use it to find out the parameters needed for a particular command, without the need to go through the reference manual.</p><p>This guides us to the first part of our journey, where we will learn the available commands. So, once you have successfully connected, press the <span class="emphasis"><em>Tab</em></span> key, and it will list the options available to you. The following screenshot shows the output:</p><div class="mediaobject"><img src="graphics/6232OS_07_01.jpg" alt="Employing the CLI"/></div><p>As you can see, there<a id="id782" class="indexterm"/> are over 30 options available. We can, however, group all the interactions that occur with the CLI into two broad categories:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Operations</strong></span>: These<a id="id783" class="indexterm"/> include the resource paths (addresses) on which they are executed.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Commands</strong></span>: These<a id="id784" class="indexterm"/> execute an action independently from the path of the current resource. These don't include the resource path.</li></ul></div><div class="section" title="Navigating through the resources and executing operations"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec58"/>Navigating through the resources and executing operations</h3></div></div></div><p>Operations <a id="id785" class="indexterm"/>are strictly bound to an application server resource path. The path along the tree of resources is represented by the <code class="literal">/</code> character, which, as it is, represents the root of the tree, as it does in Unix filesystems.</p><p>When <a id="id786" class="indexterm"/>executing operations on the server's resources, you have to use a well-defined syntax:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[node-type=node-name (,node-type=node-name)*] : operation-name [( [parameter-name=parameter-value (,parameter-name=parameter-value)*] )]</strong></span>
</pre></div><p>It looks a bit awkward at first glance; however, we will try to demystify it with the following example:</p><div class="informalexample"><pre class="programlisting">[standalone@localhost:9990 /] <span class="strong"><strong>/subsystem=deployment-scanner/scanner=default:write-attribute(name=scan-interval,value=2500)</strong></span>
{"outcome" =&gt; "success"}</pre></div><p>Here, we tell the CLI to navigate to the <code class="literal">deployment-scanner</code> subsystem under the default scanner resource and set the <code class="literal">scan-interval</code> attribute to <code class="literal">2500</code> ms using the <code class="literal">write-attribute</code> operation.</p><p>This example <a id="id787" class="indexterm"/>also shows the distinction between resources, attributes, and operations.</p><p>A resource is <a id="id788" class="indexterm"/>an element of the configuration that is located under a path. All elements that are classified as resources can be managed through WildFly's interfaces. For example, <code class="literal">deployment-scanner</code> is a resource located under the <code class="literal">subsystem</code> path. It has a child element named <code class="literal">default</code> scanner (when no name attribute is specified, the name defaults to <code class="literal">default</code>). On a single resource or on child resources, you can invoke some operations, such as reading or writing the value of an attribute (<code class="literal">scan-interval</code>).</p><p>Finally, note that operations are introduced by the <code class="literal">:</code> prefix, while resources are introduced by the <code class="literal">/</code> character. The following is a screenshot that helps you consolidate the basic concepts:</p><div class="mediaobject"><img src="graphics/6232OS_07_02.jpg" alt="Navigating through the resources and executing operations"/></div><p>In order to move through the resource path, you can either state the full tree path (as in the earlier example) or use the <code class="literal">cd</code> command or the equivalent <code class="literal">cn</code> (change node) command to navigate to the path and then issue the desired command. For example, the previous code snippet can also be rewritten as:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] cd /subsystem=deployment-scanner/scanner=default</strong></span>

<span class="strong"><strong>[standalone@localhost:9990 scanner=default] :write-attribute(name=scan-interval,value=2500)</strong></span>
<span class="strong"><strong>{"outcome" =&gt; "success"}</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip25"/>Tip</h3><p>
<span class="strong"><strong>Do attributes modified by the CLI survive a server restart?</strong></span>
</p><p>When using CLI, every change is persisted into the server configuration file. This means you must be careful when changing the server's configuration via the CLI. To play it safe, it would be wise to take a snapshot of your server configuration before making large changes. See the <span class="emphasis"><em>Taking snapshots of the configuration</em></span> section.</p></div></div><p>As it does for the <a id="id789" class="indexterm"/>operating system shell, issuing <code class="literal">cd ..</code> will move the resource pointer to the parent resource:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 scanner=default] cd ..</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 subsystem=deployment-scanner]</strong></span>
</pre></div><p>You can, at<a id="id790" class="indexterm"/> any time, check the resource path where you are located by issuing either an empty <code class="literal">cd</code> command or just <code class="literal">pwd</code>, as you do for an Unix shell, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 scanner=default] pwd</strong></span>
<span class="strong"><strong>/subsystem=deployment-scanner/scanner=default</strong></span>
</pre></div><p>Finally, in order to simplify your navigation, we'll close this section by providing you with a bird's-eye view of the application server's tree or resources, as follows:</p><div class="mediaobject"><img src="graphics/6232OS_07_03.jpg" alt="Navigating through the resources and executing operations"/></div><p>As you can see, the <a id="id791" class="indexterm"/>tree of resources <a id="id792" class="indexterm"/>includes eight child resources, each one handling one core aspect of the application server. In <a class="link" href="apa.html" title="Appendix A. CLI References">Appendix</a>, <span class="emphasis"><em>CLI References</em></span>, you will find a handy list of useful commands that can be used for your daily system administration. Most of the time, you will navigate to the subsystem resources that contain all the application server core modules. Other resources that you might want to learn <a id="id793" class="indexterm"/>more about are the core-service, which <a id="id794" class="indexterm"/>handles management interfaces (such as the CLI itself), the deployment resource, which can be used to manipulate deployed artifacts, and the <code class="literal">socket-binding-group</code>, which is the resource you will need to change the ports used by the application server.</p><div class="section" title="Operations that can be issued on a resource"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec03"/>Operations that can be issued on a resource</h4></div></div></div><p>Having learned <a id="id795" class="indexterm"/>the basics of navigation through the resources, let's see the commands that can be issued on a resource. Operations are triggered by the <code class="literal">:</code> character. You can get a list of them by using the <code class="literal">auto-completion</code> feature (the <span class="emphasis"><em>Tab</em></span> key). The following is a list of the commands:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Command</p>
</th><th style="text-align: left" valign="bottom">
<p>Meaning</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-resource</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id796" class="indexterm"/>command<a id="id797" class="indexterm"/> reads a model resource's attribute values along with either basic or complete information about any child resources.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-resource-description</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id798" class="indexterm"/>command<a id="id799" class="indexterm"/> outputs a description for the selected resource.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-operation-names</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id800" class="indexterm"/>command <a id="id801" class="indexterm"/>reads the available operation names on the node.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-operation-description</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id802" class="indexterm"/> command<a id="id803" class="indexterm"/> outputs a description for the available operations.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-children-names</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id804" class="indexterm"/> command <a id="id805" class="indexterm"/>gets the name of all children under the selected resource.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-children-resources</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id806" class="indexterm"/>command <a id="id807" class="indexterm"/>reads information about all of a resource's children that are of a given type.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-children-types</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id808" class="indexterm"/> command<a id="id809" class="indexterm"/> provides the list of the children located under the selected resource.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">read-attribute</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id810" class="indexterm"/> command gets<a id="id811" class="indexterm"/> the value of an attribute for the selected resource.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">write-attribute</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id812" class="indexterm"/> command<a id="id813" class="indexterm"/> writes an attribute for the selected resource.</p>
</td></tr></tbody></table></div><p>The <code class="literal">read-resource</code> command <a id="id814" class="indexterm"/>deserves some more explanation. Without any extra arguments, it provides information about the resource's attribute and the direct child nodes.</p><p>For example, the <a id="id815" class="indexterm"/>following is the resource scanning of the datasource subsystem, which includes the default datasource named <code class="literal">ExampleDS</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] /subsystem=datasources:read-resource()</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>  "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>  "result" =&gt; {</strong></span>
<span class="strong"><strong>    "xa-data-source" =&gt; undefined,</strong></span>
<span class="strong"><strong>    "data-source" =&gt; {"java:jboss/datasources/ExampleDS" =&gt; undefined},</strong></span>
<span class="strong"><strong>    "jdbc-driver" =&gt; {"h2" =&gt; undefined}</strong></span>
<span class="strong"><strong>  }</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>You might have noticed the <code class="literal">undefined</code> attribute for some elements. The information provided by the <code class="literal">read-resource</code> command is limited to listing the name of child resources. If you want to read information about all child resources, including their corresponding attributes, you have to issue the command with an additional (<code class="literal">recursive=true</code>) parameter, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] /subsystem=datasources:read-resource(recursive=true)</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; {</strong></span>
<span class="strong"><strong>        "data-source" =&gt; {</strong></span>
<span class="strong"><strong>            "ExampleDS" =&gt; {</strong></span>
<span class="strong"><strong>                "connection-properties" =&gt; undefined,</strong></span>
<span class="strong"><strong>                "connection-url" =&gt; "jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE",</strong></span>
<span class="strong"><strong>                "datasource-class" =&gt; undefined,</strong></span>
<span class="strong"><strong>                "driver-name" =&gt; "h2",</strong></span>
<span class="strong"><strong>                "enabled" =&gt; true,</strong></span>
<span class="strong"><strong>         ...</strong></span>
<span class="strong"><strong>            }</strong></span>
<span class="strong"><strong>        },</strong></span>
<span class="strong"><strong>        "jdbc-driver" =&gt; {</strong></span>
<span class="strong"><strong>            "h2" =&gt; {</strong></span>
<span class="strong"><strong>                "driver-module-name" =&gt; "com.h2database.h2",</strong></span>
<span class="strong"><strong>                "driver-name" =&gt; "h2",</strong></span>
<span class="strong"><strong>                "driver-xa-datasource-class-name" =&gt; "org.h2.jdbcx.JdbcDataSource",</strong></span>
<span class="strong"><strong>                ...</strong></span>
<span class="strong"><strong>            }</strong></span>
<span class="strong"><strong>        },</strong></span>
<span class="strong"><strong>        "xa-data-source" =&gt; undefined</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>As you <a id="id816" class="indexterm"/>can see, by adding the <code class="literal">recursive=true</code> parameter, the CLI has also included the list of configuration parameters, which are stored as children of the datasource element. For the sake of brevity, we have intentionally included just the first few datasource parameters.</p><p>Additionally, some resources can produce metrics, which are collected as runtime attributes. These attributes are not shown by default unless you provide the <code class="literal">include-runtime=true</code> parameter. For example, within the datasource subsystem, you can view statistics related to the database connection pool:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 statistics=pool] :read-resource(include-runtime=true) </strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; {</strong></span>
<span class="strong"><strong>        "ActiveCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "AvailableCount" =&gt; "20",</strong></span>
<span class="strong"><strong>        "AverageBlockingTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "AverageCreationTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "AverageGetTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "BlockingFailureCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "CreatedCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "DestroyedCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "IdleCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "InUseCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "MaxCreationTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "MaxGetTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "MaxUsedCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "MaxWaitCount" =&gt; "0",</strong></span>
<span class="strong"><strong>        "MaxWaitTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "TimedOut" =&gt; "0",</strong></span>
<span class="strong"><strong>        "TotalBlockingTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "TotalCreationTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "TotalGetTime" =&gt; "0",</strong></span>
<span class="strong"><strong>        "WaitCount" =&gt; "0"</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>If you want to learn more about a resource, you can use the <code class="literal">read-resource-description</code> command, which<a id="id817" class="indexterm"/> provides a short description. It also includes a description of the resource's runtime attributes. The output can be quite verbose, so here we will just include its head section:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 statistics=pool] :read-resource-description</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; {</strong></span>
<span class="strong"><strong>        "description" =&gt; "Runtime statistics provided by the resource adapter.",</strong></span>
<span class="strong"><strong>        "attributes" =&gt; {</strong></span>
<span class="strong"><strong>            "DestroyedCount" =&gt; {</strong></span>
<span class="strong"><strong>                "description" =&gt; "The destroyed count",</strong></span>
<span class="strong"><strong>                "type" =&gt; INT,</strong></span>
<span class="strong"><strong>                "required" =&gt; false,</strong></span>
<span class="strong"><strong>                "access-type" =&gt; "metric",</strong></span>
<span class="strong"><strong>                "storage" =&gt; "runtime"</strong></span>
<span class="strong"><strong>            },</strong></span>
<span class="strong"><strong>            "WaitCount" =&gt; {</strong></span>
<span class="strong"><strong>                "description" =&gt; "The number of requests that had to wait to obtain a physical connection",</strong></span>
<span class="strong"><strong>                "type" =&gt; INT,</strong></span>
<span class="strong"><strong>                "required" =&gt; false,</strong></span>
<span class="strong"><strong>                "access-type" =&gt; "metric",</strong></span>
<span class="strong"><strong>                "storage" =&gt; "runtime"</strong></span>
<span class="strong"><strong>            }</strong></span>
<span class="strong"><strong>        }</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>The <code class="literal">read-operation-names</code><a id="id818" class="indexterm"/> and <code class="literal">read-operation-description</code> commands <a id="id819" class="indexterm"/>provide the list of available operations on a certain resource and their description. These produce the information outlined in the previous table, so we will not repeat the description here.</p><p>Next, the <code class="literal">read-children</code> operations can be used to collect information about child nodes. The <code class="literal">read-children-types</code> command<a id="id820" class="indexterm"/> provides information about the child resources and is pretty similar to a simple <code class="literal">ls</code> command. For example, on the <code class="literal">root</code> resource, it will produce the following:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] :read-children-types()</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>  "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>  "result" =&gt; [</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>    "core-service",</strong></span>
<span class="strong"><strong>    "deployment",</strong></span>
<span class="strong"><strong>    "deployment-overlay",</strong></span>
<span class="strong"><strong>    "extension",</strong></span>
<span class="strong"><strong>    "interface",</strong></span>
<span class="strong"><strong>    "path",</strong></span>
<span class="strong"><strong>    "socket-binding-group",</strong></span>
<span class="strong"><strong>    "subsystem",</strong></span>
<span class="strong"><strong>    "system-property"</strong></span>
<span class="strong"><strong>  ]</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>The <code class="literal">read-children-names</code><a id="id821" class="indexterm"/> delivers information about a single child resource, and it's pretty much the same as issuing a <code class="literal">cd</code> resource followed by an <code class="literal">ls</code> command. For example, if we want to know the list of deployed resources on the AS, we will type in the following:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] :read-children-names(child-type=deployment)</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; [</strong></span>
<span class="strong"><strong>        "Enterprise.ear",</strong></span>
<span class="strong"><strong>        "EJB.jar",</strong></span>
<span class="strong"><strong>        "Utility.jar"</strong></span>
<span class="strong"><strong>    ]</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>Finally, the <code class="literal">read-children-resources</code> command<a id="id822" class="indexterm"/> returns information about a child node of a certain type, which needs to be provided as an argument. This command is equivalent to executing a <code class="literal">read-resource</code> operation on each child resource. In the previous example, when we issue this command on a hypothetical <code class="literal">Enterprise.ear</code> deployment resource, it will provide the subdeployment information, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 deployment=Enterprise.ear] :read-children-resources(child-type=subdeployment)</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>  "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>  "result" =&gt; {</strong></span>
<span class="strong"><strong>    "WebApp.war" =&gt; {</strong></span>
<span class="strong"><strong>      "subdeployment" =&gt; undefined,</strong></span>
<span class="strong"><strong>      "subsystem" =&gt; {"web" =&gt; undefined}</strong></span>
<span class="strong"><strong>    },</strong></span>
<span class="strong"><strong>    "Utility.jar" =&gt; {</strong></span>
<span class="strong"><strong>      "subdeployment" =&gt; undefined,</strong></span>
<span class="strong"><strong>      "subsystem" =&gt; undefined</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>  }</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>Optionally, you can also add <code class="literal">include-runtime=true</code> as an argument to include runtime attributes, as well as <code class="literal">recursive=true</code> which provides information about all child resources recursively.</p></div></div><div class="section" title="Executing commands with the CLI"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec59"/>Executing commands with the CLI</h3></div></div></div><p>As <a id="id823" class="indexterm"/>mentioned earlier, the CLI also includes a set of actions that are not bound to your navigation path across the AS tree, but can be issued anywhere to create and modify resources.</p><p>For example, the <code class="literal">version</code> command<a id="id824" class="indexterm"/> can be issued to retrieve some basic information about the application server and the environment when WildFly is running:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] version</strong></span>
<span class="strong"><strong>JBoss Admin Command-line Interface</strong></span>
<span class="strong"><strong>JBOSS_HOME: /opt/wildfly-8.1.0.Final</strong></span>
<span class="strong"><strong>JBoss AS release: 8.1.0.Final "Kenny"</strong></span>
<span class="strong"><strong>JAVA_HOME: /Library/Java/JavaVirtualMachines/jdk1.8.0_05.jdk/Contents/Home</strong></span>
<span class="strong"><strong>java.version: 1.8.0_05</strong></span>
<span class="strong"><strong>java.vm.vendor: Oracle Corporation</strong></span>
<span class="strong"><strong>java.vm.version: 25.5-b02</strong></span>
<span class="strong"><strong>os.name: Mac OS X</strong></span>
<span class="strong"><strong>os.version: 10.8.5</strong></span>
</pre></div><p>In most cases, commands are used as an alias for quickly creating some resources, such as JMS destinations and datasources.</p><p>Let's see in the <a id="id825" class="indexterm"/>following sections how this can be achieved.</p><div class="section" title="Adding a JMS destination"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec04"/>Adding a JMS destination</h4></div></div></div><p>You can add a<a id="id826" class="indexterm"/> JMS queue with the<a id="id827" class="indexterm"/> <code class="literal">jms-queue add</code> command.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note51"/>Note</h3><p>As you can see, one important difference between operations and commands is also the style used to pass parameters. Operations use brackets to pass parameters (for example, <code class="literal">recursive=true</code>). Commands pass parameters using the format (<code class="literal">--parameter</code>), as you do in a Unix shell.</p></div></div><p>The following is the synopsis of the <code class="literal">jms-queue add</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-queue add --queue-address=queue_name --entries=jndi-name(,jndi-name)* [--profile=profile_name] [--selector=selector_name] [--durable=(true|false)]</strong></span>
</pre></div><p>The only mandatory element here is <code class="literal">queue-address</code>, which specifies the queue name and the entries with the JNDI names to which the queue will be bound. The optional entries include the <code class="literal">selector</code> parameter, which can be added to specify a selector on the queue to filter messages, and the <code class="literal">durable</code> parameter, which specifies whether the queue should be durable or not (the default is <code class="literal">true</code>). Finally, note the optional <code class="literal">profile</code> element, which can be used on domain configurations to specify on which <code class="literal">profile</code> the <code class="literal">queue</code> will be created.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip26"/>Tip</h3><p>Remember to start the server with the <code class="literal">-c standalone-full.xml</code> arguments in order to have a server configuration that includes the messaging subsystem. If you don't, these commands will result in errors.</p></div></div><p>The following command creates a new JMS queue (<code class="literal">queue1</code>), which is bound under the JNDI <code class="literal">queues/queue1</code> namespace:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-queue add [--profile=profile_name] --queue-address=queue1 --entries=java:/jms/queues/queue1</strong></span>
</pre></div><p>The equivalent command to add a JMS topic is <code class="literal">jms-topic add</code>, which has the following syntax:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-topic add [--profile=profile_name]--topic-address=topic_name [--entries=entry(,entry)*] [--profile=profile_name] </strong></span>
</pre></div><p>This is very similar to the JMS queue, except that the JMS topic has a smaller number of parameters. Neither the <code class="literal">selector</code> nor the <code class="literal">durable</code> parameters are required here. Have a look at the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jms-topic add [--profile=profile_name] --topic-address=topic1 --entries=topics/topic1</strong></span>
</pre></div></div><div class="section" title="Creating and modifying datasources"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec05"/>Creating and modifying datasources</h4></div></div></div><p>The CLI provides<a id="id828" class="indexterm"/> a useful <code class="literal">data-source</code> command<a id="id829" class="indexterm"/> to create datasources. As the syntax of this command is quite lengthy, you <a id="id830" class="indexterm"/>may find it useful to save it as a CLI script and adapt it to your needs.</p><p>The following is the synopsis of the <code class="literal">data-source</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>data-source [--profile=&lt;profile_name&gt;] add/remove --jndi-name=&lt;jndi_name&gt; --driver-name=&lt;driver_name&gt; --name=&lt;pool_name&gt;  --connection-url=&lt;connection_url&gt;</strong></span>
</pre></div><p>Except for <code class="literal">profile_name</code>, all the other parameters shown in the preceding code snippet are mandatory. That is, you need to specify them if you want to add or remove a datasource. As far as parameters are concerned, you need to state, at least, the JNDI name for the datasource (<code class="literal">jndi-name</code>), the driver name (<code class="literal">driver-name</code>), the name of the connection pool (<code class="literal">name</code>), and the connection URL (<code class="literal">connection-url</code>).</p><p>You can further customize the datasource, just as you would do in your <code class="literal">standalone.xml</code> file, by adding some optional parameters. Let's see a concrete example where we create a MySQL datasource. The first thing we need to do is to provide a JDBC-compliant driver by deploying the JAR archive. Considering you are using standalone mode, just copy the JDBC JAR file into the <code class="literal">deployments</code> folder. Take a look at the following screenshot:</p><div class="mediaobject"><img src="graphics/6232OS_07_04.jpg" alt="Creating and modifying datasources"/></div><p>A simpler approach is to deploy the JDBC driver via the command line. Assuming you start the command-line interface from the folder where your driver is housed, you will run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] deploy ./mysql-connector-java-5.1.30-bin.jar</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note52"/>Note</h3><p>You can alternatively choose to install the JDBC driver as a module, which is the preferred way. This procedure is shown in <a class="link" href="ch03.html" title="Chapter 3. Configuring Enterprise Services">Chapter 3</a>, <span class="emphasis"><em>Configuring Enterprise Services</em></span>. For the purpose of this example, we simply deploy the driver, as this expedites the installation procedure.</p></div></div><p>Now, let's <a id="id831" class="indexterm"/>verify that the driver has been <a id="id832" class="indexterm"/>correctly installed on the datasource subsystem. We can do this by means of the <code class="literal">installed-drivers-list</code> command on the datasources subsystem, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] /subsystem=datasources:installed-drivers-list</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; [</strong></span>
<span class="strong"><strong>        {</strong></span>
<span class="strong"><strong>            "driver-name" =&gt; "mysql-connector-java-5.1.30-bin.jar_com.mysql.jdbc.Driver_5_1",</strong></span>
<span class="strong"><strong>            "deployment-name" =&gt; "mysql-connector-java-5.1.30-bin.jar_com.mysql.jdbc.Driver_5_1",</strong></span>
<span class="strong"><strong>            "driver-module-name" =&gt; undefined,</strong></span>
<span class="strong"><strong>            "module-slot" =&gt; undefined,</strong></span>
<span class="strong"><strong>            "driver-datasource-class-name" =&gt; undefined,</strong></span>
<span class="strong"><strong>            "driver-xa-datasource-class-name" =&gt; undefined,</strong></span>
<span class="strong"><strong>            "driver-class-name" =&gt; "com.mysql.jdbc.Driver",</strong></span>
<span class="strong"><strong>            "driver-major-version" =&gt; 5,</strong></span>
<span class="strong"><strong>            "driver-minor-version" =&gt; 1,</strong></span>
<span class="strong"><strong>            "jdbc-compliant" =&gt; false</strong></span>
<span class="strong"><strong>        },</strong></span>
<span class="strong"><strong>        {</strong></span>
<span class="strong"><strong>            "driver-name" =&gt; "h2",</strong></span>
<span class="strong"><strong>            "deployment-name" =&gt; undefined,</strong></span>
<span class="strong"><strong>            "driver-module-name" =&gt; "com.h2database.h2",</strong></span>
<span class="strong"><strong>            "module-slot" =&gt; "main",</strong></span>
<span class="strong"><strong>            "driver-datasource-class-name" =&gt; "",</strong></span>
<span class="strong"><strong>            "driver-xa-datasource-class-name" =&gt; "org.h2.jdbcx.JdbcDataSource",</strong></span>
<span class="strong"><strong>            "driver-class-name" =&gt; "org.h2.Driver",</strong></span>
<span class="strong"><strong>            "driver-major-version" =&gt; 1,</strong></span>
<span class="strong"><strong>            "driver-minor-version" =&gt; 3,</strong></span>
<span class="strong"><strong>            "jdbc-compliant" =&gt; true</strong></span>
<span class="strong"><strong>        }</strong></span>
<span class="strong"><strong>    ]</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>As you can see, there are now two drivers installed: the default <code class="literal">H2</code> driver and the <code class="literal">MySQL</code> driver that we installed previously.</p><p>Now, we are ready to create a new datasource using the MySQL JDBC driver:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] data-source add --jndi-name=java:/MySqlDS --name=MySQLPool --connection-url=jdbc:mysql://localhost:3306/MyDB --driver-name=mysql-connector-java-5.1.30-bin.jar_com.mysql.jdbc.Driver_5_1 --user-name=myuser --password=password --max-pool-size=30</strong></span>
</pre></div><p>In this example, we <a id="id833" class="indexterm"/>just created a MySQL-bound <a id="id834" class="indexterm"/>datasource using a custom pool size of a maximum of <code class="literal">30</code> connections.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note53"/>Note</h3><p>You don't have to remember all datasource parameter names. Just use the <span class="emphasis"><em>Tab</em></span> key to autocomplete the parameter name. Also, take care that your driver name matches with that of the output created when you ran the <code class="literal">installed-drivers-list</code> command.</p></div></div><p>The <code class="literal">data-source</code> command<a id="id835" class="indexterm"/> can also be used to remove a datasource from the configuration. This can be done by passing the <code class="literal">remove</code> parameter and the <code class="literal">name</code> of the <code class="literal">datasource</code>, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] data-source remove --name=MySQLPool</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note54"/>Note</h3><p>You can also add and remove datasources using operations executed on the datasource system resource. See <a class="link" href="apa.html" title="Appendix A. CLI References">Appendix</a>, <span class="emphasis"><em>CLI References</em></span>, which contains a compendium of the most useful CLI commands.</p></div></div><div class="section" title="Creating and modifying XA datasources"><div class="titlepage"><div><div><h5 class="title"><a id="ch07lvl5sec01"/>Creating and modifying XA datasources</h5></div></div></div><p>Modifying an <a id="id836" class="indexterm"/>XA datasource class for <a id="id837" class="indexterm"/>your connections is similar to that of a <code class="literal">data-source</code>. The main difference is that you will use the <a id="id838" class="indexterm"/>
<code class="literal">xa-data-source</code> command, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] xa-data-source add --name=MySQLPoolXA --jndi-name=java:/MySqlDSXA --driver-name=mysql-connector-java-5.1.30-bin.jar_com.mysql.jdbc.Driver_5_1 --xa-datasource-properties=[{ServerName=localhost}{PortNumber=3306}]</strong></span>
</pre></div><p>There are three arguments required to create an XA datasource. You need a unique <code class="literal">name</code>, the <code class="literal">jndi-name</code>, and finally, the <code class="literal">driver-name</code>.</p><p>This will result in <a id="id839" class="indexterm"/>the following code snippet being added <a id="id840" class="indexterm"/>to your configuration file:</p><div class="informalexample"><pre class="programlisting">&lt;xa-datasource jndi-name="java:/MySqlDSXA" pool-name="MySQLPoolXA" enabled="true"&gt;
    &lt;xa-datasource-property name="ServerName"&gt;
        localhost
    &lt;/xa-datasource-property&gt;
    &lt;xa-datasource-property name="PortNumber"&gt;
        3306
    &lt;/xa-datasource-property&gt;
    &lt;driver&gt;mysql-connector-java-5.1.30-bin.jar_com.mysql.jdbc.Driver_5_1&lt;/driver&gt;
&lt;/xa-datasource&gt;</pre></div></div></div><div class="section" title="Getting help from the CLI"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec06"/>Getting help from the CLI</h4></div></div></div><p>If the <a id="id841" class="indexterm"/>syntax of CLI commands seem a bit overwhelming to you, don't despair! Besides the tab autocompletion functionality, the CLI has also has a main page for each command, just as the Unix shell does.</p><p>If you issue a generic <a id="id842" class="indexterm"/>
<code class="literal">help</code> command, the CLI will return a generic quick-start guide to the interface. On the other hand, when passed as an argument to a command, it provides a helpful description of the command synopsis and their arguments. Take a look at the following code snippet:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] cd --help </strong></span>
<span class="strong"><strong>SYNOPSIS </strong></span>

<span class="strong"><strong>   cn [node_path] </strong></span>
<span class="strong"><strong>   cd [node_path] </strong></span>

<span class="strong"><strong>DESCRIPTION </strong></span>

<span class="strong"><strong>    Changes the current node path to the argument. </strong></span>
<span class="strong"><strong>    The current node path is used as the address for operation requests that don't contains the address part. If an operation request does include the address, the included address is considered relative to the current node path. The current node path may end on a node-type. In that case, to execute an operation specifying a node-name would be sufficient (e.g. logging:read-resource).</strong></span>
<span class="strong"><strong>ARGUMENTS </strong></span>

<span class="strong"><strong> node_path      - the new value for the current node path following the format </strong></span>
<span class="strong"><strong>                  [node-type [=node-name (,node-type[=node-name])*]].</strong></span>

<span class="strong"><strong>The following navigation signs are supported in the node-path: </strong></span>
<span class="strong"><strong> /      - the root node (e.g. 'cd /' or 'cd /some=thing'); </strong></span>
<span class="strong"><strong> ..     - parent node (e.g. 'cd ..'); </strong></span>
<span class="strong"><strong> .type  - node type of the current node (e.g. 'cd .type'). </strong></span>
</pre></div></div></div></div><div class="section" title="Executing CLI scripts in batch"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec86"/>Executing CLI scripts in batch</h2></div></div></div><p>The <code class="literal">batch</code> mode<a id="id843" class="indexterm"/> allows the execution of multiple CLI commands as an atomic unit. Just as you would expect from an ordinary transaction, if any of the commands or operations fail, the changes are rolled back. On the other hand, if the execution ends without any error, the changes are committed.</p><p>Not every command can be part of a batch. For example, navigation commands such as <code class="literal">cd</code>, <code class="literal">pwd</code>, or <code class="literal">help</code> are excluded because they do not reflect any change to the server configuration.</p><p>You can mark the beginning of a batch with the <code class="literal">batch</code> command. You will know when you are in the <code class="literal">batch</code> mode because the prompt will be marked by the <code class="literal">#</code> sign.</p><p>In order to mark the end of a batch sequence, you have to use the <code class="literal">run-batch</code> command. Once completed, the executed batch will be discarded and the CLI will exit the <code class="literal">batch</code> mode. Take a look at the following example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] batch</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 /#] jms-queue add --queue-address=queue1 --entries=queues/queue1</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 /#] deploy MDBApplication.jar</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 /#] run-batch</strong></span>
</pre></div><p>Before executing the batch by typing<a id="id844" class="indexterm"/> <code class="literal">run-batch</code>, you can get the list of all <a id="id845" class="indexterm"/>
<code class="literal">batch</code> commands entered so far by issuing the<a id="id846" class="indexterm"/> <code class="literal">list-batch</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] batch</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 /#] jms-queue add --queue-address=queue1 --entries=queues/queue1</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 /#] deploy MDBApplication.jar</strong></span>
<span class="strong"><strong>[standalone@localhost:9990 /] list-batch</strong></span>
<span class="strong"><strong>#1 jms-queue add --queue-address=queue1 --entries=queues/queue1</strong></span>
<span class="strong"><strong>#2 deploy MDBApplication.jar</strong></span>
</pre></div><div class="section" title="Advanced batch commands"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec60"/>Advanced batch commands</h3></div></div></div><p>Script batching <a id="id847" class="indexterm"/>can indeed be more complex than just starting and executing a list of commands. As a matter of fact, by pressing the <span class="emphasis"><em>Tab</em></span> completion key when you are in the <code class="literal">batch</code> mode, you should see several additional commands available. One of the most useful ones is the <code class="literal">holdback-batch</code> command, which can be used to temporarily pause the batch of commands, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /# ] holdback-batch</strong></span>
</pre></div><p>In order to continue your batch of commands, just issue the <code class="literal">batch</code> command again, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] batch</strong></span>
</pre></div><p>It's even possible to save the batch by assigning a unique name so that you can have multiple save points in your scripts, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /# ] holdback-batch step1</strong></span>
</pre></div><p>Later on, you can continue the execution by specifying the holdback name, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] batch step1</strong></span>
</pre></div><p>When executed with the <code class="literal">-l</code> parameter, the <code class="literal">batch</code> command provides the list of batch files that are held:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] batch -l</strong></span>
<span class="strong"><strong>step1</strong></span>
</pre></div><p>The following table lists all batch-related commands:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Command</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">batch</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id848" class="indexterm"/>command starts a batch of commands. When the batch is paused, it reactivates the batch.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">list-batch</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id849" class="indexterm"/>command lists the commands that have been added to the batch.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">run-batch</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id850" class="indexterm"/>command executes the currently active batch of commands and exits the <code class="literal">batch</code> mode.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">holdback-batch</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id851" class="indexterm"/>command saves the currently active batch and exits the <code class="literal">batch</code> mode, without executing the batch. The held-back batch can later be re-activated by invoking batch commands.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">clear-batch</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id852" class="indexterm"/> command removes all the existing command lines from the currently active batch. The CLI stays in the <code class="literal">batch</code> mode after the command is executed.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">discard-batch</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id853" class="indexterm"/> command discards the currently active batch. All the commands added to the batch will be removed, the batch will be discarded, and the CLI will exit the batch mode.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">edit-batch-line</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id854" class="indexterm"/> command replaces the existing command line from the currently active batch with the specified line number with the new command line.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">remove-batch-line</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id855" class="indexterm"/>command removes an existing command line specified with a line number argument from the currently active batch.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">move-batch-line</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This command <a id="id856" class="indexterm"/>moves the existing line from the specified position to the new position.</p>
</td></tr></tbody></table></div></div></div><div class="section" title="Executing scripts in a file"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec87"/>Executing scripts in a file</h2></div></div></div><p>Until now, we <a id="id857" class="indexterm"/>have seen CLI commands as part of an interactive session. You can, however, execute commands in a non-interactive fashion, adding them in a file, just as a shell script. Suppose you created a sample <code class="literal">test.cli</code> file used to issue a redeploy command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>connect</strong></span>
<span class="strong"><strong>deploy Utility.jar --force</strong></span>
</pre></div><p>Then launch the CLI with the <code class="literal">-file</code> parameter, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>./jboss-cli.sh --file=test.cli</strong></span>
</pre></div><p>Windows users can use the following equivalent:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jboss-cli.bat --file=test.cli</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note55"/>Note</h3><p>You can pass the <code class="literal">--user</code> and <code class="literal">--password</code> arguments to the <code class="literal">jboss-cli.sh</code> or <code class="literal">jboss-cli.bat</code> call if you need an authentication on the management interface.</p></div></div><p>Another way to execute commands in a non-interactive way is by passing the <code class="literal">--commands</code> parameter to the CLI containing the list of command lines separated by a comma. For example, the previous script can be also be executed this way (Unix users):</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>./jboss-xli.sh --commands="connect,deploy Utility.jar --force"</strong></span>
</pre></div><p>The equivalent <a id="id858" class="indexterm"/>script for Windows users will be as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>jboss-cli.bat --commands="connect,deploy Utility.jar --force"</strong></span>
</pre></div><p>We will get the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>'Utility.jar' re-deployed successfully.</strong></span>
</pre></div><div class="section" title="Redirecting non-interactive output"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec61"/>Redirecting non-interactive output</h3></div></div></div><p>When<a id="id859" class="indexterm"/> you execute the CLI in a non-interactive way, you can redirect the output to a file, which would otherwise be printed on the screen. Just as you would do for a shell command, use the <code class="literal">&gt;</code> operator to redirect the output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>./jboss-cli.sh --file=test.cli &gt; out.log   # Linux</strong></span>
<span class="strong"><strong>jboss-cli.bat --file=test.cli &gt; out.log    # Windows</strong></span>
</pre></div></div></div><div class="section" title="Taking snapshots of the configuration"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec88"/>Taking snapshots of the configuration</h2></div></div></div><p>Everyone makes mistakes, but many of them are preventable. Whenever you are performing many <a id="id860" class="indexterm"/>changes to your configuration, it's always a good idea to save copies of your work. That's where snapshots come in; one of the advantages of using the CLI is the ability to create snapshots of the configuration, which are stored in its <code class="literal">history</code> folder.</p><p>The <code class="literal">history</code> folder is located just one step under the <code class="literal">configuration</code> folder. Standalone servers have a <code class="literal">history</code> folder named <code class="literal">standalone_xml_history</code> that, at start up, contains the following files:</p><div class="mediaobject"><img src="graphics/6232OS_07_05.jpg" alt="Taking snapshots of the configuration"/></div><p>The domain configuration, on the other hand, provides two backup directories both for the domain configuration file and the host configuration file. These folders are named <code class="literal">domain_xml_history</code> and <code class="literal">host_xml_history</code>, respectively. To make the reading less verbose, we will describe the snapshot mechanisms using a standalone server. The same rules also apply to domain servers, bearing in mind that the AS takes snapshots of both the <code class="literal">domain.xml</code> and <code class="literal">host.xml</code> files.</p><p>Let's see now<a id="id861" class="indexterm"/> what the history files are about. The <code class="literal">standalone.initial.xml</code> file<a id="id862" class="indexterm"/> contains the original application server's configuration file. This file is never overwritten by WildFly.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note56"/>Note</h3><p>If you need to restore the initial configuration, do not throw away your application server installation! Just replace the <code class="literal">standalone.xml</code> file with <code class="literal">standalone_xml_history/standalone.initial.xml</code>.</p></div></div><p>The <code class="literal">standalone.boot.xml</code> file<a id="id863" class="indexterm"/> contains the AS configuration that was used for the last successful boot of the server. This gets overwritten every time we boot the server successfully.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note57"/>Note</h3><p>If you want to undo all changes in the current session, just replace the <code class="literal">standalone.xml</code> file with <code class="literal">standalone_xml_history/standalone.boot.xml</code>.</p></div></div><p>Finally, the <code class="literal">standalone.last.xml</code> file<a id="id864" class="indexterm"/> contains the last successful configuration committed by the application server.</p><div class="section" title="What the application server saves for you"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec62"/>What the application server saves for you</h3></div></div></div><p>The <code class="literal">current</code> folder is <a id="id865" class="indexterm"/>used as a temporary folder to store changes in the configuration that happened in the current session. Each change in the application server configuration model will result in the creation of a file named <code class="literal">standalone.v[n].xml</code>. Here, <code class="literal">n</code> is the number of the change that is applied (<code class="literal">standalone.v1.xml</code> for the initial configuration, <code class="literal">standalone.v2.xml</code> for the first change, and so on).</p><p>When the application server is restarted, these files are moved into a timestamped folder within the <code class="literal">standalone_xml_history</code> folder. As you can see in the following screenshot, the changes during the last session are moved at reboot into the <code class="literal">20140702-215555794</code> folder:</p><div class="mediaobject"><img src="graphics/6232OS_07_06.jpg" alt="What the application server saves for you"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note58"/>Note</h3><p>The timestamped folders are rotated by the application server every 30 days. If you need to store a core view of the application server configuration, you should take snapshots of the application server model. The next section shows how to do this.</p></div></div></div><div class="section" title="Taking your own snapshots"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec63"/>Taking your own snapshots</h3></div></div></div><p>As suggested <a id="id866" class="indexterm"/>by the earlier warning, you can also take snapshots on demand, whenever you need it. Snapshots created by the user are stored directly in the <code class="literal">snapshot</code> folder. In order to take a snapshot of the <a id="id867" class="indexterm"/>configuration, just issue the <code class="literal">take-snapshot</code> command, and the CLI will back up your configuration. Take a look at the following block of code:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] :take-snapshot </strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; "/opt/wildfly-8.1.0.Final/standalone/configuration/standalone_xml_history/snapshot/20140702-230647552standalone.xml"</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>You can check the list of available snapshots using the <code class="literal">list-snapshots</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] :list-snapshots</strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>    "outcome" =&gt; "success",</strong></span>
<span class="strong"><strong>    "result" =&gt; {</strong></span>
<span class="strong"><strong>        "directory" =&gt; "/opt/wildfly-8.1.0.Final/standalone/configuration/standalone_xml_history/snapshot",</strong></span>
<span class="strong"><strong>        "names" =&gt; [</strong></span>
<span class="strong"><strong>            "20140702-230647552standalone.xml",</strong></span>
<span class="strong"><strong>            "20140702-230817640standalone.xml",</strong></span>
<span class="strong"><strong>            "20140702-230825599standalone.xml",</strong></span>
<span class="strong"><strong>            "20140702-230828191standalone.xml"</strong></span>
<span class="strong"><strong>        ]</strong></span>
<span class="strong"><strong>    }</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>You can, at any time, delete a particular snapshot using the <a id="id868" class="indexterm"/>
<code class="literal">delete-snapshot</code> command, which requires the snapshot name as the parameter. Let's suppose we need to delete the snapshot we just created:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] :delete-snapshot(name=20140702-230828191standalone.xml)</strong></span>
<span class="strong"><strong>{"outcome" =&gt; "success"}</strong></span>
</pre></div></div></div><div class="section" title="History of CLI"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec89"/>History of CLI</h2></div></div></div><p>All commands<a id="id869" class="indexterm"/> executed within a CLI session are stored in history, much like shell commands for Unix systems. CLI commands are kept in memory and also persisted on the filesystem in a file named <code class="literal">.jboss-cli-history</code> in the user's home directory. You will notice that the latest 500 commands (default history size) entered in previous sessions are part of the history.</p><p>If you want to have a look at the CLI history, just issue the <code class="literal">history</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>[standalone@localhost:9990 /] history</strong></span>
</pre></div><p>You can also <a id="id870" class="indexterm"/>use the arrow keys to navigate back and forth through the history of commands and operations, much like what you do with a Linux bash shell.</p><p>The <code class="literal">history</code> command<a id="id871" class="indexterm"/> supports three optional arguments, which can be used to temporarily disable/enable or clear the history. In the following table, we mention their outcome:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Argument</p>
</th><th style="text-align: left" valign="bottom">
<p>Effect</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">disable</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id872" class="indexterm"/> command disables history expansion (but will not clear the previously recorded history).</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">enable</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a id="id873" class="indexterm"/>command re-enables history expansion (starting from the last recorded command before the history expansion was disabled).</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">clear</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id874" class="indexterm"/> command clears the in-memory history (but not the file one).</p>
</td></tr></tbody></table></div></div></div></div>
<div class="section" title="The web admin console"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec35"/>The web admin console</h1></div></div></div><p>Historically, the <a id="id875" class="indexterm"/>JBoss AS has always provided a <a id="id876" class="indexterm"/>web-based application to perform some administration and management tasks. Versions 4.x and earlier used the <code class="literal">jmx-console</code> to read/write and display the value of <code class="literal">MBeans</code>, which were the backbone of the application server. The <code class="literal">jmx-console</code><a id="id877" class="indexterm"/> was indeed a useful tool; however, it also required some degree of experience to get started with. Besides this, the information contained in this application was fragmented across many <code class="literal">MBeans</code>. For example, the datasource information was contained in four <code class="literal">MBeans</code>, thus making it cumbersome to manage this resource.</p><p>The 5.x and 6.x release proposed a simpler-to-use approach made up of the admin console, which was built as a seam-based web application. Although the new admin console was a neat and simple application, some criticized it due to the fact that it consumed a good amount of memory and startup time.</p><p>WildFly continues to use the web console introduced in JBoss AS 7, which you already saw in a previous chapter. It is built using <span class="strong"><strong>Google</strong></span> <span class="strong"><strong>Web</strong></span> <span class="strong"><strong>Toolkit</strong></span> (<span class="strong"><strong>GWT</strong></span>)<a id="id878" class="indexterm"/> and uses the HTTP management API to configure a management domain or a standalone server.</p><p>Like many GWT applications, the web console uses a JSON-encoded protocol and a de-typed RPC style API to describe and execute management operations against a managed domain or standalone server.</p><div class="section" title="Accessing the admin console"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec90"/>Accessing the admin console</h2></div></div></div><p>WildFly, by <a id="id879" class="indexterm"/>default, uses port 9990 to serve the admin console. You can access it at <code class="literal">http://localhost:9990</code> as configured in your <code class="literal">standalone.xml/domain.xml</code>:</p><div class="informalexample"><pre class="programlisting">&lt;socket-binding name="management-http" interface="management" port="9990"/&gt;</pre></div><p>Once you have logged in to the web admin console, you will land on the application home page. In standalone mode, you will see four main tabs: <span class="strong"><strong>Home</strong></span>, <span class="strong"><strong>Configuration</strong></span>, <span class="strong"><strong>Runtime</strong></span>, and <span class="strong"><strong>Administration</strong></span>. These tabs are explained as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Home</strong></span>: This tab <a id="id880" class="indexterm"/>contains a brief description of each tab, a variety of quick links to achieve common tasks, and lots of links for other useful resources, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/6232OS_07_07.jpg" alt="Accessing the admin console"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Configuration</strong></span>: This<a id="id881" class="indexterm"/> tab can be used to model the application server configuration, as illustrated in the following screenshot:<div class="mediaobject"><img src="graphics/6232OS_07_08.jpg" alt="Accessing the admin console"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Runtime</strong></span>: This <a id="id882" class="indexterm"/>tab <a id="id883" class="indexterm"/>can be used to manage deployments, as we learned in <a class="link" href="ch06.html" title="Chapter 6. Application Structure and Deployment">Chapter 6</a>, <span class="emphasis"><em>Application Structure and Deployment</em></span>. In the next section, we will show how easy configuring server profiles can be using the web admin console:<div class="mediaobject"><img src="graphics/6232OS_07_09.jpg" alt="Accessing the admin console"/></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Administration</strong></span>: This<a id="id884" class="indexterm"/> tab is used to configure users, groups, and roles. We will cover this section in greater detail in <a class="link" href="ch10.html" title="Chapter 10. Securing WildFly">Chapter 10</a>, <span class="emphasis"><em>Securing WildFly</em></span>.</li></ul></div></div><div class="section" title="Configuring server profiles"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec91"/>Configuring server profiles</h2></div></div></div><p>The <a id="id885" class="indexterm"/>server profile configuration is located in the<a id="id886" class="indexterm"/> left-hand side of the web application, and can be found under the <span class="strong"><strong>Configuration</strong></span> tab. When running the domain mode, you can switch between profiles by choosing the relevant profile from the combobox in the top left-hand corner of the page.</p><p>As soon as you open the <span class="strong"><strong>Configuration</strong></span> tab, you will see the set of subsystems that can be configured through the web interface.</p><p>In <a class="link" href="ch02.html" title="Chapter 2. Configuring the Core WildFly Subsystems">Chapter 2</a>, <span class="emphasis"><em>Configuring the Core WildFly Subsystems</em></span>, and <a class="link" href="ch03.html" title="Chapter 3. Configuring Enterprise Services">Chapter 3</a>, <span class="emphasis"><em>Configuring Enterprise Services</em></span>, we showed how to configure various resources using the main configuration file. If you are the kind of system administrator who prefers<a id="id887" class="indexterm"/> <span class="strong"><strong>windows, icons, menus, and pointers</strong></span> (<span class="strong"><strong>WIMP</strong></span>) interfaces, then the next sections are for you. Configuring the resources via the web console is pretty intuitive, so to give you a taste, we will just cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Configuring datasources</li><li class="listitem" style="list-style-type: disc">Configuring JMS resources</li><li class="listitem" style="list-style-type: disc">Configuring socket-binding groups</li></ul></div><div class="section" title="Configuring datasources"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec64"/>Configuring datasources</h3></div></div></div><p>You can<a id="id888" class="indexterm"/> navigate directly to the datasources configuration panel from the list of <span class="strong"><strong>Common Tasks</strong></span> on the homepage. Otherwise, you will need to click on the <span class="strong"><strong>Configuration</strong></span> tab, followed by the <span class="strong"><strong>Subsystems</strong></span> | <span class="strong"><strong>Connector</strong></span> | <span class="strong"><strong>Datasources</strong></span> link on the left-hand side. This will switch the main panel to the datasource configuration panel. This panel contains two upper tabs to configure <span class="strong"><strong>DATASOURCE</strong></span> and <span class="strong"><strong>XA DATASOURCE</strong></span>. Let's see what the first tab contains.</p><p>In the middle of the panel, you can find the list of configured datasources. The actions that can be applied are located just above the list of datasources. You can create a new datasource by clicking on the <span class="strong"><strong>Add</strong></span> button. You can also find the <span class="strong"><strong>Remove</strong></span> and <span class="strong"><strong>Disable</strong></span> buttons next to the <span class="strong"><strong>Add</strong></span> button.</p><p>Editing or deleting an existing datasource is a straightforward task that can be executed with the click of a button. The same can be said about enabling and disabling the selected datasource.</p><p>Here, we will <a id="id889" class="indexterm"/>show how to add a new datasource to your standalone configuration, which requires a few simple steps to be completed. Once you click on the <span class="strong"><strong>Add</strong></span> button, a three-step wizard will guide you through the creation of the datasource. Let's configure a sample MySQL datasource for this purpose by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The first information required will be the datasource name and its JNDI binding, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/6232OS_07_10.jpg" alt="Configuring datasources"/></div></li><li class="listitem">The next step will be selecting the proper JDBC driver for your datasource. Provided that you have successfully installed a JDBC driver on your AS, you should have it listed as an available driver:<div class="mediaobject"><img src="graphics/6232OS_07_11.jpg" alt="Configuring datasources"/></div></li><li class="listitem">Choose<a id="id890" class="indexterm"/> the MySQL JDBC driver, and in the next (last) step, you will be required to enter the JDBC URL of the datasource along with the <span class="strong"><strong>Username</strong></span> and <span class="strong"><strong>Password</strong></span> credentials, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/6232OS_07_12.jpg" alt="Configuring datasources"/></div></li><li class="listitem">Clicking on <span class="strong"><strong>Done</strong></span> completes the wizard, and you will be redirected to the main panel, where the new datasource is now listed in the datasource list. Finally, you will need to enable the new datasource by clicking on it and then clicking on <span class="strong"><strong>Enable</strong></span>:<div class="mediaobject"><img src="graphics/6232OS_07_13.jpg" alt="Configuring datasources"/></div></li></ol></div><div class="section" title="Creating a new XA datasource"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec07"/>Creating a new XA datasource</h4></div></div></div><p>As we have <a id="id891" class="indexterm"/>shown in the <span class="emphasis"><em>The command-line interface (CLI)</em></span> section, an XA datasource requires your JDBC URL to be entered as an XA property. This is also the case when creating the XA datasource via the admin console.</p><p>Thus, the datasource JNDI naming and driver selection stays the same as for non-XA datasources. In the following screenshot, we illustrate the last two steps needed to complete the XA datasource creation:</p><div class="mediaobject"><img src="graphics/6232OS_07_14.jpg" alt="Creating a new XA datasource"/></div><p>In the fourth step, as shown in the following screenshot, underneath <span class="strong"><strong>Username</strong></span> and <span class="strong"><strong>Password</strong></span>, you will notice the option of adding a security domain. You can leave this blank for now. We will discuss security domains in <a class="link" href="ch10.html" title="Chapter 10. Securing WildFly">Chapter 10</a>, <span class="emphasis"><em>Securing WildFly</em></span>.</p><div class="mediaobject"><img src="graphics/6232OS_07_15.jpg" alt="Creating a new XA datasource"/></div></div></div><div class="section" title="Configuring JMS destinations"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec65"/>Configuring JMS destinations</h3></div></div></div><p>Creating<a id="id892" class="indexterm"/> new <span class="strong"><strong>Queues</strong></span> and <span class="strong"><strong>Topics</strong></span> using the web console is even more simple. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">From the <span class="strong"><strong>Configuration</strong></span> menu, select the <span class="strong"><strong>Messaging</strong></span> option in the subsystems menu. The main panel will switch to display the <span class="strong"><strong>Messaging</strong></span> providers. Now, select the required provider, and click on <span class="strong"><strong>View</strong></span>:<div class="mediaobject"><img src="graphics/6232OS_07_16.jpg" alt="Configuring JMS destinations"/></div></li><li class="listitem">From there, select the resource you want to create (<span class="strong"><strong>Queue</strong></span> or <span class="strong"><strong>Topic</strong></span>). Then, click on the <span class="strong"><strong>Add</strong></span> button to create a new one:<div class="mediaobject"><img src="graphics/6232OS_07_17.jpg" alt="Configuring JMS destinations"/></div></li><li class="listitem">If you <a id="id893" class="indexterm"/>need to create a new <span class="strong"><strong>Queue</strong></span>, all you have to do is complete the next simple dialog box, which is shown in the following screenshot:<div class="mediaobject"><img src="graphics/6232OS_07_18.jpg" alt="Configuring JMS destinations"/></div></li><li class="listitem">When you click on <span class="strong"><strong>Save</strong></span>, the new JMS resource will be enlisted in the JMS subsystem<a id="id894" class="indexterm"/> panel (and also be persisted in the main configuration file), as shown in the following screenshot:<div class="mediaobject"><img src="graphics/6232OS_07_19.jpg" alt="Configuring JMS destinations"/></div></li></ol></div></div><div class="section" title="Configuring socket-binding groups"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec66"/>Configuring socket-binding groups</h3></div></div></div><p>Changing <a id="id895" class="indexterm"/>the socket bindings of the application server can be used to solve port conflicts with other applications or even other instances of WildFly. If you are running the application in the <code class="literal">domain</code> mode, the best thing you can do is specify a port offset for your servers, as pointed out in <a class="link" href="ch04.html" title="Chapter 4. The Undertow Web Server">Chapter 4</a>, <span class="emphasis"><em>The Undertow Web Server</em></span>, which is all about domain servers.</p><p>If, however, you are running in the <code class="literal">standalone</code> mode, and you have to change just one or more port addresses, then it will probably be more easily achievable via the web console.</p><p>To reach the <span class="strong"><strong>Socket</strong></span> <span class="strong"><strong>Binding</strong></span> <span class="strong"><strong>groups</strong></span> option, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Click on <span class="strong"><strong>Socket Binding</strong></span> on the left-hand side, and then click on <span class="strong"><strong>View</strong></span> for the socket-binding group you want to modify.</li><li class="listitem">Then, select the socket binding you want to change, for example, the <span class="strong"><strong>http</strong></span> server port. Then, scroll down to reveal the edit options. Click on the <span class="strong"><strong>Edit</strong></span> button and update the port value, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/6232OS_07_20.jpg" alt="Configuring socket-binding groups"/></div></li><li class="listitem">When <a id="id896" class="indexterm"/>you are done, click on the <span class="strong"><strong>Save</strong></span> button.</li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip27"/>Tip</h3><p>
<span class="strong"><strong>Server restart needed?</strong></span>
</p><p>Changing the socket binding groups does not produce the immediate effect of changing the server port. The updated configuration must be reloaded by the AS. You can simply restart the application server by issuing the <code class="literal">restart</code> command or, even better, by issuing the <code class="literal">reload</code> command from the CLI.</p></div></div></div></div></div>
<div class="section" title="The CLI or web console?"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec36"/>The CLI or web console?</h1></div></div></div><p>Both <a id="id897" class="indexterm"/>management interfaces are powerful tools, and in some circumstances, one might be a better choice than another.</p><p>For example, the CLI provides a huge addition to the application server, and in a relatively short amount of time, it will let you configure its every resource, including runtime metrics, in fine detail.</p><p>On the other hand, the web console provides a simple and elegant way to manage your AS resources with little or no learning curve. In particular, we have shown in <a class="link" href="ch03.html" title="Chapter 3. Configuring Enterprise Services">Chapter 3</a>, <span class="emphasis"><em>Configuring Enterprise Services</em></span>, how it can be easily used to manage the basic domain functionalities, such as configuring, starting, and stopping server groups and hosts.</p><p>The following table shows a summary of the main benefits of each interface:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Tool</p>
</th><th style="text-align: left" valign="bottom">
<p>Best for</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>CLI</p>
</td><td style="text-align: left" valign="top">
<p>Being an invaluable instrument for an expert system administrator</p>
<p>Reaching in-depth server attributes, such as metrics</p>
<p>Performing operations such as macros or batches</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>Web console</p>
</td><td style="text-align: left" valign="top">
<p>Being <a id="id898" class="indexterm"/>a handy tool to perform most basic administration tasks</p>
<p>Managing top-level domain resources</p>
</td></tr></tbody></table></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec37"/>Summary</h1></div></div></div><p>In this chapter, you learned how to manage the application server using the tools that are part of the AS distribution.</p><p>You became acquainted with the CLI, which allows you to traverse the tree of AS resources and issue commands that can read/modify or display attributes.</p><p>One of the advantages of the CLI is that you can easily build complex management operations, thanks to its autocomplete functionality. The CLI also allows you to enlist commands in a batch so that you can execute them in an all-or-nothing fashion, which is typical of transactional systems.</p><p>The other management tool is the web interface, which allows you to operate on the server configuration using an intuitive and simple interface. For system administrators that need to perform basic administration tasks, it's an ideal tool, as it requires little or no experience to use it.</p><p>At this point, you have enough expertise to handle more complex topics. So, in the next chapter, we will discuss application server clustering, which allows you to provide scalability and high availability to your applications.</p></div></body></html>