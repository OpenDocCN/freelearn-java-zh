<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;2.&#xA0;Your First Java EE Application on WildFly"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02" class="calibre1"/>Chapter 2. Your First Java EE Application on WildFly</h1></div></div></div><p class="calibre8">This chapter will provide you with a crash course in the new application server so that you will be able to create a deployable skeleton of our first Java EE 7 application in the next chapter. More specifically, we will cover the following topics:</p><div class="book"><ul class="itemizedlist"><li class="listitem">An introduction to the WildFly 8 core concepts</li><li class="listitem">The anatomy of the WildFly 8 filesystem</li><li class="listitem">An introduction to the available management instruments</li><li class="listitem">Deploying your first Hello World application</li></ul></div></div>

<div class="book" title="Chapter&#xA0;2.&#xA0;Your First Java EE Application on WildFly">
<div class="book" title="WildFly 8 core concepts"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch02lvl1sec12" class="calibre1"/>WildFly 8 core concepts</h1></div></div></div><p class="calibre8">Now that <a id="id109" class="calibre1"/>we have downloaded and installed WildFly 8, it is worth spending a few minutes familiarizing ourselves with some basic concepts. The architecture and most of the core ideas are taken straight from JBoss AS 7; although, there are some new mechanisms that were introduced with the newest version (for example, role-based security for the management system, reduced number of used ports, and a new patching system). Just like JBoss AS 7, WildFly can be run in two modes: the standalone mode and domain mode.</p><p class="calibre8">In the <span class="strong"><strong class="calibre9">standalone</strong></span> mode, each WildFly instance is an independent process (similar to the previous JBoss AS versions, such as Version 4, Version 5, Version 6, and the standalone mode in Version 7). The standalone configuration files are located under the <code class="email">standalone</code>/<code class="email">configuration</code> directory of the application server.</p><p class="calibre8">In the <span class="strong"><strong class="calibre9">domain</strong></span> mode, you can run multiple application servers and manage them from a central point. A domain can span multiple physical (or virtual) machines. On each machine, we can install several instances of WildFly that are under the control of a Host Controller process. The configuration files in the domain mode are located under the <code class="email">domain</code>/<code class="email">configuration</code> folder of the application server.</p><p class="calibre8">From the process point of view, a domain is made up of three elements:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Domain Controller</strong></span>: The domain controller is the management control point of your <a id="id110" class="calibre1"/>domain. A WildFly instance running in <a id="id111" class="calibre1"/>the domain mode will have at the most one process instance acting as a domain controller. The domain controller holds a centralized configuration, which is shared by the node instances that belong to that domain.</li><li class="listitem"><span class="strong"><strong class="calibre9">Host Controller</strong></span>: This is the process that is responsible for coordinating the life cycle <a id="id112" class="calibre1"/>of server processes and the distribution <a id="id113" class="calibre1"/>of deployments from the domain controller to the server instances.</li><li class="listitem"><span class="strong"><strong class="calibre9">Application server nodes</strong></span>: These are regular Java processes that map instances<a id="id114" class="calibre1"/> of the application server. Each server<a id="id115" class="calibre1"/> node, in turn, belongs to a server group. Domain groups are explained in detail when we will discuss the domain configuration file.</li></ul></div><p class="calibre8">Additionally, when <a id="id116" class="calibre1"/>starting a domain, you will see another JVM process running on your machine. This is the Process Controller. It is a very lightweight process whose primary function is to spawn server processes and Host Controller processes, and manage their input/output streams. Since Process Controller  is not configurable, we will not discuss it any further.</p><p class="calibre8">The following diagram depicts a typical domain deployment configuration:</p><div class="mediaobject"><img src="../images/00010.jpeg" alt="WildFly 8 core concepts" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">As you can <a id="id117" class="calibre1"/>see in the preceding diagram, one host (<span class="strong"><strong class="calibre9">Host1</strong></span>) acts as a dedicated domain controller. This is a common practice adopted in domain-managed servers in order to logically and physically separate the administration unit from the servers where the applications are hosted.</p><p class="calibre8">The other hosts (<span class="strong"><strong class="calibre9">Host2</strong></span> and <span class="strong"><strong class="calibre9">Host3</strong></span>) contain the domain application servers, which are divided into two server groups: <span class="strong"><strong class="calibre9">main-server-group</strong></span> and <span class="strong"><strong class="calibre9">other-server-group</strong></span>. A server group is a logical set of server instances that will be managed and configured together. Each server group can, in turn, be configured with different profiles and deployments; for example, in the preceding domain, you can provide some services with <span class="strong"><strong class="calibre9">main-server-group</strong></span> and other services with <span class="strong"><strong class="calibre9">other-server-group</strong></span>.</p><p class="calibre8">This has some<a id="id118" class="calibre1"/> advantages. For example, when you don't want to shut down your application for a new version, you can start by redeploying only one server group at a time. When one server is not fully operational, requests can be handled by the second one.</p><p class="calibre8">Getting into <a id="id119" class="calibre1"/>the details of the domain configuration is beyond the scope of this book; however, by the end of this chapter, we will see how to deploy application units in a domain using the command-line interface available in WildFly.</p></div></div>
<div class="book" title="The WildFly 8 directory layout"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec13" class="calibre1"/>The WildFly 8 directory layout</h1></div></div></div><p class="calibre8">The <a id="id120" class="calibre1"/>difference between standalone and domain reflects in the directory layout of the application server is shown in the following diagram:</p><div class="mediaobject"><img src="../images/00011.jpeg" alt="The WildFly 8 directory layout" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">As you can <a id="id121" class="calibre1"/>see in the preceding diagram, the WildFly directory layout is divided into two main parts: the first one is pertinent to a standalone server mode and the other is dedicated to a domain server mode. Common to both server modes is the <code class="email">modules</code> directory, which is the heart of the application server.</p><p class="calibre8">WildFly is based on the <code class="email">JBoss Modules</code> project, which provides an implementation of a modular (nonhierarchical) class loading and an execution environment for Java. In other words, rather than a single class loader that loads all JARs into a flat class path, each library becomes a module, which only links to the exact modules it depends on and nothing more. It implements a thread safe, fast, and highly concurrent delegating class loader model, coupled with an extensible module resolution system. This combines to form a unique, simple, and powerful system for application execution and distribution.</p><p class="calibre8">The following<a id="id122" class="calibre1"/> table details the content of each folder present in the <code class="email">root</code> folder of <code class="email">JBOSS_HOME</code>:</p><div class="informalexample"><table border="1" class="calibre17"><colgroup class="calibre18"><col class="calibre19"/><col class="calibre19"/></colgroup><thead class="calibre20"><tr class="calibre21"><th valign="bottom" class="calibre22">
<p class="calibre23">Folder</p>
</th><th valign="bottom" class="calibre22">
<p class="calibre23">Description</p>
</th></tr></thead><tbody class="calibre24"><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">bin</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id123" class="indexterm"/> folder contains the startup scripts, startup configuration files, and various command-line utilities, such as vault, add-user, and Java diagnostic reports available for Unix and Windows environments</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">bin/client</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id124" class="indexterm"/> folder contains a client Jar for use by the remote EJB and CLI and clients not using any build systems with automatic dependency management such as Maven, Ant with Ivy, or Gradle</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">bin/init.d</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">New<a id="id125" class="indexterm"/> in WildFly, this folder contains scripts for Red Hat Linux and Debian, which registers WildFly as a Linux service</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">bin/service</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">New in WildFly, this folder <a id="id126" class="indexterm"/>contains a script that allows to register WildFly as a Windows service</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">docs/examples</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id127" class="indexterm"/> folder contains some sample standalone configurations such as a minimal standalone configuration (<code class="literal">standalone-minimalistic.xml</code>)</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">docs/schema</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id128" class="indexterm"/> folder contains XML schema definition files</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">domain</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id129" class="indexterm"/>folder contains the configuration files, deployment content, and writable areas used by the domain mode processes run from this installation</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">modules</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id130" class="indexterm"/>folder contains all the modules installed on the application server</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">standalone</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id131" class="indexterm"/>folder contains the configuration files, deployment content, and writable areas used by the single standalone servers run from this installation</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">appclient</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id132" class="indexterm"/> folder contains the configuration files, deployment content, and writable areas used by the application client container run from this installation</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">welcome-content</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This folder contains<a id="id133" class="indexterm"/> the default Welcome page content</p>
</td></tr></tbody></table></div><p class="calibre8">Digging <a id="id134" class="calibre1"/>into the standalone mode tree, we can find folders that are pertinent to standalone independent processes. If you have experience with earlier server releases, you will find these folders quite intuitive to you:</p><div class="informalexample"><table border="1" class="calibre17"><colgroup class="calibre18"><col class="calibre19"/><col class="calibre19"/></colgroup><thead class="calibre20"><tr class="calibre21"><th valign="bottom" class="calibre22">
<p class="calibre23">Directory</p>
</th><th valign="bottom" class="calibre22">
<p class="calibre23">Description</p>
</th></tr></thead><tbody class="calibre24"><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">configuration</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id135" class="indexterm"/>directory contains the configuration files for the standalone server that runs from this installation. All configuration information for the running server is located here and is the single place for configuration modifications for the standalone server.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">data</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id136" class="indexterm"/>directory contains the persistent information written by the server to survive a restart of the server.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">deployments</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">The <a id="id137" class="indexterm"/>end user deployment content can be placed in this directory for automatic detection and deployment of that content into the server's runtime.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">lib/ext</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id138" class="indexterm"/>directory is the location for the installed library Jar files, referenced by the applications using the <a id="id139" class="indexterm"/>Extension-List mechanism.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">log</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id140" class="indexterm"/>directory contains the standalone server logfiles.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">tmp</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id141" class="indexterm"/> directory contains the location of the temporary files written by the server.</p>
</td></tr></tbody></table></div><p class="calibre8">The <code class="email">domain</code> directory structure is quite similar to the standalone equivalent, with one important <a id="id142" class="calibre1"/>difference. As you can see from the following table, the <code class="email">deployments</code> folder is not present since the domain mode does not support deploying content based on scanning a filesystem. We need to use the WildFly managed instruments (CLI and web admin console) in order to deploy applications to a domain.</p><div class="informalexample"><table border="1" class="calibre17"><colgroup class="calibre18"><col class="calibre19"/><col class="calibre19"/></colgroup><thead class="calibre20"><tr class="calibre21"><th valign="bottom" class="calibre22">
<p class="calibre23">Directory</p>
</th><th valign="bottom" class="calibre22">
<p class="calibre23">Description</p>
</th></tr></thead><tbody class="calibre24"><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">configuration</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This directory contains the configuration files for the domain Host Controller and any servers running on this installation. All the <a id="id143" class="indexterm"/>configuration information for the servers<a id="id144" class="indexterm"/> managed within the domain is located here and is the single place for configuration information.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">data/content</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id145" class="indexterm"/> directory is an internal working area for the Host Controller, which controls this installation. This is where it internally stores the deployment content. This directory is not meant to be manipulated by the end users. It is created after the first server startup.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">log</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id146" class="indexterm"/> directory is the location where the Host Controller process writes its logs. The Process Controller, a small, lightweight process that actually spawns other Host Controller processes and any application server processes, also writes logs here. It is created after the first server startup.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">servers</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id147" class="indexterm"/> directory is a writable area used by each application server instance that runs from this installation. Each application server instance will have its own subdirectory, created when the server is first started. In each server's subdirectory, the following subdirectories will be present:</p>
<div class="itemizedlist1"><ul class="itemizedlist2"><li class="listitem1"><code class="literal">data</code>: This is the information written by the server that needs<a id="id148" class="indexterm"/> to survive a restart of the server</li><li class="listitem1"><code class="literal">log</code>: This<a id="id149" class="indexterm"/> is the server's logfiles</li><li class="listitem1"><code class="literal">tmp</code>: This <a id="id150" class="indexterm"/>is the location of the temporary files written by the server. This folder is created after the first server startup.</li></ul></div>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">tmp</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id151" class="indexterm"/> directory contains the location of the temporary files written by the server.</p>
</td></tr></tbody></table></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Managing the application server"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec14" class="calibre1"/>Managing the application server</h1></div></div></div><p class="calibre8">WildFly <a id="id152" class="calibre1"/>provides three different means to configure and manage servers: a web interface, a command-line client, and a set of XML configuration files. No matter what approach you choose, the configuration is always synchronized across the different views and finally persisted to the XML files. After saving the changes using the web interface, you will instantly see an updated XML file in your server's configuration directory.</p></div>

<div class="book" title="Managing the application server">
<div class="book" title="Managing WildFly 8 with the web interface"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec16" class="calibre1"/>Managing WildFly 8 with the web interface</h2></div></div></div><p class="calibre8">The <a id="id153" class="calibre1"/>web interface is a <span class="strong"><strong class="calibre9">Google Web Toolkit</strong></span> (<span class="strong"><strong class="calibre9">GWT</strong></span>) application, which can be used to manage a standalone or domain<a id="id154" class="calibre1"/> WildFly distribution. The GWT application <a id="id155" class="calibre1"/>known in JBoss AS 7 has been <a id="id156" class="calibre1"/>updated to match the new visual theme. It was also extended with new features, such as role-based security and patching support. By default, it is deployed on a localhost on the <code class="email">9990</code> port; the property that controls the port socket binding is <code class="email">jboss.management.http.port</code>, as specified in the server configuration (<code class="email">standalone.xml/domain.xml</code>). The server configuration is given in the following<a id="id157" class="calibre1"/> code snippet:</p><div class="informalexample"><pre class="programlisting">&lt;socket-binding-group name="standard-sockets" default-interface="public"&gt;
        &lt;socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/&gt;
        . . . . . . . . .
&lt;/socket-binding-group&gt;</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note08" class="calibre1"/>Note</h3><p class="calibre8">Wildfly 8 is secured out of the box and the default security mechanism is based on a username or password, making use of HTTP Digest. The reason for securing the server by default is that if the management interfaces are accidentally exposed on a public IP address, authentication is required to connect. For this reason, there is no default user in the distribution.</p></div><p class="calibre8">The <a id="id158" class="calibre1"/>users are stored in a properties file called <code class="email">mgmt-users.properties</code> under standalone/configuration or domain/configuration depending on the running mode of the server. This file contains the username <a id="id159" class="calibre1"/>information along with a precalculated hash of the username, plus the name of the realm and user's password.</p><p class="calibre8">To manipulate the files and add users, the server has provided utilities such as <code class="email">add-user.sh</code> and <code class="email">add-user.bat</code> to add the users and generate hashes. So just execute the script and follow the guided process. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00012.jpeg" alt="Managing WildFly 8 with the web interface" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">In<a id="id160" class="calibre1"/> order to create a new user, you<a id="id161" class="calibre1"/> need to provide the following<a id="id162" class="calibre1"/> information:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Type of user</strong></span>: The type of user will be Management User, since it will manage<a id="id163" class="calibre1"/> the application server.</li><li class="listitem"><span class="strong"><strong class="calibre9">Realm</strong></span>: This must match the realm name used in the configuration, so unless you have changed the configuration to use a different realm name, leave this set to <code class="email">ManagementRealm</code>.</li><li class="listitem"><span class="strong"><strong class="calibre9">Username</strong></span>: This is the username of the user you are adding.</li><li class="listitem"><span class="strong"><strong class="calibre9">Password</strong></span>: This is the user's password.</li><li class="listitem"><span class="strong"><strong class="calibre9">User groups</strong></span>: This is a list of comma-separated groups that should be assigned to the newly created user; they are used for the role-based access control and auditing system, which was introduced in WildFly. The information about user groups is stored in the <code class="email">mgmt-groups.properties</code> file.</li></ul></div><p class="calibre8">If the validation is successful, you will be asked to confirm whether you want to add the user; only then the <code class="email">properties</code> files will be updated.</p><p class="calibre8">The<a id="id164" class="calibre1"/> final question (Is this new <a id="id165" class="calibre1"/>user going to be used to<a id="id166" class="calibre1"/> connect one AS process to another?) can be used to <span class="strong"><strong class="calibre9">add the slave Host Controllers</strong></span> that authenticate against a master domain controller. This, in turn, requires adding the secret key to your slave host's configuration in order<a id="id167" class="calibre1"/> to authenticate with the master domain controller. (For more information about domain configuration, please visit <a class="calibre1" href="https://docs.jboss.org/author/display/WFLY8/Admin+Guide#AdminGuide-ManagedDomain">https://docs.jboss.org/author/display/WFLY8/Admin+Guide#AdminGuide-ManagedDomain</a>.)</p></div></div>
<div class="book" title="Launching the web console"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec15" class="calibre1"/>Launching the web console</h1></div></div></div><p class="calibre8">Now that <a id="id168" class="calibre1"/>we have added at least one user, we can launch the web console at the default address, <code class="email">http://&lt;host&gt;:9990/console</code> (keep in mind that you have to start the server first, for example, with <code class="email">standalone.bat</code> or <code class="email">standalone.sh</code>).</p><p class="calibre8">The login screen will be prompted. Enter data into the <span class="strong"><strong class="calibre9">User Name</strong></span> and <span class="strong"><strong class="calibre9">Password</strong></span> fields, which we had formerly created. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00013.jpeg" alt="Launching the web console" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Once<a id="id169" class="calibre1"/> logged in, you will be redirected to the web administration main screen. The web console, when running in the standalone mode, will be divided into three main tabs: <span class="strong"><strong class="calibre9">Configuration</strong></span>, <span class="strong"><strong class="calibre9">Runtime</strong></span>, and <span class="strong"><strong class="calibre9">Administration</strong></span>. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00014.jpeg" alt="Launching the web console" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">The <span class="strong"><strong class="calibre9">Configuration</strong></span> tab<a id="id170" class="calibre1"/> contains all the single subsystems that are <a id="id171" class="calibre1"/>part of a server profile. So, once you select the <span class="strong"><strong class="calibre9">Configuration</strong></span> tab on the left frame, you can access all the subsystems and edit their configurations (in the previous screenshot, we saw the Data Sources subsystem).</p><p class="calibre8">The<a id="id172" class="calibre1"/> other tab named <span class="strong"><strong class="calibre9">Runtime</strong></span> can be used for two main <a id="id173" class="calibre1"/>purposes: to manage the deployment of applications and check the server metrics. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00015.jpeg" alt="Launching the web console" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">The <span class="strong"><strong class="calibre9">Administration</strong></span> tab has been introduced with WildFly and Red Hat JBoss EAP 6.2 and currently <a id="id174" class="calibre1"/>contains only the options associated with role based <a id="id175" class="calibre1"/>access control. You can now limit permissions<a id="id176" class="calibre1"/> of management users, for example, so that not every administrator can undeploy an application using the web console. By default, this feature is disabled. You have to enable it manually using the CLI mechanism. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00016.jpeg" alt="Launching the web console" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Once you<a id="id177" class="calibre1"/> have learned how to access the web console, it is about time you try your first application example.</p></div>

<div id="page" style="height:0pt"/><div class="book" title="Deploying your first application to WildFly 8"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec16" class="calibre1"/>Deploying your first application to WildFly 8</h1></div></div></div><p class="calibre8">In <a id="id178" class="calibre1"/>order to test launch our first application, we<a id="id179" class="calibre1"/> will create a <code class="email">HelloWorld</code> web project using Eclipse. The main part will be a <code class="email">servlet</code> class, used to generate HTML markup. So, launch Eclipse and choose to create a new web project by navigating to <span class="strong"><strong class="calibre9">File</strong></span> | <span class="strong"><strong class="calibre9">New</strong></span> | <span class="strong"><strong class="calibre9">Dynamic Web Project</strong></span>. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00017.jpeg" alt="Deploying your first application to WildFly 8" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Choose a name for your application and check the <span class="strong"><strong class="calibre9">Use default location</strong></span> box if you want to create your project within the same location of your Eclipse workspace. If you have correctly configured a new WildFly server in Eclipse, you should see the <span class="strong"><strong class="calibre9">WildFly 8.0 Runtime</strong></span> option selected by default, and <span class="strong"><strong class="calibre9">Target Runtime</strong></span> and <span class="strong"><strong class="calibre9">Default Configuration</strong></span> for <span class="strong"><strong class="calibre9">WildFly 8.0 Runtime</strong></span> preselected in the <span class="strong"><strong class="calibre9">Configuration</strong></span> box.</p><p class="calibre8">Select <span class="strong"><strong class="calibre9">3.1</strong></span> as the Dynamic web module version, which makes development easy by using the Servlet 3.1 specifications, and also leave the <span class="strong"><strong class="calibre9">EAR membership</strong></span> and <span class="strong"><strong class="calibre9">Add project to working sets</strong></span> checkboxes unselected.</p><p class="calibre8">Click <a id="id180" class="calibre1"/>on <span class="strong"><strong class="calibre9">Finish</strong></span> to continue.</p><p class="calibre8">Now, let's<a id="id181" class="calibre1"/> add a quintessential simple servlet to our project, which merely dumps a <span class="strong"><strong class="calibre9">Hello World</strong></span> message as an HTML page. From the <span class="strong"><strong class="calibre9">File</strong></span> menu, go to <span class="strong"><strong class="calibre9">New</strong></span> | <span class="strong"><strong class="calibre9">Servlet</strong></span> and enter a meaningful name and package for your servlet, such as <code class="email">TestServlet</code> as the name and <code class="email">com.packtpub.wflydevelopment.chapter2</code> as the package name. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00018.jpeg" alt="Deploying your first application to WildFly 8" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">The wizard will generate a basic servlet skeleton that needs to be enhanced with the following set of code lines:</p><div class="informalexample"><pre class="programlisting">@WebServlet("/test")
public class TestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private static final String CONTENT_TYPE = 
      "text/html;charset=UTF-8";
    private static final String MESSAGE = "&lt;!DOCTYPE html&gt;&lt;html&gt;" +
            "&lt;head&gt;&lt;title&gt;Hello!&lt;/title&gt;&lt;/head&gt;" +
            "&lt;body&gt;Hello World WildFly&lt;/body&gt;" +
            "&lt;/html&gt;";

    @Override
    protected void doGet(HttpServletRequest request, 
                         HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType(CONTENT_TYPE);
        try (PrintWriter out = response.getWriter()) {
            out.println(MESSAGE);
        }
    }
}</pre></div><p class="calibre8">The <a id="id182" class="calibre1"/>servlet will respond with a static HTML<a id="id183" class="calibre1"/> page (we defined the content type as Text/HTML with an UTF-8 charset) for every GET HTTP request that will be issued against its URL address.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note09" class="calibre1"/>Note</h3><p class="calibre8">Notice that <code class="email">TextServlet</code> bears the <code class="email">@WebServlet</code> annotation, which has been introduced by the Servlet 3.0 API, and it allows registering a servlet without using the <code class="email">web.xml</code> configuration file. In our example, we used it to customize the servlet URL binding to employ <code class="email">/test</code>, which would otherwise be defaulted by Eclipse to the class name.</p></div><p class="calibre8">We will complete the application with the creation of a <code class="email">JBoss</code> file descriptor named <code class="email">jboss-web.xml in /WebContent/WEB-INF/</code> directory; although this is not mandatory, it can be used to redefine the context root, as shown in the following code snippet:</p><div class="informalexample"><pre class="programlisting">&lt;jboss-web&gt;
    &lt;context-root&gt;/hello&lt;/context-root&gt;
&lt;/jboss-web&gt;</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note10" class="calibre1"/>Note</h3><p class="calibre8">The schema definition file for <code class="email">jboss-web.xml</code> is named <code class="email">jboss-web_8_0.xsd</code> and can be located in the <code class="email">JBOSS_HOME/docs/schema</code> folder.</p></div><p class="calibre8">Keep <a id="id184" class="calibre1"/>in mind that creating <code class="email">jboss-web.xml</code> makes<a id="id185" class="calibre1"/> the application non-portable to other Java EE Application Servers. The default application path when such a file is not defined is a concatenation of the application name and its version, for example, for application <code class="email">TestServlet</code> with Version 1.0, it would be TestServlet-1.0.</p><p class="calibre8">Now, we will add the web application to the list of deployed resources by right-clicking on the Eclipse <span class="strong"><strong class="calibre9">Server</strong></span> tab and selecting <span class="strong"><strong class="calibre9">Add and Remove</strong></span>. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00019.jpeg" alt="Deploying your first application to WildFly 8" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Next, click on <span class="strong"><strong class="calibre9">Add</strong></span> to add the project to the list of configured resources on the server as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00020.jpeg" alt="Deploying your first application to WildFly 8" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">If you <a id="id186" class="calibre1"/>have started WildFly from inside Eclipse, the <a id="id187" class="calibre1"/>resource will be automatically deployed by checking the flag to see whether the server has started, and publish changes immediately.</p><p class="calibre8">If, on the other hand, you have started the application server externally, then you can fully publish your resource by right-clicking on the application and selecting <span class="strong"><strong class="calibre9">Full Publish</strong></span> as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00021.jpeg" alt="Deploying your first application to WildFly 8" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Now, move<a id="id188" class="calibre1"/> to the browser and check that the <a id="id189" class="calibre1"/>application responds at the configured URL, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00022.jpeg" alt="Deploying your first application to WildFly 8" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">This example is also available in the form of a Maven (will be introduced in the next chapter) project in your Packt Publishing account.</p></div>

<div class="book" title="Deploying your first application to WildFly 8">
<div class="book" title="Advanced Eclipse deployment options"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec17" class="calibre1"/>Advanced Eclipse deployment options</h2></div></div></div><p class="calibre8">As<a id="id190" class="calibre1"/> it is, Eclipse has published a <code class="email">HelloWorld.war</code> folder <a id="id191" class="calibre1"/>in <code class="email">JBOSS_HOME/standalone/deployments</code>.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note11" class="calibre1"/>Note</h3><p class="calibre8">You might have noticed that Eclipse has also added a marker file named <code class="email">HelloWorld.war.dodeploy</code>. This step is necessary because, by default, exploded deployments in WildFly aren't automatically deployed. Autodeployment of the exploded content is disabled by default because the deployment scanner could try to deploy the copied directory partially, which would cause a lot of errors. The deployment of the exploded archives can be manually triggered with a marker file named <code class="email">application.[jar/war/ear].dodeploy</code>.</p><p class="calibre8">Once the application is deployed, the application server replaces the <code class="email">.dodeploy marker</code> file with <code class="email">HelloWorld.war</code> deployed, or with a <code class="email">HelloWorld.war.failed</code> file, should the deployment fail.</p></div><p class="calibre8">You <a id="id192" class="calibre1"/>can change the default deployment <a id="id193" class="calibre1"/>options by double-clicking on WildFly 8.0 (in the <span class="strong"><strong class="calibre9">Server</strong></span> tab), and selecting the <span class="strong"><strong class="calibre9">Deployment</strong></span> tab as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00023.jpeg" alt="Advanced Eclipse deployment options" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">In the <span class="strong"><strong class="calibre9">Deployment</strong></span> tab, you can choose to deploy your application on a custom deploy folder by checking the <span class="strong"><strong class="calibre9">Use a custom deploy folder</strong></span> option and entering an appropriate value into the corresponding textbox.</p><p class="calibre8">Please note that the custom deployment folder also needs to be defined in WildFly; check the next section for more information about it.</p><p class="calibre8">Also, take note of the <span class="strong"><strong class="calibre9">Deploy projects as compressed archives</strong></span> option, which can be useful in some circumstances, for example, if you are distributing the application via other instruments such as the CLI, which can deploy only compressed archives.</p><div class="book" title="Managing deployments with the web console"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch02lvl3sec22" class="calibre1"/>Managing deployments with the web console</h3></div></div></div><p class="calibre8">Deploying<a id="id194" class="calibre1"/> the application<a id="id195" class="calibre1"/> using Eclipse is a straightforward task and is likely to be your option when you are developing apps. We will see here how to use the web console to deploy the application, which can be one more arrow in your quiver.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note12" class="calibre1"/>Note</h3><p class="calibre8">A typical scenario for this example could be if you are running the AS in the domain mode, or simply deploying your application on a remote WildFly instance.</p></div><p class="calibre8">Start the web console and click on the <span class="strong"><strong class="calibre9">Runtime</strong></span> tab. From the panel on the left, go to <span class="strong"><strong class="calibre9">Server</strong></span> | <span class="strong"><strong class="calibre9">Manage Deployments</strong></span> as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00024.jpeg" alt="Managing deployments with the web console" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">In <a id="id196" class="calibre1"/>the central panel, we can <a id="id197" class="calibre1"/>manage deployments using the <span class="strong"><strong class="calibre9">Add</strong></span>, <span class="strong"><strong class="calibre9">Remove</strong></span>, <span class="strong"><strong class="calibre9">En</strong></span>/<span class="strong"><strong class="calibre9">Disable</strong></span>, and <span class="strong"><strong class="calibre9">Update</strong></span> buttons. Select the <span class="strong"><strong class="calibre9">Add</strong></span> button to add a new deployment unit. In the next screen, pick up the file you want to deploy (for example, the <code class="email">HelloWorld.war</code> artifact, which can be created from our test project in Eclipse by navigating to <span class="strong"><strong class="calibre9">File</strong></span> | <span class="strong"><strong class="calibre9">Export</strong></span> | <span class="strong"><strong class="calibre9">Web</strong></span> | <span class="strong"><strong class="calibre9">WAR File</strong></span>) from your local filesystem, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00025.jpeg" alt="Managing deployments with the web console" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Complete<a id="id198" class="calibre1"/> the wizard by<a id="id199" class="calibre1"/> verifying the deployment's name and clicking on <span class="strong"><strong class="calibre9">Save</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00026.jpeg" alt="Managing deployments with the web console" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">Now, the <a id="id200" class="calibre1"/>deployment is <a id="id201" class="calibre1"/>listed in the Deployments table. It is, however, not enabled by default. Click on the <span class="strong"><strong class="calibre9">En</strong></span>/<span class="strong"><strong class="calibre9">Disable</strong></span> button to enable the deployment of the application, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00027.jpeg" alt="Managing deployments with the web console" class="calibre11"/></div><p class="calibre12"> </p><div class="book" title="Changing the deployment scanner properties"><div class="book"><div class="book"><div class="book"><h4 class="title3"><a id="ch02lvl4sec04" class="calibre1"/>Changing the deployment scanner properties</h4></div></div></div><p class="calibre8">As we<a id="id202" class="calibre1"/> have seen before, applications running <a id="id203" class="calibre1"/>in the standalone mode are scanned in the <code class="email">deployments</code> folder by default. You can change this behavior (and also the deployment scanner's properties) by clicking on the <span class="strong"><strong class="calibre9">Configuration</strong></span> tab and navigating to <span class="strong"><strong class="calibre9">Subsystems</strong></span> | <span class="strong"><strong class="calibre9">Core</strong></span> | <span class="strong"><strong class="calibre9">Deployment Scanners</strong></span> from the left menu. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00028.jpeg" alt="Changing the deployment scanner properties" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">In<a id="id204" class="calibre1"/> <span class="strong"><strong class="calibre9">Deployment Scanners</strong></span>, you can set the<a id="id205" class="calibre1"/> core deployment's attributes. You can click on the <span class="strong"><strong class="calibre9">Edit</strong></span> button to define new values for these properties. Most of them are self-explanatory; however, the following table summarizes them:</p><div class="informalexample"><table border="1" class="calibre17"><colgroup class="calibre18"><col class="calibre19"/><col class="calibre19"/></colgroup><thead class="calibre20"><tr class="calibre21"><th valign="bottom" class="calibre22">
<p class="calibre23">Attribute</p>
</th><th valign="bottom" class="calibre22">
<p class="calibre23">Description</p>
</th></tr></thead><tbody class="calibre24"><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">name</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This<a id="id206" class="indexterm"/> is the deployment scanner's name (by default, the name <code class="literal">default</code> is provided).</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">path</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This is<a id="id207" class="indexterm"/> the absolute path where deployments are scanned. If the attribute <code class="literal">Path Relative to</code> is set, then it's appended to the relative path definition.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">Enabled</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id208" class="indexterm"/>attribute determines whether the deployment scanner is enabled or not.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">Path Relative to</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">If <a id="id209" class="indexterm"/>included, this attribute must point to a system path that will be used to build the relative path expression.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">Scan Interval</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id210" class="indexterm"/>is the time frequency (in milliseconds) for which deployments will be scanned.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">Auto-deploy Zipped</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">Setting <a id="id211" class="indexterm"/>this to <code class="literal">true</code> will enable automatic deployments for zipped applications. Its default value is <code class="literal">true</code>.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">Auto-deploy Exploded</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">Setting<a id="id212" class="indexterm"/> this to <code class="literal">true</code> will enable automatic deployments for exploded applications. Its default value is <code class="literal">true</code>.</p>
</td></tr><tr class="calibre21"><td valign="top" class="calibre25">
<p class="calibre23"><code class="literal">Deployment timeout</code></p>
</td><td valign="top" class="calibre25">
<p class="calibre23">This <a id="id213" class="indexterm"/>refers to the time-out after which a deployment action will be marked as <code class="literal">failed</code>.</p>
</td></tr></tbody></table></div></div></div></div></div>

<div class="book" title="Deploying your first application to WildFly 8">
<div class="book" title="Deploying applications using the command-line interface"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec18" class="calibre1"/>Deploying applications using the command-line interface</h2></div></div></div><p class="calibre8">Another <a id="id214" class="calibre1"/>way to deploy<a id="id215" class="calibre1"/> an application is via the <a id="id216" class="calibre1"/>WildFly <span class="strong"><strong class="calibre9">Command-line Interface</strong></span> (<span class="strong"><strong class="calibre9">CLI</strong></span>), which can be started from <code class="email">jboss-cli.bat</code> (or <code class="email">jboss-cli.sh</code> for Linux users). Don't be afraid of using a textual interface to manage your application server; as a matter of fact, the console provides built-in autocomplete features and you can display the available commands at any time by simply hitting the <span class="strong"><em class="calibre10">Tab</em></span> key, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00029.jpeg" alt="Deploying applications using the command-line interface" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre8">As <a id="id217" class="calibre1"/>you might have <a id="id218" class="calibre1"/>guessed, in order to deploy <a id="id219" class="calibre1"/>an application, you need to issue the <code class="email">deploy</code> shell command. When used without arguments, the <code class="email">deploy</code> shell command<a id="id220" class="calibre1"/> provides a list of applications that are currently deployed. Refer to the following code:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[standalone@localhost:9990 /] deploy</strong></span>
<span class="strong"><strong class="calibre9">ExampleApp.war</strong></span>
</pre></div><p class="calibre8">If you feed a resource archive such as <code class="email">.war</code> to shell, it will deploy it on the standalone server right away, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[standalone@localhost:9990 /] deploy ../HelloWorld.war </strong></span>
</pre></div><p class="calibre8">As you can see from the preceding command line, the CLI uses the folder where your deployments were actually launched at its initial location, which is <code class="email">JBOSS_HOME/bin</code> by default. You can, however, use absolute paths when specifying the location of your archives; the CLI expansion facility (using the <span class="strong"><em class="calibre10">Tab</em></span> key) makes this option fairly simple. This is demonstrated in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[standalone@localhost:9990 /] deploy c:\deployments\HelloWorld.war</strong></span>
</pre></div><p class="calibre8">There is no error message after issuing the command; therefore, the application is deployed and activated so that the user can access it. If you want to just perform the deployment of the application and defer the activation to a later time, you have to add the <code class="email">--disabled</code> switch, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[standalone@localhost:9990 /] deploy ../HelloWorld.war --disabled </strong></span>
</pre></div><p class="calibre8">In order to activate the application, simply issue another <code class="email">deploy</code> shell command without the <code class="email">--disabled</code> switch, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[standalone@localhost:9990 /] deploy -–name=HelloWorld.war </strong></span>
</pre></div><p class="calibre8">Redeploying the application requires an additional flag for the <code class="email">deploy</code> shell command. Use<a id="id221" class="calibre1"/> the <code class="email">-f</code> argument <a id="id222" class="calibre1"/>to force the application's redeployment, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[localhost:9990 /] deploy -f ../HelloWorld.war</strong></span>
</pre></div><p class="calibre8">Undeploying <a id="id223" class="calibre1"/>the application can be <a id="id224" class="calibre1"/>done with the <code class="email">undeploy</code> command, which takes the application that is deployed as an argument. This is shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[localhost:9990 /] undeploy HelloWorld.war</strong></span>
</pre></div><div class="book" title="Deploying applications to a domain"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch02lvl3sec23" class="calibre1"/>Deploying applications to a domain</h3></div></div></div><p class="calibre8">Deploying <a id="id225" class="calibre1"/>applications when running in the domain <a id="id226" class="calibre1"/>mode is slightly different from doing this in the standalone mode. The difference boils down to the fact that an application can be deployed just to one server group or to all the server groups. As a matter of fact, one reason why you might split your domain into different server groups might be that you are planning to offer different types of services (and hence applications) to each server group.</p><p class="calibre8">So, in order to deploy your <code class="email">HelloWorld.war</code> application to all server groups, issue the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[domain@localhost:9990 /] deploy HelloWorld.war --all-server-groups</strong></span>
</pre></div><p class="calibre8">If, on the other hand, you want to undeploy an application from all server groups belonging to a domain, you have to issue the <code class="email">undeploy</code> command, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[domain@localhost:9990 /] undeploy HelloWorld.war --all-relevant-server-groups</strong></span>
</pre></div><p class="calibre8">You can also deploy your application just to one server group of your domain by specifying one or more server groups (separated by a comma) with the <code class="email">--server-groups</code> parameter, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[domain@localhost:9990 /] deploy HelloWorld.war --server-groups=main-server-group</strong></span>
</pre></div><p class="calibre8">You can use the tab completion facility in order to complete the value for the list of <code class="email">--server</code> groups elected for deployment.</p><p class="calibre8">Now, suppose we wish to undeploy the application from just one server group. There can be two possible scenarios. If the application is available just on that server group, you will just<a id="id227" class="calibre1"/> need to feed the server group to the <code class="email">--server-groups</code> flag, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[domain@localhost:9990 /] undeploy HelloWorld.war --server-groups=main-server-group</strong></span>
</pre></div><p class="calibre8">On the <a id="id228" class="calibre1"/>other hand, if your application is available on other server groups as well, you need to provide the additional <code class="email">--keep-content</code> flag; otherwise, the CLI will complain that it cannot delete an application that is referenced by other server groups, as shown in the following command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre9">[domain@localhost:9990 /] undeploy HelloWorld.war --server-groups=main-server-group --keep-content</strong></span>
</pre></div></div></div></div>
<div class="book" title="Summary"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec17" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we went through a crash course on the application server, focusing on the available management instruments: the web interface and Command-line interface. We then saw how to use these tools to deploy a sample application to a standalone environment and domain environment.</p><p class="calibre8">In the next chapter, we will dive deep into Java EE 7 components, starting from Enterprise JavaBeans, which still plays an important role in the evolving scenario of Java Enterprise applications.</p></div></body></html>