- en: Chapter 1. Creating a Spring Application
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章 创建Spring应用程序
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下食谱：
- en: Installing Java, Maven, Tomcat, and Eclipse on Mac OS
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Mac OS上安装Java、Maven、Tomcat和Eclipse
- en: Installing Java, Maven, Tomcat, and Eclipse on Ubuntu
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Ubuntu上安装Java、Maven、Tomcat和Eclipse
- en: Installing Java, Maven, Tomcat, and Eclipse on Windows
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Windows上安装Java、Maven、Tomcat和Eclipse
- en: Creating a Spring web application
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个Spring Web应用程序
- en: Running a Spring web application
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行Spring Web应用程序
- en: Using Spring in a standard Java application
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在标准Java应用程序中使用Spring
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: 'In this chapter, we will first cover the installation of some of the tools
    for Spring development:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们首先将介绍一些Spring开发工具的安装：
- en: '**Java**: Spring is a Java framework.'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Java**：Spring是一个Java框架。'
- en: '**Maven**: This is a build tool similar to Ant. It makes it easy to add Spring
    libraries to a project. Gradle is another option as a build tool.'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Maven**：这是一个类似于Ant的构建工具。它使得将Spring库添加到项目中变得容易。Gradle作为另一个构建工具选项。'
- en: '**Tomcat**: This is a web server for Java web applications. You can also use
    JBoss, Jetty, GlassFish, or WebSphere.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Tomcat**：这是一个Java Web应用程序的Web服务器。您也可以使用JBoss、Jetty、GlassFish或WebSphere。'
- en: '**Eclipse**: This is an IDE. You can also use NetBeans, IntelliJ IDEA, and
    so on.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Eclipse**：这是一个IDE。您也可以使用NetBeans、IntelliJ IDEA等。'
- en: Then, we will build a Spring web application and run it with Tomcat.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将构建一个Spring Web应用程序，并使用Tomcat运行它。
- en: Finally, we'll see how Spring can also be used in a standard Java application
    (not a web application).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将看到Spring也可以在标准Java应用程序中使用（不是Web应用程序）。
- en: Installing Java, Maven, Tomcat, and Eclipse on Mac OS
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Mac OS上安装Java、Maven、Tomcat和Eclipse
- en: We will first install Java 8 because it's not installed by default on Mac OS
    10.9 or higher version. Then, we will install Maven 3, a build tool similar to
    Ant, to manage the external Java libraries that we will use (Spring, Hibernate,
    and so on). Maven 3 also compiles source files and generates JAR and WAR files.
    We will also install Tomcat 8, a popular web server for Java web applications,
    which we will use throughout this book. JBoss, Jetty, GlassFish, or WebSphere
    could be used instead. Finally, we will install the Eclipse IDE, but you could
    also use NetBeans, IntelliJ IDEA, and so on.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先安装Java 8，因为它默认情况下并未安装在Mac OS 10.9或更高版本上。然后，我们将安装Maven 3，这是一个类似于Ant的构建工具，用于管理我们将使用的（Spring、Hibernate等）外部Java库。Maven
    3还可以编译源文件并生成JAR和WAR文件。我们还将安装Tomcat 8，这是一个流行的Java Web应用程序的Web服务器，我们将在这本书的整个过程中使用它。也可以使用JBoss、Jetty、GlassFish或WebSphere。最后，我们将安装Eclipse
    IDE，但您也可以使用NetBeans、IntelliJ IDEA等。
- en: How to do it…
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Install Java first, then Maven, Tomcat, and Eclipse.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 首先安装Java，然后是Maven、Tomcat和Eclipse。
- en: Installing Java
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Java
- en: Download Java from the Oracle website [http://oracle.com](http://oracle.com).
    In the Java SE downloads section, choose the Java SE 8 SDK. Select **Accept the
    License Agreement** and download the **Mac OS X x64** package. The direct link
    to the page is [http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html).![Installing
    Java](img/5807OS_01_01.jpg)
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Oracle网站[http://oracle.com](http://oracle.com)下载Java。在Java SE下载部分，选择Java SE
    8 SDK。选择**接受许可协议**并下载**Mac OS X x64**包。到该页面的直接链接是[http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)。![安装Java](img/5807OS_01_01.jpg)
- en: Open the downloaded file, launch it, and complete the installation.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开下载的文件，启动它，并完成安装。
- en: 'In your `~/.bash_profile` file, set the `JAVA_HOME` environment variable. Change
    `jdk1.8.0_40.jdk` to the actual folder name on your system (this depends on the
    version of Java you are using, which is updated regularly):'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的`~/.bash_profile`文件中，设置`JAVA_HOME`环境变量。将`jdk1.8.0_40.jdk`更改为您系统上的实际文件夹名称（这取决于您使用的Java版本，它定期更新）：
- en: '[PRE0]'
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Open a new terminal and test whether it''s working:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的终端并测试它是否工作：
- en: '[PRE1]'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Installing Maven
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Maven
- en: Download Maven from the Apache website [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi).
    Choose the **Binary zip** file of the current stable version:![Installing Maven](img/5807OS_01_02.jpg)
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Apache网站[http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)下载Maven。选择当前稳定版本的**二进制zip文件**：![安装Maven](img/5807OS_01_02.jpg)
- en: Uncompress the downloaded file and move the extracted folder to a convenient
    location (for example, `~/bin`).
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压缩下载的文件，并将提取的文件夹移动到方便的位置（例如，`~/bin`）。
- en: 'In your `~/.bash_profile` file, add a `MAVEN HOME` environment variable pointing
    to that folder. For example:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的 `~/.bash_profile` 文件中，添加一个指向该文件夹的 `MAVEN_HOME` 环境变量。例如：
- en: '[PRE2]'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Add the `bin` subfolder to your `PATH` environment variable:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `bin` 子目录添加到您的 `PATH` 环境变量中：
- en: '[PRE3]'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Open a new terminal and test whether it''s working:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的终端并测试其是否工作：
- en: '[PRE4]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Installing Tomcat
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Tomcat
- en: Download Tomcat from the Apache website [http://tomcat.apache.org/download-80.cgi](http://tomcat.apache.org/download-80.cgi)
    and choose the **Core** binary distribution.![Installing Tomcat](img/5807OS_01_03.jpg)
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Apache 网站下载 Tomcat [http://tomcat.apache.org/download-80.cgi](http://tomcat.apache.org/download-80.cgi)
    并选择 **核心** 二进制发行版。![安装 Tomcat](img/5807OS_01_03.jpg)
- en: Uncompress the downloaded file and move the extracted folder to a convenient
    location (for example, `~/bin`).
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压下载的文件并将提取的文件夹移动到方便的位置（例如，`~/bin`）。
- en: 'Make the scripts in the `bin` subfolder executable:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使 `bin` 子目录中的脚本可执行：
- en: '[PRE5]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Launch Tomcat using the `catalina.sh` script:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `catalina.sh` 脚本启动 Tomcat：
- en: '[PRE6]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Tomcat runs on the `8080` port by default. In a web browser, go to `http://localhost:8080/`
    to check whether it's working.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Tomcat 默认在 `8080` 端口运行。在网页浏览器中，访问 `http://localhost:8080/` 以检查其是否工作。
- en: Installing Eclipse
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Eclipse
- en: Download Eclipse from [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/).
    Choose the **Mac OS X 64 Bit** version of **Eclipse IDE for Java EE Developers**.![Installing
    Eclipse](img/5807OS_01_04.jpg)
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/) 下载
    Eclipse。选择 **Java EE 开发者 Eclipse IDE** 的 **Mac OS X 64 位** 版本。![安装 Eclipse](img/5807OS_01_04.jpg)
- en: Uncompress the downloaded file and move the extracted folder to a convenient
    location (for example, `~/bin`).
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压下载的文件并将提取的文件夹移动到方便的位置（例如，`~/bin`）。
- en: 'Launch Eclipse by executing the `eclipse` binary:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过执行 `eclipse` 二进制文件启动 Eclipse：
- en: '[PRE7]'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: There's more…
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'Tomcat can be run as a background process using these two scripts:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用这两个脚本以后台进程运行 Tomcat：
- en: '[PRE8]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: On a development machine, it's convenient to put Tomcat's folder somewhere in
    the home directory (for example, `~/bin`) so that its contents can be updated
    without root privileges.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发机器上，将 Tomcat 的文件夹放在家目录中的某个位置（例如，`~/bin`）很方便，这样其内容可以在不使用 root 权限的情况下更新。
- en: Installing Java, Maven, Tomcat, and Eclipse on Ubuntu
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Ubuntu 上安装 Java、Maven、Tomcat 和 Eclipse
- en: We will first install Java 8\. Then, we will install Maven 3, a build tool similar
    to Ant, to manage the external Java libraries that we will use (Spring, Hibernate,
    so on). Maven 3 also compiles source files and generates JAR and WAR files. We
    will also install Tomcat 8, a popular web server for Java web applications, which
    we will use throughout this book. JBoss, Jetty, GlassFish, or WebSphere could
    be used instead. Finally, we will install the Eclipse IDE, but you could also
    use NetBeans, IntelliJ IDEA, and so on.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先安装 Java 8。然后，我们将安装 Maven 3，一个类似于 Ant 的构建工具，用于管理我们将使用的（Spring、Hibernate 等等）外部
    Java 库。Maven 3 还编译源文件并生成 JAR 和 WAR 文件。我们还将安装 Tomcat 8，这是一个流行的 Java 网络应用服务器，我们将在这本书中使用它。也可以使用
    JBoss、Jetty、GlassFish 或 WebSphere。最后，我们将安装 Eclipse IDE，但您也可以使用 NetBeans、IntelliJ
    IDEA 等等。
- en: How to do it…
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Install Java first, then Maven, Tomcat, and Eclipse.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 首先安装 Java，然后安装 Maven、Tomcat 和 Eclipse。
- en: Installing Java
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Java
- en: 'Add this **PPA** (**Personal Package Archive**):'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加此 **PPA**（**个人软件包存档**）：
- en: '[PRE9]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Refresh the list of the available packages:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 刷新可用的软件包列表：
- en: '[PRE10]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Download and install Java 8:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并安装 Java 8：
- en: '[PRE11]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Test whether it''s working:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试其是否工作：
- en: '[PRE12]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Installing Maven
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Maven
- en: Download Maven from the Apache website [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi).
    Choose the **Binary zip** file of the current stable version:![Installing Maven](img/5807OS_01_02.jpg)
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Apache 网站下载 Maven [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)。选择当前稳定版本的
    **二进制 zip 文件**：![安装 Maven](img/5807OS_01_02.jpg)
- en: Uncompress the downloaded file and move the resulting folder to a convenient
    location (for example, `~/bin`).
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压下载的文件并将生成的文件夹移动到方便的位置（例如，`~/bin`）。
- en: 'In your `~/.bash_profile` file, add a `MAVEN HOME` environment variable pointing
    to that folder. For example:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的 `~/.bash_profile` 文件中，添加一个指向该文件夹的 `MAVEN_HOME` 环境变量。例如：
- en: '[PRE13]'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Add the `bin` subfolder to your `PATH` environment variable:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `bin` 子目录添加到您的 `PATH` 环境变量中：
- en: '[PRE14]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Open a new terminal and test whether it''s working:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的终端并测试其是否工作：
- en: '[PRE15]'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Installing Tomcat
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Tomcat
- en: Download Tomcat from the Apache website [http://tomcat.apache.org/download-80.cgi](http://tomcat.apache.org/download-80.cgi)
    and choose the **Core** binary distribution.![Installing Tomcat](img/5807OS_01_03.jpg)
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Apache网站[http://tomcat.apache.org/download-80.cgi](http://tomcat.apache.org/download-80.cgi)下载Tomcat，并选择**核心**二进制发行版。![安装Tomcat](img/5807OS_01_03.jpg)
- en: Uncompress the downloaded file and move the extracted folder to a convenient
    location (for example, `~/bin`).
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压缩下载的文件，并将提取的文件夹移动到方便的位置（例如，`~/bin`）。
- en: 'Make the scripts in the `bin` subfolder executable:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使`bin`子文件夹中的脚本可执行：
- en: '[PRE16]'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Launch Tomcat using the `catalina.sh` script:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`catalina.sh`脚本启动Tomcat：
- en: '[PRE17]'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Tomcat runs on the 8080 port by default. Go to `http://localhost:8080/` to check
    whether it's working.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Tomcat默认运行在8080端口。转到`http://localhost:8080/`以检查它是否工作。
- en: Installing Eclipse
  id: totrans-83
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Eclipse
- en: Download Eclipse from [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/).
    Choose the **Linux 64 Bit** version of **Eclipse IDE for Java EE Developers**.![Installing
    Eclipse](img/5807OS_01_05.jpg)
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载Eclipse。选择**Linux
    64 Bit**版本的**Eclipse IDE for Java EE Developers**。![安装Eclipse](img/5807OS_01_05.jpg)
- en: Uncompress the downloaded file and move the extracted folder to a convenient
    location (for example, `~/bin`).
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压缩下载的文件，并将提取的文件夹移动到方便的位置（例如，`~/bin`）。
- en: 'Launch Eclipse by executing the `eclipse` binary:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过执行`eclipse`二进制文件来启动Eclipse：
- en: '[PRE18]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: There's more…
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容…
- en: 'Tomcat can be run as a background process using these two scripts:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用这两个脚本将Tomcat作为后台进程运行：
- en: '[PRE19]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: On a development machine, it's convenient to put Tomcat's folder somewhere in
    the home directory (for example, `~/bin`) so that its contents can be updated
    without root privileges.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发机器上，将Tomcat的文件夹放在家目录的某个位置（例如，`~/bin`）是很方便的，这样其内容就可以在不使用root权限的情况下更新。
- en: Installing Java, Maven, Tomcat, and Eclipse on Windows
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Windows上安装Java、Maven、Tomcat和Eclipse
- en: We will first install Java 8\. Then, we will install Maven 3, a build tool similar
    to Ant, to manage the external Java libraries that we will use (Spring, Hibernate,
    and so on). Maven 3 also compiles source files and generates JAR and WAR files.
    We will also install Tomcat 8, a popular web server for Java web applications,
    which we will use throughout this book. JBoss, Jetty, GlassFish, or WebSphere
    could be used instead. Finally, we will install the Eclipse IDE, but you could
    also use NetBeans, IntelliJ IDEA, and so on.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先安装Java 8。然后，我们将安装Maven 3，这是一个类似于Ant的构建工具，用于管理我们将使用的（Spring、Hibernate等）外部Java库。Maven
    3还可以编译源文件并生成JAR和WAR文件。我们还将安装Tomcat 8，这是一个流行的Java网络应用程序的Web服务器，我们将在这本书的整个过程中使用它。也可以使用JBoss、Jetty、GlassFish或WebSphere。最后，我们将安装Eclipse
    IDE，但您也可以使用NetBeans、IntelliJ IDEA等。
- en: How to do it…
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Install Java first, then Maven, Tomcat, and Eclipse.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 首先安装Java，然后安装Maven、Tomcat和Eclipse。
- en: Installing Java
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Java
- en: Download Java from the Oracle website [http://oracle.com](http://oracle.com).
    In the Java SE downloads section, choose the Java SE 8 SDK. Select **Accept the
    License Agreement** and download the **Windows x64** package. The direct link
    to the page is [http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html).![Installing
    Java](img/5807OS_01_06.jpg)
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Oracle网站[http://oracle.com](http://oracle.com)下载Java。在Java SE下载部分，选择Java SE
    8 SDK。选择**接受许可协议**并下载**Windows x64**包。到页面的直接链接是[http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)。![安装Java](img/5807OS_01_06.jpg)
- en: Open the downloaded file, launch it, and complete the installation.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开下载的文件，启动它，并完成安装。
- en: Navigate to **Control Panel** | **System and Security** | **System** | **Advanced
    system settings** | **Environment Variables…**.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**控制面板** | **系统和安全** | **系统** | **高级系统设置** | **环境变量…**。
- en: Add a `JAVA_HOME` system variable with the `C:\Program Files\Java\jdk1.8.0_40`
    value. Change `jdk1.8.0_40` to the actual folder name on your system (this depends
    on the version of Java, which is updated regularly).![Installing Java](img/5807OS_01_07.jpg)
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个值为`C:\Program Files\Java\jdk1.8.0_40`的`JAVA_HOME`系统变量。将`jdk1.8.0_40`更改为您系统上的实际文件夹名称（这取决于Java的版本，它定期更新）。![安装Java](img/5807OS_01_07.jpg)
- en: Test whether it's working by opening Command Prompt and entering `java –version`.![Installing
    Java](img/5807OS_01_08.jpg)
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在命令提示符中输入`java –version`来测试它是否工作。![安装Java](img/5807OS_01_08.jpg)
- en: Installing Maven
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Maven
- en: Download Maven from the Apache website [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi).
    Choose the **Binary zip** file of the current stable version:![Installing Maven](img/5807OS_01_02.jpg)
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Apache网站[http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)下载Maven。选择当前稳定版本的**二进制zip文件**。[安装Maven](img/5807OS_01_02.jpg)
- en: Uncompress the downloaded file.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压下载的文件。
- en: Create a `Programs` folder in your user folder.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的用户文件夹中创建一个`Programs`文件夹。
- en: Move the extracted folder to it.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将提取的文件夹移动到其中。
- en: Navigate to **Control Panel** | **System and Security** | **System** | **Advanced
    system settings** | **Environment Variables…**.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**控制面板** | **系统和安全** | **系统** | **高级系统设置** | **环境变量…**。
- en: Add a `MAVEN_HOME` system variable with the path to the Maven folder. For example,
    `C:\Users\jerome\Programs\apache-maven-3.2.1`.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个`MAVEN_HOME`系统变量，其路径为Maven文件夹。例如，`C:\Users\jerome\Programs\apache-maven-3.2.1`。
- en: Open the `Path` system variable.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开`Path`系统变量。
- en: Append `;%MAVEN_HOME%\bin` to it.![Installing Maven](img/5807OS_01_09.jpg)
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在其后面追加`;%MAVEN_HOME%\bin`。[安装Maven](img/5807OS_01_09.jpg)
- en: Test whether it's working by opening a Command Prompt and entering `mvn –v`.![Installing
    Maven](img/5807OS_01_10.jpg)
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开命令提示符并输入`mvn –v`来测试它是否正在运行。[安装Maven](img/5807OS_01_10.jpg)
- en: Installing Tomcat
  id: totrans-112
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Tomcat
- en: Download Tomcat from the Apache website [http://tomcat.apache.org/download-80.cgi](http://tomcat.apache.org/download-80.cgi)
    and choose the **32-bit/64-bit** **Windows Service Installer** binary distribution.![Installing
    Tomcat](img/5807OS_01_11.jpg)
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Apache网站[http://tomcat.apache.org/download-80.cgi](http://tomcat.apache.org/download-80.cgi)下载Tomcat，并选择**32位/64位Windows服务安装程序**的二进制发行版。[安装Tomcat](img/5807OS_01_11.jpg)
- en: Launch and complete the installation.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动并完成安装。
- en: Tomcat runs on the 8080 port by default. Go to `http://localhost:8080/` to check
    whether it's working.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Tomcat默认运行在8080端口。访问`http://localhost:8080/`以检查它是否正在运行。
- en: Installing Eclipse
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Eclipse
- en: Download Eclipse from [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/).
    Choose the **Windows 64 Bit** version of **Eclipse IDE for Java EE Developers**.![Installing
    Eclipse](img/5807OS_01_12.jpg)
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载Eclipse。选择**Java
    EE开发者Eclipse IDE的Windows 64位版本**。[安装Eclipse](img/5807OS_01_12.jpg)
- en: Uncompress the downloaded file.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压下载的文件。
- en: Launch the `eclipse` program.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动`eclipse`程序。
- en: Creating a Spring web application
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建一个Spring Web应用程序
- en: 'In this recipe, we will build a simple Spring web application with Eclipse.
    We will:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们将使用Eclipse构建一个简单的Spring Web应用程序。我们将：
- en: Create a new Maven project
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个新的Maven项目
- en: Add Spring to it
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将Spring添加到其中
- en: Add two Java classes to configure Spring
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加两个Java类来配置Spring
- en: Create a "Hello World" web page
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个“Hello World”网页
- en: In the next recipe, we will compile and run this web application.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个食谱中，我们将编译并运行这个Web应用程序。
- en: How to do it…
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点…
- en: In this section, we will create a Spring web application in Eclipse.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用Eclipse创建一个Spring Web应用程序。
- en: Creating a new Maven project in Eclipse
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在Eclipse中创建一个新的Maven项目
- en: In Eclipse, in the **File** menu, select **New** | **Project…**.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Eclipse中，在**文件**菜单中选择**新建** | **项目…**。
- en: Under **Maven**, select **Maven Project** and click on **Next >**.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**Maven**下，选择**Maven项目**并点击**下一步 >**。
- en: Select the **Create a simple project (skip archetype selection)** checkbox and
    click on **Next >**.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**创建一个简单项目（跳过存档选择）**复选框，然后点击**下一步 >**。
- en: For the **Group Id** field, enter `com.springcookbook`. For the **Artifact Id**
    field, enter `springwebapp`. For **Packaging**, select `war` and click on **Finish**.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**组ID**字段中输入`com.springcookbook`。在**工件ID**字段中输入`springwebapp`。对于**打包**，选择`war`并点击**完成**。
- en: Adding Spring to the project using Maven
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用Maven将Spring添加到项目中
- en: 'Open Maven''s `pom.xml` configuration file at the root of the project. Select
    the **pom.xml** tab to edit the XML source code directly. Under the `project`
    XML node, define the versions for Java and Spring. Also add the Servlet API, Spring
    Core, and Spring MVC dependencies:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 打开项目根目录下的Maven的`pom.xml`配置文件。选择**pom.xml**选项卡以直接编辑XML源代码。在`project` XML节点下，定义Java和Spring的版本。还要添加Servlet
    API、Spring Core和Spring MVC依赖项：
- en: '[PRE20]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Creating the configuration classes for Spring
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为Spring创建配置类
- en: Create the Java packages `com.springcookbook.config` and `com.springcookbook.controller`;
    in the left-hand side pane **Package Explorer**, right-click on the project folder
    and select **New** | **Package…**.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧窗格**包资源管理器**中，右键单击项目文件夹并选择**新建** | **包…**。
- en: 'In the `com.springcookbook.config` package, create the `AppConfig` class. In
    the **Source** menu, select **Organize Imports** to add the needed import declarations:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `com.springcookbook.config` 包中，创建 `AppConfig` 类。在 **Source** 菜单中，选择 **Organize
    Imports** 以添加所需的导入声明：
- en: '[PRE21]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Still in the `com.springcookbook.config` package, create the `ServletInitializer`
    class. Add the needed import declarations similarly:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 仍然在 `com.springcookbook.config` 包中，创建 `ServletInitializer` 类。添加所需的导入声明如下：
- en: '[PRE22]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Creating a "Hello World" web page
  id: totrans-143
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建一个 "Hello World" 网页
- en: 'In the `com.springcookbook.controller` package, create the `HelloController`
    class and its `hi()` method:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `com.springcookbook.controller` 包中，创建 `HelloController` 类及其 `hi()` 方法：
- en: '[PRE23]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: How it works…
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: This section will give more you details of what happened at every step.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将提供更多关于每个步骤发生情况的详细信息。
- en: Creating a new Maven project in Eclipse
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 Eclipse 中创建一个新的 Maven 项目
- en: 'The generated Maven project is a `pom.xml` configuration file along with a
    hierarchy of empty directories:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 生成的 Maven 项目是一个 `pom.xml` 配置文件，以及一系列空目录：
- en: '[PRE24]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Adding Spring to the project using Maven
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用 Maven 将 Spring 添加到项目中
- en: The declared Maven libraries and their dependencies are automatically downloaded
    in the background by Eclipse. They are listed under **Maven Dependencies** in
    the left-hand side pane **Package Explorer**.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 声明的 Maven 库及其依赖项将由 Eclipse 在后台自动下载。它们列在左侧窗格的 **Package Explorer** 下的 **Maven
    Dependencies** 中。
- en: Tomcat provides the `Servlet API` dependency, but we still declared it because
    our code needs it to compile. Maven will not include it in the generated `.war`
    file because of the `<scope>provided</scope>` declaration.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: Tomcat 提供了 `Servlet API` 依赖，但我们仍然声明了它，因为我们的代码需要它来编译。由于 `<scope>provided</scope>`
    声明，Maven 不会将其包含在生成的 `.war` 文件中。
- en: Creating the configuration classes for Spring
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为 Spring 创建配置类
- en: '`AppConfig` is a Spring configuration class. It is a standard Java class annotated
    with:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '`AppConfig` 是一个 Spring 配置类。它是一个标准的 Java 类，带有以下注解：'
- en: '`@Configuration`: This declares it as a Spring configuration class'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@Configuration`：这声明它为一个 Spring 配置类'
- en: '`@EnableWebMvc`: This enables Spring''s ability to receive and process web
    requests'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@EnableWebMvc`：这使 Spring 能够接收和处理网络请求'
- en: '`@ComponentScan(basePackages = {"com.springcookbook.controller"})`: This scans
    the `com.springcookbook.controller` package for Spring components'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@ComponentScan(basePackages = {"com.springcookbook.controller"})`：这扫描 `com.springcookbook.controller`
    包中的 Spring 组件'
- en: '`ServletInitializer` is a configuration class for Spring''s servlet; it replaces
    the standard `web.xml` file. It will be detected automatically by `SpringServletContainerInitializer`,
    which is automatically called by any Servlet 3\. `ServletInitializer` extends
    the `AbstractAnnotationConfigDispatcherServletInitializer` abstract class and
    implements the required methods:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '`ServletInitializer` 是 Spring servlet 的配置类；它取代了标准的 `web.xml` 文件。它将由 `SpringServletContainerInitializer`
    自动检测，该初始化器由任何 Servlet 3 自动调用。`ServletInitializer` 扩展了 `AbstractAnnotationConfigDispatcherServletInitializer`
    抽象类并实现了所需的方法：'
- en: '`getServletMappings()`: This declares the servlet root URI.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getServletMappings()`：这声明了 servlet 根 URI。'
- en: '`getServletConfigClasses()`: This declares the Spring configuration classes.
    Here, we declared the `AppConfig` class that was previously defined.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getServletConfigClasses()`：这声明了 Spring 配置类。在这里，我们声明了之前定义的 `AppConfig` 类。'
- en: Creating a "Hello World" web page
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建一个 "Hello World" 网页
- en: We created a controller class in the `com.springcookbook.controller` package,
    which we declared in `AppConfig`. When navigating to `http://localhost:8080/hi`,
    the `hi()`method will be called and **Hello, world.** will be displayed in the
    browser. This will be explained further in [Chapter 3](ch03.html "Chapter 3. Using
    Controllers and Views"), *Using Controllers and Views*.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在 `com.springcookbook.controller` 包中创建了一个控制器类，我们在 `AppConfig` 中声明了它。当导航到 `http://localhost:8080/hi`
    时，`hi()` 方法将被调用，浏览器中将显示 **Hello, world**。这将在 [第 3 章](ch03.html "第 3 章。使用控制器和视图")
    *使用控制器和视图* 中进一步解释。
- en: Running a Spring web application
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行 Spring 网络应用程序
- en: In this recipe, we will use the Spring web application from the previous recipe.
    We will compile it with Maven and run it with Tomcat.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将使用之前菜谱中的 Spring 网络应用程序。我们将使用 Maven 编译它，并用 Tomcat 运行它。
- en: How to do it…
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点…
- en: 'Here are the steps to compile and run a Spring web application:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是编译和运行 Spring 网络应用程序的步骤：
- en: 'In `pom.xml`, add this boilerplate code under the `project` XML node. It will
    allow Maven to generate `.war` files without requiring a `web.xml` file:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `pom.xml` 中，在 `project` XML 节点下添加以下样板代码。它将允许 Maven 生成 `.war` 文件，而无需 `web.xml`
    文件：
- en: '[PRE25]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: In Eclipse, in the left-hand side pane **Package Explorer**, select the `springwebapp`
    project folder. In the **Run** menu, select **Run** and choose **Maven install**
    or you can execute `mvn clean install` in a terminal at the root of the project
    folder. In both cases, a `target` folder will be generated with the `springwebapp.war`
    file in it.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Eclipse 中，在左侧窗格 **包资源管理器** 中选择 `springwebapp` 项目文件夹。在 **运行** 菜单中选择 **运行**
    并选择 **Maven 安装**，或者你可以在项目文件夹根目录的终端中执行 `mvn clean install`。在这两种情况下，都会生成一个包含 `springwebapp.war`
    文件的 `target` 文件夹。
- en: Copy the `target/springwebapp.war` file to Tomcat's `webapps` folder.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `target/springwebapp.war` 文件复制到 Tomcat 的 `webapps` 文件夹。
- en: Launch Tomcat.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动 Tomcat。
- en: In a web browser, go to `http://localhost:8080/springwebapp/hi` to check whether
    it's working.![How to do it…](img/5807OS_01_13.jpg)
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在浏览器中，访问 `http://localhost:8080/springwebapp/hi` 检查它是否工作。[如何操作…](img/5807OS_01_13.jpg)
- en: How it works…
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: In `pom.xml` the boilerplate code prevents Maven from throwing an error because
    there's no `web.xml` file. A `web.xml` file was required in Java web applications;
    however, since Servlet specification 3.0 (implemented in Tomcat 7 and higher versions),
    it's not required anymore.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `pom.xml` 中，样板代码防止 Maven 抛出错误，因为没有 `web.xml` 文件。Java 网络应用程序需要 `web.xml` 文件；然而，由于
    Servlet 规范 3.0（在 Tomcat 7 及更高版本中实现），它不再需要。
- en: There's more…
  id: totrans-176
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: 'On Mac OS and Linux, you can create a symbolic link in Tomcat''s `webapps`
    folder pointing to the `.war` file in your project folder. For example:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Mac OS 和 Linux 上，你可以在 Tomcat 的 `webapps` 文件夹中创建一个指向你项目文件夹中 `.war` 文件的符号链接。例如：
- en: '[PRE26]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: So, when the`.war` file is updated in your project folder, Tomcat will detect
    that it has been modified and will reload the application automatically.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，当你的项目文件夹中的 `.war` 文件被更新时，Tomcat 会检测到它已被修改，并将自动重新加载应用程序。
- en: Using Spring in a standard Java application
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在标准 Java 应用程序中使用 Spring
- en: 'In this recipe, we will build a standard Java application (not a web application)
    using Spring. We will:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们将使用 Spring 构建一个标准的 Java 应用程序（不是网络应用程序）。我们将：
- en: Create a new Maven project
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个新的 Maven 项目
- en: Add Spring to it
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 Spring 添加到其中
- en: Add a class to configure Spring
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加一个配置 Spring 的类
- en: Add a `User` class
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加一个 `User` 类
- en: Define a `User` singleton in the Spring configuration class
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Spring 配置类中定义一个 `User` 单例
- en: Use the `User` singleton in the `main()` method
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `main()` 方法中使用 `User` 单例
- en: How to do it…
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: In this section, we will cover the steps to use Spring in a standard (not web)
    Java application.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将介绍在标准（非网络）Java 应用程序中使用 Spring 的步骤。
- en: Creating a new Maven project in Eclipse
  id: totrans-190
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 Eclipse 中创建一个新的 Maven 项目
- en: In Eclipse, in the **File** menu, select **New** | **Project...**.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Eclipse 中，在 **文件** 菜单中选择 **新建** | **项目...**。
- en: Under **Maven**, select **Maven Project** and click on **Next >**.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **Maven** 下，选择 **Maven 项目** 并点击 **下一步 >**。
- en: Select the **Create a simple project (skip archetype selection)** checkbox and
    click on **Next >**.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **创建一个简单项目（跳过存档选择）** 复选框并点击 **下一步 >**。
- en: For the **Group Id** field, enter `com.springcookbook`. For the **Artifact Id**
    field, enter `springapp`. Click on **Finish**.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 **组 ID** 字段，输入 `com.springcookbook`。对于 **工件 ID** 字段，输入 `springapp`。点击 **完成**。
- en: Adding Spring to the project using Maven
  id: totrans-195
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用 Maven 将 Spring 添加到项目中
- en: 'Open Maven''s `pom.xml` configuration file at the root of the project. Select
    the **pom.xml** tab to edit the XML source code directly. Under the `project`
    XML node, define the Java and Spring versions and add the Spring Core dependency:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 打开 Maven 的 `pom.xml` 配置文件，位于项目根目录。选择 **pom.xml** 选项卡以直接编辑 XML 源代码。在 `project`
    XML 节点下，定义 Java 和 Spring 版本并添加 Spring Core 依赖项：
- en: '[PRE27]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Creating a configuration class for Spring
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为 Spring 创建一个配置类
- en: Create the `com.springcookbook.config` Java package; in the left-hand side pane
    **Package Explorer**, right-click on the project and select **New** | **Package…**.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建 `com.springcookbook.config` Java 包；在左侧窗格 **包资源管理器** 中，右键单击项目并选择 **新建** |
    **包…**。
- en: 'In the `com.springcookbook.config` package, create the `AppConfig` class. In
    the **Source** menu, select **Organize Imports** to add the needed import declarations:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `com.springcookbook.config` 包中创建 `AppConfig` 类。在 **源** 菜单中选择 **整理导入** 以添加所需的导入声明：
- en: '[PRE28]'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Creating the User class
  id: totrans-202
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建 User 类
- en: 'Create a `User` Java class with two `String` fields:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个包含两个 `String` 字段的 `User` Java 类：
- en: '[PRE29]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Defining a User singleton in the Spring configuration class
  id: totrans-205
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 Spring 配置类中定义一个 User 单例
- en: 'In the `AppConfig` class, define a `User` bean:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `AppConfig` 类中，定义一个 `User` bean：
- en: '[PRE30]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Using the User singleton in the main() method
  id: totrans-208
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 main() 方法中使用 User 单例
- en: 'Create the `com.springcookbook.main` package with the `Main` class containing
    the `main()` method:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建包含`main()`方法的`com.springcookbook.main`包：
- en: '[PRE31]'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'In the `main()` method, retrieve the User singleton and print its properties:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`main()`方法中，检索User单例并打印其属性：
- en: '[PRE32]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Test whether it's working; in the **Run** menu, select **Run**.![Using the User
    singleton in the main() method](img/5807OS_01_14.jpg)
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试其是否工作；在**运行**菜单中，选择**运行**。![在main()方法中使用User单例](img/5807OS_01_14.jpg)
- en: How it works...
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: We created a Java project to which we added Spring. We defined a `User` bean
    called `admin` (the bean name is by default the bean method name). Spring beans
    are explained in the next chapter.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 我们创建了一个Java项目，并向其中添加了Spring。我们定义了一个名为`admin`的`User`bean（bean名称默认为bean方法名称）。Spring
    beans将在下一章中解释。
- en: In the `Main` class, we created a Spring context object from the `AppConfig`
    class and retrieved the `admin` bean from it. We used the bean and finally, closed
    the Spring context.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 在`Main`类中，我们从`AppConfig`类创建了一个Spring上下文对象，并从中检索了`admin`bean。我们使用了该bean，最后关闭了Spring上下文。
