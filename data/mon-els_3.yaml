- en: Chapter 3. Elasticsearch-head and Bigdesk
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章 Elasticsearch-head和Bigdesk
- en: 'This chapter talks about the Elasticsearch monitoring plugins Elasticsearch-head
    and Bigdesk, along with the Elasticsearch cat API. These utilities are used to
    assess the status of your cluster and to diagnose issues:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章讨论了Elasticsearch监控插件Elasticsearch-head和Bigdesk，以及Elasticsearch cat API。这些实用工具用于评估集群状态和诊断问题：
- en: '**Elasticsearch-head**: This is used to get an idea of your overall cluster
    health, individual node status, and an understanding of your indices'
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Elasticsearch-head**：此工具用于了解集群的整体健康状况、单个节点状态以及理解您的索引'
- en: '**Bigdesk**: This is used to look into the memory, disk, and CPU usage of individual
    nodes in your cluster'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Bigdesk**：此工具用于查看集群中各个节点的内存、磁盘和CPU使用情况'
- en: '**Elasticsearch cat API**: This lets you access many of Elasticsearch''s internal
    metrics without installing any plugins'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Elasticsearch cat API**：此API允许您在不安装任何插件的情况下访问Elasticsearch的许多内部指标'
- en: 'Specifically, this chapter explores the following:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，本章探讨了以下内容：
- en: Configuring an Elasticsearch cluster
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置Elasticsearch集群
- en: Loading sample data into Elasticsearch
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将示例数据加载到Elasticsearch中
- en: Using Elasticsearch-head
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Elasticsearch-head
- en: Using Bigdesk
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Bigdesk
- en: The Elasticsearch cat API
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch cat API
- en: Cluster setup
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 集群设置
- en: This section covers configuring a three-node Elasticsearch cluster and loading
    it with Twitter data.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本节介绍配置一个三节点Elasticsearch集群并将其加载Twitter数据的过程。
- en: Cluster configuration
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 集群配置
- en: 'Setting up an Elasticsearch cluster is simple. All nodes in the cluster should
    be on the same local network and have the same version of Java and Elasticsearch
    installed. For our cluster, we''ll use three Ubuntu Linux 14.04 virtual hosts:
    `elasticsearch-node-01`, `elasticsearch-node-02`, and `elasticsearch-node-03`.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 设置Elasticsearch集群很简单。集群中的所有节点应位于同一本地网络，并安装了相同版本的Java和Elasticsearch。对于我们的集群，我们将使用三个Ubuntu
    Linux 14.04虚拟主机：`elasticsearch-node-01`、`elasticsearch-node-02`和`elasticsearch-node-03`。
- en: 'After installing Elasticsearch on all hosts, update the `elasticsearch.yml`
    configuration file on each, as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有主机上安装Elasticsearch后，按照以下方式更新每个主机的`elasticsearch.yml`配置文件：
- en: 'The configuration for `elasticsearch-node-01` is as follows:'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`elasticsearch-node-01`的配置如下：'
- en: '[PRE0]'
  id: totrans-17
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The configuration for `elasticsearch-node-02` is as follows:'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`elasticsearch-node-02`的配置如下：'
- en: '[PRE1]'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The configuration for `elasticsearch-node-03` is as follows:'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`elasticsearch-node-03`的配置如下：'
- en: '[PRE2]'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Next, install Elasticsearch-head on all nodes in this cluster using the instructions
    found in the previous chapter.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，按照前一章中的说明，在集群中的所有节点上安装Elasticsearch-head。
- en: Now, restart all nodes and verify that the cluster is properly formed by visiting
    Elasticsearch-head at `http://elasticsearch-node-01:9200/_plugin/head/`.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，重新启动所有节点，通过访问`http://elasticsearch-node-01:9200/_plugin/head/`的Elasticsearch-head来验证集群是否正确形成。
- en: 'You should see something like this, with all of your cluster''s nodes listed
    in the leftmost column:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该看到类似以下内容，其中列出了集群的所有节点在左侧列：
- en: '![Cluster configuration](img/B03798_03_01.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![集群配置](img/B03798_03_01.jpg)'
- en: Sample data
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 示例数据
- en: Now that we have a cluster up and running, let's populate it with Twitter data.
    We use Twitter data as an example because it is easy to acquire in large quantities
    and because it is a continuously-flowing stream of information, which is similar
    to a lot of real-world datasets.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经有一个集群在运行，让我们用Twitter数据填充它。我们使用Twitter数据作为示例，因为它容易大量获取，并且它是一个持续流动的信息流，类似于许多现实世界的数据集。
- en: 'Use the Elasticsearch `stream2es` utility to get the Twitter data. This utility
    is available at [https://github.com/elastic/stream2es](https://github.com/elastic/stream2es):'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Elasticsearch的`stream2es`实用工具获取Twitter数据。此实用工具可在[https://github.com/elastic/stream2es](https://github.com/elastic/stream2es)找到：
- en: Create a new Twitter account or log into your Twitter account if you already
    have one.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您已经有了Twitter账户，请创建一个新的Twitter账户或登录您的Twitter账户。
- en: Associate your mobile phone number with the account at [https://support.twitter.com/articles/110250](https://support.twitter.com/articles/110250).
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[https://support.twitter.com/articles/110250](https://support.twitter.com/articles/110250)将您的手机号码与账户关联。
- en: Create a new Twitter application at [https://apps.twitter.com/app/new](https://apps.twitter.com/app/new).
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[https://apps.twitter.com/app/new](https://apps.twitter.com/app/new)创建一个新的Twitter应用程序。
- en: Tip
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: For *website*, you can put a placeholder value such as `http://example.com`
    if you don't have a domain name.
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于*网站*，如果您没有域名，可以放置一个占位符值，例如`http://example.com`。
- en: 'Make a note of your **Consumer Key (API Ke****y)** and **Consumer Secret (API
    Secret)** in the **Ke****ys and Access Tokens** tab:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **密钥和访问令牌** 选项卡中记下你的 **消费者密钥（API 密钥）** 和 **消费者密钥（API 密钥）**：
- en: '[PRE3]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Authorize the app.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 授权应用。
- en: Enter the verification code.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入验证码。
- en: 'Create a Twitter mapping:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建 Twitter 映射：
- en: '[PRE4]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Collect tweets:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 收集推文：
- en: '[PRE5]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Take a look at the tweets coming in:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看正在进入的推文：
- en: '[PRE6]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'After letting `stream2es` run for a while, we get the following:'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在让 `stream2es` 运行一段时间后，我们得到以下结果：
- en: '[PRE7]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Now that we have populated our cluster with some sample data, we can discuss
    how to use Elasticsearch-head, Bigdesk, and the Elasticsearch cat API.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经用一些示例数据填充了我们的集群，我们可以讨论如何使用 Elasticsearch-head、Bigdesk 和 Elasticsearch
    cat API。
- en: Elasticsearch-head
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Elasticsearch-head
- en: In [Chapter 2](ch02.html "Chapter 2. Installation and the Requirements for Elasticsearch"),
    *Installation and the Requirements for Elasticsearch*, we introduced and installed
    Elasticsearch-head, and now we will begin examining its features.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [第 2 章](ch02.html "第 2 章。Elasticsearch 的安装和需求") 中，我们介绍了并安装了 Elasticsearch-head，现在我们将开始检查其功能。
- en: The Overview tab
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概览选项卡
- en: 'The first tab in Elasticsearch-head is the **Overview** tab. This tab answers
    questions such as the following:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Elasticsearch-head 中的第一个选项卡是 **概览** 选项卡。此选项卡回答以下问题：
- en: How many nodes are in the cluster?
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群中有多少个节点？
- en: Is the cluster in a healthy state?
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群是否处于健康状态？
- en: Is all of the cluster's data available?
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是否所有集群数据都可用？
- en: How many indices are in the cluster, and how big are they?
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群中有多少个索引，它们有多大？
- en: How much data is in the cluster?
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群中有多少数据？
- en: Users can also use this tab to perform some basic administrative actions (creating
    indices, deleting indices, and so on).
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 用户还可以使用此选项卡执行一些基本的行政操作（创建索引、删除索引等）。
- en: 'After loading in sample Twitter data from the previous section, our **Overview**
    tab looks like the following:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在加载了上一节中的示例 Twitter 数据后，我们的 **概览** 选项卡看起来如下：
- en: '![The Overview tab](img/B03798__03_02.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![概览选项卡](img/B03798__03_02.jpg)'
- en: 'We can see that three nodes are up and running:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到有三个节点正在运行：
- en: '`elasticsearch-node-01`'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`elasticsearch-node-01`'
- en: '`elasticsearch-node-02`'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`elasticsearch-node-02`'
- en: '`elasticsearch-node-03`'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`elasticsearch-node-03`'
- en: 'We also have one active index that contains our newly loaded Twitter data.
    From this page, we can tell the following:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还有一个包含我们新加载的 Twitter 数据的活跃索引。从这一页，我们可以得知以下信息：
- en: The Twitter index takes up 456 MB
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Twitter 索引占用 456 MB
- en: The Twitter index contains 150,765 documents
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Twitter 索引包含 150,765 个文档
- en: Cluster states
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 集群状态
- en: 'An Elasticsearch cluster can be in any of these three states:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 Elasticsearch 集群可以处于以下三种状态之一：
- en: '**Green**: All data is available and all shard replicas are assigned.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**绿色**：所有数据都可用，所有分片副本都已分配。'
- en: Note
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The previous screenshot tells that we are currently in a `green` state.
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 之前的截图显示我们目前处于 `绿色` 状态。
- en: '**Yellow**: All data is available, but not all replicas are assigned:'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**黄色**：所有数据都可用，但并非所有副本都已分配：'
- en: This usually happens in a one-node cluster when you have a replica size of *>
    0*, or in a multi node cluster right after a node goes down.
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这通常发生在只有一个节点的集群中，当你有大于 *0* 的副本大小时，或者在多节点集群中，节点宕机后立即发生。
- en: If a node in your cluster goes down, a `yellow` state will resolve itself after
    all replica shards are re-assigned.
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你的集群中某个节点宕机，在所有副本分片重新分配后，`黄色` 状态会自行解决。
- en: Elasticsearch will automatically try to reassign shards after a default 1-minute
    wait time to see if the problematic node reappears.
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch 将在默认的 1 分钟等待时间后自动尝试重新分配分片，以查看有问题的节点是否重新出现。
- en: '**Red**: Not all data is available, and not all shards are assigned.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**红色**：并非所有数据都可用，并非所有分片都已分配。'
- en: This state deserves immediate attention. This is usually caused by multiple
    node failures at once due to a simultaneous restart, power failure, or network
    failure in your cluster.
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这种状态需要立即关注。这通常是由于集群中同时发生多个节点故障，例如同时重启、电源故障或网络故障所引起的。
- en: The best way to resolve this state is to bring all of the down nodes in your
    cluster back up.
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解决这种状态的最佳方法是让集群中所有宕机的节点重新启动。
- en: Note that even in a `red` state, Elasticsearch will still return query results.
    However, query counts will be inaccurate.
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注意，即使在 `红色` 状态下，Elasticsearch 仍然会返回查询结果。然而，查询计数将不准确。
- en: 'For the purposes of demonstration, we''ll shut down `elasticsearch-node-02`
    and `elasticsearch-node-03` to get a sense of what the cluster looks like in different
    states:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示目的，我们将关闭 `elasticsearch-node-02` 和 `elasticsearch-node-03`，以了解集群在不同状态下的样子：
- en: 'Shut down `elasticsearch-node-02`:'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '关闭`elasticsearch-node-02`:'
- en: '[PRE8]'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Refresh Elasticsearch-head. We should see something like this:'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 刷新Elasticsearch-head。我们应该看到类似以下的内容：
- en: '![Cluster states](img/B03798__03_03.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![集群状态](img/B03798__03_03.jpg)'
- en: Note that `elasticsearch-node-02` is no longer present, and that the cluster
    is in a `yellow` state.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，`elasticsearch-node-02`不再存在，并且集群处于`黄色`状态。
- en: Remember that a `yellow` state means that all data is still available. More
    node failures may result in a `red` state or data being unavailable.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，`黄色`状态表示所有数据仍然可用。更多的节点故障可能会导致`红色`状态或数据不可用。
- en: 'After waiting a few minutes, Elasticsearch will start to reassign these shards
    to the remaining hosts:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 等待几分钟之后，Elasticsearch将开始将这些分片重新分配到剩余的主机：
- en: '![Cluster states](img/B03798__03_04.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![集群状态](img/B03798__03_04.jpg)'
- en: 'After reassignment is complete; the cluster will be back in a `green` state:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在重新分配完成后，集群将恢复到`绿色`状态：
- en: '![Cluster states](img/B03798__03_05.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![集群状态](img/B03798__03_05.jpg)'
- en: 'Let''s experiment and turn the cluster into a `red` state:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进行实验，将集群状态转换为`红色`：
- en: Turn `elasticsearch-node-02` back on and wait until `elasticsearch-node-02`
    has a few shards assigned to it.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`elasticsearch-node-02`重新启动，并等待直到`elasticsearch-node-02`分配了几个分片。
- en: Once this happens, shut down both `elasticsearch-node-02` and `elasticsearch-node-03`
    without giving the cluster time to reassign shards.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦发生这种情况，关闭`elasticsearch-node-02`和`elasticsearch-node-03`，不要给集群时间重新分配分片。
- en: 'You can do this on Elasticsearch-head by selecting **Shutdown** from **Actions**
    next to each respective node or on the command line:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在Elasticsearch-head中选择每个相应节点旁边的**关闭**操作，或者通过命令行进行：
- en: '[PRE9]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: After shutting down these nodes and refreshing Elasticsearch-head, we'll see
    something like this:![Cluster states](img/B03798__03_06.jpg)
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭这些节点并刷新Elasticsearch-head后，我们会看到类似以下的内容：![集群状态](img/B03798__03_06.jpg)
- en: Note that only shards `1` and `2` in the Twitter index are assigned, and shard
    `0` is unassigned. As a result, the index size and document counts have decreased
    from 456 MB to 305 MB and 150,765 to 100,573, respectively.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注意，只有Twitter索引中的`1`和`2`分片被分配，而分片`0`是未分配的。因此，索引大小和文档数量分别从456 MB减少到305 MB，从150,765减少到100,573。
- en: Once we restart `elasticsearch-node-02` and `elasticsearch-node-03`, the cluster
    will recover and return to a `green` state.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦我们重启`elasticsearch-node-02`和`elasticsearch-node-03`，集群将恢复并返回到`绿色`状态。
- en: Node and index actions
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 节点和索引操作
- en: 'Next to the name of each node and index, you''ll see dropdowns labeled **Info**
    and **Actions**. Each of the links in these dropdowns corresponds to various Elasticsearch
    API calls:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个节点和索引的名称旁边，您会看到标记为**信息**和**操作**的下拉菜单。这些下拉菜单中的每个链接都对应于各种Elasticsearch API调用：
- en: The **Info** links all return **JSON** documents with details about the status
    of your index or node
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息**链接会返回所有包含有关您的索引或节点状态的详细信息的**JSON**文档'
- en: The **Actions** links provide convenience methods to manipulate your cluster
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作**链接提供了方便的方法来操作您的集群'
- en: 'The following table goes into more detail about each of these links:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的表格将更详细地介绍这些链接中的每一个：
- en: '| Target (Index or Node) | Type (action or info) | Name (for example, "Node
    Stats") | Elasticsearch API methods | Description |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| 目标（索引或节点） | 类型（操作或信息） | 名称（例如，“节点状态”） | Elasticsearch API方法 | 描述 |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| Node | **Info** | **Cluster Node Info** | `GET /_nodes` | This provides the
    node''s Elasticsearch configuration, installed plugins, and the server''s available
    memory, CPU, and disk space. |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| 节点 | **信息** | **集群节点信息** | `GET /_nodes` | 这提供了节点的Elasticsearch配置、已安装的插件以及服务器可用的内存、CPU和磁盘空间。
    |'
- en: '| Node | **Info** | **Node Stat** **s** | `GET /_nodes/stats?all=true` | This
    provides counts and statistics of the number of Elasticsearch documents stored
    on the node. Also provides JVM, network, and filesystem metrics. |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| 节点 | **信息** | **节点状态** | `GET /_nodes/stats?all=true` | 这提供了存储在节点上的Elasticsearch文档的数量和统计信息。还提供了JVM、网络和文件系统指标。
    |'
- en: '| Node | **Action** | **Shutdown** | `POST /_cluster/nodes/<NODE_ID>/_shutdown`
    | This shuts down the Elasticsearch process on the specified node. |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 节点 | **操作** | **关闭** | `POST /_cluster/nodes/<NODE_ID>/_shutdown` | 这将在指定的节点上关闭Elasticsearch进程。
    |'
- en: '| Index | **Info** | **Index Status** | `GET /_status` | This provides information
    about the specified index, such as the state, number of documents, size, and various
    other metrics. |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **信息** | **索引状态** | `GET /_status` | 这提供了有关指定索引的信息，例如状态、文档数量、大小以及各种其他指标。
    |'
- en: '| Index | **Info** | **Index Metadata** | `GET /_cluster/state` | This provides
    the index''s mapping, aliases, and settings. |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **信息** | **索引元数据** | `GET /_cluster/state` | 这提供了索引的映射、别名和设置。 |'
- en: '| Index | **Actions** | **New Alias...** | `POST /_aliases` | This creates
    a new index alias. |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **新建别名...** | `POST /_aliases` | 这将创建一个新的索引别名。 |'
- en: '| Index | **Actions** | **Refresh** | `POST /<INDEX_NAME>/_refresh` | This
    refreshes the index. |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **刷新** | `POST /<INDEX_NAME>/_refresh` | 这将刷新索引。 |'
- en: '| Index | **Actions** | **Flush** | `POST /<INDEX_NAME>/_flush` | This flushes
    the index. |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **刷新** | `POST /<INDEX_NAME>/_flush` | 这将刷新索引。 |'
- en: '| Index | **Actions** | **Optimize...** | `POST /<INDEX_NAME>/_optimize` |
    This optimizes the index. |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **优化...** | `POST /<INDEX_NAME>/_optimize` | 这将优化索引。 |'
- en: '| Index | **Actions** | **Gateway Snapshot** | `POST /<INDEX_NAME>/_gateway/snapshot`
    | This takes a snapshot of the index. |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **网关快照** | `POST /<INDEX_NAME>/_gateway/snapshot` | 这将获取索引的快照。
    |'
- en: '| Index | **Actions** | **Test Analyzer** | `GET /<INDEX_NAME>/_analyze?text=TEXT`
    | This analyzes the passed in text using the index''s default text analyzer. |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **测试分析器** | `GET /<INDEX_NAME>/_analyze?text=TEXT` | 这将使用索引的默认文本分析器分析传入的文本。
    |'
- en: '| Index | **Actions** | **Close** | `POST /<INDEX_NAME>/_analyze` | This closes
    an open index. |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **关闭** | `POST /<INDEX_NAME>/_analyze` | 这将关闭一个打开的索引。 |'
- en: '| Index | **Actions** | **Open** | `POST /<INDEX_NAME>/_open` | This opens
    a closed index. |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **打开** | `POST /<INDEX_NAME>/_open` | 这将打开一个关闭的索引。 |'
- en: '| Index | **Actions** | **Delete** | `POST /<INDEX_NAME>/_delete` | This deletes
    an index. |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| 索引 | **操作** | **删除** | `POST /<INDEX_NAME>/_delete` | 这将删除索引。 |'
- en: Note
  id: totrans-119
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: The **Info** actions just listed (**Cluster Node Info**, **Node Stats**, **Index
    Status**, and **Index Metadata**) provide a plethora of information about the
    state of your cluster and data holdings. However, looking at the JSON responses
    for these items can be a little overwhelming.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 刚才列出的**信息**操作（**集群节点信息**、**节点统计**、**索引状态**和**索引元数据**）提供了大量关于集群状态和数据持有情况的信息。然而，查看这些项目的JSON响应可能会有些令人眼花缭乱。
- en: Bigdesk is the next tool that we'll look at in this chapter. Both Bigdesk and
    Marvel, a tool that we'll examine in the next chapter, take many of these metrics
    and display them in easy-to-read charts and graphs.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: Bigdesk是我们将在本章中探讨的下一个工具。Bigdesk和我们在下一章将要探讨的工具Marvel都采用了许多这些指标，并以易于阅读的图表和图形的形式展示出来。
- en: The Indices tab
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 索引标签页
- en: The **Indices** tab provides a list of the indices in your cluster, their disk
    size usage, and the number of documents in each. It is also a way to create a
    new index.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '**索引**标签页提供了集群中索引的列表、它们的磁盘大小使用情况和每个索引中的文档数量。它也是一种创建新索引的方式。'
- en: Note
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: This tab doesn't offer any additional information about an index beyond what
    is provided in the **Overview** tab.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 此标签页不提供关于索引的任何额外信息，除了在**概览**标签页中提供的信息。
- en: '![The Indices tab](img/B03798__03_07.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![索引标签页](img/B03798__03_07.jpg)'
- en: The Browser tab
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 浏览器标签页
- en: 'This tab lets you browse, view, and run basic filter queries against the documents
    in your indices. The following screenshot is an example of what a document view
    will look like in the **Browser** tab:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 此标签页允许你浏览、查看和运行基本过滤查询，针对索引中的文档。以下截图是**浏览器**标签页中文档视图的一个示例：
- en: '![The Browser tab](img/B03798__03_08.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![浏览器标签页](img/B03798__03_08.jpg)'
- en: The Structured Query tab
  id: totrans-130
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 结构化查询标签页
- en: The **Structured Query** tab is an advanced query builder to explore the documents
    in your index. This tab is useful when you want to build a complex query without
    writing out the full JSON request body.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '**结构化查询**标签页是一个高级查询构建器，用于探索索引中的文档。当你想要构建一个复杂的查询而不需要写出完整的JSON请求体时，此标签页非常有用。'
- en: 'The following screenshot shows a sample query and results created using this
    interface:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了使用此界面创建的示例查询和结果：
- en: '![The Structured Query tab](img/B03798__03_09.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![结构化查询标签页](img/B03798__03_09.jpg)'
- en: The Any Request tab
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 任意请求标签页
- en: 'The **Any Request** tab allows you to run arbitrary **API** calls against your
    cluster and view the results in **JSON**. The following screenshot shows a sample
    aggregation query:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '**任意请求**标签页允许你在集群上运行任意的**API**调用，并在**JSON**中查看结果。以下截图显示了示例聚合查询：'
- en: '![The Any Request tab](img/B03798__03_10.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![任意请求标签页](img/B03798__03_10.jpg)'
- en: The official website
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 官方网站
- en: For more information about Elasticsearch-head, visit the plugin's website at
    [https://mobz.github.io/elasticsearch-head/](https://mobz.github.io/elasticsearch-head/).
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 想要了解更多关于Elasticsearch-head的信息，请访问插件网站[https://mobz.github.io/elasticsearch-head/](https://mobz.github.io/elasticsearch-head/)。
- en: Bigdesk
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Bigdesk
- en: Bigdesk is a tool to look into various JVM and operating-system level metrics
    about your cluster. If your cluster runs slowly or experiences unusual errors,
    Bigdesk is a good place to check for anything out of the ordinary.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: Bigdesk是一个用于查看集群的各个JVM和操作系统级别指标的工具。如果你的集群运行缓慢或遇到异常错误，Bigdesk是一个检查任何异常的好地方。
- en: 'After following the installation instructions from the previous chapter, access
    Bigdesk by visiting `http://elasticsearch-node-01:9200/plugin/bigdesk/`. The initial
    landing page looks like this:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在遵循上一章的安装说明后，通过访问`http://elasticsearch-node-01:9200/plugin/bigdesk/`来访问Bigdesk。初始着陆页面看起来如下：
- en: '![Bigdesk](img/B03798__03_11.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![Bigdesk](img/B03798__03_11.jpg)'
- en: 'Like Elasticsearch-head, this page shows the nodes in your cluster and the
    cluster health. Click on any of the nodes listed in the top row to display its
    individual metrics:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于Elasticsearch-head，这个页面显示了你的集群节点和集群健康状态。点击顶部行中列出的任何节点以显示其单个指标：
- en: '![Bigdesk](img/B03798__03_12.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![Bigdesk](img/B03798__03_12.jpg)'
- en: In this screenshot, we selected `elasticsearch-node-02` and are looking at **JVM**
    metrics. A notable chart in this section is the **Heap Mem** figure. If you are
    using close to the maximum amount of committed heap memory, you will want to increase
    your heap memory by setting `ES_HEAP_SIZE` to at the most half of your total available
    memory.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在此截图中，我们选择了`elasticsearch-node-02`并正在查看**JVM**指标。本节中的一个显著图表是**Heap Mem**。如果你接近最大已提交堆内存量，你将希望通过将`ES_HEAP_SIZE`设置为最多你可用内存的一半来增加你的堆内存。
- en: 'Further down, we see operating system metrics, namely:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面，我们可以看到操作系统指标，具体如下：
- en: CPU usage
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CPU使用率
- en: Memory usage
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内存使用
- en: Swap space usage
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交换空间使用
- en: Load average
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平均负载
- en: '![Bigdesk](img/B03798__03_13.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![Bigdesk](img/B03798__03_13.jpg)'
- en: 'Below operating system metrics, we come to process level metrics, including
    the following:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在操作系统指标下方，我们来到进程级别指标，包括以下内容：
- en: Open file descriptors
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 打开的文件描述符
- en: Process memory usage
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进程内存使用
- en: CPU usage
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CPU使用率
- en: '![Bigdesk](img/B03798__03_14.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![Bigdesk](img/B03798__03_14.jpg)'
- en: Refer to the operating system and process metrics charts if you are experiencing
    slow queries or slow data index operations to get a sense of the performance bottleneck.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在经历慢查询或慢数据索引操作时，可以参考操作系统和进程指标图表，以了解性能瓶颈。
- en: 'Continuing down the page, we''ll see some more notable charts, including:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 继续向下滚动页面，我们会看到一些更显著的图表，包括：
- en: Cache size
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缓存大小
- en: Indexing operations
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 索引操作
- en: Filesystem activity
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件系统活动
- en: '![Bigdesk](img/B03798__03_15.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![Bigdesk](img/B03798__03_15.jpg)'
- en: The **Cache size** chart is an important figure in this screenshot. The **ID**,
    **Filter**, and **Field** caches can fill up based on the type of queries you
    run. If they get too large, look at your queries for possible modifications to
    keep cache sizes down.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '**缓存大小**图表是此截图中的重要数据。根据你运行的查询类型，**ID**、**Filter**和**Field**缓存可能会填满。如果它们变得过大，检查你的查询以进行可能的修改，以保持缓存大小。'
- en: The Bigdesk charts are also useful for finding configuration errors. For example,
    if we meant to configure our node to use `32GB` of memory and a maximum of `65535`
    open file descriptors, but the **JVM Heap Mem** chart shows only show `247MB`
    of committed memory and the **Process File Descriptors** chart shows a limit of
    `1024` files, we'll know we didn't configure the node correctly.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: Bigdesk图表对于查找配置错误也很有用。例如，如果我们打算将我们的节点配置为使用`32GB`的内存和最多`65535`个打开的文件描述符，但**JVM
    Heap Mem**图表只显示`247MB`的已提交内存，而**Process File Descriptors**图表显示文件限制为`1024`，我们将知道我们没有正确配置节点。
- en: Note
  id: totrans-165
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For more information about Bigdesk, visit the plugin's website at [http://bigdesk.org/](http://bigdesk.org/).
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 想了解更多关于Bigdesk的信息，请访问插件网站[http://bigdesk.org/](http://bigdesk.org/)。
- en: The Elasticsearch cat API
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Elasticsearch cat API
- en: Think of the **Elasticsearch cat API** as a simpler version of the **Elasticsearch
    Cluster** and **Indices APIs** mentioned earlier. The cat API returns results
    in an easy-to-read, tab-separated format, unlike the JSON returned by the Cluster
    and Indices APIs.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 将**Elasticsearch cat API**视为前面提到的**Elasticsearch Cluster**和**Indices APIs**的简化版本。cat
    API以易于阅读、以制表符分隔的格式返回结果，与集群和索引API返回的JSON不同。
- en: A complete list of API methods is available at [https://www.elastic.co/blog/introducing-cat-api](https://www.elastic.co/blog/introducing-cat-api),
    but there are some highlights, which we cover in the following sections.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: API方法的完整列表可在[https://www.elastic.co/blog/introducing-cat-api](https://www.elastic.co/blog/introducing-cat-api)找到，但以下是一些亮点，我们将在以下部分进行介绍。
- en: Background
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 背景
- en: 'Elasticsearch-head and Bigdesk are, for the most part, powered by the Elasticsearch
    APIs:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: Elasticsearch-head 和 Bigdesk 主要由 Elasticsearch API 驱动：
- en: '**Cluster** **API**: [https://www.elastic.co/guide/en/elasticsearch/reference/1.7/cluster.html](https://www.elastic.co/guide/en/elasticsearch/reference/1.7/cluster.html).'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**集群** **API**: [https://www.elastic.co/guide/en/elasticsearch/reference/1.7/cluster.html](https://www.elastic.co/guide/en/elasticsearch/reference/1.7/cluster.html).'
- en: '**Indices** **API**: [https://www.elastic.co/guide/en/elasticsearch/reference/1.7/indices.html](https://www.elastic.co/guide/en/elasticsearch/reference/1.7/indices.html).'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**索引** **API**: [https://www.elastic.co/guide/en/elasticsearch/reference/1.7/indices.html](https://www.elastic.co/guide/en/elasticsearch/reference/1.7/indices.html).'
- en: 'These two APIs provide a plethora of information about the inner workings of
    Elasticsearch. However, they also return large *JSON* documents that are complicated
    to interpret quickly. For example, here''s a snippet from calling the Indices
    Stats API:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个 API 提供了大量关于 Elasticsearch 内部工作原理的信息。然而，它们也返回了复杂的 *JSON* 文档，难以快速解读。例如，以下是调用索引统计
    API 的一个片段：
- en: '[PRE10]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: It's probably not immediately clear that the `size_in_bytes` value of `477638305`
    translates to 455 MB.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能不会立即清楚 `size_in_bytes` 的 `477638305` 值等于 455 MB。
- en: Count
  id: totrans-177
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 计数
- en: 'This endpoint provides a document count for the entire cluster:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 此端点提供整个集群的文档计数：
- en: '[PRE11]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'This gives the output:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了输出：
- en: '[PRE12]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Note
  id: totrans-182
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Passing the `v` option to the cat API shows a header row.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 将 `v` 选项传递给 cat API 会显示标题行。
- en: 'The output columns represent the following:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 输出列表示以下内容：
- en: '`epoch`: This represents a Unix timestamp'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`epoch`: 这表示 Unix 时间戳'
- en: '`timestamp`: This represents the time of day'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestamp`: 这表示一天中的时间'
- en: '`count`: This represents the number of documents in the cluster'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`count`: 这表示集群中的文档数量'
- en: Health
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 健康
- en: 'This endpoint shows the health color code for the cluster:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 此端点显示集群的健康颜色代码：
- en: '[PRE13]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'This gives the output:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了输出：
- en: '[PRE14]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'These columns represent the following:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 这些列表示以下内容：
- en: '`epoch`: This represents a Unix timestamp'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`epoch`: 这表示 Unix 时间戳'
- en: '`timestamp`: This represents the time of day'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestamp`: 这表示一天中的时间'
- en: '`cluster`: This represents a cluster name'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cluster`: 这表示集群名称'
- en: '`status`: This represents a cluster status (`green`, `yellow`, or `red`)'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`status`: 这表示集群状态（`green`、`yellow` 或 `red`）'
- en: '`node.total`: This represents the number of nodes in the cluster'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`node.total`: 这表示集群中的节点数量'
- en: '`node.data`: This represents the number of data nodes in the cluster'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`node.data`: 这表示集群中的数据节点数量'
- en: '`shards`: This represents the number of total shards in the cluster'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`shards`: 这表示集群中总分片数量'
- en: '`pri`: This represents the number of primary shards (as opposed to replica
    shards)'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pri`: 这表示主分片数量（与副本分片相对）'
- en: '`relo`: This represents the number of shards currently relocating'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`relo`: 这表示当前正在重新定位的分片数量'
- en: '`init`: This represents the number of shards currently initializing'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`init`: 这表示当前正在初始化的分片数量'
- en: '`unassign`: This represents the number of unassigned shards'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`unassign`: 这表示未分配分片数量'
- en: '`pending_tasks`: This represents the number of cluster tasks in the backlog'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pending_tasks`: 这表示集群任务队列中的任务数量'
- en: Indices
  id: totrans-206
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 索引
- en: 'This endpoint provides a list of all indices, their document count, and size
    in your cluster:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 此端点提供集群中所有索引的列表、文档计数和大小：
- en: '[PRE15]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'This gives the output:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了输出：
- en: '[PRE16]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'This output has one line for each index in the cluster. The output columns
    represent the following:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 此输出为集群中的每个索引一行。输出列表示以下内容：
- en: '`health`: This is index health (`green`, `yellow`, or `red`)'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`health`: 这是索引健康状态（`green`、`yellow` 或 `red`）'
- en: '`status`: This indicates whether the index is open or closed'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`status`: 这表示索引是打开还是关闭'
- en: '`index`: This is the index name'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`index`: 这是索引名称'
- en: '`pri`: This is the number of primary shards'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pri`: 这是主分片数量'
- en: '`rep`: This is the replication level (`1` means all shards are replicated once)'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rep`: 这是复制级别（`1` 表示所有分片都复制一次）'
- en: '`docs.count`: This is the number of documents in this index'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`docs.count`: 这是此索引中的文档数量'
- en: '`docs.deleted`: This is the number of deleted documents'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`docs.deleted`: 这是已删除文档的数量'
- en: '`store.size`: This is the total index size'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`store.size`: 这是总索引大小'
- en: '`pri.store.size`: This is the size of index without replicas'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pri.store.size`: 这是索引（无副本）的大小'
- en: Shards
  id: totrans-221
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分片
- en: 'This endpoint provides a list of index shards and how they are distributed:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 此端点提供索引分片列表及其分布情况：
- en: '[PRE17]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This gives the output:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了输出：
- en: '[PRE18]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Each row in this output is for a single shard in the cluster. The columns represent
    the following:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 此输出中的每一行代表集群中的一个单个分片。列表示以下内容：
- en: '`index`: This is the index name'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`index`: 这是索引名称'
- en: '`shard`: This is the shard number'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`shard`: 这是碎片编号'
- en: '`prirep`: This is `p` if a primary shard, `r` if a replica'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prirep`: 如果是主碎片则为`p`，如果是副本则为`r`'
- en: '`state`: This is the availability of the shard'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`state`: 这是碎片的可用性'
- en: '`docs`: This is the number of documents in this shard'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`docs`: 这是该碎片中的文档数量'
- en: '`store`: This is the size of the shard on disk'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`store`: 这是碎片在磁盘上的大小'
- en: '`ip`: This is the IP address where the shard is located'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ip`: 这是碎片所在的服务器IP地址'
- en: '`node`: This is the node name where the shard is located'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`node`: 这是碎片所在的服务器名称'
- en: Summary
  id: totrans-235
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter discussed how to configure and load data into a three-node Elasticsearch
    cluster. Additionally, it covered how to monitor a cluster using Elasticsearch-head,
    Bigdesk, and the cat API.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 本章讨论了如何配置和将数据加载到三节点Elasticsearch集群中。此外，还介绍了如何使用Elasticsearch-head、Bigdesk和cat
    API监控集群。
- en: The next chapter will discuss Marvel—the official Elasticsearch monitoring tool.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将讨论Marvel——官方Elasticsearch监控工具。
