- en: Chapter 7. Reporting and Documentation
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 7 章。报告和文档
- en: 'In this chapter, we will see how we can use the Maven Site plugin, as well
    as configure various reports on a site. We will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将了解如何使用 Maven Site 插件以及配置网站上的各种报告。我们将涵盖以下配方：
- en: Documenting with the Maven Site plugin
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Maven Site 插件进行文档编写
- en: Generating Javadocs for a site
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为网站生成 Javadoc
- en: Generating source cross-reference for a site
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为网站生成源交叉引用
- en: Generating unit test reports for a site
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为网站生成单元测试报告
- en: Generating code coverage reports for a site
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为网站生成代码覆盖率报告
- en: Generating code quality reports for a site
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为网站生成代码质量报告
- en: Generating selective reports
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成选择性报告
- en: Deploying a site
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发布网站
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: One of the most powerful features of Maven is the ability to create documentation
    for the project. It is useful to have a self-documenting project that can be published
    to a website without additional effort. Maven provides the ability to generate
    this documentation, known as a site report, and publish it to a website.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Maven 最强大的功能之一是能够为项目创建文档。拥有一个可以轻松发布到网站而无需额外努力的自我文档化的项目非常有用。Maven 提供了生成此类文档的能力，称为网站报告，并将其发布到网站。
- en: Many Maven plugins use the Site feature to generate project documentation. In
    fact, Maven itself uses the Site plugin to generate its website.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 许多 Maven 插件使用 Site 功能来生成项目文档。实际上，Maven 本身也使用 Site 插件来生成其网站。
- en: Documenting with the Maven Site plugin
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Maven Site 插件进行文档编写
- en: Along with the `clean` and `default` lifecycle, Maven also consists of a `site`
    lifecycle. Like `clean`, `site` is implemented by a Maven plugin, in this case,
    the Maven Site plugin.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 除了 `clean` 和 `default` 生命周期，Maven 还包含一个 `site` 生命周期。像 `clean` 一样，`site` 也是通过
    Maven 插件实现的，在这种情况下，是 Maven Site 插件。
- en: Getting ready
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Maven is set up on your system and is verified for work. To do this, refer to
    the first three recipes of [Chapter 1](ch01.html "Chapter 1. Getting Started"),
    *Getting Started*.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Maven 已在您的系统上设置并验证其工作。要执行此操作，请参阅第 1 章的前三个配方，*入门*。
- en: How to do it...
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to generate documentation using the Maven Site plugin:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤使用 Maven Site 插件生成文档：
- en: Open one of the Maven projects for which we need to generate a site report (for
    instance, `project-with-documentation`).
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开我们需要生成网站报告的 Maven 项目之一（例如，`project-with-documentation`）。
- en: 'Run the following command:'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE0]'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Observe the output as shown in the following screenshot:![How to do it...](img/6124OS_07_01.jpg)
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 观察以下截图所示的输出：![如何操作...](img/6124OS_07_01.jpg)
- en: Open the `index.html` file generated in the `target/site` folder:![How to do
    it...](img/6124OS_07_02.jpg)
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开在 `target/site` 文件夹中生成的 `index.html` 文件：![如何操作...](img/6124OS_07_02.jpg)
- en: How it works...
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: '`Site` is one of the Maven lifecycles. When the `mvn site` command is run,
    it invokes the `site` phase of the `site` lifecycle. The `site` goal of the Maven
    Site plugin is bound to this phase and is invoked.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '`Site` 是 Maven 生命周期之一。当运行 `mvn site` 命令时，它调用 `site` 生命周期的 `site` 阶段。Maven Site
    插件的 `site` 目标绑定到这个阶段并被调用。'
- en: 'The `site` goal performs a series of steps to generate the report. It uses
    various elements in the pom file related to this. Let us look at the various items
    in the default report:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '`site` 目标执行一系列步骤以生成报告。它使用 pom 文件中与此相关的各种元素。让我们看看默认报告中的一些项目：'
- en: '![How it works...](img/6124OS_07_03.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理...](img/6124OS_07_03.jpg)'
- en: 'In addition to this, the `site` command generates reports based on the contents
    of the `reporting` section of the pom:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，`site` 命令根据 pom 文件中 `reporting` 部分的内 容生成报告：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: A number of Maven plugins can generate reports defined and configured under
    the `reporting` element. We will see many reports in the following sections.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 许多 Maven 插件可以生成在 `reporting` 元素下定义和配置的报告。在以下部分中，我们将看到许多报告。
- en: There's more...
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'We have only seen what the default `site` command offers. The Maven Site plugin
    offers various configurations to make many more customizations. Some of them are
    as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们只看到了默认的 `site` 命令提供的功能。Maven Site 插件提供了各种配置选项，以进行更多自定义。以下是一些示例：
- en: 'Create a different documentation format: The default format of the site is
    APT (almost plain text), a wiki-like format'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建不同的文档格式：网站的默认格式是 APT（几乎纯文本），一种类似维基的格式
- en: 'Override the default navigation tree: This is required if you want to insert
    additional content in the site'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 覆盖默认导航树：如果您想在网站上插入额外内容，则需要此操作
- en: 'Creating skins: This is needed if you want to style the site reports differently'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建皮肤：如果您想以不同的方式设计站点报告，则需要此操作
- en: 'Let us see how to do some of these:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何进行一些这些操作：
- en: 'Add the `site.xml` file with the following content to the `src\site` folder
    of the `project-with-documentation` project folder:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将包含以下内容的`site.xml`文件添加到`project-with-documentation`项目文件夹的`src\site`文件夹中：
- en: '[PRE2]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Add the image named `packt.png` to the `src\site\resources\images` folder.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将名为`packt.png`的图片添加到`src\site\resources\images`文件夹中。
- en: 'Now, add the `index.apt` file in the `src\site\apt` folder with the following
    content:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将包含以下内容的`index.apt`文件添加到`src\site\apt`文件夹中：
- en: '[PRE3]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Run the following command:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE4]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: View the generated site report:![There's more...](img/6124OS_07_04.jpg)
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看生成的站点报告：![还有更多...](img/6124OS_07_04.jpg)
- en: You can see a customized site page with the logo and the content that we specified.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到一个带有标志和我们所指定的内容的自定义站点页面。
- en: Generating Javadocs for a site
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为站点生成Javadocs
- en: Documentation for Java projects is created using Javadocs. Maven provides support
    not only to generate Javadocs, but also to publish them as part of the site. Plugins
    configured within the `reporting` element will generate content for the site.
    When they are configured within the `build` element, they can generate reports
    independent of site.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Javadocs创建Java项目的文档。Maven不仅提供生成Javadocs的支持，还提供将其作为站点一部分发布。配置在`reporting`元素内的插件将为站点生成内容。当它们配置在`build`元素内时，它们可以生成与站点无关的报告。
- en: How to do it...
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to generate Javadocs for a site:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤生成站点的Javadocs：
- en: Open the Maven project `project-with-documentation`.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Maven项目`project-with-documentation`。
- en: 'Add the following section in the `pom.xml` file:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`pom.xml`文件中添加以下部分：
- en: '[PRE5]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Run the following command:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE6]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: See the report generated:![How to do it...](img/6124OS_07_05.jpg)
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看生成的报告：![如何操作...](img/6124OS_07_05.jpg)
- en: Click on the **JavaDocs** link:![How to do it...](img/6124OS_07_06.jpg)
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**JavaDocs**链接：![如何操作...](img/6124OS_07_06.jpg)
- en: How it works...
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: We added the Javadoc plugin to the `reporting` section of `pom`. When the Site
    plugin runs, it examines this section and runs the reports configured there. In
    this case, it found `javadoc` and ran the relevant plugin to generate the Javadoc
    reports for the project.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将Javadoc插件添加到`pom`的`reporting`部分。当Site插件运行时，它会检查此部分并运行那里配置的报告。在这种情况下，它找到了`javadoc`并运行了相关的插件来为项目生成Javadoc报告。
- en: Maven links the report from the site page in the **Project Reports** section.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Maven将来自站点页面的报告链接到**项目报告**部分。
- en: There's more...
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'What if we do not want to document the test classes, but only the source? We
    can configure the plugin to do this by performing the following steps:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们不想对测试类进行文档化，而只想对源代码进行文档化怎么办？我们可以通过以下步骤配置插件来完成此操作：
- en: 'Add the following code to the `reporting` section where we set the value of
    `report` element to `javadoc`:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下代码添加到设置`report`元素值为`javadoc`的`reporting`部分：
- en: '[PRE7]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Run the following command:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE8]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Open the resulting Site web page. Only the **JavaDocs** link is present on the
    site. The **Test JavaDocs** link is no longer present.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开生成的Site网页。网页上仅存在**JavaDocs**链接。**Test JavaDocs**链接不再存在。
- en: Generating source cross-reference for a site
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为站点生成源交叉引用
- en: In the previous chapter, we saw how the Maven JXR plugin generates source cross-reference.
    When publishing a project, it is useful to provide a way to refer to sources in
    addition to Javadocs. Let us see how to make that part of the site report.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们看到了Maven JXR插件如何生成源交叉引用。在发布项目时，除了Javadocs之外，提供一种引用源的方法是有用的。让我们看看如何使这部分成为站点报告的一部分。
- en: How to do it...
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to generate source cross-reference for a site:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤为站点生成源交叉引用：
- en: Open the Maven project `project with documentation`.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开带有文档的Maven项目`project with documentation`。
- en: 'Add the following code to the `reporting` section of the `pom.xml` file:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下代码添加到`pom.xml`文件的`reporting`部分：
- en: '[PRE9]'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Run the following command:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE10]'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Open the generated site report:![How to do it...](img/6124OS_07_07.jpg)
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开生成的站点报告：![如何操作...](img/6124OS_07_07.jpg)
- en: How it works...
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Adding the Maven JXR plugin to the `reporting` section of pom automatically
    creates the project source cross-reference. By default, both source and test cross-references
    are generated. Like Javadoc, the `reportSet` element can be configured if we do
    not want a cross-reference for test classes.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 将Maven JXR插件添加到`pom.xml`文件的`reporting`部分会自动创建项目源交叉引用。默认情况下，会生成源和测试交叉引用。与Javadoc一样，如果不想为测试类生成交叉引用，可以配置`reportSet`元素。
- en: Generating unit test reports for a site
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为网站生成单元测试报告
- en: When we have unit tests for our project, it will be good to see the test reports
    in the site documentation. Let us see how to do this.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们为项目编写单元测试时，在网站文档中查看测试报告会很好。让我们看看如何做到这一点。
- en: How to do it...
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to generate unit test reports for a site:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤为网站生成单元测试报告：
- en: Open the Maven project for which you want to generate the site documentation
    (for instance, `project-with-documentation`).
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您想要生成网站文档的Maven项目（例如，`project-with-documentation`）。
- en: 'Add the following code in the reporting section of the `pom.xml` file:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`pom.xml`文件的reporting部分添加以下代码：
- en: '[PRE11]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Run the following command:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令：
- en: '[PRE12]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Observe the generated site report:![How to do it...](img/6124OS_07_08.jpg)
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 观察生成的网站报告：![如何操作...](img/6124OS_07_08.jpg)
- en: How it works...
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: If you recall, we use the Maven Surefire plugin to run tests. Surefire provides
    a Surefire Report plugin. When this plugin is added to the `reporting` section
    of the `pom.xml` file, it includes the test report in the site documentation.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您还记得，我们使用Maven Surefire插件来运行测试。Surefire提供了一个Surefire报告插件。当此插件被添加到`pom.xml`文件的`reporting`部分时，它会将测试报告包含在网站文档中。
- en: The reports are identical, irrespective of whether JUnit or TestNG is used for
    unit testing.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 报告是相同的，无论使用JUnit还是TestNG进行单元测试。
- en: Tip
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: In addition to the format of the report for the site, TestNG generates additional
    reports in a different format. These are available in the `target` folder but
    are not part of the site documentation.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 除了网站报告的格式外，TestNG还会以不同的格式生成额外的报告。这些报告位于`target`文件夹中，但不属于网站文档。
- en: Generating code coverage reports for a site
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为网站生成代码覆盖率报告
- en: Let us now include code coverage from the unit tests of our project in the site
    documentation.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在将项目单元测试的代码覆盖率包含到网站文档中。
- en: How to do it...
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to generate code coverage reports for a site:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤为网站生成代码覆盖率报告：
- en: Open the Maven project for which you want to do this (for instance, `project-with-documentation`).
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您想要进行此操作的Maven项目（例如，`project-with-documentation`）。
- en: 'Add the following code in the `<build>` section of the `pom.xml` file:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`pom.xml`文件的`<build>`部分添加以下代码：
- en: '[PRE13]'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Add the following code in the `reporting` section of the `pom.xml` file:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`pom.xml`文件的`reporting`部分添加以下代码：
- en: '[PRE14]'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Run the following Maven command:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下Maven命令：
- en: '[PRE15]'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Observe the site report as shown in following screenshot:![How to do it...](img/6124OS_07_09.jpg)
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 观察以下截图所示的网站报告：![如何操作...](img/6124OS_07_09.jpg)
- en: How it works...
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'The JaCoCo unit test coverage report shows up in site documentation on account
    of the following issues:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 由于以下问题，JaCoCo单元测试覆盖率报告出现在网站文档中：
- en: As the `prepare-agent` goal of the JaCoCo plugin is added to the `build` section,
    Maven runs the JaCoCo agent
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当JaCoCo插件的`prepare-agent`目标被添加到`build`部分时，Maven会运行JaCoCo代理
- en: As the `test` goal is run, Maven runs the test and the agent analyzes the tests
    for coverage
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当运行`test`目标时，Maven会运行测试，代理会分析测试覆盖率
- en: As the JaCoCo plugin is added to the `reporting` section of the `pom.xml` file,
    the coverage report is generated and linked to the site documentation
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当JaCoCo插件被添加到`pom.xml`文件的`reporting`部分时，覆盖率报告会被生成并链接到网站文档
- en: As you can see, the same plugin is added to the `build` and `reporting` section
    and does different things
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如您所见，相同的插件被添加到`build`和`reporting`部分，但执行不同的操作
- en: There's more...
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'If you were to use Cobertura instead of JaCoCo to generate test coverage, you
    could do the following:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想用Cobertura代替JaCoCo来生成测试覆盖率，您可以这样做：
- en: Remove the lines related to JaCoCo in the `build` and `reporting` sections.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`build`和`reporting`部分删除与JaCoCo相关的行。
- en: 'Add the following code to the reporting section of the `pom.xml` file:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下代码添加到`pom.xml`文件的reporting部分：
- en: '[PRE16]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Run the following Maven command:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下Maven命令：
- en: '[PRE17]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Open the site documentation:![There's more...](img/6124OS_07_10.jpg)
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开网站文档：![还有更多...](img/6124OS_07_10.jpg)
- en: 'You will notice two things:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 您将注意到两件事：
- en: We didn't need to specify anything in the `build` section
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们不需要在`build`部分中指定任何内容
- en: We didn't need to run the `test` goal explicitly; the Maven Cobertura plugin
    did this.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们不需要显式运行`test`目标；Maven Cobertura插件已经完成了这项工作。
- en: Generating code quality reports for a site
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为站点生成代码质量报告
- en: We have seen how to use various code quality tools to perform static code analysis.
    Let us now see how we can update our site documentation with reports from these
    tools.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到如何使用各种代码质量工具进行静态代码分析。现在让我们看看我们如何使用这些工具的报告来更新我们的站点文档。
- en: How to do it...
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to generate code quality reports for a site:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤为站点生成代码质量报告：
- en: Open the project for which we want to generate the site report.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开我们想要生成站点报告的项目。
- en: 'Add the following code to the `reporting` section of the `pom.xml` file:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下代码添加到`pom.xml`文件的`reporting`部分：
- en: '[PRE18]'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Run the following Maven command:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下Maven命令：
- en: '[PRE19]'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Open the generated site report:![How to do it...](img/6124OS_07_11.jpg)
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开生成的站点报告：![如何操作...](img/6124OS_07_11.jpg)
- en: How it works...
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: For each of the code quality tools specified in the `reporting` section of the
    `pom.xml` file, the `site` goal runs the specified tool, generates the report,
    and links to the site documentation.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 对于在`pom.xml`文件的`reporting`部分中指定的每个代码质量工具，`site`目标会运行指定的工具，生成报告，并将其链接到站点文档。
- en: Clicking on each of the links takes the user to the specific report.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 点击每个链接会将用户带到特定的报告。
- en: There's more...
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'If you have chosen to use SonarQube for analysis and want to link the Sonar
    report to the site documentation, then you can do the following:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您选择使用SonarQube进行分析，并希望将Sonar报告链接到站点文档，则可以执行以下操作：
- en: 'Add the following code in the reporting section of the `pom.xml` file:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`pom.xml`文件的报告部分添加以下代码：
- en: '[PRE20]'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Generate the site by running the following Maven command:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行以下Maven命令生成站点：
- en: '[PRE21]'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Open the site report:![There's more...](img/6124OS_07_12.jpg)
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开站点报告：![还有更多...](img/6124OS_07_12.jpg)
- en: A new **Sonar** link is present in **Project Reports**, which automatically
    redirects to the default Sonar installation. The link can be customized to the
    appropriate URL, if it is different.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在**项目报告**中新增了一个**Sonar**链接，它自动重定向到默认的Sonar安装。如果链接的URL不同，则可以自定义此链接。
- en: Generating selective reports
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生成选择性报告
- en: We have seen that by default the `site` command generates some **Project Information**.
    Some of it, for instance **Mailing Lists**, may be nonexistent or irrelevant to
    the project. Let us see how we can avoid generating these. The Maven Project Info
    Reports plugin is the plugin that provides the standard reports from pom. It can
    be configured to exclude specific reports.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到默认情况下，`site`命令会生成一些**项目信息**。其中一些，例如**邮件列表**，可能不存在或不适用于项目。让我们看看我们如何避免生成这些信息。Maven项目信息报告插件是提供pom中标准报告的插件。它可以配置为排除特定的报告。
- en: How to do it...
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to generate selective site report:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤生成选择性站点报告：
- en: Open the project for which you want to generate the site report.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您想要生成站点报告的项目。
- en: 'Add the following code to the `reporting` section of the `pom.xml` file:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下代码添加到`pom.xml`文件的`reporting`部分：
- en: '[PRE22]'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Run the following Maven `site` command:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下Maven `site`命令：
- en: '[PRE23]'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Open the generated report:![How to do it...](img/6124OS_07_13.jpg)
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开生成的报告：![如何操作...](img/6124OS_07_13.jpg)
- en: How it works...
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: We explicitly specified the reports that we wanted to see in **Project Information**.
    Due to this, only those reports are generated and displayed.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们明确指定了想要在**项目信息**中看到的报告。因此，只有这些报告被生成并显示。
- en: This allows us to avoid generating and displaying reports that are not applicable
    to the project.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 这允许我们避免生成和显示不适用于项目的报告。
- en: Deploying a site
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署站点
- en: Once a site report is generated, it needs to be published. While this can be
    done manually, Maven also provides facilities to do this. Let us see how.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦生成站点报告，就需要发布。虽然这可以手动完成，但Maven也提供了相应的功能。让我们看看如何操作。
- en: Getting ready
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To publish a site, you need to have access to the web server where the site
    has to be deployed.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 要发布站点，您需要有权访问部署站点的Web服务器。
- en: How to do it...
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To deploy a site, use the following steps:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 要部署站点，请按照以下步骤操作：
- en: 'Add the following code to your `pom.xml` file. This could also be added in
    `settings.xml`:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下代码添加到您的`pom.xml`文件中。这也可以添加到`settings.xml`中：
- en: '[PRE24]'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'For the corresponding ID, add the relevant username and password in your `settings.xml`
    file:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于相应的 ID，在你的 `settings.xml` 文件中添加相关的用户名和密码：
- en: '[PRE25]'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Run the following Maven command:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下 Maven 命令：
- en: '[PRE26]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: How it works...
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: When the `site-deploy` goal is run, Maven first builds the site. Then, it uses
    the entry set in the `distributionManagement` element to determine how the site
    needs to be deployed. The first part of the URL is the protocol to be used to
    transfer the file. In this case, it is `scp`. It uses the credentials specified
    in the `settings.xml` file and transfers the file to the destination.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 当运行 `site-deploy` 目标时，Maven 首先构建网站。然后，它使用 `distributionManagement` 元素中的条目集来确定网站需要如何部署。URL
    的前一部分是要使用的传输协议。在这种情况下，它是 `scp`。它使用 `settings.xml` 文件中指定的凭据并将文件传输到目标位置。
- en: There's more...
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'If you want to test your site before deploying, you can easily do so in the
    following way:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想在部署前测试你的网站，你可以轻松地按照以下方式操作：
- en: 'Run the following Maven command:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下 Maven 命令：
- en: '[PRE27]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Open the browser and go to `http://localhost:8080`:![There's more...](img/6124OS_07_14.jpg)
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开浏览器并访问 `http://localhost:8080`：![更多内容...](img/6124OS_07_14.jpg)
- en: The run goal of the Maven Site plugin deploys the site in a **jetty server**,
    which is started by default by port `8080`. This allows you to view the site report
    and verify it before publishing.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: Maven Site 插件的运行目标会在一个 **jetty 服务器**上部署网站，默认情况下，它通过端口 `8080` 启动。这允许你在发布之前查看网站报告并验证它。
