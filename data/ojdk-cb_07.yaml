- en: Chapter 7. Working with WebStart and the Browser Plugin
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第7章. 使用WebStart和浏览器插件
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Building the IcedTea browser plugin on Linux
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Linux上构建IcedTea浏览器插件
- en: Using the IcedTea Java WebStart implementation on Linux
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Linux上使用IcedTea Java WebStart实现
- en: Preparing the IcedTea Java WebStart implementation for Mac OS X
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备IcedTea Java WebStart实现以供Mac OS X使用
- en: Preparing the IcedTea Java WebStart implementation for Windows
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备IcedTea Java WebStart实现以供Windows使用
- en: Introduction
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: For a long time, for end users, the Java applets technology was the face of
    the whole Java world. For a lot of non-developers, the word Java itself is a synonym
    for the Java browser plugin that allows running Java applets inside web browsers.
    The **Java WebStart** technology is similar to the Java browser plugin but runs
    remotely on loaded Java applications as separate applications outside of web browsers.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 很长一段时间内，对于最终用户来说，Java小程序技术是整个Java世界的面孔。对于许多非开发者来说，Java这个词本身就是一个同义词，指的是允许在网页浏览器中运行Java小程序的Java浏览器插件。**Java
    WebStart**技术与Java浏览器插件类似，但它在远程加载的Java应用程序上作为独立的应用程序运行，位于网页浏览器之外。
- en: The OpenJDK open source project does not contain the implementations for the
    browser plugin nor for the WebStart technologies. The Oracle Java distribution,
    otherwise matching closely to OpenJDK codebases, provided its own closed source
    implementation for these technologies.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: OpenJDK开源项目不包含浏览器插件和WebStart技术的实现。Oracle Java发行版，尽管与OpenJDK代码库紧密匹配，但为这些技术提供了自己的闭源实现。
- en: The IcedTea-Web project contains free and open source implementations of the
    browser plugin and WebStart technologies. The IcedTea-Web browser plugin supports
    only GNU/Linux operating systems and the WebStart implementation is cross-platform.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: IcedTea-Web项目包含浏览器插件和WebStart技术的免费和开源实现。IcedTea-Web浏览器插件仅支持GNU/Linux操作系统，而WebStart实现是跨平台的。
- en: 'While the IcedTea implementation of WebStart is well-tested and production-ready,
    it has numerous incompatibilities with the Oracle WebStart implementation. These
    differences can be seen as corner cases; some of them are:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然IcedTea对WebStart的实现经过充分测试且适用于生产环境，但它与Oracle WebStart实现存在许多不兼容性。这些差异可以被视为边缘情况；其中一些包括：
- en: '**Different behavior when** **parsing not well-formed JNLP descriptor files**:
    The Oracle implementation is generally more lenient for malformed descriptors.'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**解析格式不正确的JNLP描述符文件时的不同行为**：Oracle实现通常对格式不正确的描述符更为宽容。'
- en: '**Differences in JAR (re)downloading and caching behavior**: The Oracle implementation
    uses caching more aggressively.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**JAR（重新）下载和缓存行为差异**：Oracle实现使用缓存更为积极。'
- en: '**Differences in sound support**: This is due to differences in sound support
    between Oracle Java and IcedTea on Linux. Linux historically has multiple different
    sound providers (ALSA, PulseAudio, and so on) and IcedTea has more wide support
    for different providers, which can lead to sound misconfiguration.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**声音支持差异**：这是由于Oracle Java和IcedTea在Linux上声音支持之间的差异。Linux历史上有多达不同的声音提供者（ALSA、PulseAudio等），而IcedTea对不同提供者的支持更广泛，这可能导致声音配置错误。'
- en: The IcedTea-Web browser plugin (as it is built on WebStart) has these incompatibilities
    too. On top of them, it can have more incompatibilities in relation to browser
    integration. User interface forms and general browser-related operations such
    as access from/to JavaScript code should work fine with both implementations.
    But historically, the browser plugin was widely used for security-critical applications
    like online bank clients. Such applications usually require security facilities
    from browsers, such as access to certificate stores or hardware crypto-devices
    that can differ from browser to browser, depending on the OS (for example, supports
    only Windows), browser version, Java version, and so on. Because of that, many
    real-world applications can have problems running the IcedTea-Web browser plugin
    on Linux.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: IcedTea-Web浏览器插件（因为它基于WebStart构建）也存在这些不兼容性。除此之外，它还可能在浏览器集成方面存在更多不兼容性。用户界面表单和一般与浏览器相关的操作，如从JavaScript代码中访问，应与两种实现都能良好工作。但历史上，浏览器插件被广泛用于安全关键的应用程序，如在线银行客户端。这类应用程序通常需要来自浏览器的安全功能，例如访问证书存储或硬件加密设备，这些设备可能因操作系统（例如，仅支持Windows）、浏览器版本、Java版本等因素而有所不同。因此，许多实际应用程序在Linux上运行IcedTea-Web浏览器插件时可能会遇到问题。
- en: Both WebStart and the browser plugin are built on the idea of downloading (possibly
    untrusted) code from remote locations, and proper privilege checking and sandboxed
    execution of that code is a notoriously complex task. Usually reported security
    issues in the Oracle browser plugin (most widely known are issues during the year
    2012) are also fixed separately in IcedTea-Web.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: WebStart和浏览器插件都是基于从远程位置下载（可能是不可信的）代码的想法构建的，并且对代码进行适当的权限检查和沙箱执行是一个臭名昭著的复杂任务。通常在Oracle浏览器插件中报告的安全问题（最广为人知的是2012年期间的问题）也在IcedTea-Web中单独修复。
- en: Building the IcedTea browser plugin on Linux
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Linux上构建IcedTea浏览器插件
- en: The IcedTea-Web project is not inherently cross-platform; it is developed on
    Linux and for Linux, and so it can be built quite easily on popular Linux distributions.
    The two main parts of it (stored in corresponding directories in the source code
    repository) are `netx` and `plugin`.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: IcedTea-Web项目本身不是跨平台的；它是为Linux开发的，因此可以在流行的Linux发行版上非常容易地构建。它的两个主要部分（存储在源代码库中的相应目录中）是`netx`和`plugin`。
- en: NetX is a pure Java implementation of the WebStart technology. We will look
    at it more thoroughly in the following recipes of this chapter.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: NetX是WebStart技术的纯Java实现。我们将在本章后续的配方中更详细地探讨它。
- en: Plugin is an implementation of the browser plugin using the `NPAPI` plugin architecture
    that is supported by multiple browsers. Plugin is written partly in Java and partly
    in native code (C++), and it officially supports only Linux-based operating systems.
    There exists an opinion about `NPAPI` that this architecture is dated, overcomplicated,
    and insecure, and that modern web browsers have enough built-in capabilities to
    not require external plugins. And browsers have gradually reduced support for
    `NPAPI`. Despite that, at the time of writing this book, the IcedTea-Web browser
    plugin worked on all major Linux browsers (Firefox and derivatives, Chromium and
    derivatives, and Konqueror).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 插件是使用支持多个浏览器的`NPAPI`插件架构实现的浏览器插件。插件部分用Java编写，部分用本地代码（C++）编写，并且官方仅支持基于Linux的操作系统。关于`NPAPI`存在一种观点，即这种架构过时、过于复杂且不安全，而现代网络浏览器已经内置了足够的特性，无需外部插件。浏览器已经逐渐减少对`NPAPI`的支持。尽管如此，在撰写本书时，IcedTea-Web浏览器插件在所有主要的Linux浏览器（Firefox及其衍生品、Chromium及其衍生品和Konqueror）上都能正常工作。
- en: We will build the IcedTea-Web browser plugin from sources using Ubuntu 12.04
    LTS amd64.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用Ubuntu 12.04 LTS amd64从源代码构建IcedTea-Web浏览器插件。
- en: Getting ready
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: For this recipe, we will need a clean Ubuntu 12.04 running with the Firefox
    web browser installed.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个配方，我们需要一个干净的Ubuntu 12.04系统，并且安装了Firefox网络浏览器。
- en: How to do it...
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following procedure will help you to build the IcedTea-Web browser plugin:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将帮助您构建IcedTea-Web浏览器插件：
- en: 'Install prepackaged binaries of OpenJDK 7:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装OpenJDK 7的预包装二进制文件：
- en: '[PRE0]'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Install the GCC toolchain and build dependencies:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装GCC工具链和构建依赖项：
- en: '[PRE1]'
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Install the specific dependency for the browser plugin:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装浏览器插件的特定依赖项：
- en: '[PRE2]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Download and decompress the IcedTea-Web source code tarball:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并解压IcedTea-Web源代码tar包：
- en: '[PRE3]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Run the `configure` script to set up the build environment:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`configure`脚本以设置构建环境：
- en: '[PRE4]'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Run the build process:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行构建过程：
- en: '[PRE5]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Install the newly built plugin into the `/usr/local` directory:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新构建的插件安装到`/usr/local`目录中：
- en: '[PRE6]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Configure the Firefox web browser to use the newly built plugin library:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置Firefox网络浏览器以使用新构建的插件库：
- en: '[PRE7]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Check whether the IcedTea-Web plugin has appeared under **Tools** | **Add-ons**
    | **Plugins**.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查IcedTea-Web插件是否出现在**工具** | **附加组件** | **插件**下。
- en: Open the [http://java.com/en/download/installed.jsp](http://java.com/en/download/installed.jsp)
    web page to verify that the browser plugin works.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开[http://java.com/en/download/installed.jsp](http://java.com/en/download/installed.jsp)网页以验证浏览器插件是否工作。
- en: How it works...
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The IcedTea browser plugin requires the IcedTea Java implementation to be compiled
    successfully. The prepackaged OpenJDK 7 binaries in Ubuntu 12.04 are based on
    IcedTea, so we installed them first. The plugin uses the GNU Autconf build system
    that is common between free software tools. The `xulrunner-dev` package is required
    to access the `NPAPI` headers.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: IcedTea浏览器插件需要编译成功，这需要IcedTea Java实现。Ubuntu 12.04中的预包装OpenJDK 7二进制文件基于IcedTea，因此我们首先安装了它们。插件使用的是GNU
    Autconf构建系统，这是免费软件工具之间常见的。需要`xulrunner-dev`包来访问`NPAPI`头文件。
- en: The built plugin may be installed into Firefox for the current user only without
    requiring administrator privileges. For that, we created a symbolic link to our
    plugin in the place where Firefox expects to find the `libjavaplugin.so` plugin
    library.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 构建的插件可能仅对当前用户安装到Firefox中，无需管理员权限。为此，我们在Firefox期望找到`libjavaplugin.so`插件库的位置创建了一个到我们插件的符号链接。
- en: There's more...
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: The plugin can also be installed into other browsers with `NPAPI` support, but
    installation instructions can be different for different browsers and different
    Linux distributions.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 该插件也可以安装到具有`NPAPI`支持的其它浏览器中，但不同浏览器和不同Linux发行版的安装说明可能不同。
- en: As the `NPAPI` architecture does not depend on the operating system, in theory,
    a plugin can be built for non-Linux operating systems. But currently, no such
    ports are planned.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 由于`NPAPI`架构不依赖于操作系统，理论上可以为非Linux操作系统构建插件。但目前没有这样的端口计划。
- en: See also
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Using the IcedTea Java WebStart implementation on Linux* recipe
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在Linux上使用IcedTea Java WebStart实现*配方'
- en: The *Preparing the IcedTea Java WebStart implementation for Mac OS X* recipe
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*为Mac OS X准备IcedTea Java WebStart实现*配方'
- en: The *Preparing the IcedTea Java WebStart implementation for Windows* recipe
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*为Windows准备IcedTea Java WebStart实现*配方'
- en: '[Chapter 5](ch05.html "Chapter 5. Building IcedTea"), *Building IcedTea*'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第五章](ch05.html "第五章 构建IcedTea"), *构建IcedTea*'
- en: The *Working with GNU Autoconf* recipe from [Chapter 4](ch04.html "Chapter 4. Building
    OpenJDK 8"), *Building OpenJDK 8*
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自[第四章](ch04.html "第四章 构建OpenJDK 8")的*使用GNU Autoconf*配方，*构建OpenJDK 8*
- en: The IcedTea-Web project website at [http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IcedTea-Web项目网站：[http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
- en: The NetX project website at [http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NetX项目网站：[http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
- en: The Java WebStart developers guide at [http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Java WebStart开发者指南：[http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
- en: The NPAPI project site at [https://wiki.mozilla.org/NPAPI](https://wiki.mozilla.org/NPAPI)
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NPAPI项目网站：[https://wiki.mozilla.org/NPAPI](https://wiki.mozilla.org/NPAPI)
- en: Details on NPAPI support in different browsers at [http://www.firebreath.org/display/documentation/Browser+Plugins+in+a+post-NPAPI+world](http://www.firebreath.org/display/documentation/Browser+Plugins+in+a+post-NPAPI+world)
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同浏览器中NPAPI支持的详细信息：[http://www.firebreath.org/display/documentation/Browser+Plugins+in+a+post-NPAPI+world](http://www.firebreath.org/display/documentation/Browser+Plugins+in+a+post-NPAPI+world)
- en: Using the IcedTea Java WebStart implementation on Linux
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Linux上使用IcedTea Java WebStart实现
- en: On the Java platform, the JVM needs to perform the class load process for each
    class it wants to use. This process is opaque for the JVM and actual bytecode
    for loaded classes may come from one of many sources. For example, this method
    allows the Java Applet classes to be loaded from a remote server to the Java process
    inside the web browser. Remote class loading also may be used to run remotely
    loaded Java applications in standalone mode without integration with the web browser.
    This technique is called Java WebStart and was developed under **Java Specification
    Request** (**JSR**) number 56.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在Java平台上，JVM需要为它想要使用的每个类执行类加载过程。这个过程对JVM来说是透明的，加载的类的实际字节码可能来自许多来源之一。例如，此方法允许Java
    Applet类从远程服务器加载到浏览器内的Java进程中。远程类加载还可以用于在不与浏览器集成的情况下以独立模式运行远程加载的Java应用程序。这种技术称为Java
    WebStart，是在**Java规范请求**（**JSR**）编号56下开发的。
- en: To run the Java application remotely, WebStart requires an application descriptor
    file that should be written using the **Java Network Launching Protocol** (**JNLP**)
    syntax. This file is used to define the remote server to load the application
    form along with some metainformation. The WebStart application may be launched
    from the web page by clicking on the JNLP link, or without the web browser using
    the JNLP file obtained beforehand. In either case, running the application is
    completely separate from the web browser, but uses a sandboxed security model
    similar to Java Applets.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 要远程运行Java应用程序，WebStart需要一个应用程序描述符文件，该文件应使用**Java网络启动协议**（**JNLP**）语法编写。该文件用于定义远程服务器以加载应用程序以及一些元信息。WebStart应用程序可以通过点击网页上的JNLP链接或在事先获取的JNLP文件上运行，而不使用浏览器。在任何情况下，运行应用程序都与浏览器完全分离，但使用与Java
    Applets类似的沙箱安全模型。
- en: The OpenJDK project does not contain the WebStart implementation; the Oracle
    Java distribution provides its own closed-source WebStart implementation. The
    open source WebStart implementation exists as part of the IcedTea-Web project.
    It was initially based on the **NETwork eXecute** (**NetX**) project. Contrary
    to the Applet technology, WebStart does not require any web browser integration.
    This allowed developers to implement the NetX module using pure Java without native
    code. For integration with Linux-based operating systems, IcedTea-Web implements
    the `javaws` command as shell script that launches the `netx.jar` file with proper
    arguments.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: OpenJDK项目不包含WebStart实现；Oracle Java发行版提供了自己的闭源WebStart实现。开源的WebStart实现作为IcedTea-Web项目的一部分存在。它最初基于**网络执行**（**NetX**）项目。与Applet技术不同，WebStart不需要任何网络浏览器集成。这允许开发者使用纯Java而不需要本地代码来实现NetX模块。为了与基于Linux的操作系统集成，IcedTea-Web实现了`javaws`命令作为shell脚本，用于启动带有正确参数的`netx.jar`文件。
- en: In this recipe, we will build the NetX module from the official IcedTea-Web
    source tarball.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将从官方IcedTea-Web源代码tarball构建NetX模块。
- en: Getting ready
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: For this recipe, we will need a clean Ubuntu 12.04 running with the Firefox
    web browser installed.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个菜谱，我们需要一个干净安装了Firefox浏览器的Ubuntu 12.04。
- en: How to do it...
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'The following procedure will help you to build a NetX module:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将帮助您构建NetX模块：
- en: 'Install prepackaged binaries of OpenJDK 7:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装预包装的OpenJDK 7二进制文件：
- en: '[PRE8]'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Install the GCC toolchain and build dependencies:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装GCC工具链和构建依赖项：
- en: '[PRE9]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Download and decompress the IcedTea-Web source code tarball:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并解压IcedTea-Web源代码tarball：
- en: '[PRE10]'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Run the `configure` script to set up a build environment excluding the browser
    plugin from the build:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`configure`脚本来设置构建环境，排除构建中的浏览器插件：
- en: '[PRE11]'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Run the build process:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行构建过程：
- en: '[PRE12]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Install the newly-built plugin into the `/usr/local` directory:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装新构建的插件到`/usr/local`目录：
- en: '[PRE13]'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Run the WebStart application example from the Java tutorial:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Java教程中运行WebStart应用程序示例：
- en: '[PRE14]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: How it works...
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `javaws` shell script is installed into the `/usr/local/*` directory. When
    launched with a path or a link to the JNLP file, `javaws` launches the `netx.jar`
    file, adding it to the boot classpath (for security reasons) and providing the
    JNLP link as an argument.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '`javaws` shell脚本安装到`/usr/local/*`目录。当使用路径或JNLP文件的链接启动时，`javaws`将启动`netx.jar`文件，将其添加到引导类路径（出于安全原因）并作为参数提供JNLP链接。'
- en: See also
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关阅读
- en: The *Preparing the IcedTea Java WebStart implementation for Mac OS X* recipe
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*为Mac OS X准备IcedTea Java WebStart实现*菜谱'
- en: The *Preparing the IcedTea Java WebStart implementation for Windows* recipe
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*为Windows准备IcedTea Java WebStart实现*菜谱'
- en: The *Building the IcedTea browser plugin on Linux* recipe
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在Linux上构建IcedTea浏览器插件*菜谱'
- en: The *Working with GNU Autoconf* recipe from [Chapter 4](ch04.html "Chapter 4. Building
    OpenJDK 8"), *Building OpenJDK 8*
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自[第4章](ch04.html "第4章。构建OpenJDK 8")，*构建OpenJDK 8*的*使用GNU Autoconf工作*菜谱
- en: The IcedTea-Web project website at [http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IcedTea-Web项目网站在[http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
- en: The NetX project website at [http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NetX项目网站在[http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
- en: The Java WebStart developers guide at [http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Java WebStart开发者指南在[http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
- en: Preparing the IcedTea Java WebStart implementation for Mac OS X
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为Mac OS X准备IcedTea Java WebStart实现
- en: The NetX WebStart implementation from the IcedTea-Web project is written in
    pure Java, so it can also be used on Mac OS X. IcedTea-Web provides the `javaws`
    launcher implementation only for Linux-based operating systems. In this recipe,
    we will create a simple implementation of the WebStart launcher script for Mac
    OS X.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: IcedTea-Web项目中的NetX WebStart实现是用纯Java编写的，因此它也可以在Mac OS X上使用。IcedTea-Web只为基于Linux的操作系统提供`javaws`启动器实现。在这个菜谱中，我们将为Mac
    OS X创建一个简单的WebStart启动脚本实现。
- en: Getting ready
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: For this recipe, we will need Mac OS X Lion with Java 7 (the prebuilt OpenJDK
    or Oracle one) installed. We will also need the `netx.jar` module from the IcedTea-Web
    project, which can be built using instructions from the previous recipe.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个菜谱，我们需要安装了Java 7的Mac OS X Lion（预构建的OpenJDK或Oracle版本）。我们还需要从IcedTea-Web项目获取`netx.jar`模块，可以使用之前菜谱中的说明来构建。
- en: How to do it...
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'The following procedure will help you to run WebStart applications on Mac OS
    X:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将帮助您在 Mac OS X 上运行 WebStart 应用程序：
- en: Download the JNLP descriptor example from the Java tutorials at [http://docs.oracle.com/javase/tutorialJWS/samples/deployment/dynamictree_webstartJWSProject/dynamictree_webstart.jnlp](http://docs.oracle.com/javase/tutorialJWS/samples/deployment/dynamictree_webstartJWSProject/dynamictree_webstart.jnlp).
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Java 教程 [http://docs.oracle.com/javase/tutorialJWS/samples/deployment/dynamictree_webstartJWSProject/dynamictree_webstart.jnlp](http://docs.oracle.com/javase/tutorialJWS/samples/deployment/dynamictree_webstartJWSProject/dynamictree_webstart.jnlp)
    下载 JNLP 描述符示例。
- en: 'Test that this application can be run from the terminal using `netx.jar`:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试此应用程序是否可以通过 `netx.jar` 从终端运行：
- en: '[PRE15]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Create the `wslauncher.sh` bash script with the following contents:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下内容创建 `wslauncher.sh` bash 脚本：
- en: '[PRE16]'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Mark the launcher script as executable:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将启动脚本标记为可执行：
- en: '[PRE17]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Run the application using the launcher script:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用启动脚本运行应用程序：
- en: '[PRE18]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: How it works...
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `next.jar` file contains a Java application that can read JNLP files and
    download and run classes described in JNLP. But for security reasons, `next.jar`
    cannot be launched directly as an application (using the `java -jar netx.jar`
    syntax). Instead, `netx.jar` is added to the privileged boot classpath and is
    run specifying the main class directly. This allows us to download applications
    in sandbox mode.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '`next.jar` 文件包含一个 Java 应用程序，可以读取 JNLP 文件并下载和运行 JNLP 中描述的类。但由于安全原因，`next.jar`
    不能直接作为应用程序启动（使用 `java -jar netx.jar` 语法）。相反，`netx.jar` 被添加到受保护的启动类路径中，并直接指定主类来运行。这允许我们在沙盒模式下下载应用程序。'
- en: The `wslauncher.sh` script tries to find the Java executable file using the
    `PATH` and `JAVA_HOME` environment variables and then launches specified JNLP
    through `netx.jar`.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '`wslauncher.sh` 脚本尝试使用 `PATH` 和 `JAVA_HOME` 环境变量查找 Java 可执行文件，然后通过 `netx.jar`
    启动指定的 JNLP。'
- en: There's more...
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: The `wslauncher.sh` script provides a basic solution to run WebStart applications
    from the terminal. To integrate `netx.jar` into your operating system environment
    properly (to be able to launch WebStart apps using JNLP links from the web browser),
    a native launcher or custom platform scripting solution may be used. Such solutions
    lay down the scope of this book.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '`wslauncher.sh` 脚本为从终端运行 WebStart 应用程序提供了一个基本解决方案。为了正确地将 `netx.jar` 集成到操作系统环境中（以便能够使用来自网络浏览器的
    JNLP 链接启动 WebStart 应用程序），可以使用本地启动器或自定义平台脚本解决方案。这些解决方案超出了本书的范围。'
- en: See also
  id: totrans-113
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: The *Using the IcedTea Java WebStart implementation on Linux* recipe
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用 Linux 上的 IcedTea Java WebStart 实现* 的配方'
- en: The *Building OpenJDK 7 on Mac OS X* recipe from [Chapter 3](ch03.html "Chapter 3. Building
    OpenJDK 7"), *Building OpenJDK 7*
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自 [第 3 章](ch03.html "第 3 章。构建 OpenJDK 7")，*构建 OpenJDK 7* 的 *在 Mac OS X 上构建
    OpenJDK 7* 的配方
- en: The IcedTea-Web project website at [http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IcedTea-Web 项目网站 [http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
- en: The NetX project website at [http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NetX 项目网站 [http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
- en: The Java WebStart developers guide at [http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Java WebStart 开发者指南 [http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
- en: Apple Inc. support article about enabling WebStart on Apple Java at [http://support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 苹果公司关于在 Apple Java 上启用 WebStart 的支持文章 [http://support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)
- en: Preparing the IcedTea Java WebStart implementation for Windows
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备 Windows 上的 IcedTea Java WebStart 实现
- en: The NetX WebStart implementation from the IcedTea-Web project is written in
    pure Java, so it can also be used on Windows; we also used it on Linux and Mac
    OS X in previous recipes in this chapter. In this recipe, we will create a simple
    implementation of the WebStart launcher script for Windows.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: IcedTea-Web 项目的 NetX WebStart 实现是用纯 Java 编写的，因此它也可以在 Windows 上使用；我们还在本章前面的配方中在
    Linux 和 Mac OS X 上使用了它。在这个配方中，我们将为 Windows 创建一个简单的 WebStart 启动脚本实现。
- en: Getting ready
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: For this recipe, we will need a version of Windows running with Java 7 (the
    prebuilt OpenJDK or Oracle one) installed. We will also need the `netx.jar` module
    from the IcedTea-Web project, which can be built using instructions from the previous
    recipe in this chapter.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个配方，我们需要一个运行 Java 7（预构建的 OpenJDK 或 Oracle 版本）的 Windows 版本。我们还需要来自 IcedTea-Web
    项目的 `netx.jar` 模块，可以使用本章前面的配方中的说明来构建。
- en: How to do it...
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'The following procedure will help you to run WebStart applications on Windows:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将帮助您在Windows上运行WebStart应用程序：
- en: 'Download the JNLP descriptor example from the Java tutorials:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Java教程中下载JNLP描述符示例：
- en: '[PRE19]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Test that this application can be run from the Command Prompt using `netx.jar`:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`netx.jar`测试此应用程序是否可以从命令提示符中运行：
- en: '[PRE20]'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Create a batch file, `wslauncher.bat`, with the following contents:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个批处理文件，名为`wslauncher.bat`，内容如下：
- en: '[PRE21]'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Run the application using the launcher script:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用启动脚本运行应用程序：
- en: '[PRE22]'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: How it works...
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `netx.jar` module must be added to the boot classpath as it cannot be run
    directly because of security reasons.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 由于安全原因，`netx.jar` 模块必须添加到启动类路径中，因为它不能直接运行。
- en: The `wslauncher.bat` script tries to find the Java executable using the `JAVA_HOME`
    environment variable and then launches specified JNLP through `netx.jar`.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '`wslauncher.bat` 脚本尝试使用`JAVA_HOME`环境变量查找Java可执行文件，然后通过`netx.jar`启动指定的JNLP。'
- en: There's more...
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: The `wslauncher.bat` script may be registered as a default application to run
    the JNLP files. This will allow you to run WebStart applications from the web
    browser. But the current script will show the batch window for a short period
    of time before launching the application. It also does not support looking for
    Java executables in the Windows Registry. A more advanced script without those
    problems may be written using Visual Basic script (or any other native scripting
    solution) or as a native executable launcher. Such solutions lay down the scope
    of this book.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '`wslauncher.bat` 脚本可以被注册为默认应用程序以运行JNLP文件。这将允许您从网页浏览器中运行WebStart应用程序。但当前的脚本在启动应用程序之前会短暂显示批处理窗口。它也不支持在Windows注册表中查找Java可执行文件。可以使用Visual
    Basic脚本（或任何其他本地脚本解决方案）或作为本地可执行启动器编写一个没有这些问题的更高级的脚本。这些解决方案超出了本书的范围。'
- en: See also
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参考以下内容
- en: The *Preparing the IcedTea Java WebStart implementation for Mac OS X* recipe
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*准备IcedTea Java WebStart实现以兼容Mac OS X* 的配方'
- en: The *Building 64-bit OpenJDK 7 on Windows 7 x64 SP1* recipe from [Chapter 3](ch03.html
    "Chapter 3. Building OpenJDK 7"), *Building OpenJDK 7*
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自[第3章](ch03.html "第3章。构建OpenJDK 7")的 *在Windows 7 x64 SP1上构建64位OpenJDK 7* 配方，*构建OpenJDK
    7*
- en: The IcedTea-Web project website at [http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IcedTea-Web项目网站，请访问[http://icedtea.classpath.org/wiki/IcedTea-Web](http://icedtea.classpath.org/wiki/IcedTea-Web)
- en: The NetX project website at [http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NetX项目网站，请访问[http://jnlp.sourceforge.net/netx/](http://jnlp.sourceforge.net/netx/)
- en: The Java WebStart developers guide at [http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Java WebStart开发者指南，请访问[http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)
- en: Articles on ActiveX technology from Microsoft that is similar to NPAPI at [http://msdn.microsoft.com/en-us/library/aa751968%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa751968%28v=vs.85%29.aspx)
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自微软的ActiveX技术文章，类似于NPAPI，请参阅[http://msdn.microsoft.com/en-us/library/aa751968%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa751968%28v=vs.85%29.aspx)
