- en: '*Chapter 4*: Domain Analysis and Modeling'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第四章*：领域分析和建模'
- en: “He who asks a question remains a fool for 5 minutes. He who does not ask remains
    a fool forever.”
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: “问问题的人五分钟内还是傻瓜。不问的人永远都是傻瓜。”
- en: – Chinese proverb
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: – 中国谚语
- en: As we saw in the previous chapter, misinterpreted requirements can cause a significant
    portion of software projects to fail. Arriving at a shared understanding and creating
    a useful domain model requires high degrees of collaboration between domain experts.
    In this chapter, we will introduce the sample application we will use throughout
    the book and explore modeling techniques, such as domain storytelling and EventStorming,
    to enhance our collective understanding of a problem in a reliable and structured
    manner.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在上一章所看到的，误解的需求可能导致相当一部分软件项目失败。达成共识并创建有用的领域模型需要领域专家之间高度的合作。在本章中，我们将介绍本书中将要使用的示例应用程序，并探讨建模技术，如领域故事讲述和事件风暴，以可靠和结构化的方式增强我们对问题的集体理解。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Introducing the example application (a letter of credit)
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍示例应用程序（信用证）
- en: Enhancing shared understanding
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增强共识
- en: Domain storytelling
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 领域故事讲述
- en: EventStorming
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 事件风暴
- en: This chapter will help developers and architects learn how to apply these techniques
    in real-life situations to produce elegant software solutions that mirror the
    domain problem that needs to be solved. Similarly, non-technical domain experts
    will understand how to communicate their ideas and collaborate effectively with
    technical team members to accelerate the process of arriving at a shared understanding.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将帮助开发人员和架构师学习如何在现实生活中的场景中应用这些技术，以产生优雅的软件解决方案，这些解决方案反映了需要解决的领域问题。同样，非技术领域的专家将了解如何传达他们的想法，并有效地与技术团队成员合作，以加速达成共识的过程。
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'There are no specific technical requirements for this chapter. However, given
    that it may become necessary to collaborate remotely as opposed to being in the
    same room with access to a whiteboard, it will be useful to have access to the
    following:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章没有具体的技术要求。然而，鉴于可能需要远程协作而不是在同一房间内使用白板，以下资源将非常有用：
- en: A digital whiteboard (such as [https://www.mural.co/](https://www.mural.co/)
    or [http://miro.com/](http://miro.com/))
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数字白板（例如[https://www.mural.co/](https://www.mural.co/) 或 [http://miro.com/](http://miro.com/)）
- en: An online domain storytelling modeler (such as [https://www.wps.de/modeler/](https://www.wps.de/modeler/))
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在线领域故事讲述模型器（例如[https://www.wps.de/modeler/](https://www.wps.de/modeler/)）
- en: Understanding a letter of credit
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解信用证
- en: 'A documentary **Letter of Credit** (**LC**) is a financial instrument issued
    by banks as a contract between an importer (or buyer) and an exporter (or seller).
    This contract specifies the terms and conditions of the transaction, under which
    the importer promises to pay the exporter in exchange for the goods or services
    provided by the exporter. An LC transaction typically involves multiple parties.
    A simplified summary of the parties involved is described as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 信用证**（LC**）是银行作为进口商（或买方）和出口商（或卖方）之间的合同而发行的一种金融工具。该合同规定了交易的条件和条款，根据这些条件，进口商承诺支付出口商提供的商品或服务。信用证交易通常涉及多个当事人。以下是对涉及当事人的简化总结：
- en: '**Importer**: The buyer of the goods or services.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**进口商**：商品或服务的买方。'
- en: '**Exporter**: The seller of the goods or services.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**出口商**：商品或服务的卖方。'
- en: '**Freight forwarder**: The agency that handles the shipment of goods on behalf
    of the exporter. This is only applicable in cases where there is an exchange of
    physical goods.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**货运代理人**：代表出口商处理货物运输的代理机构。这仅适用于涉及实物商品交换的情况。'
- en: '**Issuing bank**: The bank that the importer requests to issue the LC application.
    Usually, the importer has a preexisting relationship with this bank.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开证行**：进口商请求发行信用证申请的银行。通常，进口商与该银行有既定的关系。'
- en: '**Advising bank**: The bank that informs the exporter about the issuance of
    the LC. This is usually a bank that is native to the exporter’s country.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通知行**：通知出口商关于信用证发行情况的银行。这通常是在出口商所在国的本地银行。'
- en: '**Negotiating bank**: The bank that the exporter submits documents for the
    shipment of goods, or the services provided. Usually, the exporter has a preexisting
    relationship with this bank.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**议付行**：出口商提交货物运输或提供服务所需文件的银行，通常出口商与该银行已有预存关系。'
- en: '**Reimbursement bank**: The bank that reimburses the funds to the negotiating
    bank, at the request of the issuing bank.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**偿付行**：在开证行的要求下，向议付行支付资金的银行。'
- en: Note
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: One bank can play more than one role in a given transaction. In the most complex
    cases, there can be four distinct banks involved in a transaction (sometimes even
    more, but we will skip those cases for brevity).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在一项特定的交易中，一家银行可以扮演多个角色。在最复杂的情况下，可能有四个不同的银行参与交易（有时甚至更多，但为了简洁起见，我们将跳过这些情况）。
- en: An LC issuance application
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 一份信用证发行申请
- en: As discovered in the previous chapter, Kosmo Primo Bank needs us to focus on
    streamlining the process used for LC application and issuance functions. In this
    chapter, and indeed the rest of this book, we will strive to understand, evolve,
    design, and build a software solution to make the process more efficient by replacing
    the largely manual and error-prone workflows with more simplified processes, based
    on larger amounts of automation.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一章所述，Kosmo Primo Bank需要我们关注简化信用证申请和发行流程。在本章以及本书的其余部分，我们将努力理解、演进、设计和构建一个软件解决方案，通过用更简化的流程取代大量手动且易出错的流程，以使流程更加高效。
- en: We understand that unless you are an expert dealing with international trade,
    it is unlikely that you will have an intimate understanding of concepts such as
    LCs. In the upcoming section, we will look at demystifying LCs and how to work
    with them.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们理解，除非你是处理国际贸易的专家，否则你不太可能对诸如信用证（LCs）等概念有深入了解。在接下来的章节中，我们将探讨如何揭开信用证的神秘面纱以及如何与之合作。
- en: Enhancing shared understanding
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 增强共识
- en: 'When working with a problem where domain concepts are unclear, there is a need
    to arrive at a common understanding among key team members (both those that have
    bright ideas – the business/product people, and those that translate those ideas
    into working software – the software developers). For this process to be effective,
    we tend to look for approaches that are as follows:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当处理一个领域概念不明确的问题时，需要在关键团队成员（既有好主意的人——业务/产品人员，也有将这些想法转化为工作软件的人——软件开发人员）之间达成共识。为了使这个过程有效，我们倾向于寻找以下方法：
- en: Quick, informal, and effective
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 快速、非正式且有效
- en: Collaborative – easy to learn and adopt for both non-technical and technical
    team members
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 协作性 – 对于非技术性和技术性团队成员来说都易于学习和采用
- en: Pictorial, because a picture can be worth a thousand words
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图形化，因为一张图片可能胜过千言万语
- en: Usable for both coarse-grained and fine-grained scenarios
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适用于粗粒度和细粒度场景
- en: 'There are several means to arrive at this shared understanding. The following
    are some of the commonly used approaches:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种方法可以达到这种共识。以下是一些常用的方法：
- en: UML
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: UML
- en: BPMN
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BPMN
- en: Use cases
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用例
- en: User story mapping
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户故事映射
- en: CRC models
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CRC模型
- en: Data flow diagrams
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据流图
- en: These modeling techniques try to formalize knowledge and express it in the form
    of a diagram or text to help deliver business requirements as a software product.
    However, this attempt has not narrowed but widened the gap between business and
    software systems. While these methods tend to work well for technical audiences,
    they are usually not as appealing to non-technical users.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 这些建模技术试图将知识形式化，并以图表或文本的形式表达出来，以帮助将业务需求作为软件产品交付。然而，这种尝试并没有缩小而是扩大了业务与软件系统之间的差距。虽然这些方法对于技术受众来说往往效果良好，但它们通常对非技术用户不太有吸引力。
- en: In order to restore the balance and promote the use of techniques that can work
    for both parties, we will use **domain storytelling** and **EventStorming** as
    our means to capture business knowledge from domain experts for the consumption
    of developers and business analysts, among others.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 为了恢复平衡并推广对双方都适用的技术，我们将使用**领域叙事**和**事件风暴法**作为我们的手段，从领域专家那里捕捉业务知识，供开发人员、业务分析师等使用。
- en: Domain storytelling
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 领域叙事
- en: Scientific research has now proven that learning methods that employ audiovisual
    aids assist both teachers and students in retaining and internalizing concepts
    very effectively. In addition, teaching what we have learned helps reinforce ideas
    and stimulate the formation of new ones.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 科学研究现在已经证明，使用视听辅助工具的学习方法能够非常有效地帮助教师和学生保留和内化概念。此外，教授我们所学的知识有助于加强想法并激发新想法的形成。
- en: Domain storytelling is a collaborative modeling technique that combines a pictorial
    language, real-world examples, and a workshop format to serve as a very simple,
    quick, and effective technique for sharing knowledge among team members. Domain
    storytelling is a technique invented and popularized by Stefan Hofer and Henning
    Schwentner, based on some related work done at the University of Hamburg called
    *cooperation pictures*.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 领域故事是一种协作建模技术，它结合了图形语言、现实世界示例和工作坊格式，作为一种非常简单、快捷且有效的技术在团队成员之间分享知识的方法。领域故事是一种由斯蒂芬·霍弗和亨宁·施文特纳发明并普及的技术，基于汉堡大学进行的一些相关研究，称为*合作图*。
- en: 'A pictorial notation of the technique is illustrated in the following diagram:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 该技术的图形符号在以下图表中展示：
- en: '![Figure 4.1 – Domain storytelling summarized'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '![图4.1 – 领域故事概述]'
- en: '](img/B16716_04_01.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16716_04_01.jpg]'
- en: Figure 4.1 – Domain storytelling summarized
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.1 – 领域故事概述
- en: 'A domain story is conveyed using the following attributes:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 领域故事是通过以下属性传达的：
- en: '**Actors**: Stories are communicated from the perspective of an actor (noun)
    – for example, the issuing bank, which plays an active role in the context of
    a particular story. It is a good practice to use the ubiquitous language for the
    particular domain.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**参与者**：故事是从一个参与者的角度（名词）进行传达的——例如，发行银行，在特定故事情境中扮演着积极角色。使用特定领域的通用语言是一种良好的实践。'
- en: '**Work objects**: Actors act on some object – for example, applying for an
    LC. Again, this would be a term (noun) commonly used in the domain.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工作对象**：参与者对某些对象进行操作——例如，申请信用证。同样，这将是领域内常用的一个术语（名词）。'
- en: '**Activities**: Actions (verb) performed by the actor on a work object. Represented
    by a labeled arrow connecting the actor and the work object.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**活动**：参与者对一个工作对象执行的动作（动词）。通过一个连接参与者和工作对象的带标签的箭头来表示。'
- en: '**Annotations**: Used to capture additional information as part of the story,
    usually represented in a few sentences.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**注释**：用于捕捉故事中的额外信息，通常以几句话的形式表示。'
- en: '**Sequence numbers**: Usually, stories are told one sentence after the other.
    Sequence numbers help capture the sequence of activities in a story.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**序列号**：通常，故事是一句接一句地讲述的。序列号有助于捕捉故事中活动的顺序。'
- en: '**Groups**: An outline to represent a collection of related concepts, ranging
    from repeated/optional activities to subdomains/organizational boundaries.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组别**：用于表示相关概念的集合的概要，范围从重复/可选活动到子领域/组织边界。'
- en: Using DST for an LC application
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用DST进行信用证申请
- en: KP Bank has a process that allows the processing of LCs. However, this process
    is very archaic, paper-based, and manually intensive. Very few at the bank fully
    understand the process end to end, and natural attrition has meant that the process
    is overly complex without good reason. So, they are looking to digitize and simplify
    this process. DST itself is just a graphical notation that can be done in isolation.
    However, it is typical to not do this on your own and employ a workshop style,
    with domain experts and software experts working collaboratively.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: KP银行有一个允许处理信用证的过程。然而，这个过程非常陈旧，基于纸张，且手工操作密集。银行中很少有人完全理解整个过程，自然损耗意味着这个过程过于复杂，而没有任何合理的理由。因此，他们正在寻求数字化和简化这个过程。DST本身只是一种可以独立完成的图形符号。然而，通常不会单独进行，而是采用工作坊风格，让领域专家和软件专家共同协作。
- en: 'In this section, we will employ a DST workshop to capture the current business
    flow. The following is an excerpt of such a conversation between *Katie*, *the
    domain expert*, and *Patrick*, *the software developer*:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用DST工作坊来捕捉当前的业务流程。以下是一个这样的对话摘录，对话双方是*凯蒂*，*领域专家*，和*帕特里克*，*软件开发者*：
- en: '**Patrick**: *Can you give me a high-level overview of a typical LC flow?*'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*你能给我一个典型的信用证流程的概述吗？*'
- en: '**Katie**: *Sure, it all begins with the importer and the exporter entering
    into a contract for the purchase of goods or services.*'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*当然，一切始于进口商和出口商签订购买商品或服务的合同。*'
- en: '**Patrick**: *What form does this contract take? Is it a formal document clause?
    Or is this just a conversation?*'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*这份合同的形式是什么？是正式文件条款吗？还是这只是个对话？*'
- en: '**Katie**: *This is just a conversation.*'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*这只是一个对话。*'
- en: '**Patrick**: *Oh okay. What does the conversation cover?*'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*哦，明白了。对话涵盖了什么内容？*'
- en: '**Katie**: *Several things – the nature and quantity of goods, pricing details,
    payment terms, shipment costs and timelines, insurance, and warranty, among other
    things. These details can be captured in a purchase order – which is a simple
    document clause elaborating the aforementioned.*'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*有几个方面——商品的性质和数量、定价细节、付款条款、运输成本和时间表、保险和保修等。这些细节可以包含在采购订单中——这是一个简单的文件条款，详细说明了上述内容。*'
- en: 'At this time, Patrick draws this part of the interaction between the importer
    and the exporter. This graphic is depicted in the following diagram:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，帕特里克绘制了进口商和出口商之间的互动部分。这个图形在以下图表中展示：
- en: '![ Figure 4.2 – The interaction between the importer and the exporter'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.2 – 进口商和出口商之间的互动'
- en: '](img/B16716_04_02.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16716_04_02.jpg)'
- en: Figure 4.2 – The interaction between the importer and the exporter
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.2 – 进口商和出口商之间的互动
- en: '**Patrick**: *This seems straightforward, so where does the bank come into
    the picture?*'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*这似乎很简单，那么银行在其中的作用是什么？*'
- en: '**Katie**: *This is an international trade, and both the importer and the exporter
    need to mitigate the financial risk involved in such business transactions. So,
    they involve a bank as a trusted mediator.*'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*这是一项国际贸易，进口商和出口商都需要减轻这种商业交易中涉及到的财务风险。因此，他们需要一家银行作为可信赖的中介。*'
- en: '**Patric**: *What kind of bank is this?*'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*这是什么类型的银行？*'
- en: '**Katie**: *Usually, there are multiple banks involved. But it all starts with
    an* **issuing bank***.*'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*通常涉及多个银行。但一切始于一个* **开证行** *。'
- en: '**Patrick**: *What is an issuing bank?*'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*开证行是什么？*'
- en: '**Katie**: *Any bank that is authorized to mediate international trade deals.
    This has to be a bank in the importer’s country.*'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*任何被授权调解国际贸易交易的银行。这必须是进口国的一家银行。*'
- en: '**Patrick**: *Does the importer need to have an existing relationship with
    this bank?*'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*进口商需要与这家银行有现有关系吗？*'
- en: '**Katie**: *Not necessarily. There may be other banks with whom the importer
    may have a relationship – which, in turn, liaise with the issuing bank on the
    importer’s behalf. But to keep it simple, let’s assume that the importer has an
    existing relationship with the issuing bank – which is our bank, in this case.*'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*不一定。进口商可能与其他银行有关系——这些银行反过来会代表进口商与开证行联络。但为了简单起见，让我们假设进口商与开证行有现有关系——在这种情况下，就是我们的银行。*'
- en: '**Patrick**: *Does the importer provide details of the purchase order to the
    issuing bank to get started?*'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*进口商需要向开证行提供采购订单的详情以开始吗？*'
- en: '**Katie**: *Yes. The importer provides the details of the transaction by making
    an* **LC application***.*'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*是的。进口商通过提交* **信用证申请** *来提供交易详情。*'
- en: '![Figure 4.3 – Introducing the LC and the issuing bank'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.3 – 介绍信用证和开证行'
- en: '](img/B16716_04_03.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16716_04_03.jpg)'
- en: Figure 4.3 – Introducing the LC and the issuing bank
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.3 – 介绍信用证和开证行
- en: '**Patrick**: *What does the issuing bank do when they receive this LC application?*'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*开证行在收到这份信用证申请时会做什么？*'
- en: '**Katie**: *Mainly two things – vet the financial standing of the importer
    and the legality of the goods being imported.*'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*主要有两点——核实进口商的财务状况和进口货物的合法性。*'
- en: '**Patrick**: *Okay. What happens if everything checks out?*'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*好的。如果一切都检查无误，会发生什么？*'
- en: '**Katie**: *The issuing bank approves the LC and notifies the importer.*'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*开证行批准信用证并通知进口商。*'
- en: '![Figure 4.4 – Notifying LC approval to the importer'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.4 – 通知进口商信用证批准'
- en: '](img/B16716_04_04.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16716_04_04.jpg)'
- en: Figure 4.4 – Notifying LC approval to the importer
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.4 – 通知进口商信用证批准
- en: '**Patrick**: *What happens next? Does the issuing bank contact the exporter
    now?*'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*接下来会发生什么？开证行现在会联系出口商吗？*'
- en: '**Katie**: *Not yet. It is not that simple. The issuing bank can only deal
    with a counterpart bank in the exporter’s country. This bank is called the* **advising
    bank***.*'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*还没有。这并不简单。开证行只能与出口国的一家对应银行交易。这家银行被称为* **通知行** *。*'
- en: '![Figure 4.5 – Introducing the advising bank'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.5 – 介绍通知行'
- en: '](img/B16716_04_05.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16716_04_05.jpg)'
- en: Figure 4.5 – Introducing the advising bank
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.5 – 介绍通知行
- en: '**Patrick**: *What does the advising bank do?*'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*通知行做了什么？*'
- en: '**Katie**: *The advising bank notifies the exporter about the LC.*'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*通知行通知出口商关于信用证的信息。*'
- en: '**Patrick**: *Doesn’t the importer need to know that the LC has been advised?*'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*进口商不需要知道信用证已通知吗？*'
- en: '**Katie**: *Yes. The issuing bank notifies the importer that the LC has been
    advised to the exporter.*'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*是的。开证行通知进口商，信用证已通知出口商。*'
- en: '![Figure 4.6 – Advice notification to the importer'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.6 – 建议通知给进口商'
- en: '](img/B16716_04_06.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16716_04_06.jpg)'
- en: Figure 4.6 – Advice notification to the importer
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.6 – 建议通知给进口商
- en: '**Patrick**: *How does the exporter know how to proceed?*'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*出口商如何知道如何进行操作？*'
- en: '**Katie**: *Through the advising bank – they notify the exporter that the LC
    was issued.*'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*通过通知行——他们通知出口商信用证已发行。*'
- en: '![Figure 4.7 – Dispatching the advice to the exporter'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.7 – 将建议发送给出口商'
- en: '](img/B16716_04_07.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16716_04_07.jpg)'
- en: Figure 4.7 – Dispatching the advice to the exporter
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.7 – 将建议发送给出口商
- en: '**Patrick**: *Does the exporter initiate shipping at this time and how do they
    get paid?*'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '**帕特里克**：*出口商现在就开始发货，他们如何收款？*'
- en: '**Katie**: *Through the advising bank – they notify the exporter that the LC
    was issued, and this triggers the next steps in the process – this process of
    settling payment is called* **settlement***. But let’s focus on issuance right
    now. We will discuss settlement at a later time.*'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '**凯蒂**：*通过通知行——他们通知出口商信用证已发行，这触发了流程中的下一步——这个过程称为*结算*。但让我们现在专注于发行。我们将在稍后讨论结算。*'
- en: We have now looked at an excerpt of a typical DST workshop. It has provided
    a reasonably good understanding of the high-level business flow. Note that we
    have not referenced any technical artifacts during the process.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经查看了一个典型的DST工作坊的摘录。它提供了一个相当好的对高级业务流程的理解。请注意，在过程中我们没有引用任何技术工件。
- en: To refine this flow and convert it into a form that can be used to design a
    software solution, we will need to further enhance this view. In the upcoming
    section, we will use **EventStorming** as a structured approach to achieve that.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 为了细化这个流程并将其转换为可用于设计软件解决方案的形式，我们需要进一步改进这个视图。在下一节中，我们将使用**EventStorming**作为一种结构化的方法来实现这一点。
- en: EventStorming
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: EventStorming
- en: “The amount of energy necessary to refute bullshit is an order of magnitude
    bigger than to produce it.”
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: “驳斥胡说八道的能量比产生它的能量大一个数量级。”
- en: – Alberto Brandolini
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: – 阿尔贝托·布兰多利尼
- en: Introducing EventStorming
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 介绍 EventStorming
- en: In the previous section, we gained a high-level understanding of the LC issuance
    process. To be able to build a real-world application, it helps to use a method
    that delves into the next level of detail. EventStorming, originally conceived
    by Alberto Brandolini, is one such method for the collaborative exploration of
    complex domains.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，我们获得了对信用证发行流程的高级理解。为了能够构建一个现实世界的应用，使用一种深入到下一级细节的方法是有帮助的。EventStorming，最初由阿尔贝托·布兰多利尼构想，就是这样一种用于协作探索复杂领域的方法。
- en: 'In this method, you simply start by listing all the events that are significant
    to a business domain in roughly chronological order on a wall or whiteboard, using
    a bunch of colored sticky notes. Each of the note types (denoted by different
    colors) serves a specific purpose, as outlined here:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种方法中，你只需从墙上或白板上按大致时间顺序列出对业务领域有重要意义的所有事件，使用一堆彩色便利贴。每种便签类型（用不同颜色表示）都有特定的用途，如下所述：
- en: '**Domain event**: An event that is significant to the business process – expressed
    in the past tense.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**领域事件**：对业务流程有重要意义的事件——用过去时态表达。'
- en: '**Command**: An action or an activity that may result in one or more domain
    events occurring. This is either user-initiated or system-initiated, in response
    to a domain event.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**命令**：可能引起一个或多个领域事件发生的动作或活动。这是由用户发起或系统发起的，作为对领域事件的响应。'
- en: '**User**: A person who performs a business action/activity.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户**：执行业务动作/活动的人。'
- en: '**Policy**: A set of business invariants (rules) that need to be adhered to
    for an action/activity to be successfully performed.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**策略**：一组需要遵守的业务不变量（规则），以便成功执行动作/活动。'
- en: '**Query/read model**: A piece of information required to perform an action/activity.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查询/读取模型**：执行动作/活动所需的信息。'
- en: '**External system**: A system significant to the business process but out of
    scope in the current context.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**外部系统**：对业务流程有重要意义但在当前上下文中不在范围内的系统。'
- en: '**Hotspot**: A point of contention within the system that is likely confusing
    and/or puzzling beyond a small subsection of the team.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**热点**：系统内部的一个争议点，可能对团队的小部分人来说既令人困惑又令人费解。'
- en: '**Aggregate**: An object graph whose state changes consistently and atomically.
    This is consistent with the definition of *aggregates* we saw in [*Chapter 2*](B16716_02_Final_NM_ePub.xhtml#_idTextAnchor037),
    *Where and How Does DDD Fit?*.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**聚合**：一个状态变化一致且原子化的对象图。这与我们在[*第二章*](B16716_02_Final_NM_ePub.xhtml#_idTextAnchor037)中看到的*聚合*定义一致，*DDD
    如何适应？*。'
- en: 'The depiction of the stickies for our EventStorming workshop is shown here:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这里展示了我们的事件风暴研讨会中贴纸的描绘：
- en: '![Figure 4.8 – An EventStorming legend'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.8 – 事件风暴图例'
- en: '](img/B16716_04_08.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16716_04_08.jpg)'
- en: Figure 4.8 – An EventStorming legend
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.8 – 事件风暴图例
- en: Why Domain Events?
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么是领域事件？
- en: When trying to understand a business process, it is convenient to explain significant
    facts or things in that context. This practice can also be informal and easy for
    uninitiated audiences. This provides an easy-to-digest visual representation of
    domain complexity.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 当试图理解一个业务流程时，解释该背景下的重要事实或事物是很方便的。这种做法也可以是非正式的，并且对未经介绍的人群来说很容易理解。这提供了一个易于消化的领域复杂性的视觉表示。
- en: Using EventStorming for the LC issuance application
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用事件风暴法处理LC发行申请
- en: 'Now that we have a high-level understanding of the current business process,
    thanks to the domain storytelling workshop, let’s look at how we can delve deeper
    using EventStorming. The following is an excerpt of the stages from an EventStorming
    workshop for the same application:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经通过领域讲故事研讨会对当前业务流程有了高级理解，让我们看看我们如何使用事件风暴法深入挖掘。以下是从同一应用程序的事件风暴研讨会阶段摘录的内容：
- en: '**Outline the event chronology**: During this exercise, we recall significant
    **domain events** (using orange stickies) in the system and paste them on the
    whiteboard, as depicted in the following diagram. We ensure that the event stickies
    are pasted roughly in the chronological order of occurrence. As the timeline is
    enforced, the business flow will begin to emerge:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**概述事件时间线**：在这个练习中，我们回忆系统中的重要**领域事件**（使用橙色贴纸），并将它们贴在白板上，如图所示。我们确保事件贴纸按发生的大致时间顺序粘贴。由于时间线的实施，业务流程将开始显现：'
- en: '![Figure 4.9 – Event chronology'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.9 – 事件时间线'
- en: '](img/B16716_04_09.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.12 – 用户和政策'
- en: Figure 4.9 – Event chronology
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.9 – 事件时间线
- en: This acts as an aid in understanding the big picture. This also enables people
    in the room to identify hotspots in the existing business process. In the preceding
    diagram, the process to handle *declined LC applications* is suboptimal – that
    is, the applicants do not receive any information when their application is declined.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 这有助于理解整体情况。这也使房间里的人能够识别现有业务流程中的热点。在前面的图中，处理*被拒绝的LC申请*的过程是不理想的——也就是说，当申请被拒绝时，申请人没有收到任何信息。
- en: 'To address this, we added a new domain event that explicitly indicates that
    an application is declined, as depicted in the following diagram:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.12 – 用户和政策
- en: '![Figure 4.10 – A new event to handle declined applications'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.10 – 处理被拒绝申请的新事件'
- en: '](img/B16716_04_10.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16716_04_10.jpg)'
- en: Figure 4.10 – A new event to handle declined applications
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.10 – 处理被拒绝申请的新事件
- en: '**Identify triggering activities and external systems**: Having arrived at
    a high-level understanding of event chronology, the next step is to embellish
    the visual with *activities/actions* that cause these events to occur (using blue
    stickies) and interactions with *external systems* (using pink stickies):'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**识别触发活动和外部系统**：在达到对事件时间线的高级理解之后，下一步是使用蓝色贴纸添加导致这些事件发生的活动/动作，以及与*外部系统*的交互（使用粉色贴纸）：'
- en: '![Figure 4.11 – Activities and external systems'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.11 – 活动和外部系统'
- en: '](img/B16716_04_11.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16716_04_11.jpg)'
- en: Figure 4.11 – Activities and external systems
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.11 – 活动和外部系统
- en: '**Capture users, context, and policies**: The next step is to capture *users*
    who perform these activities along with their functional *context* (using yellow
    stickies) and *policies* (using purple stickies).'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**捕获用户、上下文和政策**：下一步是捕获执行这些活动的*用户*以及他们的功能*上下文*（使用黄色贴纸）和*政策*（使用紫色贴纸）。'
- en: '![Figure 4.12 – Users and policies'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个问题，我们添加了一个新的领域事件，明确表示申请已被拒绝，如图所示：
- en: '](img/B16716_04_12.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16716_04_12.jpg)'
- en: Figure 4.12 – Users and policies
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16716_04_09.jpg)'
- en: '**Outline query models**: Every activity requires a certain set of data. Users
    need to view out-of-band data that they need to act upon and also see the result
    of their actions. These sets of data are represented as *query models* (using
    green stickies):'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**概述查询模型**：每个活动都需要一组数据。用户需要查看他们需要采取行动的带外数据，并看到他们行动的结果。这些数据集以 *查询模型*（使用绿色便签）表示：'
- en: '![Figure 4.13 – A big picture EventStorming workshop board'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.13 – 一个大型的 EventStorming 实作工作板'
- en: '](img/B16716_04_13.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16716_04_13.jpg)'
- en: Figure 4.13 – A big picture EventStorming workshop board
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.13 – 一个大型的 EventStorming 实作工作板
- en: Important note
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: For both the domain storytelling and EventStorming workshops, it works best
    when we have approximately six to eight people participating with the right mix
    of domain and technology experts.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 对于领域故事讲述和 EventStorming 实作，当有大约六到八人参与，并且有合适的领域和技术专家混合时，效果最佳。
- en: 'This concludes the EventStorming workshop to gain a reasonably detailed understanding
    of the LC application and issuance process. Does this mean that we have concluded
    the domain requirements gathering process? Not at all – while we have made significant
    strides in understanding the domain, there is still a long way to go. The process
    of elaborating domain requirements is perpetual. Where are we in this continuum?
    The following diagram is an attempt to clarify:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 这标志着 EventStorming 实作结束，以获得对 LC 应用和发行流程的合理详细理解。这意味着我们已经结束了领域需求收集过程吗？绝非如此——虽然我们在理解领域方面取得了重大进展，但仍有一段很长的路要走。阐述领域需求的过程是持续的。我们在这一连续体中处于什么位置？以下图表试图阐明：
- en: '![Figure 4.14 – Elaborating the domain requirements continuum'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.14 – 阐述领域需求连续体'
- en: '](img/B16716_04_14.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16716_04_14.jpg)'
- en: Figure 4.14 – Elaborating the domain requirements continuum
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.14 – 阐述领域需求连续体
- en: In subsequent chapters, we will examine the other techniques in more detail.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在随后的章节中，我们将更详细地探讨其他技术。
- en: Summary
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we examined two ways to enhance our collective understanding
    of a problem domain using two lightweight modeling techniques – domain storytelling
    and EventStorming.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了两种使用轻量级建模技术——领域故事讲述和 EventStorming——来增强我们对问题领域集体理解的方法。
- en: Domain storytelling uses a simple pictorial notation to share business knowledge
    among domain experts and technical team members. EventStorming, on the other hand,
    uses a chronological ordering of domain events that occur as part of the business
    process to gain that same shared understanding.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 领域故事讲述使用简单的图形符号在领域专家和技术团队成员之间共享业务知识。另一方面，EventStorming 使用业务流程中发生的领域事件的时序顺序来获得相同的共享理解。
- en: Domain storytelling can be used as an introductory technique to establish a
    high-level understanding of a problem space, while EventStorming can be used to
    inform detailed design decisions of a solution space.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 领域故事讲述可以用作一种入门技术，以建立对问题空间的高级理解，而 EventStorming 可以用来指导解决方案空间详细设计决策。
- en: With this knowledge, we should be able to dive deeper into the technical aspects
    of solution implementation. In the next chapter, we will start the implementation
    of business logic and model our aggregate, along with commands and domain events.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 带着这些知识，我们应该能够深入到解决方案实施的技术细节。在下一章中，我们将开始实施业务逻辑，并建模我们的聚合，包括命令和领域事件。
- en: Further reading
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: '![](img/B16716_04_Table_01.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B16716_04_Table_01.jpg)'
