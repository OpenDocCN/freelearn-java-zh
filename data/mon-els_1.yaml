- en: Chapter 1. Introduction to Monitoring Elasticsearch
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章：Elasticsearch监控简介
- en: Elasticsearch is a distributed and horizontally scalable full-text search engine
    with built-in data redundancy. It is a powerful and incredibly useful tool. However,
    as with any distributed system, problems may arise as it scales with more nodes
    and more data.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Elasticsearch是一个分布式且水平可扩展的全文搜索引擎，具有内置的数据冗余。它是一个强大且极其有用的工具。然而，与任何分布式系统一样，随着节点和数据量的增加，可能会出现问题。
- en: The information provided by Elasticsearch monitoring tools can drastically improve
    your ability to solve cluster issues and greatly increase cluster reliability
    and performance as a result. This chapter gives an overview of Elasticsearch and
    talks about why and how to monitor a cluster.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Elasticsearch监控工具提供的信息可以极大地提高您解决集群问题的能力，从而显著提高集群的可靠性和性能。本章概述了Elasticsearch，并讨论了为什么以及如何监控集群。
- en: 'Specifically, this chapter covers the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，本章涵盖了以下主题：
- en: An overview of Elasticsearch
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch概述
- en: Monitoring Elasticsearch
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控Elasticsearch
- en: Resourcefulness and problem solving
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资源丰富和问题解决
- en: An overview of Elasticsearch
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Elasticsearch概述
- en: This section gives a high-level overview of Elasticsearch and discusses some
    related full-text search products.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本节提供了Elasticsearch的高级概述，并讨论了一些相关的全文搜索产品。
- en: Learning more about Elasticsearch
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 了解更多关于Elasticsearch的信息
- en: Elasticsearch is a free and open source full-text search engine that is built
    on top of Apache Lucene. Out of the box, Elasticsearch supports horizontal scaling
    and data redundancy. Released in 2010, Elasticsearch quickly gained recognition
    in the full-text search space. Its scalability features helped the tool gain market
    share against similar technologies such as Apache Solr.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Elasticsearch是一个基于Apache Lucene构建的免费开源全文搜索引擎。开箱即用，Elasticsearch支持水平扩展和数据冗余。2010年发布后，Elasticsearch迅速在全文搜索领域获得了认可。其可伸缩性功能帮助该工具在Apache
    Solr等类似技术中获得了市场份额。
- en: 'Elasticsearch is a persistent document store and retrieval system, and it is
    similar to a database. However, it is different from relational databases such
    as MySQL, PostgreSQL, and Oracle in many ways:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Elasticsearch是一个持久化文档存储和检索系统，它类似于数据库。然而，它在许多方面与MySQL、PostgreSQL和Oracle等关系型数据库不同：
- en: '**Distributed**: Elasticsearch stores data and executes queries across multiple
    data nodes. This improves scalability, reliability, and performance.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分布式**：Elasticsearch在多个数据节点上存储数据和执行查询。这提高了可伸缩性、可靠性和性能。'
- en: '**Fault tolerant**: Data is replicated across multiple nodes in an Elasticsearch
    cluster, so if one node goes down, data is still available.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**容错**：数据在Elasticsearch集群的多个节点之间进行复制，因此如果一个节点宕机，数据仍然可用。'
- en: '**Full-text search**: Elasticsearch is built on top of Lucene, a full-text
    search technology, allowing it to understand and search natural language text.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全文搜索**：Elasticsearch建立在Lucene全文搜索技术之上，这使得它能够理解和搜索自然语言文本。'
- en: '**JSON document store**: Elasticsearch stores documents as JSON instead of
    as rows in a table.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**JSON文档存储**：Elasticsearch将文档存储为JSON，而不是存储在表的行中。'
- en: '**NoSQL**: Elasticsearch uses a JSON-based query language as opposed to a sequel
    query language (SQL).'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**NoSQL**：Elasticsearch使用基于JSON的查询语言，而不是SQL查询语言。'
- en: '**Non-relational**: Unlike relational databases, Elasticsearch doesn''t support
    *JOINS* across tables.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**非关系型**：与关系型数据库不同，Elasticsearch不支持跨表的*连接*。'
- en: '**Analytics**: Elasticsearch has built-in analytical capabilities, such as
    word aggregations, geospatial queries, and scripting language support.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分析**：Elasticsearch具有内置的分析功能，例如单词聚合、地理空间查询和脚本语言支持。'
- en: '**Dynamic Mappings**: A *mapping* in Elasticsearch is analogous to a *schema*
    in the relational database world. If the data type for a document field isn''t
    explicitly defined, Elasticsearch will dynamically assign a type to it.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**动态映射**：在Elasticsearch中，*映射*类似于关系型数据库世界中的*模式*。如果一个文档字段的 数据类型没有明确定义，Elasticsearch会动态地为它分配一个类型。'
- en: Data distribution, redundancy, and fault tolerance
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据分布、冗余和容错
- en: '*Figures 1.1* through *1.4* explain how Elasticsearch distributes data across
    multiple nodes and how it automatically recovers from node failures:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '*图1.1*至*图1.4*解释了Elasticsearch如何在多个节点之间分配数据以及它如何自动从节点故障中恢复：'
- en: '![Data distribution, redundancy, and fault tolerance](img/B03798_01_01.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![数据分布、冗余和容错](img/B03798_01_01.jpg)'
- en: 'Figure 1.1: Elasticsearch Data Distribution'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1：Elasticsearch数据分布
- en: 'In this figure, we have an Elasticsearch cluster made up of three nodes: `elasticsearch-node-01`,
    `elasticsearch-node-02`, and `elasticsearch-node-03`. Our data index, is broken
    into three pieces, called **shards**. These shards are labeled `0`, `1`, and `2`.
    Each shard is replicated once; this means that there is a redundant copy of all
    shards. The cluster is colored green because the cluster is in good health; all
    data shards and replicas are available.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个图中，我们有一个由三个节点组成的Elasticsearch集群：`elasticsearch-node-01`、`elasticsearch-node-02`和`elasticsearch-node-03`。我们的数据索引被分成三部分，称为**分片**。这些分片被标记为`0`、`1`和`2`。每个分片都进行了复制；这意味着所有分片都有一个冗余副本。集群被涂成绿色，因为集群处于良好状态；所有数据分片和副本都是可用的。
- en: 'Let''s say that the `elasticsearch-node-03` host experiences a hardware failure
    and shuts down. The following figures show what happens to the cluster in this
    scenario:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 假设`elasticsearch-node-03`主机发生硬件故障并关闭。以下图示显示了在此场景下集群会发生什么：
- en: '![Data distribution, redundancy, and fault tolerance](img/B03798_01_02.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![数据分布、冗余和容错](img/B03798_01_02.jpg)'
- en: 'Figure 1.2: Node failure'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2：节点故障
- en: '*Figure 1.2* shows `elasticsearch-node-03` experiencing a failure, and the
    cluster entering a `yellow` state. This state means that there is at least one
    copy of each shard active in the cluster, but not all shard replicas are active.
    In our case, a copy of the `1` and `2` shards were on the node that failed, `elasticsearch-node-03`.
    A `yellow` state also warns us that if there''s another hardware failure, it''s
    possible that not all data shards will be available.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '*图1.2*显示了`elasticsearch-node-03`发生故障，集群进入`黄色`状态。这种状态意味着集群中至少有一个分片的副本是活跃的，但并非所有分片副本都是活跃的。在我们的例子中，`1`和`2`分片的副本在失败的节点`elasticsearch-node-03`上。`黄色`状态还警告我们，如果发生另一个硬件故障，可能并非所有数据分片都将可用。'
- en: 'When `elasticsearch-node-03` goes down, Elasticsearch will automatically start
    rebuilding redundant copies of the `1` and `2` shards on the remaining nodes;
    in our case, this is `elasticsearch-node-01` and `elasticsearch-node-02`. This
    is shown in the following figure:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当`elasticsearch-node-03`节点宕机时，Elasticsearch将自动在剩余的节点上重新构建`1`和`2`分片的冗余副本；在我们的例子中，这是`elasticsearch-node-01`和`elasticsearch-node-02`。这在下图中显示：
- en: '![Data distribution, redundancy, and fault tolerance](img/B03798_01_03.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![数据分布、冗余和容错](img/B03798_01_03.jpg)'
- en: 'Figure 1.3: Cluster recovering'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3：集群恢复中
- en: Once Elasticsearch finishes rebuilding the data replicas, the cluster enters
    a `green` state once again. Now, all data and shards are available to query.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦Elasticsearch完成数据副本的重建，集群再次进入`绿色`状态。现在，所有数据和分片都可以用于查询。
- en: '![Data distribution, redundancy, and fault tolerance](img/B03798_01_04.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![数据分布、冗余和容错](img/B03798_01_04.jpg)'
- en: 'Figure 1.4: Cluster recovered'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.4：集群恢复
- en: The cluster recovery process demonstrated in *Figures 1.3* and *1.4* happens
    automatically in Elasticsearch. No extra configuration or user action is required.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图1.3*和*1.4*中展示的集群恢复过程在Elasticsearch中是自动发生的。不需要额外的配置或用户操作。
- en: Full-text search
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 全文搜索
- en: '**Full-text** search refers to running keyword queries against natural-language
    text documents. A document can be something, such as a newspaper article, a blog
    post, a forum post, or a tweet. In fact, many popular newspapers, forums, and
    social media websites, such as The New York Times, Stack Overflow, and Foursquare,
    use Elasticsearch.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**全文**搜索指的是对自然语言文本文档执行关键字查询。文档可以是任何东西，例如报纸文章、博客文章、论坛帖子或推文。实际上，许多流行的报纸、论坛和社交媒体网站，如《纽约时报》、Stack
    Overflow和Foursquare，都使用Elasticsearch。'
- en: 'Assume that we were to store the following text string in Elasticsearch:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们要将以下文本字符串存储在Elasticsearch中：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A user can find this document by searching Elasticsearch using keywords, such
    as *demand* or *doubt*. Elasticsearch also supports word stemming. This means
    that if we searched for the word *define*, Elasticsearch would still find this
    document because the root word of *defined* is *define*.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以通过使用关键字，如*需求*或*怀疑*，在Elasticsearch中进行搜索以找到此文档。Elasticsearch还支持词干提取。这意味着如果我们搜索单词*define*，Elasticsearch仍然会找到此文档，因为*defined*的词根是*define*。
- en: 'This piece of text, along with some additional metadata, may be stored as follows
    in Elasticsearch in the JSON format:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 这段文本以及一些额外的元数据可以按照以下方式存储在Elasticsearch中，格式为JSON：
- en: '[PRE1]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'If we let Elasticsearch dynamically assign a mapping (think *schema*) to this
    document, it would look like this:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们让Elasticsearch动态地为这个文档分配一个映射（想想*模式*），它看起来会是这样：
- en: '[PRE2]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Note that Elasticsearch was able to pick up that the `published` field looked
    like a date.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，Elasticsearch能够识别出`published`字段看起来像日期。
- en: 'An Elasticsearch query that searches for this document looks like this:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 搜索此文档的Elasticsearch查询如下所示：
- en: '[PRE3]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Specifics about Elasticsearch mappings and the Search API are beyond the scope
    of this book, but you can learn more about them through the official Elasticsearch
    documentation at the following links:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 关于Elasticsearch映射和搜索API的详细信息超出了本书的范围，但你可以通过以下链接的官方Elasticsearch文档了解更多信息：
- en: '**Elasticsearch** **Mappings**: [https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Elasticsearch** **映射**：[https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html)'
- en: '**Elasticsearch Search** **API**: [https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html)'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Elasticsearch搜索** **API**：[https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html)'
- en: Note
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Elasticsearch should not be your primary data store. It does not provide guarantees,
    such as the **Atomicity, Consistency, Isolation, and Durability** (**ACID**) of
    a traditional SQL data store, nor the reliability guarantees of other NoSQL databases
    such as HBase or Cassandra. Even though Elasticsearch has built-in data redundancy
    and fault tolerance, it's best practice to archive your data in a separate data
    store in order to re-index data into Elasticsearch if needed.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: Elasticsearch不应成为你的主要数据存储。它不提供传统SQL数据存储的**原子性、一致性、隔离性和持久性**（**ACID**）保证，也不提供其他NoSQL数据库（如HBase或Cassandra）的可靠性保证。尽管Elasticsearch具有内置的数据冗余和容错能力，但最佳实践是在单独的数据存储中存档数据，以便在需要时将数据重新索引到Elasticsearch中。
- en: Similar technologies
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相似的技术
- en: This section explains a few of the many open source full-text search engines
    available, and discusses how they match up to Elasticsearch.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 本节解释了众多开源全文搜索引擎中的一些，并讨论了它们与Elasticsearch的匹配情况。
- en: Apache Lucene
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Apache Lucene
- en: Apache Lucene ([https://lucene.apache.org/core/](https://lucene.apache.org/core/))
    is an open source full-text search Java library. As mentioned earlier, Lucene
    is Elasticsearch's underlying search technology. Lucene also provides Elasticsearch's
    analytics features such as text aggregations and geospatial search. Using Apache
    Lucene directly is a good choice if you perform full-text search in Java on a
    small scale, or are building your own full-text search engine.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Apache Lucene ([https://lucene.apache.org/core/](https://lucene.apache.org/core/))
    是一个开源的全文搜索Java库。如前所述，Lucene是Elasticsearch的底层搜索技术。Lucene还提供了Elasticsearch的分析功能，如文本聚合和地理空间搜索。如果你在Java中进行小规模的全文搜索，或者正在构建自己的全文搜索引擎，直接使用Apache
    Lucene是一个不错的选择。
- en: 'The benefits of using Elasticsearch over Lucene are as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Elasticsearch而不是Lucene的好处如下：
- en: REST API instead of a Java API
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用REST API而不是Java API
- en: JSON document store
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JSON文档存储
- en: Horizontal scalability, reliability, and fault tolerance
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 水平可扩展性、可靠性和容错性
- en: On the other hand, Lucene is much more lightweight and flexible to build custom
    applications that require full-text search integrated from the ground up.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，Lucene更加轻量级和灵活，可以构建需要从头开始集成全文搜索的定制应用程序。
- en: Note
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Lucene.NET is a popular .NET port of the library written in C#
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: Lucene.NET是C#编写的库的流行.NET版本
- en: Solr
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Solr
- en: Solr is another full-text search engine built on top of Apache Lucene. It has
    similar search, analytic, and scaling capabilities to Elasticsearch. For most
    applications that need a full-text search engine, choosing between Solr and Elasticsearch
    comes down to personal preference.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: Solr是建立在Apache Lucene之上的另一个全文搜索引擎。它具有与Elasticsearch相似的搜索、分析和扩展能力。对于大多数需要全文搜索引擎的应用程序，选择Solr和Elasticsearch主要取决于个人喜好。
- en: Ferret
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Ferret
- en: Ferret is a full-text search engine for Ruby. It's similar to Lucene, but it
    is not as feature-rich. It's generally better used for Ruby applications that
    don't require the power (or complexity) of a search engine, such as Elasticsearch
    or Solr.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: Ferret是一个用于Ruby的全文搜索引擎。它与Lucene类似，但功能不如Lucene丰富。它通常更适合那些不需要搜索引擎（如Elasticsearch或Solr）的强大（或复杂）功能的应用程序。
- en: Monitoring Elasticsearch
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控Elasticsearch
- en: Monitoring distributed systems is difficult because as the number of nodes,
    the number of users, and the amount of data increase, problems will begin to crop
    up.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 监控分布式系统很困难，因为随着节点数量、用户数量和数据量的增加，问题将会开始出现。
- en: Furthermore, it may not be immediately obvious if there is an error. Often,
    the cluster will keep running and try to recover from the error automatically.
    As shown in *Figures 1.2*, *1.3*, and *1.4* earlier, a node failed, but Elasticsearch
    brought itself back to a `green` state without any action on our part. Unless
    monitored, failures such as these can go unnoticed. This can have a detrimental
    impact on system performance and reliability. Fewer nodes means less processing
    power to respond to queries, and, as in the previous example, if another node
    fails, our cluster won't be able to return to a `green` state.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，错误可能不会立即明显。通常，集群会继续运行并尝试自动从错误中恢复。如前所述的 *图 1.2*、*1.3* 和 *1.4* 所示，一个节点失败了，但
    Elasticsearch 在我们没有采取任何行动的情况下将自己恢复到了 `绿色` 状态。除非进行监控，否则此类故障可能会被忽视。这可能会对系统性能和可靠性产生不利影响。节点越少，处理查询的能力就越弱，并且，如前例所示，如果另一个节点失败，我们的集群将无法返回到
    `绿色` 状态。
- en: 'The aspects of an Elasticsearch cluster that we''ll want to keep track of include
    the following:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望跟踪的 Elasticsearch 集群方面包括以下内容：
- en: Cluster health and data availability
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群健康和数据可用性
- en: Node failures
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 节点故障
- en: Elasticsearch JVM memory usage
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch JVM 内存使用情况
- en: Elasticsearch cache size
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch 缓存大小
- en: System utilization (CPU, Memory, and Disk)
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统利用率（CPU、内存和磁盘）
- en: Query response times
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查询响应时间
- en: Query rate
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查询速率
- en: Data index times
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据索引时间
- en: Data index rate
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据索引速率
- en: Number of indices and shards
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 索引和分片数量
- en: Index and shard size
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 索引和分片大小
- en: System configuration
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统配置
- en: In this book, we'll go over how to understand each of these variables in context
    and how understanding them can help diagnose, recover from, and prevent problems
    in our cluster. It's certainly not possible to preemptively stop all Elasticsearch
    errors. However, by proactively monitoring our cluster, we'll have a good idea
    of when things are awry and will be better positioned to take corrective action.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，我们将讨论如何理解这些变量在上下文中的含义，以及理解它们如何帮助我们诊断、恢复和预防集群中的问题。当然，不可能预先阻止所有 Elasticsearch
    错误。然而，通过积极监控我们的集群，我们将对何时出现问题有一个很好的了解，并能够更好地采取纠正措施。
- en: 'In the following chapters, we''ll go over everything from web-based cluster
    monitoring tools to Unix command line tools and log file monitoring. Some of the
    specific tools this book covers are as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将讨论从基于网络的集群监控工具到 Unix 命令行工具和日志文件监控的所有内容。本书涵盖的一些特定工具如下：
- en: Elasticsearch-head
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch-head
- en: Bigdesk
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bigdesk
- en: Marvel
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Marvel
- en: Kopf
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kopf
- en: Kibana
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kibana
- en: Nagios
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nagios
- en: Unix command-line tools
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Unix 命令行工具
- en: These tools will give us the information we need to effectively diagnose, solve,
    and prevent problems with Elasticsearch.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 这些工具将为我们提供有效诊断、解决和预防 Elasticsearch 问题所需的信息。
- en: Resourcefulness and problem solving
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 资源丰富性和问题解决能力
- en: 'Monitoring tools do a great job of telling you what is going on in your cluster,
    and they can often point out if there is a problem. However, these tools won''t
    give you a recipe for how to actually fix a problem. Resolving issues takes critical
    thinking, attention to detail, and persistence. Some of the problem-solving themes
    this book talks about are as follows:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 监控工具可以很好地告诉你集群中正在发生什么，并且它们经常可以指出是否存在问题。然而，这些工具不会给你一个解决问题的方案。解决问题需要批判性思维、关注细节和坚持不懈。本书讨论的一些问题解决主题如下：
- en: Always try to recreate the problem
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总是尝试重现问题
- en: Be on the lookout for configuration and user errors
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时刻留意配置和用户错误
- en: Only make one configuration change at a time before testing
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在测试之前，只做一次配置更改
- en: This book also provides some real-world case studies that help you turn the
    information provided by monitoring tools into insights to resolve Elasticsearch
    issues.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 本书还提供了一些实际案例研究，帮助您将监控工具提供的信息转化为解决 Elasticsearch 问题的见解。
- en: Summary
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'This chapter gave you an overview of Elasticsearch and why it''s important
    to proactively monitor a cluster. To summarize the points from the chapter:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 本章为您概述了 Elasticsearch 以及为什么需要积极监控集群。为了总结本章要点：
- en: Elasticsearch is an open source scalable, fast, and fault-tolerant search engine
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch 是一个开源的、可扩展的、快速且容错的搜索引擎
- en: Elasticsearch is built on top of Apache Lucene, the same library that powers
    Apache Solr
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Elasticsearch 是建立在 Apache Lucene 之上的，Apache Solr 同样使用这个库
- en: Monitoring tools will help us get a better understanding of our cluster and
    will let us know when problems arise
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控工具将帮助我们更好地了解我们的集群，并让我们知道何时出现问题时
- en: As helpful as monitoring tools are, it's up to us to actually diagnose and fix
    cluster issues
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控工具虽然很有帮助，但真正诊断和修复集群问题还得靠我们自己
- en: In the next chapter, we'll cover how to get a simple Elasticsearch cluster running
    and loaded with data, and how to install several monitoring tools.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍如何启动一个简单的Elasticsearch集群并加载数据，以及如何安装几个监控工具。
