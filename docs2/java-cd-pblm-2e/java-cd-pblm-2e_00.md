# 前言

JDK 在版本 12 到 21 之间的快速演变意味着两件事：首先，Java 现在有一系列强大的新功能，您可以采用这些功能来解决各种现代问题；其次，现代 Java 的学习曲线正在变得越来越陡峭。

本书通过解释您在处理复杂性、性能、可读性等方面需要做出的正确实践和决策，使您能够客观地解决常见问题。

*《Java 编程问题，第二版》* 将帮助您完成日常任务并按时完成任务，同时成为更熟练和自给自足的 Java 开发者。您可以依靠这本书中的 270 多个问题（本版全部全新），涵盖最常见和基础的兴趣领域：字符串、数字、数组、集合、外函数和内存 API、数据结构、日期和时间、模式匹配、密封/隐藏类、函数式编程、虚拟线程、结构化并发、垃圾收集器、动态 CDS 存档、套接字 API 和简单 Web 服务器。

通过精心设计的问题来增强您的技能，这些问题旨在突出和教授日常工作中所需的核心知识。换句话说（无论您的任务简单、中等还是复杂），在您的工具箱中拥有这些知识是必须的，而不是选择。

在阅读完这本书之后，您将对 Java 概念有深入的理解，并且您将自信地开发并选择解决所有 Java 问题的正确解决方案。

尽管这本书完全独立，您不需要其他任何东西就能充分利用它，但本书中涵盖的许多主题也在 *《Java 编程问题，第一版》* 中进行了探讨。如果您还没有读过它，并且希望获得更多的实践，那么请考虑购买那本书，以解决一组完全不同的 Java 问题。

# 这本书面向的对象

*《Java 编程问题，第二版》* 特别适用于希望通过解决实际问题来提升知识的初级到中级 Java 开发者。然而，这些页面中探讨的问题在任何 Java 开发者的日常工作中都会遇到，从初学者到高级实践者。

因此，建议您熟悉 Java 基础知识，并且至少具备语言的基础实践知识。

# 本书涵盖的内容

*第一章*，*文本块、区域设置、数字和数学*，包括 37 个问题，涵盖 4 个主要主题：文本块、区域设置、数字和数学运算。

*第二章*，*对象、不可变性、switch 表达式和模式匹配*，包括 30 个问题，涉及其他方面，例如 `java.util.Objects` 的某些不太为人所知的功能、不可变性的有趣方面、`switch` 表达式的最新功能以及对模式匹配表达式（`instanceof` 和 `switch`）的深入探讨。

*第三章*，*处理日期和时间*，包含 20 个问题，涵盖了不同的日期时间主题。这些问题主要关注 Calendar API 和 JDK 8 日期/时间 API。关于后者，我们将介绍一些不太研究的 API，如`ChronoUnit`、`ChronoField`、`IsoFields`和`TemporalAdjusters`。

*第四章*，*记录和记录模式*，包含 19 个问题，详细介绍了 JDK 16（JEP 395）中引入的 Java 记录和记录模式，这些模式在 JDK 19（JEP 405）中作为预览特性引入，在 JDK 20（JEP 432）中作为第二个预览特性引入，并在 JDK 21（JEP 440）中作为最终特性引入。

*第五章*，*数组、集合和数据结构*，包含 24 个问题，涵盖了三个主要主题。我们开始解决几个旨在覆盖针对数据并行处理的新 Vector API 的问题。然后，我们继续介绍包括 Rope、Skip List、K-D Tree、Zipper、Binomial Heap、Fibonacci Heap、Pairing Heap、Huffman 编码等在内的几个数据结构。最后，我们讨论了三种最流行的连接算法。

*第六章*，*Java I/O：上下文特定的反序列化过滤器*，包含 13 个与 Java 序列化/反序列化过程相关的问题。我们开始解决将对象序列化/反序列化为`byte[]`、`String`和 XML 格式的经典问题。然后，我们继续介绍旨在防止反序列化漏洞的 JDK 9 反序列化过滤器，并以 JDK 17 上下文特定的反序列化过滤器结束。

*第七章*，*外国（函数）内存 API*，包含 28 个问题，涵盖了外国函数内存 API 和外国链接器 API。我们首先介绍调用外国函数的经典方法，依赖于 JNI API 和开源的 JNA/JNR 库。接下来，我们介绍名为 Project Panama 的新方法。我们剖析了最相关的 API，如*Arena*、*MemorySegment*、*MemoryLayout*等。最后，我们关注外国链接器 API 和 Jextract 工具，用于调用具有不同签名类型的外国函数，包括回调函数。

*第八章*，*密封和隐藏类*，包含 13 个问题，涵盖了密封和隐藏类。前 11 个食谱将涵盖密封类，这是 JDK 17 引入的非常酷的特性，用于维持封闭层次结构。最后两个问题涵盖了隐藏类，这是 JDK 15 的一个特性，允许框架创建和使用对 JVM 隐藏的运行时（动态）类。

*第九章*，*函数式风格编程 – 扩展 API*，包含 24 个问题，涵盖了广泛的函数式编程主题。我们将从介绍 JDK 16 的`mapMulti()`开始，然后继续解决与谓词（*Predicate*）、函数和收集器一起工作的问题。

*第十章*，*并发 – 虚拟线程和结构化并发*，包含 16 个问题，简要介绍了*虚拟线程*和*结构化并发*。

*第十一章*，*并发 – 虚拟线程和结构化并发：深入探讨*，包括 18 个问题，旨在深入探讨虚拟线程和结构化并发的工作原理以及如何在应用程序中利用它们。

*第十二章*，*垃圾收集器和动态 CDS 存档*，包括 15 个问题，涵盖垃圾收集器和应用程序类数据共享（AppCDS）。

*第十三章*，*Socket API 和简单 Web 服务器*，包括 11 个问题涵盖 Socket API 和 8 个问题涵盖 JDK 18 的简单 Web 服务器。在前 11 个问题中，我们将讨论实现基于套接字的应用程序，如阻塞/非阻塞服务器/客户端应用程序、基于数据报的应用程序和多播应用程序。在本章的第二部分，我们将讨论简单 Web 服务器作为命令行工具。

# 要充分利用本书

您应该对 Java 语言有基本的了解。您还应该安装以下内容：

+   一个集成开发环境（推荐的但不是必需的选择是 Apache NetBeans 20.x: [`netbeans.apache.org/front/main/`](https://netbeans.apache.org/front/main/)).

+   JDK 21 和 Maven 的最新版本。

+   为了完全跟随某些问题和章节，需要安装额外的第三方库（没有太困难或特殊）。

## 下载示例代码文件

书籍的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Java-Coding-Problems-Second-Edition`](https://github.com/PacktPublishing/Java-Coding-Problems-Second-Edition)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有其他来自我们丰富的书籍和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

## 下载彩色图像

我们还提供了一个包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：[`packt.link/gbp/9781837633944`](https://packt.link/gbp/9781837633944)。

## 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。

以下是一个示例：“例如，让我们添加`Patient`和`Appointment`记录。”

代码块设置如下：

```java
if (staff instanceof Resident(String name, Doctor dr)) { 
  return "Cabinet of " + dr.specialty() + ". Doctor: " 
                       + dr.name() + ", Resident: " + name;
} 
```

当我们希望将您的注意力引到代码块的一个特定部分时，相关的行或项目将被突出显示：

```java
if (staff instanceof Resident(String name, Doctor dr)) { 
  **return****"Cabinet of "** **+ dr.specialty() +** **". Doctor: "**
                       + dr.name() + ", Resident: " + name;
} 
```

任何命令行输入或输出都如下所示：

```java
2023-02-07T05:26:17.374159500Z
2023-02-07T05:26:17.384811300Z
2023-02-07T05:26:17.384811300Z 
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中如下所示。以下是一个示例：“编译器通过`record`关键字识别**Java 记录**。”

警告或重要注意事项如下所示。

技巧和窍门如下所示。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：请发送电子邮件至`feedback@packtpub.com`，并在邮件主题中提及书籍标题。如果你对本书的任何方面有疑问，请通过`questions@packtpub.com`与我们联系。

**勘误表**：尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果你在这本书中发现了错误，我们非常感谢你向我们报告。请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择你的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**：如果你在互联网上以任何形式遇到我们作品的非法副本，我们非常感谢你提供位置地址或网站名称。请通过`copyright@packtpub.com`与我们联系，并提供材料的链接。

**如果你有兴趣成为作者**：如果你在某个领域有专业知识，并且你对撰写或为书籍做出贡献感兴趣，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

# 分享你的想法

一旦你阅读了*《Java 编程问题，第二版》*，我们非常乐意听到你的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1837633940)并分享你的反馈。

你的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

你喜欢在路上阅读，但无法携带你的印刷书籍到处走？

你的电子书购买是否与你的选择设备不兼容？

别担心，现在每购买一本 Packt 书籍，你都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从你最喜欢的技术书籍中搜索、复制和粘贴代码到你的应用程序中。

优惠不会就此停止，你还可以获得独家折扣、时事通讯和每天收件箱中的精彩免费内容。

按照以下简单步骤获取好处：

1.  扫描二维码或访问以下链接

![二维码描述自动生成](img/Free_PDF_QR.png)

[`packt.link/free-ebook/9781837633944`](https://packt.link/free-ebook/9781837633944)

1.  提交您的购买证明

1.  就这样！我们将直接将免费 PDF 和其他好处发送到你的电子邮件。
