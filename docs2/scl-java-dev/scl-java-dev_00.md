# 前言

当我告诉周围的人我现在用 Scala 编程而不是 Java 时，我经常被问到，“那么，用简单的话说，使用 Scala 与 Java 相比的主要优势是什么？”我倾向于这样回答：“使用 Scala，你更接近领域，更接近普通的英语”。**提高抽象级别**通常是用来描述程序以便人类以更可读和自然的方式理解，而不是计算机理解的零和一。

随着在电信、制造或金融应用中遇到的计算机系统成熟和增长，不同形式的复杂性往往会出现，具体如下：

+   由于添加支持的功能而导致的复杂性，例如，在保险系统中合同替代方案的多样性，或者在我们的不断发展的社会中引入复杂的算法来解决新的挑战

+   为了弥补技术的局限性而产生的复杂性；例如，使系统分布式以处理更大的负载或提高可靠性和响应时间

+   意外复杂性，这是由于除了问题本身以外的因素引入的，例如，旧系统之间的集成以及实际上不兼容的技术，为了更快地进入消费者市场而采取的短期解决方案，或者当许多具有不同背景和风格的人在短时间内向大型代码库贡献时，对整个大型系统设计的误解

第三种复杂性显然是不受欢迎的，应该减少到最低限度，如果可能的话，应该消除，而其他两种应该保持可管理。Scala 处理所有这些，只有当系统可以用代码描述得像用写得很好的英语描述一样时，业务领域的复杂性才能得到管理。

在过去几年中，许多语言能够以比传统的面向对象方式更简洁的方式表达行为，这很大程度上归因于**函数式编程**（**FP**）的日益流行，这是一种存在了很长时间的范例，但直到最近才被认为是与所谓的命令式编程语言（如 C 或 Java）的竞争对手。Michael Feathers 在以下声明中很好地概述了两者之间的明显二分法：

> "OO 通过封装移动部分使代码易于理解。FP 通过最小化移动部分使代码易于理解。"

前者侧重于将大型系统分解成更小、可重用的部分。这些部分容易推理，因为它们是根据现实生活中的对象建模的。它们之间使用接口，并旨在封装可变状态。后者强调函数的组合，这些函数理想上没有副作用。这意味着它们的结果只取决于它们的输入参数，导致在程序中最小化或消除可变状态。

由 Scala 支持的 FP（函数式编程）的声明性本质旨在编写代码来表达“要做什么”而不是“如何做”。此外，FP 方法倾向于通过组合（将函数组合在一起）使算法更加简洁，而命令式方法则倾向于引入副作用，即程序状态的变化，这会使整个算法难以以简洁的方式呈现。

本书将通过更高层次的抽象推理向 Java 开发者展示 Scala 是从 Java 的一个重要且自然的演变。这种过渡最终将导致更健壮、可维护和有趣的软件。

本书的目的并不仅仅在于探索语言的架构或深入特性，以及其详尽的语法；关于 Scala 语言的优秀书籍已经有很多，尤其是由语言创造者马丁·奥德斯基本人以及与他一起在 Typesafe 工作的人所写。

我们的目的是专注于帮助当前 Java 开发者开始使用 Scala，并让他们在使用语言时感到舒适，使他们的日常工作更加高效和有趣。

# 本书涵盖的内容

第一章, *在项目中交互式编程*，提供了关于**JVM**（Java 虚拟机）的简要介绍以及一些使 Java 成功的关键特性。然后我们将开始动手实验，使用 Scala **REPL**（即**读取-评估-打印循环**），这是一个强大的交互式编程工具。我们将介绍 Scala 的一些强大构造，这些构造不仅使编程变得愉快，而且直观和高效。

第二章, *代码集成*，是关于在相同的代码库下使 Scala 和 Java 代码协作。本章感兴趣的话题包括 Java 和 Scala 集合之间的互操作性，以及用 Scala 包装现有的 Java 库。此外，我们还将涉及编码风格的话题，特别是通过比较已确立的 Java 编码最佳实践与较新的 Scala 指南。

第三章, *理解 Scala 生态系统*，帮助您了解 Scala 开发生态系统及其周围工具，其中大部分是从 Java 继承而来的。特别是 Java 框架如 Maven 和 IDE 如 Eclipse 不容忽视。除了开发周期的基本元素外，我们还将涵盖 Scala 特定的工具，如 SBT、Scala Worksheets 以及 Typesafe 的 Activator 及其模板的介绍。

第四章, *测试工具*，是对 Scala 开发者基本工具的后续探讨，重点关注审查大多数用于单元、集成和功能测试测试数据的实用工具，以及基于属性的自动化测试。

第五章, *Play 框架入门*，将为您提供一个具体的 Play 框架介绍，我们将向您展示 Play 的一些酷炫特性，这些特性使得人们想要从更传统的 servlet/J2EE 模型迁移过来。

第六章, *数据库访问和 ORM 的未来*，涵盖了处理关系数据库中数据持久化的方法，无论您是想重用 JPA/Hibernate 等成熟技术，还是转向更创新且前景广阔的替代方案，如**SLICK**（**Scala 语言集成连接套件**），这是基于 Scala 语言力量的一种有趣的 ORM 替代方案。此外，我们将看到如何将现有的关系数据库逆向工程为 Play CRUD 应用程序，作为迁移 Java 项目的起点。

第七章, *与集成和 Web 服务协同工作*，涵盖了在当今 Java 开发中无处不在的技术。在本章中，我们将探讨如何将外部系统集成应用到 Scala 世界中以及其带来的好处。本章包含的主题与 Web 服务通过 SOAP XML、REST 和 JSON 相关。

第八章, *现代应用的基本特性 - 异步和并发*，涉及可扩展应用开发的两方面。为了获得更好的性能，软件项目通常鼓励引入异步调用和并发代码。通过本章，我们将展示 Scala 的更多功能性如何使这种复杂性更加可管理和可维护。我们还将介绍 Akka 框架，这是一个用于简化并发应用程序开发的工具包。

第九章, *构建响应式 Web 应用*，在上一章的基础上更进一步，介绍了市场上出现的一种新类型的应用：响应式应用。它们的特点是交互性、能够推送信息给最终用户、弹性适应负载变化的能力以及从故障中恢复的能力。本章的目标是使用本书学到的概念以及新兴技术如 WebSockets 在 Play 中构建这样的应用。

第十章, *Scala 精选*，以对 Web 开发未来的某些观点结束本书。例如，Java 开发者越来越多地接触到客户端的 JavaScript，无论他们是否喜欢。另一个例子是**领域特定语言**（**DSLs**）的出现，在 Java 中实现这一任务并不简单。

# 您需要为此书准备

由于 Scala 运行在 Java 平台**JVM**（Java 虚拟机）上，你可以在任何支持 Java 标准版的计算机上编写和执行书中提供的代码。要设置所需的工具，请参阅第一章，*在项目中交互式编程*和第三章，*理解 Scala 生态系统*

# 本书面向对象

这本书显然主要针对开发者。我们希望帮助 Java 程序员入门，并使他们能够舒适地使用该语言的语法和工具。我们将通过逐步探索 Scala 带来的某些新概念来实现这一点，特别是如何在不放弃过去十五年来围绕 Java 建立的所有成熟技术的情况下，统一面向对象和函数式编程的最佳实践。

# 约定

在这本书中，您将找到许多不同风格的文本，以区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示：“我们可以通过使用`include`指令来包含其他上下文。”

代码块如下设置：

```java
import java.util.*;
public class ListFilteringSample {
    public static void main(String[] args) {
        List<Integer> elements = Arrays.asList(1, 2, 3, 4, 5);
        List<Integer> filteredElements = new ArrayList<Integer>();
        for (Integer element : elements)
            if (element < 4) filteredElements.add(element);
        System.out.println("filteredElements:" + filteredElements);
    }
}
```

当我们希望引起您对代码块中特定部分的注意时，相关的行或项目将以粗体显示：

```java
import java.util.*;
public class ListFilteringSample {
    public static void main(String[] args) {
 List<Integer> elements = Arrays.asList(1, 2, 3, 4, 5);
        List<Integer> filteredElements = new ArrayList<Integer>();
        for (Integer element : elements)
 if (element < 4) filteredElements.add(element);
        System.out.println("filteredElements:" + filteredElements);
    }
}
```

任何命令行输入或输出都应如下编写：

```java
> ./activator ui 

```

**新术语**和**重要词汇**以粗体显示。屏幕上显示的词汇，例如在菜单或对话框中，在文本中如下显示：“出于好奇，您可以点击**代码视图 & 在 IDE 中打开**标签，然后点击**运行**标签。”

### 注意

警告或重要注意事项以如下框的形式出现。

### 小贴士

小贴士和技巧以如下形式出现。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正能从中获得最大收益的标题非常重要。

如要向我们发送一般反馈，请简单地将电子邮件发送到`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您已经是 Packt 图书的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)下载您购买的所有 Packt 书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误****提交****表单**链接，并输入您的勘误详情来报告。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的勘误部分下的现有勘误列表中。任何现有勘误都可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)选择您的标题来查看。

## 盗版

互联网上对版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过链接<mailto:copyright@packtpub.com>与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们作者以及为我们提供有价值内容的能力方面的帮助。

## 问题和建议

如果您在本书的任何方面遇到问题，请通过链接<mailto:questions@packtpub.com>与我们联系，我们将尽力解决。
