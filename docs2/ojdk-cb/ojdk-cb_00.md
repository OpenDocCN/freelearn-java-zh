# 前言

OpenJDK 是一个独特的项目，为那些想深入了解 JVM 后面庞大而复杂的基础设施的人提供了众多激动人心的机会。有大量的知识和探索空间。几乎任何人都可以根据自己的兴趣找到一些内容，从 HTTP、Web、软件依赖性问题开始，到硬件特定的 JIT 优化技术和并发挑战结束。这种多样性非常独特，可以说没有其他开源项目能提供类似的东西。另一个因素是，在那个规模上没有那么多其他开源项目；可能只有 Linux 内核。这样的规模需要非同寻常的组织方法，而参与这个过程，了解它是如何工作的，是一种非常有趣的洞察。

这本烹饪书将引导你通过一系列步骤，尽可能顺利地进入 OpenJDK 的世界。它首先解释了如何下载源代码，如何构建 OpenJDK 的不同版本，如何在机器上设置它，以及有哪些不同的选项可用。然后，你将学习如何设置用于编辑和调试 C++ 和 Java 源代码的开发环境（IDE），以及如何开始进行修改。它将介绍一些示例，你可能会决定在 OpenJDK 的各个部分进行更改。进一步来说，它将涵盖可用于测试、基准测试和确保你所做的更改不会破坏现有功能的工具。由于 OpenJDK 是一个具有自己规则和流程的大项目，因此将有一部分内容涵盖涉及更改或修复错误的程序、项目的生命周期、JSRs、JEPs 等等。最后，将有一个关于计划包含在即将发布的版本中的未来工作的部分；这部分将是任何对 OpenJDK 的未来方向感兴趣并想尝试一些新事物的人最感兴趣的章节，而这些新事物在稳定的产品中尚未提供。

此外，这本书包含了许多实用的示例，这些示例对任何使用 OpenJDK 或任何其他 Java 技术的开发者都应该是很有用的。它们以简单形式提供，允许你快速复制并用于自己的项目。

# 本书涵盖的内容

第一章，*OpenJDK 入门*，提供了 OpenJDK 的概述，解释了它是什么，以及涵盖了在机器上运行和正确配置 OpenJDK 所需的基本步骤。

第二章，*构建 OpenJDK 6*，涵盖了构建 OpenJDK 版本 6 所需的步骤。这个构建与 OpenJDK 7 和 OpenJDK 8 非常不同，需要做更多手动工作。

第三章，*构建 OpenJDK 7*，涵盖了构建 OpenJDK 版本 7 所需的步骤。与 OpenJDK 6 相比，构建 OpenJDK 7 是一个更简单、更愉快的过程。

第四章，*构建 OpenJDK 8*，涵盖了构建 OpenJDK 版本 8 所需的步骤。

第五章，*构建 IcedTea*，教你如何构建一套在 OpenJDK 之外开发的工具。这些工具被一些专有组件所取代，这些组件作为开源不可用，包括浏览器插件、Java WebStart 等。

第六章，*使用其他虚拟机实现构建 IcedTea*，涵盖了几个有趣的虚拟机项目，这些项目也可以从 IcedTea 提供的功能中受益，以及如何使用这些虚拟机和非 x86 CPU 构建该产品。

第七章，*与 WebStart 和浏览器插件一起工作*，将涵盖 WebStart 和浏览器插件组件的配置和安装，这是 IcedTea 项目最大的部分。

第八章，*破解 OpenJDK*，涵盖了开始深入研究 OpenJDK 源代码所需的一些基础知识。这些事情包括 IDE 的安装和设置、调试以及更新 HotSpot 源代码。还有一些有用的示例，说明开发者可以做什么，例如实现自己的内省细节。

第九章，*测试 OpenJDK*，将介绍 OpenJDK 用于测试源代码的方法，因为编写代码是不够的，我们还需要编写高质量的代码，这些代码必须经过测试。本章还将展示一些使用最新可用工具的示例。

第十章，*为 OpenJDK 做贡献*，解释了 OpenJDK 是如何变化和演变的，变化是如何执行的，以及一个人需要做什么来参与或促进 OpenJDK 的变化。其中一些变化，如果它们足够大，可能需要数年才能出现在生产版本中。

第十一章，*故障排除*，介绍了任何项目中最重要的部分之一：错误修复。了解哪些工具和流程参与其中非常重要。在本章中，我们将涵盖一些重要步骤，从提交缺陷到将修复推送到共享仓库。

第十二章, *使用未来技术*，涵盖了 OpenJDK 的一些未来发展方向。与任何大型项目一样，OpenJDK 有一个路线图，其中包含一些令人兴奋和有希望的项目，用于下一版本。这正是本章的内容。它列出了下载源代码、构建和尽可能运行一些示例所需的全部步骤。

第十三章, *构建自动化*，提供了一些自动化构建过程的实用技巧。对于经常在 OpenJDK 中进行更改或始终希望拥有包含所有最新更改的构建的开发者来说，这将是有用的。

# 你需要为本书准备什么

通常，你除了需要一台连接到互联网的机器外，最好运行 Linux。如果你打算使用 Windows 机器，那么你需要安装 Cygwin。

也可能有每个食谱单独附带的其他特定要求。

# 本书面向对象

本书是为那些想要深入了解 OpenJDK 并开始进行更改的开发者而编写的。这可能是一个有一些酷主意并希望贡献的人，或者是一个发现了一个诱人的错误并想要修复的人。此外，它还将为那些出于某种原因想要更改现有 VM 的人提供一个良好的起点。这可能是因为研究或针对特定硬件或非常具体的需求定制 VM。 

总体而言，对于任何想要简单地查看 OpenJDK 内部结构、了解其是什么以及如何工作的人来说，这将是有用的。

# 部分

本书包含以下部分：

## 准备工作

本节告诉我们可以在食谱中期待什么，并描述了如何设置任何软件或任何为食谱所需的初步设置。

## 如何操作...

本节描述了执行“烹饪”食谱所需的步骤。

## 它是如何工作的...

本节通常包括对上一节发生情况的简要和详细说明。

## 更多内容...

它包含有关食谱的附加信息，以使读者对食谱更加好奇。

## 相关内容

本节可能包含对食谱的引用。

# 惯例

在本书中，你会找到许多不同风格的文本，以区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示："我们可以通过使用`include`指令来包含其他上下文。"

代码块如下设置：

```java
private static int doUpdateBytes(int crc, byte[] b, int off, int len) {
    return updateBytes(crc, b, off, len);
}
```

任何命令行输入或输出都如下所示：

```java
update-java-alternatives  --list

```

**新术语**和**重要词汇**以粗体显示。屏幕上看到的单词，例如在菜单或对话框中，在文本中如下所示："然后点击**完成**"。

### 注意

警告或重要注意事项如下所示。

### 小贴士

小贴士和技巧看起来像这样。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或不喜欢什么。读者反馈对我们来说非常重要，因为它帮助我们开发出您真正能从中受益的书籍。

要向我们发送一般性反馈，请简单地发送电子邮件至 `<feedback@packtpub.com>`，并在邮件主题中提及书籍的标题。

如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南，网址为 [www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您已经是 Packt 图书的骄傲拥有者了，我们有一些事情可以帮助您充分利用您的购买。

## 下载示例代码

您可以从您在 [`www.packtpub.com`](http://www.packtpub.com) 的账户中下载示例代码文件，适用于您购买的所有 Packt Publishing 书籍。如果您在其他地方购买了这本书，您可以访问 [`www.packtpub.com/support`](http://www.packtpub.com/support) 并注册，以便将文件直接通过电子邮件发送给您。

## 错误报告

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现了错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进后续版本。如果您发现任何错误，请通过访问 [`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**错误提交表单**链接，并输入您的错误详情来报告它们。一旦您的错误得到验证，您的提交将被接受，错误将被上传到我们的网站或添加到该标题**错误**部分的现有错误列表中。

要查看之前提交的错误报告，请访问 [`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍的名称。所需信息将出现在**错误**部分下。

## 盗版

版权材料在互联网上的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何形式的非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过 `<copyright@packtpub.com>` 联系我们，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们作者和我们为您提供有价值内容的能力方面的帮助。

## 问题

如果您在这本书的任何方面遇到问题，您可以通过 `<questions@packtpub.com>` 联系我们，我们将尽力解决问题。
