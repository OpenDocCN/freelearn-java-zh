# 第十章。从这里走向何方？

在本章中，我们将总结之前讨论的主题，并提供一些可用的资源，以继续开发你自己的插件。本章还将探讨一些开发者可用的更高级的技术。本章将涵盖以下主题：

+   基础开发

+   额外工具

+   项目管理和反馈

+   其他资源

# 基础开发

在这本书中，我们探讨了执行图像处理和分析的许多不同方法。介绍了使用宏和插件的自动化，这为处理和分析提供了无限的可能性。本书中的主题是为那些希望开始开发自己的插件和宏的用户编写的。自然地，这本书在其页面上只能提供这么多信息，因此本节旨在提供一些如何继续沿着这条道路前进的线索。

首先，通过反复练习和学习之前的代码（或他人的代码），创建宏和插件会变得更容易。在创建宏时，一个好的做法是创建执行处理中单个步骤的小宏。然后，通过组合多个宏，你可以创建一个非常通用的工具箱。ImageJ 中许多有用的工具，如 ActionBar 插件，允许你以快速的方式连续启动许多不同的宏。以这种方式开发时，确保你创建可以串联的宏。一个宏的输出可以用作下一个宏的输入，依此类推。这种方法将为你节省大量时间，并允许你几乎创建任何你想要的组合。

对于插件，也有类似的建议。当你多次使用某个特定功能时，创建一个包含你常用工具的独立类可能是有价值的。通过实例化这个类来访问其方法，你可以在许多不同的项目中重用你的代码。一些较大的 ImageJ 项目使用特定的工具类或类。例如，MtrackJ 和 NeuronJ 都使用一个名为`imagescience.jar`的方法库。在制作具有界面的插件时，将你的实际处理或分析程序构建在单独的类中也是一个好主意，这样在开发新的或更好的技术时可以轻松地替换。

在线有许多优秀的资源可用于开发图像处理和分析中使用的宏。最基本的一个是 ImageJ 网站上的存储库，其中包含许多执行基本和更高级任务的优秀宏，可在[`imagej.nih.gov/ij/macros/`](http://imagej.nih.gov/ij/macros/)找到。另一个好资源是 Fiji 网站，其中包含大量关于图像处理和分析的信息，以食谱的形式描述（[`imagej.net/Cookbook`](http://imagej.net/Cookbook)）。这个食谱基于已停用的 MBF 显微镜资源，并解释了如何使用 Fiji 提供的工具处理和分析特定图像。

还有一些非常好的资源已经出版。Burger 和 Burge 的《数字图像处理》是一本综合性的教科书，专注于 ImageJ 函数使用的算法。这为 ImageJ 中的一些处理函数提供了数学背景，以及图像变换和插值。他们工作中的示例基于或从 ImageJ 源代码中提取。另一个好资源是 Gonzalez 和 Woods 的《数字图像处理》，它使用 MATLAB 进行图像处理示例。然而，它也提供了数学背景以及图像处理中的模糊逻辑等技巧。许多示例可以作为练习转换为 ImageJ。算法的一个好来源是《数值食谱》系列书籍，该书是用 C/C++语言编写的。许多算法可以轻松地转换为 Java。另一个有助于理解图像形成物理以及信号处理基础的资源是 Steven Smith 的《科学家和工程师的数字信号处理指南》（可在[`www.dspguide.com/`](http://www.dspguide.com/)找到）。

最后，如果你希望开发利用用户界面的插件，查看许多具有界面的不同插件是个好主意。在第八章《ImageJ 插件的解剖》中，我们探讨了具有基本和高级界面的不同插件示例。其中一些示例具有非常清晰直观的界面，可以仅通过最小文档即可使用。关于良好界面设计的许多优秀出版物以及在线资源都可以展示良好和不良设计的示例。已出版的书籍示例包括《设计原理》，该书基于经验和心理学知识考察了设计中的常见概念。另一个好资源是《不要让我思考，重访版》，该书以网页设计为出发点。然而，桌面应用程序和 ImageJ 插件的核心理念是相同的。

另一个优秀的在线资源是微软 Excel 的开发者 Joel Spolsky 的博客，网址为[`www.joelonsoftware.com/uibook/chapters/fog0000000057.html`](http://www.joelonsoftware.com/uibook/chapters/fog0000000057.html)。虽然提到的例子有些过时，但观察背后的普遍真理依然适用。它还提供了许多关于设计和运行项目的有用见解。

要了解关于新 ImageJ2 框架的插件开发，Fiji 网站上提供了关于框架([`fiji.sc/ImageJ2`](http://fiji.sc/ImageJ2))和某些库函数（如 ImgLib2 [`fiji.sc/ImgLib2`](http://fiji.sc/ImgLib2)）的良好文档和背景信息。还有一系列示例项目可供测试和发现如何使用这些概念，例如，如何使用 ImgLib2 处理图像([`fiji.sc/ImgLib2_Examples`](http://fiji.sc/ImgLib2_Examples))。GitHub 上也有可用的 ImageJ 教程集合。您可以使用您喜欢的 Git 实现从[`GitHub.com/imagej/imagej-tutorials/`](https://GitHub.com/imagej/imagej-tutorials/)克隆它们。由于 ImageJ2 仍在积极开发中，目前处于候选发布状态，因此在最终版本发布之前，仍将实施许多更改。

# 其他工具

本书描述的许多示例可以使用 ImageJ 和 Fiji 的内置编辑器设计和构建，但如果您想开发更高级的插件，设置一个 IDE 会使您的工作更快。作为一个学习工具，IDE 可能不是最佳选择。IDE 本身的学习曲线可能很陡峭，而且它可能会让您变得懒惰。IDE 可以非常聪明，分析您的代码以提供自动导入类、实现所需的方法以及变量检查和转换。这些工具很方便，但了解当 IDE 建议这些选项时发生的事情很重要。当然，拼写检查和变量名补全确保您将犯更少的错误，但您永远不应该盲目依赖它。代码分析可能相当复杂，但它无法预测开发者的意图。这有时会导致非常奇怪的行为或难以调试的错误。

要使用如前几章所述的 IDE（如 NetBeans）进行工作，软件的开发者提供了许多资源。NetBeans 的教程可以在[`netbeans.org/kb/index.html`](https://netbeans.org/kb/index.html)找到，其中包含使用 IDE 开发项目的教程、示例和视频。Packt Publishing 还出版了关于 NetBeans IDE 使用的书籍，特别是《NetBeans IDE 8 烹饪书》和《精通 NetBeans》。

除了在 IDE 上投入时间外，投入时间了解和学习如何使用版本控制系统，如 Git，也是有益的。使用版本控制系统的流程与直接开发代码时略有不同。只有您定期提交更改并提供有用的提交信息时，版本控制系统才会工作。如果您是项目中的唯一开发者，您就不会遇到许多问题，如困难的代码合并和冲突，因此过程变得相对简单。借助 Git 的图形前端，整个过程变得可管理和可访问，即使是初学者也是如此。

在开始一个多开发者项目之前，请确保您熟悉使用 Git。如果涉及二进制文件，冲突和合并可能会变得复杂，解决它们可能会变得困难。许多 IDE 都内置了版本控制系统（很多时候，它在**团队**菜单下，即在 Eclipse 和 NetBeans 中）。无论您使用内置系统还是独立界面，在使用之前查看一些资源都是有益的。它们将帮助您了解系统能够做什么（以及不能做什么）。一个非常好的资源是*Git Book*，可以从[`git-scm.com/book/en/v2`](https://git-scm.com/book/en/v2)下载，同时也有印刷版。第二章*基本图像处理（ImageJ）*和第三章*高级图像处理（ImageJ）*清晰地概述了如何在日常生活中使用 Git。它主要使用命令行界面进行示例。然而，可用的图形前端使用相同的术语。Packt Publishing 还提供了关于如何使用 Git 的实用书籍，包括*Git 版本控制食谱*和*Git：面向所有人的版本控制*，它们包含开发中的实用示例和用例。

对于另一个版本控制软件包 Subversion，类似的在线资源可在[`svnbook.red-bean.com/en/1.7/index.html`](http://svnbook.red-bean.com/en/1.7/index.html)找到。它详细介绍了 Subversion 的基础知识，并解释了提交更改和版本控制过程。此资源还假设主要使用命令行方法来处理仓库系统，但术语与大多数图形前端相似。大多数与 Git 兼容的客户端也支持 Subversion，并且有可用的软件包可以将 Subversion 仓库转换为 Git 仓库，而不会（过多地）丢失仓库的结构。我经常使用的一个图形前端是 Syntevo 的 SmartGit/Hg。它适用于所有平台，并支持 GitHub 仓库。对于非商业工作它是免费的，但在用于商业项目时需要许可证。

# 项目管理和反馈

在项目上与团队合作时，会遇到一些困难。这种工作需要在实际开发之上增加一个额外的层次。为此，有项目管理解决方案可供选择，可以组织项目。这些解决方案通常包含多个层级，并且通常建立在版本控制系统之上或其一部分。大多数项目管理解决方案包含（至少）问题跟踪器和路线图。大多数这些解决方案主要是作为管理工具构建的，并且不直接与开发代码接口（至少在 ImageJ 插件的情况下）。然而，它们允许开发者跟踪进度并规划未来的开发，并允许最终用户提供反馈以及指出存在错误和错误的地方。大多数这些解决方案运行在可以通过浏览器访问的服务器上，并且支持多个用户以及未注册的访客用户。

存在着不同的解决方案，选择解决方案应基于你的需求和可用的设备。如今，服务器托管并不真正复杂或昂贵，因此选择范围很广。一些可用的选项包括 GitHub。它们可以免费托管项目，前提是它们是开源的。其他选项包括托管自己的解决方案，例如 Redmine。Redmine 是一个用 Ruby 语言编写的开源项目管理解决方案。其他开源示例包括 Launchpad，许多与 Ubuntu 相关的 Canonical 项目都在使用它，以及 NASA 的 JPL 和 Tor 开发所使用的 Trac。除了错误跟踪器，它们还有一些形式的时间管理和路线图。它们还允许我们托管文件和文档。Redmine 还支持项目的新闻和论坛页面，以及基于项目的基础用户管理。

如果你希望在更受管理的环境中开发代码，这些工具可能有助于调查。许多这些系统可以在小型网络或甚至仅在你的本地计算机上运行。要在更易于访问的环境中使用这些系统，你需要一个安装了版本控制系统（如 Git 或 Subversion）的计算机系统，以及一个功能齐全且配置好的网络服务器应用程序，例如 Apache、Nginx 或 Tomcat。对于 Redmine，还需要安装 Ruby 和*SQL 数据库*。一些系统还需要安装 PHP 以支持某些功能。尽管这听起来可能很复杂，但许多这些功能都包含在**LAMP**（**Linux, Apache, MySQL, PHP**）服务器发行版中，例如 Ubuntu 服务器版。许多服务器托管公司提供无需额外管理的完全配置好的 LAMP 服务器。此外，许多这些项目管理套件都附带简单的安装程序，可以针对许多不同的用例进行配置。

使用该软件是通过一个基本的登录页面完成的，该页面允许不同级别的访问权限的用户访问管理系统。可以授予某些用户创建、修改和管理项目的权限。其他用户可以添加为报告者。他们可以访问管理系统的大部分部分，如跟踪器和论坛页面，但不能访问项目的设置。在 Redmine 的情况下，大多数页面都是基于类似 Wiki 的语法来呈现内容的，这使得可以创建包含图形和其他布局选项的丰富和功能丰富的文档。大多数问题跟踪器都有不同的分类空间，例如错误、功能或支持。这使我们能够对报告的问题类型及其优先级进行分类。问题还可以分配给特定的开发者，使得多个开发者的分工清晰且易于管理。

Redmine 的资源和支持文档可在网上找到，地址为[`www.redmine.org/projects/redmine/wiki/Guide`](http://www.redmine.org/projects/redmine/wiki/Guide)，该网站使用 Redmine 本身，并作为一个清晰的流程示例。还有一本名为《精通 Redmine》的出版书籍可供参考。

# 其他资源

在开发代码时，检查是否已经存在针对您问题的某些解决方案可能很有用。当已经存在并使用良好的实现时，它可以帮助您在开发库或函数时节省时间。例如，许多生成 Excel 文件的优秀解决方案都是以 Java 编写的库的形式存在的。一个这样的例子是 Apache POI 项目，它允许读取和写入 Excel 文件（以及其他 Microsoft Office 产品）。这个库的实现存在于许多软件包以及其他基于 Java 的软件中。例如，Alec de Zegher 为 Matlab 开发的 xlwrite 包装函数就使用了 Apache POI 项目来创建 Excel 文件（[`www.mathworks.com/matlabcentral/fileexchange/38591`](http://www.mathworks.com/matlabcentral/fileexchange/38591)）。它不应与 MATLAB 提供的`.xlswrite`包装函数混淆，该函数使用 ActiveX 来写入 Excel 文件，因此需要 Windows 平台。

对于您希望用作库的资源，您可以使用 Maven，如第七章中所述，*ImageJ 构造解释*。Maven 是大多数 IDE 安装的一部分（要么作为核心部分，要么作为单独的插件）。通过在 POM 模型的`<dependencies>`标签中将库作为依赖项包括在内，它们将自动添加到您的项目依赖列表中。有关如何在项目中使用 Maven 的更多信息，可以在 Apache Maven 网站上找到（[`maven.apache.org/guides/index.html`](https://maven.apache.org/guides/index.html)），它是 Maven 系统的主要开发者。还有一些书籍和视频可用于使用 Maven 设置和开发软件，例如，*Apache Maven 3.0 烹饪书*和*Maven：终极指南*。

# 摘要

在本章中，我们探讨了在完成本书后可以采取的一些步骤。我关注了一些可以使软件开发更加有组织和专业的工具。为每个组件都包括了资源，包括在线资源和已出版的作品。
