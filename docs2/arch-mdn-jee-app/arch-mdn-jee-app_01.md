# 引言

与过去相比，我们看到企业软件中有许多新的需求。仅仅开发一些软件并将其部署到应用服务器上已经不再足够。或者也许从来都不够。

# 企业系统的新需求

世界比以往任何时候都发展得更快。*快速行动*是当今 IT 公司最重要的标准之一。我们看到能够以高速度适应现实世界和客户需求的公司。新功能的上市时间已经从数年和数月缩短到数周甚至更少。为了应对这种情况，公司不仅需要引入新技术或向业务问题投入更多资金，还需要重新思考和重构他们在 IT 核心的运营方式。

在这种情况下，*快速行动*意味着什么？这包括哪些方面？以及哪些方法和技术支持这一点？

快速行动就是快速适应市场和客户的需求。如果需要或看起来有希望的新功能，从最初的想法到用户手中的功能需要多长时间？如果需要新的基础设施，从决策到运行硬件需要多长时间？而且，不要忘记，如果以如此快的速度开发软件，是否有自动质量控制来确保一切按预期工作，不会破坏现有功能？

在软件开发中，这些问题大多导致持续交付和自动化。正在开发的软件需要以自动化、快速、可靠和可重复的方式进行构建、测试和发布。可靠的自动化流程不仅能够加快周转速度，而且最终能够提高质量。自动化质量控制，如软件测试，是流程的一部分。在现代软件开发中，持续交付、自动化和适当的测试是最重要的原则之一。

传统上，基础设施在大多数公司中都是一个巨大的瓶颈。较小的公司常常在有限的预算下难以提供新的基础设施。较大的公司大多无法实施快速且高效的过程。对于大型企业来说，在大多数情况下，问题不在于预算，而在于过程的实施。由于审批和过于复杂的流程，技术上一分钟就能完成的事情，却可能需要等待数天甚至数周才能完成新的基础设施，这种情况并不少见。

因此，应用程序基础设施及其设计是一个重要的方面。第五章，*使用 Java EE 的容器和云环境*，将向您展示现代云环境的话题。实际上，我们将看到这更多不是关于是否使用云服务提供商的问题。使用本地硬件，可以实施快速高效的过程。更重要的是，这是一个关于是否正确实施过程，使用合适的技术的问题。

现代基础设施需要以自动化、快速、可重复和可靠的方式在几分钟内设置完成。它应该能够轻松适应变化的需求。为了满足这一标准，基础设施应该被定义为代码，无论是通过程序脚本还是声明性描述符。我们将看到基础设施即代码如何影响软件开发工作流程以及哪些技术支持它。

这些需求将影响团队的工作方式。对于开发团队来说，仅仅进行开发并让运维团队处理软件运行和面对生产中的潜在问题已经不再足够。一旦生产中出现关键错误，这种做法总是会导致紧张和互相指责。相反，共同的目标应该是交付满足特定目的的软件。通过将所需的基础设施和配置定义为代码，开发和运维团队将自然地协同工作。这种**DevOps**运动，即开发和运维的结合，旨在使整个软件团队承担起责任。所有参与人员都对客户能够使用适当的软件负责。这更多的是一个组织挑战，而不是技术挑战。

在技术方面，持续交付以及**12 因素**和**云原生**等**热门词汇**试图满足这些需求。12 因素和云原生方法描述了现代企业应用应该如何开发。它们不仅定义了开发过程的要求，还定义了应用程序运行的方式。我们将在本书的后续部分探讨这些方法、现代云环境以及 Java EE 如何支持我们。

# 现代企业系统实现方式

现在我们将探讨企业软件项目是如何开发的。

遵循满足现实世界客户需求的方法，我们将面临我们想要开发的应用程序目的的问题。在立即进入技术细节之前，企业系统需要明确其动机和目的。否则，软件只是为了开发而开发。遗憾的是，这种情况太过常见。通过关注业务逻辑和*领域驱动设计*的原则，正如*埃里克·埃文斯*在书中精彩描述的那样，我们将确保我们构建的软件将满足业务需求。

只有当利益相关者对应用程序的目的和责任有明确的认识后，我们才能专注于技术方面。团队应优先考虑那些不仅能够适当地实现业务用例，还能减少工作量和管理开销的技术。开发者应能够专注于业务，而不是框架和技术。好的框架支持以精简的方式解决业务问题，并且不会分散开发者的注意力。

选择的技术应尽可能支持高效的开发工作流程。这不仅包括自动化和快速的开发周期，还包括能够适应现代基础设施，例如 Linux 容器。在第四章轻量级 Java EE 和第五章 Java EE 的容器和云环境中，我们将更深入地探讨现代环境的核心要素以及 Java EE 如何支持这些环境。

# Java EE 在现代系统中的相关性

既然这是本书的主题，并且与企业系统相关，让我们来谈谈 Java EE。

Java EE 和 J2EE 被广泛使用，尤其是在大型公司中。其优势之一始终是平台由一系列标准组成，这些标准保证了与旧版本的向后兼容性。即使是旧的 J2EE 应用程序也保证在未来仍能正常工作。这对那些长期规划的公司来说一直是一个巨大的好处。针对 Java EE API 开发的应用程序可以在所有 Java EE 应用服务器上运行。供应商无关的应用程序使公司能够构建未来兼容的软件，而不会将其锁定在特定解决方案中。这最终证明是一个明智的决定，最终导致了企业行业的一种心态，即标准，或大家普遍认同的事实标准，可以改善整体状况。

与 J2EE 世界相比，Java EE 发生了很大变化。编程模型完全不同，更加精简，且更高效。当名称从 J2EE 更改为 Java EE 5 时，这种变化尤为显著，尤其是在 EE 6 之后。在第三章实现现代 Java 企业应用中，我们将探讨现代开发 Java 企业应用的方法。我们将看到正在使用的架构方法和编程模型，以及平台如何比以往更多地提高开发效率。希望这样可以使大家明白为什么 Java EE 现在为企业应用开发提供了一种现代解决方案。

目前，将这一信息传达给行业实际上更多的是一个营销和政治挑战，而不是技术挑战。我们仍然看到许多开发者和架构师仍然认为 Java EE 是 J2EE 时代的笨重、重量级企业解决方案，它需要大量的时间、精力和 XML。**企业 JavaBeans**（**EJB**）以及应用程序服务器，由于过去的经历，特别有坏名声。这就是为什么许多工程师对该技术有偏见。与其他企业解决方案相比，Java EE 从来没有看到很多针对开发者的营销。

在第四章《轻量级 Java EE》中，我们将看到为什么现代 Java EE 实际上是最轻量级的企业解决方案之一。我们将定义“轻量级”这一术语，并了解为什么 Java EE 平台比以往任何时候都更加相关，尤其是在现代云和容器环境中。特定技术给 IT 行业留下的印象对其成功至关重要。我希望这一章能对这个话题提供一些启示。

公司通常选择 Java EE 主要是因为其可靠性和向后兼容性。我个人偏爱 Java EE，因为它具有高效性和易用性。在第四章《轻量级 Java EE》和第五章《Java EE 的容器和云环境》中，我们将更详细地介绍这一点。在这本书中，我想向读者展示为什么 Java EE 是一个非常适合当今企业需求的解决方案。我还会展示技术和标准，虽然不是每个细节，但更多的是它们是如何相互整合的。我相信，关注整合部分有助于更好地理解如何有效地构建企业应用程序。

# Java EE 8 更新和路线图

让我们非常简要地概述一下 Java EE 8 版本中发生的事情。这个版本的目标是进一步提升开发者的体验，进一步简化 API 的使用，并使 Java EE 能够满足云环境中的新需求。我们看到了两个全新的 JSR，**JSON-B**（Java API for JSON Binding）和**安全**，以及现有标准的改进。特别是，引入 JSON-B 简化了以供应商无关的方式集成 JSON HTTP API。

Java EE 的方向是改善现代环境和情况下企业应用程序的开发。结果是，现代环境不仅与 Java EE 兼容，而且鼓励了多年来一直是平台一部分的方法。例如，API 与实现的分离，或应用程序服务器的监控。

在长期路线图中，对现代监控、健康检查和弹性的支持更好。目前，这些方面必须通过几行代码进行集成，正如我们将在后续章节中看到的那样。长期目标是使这种集成更加简单直接。Java EE 旨在让开发者专注于他们应该关注的事情——解决业务问题。

# Java 社区进程

使 Java EE 平台独特的是其规范的过程。Java EE 的标准是作为**Java 社区进程**（**JCP**）的一部分开发的。JCP 是积极鼓励参与定义标准的行业的典范，不仅限于少数参与工程师，而是任何对该技术感兴趣的人。该平台由**Java 规范请求**（**JSR**）形式的标准组成。这些 JSR 不仅与 Java 和 Java EE 相关，还与构建在其之上的技术（如 Spring 框架）相关。最终，这些其他技术的实际经验再次帮助塑造新的 JSR。

在应用开发过程中，尤其是在遇到潜在问题时，从 JSR 中产生的书面规范极为有益。支持企业平台的供应商必须按照这些标准中指定的方式提供实现。换句话说，规范文档既向供应商也向开发者说明了技术将如何工作。如果某些功能未满足，供应商必须在其实现中修复这些问题。这也意味着，理论上，开发者只需学习和了解这些技术，无需了解供应商特定的细节。

每个开发者都可以参与 Java 社区进程，帮助塑造 Java 和 Java EE 的未来。定义具体标准的**专家小组**欢迎任何对该主题感兴趣的人提供建设性的反馈，即使他们不是 JCP 的活跃成员。除此之外，你甚至可以在标准发布之前一睹其下一版本的真容。这两点对架构师和公司来说都非常有趣。不仅可以看到方向将走向何方，还有机会参与并产生影响。

这些动机也是我个人选择专注于 Java EE 的两个原因。我拥有使用 Spring 框架的企业级开发背景。除了这两种技术在编程模型方面非常相似之外，我还特别重视 CDI 标准的强大功能以及能够在平台上无缝使用所有技术的可能性。我开始研究企业平台中具体 JSR，并开始对当时标准化的功能提供反馈和贡献。在撰写本书时，我是两个专家组的成员，分别是 JAX-RS 2.1 和 JSON-P 1.1。帮助定义这些标准极大地增强了我对企业系统的了解。你自然有义务深入研究你帮助标准化的特定技术的主题、动机和解决方案。当然，知道你在 IT 行业的工作中有助于制定标准，这多少是令人满意的。我只能鼓励开发者参与 JCP，关注当前正在开发的内容，并为专家组提供贡献和反馈。

# 在本书中可以期待什么

我决定写这本书，关于我在过去从事各种 Java 企业系统工作时学到的东西。我的动机是向你展示现代 Java EE 方法的样子。这当然首先是为了开发企业应用程序本身和现代编程模型。我试图建立一个印象，即 Java EE 在 EE 8 时代的应用以及平台的优势所在。有新的设计模式和范例正在被使用，这些模式是从现代框架方法中出现的。如果你熟悉 J2EE 世界，你可能会希望看到现代 Java EE 的优势。我试图展示哪些旧范式、约束和考虑因素使得 J2EE 有时在开发者中不受欢迎，现在已经不再适用并且可以被摒弃。除此之外，这本书也是尝试传播一些热情，并解释为什么我确信 Java 企业级能够很好地实现企业应用程序。

话虽如此，你，作为读者，不需要对 J2EE 世界及其模式和最佳实践有先前的了解。特别是，编程模型如此不同，以至于我相信从零开始展示当今的方法是有意义的。

如果你已经构建并设计了 J2EE 应用程序，这很好。你将看到过去 J2EE 设计模式所面临的挑战，尤其是在现代世界，我们的领域可以首先关注业务需求，而不是实现它的技术。这在我们遵循*领域驱动设计*的方法时尤其如此。你会注意到过去 J2EE 系统中许多繁琐和痛苦的问题如何在现代 Java EE 中被消除。Java EE 平台的简洁和强大可能会激发你重新思考我们迄今为止所采取的一些方法。也许你可以尝试退一步，以一个新鲜、无偏见的角度看待这项技术。

这本书是为软件工程师、开发者和架构师而写的，他们设计和构建企业应用程序。在书中，我主要会使用开发者或工程师这个术语。话虽如此，我坚信，架构师也应该时不时地，越多越好，接触源代码，并*亲自动手*与技术打交道。这不仅是为了支持团队中的其他开发者，而且对于他们自己获得更多实际经验也非常重要。同样，所有开发者都应该至少对系统的架构和架构选择的原因有一个基本了解。再次强调，这种相互理解越好，项目中的沟通和开发功能就会越好。

现代企业应用程序开发涉及的不仅仅是开发本身。正如我们所看到的，企业应用程序的新需求，工程师们关心开发工作流程、云环境、容器和容器编排框架。我们将探讨 Java 企业版是否以及如何融入这个世界，以及有哪些方法和最佳实践支持这一点。这将涉及持续交付和自动化测试的话题，为什么它们如此重要，以及它们如何与 Java EE 集成。我们还将涵盖容器技术，如 Docker，以及编排框架，如 Kubernetes。在今天的商业世界中，展示像 Java EE 这样的技术如何支持这些领域是很重要的。

微服务架构是一个大话题，也是今天的一个热点。我们将探讨微服务是什么，以及它们是否以及如何可以用 Java EE 实现。关于安全、日志记录、性能和监控的话题也将在本书的后面部分进行讨论。我会指出，在今天的企业软件世界中，架构师应该知道和注意什么。所使用的技术选择，尤其是当涉及到支持应用程序的现代解决方案时；例如，在 12 因子或云原生应用程序的领域，作为今天可能被选择的内容的例子。然而，更重要的是理解这些技术背后的概念和动机。使用的技术每天都在变化，而计算机科学的原则和概念则存在得更久。

对于本书中涉及的所有主题，我的方法是首先展示解决方案背后的动机和推理，然后是它们如何在 Java EE 中应用和实现。我相信，仅仅教授某种技术当然可以帮助开发者完成日常工作，但他们只有在完全理解其背后的动机之后，才会完全接受这种解决方案。这就是为什么我还会从企业应用的一般动机开始。

Java EE 包含了大量的功能，如果你回顾过去，会发现更多。本书的目标并不是要成为一部完整的 Java EE 参考手册。相反，它旨在提供实际经验以及建议，可以称之为*最佳实践*，通过实用解决方案解决典型场景。现在，请放松身体，享受穿越现代企业软件世界的旅程。
