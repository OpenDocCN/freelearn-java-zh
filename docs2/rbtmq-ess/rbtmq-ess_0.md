前言

RabbitMQ 是一个消息代理，提供组件和服务之间的通信结构。得益于**高级消息队列协议**（**AMQP**）和所有可用的 RabbitMQ 客户端库，大多数主要编程语言和服务都能够无缝地、异步地协同工作。

本书通过深入探索虚构的出租车调度公司**完整汽车**（**CC**）的用户旅程，探讨了 RabbitMQ 的强大可能性，该公司具有现实生活中的用户需求。

# 第一章：**本书面向对象**

如果你是一名专业的企业级开发者或只是喜欢编程的人，*RabbitMQ 基础教程*是关于开源消息队列架构的有价值资源。即使那些已经熟悉微服务和消息的人，在阅读本书探索最佳实践和资源效率时也会发现其价值。本书将为你提供开始创建新和令人兴奋的应用程序或迁移现有单体到微服务架构所需的推动力。

# **本书涵盖内容**

第一章，*一只兔子跃然纸上*，是 RabbitMQ 的入门介绍，包括如何开始使用以及消息队列的好处。本章接着指导你如何安装和配置 RabbitMQ，以及为开发应用程序做准备。

第二章，*创建出租车应用程序*，讨论了使用 RabbitMQ 创建一个简单的出租车订单应用程序。到本章结束时，你将了解如何连接到 RabbitMQ，使用直接和主题交换进行发布，以及从队列中消费消息。本章还解释了消息确认和否定确认（acks 和 nacks）。

第三章，*向多个出租车司机发送消息*，继续 CC 项目，提供了关于预取值设置的说明，这些设置控制同时发送给消费者的消息数量。本章还涵盖了消费者如何手动确认消息，开发零消息损失设计的建议，以及如何接收不带确认的消息。本章最后为你提供了对扇出交换的良好理解。

第四章，*调整消息投递*，是关于消息**生存时间**（**TTL**），使用消息属性名称过期以及其他关于调整消息投递的重要主题，包括死信交换和队列。

第五章，*消息路由*，深入探讨了消息流，包括如何响应发送者以及如何使用头部交换来执行基于属性的消息路由。此外，还解释了请求-响应风格的交互。

第六章，*将 RabbitMQ 投入生产*，介绍了可以用来处理 RabbitMQ 代理故障的不同策略。主题包括集群、法定队列和联邦。本章还涵盖了 RabbitMQ 的一个非常重要的方面——日志处理和数据分析。

第七章，*最佳实践和代理监控*，将前几章中的所有精彩信息汇总为最佳实践和关键要点，这些可以在实际应用开发中使用。本章还解释了 RabbitMQ 中的常见错误，并提供了实施系统性能监控和避免灾难性情况的策略。

# **为了最大限度地利用本书**

如何在 Ubuntu 和 Docker 上安装 RabbitMQ，以及如何通过 CloudAMQP 设置托管版本的 RabbitMQ，在第一章[4f4722d3-131f-4c38-9ea0-4c03e8545175.xhtml]，*兔子跃然而生*中进行了说明。它还提供了关于如何设置 RabbitMQ 托管版本的建议。

即使您不熟悉 Ruby 或 Python，书中的代码也很容易理解。所有 Ruby 代码示例都使用 Ruby 2.7 进行了测试，所有 Python 代码示例都使用 Python 2.7 进行了测试，在 macOS 上。然而，它们可能也适用于未来的版本发布。

| **软件/硬件** | **操作系统要求** |
| --- | --- |
| Python 2.7Ruby 2.7 网络浏览器 | macOSUbuntu |

**如果您正在使用本书的数字版，我们建议您自己输入代码或通过 GitHub 仓库（下一节中提供链接）访问代码。这样做将帮助您避免与代码复制和粘贴相关的任何潜在错误。**

## 下载示例代码文件

您可以从[www.packt.com](http://www.packt.com)上的账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[www.packtpub.com/support](https://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)上登录或注册。

1.  选择支持选项卡。

1.  点击代码下载。

1.  在搜索框中输入书籍名称，并遵循屏幕上的说明。

文件下载完成后，请确保使用最新版本的软件解压缩或提取文件夹：

+   Windows 系统上的 WinRAR/7-Zip

+   Mac 系统上的 Zipeg/iZip/UnRarX

+   Linux 系统上的 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上，地址为[`github.com/PacktPublishing/RabbitMQ-Essentials-Second-Edition`](https://github.com/PacktPublishing/RabbitMQ-Essentials-Second-Edition)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有来自我们丰富的书籍和视频目录中的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

## 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：[`static.packt-cdn.com/downloads/9781789131666_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781789131666_ColorImages.pdf)。

## 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“目前，`cc-admin`和`cc-dev`用户都没有在`cc-dev-vhost`上执行任何操作的权限。”

代码块设置如下：

```java
connection = Bunny.new ENV['RABBITMQ_URI']
# Start a session with RabbitMQ 
connection.start
```

任何命令行输入或输出都应如下所示：

```java
sudo apt install curl gnupg -y
sudo apt install apt-transport-https
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“点击控制台的“Admin”选项卡。”

警告或重要注意事项看起来是这样的。

小贴士和技巧看起来是这样的。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并将邮件发送至`customercare@packtpub.com`。

**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将非常感激您能向我们报告。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上发现我们作品的任何非法副本，我们将非常感激您能提供位置地址或网站名称。请通过`copyright@packt.com`与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

## 评论

请留下评论。一旦您阅读并使用过这本书，为何不在您购买它的网站上留下评论呢？潜在读者可以查看并使用您的客观意见来做出购买决定，Packt 公司可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需了解更多关于 Packt 的信息，请访问[packt.com](http://www.packt.com/)。
