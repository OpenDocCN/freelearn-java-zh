# 前言

函数式编程语言，如 Java、Scala 和 Clojure，作为处理多处理器和高可用性应用程序新要求的有效方式，正吸引人们的注意。本书将帮助你通过 Scala 学习函数式编程。本书采用领导思想的方法，温和地介绍函数式编程，并带你成为这一范式的专家。从函数式编程的介绍开始，本书逐步前进，教你如何编写声明式代码，利用函数式类型和值。在介绍基础知识之后，我们将讨论函数式编程中的更高级概念。

我们将涵盖纯函数和类型类等概念，它们旨在解决的问题，以及如何在实践中使用它们。我们将看到如何使用库进行纯函数式编程。我们将探讨函数式编程的广泛库家族。最后，我们将讨论函数式编程世界中的一些更高级的模式，例如 Monad Transformers 和 Tagless Final。在介绍完纯函数式编程方法之后，我们将探讨并行编程的主题。我们将介绍 Actor 模型以及它在现代函数式语言中的实现方式。到这本书结束时，你将掌握包含面向对象（OOP）和函数式编程概念，以构建健壮应用程序。

# 本书面向的对象

如果你来自命令式和面向对象（OOP）的背景，这本书将引导你进入函数式编程的世界，无论你使用哪种编程语言。

# 本书涵盖的内容

第一章，*声明式编程风格*，介绍了声明式风格的主要思想，即通过抽象重复的算法模式和流程控制，使得仅用一个语句就能描述原本需要 10 行命令式代码的内容。函数式语言通常具有复杂的基础设施，使这种方法特别相关和实用。一种感受这种差异的好方法是看看使用 Java 和 Scala 集合编程的差异——前者采用命令式风格，而后者采用函数式风格。

第二章，*函数和 Lambda*，将从面向对象程序员熟悉的函数概念开始。然后我们将探索一些更高级的、特定于函数式编程的概念——例如 Lambda、柯里化、泛型类型参数、隐式参数和高级函数。我们将看到高级函数如何有助于抽象控制流。最后，我们将探讨部分函数的概念。

第三章，*函数式数据结构*，解释了一个函数式集合框架。它具有一系列针对不同场景设计的集合数据类型。然后转向其他不属于集合框架但常用于函数式编程的数据类型，因此值得我们关注。这些数据类型是 Option、Either 和 Try。最后，我们将看到数据结构如何通过隐式机制与其行为分离，这种机制存在于一些高级语言中。

第四章，*副作用问题*，讨论了编程中普遍存在的副作用。函数式编程倡导所谓的纯函数——不产生任何副作用的函数，这意味着你不能从这样的函数中写入文件，或接触网络。为什么函数式编程会反对产生副作用的函数？是否可能仅使用纯函数编写有用的程序？本章探讨了这些问题。

第五章，*效果类型 - 抽象副作用*，提供了以纯方式处理副作用问题的解决方案。纯函数式编程提出的解决方案是将你遇到的所有副作用转换为函数式数据结构。我们将探讨识别副作用并将它们转换为这些数据结构的过程。然后，我们会很快意识到产生副作用的函数通常是一起工作的。因此，我们将探讨如何使用 Monad 的概念将这些函数组合起来。

第六章，*实践中的效果类型*，从新的角度关注了第三章，*函数式数据结构*的内容。我们将看到函数式数据结构对数据类型有更深的意义——即作为数据表示现象。现象是某种发生的事情，例如异常或延迟。通过将其表示为数据，我们能够保护自己免受现象的影响，同时保留有关它的信息。

第七章，*类型类的理念*，探讨了类型类模式如何从处理效果类型时遇到的实际需求中逻辑地产生。

第八章，*基本类型类及其用法*，概述了最常遇到的基本类型类及其家族。在讨论创建类型类系统的动机之后，我们进一步考察了它们的结构和从中派生的一些基本类型类。如 Monad 和 Applicative 这样的类型类在函数式编程中经常使用，因此值得特别注意。

第九章，*纯函数式编程库*，讨论了如何使用迄今为止学到的纯函数式技术（效果类型和类型类）来开发服务器端软件。我们将学习如何编写并发、异步软件以响应 HTTP 请求、联系数据库。我们还将了解现代函数式编程提供的并发模型。

第十章，*高级函数式编程模式*，探讨了如何组合效果类型以获得新的效果类型。您将看到如何利用编译器的类型系统在编译时检查程序保证。

第十一章，*演员模型简介*，从详细检查传统的并发编程模型开始。这个模型引发了许多问题，如竞态条件和死锁，这使得在其中编程容易出错，尤其是难以调试的错误。本章介绍了旨在解决这些问题的演员模型的概念。

第十二章，*实践中的演员模型*，涵盖了框架的基本概念及其概念。您将继续学习在面向演员编程中出现的某些模式，并了解演员如何与其他广泛使用的并发原语——未来交互操作。

第十三章，*用例 - 并行网络爬虫*，检查了一个使用演员模型编写的更大并发应用程序。一个很好的例子是网络爬虫应用程序。网络爬虫是一个收集网站链接的应用程序。从一个给定的网站开始，它收集该网站上的所有链接，跟随它们，并递归地收集它们的所有链接。本章将检查如何实现这样一个更大的应用程序。

附录 A，*Scala 简介*，是 Scala 语言的简要介绍，本书中的示例都使用了 Scala 语言。

# 为了充分利用本书

在阅读此书之前，读者需要了解面向对象和命令式编程的概念。

为了测试本书的代码，您需要 Docker 版本 18.06 或更高版本以及 Git 版本 2.18.0 或更高版本。

# 下载示例代码文件

您可以从[www.packtpub.com](http://www.packtpub.com)的账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在[www.packtpub.com](http://www.packtpub.com/support)上登录或注册。

1.  选择支持选项卡。

1.  点击代码下载与勘误表。

1.  在搜索框中输入书籍名称，并遵循屏幕上的说明。

文件下载后，请确保使用最新版本解压缩或提取文件夹：

+   Windows 上的 WinRAR/7-Zip

+   Mac 上的 Zipeg/iZip/UnRarX

+   Linux 上的 7-Zip/PeaZip

本书代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Mastering-Functional-Programming`](https://github.com/PacktPublishing/Mastering-Functional-Programming)。如果代码有更新，它将在现有的 GitHub 仓库中更新。

我们还有其他来自我们丰富图书和视频目录的代码包可供在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**上获取。查看它们吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表的彩色图像的 PDF 文件。您可以从这里下载：[`www.packtpub.com/sites/default/files/downloads/MasteringFunctionalProgramming_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/MasteringFunctionalProgramming_ColorImages.pdf)。

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“`instances`包包含了语言核心中存在的基本数据类型以及由`Cats`库定义的类型类的实现。”

代码块设置如下：

```java
public void drink() {
  System.out.println("You have drunk a can of soda.");
}
```

任何命令行输入或输出都写成如下：

```java
:help
```

**粗体**：表示新术语、重要词汇或屏幕上看到的词汇。例如，菜单或对话框中的文字会像这样显示。以下是一个示例：“for 推导是按顺序调用 flatMap 的简写。这种技术被称为**单调流**。”

警告或重要提示看起来像这样。

小贴士和技巧看起来像这样。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：请通过`feedback@packtpub.com`发送电子邮件，并在邮件主题中提及书名。如果您对本书的任何方面有疑问，请通过`questions@packtpub.com`发送电子邮件给我们。

**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告，我们将非常感谢。请访问[www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的书，点击勘误提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上以任何形式遇到我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packtpub.com`与我们联系，并提供材料的链接。

**如果您有兴趣成为一名作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com/).

# 评论

请留下评论。一旦您阅读并使用了这本书，为何不在您购买它的网站上留下评论呢？潜在读者可以查看并使用您的客观意见来做出购买决定，我们 Packt 可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需了解更多关于 Packt 的信息，请访问 [packtpub.com](https://www.packtpub.com/).
