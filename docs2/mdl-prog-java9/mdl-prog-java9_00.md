# 前言

模块化随着 Java 9 的到来而到来，这是一件大事！与其他 Java 版本一样，它们带来了语言的新特性，你可以选择在代码中使用，Java 平台模块化系统则是一次对我们思考、设计和编写 Java 应用程序方式的彻底改变。

本书是一本详细的指南和实战伴侣，帮助你了解并编写 Java 中的模块化代码。阅读并完成本书中的代码后，你将对 Java 9 模块化、其特性、对平台的影响以及如何使用这一新范式自己构建模块化应用程序有一个深入的理解。

这本书经过精心设计，旨在为读者提供一个温和的入门介绍，同时逐渐增加所涵盖主题的范围和复杂性。这不是一本参考书。例如，当我介绍一个概念或一个特性时，我不会提供所有可能的细节或语法组合，以试图做到全面。我在写这本书时的主要目标是帮助你掌握概念，并深入理解 Java 模块化。本书中主题和讨论的顺序已经精心编排，以确保你始终具备理解所涵盖主题的必要知识。因此，这本书通过顺序阅读可以获得很大的益处。话虽如此，如果你已经了解了一些主题，并希望跳转到特定的主题，你也应该能够做到。为此，本书末尾提供了一个方便的索引。

# 本书涵盖的内容

第一章，*介绍 Java 9 模块化*，涵盖了 Java 8 及之前代码结构和管理现状。它概述了随着时间的推移维护和组织大型代码库的挑战和陷阱，以一个大家熟悉的大型 Java 代码库为例——JDK。然后介绍了 Jigsaw 项目，并解释了模块化概念如何试图解决上一章中概述的挑战。它讨论了 JDK 结构基于模块的变更以及创建应用程序代码中模块的能力。

第二章，*创建您的第一个 Java 模块*，通过一个不使用模块构造的示例代码项目让你入门。然后逐步引导你创建第一个 Java 9 模块。它介绍了模块关键字、module-info.java 类以及如何定义自定义 Java 模块。然后它涵盖了模块的编译和运行。它解释了.class 文件的结构以及运行时如何使用相同的模块定义来推断模块结构。

第三章，*处理模块间依赖*，展示了模块在孤立状态下几乎无法良好工作。它们被设计成更大单元的一部分，并且旨在相互协作。本章涵盖了创建第二个模块以及模块之间相互依赖的内容。你将学习如何在 Java 9 中定义这种关系，以及如何编译和运行多模块应用程序。

第四章，*介绍模块化 JDK*，将我们的注意力转向 Java 平台，特别是 JDK。你将了解平台模块化带来的 JDK 的重要变化。你还将了解随 JDK 一起提供的模块。此外，你还将了解浏览和获取有关这些模块更多信息的工具和技术。

第五章，*使用平台 API*，通过动手操作的逐步指南教你如何通过示例应用程序使用平台模块。你将了解在依赖平台模块时可能会遇到的一些挑战以及如何解决它们。

第六章，*模块解析、可读性和可访问性*，深入探讨了模块间的依赖关系以及如何控制它们模块和库的封装级别。它通过增加两个影响 Java 元素封装和可用性的新标准来继续前一章的模块解析讨论——可访问性和可读性。

第七章，*介绍服务*，探讨了示例应用程序中两个模块之间存在的耦合关键要素以及它是如何防止新模块的可扩展性和“插入”的。它解释了新的 Java 9 服务，提供了封装实现类的逐步指南，并使用 ServiceLoader 来查找它们。

第八章，*理解链接和使用 jlink*，介绍了 Java 9 开发过程中的静态链接步骤以及在此期间发生的事情。它解释了链接在 Java 9 开发模块时扮演的重要角色。然后提供了创建示例项目的运行时映像、如何优化它以及如何执行映像的逐步指南。

第九章，*模块设计模式和策略*，涵盖了在 Java 中构建模块化应用程序时的几个最佳实践。现在，你已经对 Java 模块系统特性和其工作原理有了很好的理解，下一个问题是何时以及如何使用它们？你将学习如何建立模块范围和边界，如何定义良好的模块接口，以及如何在构建模块化应用程序时解决一些常见挑战。

第十章，*为 Java 9 准备你的代码*，将指导你将一个旧的示例代码库（用 Java 7 编写）准备好迁移到 Java 9。它说明了 Java 模块的可选性质以及基于类路径的代码是如何自动分配给一个“未命名的”模块的。然后，它提供了逐步指导，以使遗留代码在 Java 9 中编译和运行。它还展示了如何处理封装类型的使用问题，以及如何解决这些问题。

第十一章，*将你的代码迁移到 Java 9*，将指导你将遗留代码升级以使用 Java 9 的新模块化特性。你将学习如何为你的代码制定迁移策略，以及如何处理与 Java 9 不兼容的依赖项。你将学习如何使用 Java 9 中旨在协助此类迁移的特性，例如自动模块和命令行覆盖。

第十二章，*使用构建工具和测试 Java 模块*，涵盖了 Java 编程的两个重要方面——构建工具集成和单元测试。你将学习如何使用 Maven 来构建你的项目，并将 Maven 的多模块项目概念与 Java 9 模块化应用程序对齐。你还将学习如何使用 JUnit 测试 Java 模块。

# 你需要这本书的内容

要跟随本书中的示例代码，你需要一台运行合理最新版本的 Windows、macOS 或 Linux 的计算机。你还需要一个文本编辑器来编辑代码。我强烈推荐使用允许你同时打开多个文件并轻松切换它们的文本编辑器。

# 这本书面向的对象

如果你是一名 Java 开发者，一直在编写 Java 应用程序，并且想要了解 Java 9 中的新模块化特性，那么这本书正是为你准备的。你可能正在从事一个 Java 9 模块化项目，或者可能被分配迁移现有 Java 代码库到 Java 9 的任务，或者你可能对 Java 模块化的热议感到好奇并想了解更多；无论如何，这本书都是适合你的！

本书假设你熟悉 Java 编程语言，并且之前已经编写过一些 Java 代码。它还假设你对你选择的操作系统的命令行界面感到舒适。书中将提供你需要运行的命令。

# 规范

在本书中，您将找到许多不同的文本样式，以区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 标签显示如下：“我们首先将在`ContactUtil`实例上调用`getContacts()`方法来获取硬编码的`Contact`列表。”

代码块设置如下：

```java
    module packt.addressbook { 
      requires packt.sortutil; 
    }
```

任何命令行输入或输出都按如下方式编写。以`$`开头的行表示输入命令。输入命令可能被分成多行以提高可读性，但需要在提示符下作为一行连续输入：

```java
$ export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)
```

**新术语**和**重要词汇**以粗体显示。屏幕上显示的单词，例如在菜单或对话框中，在文本中显示如下：“点击 File | New Project，您将在 Java 类别中看到一个带有新选项的 New Project 覆盖层——Java Modular Project。”

警告或重要注意事项显示如下。

技巧和窍门显示如下。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢或不喜欢的地方。读者反馈对我们来说很重要，因为它帮助我们开发出您真正能从中获得最大收益的书籍。

如要向我们发送一般反馈，请简单地将邮件发送至 `feedback@packtpub.com`，并在邮件主题中提及书籍标题。

如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您已经是 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助您从购买中获得最大收益。

# 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)上的账户下载此书的示例代码文件。如果您在其他地方购买了此书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的 SUPPORT 标签上。

1.  点击“代码下载与勘误”。

1.  在搜索框中输入书籍名称。

1.  选择您想要下载代码文件的书籍。

1.  从下拉菜单中选择您购买此书的来源。

1.  点击“代码下载”。

文件下载完成后，请确保使用最新版本的软件解压缩或提取文件夹：

+   对于 Windows，请使用 WinRAR / 7-Zip。

+   对于 macOS，请使用 Zipeg / iZip / UnRarX。

+   对于 Linux，请使用 7-Zip / PeaZip。

本书的相关代码包也托管在 GitHub 上，网址为[`github.com/koushikkothagal/Modular-Programming-in-Java-9`](https://github.com/koushikkothagal/Modular-Programming-in-Java-9)。我们还有其他来自我们丰富的图书和视频目录的代码包可供在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。去看看吧！

# 勘误

尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以避免其他读者感到沮丧，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。

要查看之前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在勘误部分下。

# 盗版

互联网上版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视保护我们的版权和许可证。如果您在网上遇到任何形式的非法复制我们的作品，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过`copyright@packtpub.com`与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们的作者和我们为您提供有价值内容的能力方面的帮助。

# 问题

如果您对本书的任何方面有问题，您可以通过`questions@packtpub.com`联系我们，我们将尽力解决问题。
