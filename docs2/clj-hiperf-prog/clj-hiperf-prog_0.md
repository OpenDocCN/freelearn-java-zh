# 前言

自本书第一版于 2013 年 11 月出版以来，Clojure 已经得到了更广泛的应用，并见证了许多成功案例。Clojure 的新版本加强了其性能故事，同时保持其根源——简单和实用。这一版对 Clojure 1.7 进行了重大更新，并增加了一章关于性能测量的内容。

Java 虚拟机在 Clojure 程序的性能中起着巨大的作用。本书的这一版增加了对 JVM 性能管理工具的关注，并探讨了如何使用这些工具。本书更新为使用 Java 8，尽管它也突出了使用 Java 7 或 8 特性的地方。

本书主要更新是为了使读者更实用。我希望这一版能更好地为读者提供性能测量和性能分析工具，以及分析并调整 Clojure 代码性能特性的知识。

# 本书涵盖内容

第一章，*设计性能*，根据性能对各种用例进行分类，并分析如何解释它们的性能方面和需求。

第二章，*Clojure 抽象*，是对各种 Clojure 数据结构、抽象（持久数据结构、变量、宏、转换器等）及其性能特性的导游。

第三章，*依赖 Java*，讨论了如何通过使用 Java 互操作性和 Clojure 的特性来提高性能。

第四章，*主机性能*，讨论了主机堆栈如何影响性能。作为一个托管语言，Clojure 的性能与其主机直接相关。

第五章，*并发*，是一个高级章节，讨论了 Clojure 和 JVM 中的并发和并行特性。并发是提高性能的一个越来越重要的方式。

第六章，*性能测量*，涵盖了性能基准和测量其他因素的各个方面。

第七章，*性能优化*，讨论了为了识别性能瓶颈并获得良好性能需要采取的系统步骤。

第八章，*应用性能*，讨论了为性能构建应用程序。这涉及到处理影响整体性能的外部子系统因素。

# 本书所需条件

为了能够完成所有示例，你需要为你的操作系统获取 Java 开发工具包（JDK）版本 8 或更高。本书讨论了 Oracle HotSpot JVM，因此如果你可能的话，你可能想要获取 Oracle JDK 或 OpenJDK（或 Zulu）。你还应该从[`leiningen.org/`](http://leiningen.org/)获取最新的 Leiningen 版本（截至写作时为 2.5.2），以及从[`jd.benow.ca/`](http://jd.benow.ca/)获取 JD-GUI。

# 本书面向对象

这本书是为对学习如何编写高性能代码感兴趣的 Clojure 中级程序员所写。如果你是 Clojure 的绝对初学者，你应该先学习语言的基础知识，然后再回到这本书。你不需要对性能工程或 Java 非常熟悉。然而，一些 Java 的先验知识会使得理解与 Java 相关的章节变得更加容易。

# 习惯用法

在本书中，你会找到许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称将如下所示：“请注意，Clojure 中的`identical?`与 Java 中的`==`相同。”

代码块设置如下：

```java
user=> (identical? "foo" "foo")  ; literals are automatically interned
true
user=> (identical? (String. "foo") (String. "foo"))  ; created string is not interned
false
```

**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的单词，例如在菜单或对话框中，在文本中会像这样显示：“点击**下一个**按钮将你带到下一个屏幕。”

### 注意

警告或重要注意事项以如下方式显示。

### 小贴士

小技巧和窍门会像这样显示。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们你对这本书的看法——你喜欢什么或不喜欢什么。读者反馈对我们来说很重要，因为它帮助我们开发出你真正能从中获得最大收益的标题。

要发送给我们一般性的反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在邮件的主题中提及本书的标题。

如果你在一个领域有专业知识，并且你对撰写或为本书做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在你已经是 Packt 图书的骄傲所有者，我们有一些可以帮助你从购买中获得最大收益的东西。

## 错误表

尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在我们的某本书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。

要查看之前提交的勘误表，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将在**勘误**部分显示。

## 盗版

互联网上对版权材料的盗版是一个持续存在的问题，涉及所有媒体。在 Packt，我们非常重视保护我们的版权和许可证。如果您在互联网上发现任何形式的我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以追究补救措施。

请通过`<copyright@packtpub.com>`联系我们，并提供疑似盗版材料的链接。

我们感谢您在保护我们的作者和提供有价值内容的能力方面的帮助。

## 电子书，折扣优惠等

您知道吗？Packt 为每本书提供电子书版本，提供 PDF 和 ePub 文件。您可以在[www.PacktPub.com](http://www.PacktPub.com)升级到电子书版本，作为印刷书客户，您有权享受电子书副本的折扣。有关更多详情，请联系`<customercare@packtpub.com>`。

在[www.PacktPub.com](http://www.PacktPub.com)，您还可以阅读一系列免费的技术文章，注册各种免费通讯，并享受 Packt 书籍和电子书的独家折扣和优惠。

## 问题

如果您在这本书的任何方面遇到问题，您可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决问题。
