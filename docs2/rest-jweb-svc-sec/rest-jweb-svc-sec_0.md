# 前言

在计算机系统开发中使用 Web 服务的固有优势与创建对它们进行安全管理需求的优势相同。今天，我们可以这样说，没有任何一家公司能够在完全隔离的状态下工作，无需与其他人互动、共享和消费信息。此外，这是任何公司的最重要资产。因此，这些需求在代码行之间也是共同的。本书通过实际场景和可应用解决方案，引导你一步步学习，以便你能够轻松学习到解决最常见需求的解决方案和实现方法。

与基于 SOAP 的 Web 服务相比，RESTful Web 服务提供了几个优势。例如，在处理数据类型时，根据你使用的编程语言或创建它们的库，使用空值（""）而不是 NULL 时可能会发现不一致性。此外，使用不同版本的库创建/消费 Web 服务时，可能会发现映射复杂对象和文件传输中的兼容性问题。在某些情况下，即使从.NET 应用程序中消费由 Java 创建的 Web 服务，最终也会在两者之间创建一个 Java 实现的中间服务。在 RESTful Web 服务中不会发生这种情况，因为在这种情况下，功能是通过 HTTP 方法调用暴露的。

为了保护信息，证券领域有许多有助于实现这一目标的功能。例如，了解如何通过认证和授权等一些问题来帮助实现任何选定的机制，其主要目标是使我们的应用程序更安全、更安全，这是至关重要的。选择每种不同的应用程序安全方式都与你想解决的问题相关；为此，我们展示了每种方式的用法场景。

许多时候，我们见过大型组织花费时间和精力创建自己的实现来处理安全，而不是使用已经解决了我们需要的标准的做法。通过我们想要与你分享的知识，我们希望避免这种重新发明轮子的过程。

# 本书涵盖内容

第一章，*设置环境*，帮助我们创建第一个功能应用程序，这与*Hello World*示例非常相似，但具有更多功能，并且非常接近现实世界。本章的主要目的是让我们熟悉我们将要使用的工具。

第二章, *确保 Web 服务的重要性*，探讨了 Java 平台中所有可能的认证模型。为了更好地理解，我们将一步一步深入探讨如何利用每个可用的认证模型。我们将展示信息是如何暴露的，以及第三方如何拦截它，并且我们将使用 Wireshark，这是一个非常好的工具来解释这一点。

最后，在本章中，我们将回顾认证和授权之间的区别。这两个概念都非常重要，并且在安全术语的背景下绝对不能忽视。

第三章, *使用 RESTEasy 进行安全管理*，展示了 RESTEasy 如何提供处理安全的机制，从相当基本的模型（粗粒度）到更复杂的模型（细粒度），在这个模型中你可以执行更彻底的控制，包括管理不仅配置文件，还包括程序文件。

第四章, *RESTEasy 骨架密钥*，帮助我们研究 OAuth 实现以及令牌携带实现和单点登录。所有这些都是为了限制资源共享的方式。一如既往，你将通过代码和真实示例进行实践。我们想向你展示通过这些技术共享应用程序之间的资源和信息是如何变成最有用和最强大的技术之一，允许客户端或用户只需使用一次凭证即可访问多个服务，限制第三方应用程序访问你的信息或数据，并通过令牌携带实现访问控制。你将学习如何应用这些技术和概念来构建安全且灵活的应用程序。

第五章, *数字签名和消息加密*，通过一个简单的示例帮助我们理解数字签名的优势；你会注意到消息的接收者可以验证发送者的身份。此外，我们将模拟外部代理在传输过程中修改数据的情况，并看看数字签名如何帮助我们检测它，以避免处理损坏的数据。

最后，我们将解释 SMIME 用于正文加密及其工作原理，通过一个加密请求和响应的示例来帮助你更好地理解。

# 你需要这本书的什么

为了实现和测试本书中的所有示例，我们将使用许多免费工具，如下所示：

+   Eclipse IDE（或任何其他 Java IDE）

+   JBoss AS 7

+   Maven

+   Wireshark

+   SoapUI

# 这本书面向谁

本书面向开发者、软件分析师、架构师或与软件开发和 RESTful Web 服务工作的人士。本书要求您具备一些关于 Java 或其他语言中面向对象编程概念的先验知识。

在本书中，您不需要具备关于安全模型的知识，因为我们将在书中解释理论并在实际示例中应用它。

# 术语

在本书中，您将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称应如下所示：“我们将修改`web.xml`文件。”

代码块应如下设置：

```java
private boolean isUserAllowed(final String username, final String password, final Set<String> rolesSet) {
    boolean isAllowed = false;
    if (rolesSet.contains(ADMIN)) {
      isAllowed = true;
    }
    return isAllowed;
  }
}
```

当我们希望引起您对代码块中特定部分的注意时，相关的行或项目将以粗体显示：

```java
final List<String> authorizationList = headersMap.get(AUTHORIZATION_PROPERTY);

```

任何命令行输入或输出都应如下所示：

```java
mvn clean install

```

**新术语**和**重要**词汇将以粗体显示。您在屏幕上看到的单词，例如在菜单或对话框中，在文本中应如下所示：“从弹出窗口中选择**SSL 设置**选项卡。”

### 注意

警告或重要提示将以这样的框显示。

### 小贴士

小技巧和窍门将以这样的形式出现。

# 读者反馈

我们欢迎读者提供的建议或评论。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正从中受益的标题以及改进我们传授知识的方式非常重要。

要发送给我们一般性的反馈，只需发送一封电子邮件到`<feedback@packtpub.com>`，并在邮件的主题中提及书名。

如果您在某个主题上具有专业知识，并且您有兴趣撰写或为本书做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，您已经成为 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从您在[`www.packtpub.com`](http://www.packtpub.com)的账户下载您购买的所有 Packt 书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。此外，我们强烈建议您从 GitHub 获取源代码，GitHub 地址为[`github.com/restful-java-web-services-security`](https://github.com/restful-java-web-services-security)。

## 错误清单

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的勘误部分下的现有勘误列表中。任何现有勘误都可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)中选择您的标题来查看。

## 盗版

在所有媒体中，互联网上对版权材料的盗版是一个持续存在的问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即向我们提供位置地址或网站名称，以便我们可以寻求补救措施。

如果您在书的任何方面遇到问题，请通过`<copyright@packtpub.com>`与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们作者以及为我们带来有价值内容方面的帮助。

## 询问

如果您在书的任何方面遇到问题，请通过`<questions@packtpub.com>`与我们联系，我们将尽力解决。
