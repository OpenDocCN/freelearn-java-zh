# 前言

Java 多年来一直是后端开发的主流技术。其背后的部分原因是它在 API 方面的稳定性高，严格的向后兼容性规则，为任何专业软件提供了一个非常稳定和可靠的骨干，以及其良好的性能。

Java EE 平台为开发者提供了一个灵活且强大的 API，使他们能够更多地关注平台已解决的问题的功能，而不是技术挑战。但这并不意味着你应该盲目使用它，而忘记容器为你所做的工作；这会导致应用程序表现不佳且无响应。

当谈到性能时，Java EE 设计得很好，让你能够获取指标，对你的应用程序进行仪表化，找到任何潜在的瓶颈，提高应用程序的性能以达到预期的服务水平协议（SLAs），并满足你的客户和最终用户。

然而，性能通常被认为是在应用程序完全开发后我们关注的事情。对于独立应用程序来说，这可能是对的，因为它们容易优化，因为它们是自包含的。然而，随着微服务和分布式应用程序的出现，你需要将性能视为一个持续的过程，以避免在之后不得不重新开发你的应用程序。

这就是本书的全部内容——为你提供所需工具，以便能够工作在 Java EE 应用程序的性能上，确保你从 Java EE API 的简单性中受益，而不会滥用它们并遇到意外，确保你提前考虑整个应用程序流程，而不仅仅是整个系统的一个子部分，这可能导致局部优化和全局悲剧，最后，确保你能够持续控制性能，因此在整个开发阶段都能顺利地工作，并成功交付高质量的产品。

# 本书面向对象

本书的目标受众是必须与 Java 和 Java EE 应用程序一起工作的人，特别是那些在本地或分布式环境中以及生产或开发环境中从事性能主题工作的人。

本书假设你至少熟悉 Java 8 开发和一些 Java EE 概念。你不需要成为 Java EE 专家，但基本理解诸如 Java 代理和拦截等概念将有助于你掌握本书中涵盖的概念。

# 本书涵盖内容

第一章，*货币 - 引用管理器应用*，首先解释了如何设置一个基本环境以便能够跟随本书的章节。它还展示了如何开发一个通用的 Java EE 8 应用，你可以在整章中用它来轻松测试每个主题。

第二章，*揭开盖子 – 这个 EE 是什么东西？*，解释了我们为什么使用 JavaEE 8 容器以及它为开发者带来了什么。它回顾了一些主流技术，并展示了服务器在幕后所做的工作以及它如何在不按设计方式使用时影响性能。

第三章，*监控你的应用程序*，针对应用程序的多种仪表化。高层次的目标是在每个级别和层面上获取你应用程序的指标，以确保你可以清楚地识别瓶颈并改进应用程序的性能。它使用了几种技术，简单或复杂程度不一，并针对你可以在应用程序上执行的不同工作阶段。

第四章，*应用程序优化 – 内存管理和服务器配置*，针对你可以使用的配置来优化你的应用程序，而无需修改你的代码。它主要围绕 JVM 内存调整，这在现代平台上可能非常高级，以及 Java EE 服务器配置，这可能值得一看。

第五章，*扩大规模 – 线程和影响*，专注于 Java EE 8 提供的线程模型。它首先列出你将使用的线程池，如何定义特定于你应用程序的新线程池以及如何与平台集成，最后，它开启了章节的结尾，讨论 Java EE 8 平台中的现代编程模型，这完全改变了你使用线程的方式，使其更加反应灵敏。

第六章，*懒散一点；缓存你的数据*，处理缓存问题。它首先解释了什么是缓存以及它应该如何帮助你提高性能。然后，它解释了 Java EE 8 如何帮助你依赖 HTTP 级别的缓存以及它是如何与 JCache 规范集成以极大地加快你的代码。

第七章，*具备容错性*，帮助你设计和编码分布式应用程序，如微服务，以保持你的性能可控和应用程序稳定。总体目标是确保你不会因为依赖的服务而受到不良影响，并且无论他人处于何种状态，你的服务都保持可用。换句话说，它帮助你防止系统某处出现问题时的多米诺效应。

第八章，*日志记录器和性能 - 权衡*，处理日志记录器。这无疑是所有应用程序中最常用的 API，但它也可能严重影响性能，因为一个使用不当或配置错误的日志记录器可能会对您的性能数据产生重大影响。本章解释了什么是日志框架以及如何使用它。这将帮助您避免所有这些陷阱。

第九章，*基准测试您的应用程序*，是关于您项目的专用基准项目或阶段。它解释了要使用哪些工具，要经过哪些步骤以确保您的基准测试是有用的，以及如何充分利用基准测试。

第十章，*持续性能评估*，探讨了确保您能够以连续的方式评估系统性能的几种解决方案。它的目的是确保您可以在每个开发阶段从系统中获取性能数据，并且在最极端的情况下，您甚至可以为项目上的每个 pull request 获取它。本章探讨了某些工具和解决方案，并解释了如何通过一些粘合代码来丰富一些现有的框架，以便进一步发展，而不会在尚未那么常见但非常重要的是具有定义 SLA 的应用程序的主题上受阻。

# 为了充分利用这本书。

1.  需要具备一些 Java 技术的知识才能阅读这本书。

1.  在性能调查方面有一些基本经验会很好。

1.  虽然不是强制性的，但了解分布式系统的一些知识可以帮助您理解某些部分。

1.  即使不是强制性的，也强烈建议您在可以开发和运行 Java 应用程序的计算机上操作。一个设置示例是具有 Linux 或 Windows 的机器，1 GB（建议 2 GB）的内存，双核 CPU 以及至少 1 GB 的可用磁盘空间。

1.  能够使用控制台将大大有帮助。

# 下载示例代码文件。

您可以从[www.packtpub.com](http://www.packtpub.com)的账户下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便直接将文件通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在[www.packtpub.com](http://www.packtpub.com/support)登录或注册。

1.  选择“支持”标签。

1.  点击“代码下载与勘误”。

1.  在搜索框中输入书的名称，并遵循屏幕上的说明。

下载文件后，请确保使用最新版本解压缩或提取文件夹：

+   适用于 Windows 的 WinRAR/7-Zip。

+   适用于 Mac 的 Zipeg/iZip/UnRarX。

+   适用于 Linux 的 7-Zip/PeaZip。

本书代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Java-EE-8-High-Performance`](https://github.com/PacktPublishing/Java-EE-8-High-Performance)。我们还有其他来自我们丰富图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表的彩色图像的 PDF 文件。您可以从这里下载：[`www.packtpub.com/sites/default/files/downloads/JavaEE8HighPerformance_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/JavaEE8HighPerformance_ColorImages.pdf)。

# 使用的约定

本书使用了多种文本约定。

`CodeInText`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“本书的大部分内容将适用于 Web 配置文件服务器，因此我们将我们的应用程序打包为`war`：”

代码块设置如下：

```java
<packaging>war</packaging>
```

任何命令行输入或输出都应如下编写：

```java
$ export JAVA_HOME=/home/developer/jdk1.8.0_144
$ export MAVEN_HOME=/home/developer/apache-maven-3.5.0
```

**粗体**: 表示新术语、重要单词或你在屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“从管理面板中选择系统信息。”

警告或重要提示看起来像这样。

技巧和窍门看起来像这样。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**: 请通过`feedback@packtpub.com`发送电子邮件，并在邮件主题中提及书籍标题。如果你对本书的任何方面有疑问，请通过`questions@packtpub.com`给我们发送电子邮件。

**勘误**: 尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果你在这本书中发现了错误，我们将不胜感激，如果你能向我们报告这一点。请访问[www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择你的书籍，点击勘误提交表单链接，并输入详细信息。

**盗版**: 如果你在互联网上以任何形式遇到我们作品的非法副本，如果你能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packtpub.com`与我们联系，并附上材料的链接。

**如果你有兴趣成为作者**: 如果你有一个你擅长的主题，并且你对撰写或为书籍做出贡献感兴趣，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦你阅读并使用了这本书，为什么不在你购买它的网站上留下评论呢？潜在的读者可以看到并使用你的无偏见意见来做出购买决定，Packt 公司可以了解你对产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需了解 Packt 的更多信息，请访问 [packtpub.com](https://www.packtpub.com/)
