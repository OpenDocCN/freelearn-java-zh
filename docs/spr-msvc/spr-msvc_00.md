# 前言

微服务是一种架构风格和模式，复杂系统被分解为较小的服务，这些服务共同形成更大的业务服务。微服务是自治的、独立的，可以独立部署的服务。在当今世界，许多企业将微服务作为构建大型面向服务的企业应用程序的默认标准。

Spring 框架是开发者社区多年来广受欢迎的编程框架。Spring Boot 消除了需要使用笨重的应用容器，并提供了一种部署轻量级、无服务器应用程序的方法。Spring Cloud 结合了许多 Netflix OSS 组件，并提供了一个运行和管理大规模微服务的生态系统。它提供了诸如负载平衡、服务注册、监控、服务网关等功能。

然而，微服务也带来了自己的挑战，例如监控、管理、分发、扩展、发现等，特别是在大规模部署时。在不解决常见的微服务挑战的情况下采用微服务将导致灾难性的结果。本书最重要的部分是一个技术无关的微服务能力模型，它有助于解决所有常见的微服务挑战。

本书的目标是以务实的方法和指南为读者提供在大规模实施响应式微服务时的启示。本书将带领读者深入了解 Spring Boot、Spring Cloud、Docker、Mesos 和 Marathon。本书的读者将了解 Spring Boot 如何用于部署无服务器的自治服务，从而消除了使用笨重的应用服务器的需要。读者将学习不同的 Spring Cloud 功能，并了解 Docker 用于容器化以及 Mesos 和 Marathon 用于计算资源抽象和集群范围控制的用途。

我相信读者会喜欢本书的每一部分。而且，我真诚地相信本书通过成功构思微服务为您的业务增添了巨大的价值。在整本书中，我通过提供许多例子，包括旅行领域的案例研究，使用了微服务实施的实际方面。最终，您将学会如何使用 Spring 框架、Spring Boot 和 Spring Cloud 实施微服务架构。这些都是经过实战检验的强大工具，用于开发和部署可扩展的微服务。根据 Spring 的最新规范编写，借助本书的帮助，您将能够在短时间内构建现代的、互联网规模的 Java 应用程序。

# 本书涵盖的内容

《第一章》《解密微服务》为您介绍了微服务。本章涵盖了微服务的基本概念、它们的演变以及它们与面向服务的架构的关系，以及云原生和十二要素应用的概念。

《第二章》《使用 Spring Boot 构建微服务》介绍了如何使用 Spring 框架构建基于 REST 和消息的微服务，以及如何使用 Spring Boot 封装它们。此外，我们还将探索 Spring Boot 的一些核心功能。

《第三章》《应用微服务概念》详细解释了微服务实施的实际方面，详细说明了开发人员在企业级微服务中面临的挑战。这也将总结成功管理微服务生态系统所需的能力。

第四章，“微服务演进-案例研究”，将读者带入了一个真实的微服务演进案例研究，介绍了 BrownField 航空公司。使用案例研究，本章解释了如何应用前几章学到的微服务概念。

第五章，“使用 Spring Cloud 扩展微服务”，展示了如何使用 Spring Cloud 堆栈功能扩展先前的示例。它详细介绍了 Spring Cloud 的架构和不同组件以及它们如何集成在一起。

第六章，“微服务的自动扩展”，演示了使用简单的生命周期管理器来实现弹性和微服务的自我管理，通过编排服务网关来编排服务。它解释了在现实世界中如何向服务网关添加智能。

第七章，“微服务的日志记录和监控”，涵盖了在开发微服务时日志记录和监控方面的重要性。在这里，我们将详细介绍使用微服务时一些最佳实践，如使用开源工具实现集中式日志记录和监控功能，以及如何将它们与 Spring 项目集成。

第八章，“使用 Docker 容器化微服务”，解释了微服务上下文中的容器化概念。使用 Mesos 和 Marathon，本章演示了一个替代自定义生命周期管理器用于大规模部署的下一级实现。

第九章，“使用 Mesos 和 Marathon 管理 Docker 化的微服务”，解释了微服务的自动配置和部署。在这里，您还将学习如何在前面的示例中使用 Docker 容器进行大规模部署。

第十章，“微服务开发生命周期”，涵盖了微服务开发的过程和实践。本章还解释了 DevOps 和持续交付管道的重要性。

# 本书需要什么

第二章，“使用 Spring Boot 构建微服务”，介绍了 Spring Boot，需要以下软件组件来测试代码：

+   JDK 1.8

+   Spring Tool Suite 3.7.2 (STS)

+   Maven 3.3.1

+   Spring Framework 4.2.6.RELEASE

+   Spring Boot 1.3.5.RELEASE

+   `spring-boot-cli-1.3.5.RELEASE-bin.zip`

+   RabbitMQ 3.5.6

+   FakeSMTP

在第五章，“使用 Spring Cloud 扩展微服务”，您将了解 Spring Cloud 项目。除了前面提到的软件组件外，还需要以下软件组件：

+   Spring Cloud Brixton.RELEASE

在第七章，“微服务的日志记录和监控”中，我们将看看如何为微服务实现集中式日志记录。这需要以下软件堆栈：

+   Elasticsearch 1.5.2

+   `kibana-4.0.2-darwin-x64`

+   Logstash 2.1.2

在第八章，“使用 Docker 容器化微服务”，我们将演示如何使用 Docker 进行微服务部署。这需要以下软件组件：

+   Docker 版本 1.10.1

+   Docker Hub

第九章，“使用 Mesos 和 Marathon 管理 Docker 化的微服务”，使用 Mesos 和 Marathon 将 docker 化的微服务部署到可自动扩展的云中。为此需要以下软件组件：

+   Mesos 版本 0.27.1

+   Docker 版本 1.6.2

+   本书主要面向寻求构建云就绪的互联网规模应用程序以满足现代业务需求的 Spring 开发人员。本书将通过检查许多真实用例和实际代码示例，帮助开发人员了解微服务的确切含义以及它们为何在当今世界中如此重要。开发人员将了解如何构建简单的 RESTful 服务，并将其有机地发展成真正的企业级微服务生态系统。

# 马拉松版本 0.15.3

警告或重要说明以如下方式显示在一个框中。

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以如下方式出现在文本中：“点击**发出请求**按钮。”

# 代码块设置如下：

本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例以及它们的含义解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下：“可以在`application.properties`中设置以下属性来自定义与应用程序相关的信息。”

```java
<parent>
  <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>1.3.4.RELEASE</version>
</parent>
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目以粗体设置：

```java
eureka-server2.properties
eureka.client.serviceUrl.defaultZone:http://localhost:8761/eureka/
eureka.client.registerWithEureka:false
eureka.client.fetchRegistry:false
```

任何命令行输入或输出都以以下方式编写：

```java
$ java -jar fakeSMTP-2.0.jar

```

本书适合对象

### 注意

约定

### 提示和技巧以如下方式出现。

本书将对寻求使用 Spring 框架、Spring Boot 和 Spring Cloud 设计强大的互联网规模微服务，并使用 Docker、Mesos 和 Marathon 进行管理的架构师感兴趣。能力模型将帮助架构师制定甚至超越本书讨论的工具和技术的解决方案。
